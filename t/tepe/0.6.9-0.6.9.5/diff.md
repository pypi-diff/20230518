# Comparing `tmp/tepe-0.6.9-py3-none-any.whl.zip` & `tmp/tepe-0.6.9.5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,9 +1,9 @@
-Zip file size: 267204 bytes, number of entries: 161
--rw-rw-r--  2.0 unx      132 b- defN 23-Jan-04 08:53 tepe/__init__.py
+Zip file size: 267288 bytes, number of entries: 161
+-rw-rw-r--  2.0 unx      134 b- defN 23-Jan-10 08:16 tepe/__init__.py
 -rw-rw-r--  2.0 unx      274 b- defN 22-Dec-21 12:51 tepe/core/__init__.py
 -rw-rw-r--  2.0 unx     3820 b- defN 22-Oct-25 02:49 tepe/core/base_evaluator.py
 -rw-rw-r--  2.0 unx     6474 b- defN 22-Dec-23 03:42 tepe/core/base_predictor.py
 -rw-rw-r--  2.0 unx     8654 b- defN 22-Oct-28 02:33 tepe/core/base_task.py
 -rw-rw-r--  2.0 unx    12207 b- defN 22-Oct-25 02:49 tepe/core/base_trainer.py
 -rw-rw-r--  2.0 unx     5180 b- defN 22-Oct-25 02:49 tepe/core/exporter.py
 -rw-rw-r--  2.0 unx     4331 b- defN 22-Dec-21 12:55 tepe/core/launch.py
@@ -88,15 +88,15 @@
 -rw-rw-r--  2.0 unx     8426 b- defN 22-Dec-08 07:25 tepe/tasks/cfa/task.py
 -rw-rw-r--  2.0 unx     3507 b- defN 22-Oct-25 02:49 tepe/tasks/cfa/utils.py
 -rw-rw-r--  2.0 unx       26 b- defN 22-Oct-25 02:49 tepe/tasks/rd/__init__.py
 -rw-rw-r--  2.0 unx    16424 b- defN 22-Nov-10 10:24 tepe/tasks/rd/de_resnet.py
 -rw-rw-r--  2.0 unx    10599 b- defN 23-Jan-04 08:52 tepe/tasks/rd/evalutor.py
 -rw-rw-r--  2.0 unx     2651 b- defN 22-Dec-23 09:13 tepe/tasks/rd/find_thr.py
 -rw-rw-r--  2.0 unx     2777 b- defN 22-Dec-22 09:56 tepe/tasks/rd/model.py
--rw-rw-r--  2.0 unx    10424 b- defN 23-Jan-04 08:50 tepe/tasks/rd/predictor.py
+-rw-rw-r--  2.0 unx    10713 b- defN 23-Jan-10 07:14 tepe/tasks/rd/predictor.py
 -rw-rw-r--  2.0 unx    22705 b- defN 22-Oct-25 02:49 tepe/tasks/rd/resnet.py
 -rw-rw-r--  2.0 unx    12266 b- defN 22-Dec-23 03:40 tepe/tasks/rd/task copy.py
 -rw-rw-r--  2.0 unx     9990 b- defN 23-Jan-04 08:51 tepe/tasks/rd/task.py
 -rw-rw-r--  2.0 unx     2347 b- defN 22-Dec-08 08:18 tepe/tasks/rd/trainer.py
 -rw-rw-r--  2.0 unx     3029 b- defN 22-Dec-21 03:50 tepe/tasks/rd/utils.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-08 10:16 tepe/tasks/yolox/__init__.py
 -rw-rw-r--  2.0 unx    14894 b- defN 22-Nov-08 10:25 tepe/tasks/yolox/task.py
@@ -151,13 +151,13 @@
 -rw-rw-r--  2.0 unx    10309 b- defN 22-Dec-21 13:01 tepe/utils/dist.py
 -rw-rw-r--  2.0 unx    29582 b- defN 22-Dec-25 02:40 tepe/utils/general.py
 -rw-rw-r--  2.0 unx     3267 b- defN 22-Dec-21 06:48 tepe/utils/get_subimg.py
 -rw-rw-r--  2.0 unx     2036 b- defN 22-Oct-25 02:49 tepe/utils/meter.py
 -rw-rw-r--  2.0 unx    12451 b- defN 22-Oct-25 02:49 tepe/utils/plots.py
 -rw-rw-r--  2.0 unx    12725 b- defN 22-Oct-25 02:49 tepe/utils/tensorrt_utils.py
 -rw-rw-r--  2.0 unx    10692 b- defN 22-Nov-08 10:27 tepe/utils/torch_utils.py
--rw-rw-r--  2.0 unx     1074 b- defN 23-Jan-04 09:07 tepe-0.6.9.dist-info/LICENSE
--rw-rw-r--  2.0 unx     4598 b- defN 23-Jan-04 09:07 tepe-0.6.9.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Jan-04 09:07 tepe-0.6.9.dist-info/WHEEL
--rw-rw-r--  2.0 unx        5 b- defN 23-Jan-04 09:07 tepe-0.6.9.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    14106 b- defN 23-Jan-04 09:07 tepe-0.6.9.dist-info/RECORD
-161 files, 811859 bytes uncompressed, 244912 bytes compressed:  69.8%
+-rw-rw-r--  2.0 unx     1074 b- defN 23-Jan-10 08:16 tepe-0.6.9.5.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     4600 b- defN 23-Jan-10 08:16 tepe-0.6.9.5.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jan-10 08:16 tepe-0.6.9.5.dist-info/WHEEL
+-rw-rw-r--  2.0 unx        5 b- defN 23-Jan-10 08:16 tepe-0.6.9.5.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    14116 b- defN 23-Jan-10 08:16 tepe-0.6.9.5.dist-info/RECORD
+161 files, 812162 bytes uncompressed, 244976 bytes compressed:  69.8%
```

## zipnote {}

```diff
@@ -462,23 +462,23 @@
 
 Filename: tepe/utils/tensorrt_utils.py
 Comment: 
 
 Filename: tepe/utils/torch_utils.py
 Comment: 
 
-Filename: tepe-0.6.9.dist-info/LICENSE
+Filename: tepe-0.6.9.5.dist-info/LICENSE
 Comment: 
 
-Filename: tepe-0.6.9.dist-info/METADATA
+Filename: tepe-0.6.9.5.dist-info/METADATA
 Comment: 
 
-Filename: tepe-0.6.9.dist-info/WHEEL
+Filename: tepe-0.6.9.5.dist-info/WHEEL
 Comment: 
 
-Filename: tepe-0.6.9.dist-info/top_level.txt
+Filename: tepe-0.6.9.5.dist-info/top_level.txt
 Comment: 
 
-Filename: tepe-0.6.9.dist-info/RECORD
+Filename: tepe-0.6.9.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## tepe/__init__.py

```diff
@@ -1,5 +1,5 @@
-__version__ = "0.6.9"
+__version__ = "0.6.9.5"
 
 from . import tasks
 from .core import get_task, print_tasks, get_task_cls
 from .core.exporter import Exporter
```

## tepe/tasks/rd/predictor.py

```diff
@@ -91,35 +91,36 @@
                 anomaly_map = self.model(inp.unsqueeze(0).to(self.device))
             anomaly_map = anomaly_map.squeeze(0).cpu().detach().numpy()
 
         anomaly_map = gaussian_filter(anomaly_map, sigma=4)
 
         return anomaly_map
 
-    def postprocess(self, anomaly_map, img_shape):
+    def postprocess(self, anomaly_map, img_shape,
+                    min_anomaly_value=None, max_anomaly_value=None):
         if isinstance(self.input_size, int):
             self.input_size = [self.input_size, self.input_size]
 
         src_area = self.input_size[1] * self.input_size[0]
         area_limit = int(src_area * 0.12 * 0.5 * 0.01)
         length_limit = int(pow(area_limit, 0.5) * 0.5)  # 6
 
         img_h, img_w = img_shape[:2]
         if (np.max(anomaly_map) > self.img_thr):
-            anomaly_map = self.min_max_norm(anomaly_map)
+            anomaly_map = self.min_max_norm(anomaly_map, min_anomaly_value, max_anomaly_value)
             anomaly_map = gaussian_filter(anomaly_map, sigma=4)
             anomaly_map = cv2.resize(anomaly_map, self.input_size)
 
             # image_max = ndi.maximum_filter(im, size=10, mode='constant')
             # Comparison between image_max and im to find the coordinates of local maxima
             if (self.use_peak):
                 gray_map = np.uint8(anomaly_map * 255)
                 im = img_as_float(gray_map)
                 coordinates = peak_local_max(im, min_distance=self.peak_min_distance,
-                                             threshold_rel=self.peak_threshold_rel)  # 返回[行，列]，即[y, x]
+                                             threshold_rel=self.peak_threshold_rel, exclude_border=False)  # 返回[行，列]，即[y, x]
             # coordinates = coordinates[anomaly_map[coordinates[:, 0], coordinates[:, 1]] > 0.8 * np.max(anomaly_map)]
             else:
                 coordinates = []
             mask = anomaly_map.copy()
             mask[mask > self.threshold] = 1
             mask[mask <= self.threshold] = 0
             kernel = morphology.disk(4)
@@ -167,16 +168,17 @@
         del anomaly_area, coordinates
 
         return dict(
             anomaly_area=bboxes,
             anomaly_point=points
         )
 
-    def min_max_norm(self, image):
-        a_min, a_max = image.min(), image.max()
+    def min_max_norm(self, image,  min_anomaly_value=None, max_anomaly_value=None):
+        a_min = image.min() if min_anomaly_value is None else min_anomaly_value
+        a_max = image.max() if max_anomaly_value is None else max_anomaly_value
         return (image - a_min) / (a_max - a_min)
 
     def run(self, img_meta):
         img, path, is_vid, idx = img_meta['img'], img_meta['path'], img_meta['is_vid'], img_meta['idx']
 
         anomaly_map = self.infer(img)
```

## Comparing `tepe-0.6.9.dist-info/LICENSE` & `tepe-0.6.9.5.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `tepe-0.6.9.dist-info/METADATA` & `tepe-0.6.9.5.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: tepe
-Version: 0.6.9
+Version: 0.6.9.5
 Summary: A concise and unified toolkit for Anomaly Detection's Training, Evalutation, Prediction and Export (AD-TEPE).
 Author: Lenovo Reaserch SD&S
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python :: 3 :: Only
 Requires-Python: >=3.8
 Description-Content-Type: text/markdown
 License-File: LICENSE
```

## Comparing `tepe-0.6.9.dist-info/RECORD` & `tepe-0.6.9.5.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-tepe/__init__.py,sha256=EUfrs1g-rq_BPnquSoJLubQBKCSbq_yiS5mepr-BwHM,132
+tepe/__init__.py,sha256=fJaI-pDc7oCXDFkR9FmOj6vpuQgijEO9cHJHezmQeGI,134
 tepe/core/__init__.py,sha256=VKLNAyhijWF1rlx2RjF7olLb4hBhAxV93Y0Dd60NqMo,274
 tepe/core/base_evaluator.py,sha256=qiEYUBGmP3gYg9mJxj3MGzVaS3uaqC7K6aWhZQ16RbQ,3820
 tepe/core/base_predictor.py,sha256=Q5Fhcj_b3mNCWGB4tuMyi9k9ZVMo2wAj4i-OISTP6YY,6474
 tepe/core/base_task.py,sha256=upcrPFQ5UGsVYbuRArKhsHfw79P3_c2-mR2-J-HYhwo,8654
 tepe/core/base_trainer.py,sha256=BXfp2pXisFtQo4wufH2CAo7g-qeqpQc5xtJz2uGm_rA,12207
 tepe/core/exporter.py,sha256=-yCqDpdzkr8_l8XRZ7HL9FibbZ8J4CR6Q8z_vChrC2o,5180
 tepe/core/launch.py,sha256=sRPPxuYsNU4HV8d_oEKLnF-bGs-EdvdhBPZGqaQBrGA,4331
@@ -87,15 +87,15 @@
 tepe/tasks/cfa/task.py,sha256=YLB69FWv5sJ6LB6CWoUdOXRMR9IlJ1FhL2xoLczFB7w,8426
 tepe/tasks/cfa/utils.py,sha256=Z5G6eb7jf-wlOPy4NP17ZYE4XKZt_pjTKl_mN1hIr6o,3507
 tepe/tasks/rd/__init__.py,sha256=jrsqoxGXKRI_-8mzHHqKVQeLHNueDldVkWSTCQKvB4Q,26
 tepe/tasks/rd/de_resnet.py,sha256=drxThDlcWL9kFC34qdrstlbxfNwbceUmQt5u9HJaa68,16424
 tepe/tasks/rd/evalutor.py,sha256=M2RNCIWIZby1TZ5U_6uOV0H0W6S90Mz9zEaxiMLbX1I,10599
 tepe/tasks/rd/find_thr.py,sha256=kXzipYw6gooH_YkUMP6Cjwjso_fmdZRalzxnYUs3onw,2651
 tepe/tasks/rd/model.py,sha256=cuKF4uKnT7rgG47cEMG-GeVelZMGyIbzTjLBK9YB6Wo,2777
-tepe/tasks/rd/predictor.py,sha256=RyXdSkMV6VMxl-NLmF2fwXB5F_4VH2P67fAXS0TT7BA,10424
+tepe/tasks/rd/predictor.py,sha256=bXD8NelaPpgLV6CEggNGJc_7kHCcDlpl6F-yHtpzVl4,10713
 tepe/tasks/rd/resnet.py,sha256=ePkUtiu5th77-iDCmpw8EOKnrBvFD3XBCM3sDhViW0c,22705
 tepe/tasks/rd/task copy.py,sha256=yx5qzB12jGTIEr1C41usOAJ81HAD8LsfFelH8HckXfg,12266
 tepe/tasks/rd/task.py,sha256=m40QG0r659EukTVzndKgIbBSMyIaR_gaXI6xI3lWSAQ,9990
 tepe/tasks/rd/trainer.py,sha256=2Plc7A8sz0HnlEEZrGXUlJOoSiT9p-AkkQsOHvKQ1hs,2347
 tepe/tasks/rd/utils.py,sha256=8A7XzgNI-8ueCPbFKm0laIFApsc_84n4tLRLg2G0v3Y,3029
 tepe/tasks/yolox/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 tepe/tasks/yolox/task.py,sha256=lOXsPpt6-beD0F7umLei_L4kq-8Rdlh1XoBKLH9J-8w,14894
@@ -150,12 +150,12 @@
 tepe/utils/dist.py,sha256=8Y0YouHqepyXZ-In1pyUAw3d09U-HuR08FEOWG9rK-E,10309
 tepe/utils/general.py,sha256=5Z5HBv07hKoWxO87Jm60rM_lNEPGVcYWZw7DGTCv34A,29582
 tepe/utils/get_subimg.py,sha256=uenIvcNkiVC-eT14ayX26ksQiWn8BDP2ueGIxz0hJbU,3267
 tepe/utils/meter.py,sha256=rp3IeDaumP-BzeoWvzVss4732EKOFdBi34NlJtSuek0,2036
 tepe/utils/plots.py,sha256=saU5HBG3xozogrOgcay091xTFTLhgp4vU3odQVW-cT0,12451
 tepe/utils/tensorrt_utils.py,sha256=vBaYx4d4a7KV3n9dehtR5FDYBEnBuBJaMQLRxn9GSRE,12725
 tepe/utils/torch_utils.py,sha256=U4p-YS_J9T4R0ZnDJsZ13mWiLGwgbBhGT3ifqpLDhYo,10692
-tepe-0.6.9.dist-info/LICENSE,sha256=TBh4mh7F9f9QCdC7A0R0RXs-BapBFif4y1CKijUbVPg,1074
-tepe-0.6.9.dist-info/METADATA,sha256=OS10KPmOMJdNpzioRCXFYAoswTuwnxP8inAl9DQ63bk,4598
-tepe-0.6.9.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-tepe-0.6.9.dist-info/top_level.txt,sha256=8Qwi0duputYwoUn43in0RfJvoONnn0u8P_rrU5KiE50,5
-tepe-0.6.9.dist-info/RECORD,,
+tepe-0.6.9.5.dist-info/LICENSE,sha256=TBh4mh7F9f9QCdC7A0R0RXs-BapBFif4y1CKijUbVPg,1074
+tepe-0.6.9.5.dist-info/METADATA,sha256=HbDtSxbso_xG12gA03d6YpTdaTgZVcBzkBriR3gopr4,4600
+tepe-0.6.9.5.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+tepe-0.6.9.5.dist-info/top_level.txt,sha256=8Qwi0duputYwoUn43in0RfJvoONnn0u8P_rrU5KiE50,5
+tepe-0.6.9.5.dist-info/RECORD,,
```

