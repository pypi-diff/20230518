# Comparing `tmp/riptable-1.7.0.tar.gz` & `tmp/riptable-1.8.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "riptable-1.7.0.tar", last modified: Tue May  9 20:36:40 2023, max compression
+gzip compressed data, was "riptable-1.8.0.tar", last modified: Thu May 18 15:30:25 2023, max compression
```

## Comparing `riptable-1.7.0.tar` & `riptable-1.8.0.tar`

### file list

```diff
@@ -1,263 +1,263 @@
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.098886 riptable-1.7.0/
--rw-rw-rw-   0        0        0      291 2023-05-09 20:23:24.000000 riptable-1.7.0/.editorconfig
--rw-rw-rw-   0        0        0      196 2023-05-09 20:23:24.000000 riptable-1.7.0/.gitattributes
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.286003 riptable-1.7.0/.github/
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.302582 riptable-1.7.0/.github/workflows/
--rw-rw-rw-   0        0        0     7747 2023-05-09 20:23:24.000000 riptable-1.7.0/.github/workflows/python-package.yml
--rw-rw-rw-   0        0        0     2110 2023-05-09 20:23:24.000000 riptable-1.7.0/.gitignore
--rw-rw-rw-   0        0        0      309 2023-05-09 20:23:24.000000 riptable-1.7.0/BUILDNOTES.txt
--rw-rw-rw-   0        0        0     2634 2023-05-09 20:23:24.000000 riptable-1.7.0/LICENSE
--rw-rw-rw-   0        0        0     3464 2023-05-09 20:23:24.000000 riptable-1.7.0/LICENSES-thirdparty.md
--rw-rw-rw-   0        0        0      196 2023-05-09 20:23:24.000000 riptable-1.7.0/MANIFEST.in
--rw-rw-rw-   0        0        0      659 2023-05-09 20:36:40.098886 riptable-1.7.0/PKG-INFO
--rw-rw-rw-   0        0        0     6083 2023-05-09 20:23:24.000000 riptable-1.7.0/README.md
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.302582 riptable-1.7.0/conda_recipe/
--rw-rw-rw-   0        0        0       19 2023-05-09 20:23:24.000000 riptable-1.7.0/conda_recipe/conda_build_config.yaml
--rw-rw-rw-   0        0        0     1804 2023-05-09 20:23:24.000000 riptable-1.7.0/conda_recipe/meta.yaml
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.302582 riptable-1.7.0/dev_tools/
--rw-rw-rw-   0        0        0     3944 2023-05-09 20:23:24.000000 riptable-1.7.0/dev_tools/gen_requirements.py
--rw-rw-rw-   0        0        0    25367 2023-05-09 20:23:24.000000 riptable-1.7.0/dev_tools/validate_docstrings.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.318222 riptable-1.7.0/docs/
--rw-rw-rw-   0        0        0      901 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/CONTRIBUTING.md
--rw-rw-rw-   0        0        0      658 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/Makefile
--rw-rw-rw-   0        0        0     2979 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/THREADING.md
--rwxrwxrwx   0        0        0      799 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/make.bat
--rw-rw-rw-   0        0        0     1085 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/riptable_logo.PNG
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.318222 riptable-1.7.0/docs/source/
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.318222 riptable-1.7.0/docs/source/_static/
--rw-rw-rw-   0        0        0        0 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/_static/.keep
--rw-rw-rw-   0        0        0    14482 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/benchmarking.rst
--rw-rw-rw-   0        0        0     4478 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/conf.py
--rw-rw-rw-   0        0        0      487 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/index.rst
--rw-rw-rw-   0        0        0       68 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/modules.rst
--rw-rw-rw-   0        0        0     6795 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/riptable.rst
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.895775 riptable-1.7.0/docs/source/tutorial/
--rw-rw-rw-   0        0        0    23344 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/RiptableExercises.ipynb
--rw-rw-rw-   0        0        0    95601 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/RiptableSolutions.ipynb
--rw-rw-rw-   0        0        0    35605 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_11_0.png
--rw-rw-rw-   0        0        0     5827 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_13_0.png
--rw-rw-rw-   0        0        0    60197 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_15_0.png
--rw-rw-rw-   0        0        0   148394 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_25_0.png
--rw-rw-rw-   0        0        0   100101 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_27_0.png
--rw-rw-rw-   0        0        0    16998 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/perf-may-suffer.png
--rw-rw-rw-   0        0        0    45876 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_autocomplete.png
--rw-rw-rw-   0        0        0    24063 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_autocomplete_internal.png
--rw-rw-rw-   0        0        0    12995 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_dataset.svg
--rw-rw-rw-   0        0        0    21979 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_dataset_indices.svg
--rw-rw-rw-   0        0        0     6885 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_fastarray.svg
--rw-rw-rw-   0        0        0    83328 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/split-apply-combine-gray.svg
--rw-rw-rw-   0        0        0      770 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial.rst
--rw-rw-rw-   0        0        0    13974 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_accums.rst
--rw-rw-rw-   0        0        0     3913 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_cat_adv_instantiation.rst
--rw-rw-rw-   0        0        0     2914 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_cat_reduce.rst
--rw-rw-rw-   0        0        0    49655 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_categoricals.rst
--rw-rw-rw-   0        0        0     7129 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_concat.rst
--rw-rw-rw-   0        0        0    35411 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_datasets.rst
--rw-rw-rw-   0        0        0    32677 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_datetimes.rst
--rw-rw-rw-   0        0        0    15663 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_filters.rst
--rw-rw-rw-   0        0        0    13353 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_intro.rst
--rw-rw-rw-   0        0        0    13470 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_io.rst
--rw-rw-rw-   0        0        0    19432 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_merge.rst
--rw-rw-rw-   0        0        0    13843 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_missing_data.rst
--rw-rw-rw-   0        0        0      820 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_numpy_rt.rst
--rw-rw-rw-   0        0        0     1993 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_performance.rst
--rw-rw-rw-   0        0        0     4168 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_reshape.rst
--rw-rw-rw-   0        0        0     5500 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_sample_data.rst
--rw-rw-rw-   0        0        0    12285 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_visualize.rst
--rw-rw-rw-   0        0        0      236 2023-05-09 20:23:24.000000 riptable-1.7.0/environment.yml
--rw-rw-rw-   0        0        0     3372 2023-05-09 20:23:24.000000 riptable-1.7.0/pyproject.toml
--rw-rw-rw-   0        0        0       47 2023-05-09 20:23:24.000000 riptable-1.7.0/requirements.txt
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.958258 riptable-1.7.0/riptable/
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.973888 riptable-1.7.0/riptable/Utils/
--rw-rw-rw-   0        0        0        2 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/__init__.py
--rw-rw-rw-   0        0        0    25494 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/appdirs.py
--rw-rw-rw-   0        0        0     9278 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/common.py
--rw-rw-rw-   0        0        0     8728 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/conversion_utils.py
--rw-rw-rw-   0        0        0    21765 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/display_options.py
--rw-rw-rw-   0        0        0    13165 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/ipython_utils.py
--rw-rw-rw-   0        0        0     2250 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/pandas_utils.py
--rw-rw-rw-   0        0        0    18073 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_display_nested.py
--rw-rw-rw-   0        0        0    14097 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_display_properties.py
--rw-rw-rw-   0        0        0     3764 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_metadata.py
--rw-rw-rw-   0        0        0    18355 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_testdata.py
--rw-rw-rw-   0        0        0    11396 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_testing.py
--rw-rw-rw-   0        0        0      501 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/teamcity_helper.py
--rw-rw-rw-   0        0        0     3056 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/terminalsize.py
--rw-rw-rw-   0        0        0     6318 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/__init__.py
--rw-rw-rw-   0        0        0       21 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable/_version.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.989508 riptable-1.7.0/riptable/benchmarks/
--rw-rw-rw-   0        0        0     3959 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/__init__.py
--rw-rw-rw-   0        0        0      109 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/__main__.py
--rw-rw-rw-   0        0        0     8894 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/analysis.py
--rw-rw-rw-   0        0        0      725 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_categorical.py
--rw-rw-rw-   0        0        0    11417 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_grouping.py
--rw-rw-rw-   0        0        0    20287 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_merge.py
--rw-rw-rw-   0        0        0    24715 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_numpy.py
--rw-rw-rw-   0        0        0     1079 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_operators.py
--rw-rw-rw-   0        0        0    46367 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_primops.py
--rw-rw-rw-   0        0        0     6962 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/benchmark.py
--rw-rw-rw-   0        0        0    15951 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/main.py
--rw-rw-rw-   0        0        0     9889 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/rand_data.py
--rw-rw-rw-   0        0        0    19557 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/rand_keydata.py
--rw-rw-rw-   0        0        0      914 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/results.py
--rw-rw-rw-   0        0        0    13245 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/runner.py
--rw-rw-rw-   0        0        0     1475 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/config.py
--rw-rw-rw-   0        0        0     2685 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/conftest.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.005105 riptable-1.7.0/riptable/hypothesis_tests/
--rw-rw-rw-   0        0        0        9 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/__init__.py
--rw-rw-rw-   0        0        0     2938 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/conftest.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.005105 riptable-1.7.0/riptable/hypothesis_tests/strategies/
--rw-rw-rw-   0        0        0        0 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/strategies/__init__.py
--rw-rw-rw-   0        0        0    19383 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/strategies/categorical_strategy.py
--rw-rw-rw-   0        0        0    21811 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/strategies/helper_strategies.py
--rw-rw-rw-   0        0        0    11783 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_categorical_property.py
--rw-rw-rw-   0        0        0    86304 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py
--rw-rw-rw-   0        0        0     3108 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_rt_numpy_property.py
--rw-rw-rw-   0        0        0    10986 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_sds_property.py
--rw-rw-rw-   0        0        0    12991 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_ufunc_unary.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.005105 riptable-1.7.0/riptable/numba/
--rw-rw-rw-   0        0        0      224 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/numba/__init__.py
--rw-rw-rw-   0        0        0     2391 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/numba/indexing.py
--rw-rw-rw-   0        0        0     9430 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/numba/invalid_values.py
--rw-rw-rw-   0        0        0    50018 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_accum2.py
--rw-rw-rw-   0        0        0    19761 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_accumtable.py
--rw-rw-rw-   0        0        0     3810 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_algos.py
--rw-rw-rw-   0        0        0    24445 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_bin.py
--rw-rw-rw-   0        0        0   265037 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_categorical.py
--rw-rw-rw-   0        0        0     1078 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_compressedarray.py
--rw-rw-rw-   0        0        0     5824 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_csv.py
--rw-rw-rw-   0        0        0   283494 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_dataset.py
--rw-rw-rw-   0        0        0   274981 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_datetime.py
--rw-rw-rw-   0        0        0   106189 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_display.py
--rw-rw-rw-   0        0        0     2116 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_ema.py
--rw-rw-rw-   0        0        0    32335 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_enum.py
--rw-rw-rw-   0        0        0   237243 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_fastarray.py
--rw-rw-rw-   0        0        0    24106 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_fastarraynumba.py
--rw-rw-rw-   0        0        0    29850 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_groupby.py
--rw-rw-rw-   0        0        0    18239 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_groupbykeys.py
--rw-rw-rw-   0        0        0    27756 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_groupbynumba.py
--rw-rw-rw-   0        0        0   139819 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_groupbyops.py
--rw-rw-rw-   0        0        0   161893 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_grouping.py
--rw-rw-rw-   0        0        0    29767 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_hstack.py
--rw-rw-rw-   0        0        0     3345 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_imatrix.py
--rw-rw-rw-   0        0        0     4797 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_io.py
--rw-rw-rw-   0        0        0    23024 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_itemcontainer.py
--rw-rw-rw-   0        0        0    12139 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_ledger.py
--rw-rw-rw-   0        0        0    24924 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_matplotlib.py
--rw-rw-rw-   0        0        0   200963 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_merge.py
--rw-rw-rw-   0        0        0    92846 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_merge_asof.py
--rw-rw-rw-   0        0        0    11689 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_meta.py
--rw-rw-rw-   0        0        0    32625 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_misc.py
--rw-rw-rw-   0        0        0     1059 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_mlutils.py
--rw-rw-rw-   0        0        0    34329 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_multiset.py
--rw-rw-rw-   0        0        0   195805 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_numpy.py
--rw-rw-rw-   0        0        0    26902 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_pdataset.py
--rw-rw-rw-   0        0        0     1204 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_pgroupby.py
--rw-rw-rw-   0        0        0   135828 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_sds.py
--rw-rw-rw-   0        0        0     4463 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_sharedmemory.py
--rw-rw-rw-   0        0        0     2979 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_sort_cache.py
--rw-rw-rw-   0        0        0     7062 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_stats.py
--rw-rw-rw-   0        0        0    54140 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_str.py
--rw-rw-rw-   0        0        0   196468 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_struct.py
--rw-rw-rw-   0        0        0    17616 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_timers.py
--rw-rw-rw-   0        0        0    42160 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_timezone.py
--rw-rw-rw-   0        0        0    39281 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_utils.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.005105 riptable-1.7.0/riptable/test_tooling_integration/
--rw-rw-rw-   0        0        0       71 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/__init__.py
--rw-rw-rw-   0        0        0    11006 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/ipykernel_integration_test.py
--rw-rw-rw-   0        0        0    38590 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/ipython_compatibility_test.py
--rw-rw-rw-   0        0        0    14870 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/ipython_integration_test.py
--rw-rw-rw-   0        0        0      742 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/run.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.020737 riptable-1.7.0/riptable/test_tooling_integration/test_display/
--rw-rw-rw-   0        0        0        9 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/test_display/__init__.py
--rw-rw-rw-   0        0        0     1604 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/test_display/test_display.py
--rw-rw-rw-   0        0        0     4668 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/test_display/vnu_checker.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.020737 riptable-1.7.0/riptable/testing/
--rw-rw-rw-   0        0        0    14911 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/testing/array_assert.py
--rw-rw-rw-   0        0        0     5788 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/testing/randgen.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.083228 riptable-1.7.0/riptable/tests/
--rw-rw-rw-   0        0        0       27 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/__init__.py
--rw-rw-rw-   0        0        0     6648 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/generator_categorical_unit_test.py
--rw-rw-rw-   0        0        0     6460 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/generator_groupby_unit_test.py
--rw-rw-rw-   0        0        0     3937 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/groupby_categorical_unit_test_parameters.py
--rw-rw-rw-   0        0        0     5078 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/groupby_unit_test_parameters.py
--rw-rw-rw-   0        0        0      593 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/run.py
--rw-rw-rw-   0        0        0     1387 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/runall.py
--rw-rw-rw-   0        0        0    27732 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_accum2.py
--rw-rw-rw-   0        0        0     4390 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_accumtable.py
--rw-rw-rw-   0        0        0    20470 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_apply.py
--rw-rw-rw-   0        0        0     8459 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_base_function.py
--rw-rw-rw-   0        0        0     2553 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_bitcount.py
--rw-rw-rw-   0        0        0   140008 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical.py
--rw-rw-rw-   0        0        0    19605 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_autotest_aggregated_functions.py
--rw-rw-rw-   0        0        0     1141 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_base_index.py
--rw-rw-rw-   0        0        0     3312 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_dtype.py
--rw-rw-rw-   0        0        0    16622 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_filter_invalid.py
--rw-rw-rw-   0        0        0     4124 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_functions.py
--rw-rw-rw-   0        0        0    37109 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_groupby.py
--rw-rw-rw-   0        0        0     3430 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_keywords.py
--rw-rw-rw-   0        0        0     3544 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_modify.py
--rw-rw-rw-   0        0        0    11486 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_ordered.py
--rw-rw-rw-   0        0        0     5883 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_setitem.py
--rw-rw-rw-   0        0        0     7248 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_sort_order.py
--rw-rw-rw-   0        0        0    19221 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_values.py
--rw-rw-rw-   0        0        0     7283 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_conversion_utils.py
--rw-rw-rw-   0        0        0     4894 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_csv.py
--rw-rw-rw-   0        0        0     7141 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_cut.py
--rw-rw-rw-   0        0        0    99865 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_dataset.py
--rw-rw-rw-   0        0        0    20218 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_dataset_slicing.py
--rw-rw-rw-   0        0        0    17510 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_date.py
--rw-rw-rw-   0        0        0   112583 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_datetime.py
--rw-rw-rw-   0        0        0    15278 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_datetime_math.py
--rw-rw-rw-   0        0        0    69259 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_fastarray.py
--rw-rw-rw-   0        0        0     6396 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_fastarray_bn.py
--rw-rw-rw-   0        0        0     3120 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_fastarray_constructor.py
--rw-rw-rw-   0        0        0    25041 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_fastarray_functions.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.098886 riptable-1.7.0/riptable/tests/test_files/
--rw-rw-rw-   0        0        0      739 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_files/groupby1_ex3.pickle
--rw-rw-rw-   0        0        0     2328 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_files/unicode_ex1.csv
--rw-rw-rw-   0        0        0     2334 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_files/unicode_ex2.csv
--rw-rw-rw-   0        0        0     2474 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_files/unicode_ex3.csv
--rw-rw-rw-   0        0        0     6831 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_flatten.py
--rw-rw-rw-   0        0        0    34515 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupby.py
--rw-rw-rw-   0        0        0   161516 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupby_autotest_aggregated_functions.py
--rw-rw-rw-   0        0        0     5890 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupby_functions.py
--rw-rw-rw-   0        0        0     3443 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupby_simple_multikey.py
--rw-rw-rw-   0        0        0    56802 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupbyops.py
--rw-rw-rw-   0        0        0    25055 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_grouping.py
--rw-rw-rw-   0        0        0      105 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_hstack.py
--rw-rw-rw-   0        0        0    20277 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_interop_pyarrow.py
--rw-rw-rw-   0        0        0    22197 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_ismember.py
--rw-rw-rw-   0        0        0    12625 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_lexsort.py
--rw-rw-rw-   0        0        0   243669 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_merge.py
--rw-rw-rw-   0        0        0    24228 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_merge_asof.py
--rw-rw-rw-   0        0        0     7247 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_meta.py
--rw-rw-rw-   0        0        0    11644 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_multiset.py
--rw-rw-rw-   0        0        0     1086 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_pandas_utils.py
--rw-rw-rw-   0        0        0    11835 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_pdataset.py
--rw-rw-rw-   0        0        0     3664 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_pgroupby.py
--rw-rw-rw-   0        0        0     5298 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_restore_subclass.py
--rw-rw-rw-   0        0        0     7000 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_riptide_cpp.py
--rw-rw-rw-   0        0        0    21887 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_rtnumpy.py
--rw-rw-rw-   0        0        0     5435 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_rtutils.py
--rw-rw-rw-   0        0        0    76781 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_saveload.py
--rw-rw-rw-   0        0        0     1504 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_scalar.py
--rw-rw-rw-   0        0        0     3528 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_sds.py
--rw-rw-rw-   0        0        0    39970 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_sprint_fastarray.py
--rw-rw-rw-   0        0        0    26324 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_str.py
--rw-rw-rw-   0        0        0    33302 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_struct.py
--rw-rw-rw-   0        0        0      791 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_timewindow.py
--rw-rw-rw-   0        0        0    92837 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_ufunc2.py
--rw-rw-rw-   0        0        0     4828 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_unique.py
--rw-rw-rw-   0        0        0     5654 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_utils.py
--rw-rw-rw-   0        0        0     3380 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/utils.py
-drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.958258 riptable-1.7.0/riptable.egg-info/
--rw-rw-rw-   0        0        0      659 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0     7978 2023-05-09 20:36:39.000000 riptable-1.7.0/riptable.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0        2 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/not-zip-safe
--rw-rw-rw-   0        0        0       99 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/requires.txt
--rw-rw-rw-   0        0        0        9 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/top_level.txt
--rw-rw-rw-   0        0        0       51 2023-05-09 20:23:24.000000 riptable-1.7.0/runtest.py
--rw-rw-rw-   0        0        0       42 2023-05-09 20:36:40.098886 riptable-1.7.0/setup.cfg
--rw-rw-rw-   0        0        0     1506 2023-05-09 20:23:24.000000 riptable-1.7.0/setup.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.596562 riptable-1.8.0/
+-rw-rw-rw-   0        0        0      291 2023-05-18 15:17:21.000000 riptable-1.8.0/.editorconfig
+-rw-rw-rw-   0        0        0      196 2023-05-18 15:17:21.000000 riptable-1.8.0/.gitattributes
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.633970 riptable-1.8.0/.github/
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.649595 riptable-1.8.0/.github/workflows/
+-rw-rw-rw-   0        0        0     7747 2023-05-18 15:17:21.000000 riptable-1.8.0/.github/workflows/python-package.yml
+-rw-rw-rw-   0        0        0     2110 2023-05-18 15:17:21.000000 riptable-1.8.0/.gitignore
+-rw-rw-rw-   0        0        0      309 2023-05-18 15:17:21.000000 riptable-1.8.0/BUILDNOTES.txt
+-rw-rw-rw-   0        0        0     2634 2023-05-18 15:17:21.000000 riptable-1.8.0/LICENSE
+-rw-rw-rw-   0        0        0     3464 2023-05-18 15:17:21.000000 riptable-1.8.0/LICENSES-thirdparty.md
+-rw-rw-rw-   0        0        0      196 2023-05-18 15:17:21.000000 riptable-1.8.0/MANIFEST.in
+-rw-rw-rw-   0        0        0      659 2023-05-18 15:30:25.580975 riptable-1.8.0/PKG-INFO
+-rw-rw-rw-   0        0        0     6083 2023-05-18 15:17:21.000000 riptable-1.8.0/README.md
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.649595 riptable-1.8.0/conda_recipe/
+-rw-rw-rw-   0        0        0       19 2023-05-18 15:17:21.000000 riptable-1.8.0/conda_recipe/conda_build_config.yaml
+-rw-rw-rw-   0        0        0     1804 2023-05-18 15:17:21.000000 riptable-1.8.0/conda_recipe/meta.yaml
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.649595 riptable-1.8.0/dev_tools/
+-rw-rw-rw-   0        0        0     3944 2023-05-18 15:17:21.000000 riptable-1.8.0/dev_tools/gen_requirements.py
+-rw-rw-rw-   0        0        0    25367 2023-05-18 15:17:21.000000 riptable-1.8.0/dev_tools/validate_docstrings.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.649595 riptable-1.8.0/docs/
+-rw-rw-rw-   0        0        0      901 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/CONTRIBUTING.md
+-rw-rw-rw-   0        0        0      658 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/Makefile
+-rw-rw-rw-   0        0        0     2979 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/THREADING.md
+-rwxrwxrwx   0        0        0      799 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/make.bat
+-rw-rw-rw-   0        0        0     1085 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/riptable_logo.PNG
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.665221 riptable-1.8.0/docs/source/
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.665221 riptable-1.8.0/docs/source/_static/
+-rw-rw-rw-   0        0        0        0 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/_static/.keep
+-rw-rw-rw-   0        0        0    14482 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/benchmarking.rst
+-rw-rw-rw-   0        0        0     4478 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/conf.py
+-rw-rw-rw-   0        0        0      487 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/index.rst
+-rw-rw-rw-   0        0        0       68 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/modules.rst
+-rw-rw-rw-   0        0        0     6795 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/riptable.rst
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:24.485772 riptable-1.8.0/docs/source/tutorial/
+-rw-rw-rw-   0        0        0    23344 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/RiptableExercises.ipynb
+-rw-rw-rw-   0        0        0    95601 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/RiptableSolutions.ipynb
+-rw-rw-rw-   0        0        0    35605 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_11_0.png
+-rw-rw-rw-   0        0        0     5827 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_13_0.png
+-rw-rw-rw-   0        0        0    60197 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_15_0.png
+-rw-rw-rw-   0        0        0   148394 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_25_0.png
+-rw-rw-rw-   0        0        0   100101 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_27_0.png
+-rw-rw-rw-   0        0        0    16998 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/perf-may-suffer.png
+-rw-rw-rw-   0        0        0    45876 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_autocomplete.png
+-rw-rw-rw-   0        0        0    24063 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_autocomplete_internal.png
+-rw-rw-rw-   0        0        0    12995 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_dataset.svg
+-rw-rw-rw-   0        0        0    21979 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_dataset_indices.svg
+-rw-rw-rw-   0        0        0     6885 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_fastarray.svg
+-rw-rw-rw-   0        0        0    83328 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/split-apply-combine-gray.svg
+-rw-rw-rw-   0        0        0      770 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial.rst
+-rw-rw-rw-   0        0        0    13974 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_accums.rst
+-rw-rw-rw-   0        0        0     3913 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_cat_adv_instantiation.rst
+-rw-rw-rw-   0        0        0     2914 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_cat_reduce.rst
+-rw-rw-rw-   0        0        0    49655 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_categoricals.rst
+-rw-rw-rw-   0        0        0     7129 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_concat.rst
+-rw-rw-rw-   0        0        0    35411 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_datasets.rst
+-rw-rw-rw-   0        0        0    32677 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_datetimes.rst
+-rw-rw-rw-   0        0        0    15663 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_filters.rst
+-rw-rw-rw-   0        0        0    13353 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_intro.rst
+-rw-rw-rw-   0        0        0    13589 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_io.rst
+-rw-rw-rw-   0        0        0    19446 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_merge.rst
+-rw-rw-rw-   0        0        0    13841 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_missing_data.rst
+-rw-rw-rw-   0        0        0      820 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_numpy_rt.rst
+-rw-rw-rw-   0        0        0     2173 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_performance.rst
+-rw-rw-rw-   0        0        0     4168 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_reshape.rst
+-rw-rw-rw-   0        0        0     5501 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_sample_data.rst
+-rw-rw-rw-   0        0        0    12285 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_visualize.rst
+-rw-rw-rw-   0        0        0      236 2023-05-18 15:17:21.000000 riptable-1.8.0/environment.yml
+-rw-rw-rw-   0        0        0     3372 2023-05-18 15:17:21.000000 riptable-1.8.0/pyproject.toml
+-rw-rw-rw-   0        0        0       47 2023-05-18 15:17:21.000000 riptable-1.8.0/requirements.txt
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:24.532605 riptable-1.8.0/riptable/
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:24.548231 riptable-1.8.0/riptable/Utils/
+-rw-rw-rw-   0        0        0        2 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/__init__.py
+-rw-rw-rw-   0        0        0    25494 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/appdirs.py
+-rw-rw-rw-   0        0        0     9278 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/common.py
+-rw-rw-rw-   0        0        0     8728 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/conversion_utils.py
+-rw-rw-rw-   0        0        0    21765 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/display_options.py
+-rw-rw-rw-   0        0        0    13165 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/ipython_utils.py
+-rw-rw-rw-   0        0        0     2250 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/pandas_utils.py
+-rw-rw-rw-   0        0        0    18073 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_display_nested.py
+-rw-rw-rw-   0        0        0    14097 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_display_properties.py
+-rw-rw-rw-   0        0        0     3764 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_metadata.py
+-rw-rw-rw-   0        0        0    18355 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_testdata.py
+-rw-rw-rw-   0        0        0    11396 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_testing.py
+-rw-rw-rw-   0        0        0      501 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/teamcity_helper.py
+-rw-rw-rw-   0        0        0     3056 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/terminalsize.py
+-rw-rw-rw-   0        0        0     6318 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/__init__.py
+-rw-rw-rw-   0        0        0       21 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable/_version.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.487160 riptable-1.8.0/riptable/benchmarks/
+-rw-rw-rw-   0        0        0     3959 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/__init__.py
+-rw-rw-rw-   0        0        0      109 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/__main__.py
+-rw-rw-rw-   0        0        0     8894 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/analysis.py
+-rw-rw-rw-   0        0        0      725 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_categorical.py
+-rw-rw-rw-   0        0        0    11417 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_grouping.py
+-rw-rw-rw-   0        0        0    20287 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_merge.py
+-rw-rw-rw-   0        0        0    24715 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_numpy.py
+-rw-rw-rw-   0        0        0     1079 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_operators.py
+-rw-rw-rw-   0        0        0    46367 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_primops.py
+-rw-rw-rw-   0        0        0     6962 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/benchmark.py
+-rw-rw-rw-   0        0        0    15951 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/main.py
+-rw-rw-rw-   0        0        0     9889 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/rand_data.py
+-rw-rw-rw-   0        0        0    19557 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/rand_keydata.py
+-rw-rw-rw-   0        0        0      914 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/results.py
+-rw-rw-rw-   0        0        0    13245 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/runner.py
+-rw-rw-rw-   0        0        0     1475 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/config.py
+-rw-rw-rw-   0        0        0     2685 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/conftest.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.502792 riptable-1.8.0/riptable/hypothesis_tests/
+-rw-rw-rw-   0        0        0        9 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/__init__.py
+-rw-rw-rw-   0        0        0     2938 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/conftest.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.502792 riptable-1.8.0/riptable/hypothesis_tests/strategies/
+-rw-rw-rw-   0        0        0        0 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/strategies/__init__.py
+-rw-rw-rw-   0        0        0    19383 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/strategies/categorical_strategy.py
+-rw-rw-rw-   0        0        0    21811 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/strategies/helper_strategies.py
+-rw-rw-rw-   0        0        0    11783 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_categorical_property.py
+-rw-rw-rw-   0        0        0    86304 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py
+-rw-rw-rw-   0        0        0     3108 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_rt_numpy_property.py
+-rw-rw-rw-   0        0        0    10986 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_sds_property.py
+-rw-rw-rw-   0        0        0    12991 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_ufunc_unary.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.502792 riptable-1.8.0/riptable/numba/
+-rw-rw-rw-   0        0        0      224 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/numba/__init__.py
+-rw-rw-rw-   0        0        0     2391 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/numba/indexing.py
+-rw-rw-rw-   0        0        0     9430 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/numba/invalid_values.py
+-rw-rw-rw-   0        0        0    50018 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_accum2.py
+-rw-rw-rw-   0        0        0    19871 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_accumtable.py
+-rw-rw-rw-   0        0        0     3810 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_algos.py
+-rw-rw-rw-   0        0        0    24445 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_bin.py
+-rw-rw-rw-   0        0        0   265037 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_categorical.py
+-rw-rw-rw-   0        0        0     1078 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_compressedarray.py
+-rw-rw-rw-   0        0        0     5824 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_csv.py
+-rw-rw-rw-   0        0        0   285318 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_dataset.py
+-rw-rw-rw-   0        0        0   274981 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_datetime.py
+-rw-rw-rw-   0        0        0   106189 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_display.py
+-rw-rw-rw-   0        0        0     2116 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_ema.py
+-rw-rw-rw-   0        0        0    32335 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_enum.py
+-rw-rw-rw-   0        0        0   243511 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_fastarray.py
+-rw-rw-rw-   0        0        0    24106 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_fastarraynumba.py
+-rw-rw-rw-   0        0        0    29850 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_groupby.py
+-rw-rw-rw-   0        0        0    18239 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_groupbykeys.py
+-rw-rw-rw-   0        0        0    27756 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_groupbynumba.py
+-rw-rw-rw-   0        0        0   141314 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_groupbyops.py
+-rw-rw-rw-   0        0        0   161893 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_grouping.py
+-rw-rw-rw-   0        0        0    29767 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_hstack.py
+-rw-rw-rw-   0        0        0     3345 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_imatrix.py
+-rw-rw-rw-   0        0        0     4797 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_io.py
+-rw-rw-rw-   0        0        0    23024 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_itemcontainer.py
+-rw-rw-rw-   0        0        0    12139 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_ledger.py
+-rw-rw-rw-   0        0        0    24924 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_matplotlib.py
+-rw-rw-rw-   0        0        0   208519 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_merge.py
+-rw-rw-rw-   0        0        0    92846 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_merge_asof.py
+-rw-rw-rw-   0        0        0    11689 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_meta.py
+-rw-rw-rw-   0        0        0    32625 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_misc.py
+-rw-rw-rw-   0        0        0     1059 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_mlutils.py
+-rw-rw-rw-   0        0        0    34329 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_multiset.py
+-rw-rw-rw-   0        0        0   195884 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_numpy.py
+-rw-rw-rw-   0        0        0    26902 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_pdataset.py
+-rw-rw-rw-   0        0        0     1204 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_pgroupby.py
+-rw-rw-rw-   0        0        0   135828 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_sds.py
+-rw-rw-rw-   0        0        0     4463 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_sharedmemory.py
+-rw-rw-rw-   0        0        0     2979 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_sort_cache.py
+-rw-rw-rw-   0        0        0     7062 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_stats.py
+-rw-rw-rw-   0        0        0    54140 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_str.py
+-rw-rw-rw-   0        0        0   196468 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_struct.py
+-rw-rw-rw-   0        0        0    17616 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_timers.py
+-rw-rw-rw-   0        0        0    42160 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_timezone.py
+-rw-rw-rw-   0        0        0    39281 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_utils.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.502792 riptable-1.8.0/riptable/test_tooling_integration/
+-rw-rw-rw-   0        0        0       71 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/__init__.py
+-rw-rw-rw-   0        0        0    11006 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/ipykernel_integration_test.py
+-rw-rw-rw-   0        0        0    38590 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/ipython_compatibility_test.py
+-rw-rw-rw-   0        0        0    14870 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/ipython_integration_test.py
+-rw-rw-rw-   0        0        0      742 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/run.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.518434 riptable-1.8.0/riptable/test_tooling_integration/test_display/
+-rw-rw-rw-   0        0        0        9 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/test_display/__init__.py
+-rw-rw-rw-   0        0        0     1604 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/test_display/test_display.py
+-rw-rw-rw-   0        0        0     4668 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/test_display/vnu_checker.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.518434 riptable-1.8.0/riptable/testing/
+-rw-rw-rw-   0        0        0    14911 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/testing/array_assert.py
+-rw-rw-rw-   0        0        0     5788 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/testing/randgen.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.580975 riptable-1.8.0/riptable/tests/
+-rw-rw-rw-   0        0        0       27 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/__init__.py
+-rw-rw-rw-   0        0        0     6648 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/generator_categorical_unit_test.py
+-rw-rw-rw-   0        0        0     6460 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/generator_groupby_unit_test.py
+-rw-rw-rw-   0        0        0     3937 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/groupby_categorical_unit_test_parameters.py
+-rw-rw-rw-   0        0        0     5078 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/groupby_unit_test_parameters.py
+-rw-rw-rw-   0        0        0      593 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/run.py
+-rw-rw-rw-   0        0        0     1387 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/runall.py
+-rw-rw-rw-   0        0        0    27732 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_accum2.py
+-rw-rw-rw-   0        0        0     5081 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_accumtable.py
+-rw-rw-rw-   0        0        0    20470 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_apply.py
+-rw-rw-rw-   0        0        0     8459 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_base_function.py
+-rw-rw-rw-   0        0        0     2553 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_bitcount.py
+-rw-rw-rw-   0        0        0   140008 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical.py
+-rw-rw-rw-   0        0        0    19605 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_autotest_aggregated_functions.py
+-rw-rw-rw-   0        0        0     1141 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_base_index.py
+-rw-rw-rw-   0        0        0     3312 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_dtype.py
+-rw-rw-rw-   0        0        0    16622 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_filter_invalid.py
+-rw-rw-rw-   0        0        0     4124 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_functions.py
+-rw-rw-rw-   0        0        0    38234 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_groupby.py
+-rw-rw-rw-   0        0        0     3430 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_keywords.py
+-rw-rw-rw-   0        0        0     3544 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_modify.py
+-rw-rw-rw-   0        0        0    11486 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_ordered.py
+-rw-rw-rw-   0        0        0     5883 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_setitem.py
+-rw-rw-rw-   0        0        0     7248 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_sort_order.py
+-rw-rw-rw-   0        0        0    19221 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_values.py
+-rw-rw-rw-   0        0        0     7283 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_conversion_utils.py
+-rw-rw-rw-   0        0        0     4894 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_csv.py
+-rw-rw-rw-   0        0        0     7141 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_cut.py
+-rw-rw-rw-   0        0        0    99865 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_dataset.py
+-rw-rw-rw-   0        0        0    20218 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_dataset_slicing.py
+-rw-rw-rw-   0        0        0    17510 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_date.py
+-rw-rw-rw-   0        0        0   112583 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_datetime.py
+-rw-rw-rw-   0        0        0    15278 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_datetime_math.py
+-rw-rw-rw-   0        0        0    69259 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_fastarray.py
+-rw-rw-rw-   0        0        0     6396 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_fastarray_bn.py
+-rw-rw-rw-   0        0        0     3120 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_fastarray_constructor.py
+-rw-rw-rw-   0        0        0    25041 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_fastarray_functions.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.580975 riptable-1.8.0/riptable/tests/test_files/
+-rw-rw-rw-   0        0        0      739 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_files/groupby1_ex3.pickle
+-rw-rw-rw-   0        0        0     2328 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_files/unicode_ex1.csv
+-rw-rw-rw-   0        0        0     2334 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_files/unicode_ex2.csv
+-rw-rw-rw-   0        0        0     2474 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_files/unicode_ex3.csv
+-rw-rw-rw-   0        0        0     6831 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_flatten.py
+-rw-rw-rw-   0        0        0    34515 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupby.py
+-rw-rw-rw-   0        0        0   161516 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupby_autotest_aggregated_functions.py
+-rw-rw-rw-   0        0        0     5890 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupby_functions.py
+-rw-rw-rw-   0        0        0     3443 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupby_simple_multikey.py
+-rw-rw-rw-   0        0        0    56802 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupbyops.py
+-rw-rw-rw-   0        0        0    25055 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_grouping.py
+-rw-rw-rw-   0        0        0      105 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_hstack.py
+-rw-rw-rw-   0        0        0    20277 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_interop_pyarrow.py
+-rw-rw-rw-   0        0        0    23502 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_ismember.py
+-rw-rw-rw-   0        0        0    12625 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_lexsort.py
+-rw-rw-rw-   0        0        0   244975 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_merge.py
+-rw-rw-rw-   0        0        0    24228 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_merge_asof.py
+-rw-rw-rw-   0        0        0     7247 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_meta.py
+-rw-rw-rw-   0        0        0    11644 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_multiset.py
+-rw-rw-rw-   0        0        0     1086 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_pandas_utils.py
+-rw-rw-rw-   0        0        0    11835 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_pdataset.py
+-rw-rw-rw-   0        0        0     3664 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_pgroupby.py
+-rw-rw-rw-   0        0        0     5298 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_restore_subclass.py
+-rw-rw-rw-   0        0        0     7000 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_riptide_cpp.py
+-rw-rw-rw-   0        0        0    21887 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_rtnumpy.py
+-rw-rw-rw-   0        0        0     5435 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_rtutils.py
+-rw-rw-rw-   0        0        0    76781 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_saveload.py
+-rw-rw-rw-   0        0        0     1504 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_scalar.py
+-rw-rw-rw-   0        0        0     3528 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_sds.py
+-rw-rw-rw-   0        0        0    39970 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_sprint_fastarray.py
+-rw-rw-rw-   0        0        0    26324 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_str.py
+-rw-rw-rw-   0        0        0    33302 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_struct.py
+-rw-rw-rw-   0        0        0      791 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_timewindow.py
+-rw-rw-rw-   0        0        0    92837 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_ufunc2.py
+-rw-rw-rw-   0        0        0     4828 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_unique.py
+-rw-rw-rw-   0        0        0     5654 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_utils.py
+-rw-rw-rw-   0        0        0     3380 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/utils.py
+drwxrwxrwx   0        0        0        0 2023-05-18 15:30:24.532605 riptable-1.8.0/riptable.egg-info/
+-rw-rw-rw-   0        0        0      659 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0     7978 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0        2 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/not-zip-safe
+-rw-rw-rw-   0        0        0       99 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/requires.txt
+-rw-rw-rw-   0        0        0        9 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0       51 2023-05-18 15:17:21.000000 riptable-1.8.0/runtest.py
+-rw-rw-rw-   0        0        0       42 2023-05-18 15:30:25.596562 riptable-1.8.0/setup.cfg
+-rw-rw-rw-   0        0        0     1506 2023-05-18 15:17:21.000000 riptable-1.8.0/setup.py
```

### Comparing `riptable-1.7.0/.github/workflows/python-package.yml` & `riptable-1.8.0/.github/workflows/python-package.yml`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/.gitignore` & `riptable-1.8.0/.gitignore`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/LICENSE` & `riptable-1.8.0/LICENSE`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/LICENSES-thirdparty.md` & `riptable-1.8.0/LICENSES-thirdparty.md`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/PKG-INFO` & `riptable-1.8.0/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: riptable
-Version: 1.7.0
+Version: 1.8.0
 Summary: Python Package for riptable studies framework
 Home-page: https://github.com/rtosholdings/riptable
 Author: RTOS Holdings
 Author-email: rtosholdings-bot@sig.com
 Classifier: Development Status :: 4 - Beta
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.8
```

### Comparing `riptable-1.7.0/README.md` & `riptable-1.8.0/README.md`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/conda_recipe/meta.yaml` & `riptable-1.8.0/conda_recipe/meta.yaml`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/dev_tools/gen_requirements.py` & `riptable-1.8.0/dev_tools/gen_requirements.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/dev_tools/validate_docstrings.py` & `riptable-1.8.0/dev_tools/validate_docstrings.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/CONTRIBUTING.md` & `riptable-1.8.0/docs/CONTRIBUTING.md`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/Makefile` & `riptable-1.8.0/docs/Makefile`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/THREADING.md` & `riptable-1.8.0/docs/THREADING.md`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/make.bat` & `riptable-1.8.0/docs/make.bat`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/riptable_logo.PNG` & `riptable-1.8.0/docs/riptable_logo.PNG`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/benchmarking.rst` & `riptable-1.8.0/docs/source/benchmarking.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/conf.py` & `riptable-1.8.0/docs/source/conf.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/riptable.rst` & `riptable-1.8.0/docs/source/riptable.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/RiptableExercises.ipynb` & `riptable-1.8.0/docs/source/tutorial/RiptableExercises.ipynb`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/RiptableSolutions.ipynb` & `riptable-1.8.0/docs/source/tutorial/RiptableSolutions.ipynb`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/output_11_0.png` & `riptable-1.8.0/docs/source/tutorial/output_11_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/output_13_0.png` & `riptable-1.8.0/docs/source/tutorial/output_13_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/output_15_0.png` & `riptable-1.8.0/docs/source/tutorial/output_15_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/output_25_0.png` & `riptable-1.8.0/docs/source/tutorial/output_25_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/output_27_0.png` & `riptable-1.8.0/docs/source/tutorial/output_27_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/perf-may-suffer.png` & `riptable-1.8.0/docs/source/tutorial/perf-may-suffer.png`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/rt_autocomplete.png` & `riptable-1.8.0/docs/source/tutorial/rt_autocomplete.png`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/rt_autocomplete_internal.png` & `riptable-1.8.0/docs/source/tutorial/rt_autocomplete_internal.png`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/rt_dataset.svg` & `riptable-1.8.0/docs/source/tutorial/rt_dataset.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/rt_dataset_indices.svg` & `riptable-1.8.0/docs/source/tutorial/rt_dataset_indices.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/rt_fastarray.svg` & `riptable-1.8.0/docs/source/tutorial/rt_fastarray.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/split-apply-combine-gray.svg` & `riptable-1.8.0/docs/source/tutorial/split-apply-combine-gray.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_accums.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_accums.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_cat_adv_instantiation.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_cat_adv_instantiation.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_cat_reduce.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_cat_reduce.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_categoricals.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_categoricals.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_concat.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_concat.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_datasets.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_datasets.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_datetimes.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_datetimes.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_filters.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_filters.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_intro.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_intro.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_io.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_io.rst`

 * *Files 1% similar despite different names*

```diff
@@ -217,14 +217,16 @@
    types, if your ``imatrix_make`` input contains any float columns, the
    entire array will be converted to floats. Its also possible that the
    integers in your original Dataset will be converted.
 -  Also watch out for NaNs in integer columns (Inv). Inv is stored
    internally by Riptable as an out-of-bounds number, and it will be
    sent to NumPy as that number. See `Working with Missing
    Data <tutorial_missing_data.rst>`__ for more on dealing with NaNs.
+-  If there are Categoricals in the Dataset, you can preserve the integer
+   mapping codes by passing ``cats=True``.
 
 To convert a 2-dimensional NumPy array back to Riptable, add it to a
 Dataset using ``add_matrix()``::
 
     >>> ds2 = rt.Dataset()
     >>> ds2.add_matrix(np_2d_arr)
     >>> ds2
```

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_merge.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_merge.rst`

 * *Files 0% similar despite different names*

```diff
@@ -371,21 +371,22 @@
 requires both key columns to be sorted. The key columns must also be
 numeric, such as a datetime, integer, or float. You can check whether a
 column is sorted with ``issorted()``, or just sort it using
 ``sort_inplace()``. (If the key columns arent sorted, Riptable will
 give you an error when you try to merge.)
 
 With ``merge_asof()``, you need to specify how you want to find the
-closest match: - ``direction='forward'`` matches based on the closest
-key in the right Dataset thats greater than the key in the left
-Dataset. - ``direction='backward'`` matches based on the closest key in
-the right Dataset thats less than the key in the left Dataset. -
-``direction='nearest'`` matches based on the closest key in the right
-Dataset, regardless of whether its greater than or less than the key in
-the left Dataset.
+closest match: 
+
+- ``direction='forward'`` matches based on the closest key in the right Dataset 
+  thats greater than the key in the left Dataset. 
+- ``direction='backward'`` matches based on the closest key in the right Dataset 
+  thats less than the key in the left Dataset. 
+- ``direction='nearest'`` matches based on the closest key in the right Dataset, 
+  regardless of whether its greater than or less than the key in the left Dataset.
 
 Lets see an example based on closest times. The left Dataset has three
 trades and their times. The right Dataset has spot prices and times that
 are not all exact matches. Well merge the spot prices from the right
 Dataset by getting the values associated with the nearest earlier times.
 
     >>> # Left Dataset with trades and times
```

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_missing_data.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_missing_data.rst`

 * *Files 1% similar despite different names*

```diff
@@ -140,15 +140,15 @@
     >>> ds1 = rt.Dataset({'Key': [1.0, rt.nan, 2.0,],
     ...                   'Value1': [1.0, 2.0, 3.0]})
     >>> ds2 = rt.Dataset({'Key': [1.0, 2.0, rt.nan],
     ...                   'Value2': [1.0, 2.0, 3.0]})
 
 Now we do a ``merge_lookup()`` on the Key columns::
 
-    >>> ds1.merge_lookup(ds2, on='Key', columns_right=['Value2'])
+    >>> ds1.merge_lookup(ds2, on='Key', columns_right='Value2')
     #    Key   Value1   Value2
     -   ----   ------   ------
     0   1.00     1.00     1.00
     1    nan     2.00      nan
     2   2.00     3.00     2.00
 
 The ``NaN`` key and its associated value in ``ds2`` were ignored by the
```

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_numpy_rt.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_numpy_rt.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_performance.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_performance.rst`

 * *Files 10% similar despite different names*

```diff
@@ -6,20 +6,20 @@
 finite resource, its good to keep some things in mind.
 
 Whenever possible:
 
 -  Use universal functions (ufuncs) and ufunc methods. (Ufuncs take
    array inputs and produce array outputs.)
 -  To work with a subset of an array, use slicing instead of fancy
-   indexing. Fancy indexing creates a copy of the array. Slicing instead
-   gives you a view of the array, though this means that changes to
-   the slice change the original data as well. Another thing to be aware
-   of is that a slice creates a reference to the original data. This
-   means the original data wont be cleared from memory until the
-   reference is also deleted.
+   indexing. Fancy indexing creates a copy of the array; slicing instead
+   gives you a view of the array. (This differs from slicing
+   lists in Python, which creates copies.) Be aware that changes to
+   the slice also change the original data. Also note that a slice 
+   creates a reference to the original data, and the original data 
+   wont be cleared from memory until the reference is also deleted.
 -  In general, be aware of which operations make copies of data. Use
    flags to do operations in place when you can.
 -  Avoid filtering entire Datasets using ``ds.filter()``. Use Boolean
    mask arrays, or use filter keyword arguments in operations on
    columns.
 
    -  When it makes sense, you can use ``ds.filter(inplace=True)`` to
@@ -32,11 +32,17 @@
    or if youre converting data between Pandas and Riptable.
 -  Delete datasets youre not using. Though be aware that if you have
    any references to the Dataset in other objects (for example, a slice
    or any operation that gives you a view of the data), you might not
    actually free up memory.
 -  Avoid using ``apply()``  its not a vectorized operation.
 
+Multiprocessing
+---------------
+
+If you need to use multiprocessing with Riptable, this project may be helpful: 
+https://github.com/joblib/loky.
+
 --------------
 
 Questions or comments about this guide? Email
 RiptableDocumentation@sig.com.
```

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_reshape.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_reshape.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_sample_data.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_sample_data.rst`

 * *Files 3% similar despite different names*

```diff
@@ -39,20 +39,20 @@
 The following methods generate repeated specified values.
 
 10 fives::
 
     >>> rt.repeat(5, 10)
     FastArray([5, 5, 5, 5, 5, 5, 5, 5, 5, 5])
 
-10 repeats of the array::
+10 repeats of each array element::
 
     >>> rt.repeat([1, 2], 10)
     FastArray([1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2])
 
-10 repeats of each array value in turn::
+10 "tiles" of the entire array::
 
     >>> rt.tile([1, 2], 10)
     FastArray([1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2])
 
 10 twos::
 
     >>> rt.full(10, 2)
```

### Comparing `riptable-1.7.0/docs/source/tutorial/tutorial_visualize.rst` & `riptable-1.8.0/docs/source/tutorial/tutorial_visualize.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/pyproject.toml` & `riptable-1.8.0/pyproject.toml`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/appdirs.py` & `riptable-1.8.0/riptable/Utils/appdirs.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/common.py` & `riptable-1.8.0/riptable/Utils/common.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/conversion_utils.py` & `riptable-1.8.0/riptable/Utils/conversion_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/display_options.py` & `riptable-1.8.0/riptable/Utils/display_options.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/ipython_utils.py` & `riptable-1.8.0/riptable/Utils/ipython_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/pandas_utils.py` & `riptable-1.8.0/riptable/Utils/pandas_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/rt_display_nested.py` & `riptable-1.8.0/riptable/Utils/rt_display_nested.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/rt_display_properties.py` & `riptable-1.8.0/riptable/Utils/rt_display_properties.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/rt_metadata.py` & `riptable-1.8.0/riptable/Utils/rt_metadata.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/rt_testdata.py` & `riptable-1.8.0/riptable/Utils/rt_testdata.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/rt_testing.py` & `riptable-1.8.0/riptable/Utils/rt_testing.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/Utils/terminalsize.py` & `riptable-1.8.0/riptable/Utils/terminalsize.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/__init__.py` & `riptable-1.8.0/riptable/__init__.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/__init__.py` & `riptable-1.8.0/riptable/benchmarks/__init__.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/analysis.py` & `riptable-1.8.0/riptable/benchmarks/analysis.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/bench_categorical.py` & `riptable-1.8.0/riptable/benchmarks/bench_categorical.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/bench_grouping.py` & `riptable-1.8.0/riptable/benchmarks/bench_grouping.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/bench_merge.py` & `riptable-1.8.0/riptable/benchmarks/bench_merge.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/bench_numpy.py` & `riptable-1.8.0/riptable/benchmarks/bench_numpy.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/bench_operators.py` & `riptable-1.8.0/riptable/benchmarks/bench_operators.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/bench_primops.py` & `riptable-1.8.0/riptable/benchmarks/bench_primops.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/benchmark.py` & `riptable-1.8.0/riptable/benchmarks/benchmark.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/main.py` & `riptable-1.8.0/riptable/benchmarks/main.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/rand_data.py` & `riptable-1.8.0/riptable/benchmarks/rand_data.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/rand_keydata.py` & `riptable-1.8.0/riptable/benchmarks/rand_keydata.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/results.py` & `riptable-1.8.0/riptable/benchmarks/results.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/benchmarks/runner.py` & `riptable-1.8.0/riptable/benchmarks/runner.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/config.py` & `riptable-1.8.0/riptable/config.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/conftest.py` & `riptable-1.8.0/riptable/conftest.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/hypothesis_tests/conftest.py` & `riptable-1.8.0/riptable/hypothesis_tests/conftest.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/hypothesis_tests/strategies/categorical_strategy.py` & `riptable-1.8.0/riptable/hypothesis_tests/strategies/categorical_strategy.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/hypothesis_tests/strategies/helper_strategies.py` & `riptable-1.8.0/riptable/hypothesis_tests/strategies/helper_strategies.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/hypothesis_tests/test_categorical_property.py` & `riptable-1.8.0/riptable/hypothesis_tests/test_categorical_property.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py` & `riptable-1.8.0/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/hypothesis_tests/test_rt_numpy_property.py` & `riptable-1.8.0/riptable/hypothesis_tests/test_rt_numpy_property.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/hypothesis_tests/test_sds_property.py` & `riptable-1.8.0/riptable/hypothesis_tests/test_sds_property.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/hypothesis_tests/test_ufunc_unary.py` & `riptable-1.8.0/riptable/hypothesis_tests/test_ufunc_unary.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/numba/indexing.py` & `riptable-1.8.0/riptable/numba/indexing.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/numba/invalid_values.py` & `riptable-1.8.0/riptable/numba/invalid_values.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_accum2.py` & `riptable-1.8.0/riptable/rt_accum2.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_accumtable.py` & `riptable-1.8.0/riptable/rt_accumtable.py`

 * *Files 1% similar despite different names*

```diff
@@ -482,15 +482,17 @@
     if not isinstance(val_list, list):
         val_list = [val_list]
 
     # Handle missing inputs
     if name_list is None:
         name_list = [f"col{n}" for n in range(len(val_list))]
     if filt_list is None:
-        filt_list = full(val_list[0].shape[0], True, dtype=bool)  # This was playa.utils.truecol
+        val_fst = val_list[0]
+        shape = val_fst.shape[0] if isinstance(val_fst, np.ndarray) else val_fst[0].shape[0]
+        filt_list = full(shape, True, dtype=bool)  # This was playa.utils.truecol
     if not isinstance(func_list, list):
         func_list = [func_list for _ in val_list]
     if not isinstance(filt_list, list):
         filt_list = [filt_list for _ in val_list]
 
     # Compute accum
     temp_cat = Categorical(full(cat.shape[0], 1, dtype=np.int8), ["NotGrouped"])  # This was playa.utils.onescol
```

### Comparing `riptable-1.7.0/riptable/rt_algos.py` & `riptable-1.8.0/riptable/rt_algos.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_bin.py` & `riptable-1.8.0/riptable/rt_bin.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_categorical.py` & `riptable-1.8.0/riptable/rt_categorical.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_compressedarray.py` & `riptable-1.8.0/riptable/rt_compressedarray.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_csv.py` & `riptable-1.8.0/riptable/rt_csv.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_dataset.py` & `riptable-1.8.0/riptable/rt_dataset.py`

 * *Files 0% similar despite different names*

```diff
@@ -2031,15 +2031,14 @@
     def imatrix_totals(self, colnames=None, name=None):
         if self.imatrix is None:
             self.imatrix_make(colnames=colnames)
 
         totalsX, totalsY, name = self.imatrix_xy(np.sum, name=name)
 
         if totalsY is not None:
-
             # tell display that this dataset has a footer
             footerdict = dict(zip(self.imatrix_ds, totalsX))
             footerdict[name] = totalsX[-1]
             self.footer_set_values(name, footerdict)
             return self
 
     # -------------------------------------------------------
@@ -4535,18 +4534,27 @@
         copy: bool = True,
         columns_left: Optional[Union[str, List[str]]] = None,
         columns_right: Optional[Union[str, List[str]]] = None,
         keep: Optional[str] = None,
         inplace: bool = False,
         high_card: Optional[Union[bool, Tuple[Optional[bool], Optional[bool]]]] = None,
         hint_size: Optional[Union[int, Tuple[Optional[int], Optional[int]]]] = None,
+        suffixes: Optional[Tuple[str, str]] = None,
     ) -> "Dataset":
+        # Make sure the suffix/suffixes/inplace aren't incorrectly combined.
+        if suffixes is not None:
+            if suffix is not None:
+                raise ValueError("Only one of 'suffixes' and 'suffix' can be specified.")
+            if inplace:
+                raise ValueError("Cannot specify 'suffixes' with 'inplace=True'. Use 'suffix' instead.")
+        else:
+            suffixes = ("", suffix)
+
         # This method supports an in-place mode; unless the user specifies that one,
         # call the normal module-based implementation.
-        suffixes = ("", suffix)
         if not inplace:
             return rt_merge.merge_lookup(
                 self,
                 right,
                 on=on,
                 left_on=left_on,
                 right_on=right_on,
@@ -5194,41 +5202,81 @@
     def sample(
         self,
         N: int = 10,
         filter: Optional[np.ndarray] = None,
         seed: Optional[Union[int, Sequence[int], np.random.SeedSequence, np.random.Generator]] = None,
     ) -> "Dataset":
         """
-        Return `N` randomly selected rows.
+        Return a given number of randomly selected `Dataset` rows.
 
-        This function is useful for spot-checking your data, especially if the first or
-        last rows aren't representative.
+        This function is useful for spot-checking your data, especially if the
+        first or last rows aren't representative.
 
         Parameters
         ----------
         N : int, default 10
-            Number of rows to select.
-        filter : array-like (bool or rownums), default None
-            Filter for rows to select sample from.
-        seed : {None, int, array_like[ints], SeedSequence, Generator}, default None
-            A seed to initialize the `Generator`. If None, the `Generator` is
-            initialized using fresh, random entropy data gathered from the OS.
+            Number of rows to select. The entire `Dataset` is returned if `N`
+            is greater than the number of `Dataset` rows.
+        filter : array (bool or int), optional
+            A boolean mask or index array to filter values before selection.
+            Note that until a reported bug is fixed, no error is raised and
+            unexpected results may occur when a boolean mask array with a length
+            different from that of the array it's masking is passed as a filter.
+        seed : int or other types, optional
+            A seed to initialize the random number generator. If one is not
+            provided, the generator is initialized using random data from the OS.
+            For details and other accepted types, see the `seed` parameter for
+            `numpy.random.default_rng`.
 
         Returns
         -------
         Dataset
-            A view of `N` randomly selected rows of the Dataset.
+            A new `Dataset` containing the randomly selected rows.
 
         See Also
         --------
-        Dataset.head : Returns the first `n` rows of the Dataset.
-        Dataset.tail : Returns the last `n` rows of the Dataset.
-        numpy.random.default_rng : Constructs a new `Generator`.
-        """
+        Dataset.head : Return the first rows of a `Dataset`.
+        Dataset.tail : Return the last rows of a `Dataset`.
+        .FastArray.sample :
+            Return a given number of randomly selected values from a `.FastArray`.
+
+        Examples
+        --------
+        >>> ds = rt.Dataset({"A": rt.FA([0, 1, 2, 3, 4]),
+        ...                  "B": rt.FA(["a", "b", "c", "d", "e"])})
+        >>> ds.sample(2)
+        #   A   B  # random
+        -   -   -
+        0   0   a
+        1   1   b
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 10.0 B
+
+        Filter with a boolean mask array:
+
+        >>> f = ds.A > 2
+        >>> ds.sample(2, filter=f)
+        #   A   B  # random
+        -   -   -
+        0   3   d
+        1   4   e
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 10.0 B
+
+        Filter with an index array:
 
+        >>> f = rt.FA([0, 1, 2])
+        >>> ds.sample(2, filter=f)
+        #   A   B  # random
+        -   -   -
+        0   0   a
+        1   2   c
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 10.0 B
+        """
         return sample(self, N=N, filter=filter, seed=seed)
 
     # -------------------------------------------------------
     def _get_columns(self, cols: Union[str, Iterable[str]]) -> List[FastArray]:
         """internal routine used to create a list of one or more columns"""
         if not isinstance(cols, list):
             if isinstance(cols, str):
@@ -5730,14 +5778,15 @@
 
             if not any(noncomp):
                 # does not respect noncomputable cols.
                 # 2.74 ms  6.18 s per loop (mean  std. dev. of 7 runs, 100 loops each)
                 # return np.array([func(np.array(self[_r, :].tolist()), **kwargs) for _r in range(self.get_nrows())])
                 # 267 s  2 s per loop (mean  std. dev. of 7 runs, 1000 loops each)
                 return FastArray([func(_r, **kwargs) for _r in self.asrows(as_type="array")])
+
             # respects noncomputable cols.
             # 448 s  1.7 s per loop (mean  std. dev. of 7 runs, 1000 loops each)
             def _row(_i):
                 _r = [arr[_i] for arr in self.values()]
                 _keep = np.ones(len(_r), dtype=bool)
                 for _i, _nc in enumerate(noncomp):
                     if _nc:
```

### Comparing `riptable-1.7.0/riptable/rt_datetime.py` & `riptable-1.8.0/riptable/rt_datetime.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_display.py` & `riptable-1.8.0/riptable/rt_display.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_ema.py` & `riptable-1.8.0/riptable/rt_ema.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_enum.py` & `riptable-1.8.0/riptable/rt_enum.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_fastarray.py` & `riptable-1.8.0/riptable/rt_fastarray.py`

 * *Files 1% similar despite different names*

```diff
@@ -3167,11662 +3167,12054 @@
 0000c5e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000c5f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000c600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000c610: 2d2d 2d2d 0d0a 2020 2020 6465 6620 636f  ----..    def co
 0000c620: 7079 5f69 6e76 616c 6964 2873 656c 6629  py_invalid(self)
 0000c630: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
 0000c640: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0000c650: 2020 2020 204d 616b 6573 2061 2063 6f70       Makes a cop
-0000c660: 7920 6f66 2074 6865 2061 7272 6179 2066  y of the array f
-0000c670: 696c 6c65 6420 7769 7468 2069 6e76 616c  illed with inval
-0000c680: 6964 732e 0d0a 0d0a 2020 2020 2020 2020  ids.....        
-0000c690: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
-0000c6a0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-0000c6b0: 2020 2020 3e3e 3e20 7274 2e61 7261 6e67      >>> rt.arang
-0000c6c0: 6528 3529 2e63 6f70 795f 696e 7661 6c69  e(5).copy_invali
-0000c6d0: 6428 290d 0a20 2020 2020 2020 2046 6173  d()..        Fas
-0000c6e0: 7441 7272 6179 285b 2d32 3134 3734 3833  tArray([-2147483
-0000c6f0: 3634 382c 202d 3231 3437 3438 3336 3438  648, -2147483648
-0000c700: 2c20 2d32 3134 3734 3833 3634 382c 202d  , -2147483648, -
-0000c710: 3231 3437 3438 3336 3438 2c20 2d32 3134  2147483648, -214
-0000c720: 3734 3833 3634 385d 290d 0a0d 0a20 2020  7483648])....   
-0000c730: 2020 2020 203e 3e3e 2072 742e 6172 616e       >>> rt.aran
-0000c740: 6765 2835 292e 636f 7079 5f69 6e76 616c  ge(5).copy_inval
-0000c750: 6964 2829 2e61 7374 7970 6528 6e70 2e66  id().astype(np.f
-0000c760: 6c6f 6174 3332 290d 0a20 2020 2020 2020  loat32)..       
-0000c770: 2046 6173 7441 7272 6179 285b 6e61 6e2c   FastArray([nan,
-0000c780: 206e 616e 2c20 6e61 6e2c 206e 616e 2c20   nan, nan, nan, 
-0000c790: 6e61 6e5d 2c20 6474 7970 653d 666c 6f61  nan], dtype=floa
-0000c7a0: 7433 3229 0d0a 0d0a 2020 2020 2020 2020  t32)....        
-0000c7b0: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-0000c7c0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-0000c7d0: 2020 2020 4661 7374 4172 7261 792e 696e      FastArray.in
-0000c7e0: 760d 0a20 2020 2020 2020 2046 6173 7441  v..        FastA
-0000c7f0: 7272 6179 2e66 696c 6c5f 696e 7661 6c69  rray.fill_invali
-0000c800: 640d 0a20 2020 2020 2020 2022 2222 0d0a  d..        """..
-0000c810: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000c820: 656c 662e 6669 6c6c 5f69 6e76 616c 6964  elf.fill_invalid
-0000c830: 2869 6e70 6c61 6365 3d46 616c 7365 290d  (inplace=False).
-0000c840: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-0000c850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c890: 2d2d 2d0d 0a20 2020 2040 7072 6f70 6572  ---..    @proper
-0000c8a0: 7479 0d0a 2020 2020 6465 6620 696e 7628  ty..    def inv(
-0000c8b0: 7365 6c66 2920 2d3e 206e 702e 6e75 6d62  self) -> np.numb
-0000c8c0: 6572 3a0d 0a20 2020 2020 2020 2022 2222  er:..        """
-0000c8d0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0000c8e0: 7320 7468 6520 696e 7661 6c69 6420 7661  s the invalid va
-0000c8f0: 6c75 6520 666f 7220 7468 6520 6172 7261  lue for the arra
-0000c900: 792e 0d0a 2020 2020 2020 2020 6e70 2e69  y...        np.i
-0000c910: 6e74 383a 202d 3132 380d 0a20 2020 2020  nt8: -128..     
-0000c920: 2020 206e 702e 7569 6e74 383a 2032 3535     np.uint8: 255
-0000c930: 0d0a 2020 2020 2020 2020 6e70 2e69 6e74  ..        np.int
-0000c940: 3136 3a20 2d33 3237 3638 0d0a 2020 2020  16: -32768..    
-0000c950: 2020 2020 2e2e 2e61 6e64 2073 6f20 6f6e      ...and so on
-0000c960: 2e2e 0d0a 0d0a 2020 2020 2020 2020 4578  ......        Ex
-0000c970: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
-0000c980: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0000c990: 2020 3e3e 3e20 7274 2e61 7261 6e67 6528    >>> rt.arange(
-0000c9a0: 3529 2e69 6e76 0d0a 2020 2020 2020 2020  5).inv..        
-0000c9b0: 2d32 3134 3734 3833 3634 380d 0a0d 0a20  -2147483648.... 
-0000c9c0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
-0000c9d0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0000c9e0: 2d0d 0a20 2020 2020 2020 2046 6173 7441  -..        FastA
-0000c9f0: 7272 6179 2e63 6f70 795f 696e 7661 6c69  rray.copy_invali
-0000ca00: 640d 0a20 2020 2020 2020 2046 6173 7441  d..        FastA
-0000ca10: 7272 6179 2e66 696c 6c5f 696e 7661 6c69  rray.fill_invali
-0000ca20: 640d 0a20 2020 2020 2020 2049 4e56 414c  d..        INVAL
-0000ca30: 4944 5f44 4943 540d 0a20 2020 2020 2020  ID_DICT..       
-0000ca40: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
-0000ca50: 7475 726e 2049 4e56 414c 4944 5f44 4943  turn INVALID_DIC
-0000ca60: 545b 7365 6c66 2e64 7479 7065 2e6e 756d  T[self.dtype.num
-0000ca70: 5d0d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  ]....    # -----
-0000ca80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ca90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000caa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000cab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000cac0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2066  -----..    def f
-0000cad0: 696c 6c5f 696e 7661 6c69 6428 7365 6c66  ill_invalid(self
-0000cae0: 2c20 7368 6170 653d 4e6f 6e65 2c20 6474  , shape=None, dt
-0000caf0: 7970 653d 4e6f 6e65 2c20 696e 706c 6163  ype=None, inplac
-0000cb00: 653d 5472 7565 2920 2d3e 2046 6173 7441  e=True) -> FastA
-0000cb10: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
-0000cb20: 2222 0d0a 2020 2020 2020 2020 4669 6c6c  ""..        Fill
-0000cb30: 7320 6172 7261 7920 6f72 2072 6574 7572  s array or retur
-0000cb40: 6e73 2063 6f70 7920 6f66 2061 7272 6179  ns copy of array
-0000cb50: 2077 6974 6820 696e 7661 6c69 6420 7661   with invalid va
-0000cb60: 6c75 6520 6f66 2061 7272 6179 2773 2064  lue of array's d
-0000cb70: 7479 7065 206f 7220 6120 7370 6563 6966  type or a specif
-0000cb80: 6965 6420 6f6e 652e 0d0a 2020 2020 2020  ied one...      
-0000cb90: 2020 5761 726e 696e 673a 2062 7920 6465    Warning: by de
-0000cba0: 6661 756c 7420 7468 6973 206f 7065 7261  fault this opera
-0000cbb0: 7469 6f6e 2069 7320 696e 706c 6163 652e  tion is inplace.
-0000cbc0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-0000cbd0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-0000cbe0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0000cbf0: 3e3e 3e20 613d 7274 2e61 7261 6e67 6528  >>> a=rt.arange(
-0000cc00: 3529 2e66 696c 6c5f 696e 7661 6c69 6428  5).fill_invalid(
-0000cc10: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0000cc20: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-0000cc30: 7261 7928 5b2d 3231 3437 3438 3336 3438  ray([-2147483648
-0000cc40: 2c20 2d32 3134 3734 3833 3634 382c 202d  , -2147483648, -
-0000cc50: 3231 3437 3438 3336 3438 2c20 2d32 3134  2147483648, -214
-0000cc60: 3734 3833 3634 382c 202d 3231 3437 3438  7483648, -214748
-0000cc70: 3336 3438 5d29 0d0a 0d0a 2020 2020 2020  3648])....      
-0000cc80: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
-0000cc90: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-0000cca0: 2020 2020 2020 4661 7374 4172 7261 792e        FastArray.
-0000ccb0: 696e 760d 0a20 2020 2020 2020 2046 6173  inv..        Fas
-0000ccc0: 7441 7272 6179 2e66 696c 6c5f 696e 7661  tArray.fill_inva
-0000ccd0: 6c69 640d 0a20 2020 2020 2020 2022 2222  lid..        """
-0000cce0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0000ccf0: 2073 656c 662e 5f66 696c 6c5f 696e 7661   self._fill_inva
-0000cd00: 6c69 645f 696e 7465 726e 616c 2873 6861  lid_internal(sha
-0000cd10: 7065 3d73 6861 7065 2c20 6474 7970 653d  pe=shape, dtype=
-0000cd20: 6474 7970 652c 2069 6e70 6c61 6365 3d69  dtype, inplace=i
-0000cd30: 6e70 6c61 6365 290d 0a0d 0a20 2020 2064  nplace)....    d
-0000cd40: 6566 205f 6669 6c6c 5f69 6e76 616c 6964  ef _fill_invalid
-0000cd50: 5f69 6e74 6572 6e61 6c28 7365 6c66 2c20  _internal(self, 
-0000cd60: 7368 6170 653d 4e6f 6e65 2c20 6474 7970  shape=None, dtyp
-0000cd70: 653d 4e6f 6e65 2c20 696e 706c 6163 653d  e=None, inplace=
-0000cd80: 5472 7565 2c20 6669 6c6c 5f76 616c 3d4e  True, fill_val=N
-0000cd90: 6f6e 6529 3a0d 0a20 2020 2020 2020 2069  one):..        i
-0000cda0: 6620 6474 7970 6520 6973 204e 6f6e 653a  f dtype is None:
-0000cdb0: 0d0a 2020 2020 2020 2020 2020 2020 6474  ..            dt
-0000cdc0: 7970 6520 3d20 7365 6c66 2e64 7479 7065  ype = self.dtype
-0000cdd0: 0d0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
-0000cde0: 6e73 7461 6e63 6528 6474 7970 652c 2073  nstance(dtype, s
-0000cdf0: 7472 293a 0d0a 2020 2020 2020 2020 2020  tr):..          
-0000ce00: 2020 6474 7970 6520 3d20 6e70 2e64 7479    dtype = np.dty
-0000ce10: 7065 2864 7479 7065 290d 0a20 2020 2020  pe(dtype)..     
-0000ce20: 2020 2069 6620 7368 6170 6520 6973 204e     if shape is N
-0000ce30: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-0000ce40: 2020 7368 6170 6520 3d20 7365 6c66 2e73    shape = self.s
-0000ce50: 6861 7065 0d0a 2020 2020 2020 2020 656c  hape..        el
-0000ce60: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
-0000ce70: 6528 7368 6170 652c 2074 7570 6c65 293a  e(shape, tuple):
-0000ce80: 0d0a 2020 2020 2020 2020 2020 2020 7368  ..            sh
-0000ce90: 6170 6520 3d20 2873 6861 7065 2c29 0d0a  ape = (shape,)..
-0000cea0: 0d0a 2020 2020 2020 2020 6966 2066 696c  ..        if fil
-0000ceb0: 6c5f 7661 6c20 6973 204e 6f6e 653a 0d0a  l_val is None:..
-0000cec0: 2020 2020 2020 2020 2020 2020 696e 7620              inv 
-0000ced0: 3d20 494e 5641 4c49 445f 4449 4354 5b64  = INVALID_DICT[d
-0000cee0: 7479 7065 2e6e 756d 5d0d 0a20 2020 2020  type.num]..     
-0000cef0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0000cf00: 2020 2020 2020 696e 7620 3d20 6669 6c6c        inv = fill
-0000cf10: 5f76 616c 0d0a 0d0a 2020 2020 2020 2020  _val....        
-0000cf20: 6966 2069 6e70 6c61 6365 2069 7320 5472  if inplace is Tr
-0000cf30: 7565 3a0d 0a20 2020 2020 2020 2020 2020  ue:..           
-0000cf40: 2069 6620 7368 6170 6520 213d 2073 656c   if shape != sel
-0000cf50: 662e 7368 6170 653a 0d0a 2020 2020 2020  f.shape:..      
-0000cf60: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0000cf70: 5661 6c75 6545 7272 6f72 280d 0a20 2020  ValueError(..   
-0000cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf90: 2066 2249 6e70 6c61 6365 2066 696c 6c20   f"Inplace fill 
-0000cfa0: 696e 7661 6c69 6420 6361 6e6e 6f74 2062  invalid cannot b
-0000cfb0: 6520 6469 6666 6572 656e 7420 6e75 6d62  e different numb
-0000cfc0: 6572 206f 6620 726f 7773 2074 6861 6e20  er of rows than 
-0000cfd0: 6578 6973 7469 6e67 2061 7272 6179 2e20  existing array. 
-0000cfe0: 476f 7420 7b73 6861 7065 7d20 7673 2e20  Got {shape} vs. 
-0000cff0: 6c65 6e67 7468 207b 6c65 6e28 7365 6c66  length {len(self
-0000d000: 297d 220d 0a20 2020 2020 2020 2020 2020  )}"..           
-0000d010: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-0000d020: 2020 2020 6966 2064 7479 7065 2021 3d20      if dtype != 
-0000d030: 7365 6c66 2e64 7479 7065 3a0d 0a20 2020  self.dtype:..   
-0000d040: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-0000d050: 7365 2056 616c 7565 4572 726f 7228 0d0a  se ValueError(..
-0000d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d070: 2020 2020 6622 496e 706c 6163 6520 6669      f"Inplace fi
-0000d080: 6c6c 2069 6e76 616c 6964 2063 616e 6e6f  ll invalid canno
-0000d090: 7420 6265 2064 6966 6665 7265 6e74 2064  t be different d
-0000d0a0: 7479 7065 2074 6861 6e20 6578 6973 7469  type than existi
-0000d0b0: 6e67 2061 7272 6179 2e20 476f 7420 7b64  ng array. Got {d
-0000d0c0: 7479 7065 7d20 7673 2e20 7b6c 656e 2873  type} vs. {len(s
-0000d0d0: 656c 662e 6474 7970 6529 7d22 0d0a 2020  elf.dtype)}"..  
-0000d0e0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-0000d0f0: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
-0000d100: 656c 662e 6669 6c6c 2869 6e76 290d 0a20  elf.fill(inv).. 
-0000d110: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0000d120: 2020 2020 2020 2020 2020 6172 7220 3d20            arr = 
-0000d130: 6675 6c6c 2873 6861 7065 2c20 696e 762c  full(shape, inv,
-0000d140: 2064 7479 7065 3d64 7479 7065 290d 0a20   dtype=dtype).. 
-0000d150: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000d160: 6e20 6172 720d 0a0d 0a20 2020 2023 202d  n arr....    # -
-0000d170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d1a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d1b0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
-0000d1c0: 6620 6973 696e 2873 656c 662c 2074 6573  f isin(self, tes
-0000d1d0: 745f 656c 656d 656e 7473 2c20 6173 7375  t_elements, assu
-0000d1e0: 6d65 5f75 6e69 7175 653d 4661 6c73 652c  me_unique=False,
-0000d1f0: 2069 6e76 6572 743d 4661 6c73 6529 202d   invert=False) -
-0000d200: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-0000d210: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000d220: 2020 2043 616c 6375 6c61 7465 7320 6073     Calculates `s
-0000d230: 656c 6620 696e 2074 6573 745f 656c 656d  elf in test_elem
-0000d240: 656e 7473 602c 2062 726f 6164 6361 7374  ents`, broadcast
-0000d250: 696e 6720 6f76 6572 2060 7365 6c66 6020  ing over `self` 
-0000d260: 6f6e 6c79 2e0d 0a20 2020 2020 2020 2052  only...        R
-0000d270: 6574 7572 6e73 2061 2062 6f6f 6c65 616e  eturns a boolean
-0000d280: 2061 7272 6179 206f 6620 7468 6520 7361   array of the sa
-0000d290: 6d65 2073 6861 7065 2061 7320 6073 656c  me shape as `sel
-0000d2a0: 6660 2074 6861 7420 6973 2054 7275 650d  f` that is True.
-0000d2b0: 0a20 2020 2020 2020 2077 6865 7265 2061  .        where a
-0000d2c0: 6e20 656c 656d 656e 7420 6f66 2060 7365  n element of `se
-0000d2d0: 6c66 6020 6973 2069 6e20 6074 6573 745f  lf` is in `test_
-0000d2e0: 656c 656d 656e 7473 6020 616e 6420 4661  elements` and Fa
-0000d2f0: 6c73 6520 6f74 6865 7277 6973 652e 0d0a  lse otherwise...
-0000d300: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
-0000d310: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
-0000d320: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0000d330: 2020 7465 7374 5f65 6c65 6d65 6e74 7320    test_elements 
-0000d340: 3a20 6172 7261 795f 6c69 6b65 0d0a 2020  : array_like..  
-0000d350: 2020 2020 2020 2020 2020 5468 6520 7661            The va
-0000d360: 6c75 6573 2061 6761 696e 7374 2077 6869  lues against whi
-0000d370: 6368 2074 6f20 7465 7374 2065 6163 6820  ch to test each 
-0000d380: 7661 6c75 6520 6f66 2060 656c 656d 656e  value of `elemen
-0000d390: 7460 2e0d 0a20 2020 2020 2020 2020 2020  t`...           
-0000d3a0: 2054 6869 7320 6172 6775 6d65 6e74 2069   This argument i
-0000d3b0: 7320 666c 6174 7465 6e65 6420 6966 2069  s flattened if i
-0000d3c0: 7420 6973 2061 6e20 6172 7261 7920 6f72  t is an array or
-0000d3d0: 2061 7272 6179 5f6c 696b 652e 0d0a 2020   array_like...  
-0000d3e0: 2020 2020 2020 2020 2020 5365 6520 6e6f            See no
-0000d3f0: 7465 7320 666f 7220 6265 6861 7669 6f72  tes for behavior
-0000d400: 2077 6974 6820 6e6f 6e2d 6172 7261 792d   with non-array-
-0000d410: 6c69 6b65 2070 6172 616d 6574 6572 732e  like parameters.
-0000d420: 0d0a 2020 2020 2020 2020 6173 7375 6d65  ..        assume
-0000d430: 5f75 6e69 7175 6520 3a20 626f 6f6c 2c20  _unique : bool, 
-0000d440: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
-0000d450: 2020 2020 2020 4966 2054 7275 652c 2074        If True, t
-0000d460: 6865 2069 6e70 7574 2061 7272 6179 7320  he input arrays 
-0000d470: 6172 6520 626f 7468 2061 7373 756d 6564  are both assumed
-0000d480: 2074 6f20 6265 2075 6e69 7175 652c 2077   to be unique, w
-0000d490: 6869 6368 0d0a 2020 2020 2020 2020 2020  hich..          
-0000d4a0: 2020 6361 6e20 7370 6565 6420 7570 2074    can speed up t
-0000d4b0: 6865 2063 616c 6375 6c61 7469 6f6e 2e20  he calculation. 
-0000d4c0: 2044 6566 6175 6c74 2069 7320 4661 6c73   Default is Fals
-0000d4d0: 652e 0d0a 2020 2020 2020 2020 696e 7665  e...        inve
-0000d4e0: 7274 203a 2062 6f6f 6c2c 206f 7074 696f  rt : bool, optio
-0000d4f0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
-0000d500: 2049 6620 5472 7565 2c20 7468 6520 7661   If True, the va
-0000d510: 6c75 6573 2069 6e20 7468 6520 7265 7475  lues in the retu
-0000d520: 726e 6564 2061 7272 6179 2061 7265 2069  rned array are i
-0000d530: 6e76 6572 7465 642c 2061 7320 6966 0d0a  nverted, as if..
-0000d540: 2020 2020 2020 2020 2020 2020 6361 6c63              calc
-0000d550: 756c 6174 696e 6720 6065 6c65 6d65 6e74  ulating `element
-0000d560: 206e 6f74 2069 6e20 7465 7374 5f65 6c65   not in test_ele
-0000d570: 6d65 6e74 7360 2e20 4465 6661 756c 7420  ments`. Default 
-0000d580: 6973 2046 616c 7365 2e0d 0a20 2020 2020  is False...     
-0000d590: 2020 2020 2020 2060 606e 702e 6973 696e         ``np.isin
-0000d5a0: 2861 2c20 622c 2069 6e76 6572 743d 5472  (a, b, invert=Tr
-0000d5b0: 7565 2960 6020 6973 2065 7175 6976 616c  ue)`` is equival
-0000d5c0: 656e 7420 746f 2028 6275 7420 6661 7374  ent to (but fast
-0000d5d0: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
-0000d5e0: 7468 616e 2920 6060 6e70 2e69 6e76 6572  than) ``np.inver
-0000d5f0: 7428 6e70 2e69 7369 6e28 612c 2062 2929  t(np.isin(a, b))
-0000d600: 6060 2e0d 0a0d 0a20 2020 2020 2020 2052  ``.....        R
-0000d610: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-0000d620: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0000d630: 2069 7369 6e20 3a20 6e64 6172 7261 792c   isin : ndarray,
-0000d640: 2062 6f6f 6c0d 0a20 2020 2020 2020 2020   bool..         
-0000d650: 2020 2048 6173 2074 6865 2073 616d 6520     Has the same 
-0000d660: 7368 6170 6520 6173 2060 656c 656d 656e  shape as `elemen
-0000d670: 7460 2e20 5468 6520 7661 6c75 6573 2060  t`. The values `
-0000d680: 656c 656d 656e 745b 6973 696e 5d60 0d0a  element[isin]`..
-0000d690: 2020 2020 2020 2020 2020 2020 6172 6520              are 
-0000d6a0: 696e 2060 7465 7374 5f65 6c65 6d65 6e74  in `test_element
-0000d6b0: 7360 2e0d 0a0d 0a20 2020 2020 2020 204e  s`.....        N
-0000d6c0: 6f74 653a 2062 6568 6176 696f 7220 6469  ote: behavior di
-0000d6d0: 6666 6572 7320 6672 6f6d 2070 616e 6461  ffers from panda
-0000d6e0: 730d 0a20 2020 2020 2020 202d 2052 6970  s..        - Rip
-0000d6f0: 7461 626c 6520 6661 766f 7273 2062 7974  table favors byt
-0000d700: 6573 7472 696e 6773 2c20 616e 6420 7769  estrings, and wi
-0000d710: 6c6c 206d 616b 6520 636f 6e76 6572 7369  ll make conversi
-0000d720: 6f6e 7320 6672 6f6d 2075 6e69 636f 6465  ons from unicode
-0000d730: 2f62 7974 6573 2074 6f20 6d61 7463 6820  /bytes to match 
-0000d740: 666f 7220 6f70 6572 6174 696f 6e73 2061  for operations a
-0000d750: 7320 6e65 6365 7373 6172 792e 0d0a 2020  s necessary...  
-0000d760: 2020 2020 2020 2d20 5765 2077 696c 6c20        - We will 
-0000d770: 616c 736f 2061 6363 6570 7420 7369 6e67  also accept sing
-0000d780: 6c65 2073 6361 6c61 7273 2066 6f72 2076  le scalars for v
-0000d790: 616c 7565 732e 0d0a 2020 2020 2020 2020  alues...        
-0000d7a0: 2d20 5061 6e64 6173 2073 6572 6965 7320  - Pandas series 
-0000d7b0: 7769 6c6c 2072 6574 7572 6e20 616e 6f74  will return anot
-0000d7c0: 6865 7220 7365 7269 6573 202d 2077 6520  her series - we 
-0000d7d0: 6861 7665 206e 6f20 7365 7269 6573 2c20  have no series, 
-0000d7e0: 616e 6420 7769 6c6c 2072 6574 7572 6e20  and will return 
-0000d7f0: 6120 4661 7374 4172 7261 790d 0a0d 0a20  a FastArray.... 
-0000d800: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
-0000d810: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0000d820: 2d0d 0a20 2020 2020 2020 203e 3e3e 2066  -..        >>> f
-0000d830: 726f 6d20 7269 7074 6162 6c65 2069 6d70  rom riptable imp
-0000d840: 6f72 7420 2a0d 0a20 2020 2020 2020 203e  ort *..        >
-0000d850: 3e3e 2061 203d 2046 4128 5b27 6127 2c27  >> a = FA(['a','
-0000d860: 6227 2c27 6327 2c27 6427 2c27 6527 5d2c  b','c','d','e'],
-0000d870: 2075 6e69 636f 6465 3d46 616c 7365 290d   unicode=False).
-0000d880: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
-0000d890: 7369 6e28 5b27 6127 2c27 6227 5d29 0d0a  sin(['a','b'])..
-0000d8a0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000d8b0: 7928 5b20 5472 7565 2c20 2054 7275 652c  y([ True,  True,
-0000d8c0: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
-0000d8d0: 616c 7365 5d29 0d0a 2020 2020 2020 2020  alse])..        
-0000d8e0: 3e3e 3e20 612e 6973 696e 2827 6127 290d  >>> a.isin('a').
-0000d8f0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0000d900: 6179 285b 2054 7275 652c 2020 4661 6c73  ay([ True,  Fals
-0000d910: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
-0000d920: 2046 616c 7365 5d29 0d0a 2020 2020 2020   False])..      
-0000d930: 2020 3e3e 3e20 612e 6973 696e 287b 2762    >>> a.isin({'b
-0000d940: 277d 290d 0a20 2020 2020 2020 2046 6173  '})..        Fas
-0000d950: 7441 7272 6179 285b 2046 616c 7365 2c20  tArray([ False, 
-0000d960: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
-0000d970: 7365 2c20 4661 6c73 655d 290d 0a20 2020  se, False])..   
-0000d980: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0000d990: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0000d9a0: 7465 7374 5f65 6c65 6d65 6e74 732c 2073  test_elements, s
-0000d9b0: 6574 293a 0d0a 2020 2020 2020 2020 2020  et):..          
-0000d9c0: 2020 7465 7374 5f65 6c65 6d65 6e74 7320    test_elements 
-0000d9d0: 3d20 6c69 7374 2874 6573 745f 656c 656d  = list(test_elem
-0000d9e0: 656e 7473 290d 0a0d 0a20 2020 2020 2020  ents)....       
-0000d9f0: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-0000da00: 6365 2874 6573 745f 656c 656d 656e 7473  ce(test_elements
-0000da10: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
-0000da20: 2020 2020 2020 2020 2020 2020 2320 616c              # al
-0000da30: 6967 6e20 6279 7465 2073 7472 696e 6720  ign byte string 
-0000da40: 7673 2075 6e69 636f 6465 0d0a 2020 2020  vs unicode..    
-0000da50: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0000da60: 6474 7970 652e 6368 6172 2069 6e20 2253  dtype.char in "S
-0000da70: 5522 3a0d 0a20 2020 2020 2020 2020 2020  U":..           
-0000da80: 2020 2020 2069 6620 6e70 2e69 7373 6361       if np.issca
-0000da90: 6c61 7228 7465 7374 5f65 6c65 6d65 6e74  lar(test_element
-0000daa0: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
-0000dab0: 2020 2020 2020 2020 2074 6573 745f 656c           test_el
-0000dac0: 656d 656e 7473 203d 206e 702e 6173 6172  ements = np.asar
-0000dad0: 7261 7928 5b74 6573 745f 656c 656d 656e  ray([test_elemen
-0000dae0: 7473 5d2c 2064 7479 7065 3d73 656c 662e  ts], dtype=self.
-0000daf0: 6474 7970 652e 6368 6172 290d 0a20 2020  dtype.char)..   
-0000db00: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0000db10: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000db20: 2020 2020 2020 2020 7465 7374 5f65 6c65          test_ele
-0000db30: 6d65 6e74 7320 3d20 6e70 2e61 7361 7272  ments = np.asarr
-0000db40: 6179 2874 6573 745f 656c 656d 656e 7473  ay(test_elements
-0000db50: 2c20 6474 7970 653d 7365 6c66 2e64 7479  , dtype=self.dty
-0000db60: 7065 2e63 6861 7229 0d0a 2020 2020 2020  pe.char)..      
-0000db70: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0000db80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000db90: 6973 696e 7374 616e 6365 2874 6573 745f  isinstance(test_
-0000dba0: 656c 656d 656e 7473 2c20 7475 706c 6529  elements, tuple)
-0000dbb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000dbc0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-0000dbd0: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
-0000dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dbf0: 2020 2269 7369 6e20 646f 6573 206e 6f74    "isin does not
-0000dc00: 2063 7572 7265 6e74 6c79 2073 7570 706f   currently suppo
-0000dc10: 7274 2074 7570 6c65 732e 2020 496e 2074  rt tuples.  In t
-0000dc20: 6865 2066 7574 7572 6520 6120 7475 706c  he future a tupl
-0000dc30: 6520 7769 6c6c 2062 6520 7573 6564 2074  e will be used t
-0000dc40: 6f20 7265 7072 6573 656e 7420 6120 6d75  o represent a mu
-0000dc50: 6c74 692d 6b65 792e 220d 0a20 2020 2020  lti-key."..     
-0000dc60: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000dc70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000dc80: 2020 7465 7374 5f65 6c65 6d65 6e74 7320    test_elements 
-0000dc90: 3d20 7263 2e41 7346 6173 7441 7272 6179  = rc.AsFastArray
-0000dca0: 2874 6573 745f 656c 656d 656e 7473 290d  (test_elements).
-0000dcb0: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
-0000dcc0: 0a20 2020 2020 2020 2020 2020 2023 206f  .            # o
-0000dcd0: 7074 696d 697a 6174 696f 6e3a 2069 6620  ptimization: if 
-0000dce0: 7765 2068 6176 6520 6a75 7374 206f 6e65  we have just one
-0000dcf0: 2065 6c65 6d65 6e74 2c20 7765 2063 616e   element, we can
-0000dd00: 206a 7573 7420 7061 7261 6c6c 656c 2063   just parallel c
-0000dd10: 6f6d 7061 7265 2074 6861 7420 6f6e 6520  ompare that one 
-0000dd20: 656c 656d 656e 740d 0a20 2020 2020 2020  element..       
-0000dd30: 2020 2020 2069 6620 6c65 6e28 7465 7374       if len(test
-0000dd40: 5f65 6c65 6d65 6e74 7329 203d 3d20 313a  _elements) == 1:
-0000dd50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000dd60: 2020 2320 7374 7269 6e67 2063 6f6d 7061    # string compa
-0000dd70: 7269 736f 6e20 746f 2069 6e74 2077 696c  rison to int wil
-0000dd80: 6c20 6661 696c 0d0a 2020 2020 2020 2020  l fail..        
-0000dd90: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-0000dda0: 2073 656c 6620 3d3d 2074 6573 745f 656c   self == test_el
-0000ddb0: 656d 656e 7473 5b30 5d0d 0a20 2020 2020  ements[0]..     
-0000ddc0: 2020 2020 2020 2020 2020 2023 2063 6865             # che
-0000ddd0: 636b 2066 6f72 2066 6169 6c65 6420 7265  ck for failed re
-0000dde0: 7375 6c74 0d0a 2020 2020 2020 2020 2020  sult..          
-0000ddf0: 2020 2020 2020 6966 206e 702e 6973 7363        if np.issc
-0000de00: 616c 6172 2872 6573 756c 7429 3a0d 0a20  alar(result):.. 
-0000de10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000de20: 2020 2072 6573 756c 7420 3d20 6973 6d65     result = isme
-0000de30: 6d62 6572 2873 656c 662c 2074 6573 745f  mber(self, test_
-0000de40: 656c 656d 656e 7473 295b 305d 0d0a 2020  elements)[0]..  
-0000de50: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-0000de60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000de70: 2072 6573 756c 7420 3d20 6973 6d65 6d62   result = ismemb
-0000de80: 6572 2873 656c 662c 2074 6573 745f 656c  er(self, test_el
-0000de90: 656d 656e 7473 295b 305d 0d0a 2020 2020  ements)[0]..    
-0000dea0: 2020 2020 2020 2020 6966 2069 6e76 6572          if inver
-0000deb0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-0000dec0: 2020 2020 6e70 2e6c 6f67 6963 616c 5f6e      np.logical_n
-0000ded0: 6f74 2872 6573 756c 742c 206f 7574 3d72  ot(result, out=r
-0000dee0: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
-0000def0: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-0000df00: 740d 0a20 2020 2020 2020 2065 7863 6570  t..        excep
-0000df10: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
-0000df20: 2020 2020 2020 2020 2020 2320 7075 6e74            # punt
-0000df30: 206e 6f6e 2d73 7570 706f 7274 6564 2074   non-supported t
-0000df40: 7970 6573 2074 6f20 6e75 6d70 790d 0a20  ypes to numpy.. 
-0000df50: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000df60: 6e20 6e70 2e69 7369 6e28 7365 6c66 2e5f  n np.isin(self._
-0000df70: 6e70 2c20 7465 7374 5f65 6c65 6d65 6e74  np, test_element
-0000df80: 732c 2061 7373 756d 655f 756e 6971 7565  s, assume_unique
-0000df90: 3d61 7373 756d 655f 756e 6971 7565 2c20  =assume_unique, 
-0000dfa0: 696e 7665 7274 3d69 6e76 6572 7429 0d0a  invert=invert)..
-0000dfb0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-0000dfc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dfd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dfe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e000: 2d0d 0a20 2020 2064 6566 2062 6574 7765  -..    def betwe
-0000e010: 656e 2873 656c 662c 206c 6f77 2c20 6869  en(self, low, hi
-0000e020: 6768 2c20 696e 636c 7564 655f 6c6f 773a  gh, include_low:
-0000e030: 2062 6f6f 6c20 3d20 5472 7565 2c20 696e   bool = True, in
-0000e040: 636c 7564 655f 6869 6768 3a20 626f 6f6c  clude_high: bool
-0000e050: 203d 2046 616c 7365 2920 2d3e 2046 6173   = False) -> Fas
-0000e060: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-0000e070: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
-0000e080: 7475 726e 2061 2062 6f6f 6c65 616e 2060  turn a boolean `
-0000e090: 4661 7374 4172 7261 7960 2069 6e64 6963  FastArray` indic
-0000e0a0: 6174 696e 6720 7768 6963 6820 696e 7075  ating which inpu
-0000e0b0: 7420 7661 6c75 6573 2061 7265 2069 6e20  t values are in 
-0000e0c0: 6120 7370 6563 6966 6965 6420 696e 7465  a specified inte
-0000e0d0: 7276 616c 2e0d 0a0d 0a20 2020 2020 2020  rval.....       
-0000e0e0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-0000e0f0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-0000e100: 0a20 2020 2020 2020 206c 6f77 3a20 7363  .        low: sc
-0000e110: 616c 6172 2c20 6172 7261 790d 0a20 2020  alar, array..   
-0000e120: 2020 2020 2020 2020 204c 6f77 6572 2062           Lower b
-0000e130: 6f75 6e64 2066 6f72 2074 6865 2069 6e74  ound for the int
-0000e140: 6572 7661 6c2e 2049 6620 616e 2061 7272  erval. If an arr
-0000e150: 6179 2c20 6d75 7374 2062 6520 7468 6520  ay, must be the 
-0000e160: 7361 6d65 2073 697a 6520 6173 2060 7365  same size as `se
-0000e170: 6c66 602c 2061 6e64 2063 6f6d 7061 7269  lf`, and compari
-0000e180: 736f 6e73 2061 7265 2064 6f6e 6520 656c  sons are done el
-0000e190: 656d 656e 7477 6973 652e 0d0a 2020 2020  ementwise...    
-0000e1a0: 2020 2020 6869 6768 3a20 7363 616c 6172      high: scalar
-0000e1b0: 2c20 6172 7261 790d 0a20 2020 2020 2020  , array..       
-0000e1c0: 2020 2020 2055 7070 6572 2062 6f75 6e64       Upper bound
-0000e1d0: 2066 6f72 2074 6865 2069 6e74 6572 7661   for the interva
-0000e1e0: 6c2e 2049 6620 616e 2061 7272 6179 2c20  l. If an array, 
-0000e1f0: 6d75 7374 2062 6520 7468 6520 7361 6d65  must be the same
-0000e200: 2073 697a 6520 6173 2060 7365 6c66 602c   size as `self`,
-0000e210: 2061 6e64 2063 6f6d 7061 7269 736f 6e73   and comparisons
-0000e220: 2061 7265 2064 6f6e 6520 656c 656d 656e   are done elemen
-0000e230: 7477 6973 652e 0d0a 2020 2020 2020 2020  twise...        
-0000e240: 696e 636c 7564 655f 6c6f 773a 2062 6f6f  include_low: boo
-0000e250: 6c2c 2064 6566 6175 6c74 2054 7275 650d  l, default True.
-0000e260: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
-0000e270: 6369 6669 6573 2077 6865 7468 6572 2060  cifies whether `
-0000e280: 6c6f 7760 2069 7320 696e 636c 7564 6564  low` is included
-0000e290: 2077 6865 6e20 7065 7266 6f72 6d69 6e67   when performing
-0000e2a0: 2063 6f6d 7061 7269 736f 6e73 2e0d 0a20   comparisons... 
-0000e2b0: 2020 2020 2020 2069 6e63 6c75 6465 5f68         include_h
-0000e2c0: 6967 683a 2062 6f6f 6c2c 2064 6566 6175  igh: bool, defau
-0000e2d0: 6c74 2046 616c 7365 0d0a 2020 2020 2020  lt False..      
-0000e2e0: 2020 2020 2020 5370 6563 6966 6965 7320        Specifies 
-0000e2f0: 7768 6574 6865 7220 6068 6967 6860 2069  whether `high` i
-0000e300: 7320 696e 636c 7564 6564 2077 6865 6e20  s included when 
-0000e310: 7065 7266 6f72 6d69 6e67 2063 6f6d 7061  performing compa
-0000e320: 7269 736f 6e73 2e0d 0a0d 0a20 2020 2020  risons.....     
-0000e330: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
-0000e340: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
-0000e350: 2020 2020 2046 6173 7441 7272 6179 0d0a       FastArray..
-0000e360: 2020 2020 2020 2020 2020 2020 4120 626f              A bo
-0000e370: 6f6c 6561 6e20 6046 6173 7441 7272 6179  olean `FastArray
-0000e380: 6020 696e 6469 6361 7469 6e67 2077 6869  ` indicating whi
-0000e390: 6368 2069 6e70 7574 2076 616c 7565 7320  ch input values 
-0000e3a0: 6172 6520 696e 2061 2073 7065 6369 6669  are in a specifi
-0000e3b0: 6564 2069 6e74 6572 7661 6c2e 0d0a 0d0a  ed interval.....
-0000e3c0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
-0000e3d0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0000e3e0: 2d2d 0d0a 2020 2020 2020 2020 5370 6563  --..        Spec
-0000e3f0: 6966 7920 616e 2069 6e74 6572 7661 6c20  ify an interval 
-0000e400: 7573 696e 6720 7363 616c 6172 733a 0d0a  using scalars:..
-0000e410: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-0000e420: 3d20 7274 2e46 4128 5b39 2c20 322c 2033  = rt.FA([9, 2, 3
-0000e430: 2c20 352c 2038 2c20 392c 2031 2c20 342c  , 5, 8, 9, 1, 4,
-0000e440: 2036 5d29 0d0a 2020 2020 2020 2020 3e3e   6])..        >>
-0000e450: 3e20 612e 6265 7477 6565 6e28 352c 2039  > a.between(5, 9
-0000e460: 2c20 696e 636c 7564 655f 6c6f 773d 4661  , include_low=Fa
-0000e470: 6c73 6529 2020 2320 4578 636c 7564 6520  lse)  # Exclude 
-0000e480: 6035 6020 286c 6566 7420 656e 6470 6f69  `5` (left endpoi
-0000e490: 6e74 290d 0a20 2020 2020 2020 2046 6173  nt)..        Fas
-0000e4a0: 7441 7272 6179 285b 4661 6c73 652c 2046  tArray([False, F
-0000e4b0: 616c 7365 2c20 4661 6c73 652c 2046 616c  alse, False, Fal
-0000e4c0: 7365 2c20 2054 7275 652c 2046 616c 7365  se,  True, False
-0000e4d0: 2c20 4661 6c73 652c 2046 616c 7365 2c20  , False, False, 
-0000e4e0: 2054 7275 655d 290d 0a0d 0a20 2020 2020   True])....     
-0000e4f0: 2020 2053 7065 6369 6679 2061 6e20 696e     Specify an in
-0000e500: 7465 7276 616c 2075 7369 6e67 2061 7272  terval using arr
-0000e510: 6179 733a 0d0a 0d0a 2020 2020 2020 2020  ays:....        
-0000e520: 3e3e 3e20 6132 203d 2072 742e 4641 285b  >>> a2 = rt.FA([
-0000e530: 312c 2032 2c20 332c 2034 2c20 355d 290d  1, 2, 3, 4, 5]).
-0000e540: 0a20 2020 2020 2020 203e 3e3e 2061 322e  .        >>> a2.
-0000e550: 6265 7477 6565 6e28 5b31 2c20 332c 2035  between([1, 3, 5
-0000e560: 2c20 352c 2035 5d2c 205b 322c 2034 2c20  , 5, 5], [2, 4, 
-0000e570: 362c 2036 2c20 365d 290d 0a20 2020 2020  6, 6, 6])..     
-0000e580: 2020 2046 6173 7441 7272 6179 285b 2054     FastArray([ T
-0000e590: 7275 652c 2046 616c 7365 2c20 4661 6c73  rue, False, Fals
-0000e5a0: 652c 2046 616c 7365 2c20 2054 7275 655d  e, False,  True]
-0000e5b0: 290d 0a0d 0a20 2020 2020 2020 2053 7065  )....        Spe
-0000e5c0: 6369 6679 2061 6e20 696e 7465 7276 616c  cify an interval
-0000e5d0: 206d 6978 696e 6720 7363 616c 6172 2061   mixing scalar a
-0000e5e0: 6e64 2061 7272 6179 2062 6f75 6e64 733a  nd array bounds:
-0000e5f0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-0000e600: 6133 203d 2072 742e 4641 285b 312c 2032  a3 = rt.FA([1, 2
-0000e610: 2c20 332c 2034 2c20 355d 290d 0a20 2020  , 3, 4, 5])..   
-0000e620: 2020 2020 203e 3e3e 2061 332e 6265 7477       >>> a3.betw
-0000e630: 6565 6e28 322c 205b 322c 2034 2c20 362c  een(2, [2, 4, 6,
-0000e640: 2036 2c20 365d 290d 0a20 2020 2020 2020   6, 6])..       
-0000e650: 2046 6173 7441 7272 6179 285b 4661 6c73   FastArray([Fals
-0000e660: 652c 2020 5472 7565 2c20 2054 7275 652c  e,  True,  True,
-0000e670: 2020 5472 7565 2c20 2054 7275 655d 290d    True,  True]).
-0000e680: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0000e690: 2020 2020 2020 6c6f 7720 3d20 6173 616e        low = asan
-0000e6a0: 7961 7272 6179 286c 6f77 290d 0a20 2020  yarray(low)..   
-0000e6b0: 2020 2020 2068 6967 6820 3d20 6173 616e       high = asan
-0000e6c0: 7961 7272 6179 2868 6967 6829 0d0a 0d0a  yarray(high)....
-0000e6d0: 2020 2020 2020 2020 6966 2069 6e63 6c75          if inclu
-0000e6e0: 6465 5f6c 6f77 3a0d 0a20 2020 2020 2020  de_low:..       
-0000e6f0: 2020 2020 2072 6574 203d 2073 656c 6620       ret = self 
-0000e700: 3e3d 206c 6f77 0d0a 2020 2020 2020 2020  >= low..        
-0000e710: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-0000e720: 2020 2072 6574 203d 2073 656c 6620 3e20     ret = self > 
-0000e730: 6c6f 770d 0a20 2020 2020 2020 2069 6620  low..        if 
-0000e740: 696e 636c 7564 655f 6869 6768 3a0d 0a20  include_high:.. 
-0000e750: 2020 2020 2020 2020 2020 2072 6574 2026             ret &
-0000e760: 3d20 7365 6c66 203c 3d20 6869 6768 0d0a  = self <= high..
-0000e770: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0000e780: 2020 2020 2020 2020 2020 2072 6574 2026             ret &
-0000e790: 3d20 7365 6c66 203c 2068 6967 680d 0a20  = self < high.. 
-0000e7a0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0000e7b0: 740d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  t....    # -----
-0000e7c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e7d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e7e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e7f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e800: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2073  -----..    def s
-0000e810: 616d 706c 6528 0d0a 2020 2020 2020 2020  ample(..        
-0000e820: 7365 6c66 2c0d 0a20 2020 2020 2020 204e  self,..        N
-0000e830: 3a20 696e 7420 3d20 3130 2c0d 0a20 2020  : int = 10,..   
-0000e840: 2020 2020 2066 696c 7465 723a 204f 7074       filter: Opt
-0000e850: 696f 6e61 6c5b 6e70 2e6e 6461 7272 6179  ional[np.ndarray
-0000e860: 5d20 3d20 4e6f 6e65 2c0d 0a20 2020 2020  ] = None,..     
-0000e870: 2020 2073 6565 643a 204f 7074 696f 6e61     seed: Optiona
-0000e880: 6c5b 556e 696f 6e5b 696e 742c 2053 6571  l[Union[int, Seq
-0000e890: 7565 6e63 655b 696e 745d 2c20 6e70 2e72  uence[int], np.r
-0000e8a0: 616e 646f 6d2e 5365 6564 5365 7175 656e  andom.SeedSequen
-0000e8b0: 6365 2c20 6e70 2e72 616e 646f 6d2e 4765  ce, np.random.Ge
-0000e8c0: 6e65 7261 746f 725d 5d20 3d20 4e6f 6e65  nerator]] = None
-0000e8d0: 2c0d 0a20 2020 2029 202d 3e20 4661 7374  ,..    ) -> Fast
-0000e8e0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-0000e8f0: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
-0000e900: 7572 6e20 6120 6769 7665 6e20 6e75 6d62  urn a given numb
-0000e910: 6572 206f 6620 7261 6e64 6f6d 6c79 2073  er of randomly s
-0000e920: 656c 6563 7465 6420 7661 6c75 6573 2066  elected values f
-0000e930: 726f 6d20 6120 6046 6173 7441 7272 6179  rom a `FastArray
-0000e940: 602e 0d0a 0d0a 2020 2020 2020 2020 5061  `.....        Pa
-0000e950: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-0000e960: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-0000e970: 2020 2020 2020 4e20 3a20 696e 742c 2064        N : int, d
-0000e980: 6566 6175 6c74 2031 300d 0a20 2020 2020  efault 10..     
-0000e990: 2020 2020 2020 204e 756d 6265 7220 6f66         Number of
-0000e9a0: 2076 616c 7565 7320 746f 2073 656c 6563   values to selec
-0000e9b0: 742e 2054 6865 2065 6e74 6972 6520 6172  t. The entire ar
-0000e9c0: 7261 7920 6973 2072 6574 7572 6e65 6420  ray is returned 
-0000e9d0: 6966 2060 4e60 2069 7320 6772 6561 7465  if `N` is greate
-0000e9e0: 7220 7468 616e 2074 6865 2073 697a 6520  r than the size 
-0000e9f0: 6f66 2074 6865 2061 7272 6179 2e0d 0a20  of the array... 
-0000ea00: 2020 2020 2020 2066 696c 7465 7220 3a20         filter : 
-0000ea10: 6172 7261 7920 2862 6f6f 6c20 6f72 2069  array (bool or i
-0000ea20: 6e74 292c 206f 7074 696f 6e61 6c0d 0a20  nt), optional.. 
-0000ea30: 2020 2020 2020 2020 2020 2041 2062 6f6f             A boo
-0000ea40: 6c65 616e 206d 6173 6b20 6f72 2069 6e64  lean mask or ind
-0000ea50: 6578 2061 7272 6179 2074 6f20 6669 6c74  ex array to filt
-0000ea60: 6572 2076 616c 7565 7320 6265 666f 7265  er values before
-0000ea70: 2073 656c 6563 7469 6f6e 2e20 4e6f 7465   selection. Note
-0000ea80: 2074 6861 7420 756e 7469 6c20 6120 7265   that until a re
-0000ea90: 706f 7274 6564 2062 7567 2069 7320 6669  ported bug is fi
-0000eaa0: 7865 642c 206e 6f20 6572 726f 7220 6973  xed, no error is
-0000eab0: 2072 6169 7365 6420 616e 6420 756e 6578   raised and unex
-0000eac0: 7065 6374 6564 2072 6573 756c 7473 206d  pected results m
-0000ead0: 6179 206f 6363 7572 2077 6865 6e20 6120  ay occur when a 
-0000eae0: 626f 6f6c 6561 6e20 6d61 736b 2061 7272  boolean mask arr
-0000eaf0: 6179 2077 6974 6820 6120 6c65 6e67 7468  ay with a length
-0000eb00: 2064 6966 6665 7265 6e74 2066 726f 6d20   different from 
-0000eb10: 7468 6174 206f 6620 7468 6520 6172 7261  that of the arra
-0000eb20: 7920 6974 2773 206d 6173 6b69 6e67 2069  y it's masking i
-0000eb30: 7320 7061 7373 6564 2061 7320 6120 6669  s passed as a fi
-0000eb40: 6c74 6572 2e0d 0a20 2020 2020 2020 2073  lter...        s
-0000eb50: 6565 6420 3a20 696e 7420 6f72 206f 7468  eed : int or oth
-0000eb60: 6572 2074 7970 6573 2c20 6f70 7469 6f6e  er types, option
-0000eb70: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
-0000eb80: 4120 7365 6564 2074 6f20 696e 6974 6961  A seed to initia
-0000eb90: 6c69 7a65 2074 6865 2072 616e 646f 6d20  lize the random 
-0000eba0: 6e75 6d62 6572 2067 656e 6572 6174 6f72  number generator
-0000ebb0: 2e20 4966 206f 6e65 2069 7320 6e6f 7420  . If one is not 
-0000ebc0: 7072 6f76 6964 6564 2c20 7468 6520 6765  provided, the ge
-0000ebd0: 6e65 7261 746f 7220 6973 2069 6e69 7469  nerator is initi
-0000ebe0: 616c 697a 6564 2075 7369 6e67 2072 616e  alized using ran
-0000ebf0: 646f 6d20 6461 7461 2066 726f 6d20 7468  dom data from th
-0000ec00: 6520 4f53 2e20 466f 7220 6465 7461 696c  e OS. For detail
-0000ec10: 7320 616e 6420 6f74 6865 7220 6163 6365  s and other acce
-0000ec20: 7074 6564 2074 7970 6573 2c20 7365 6520  pted types, see 
-0000ec30: 7468 6520 6073 6565 6460 2070 6172 616d  the `seed` param
-0000ec40: 6574 6572 2066 6f72 2060 6e75 6d70 792e  eter for `numpy.
-0000ec50: 7261 6e64 6f6d 2e64 6566 6175 6c74 5f72  random.default_r
-0000ec60: 6e67 602e 0d0a 0d0a 2020 2020 2020 2020  ng`.....        
-0000ec70: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
-0000ec80: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-0000ec90: 2020 4661 7374 4172 7261 790d 0a20 2020    FastArray..   
-0000eca0: 2020 2020 2020 2020 2041 206e 6577 2060           A new `
-0000ecb0: 4661 7374 4172 7261 7960 2063 6f6e 7461  FastArray` conta
-0000ecc0: 696e 696e 6720 7468 6520 7261 6e64 6f6d  ining the random
-0000ecd0: 6c79 2073 656c 6563 7465 6420 7661 6c75  ly selected valu
-0000ece0: 6573 2e0d 0a0d 0a20 2020 2020 2020 2053  es.....        S
-0000ecf0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
-0000ed00: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-0000ed10: 2020 202e 4461 7461 7365 742e 7361 6d70     .Dataset.samp
-0000ed20: 6c65 203a 2052 6574 7572 6e20 6120 7370  le : Return a sp
-0000ed30: 6563 6966 6965 6420 6e75 6d62 6572 206f  ecified number o
-0000ed40: 6620 7261 6e64 6f6d 6c79 2073 656c 6563  f randomly selec
-0000ed50: 7465 6420 726f 7773 2066 726f 6d20 6120  ted rows from a 
-0000ed60: 602e 4461 7461 7365 7460 2e0d 0a0d 0a20  `.Dataset`..... 
-0000ed70: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
-0000ed80: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0000ed90: 2d0d 0a20 2020 2020 2020 204e 6f20 7361  -..        No sa
-0000eda0: 6d70 6c65 2073 697a 6520 7370 6563 6966  mple size specif
-0000edb0: 6965 643a 0d0a 0d0a 2020 2020 2020 2020  ied:....        
-0000edc0: 3e3e 3e20 6120 3d20 7274 2e46 4128 5b31  >>> a = rt.FA([1
-0000edd0: 2c20 322c 2033 2c20 342c 2035 2c20 362c  , 2, 3, 4, 5, 6,
-0000ede0: 2037 2c20 382c 2039 2c20 3130 2c20 3131   7, 8, 9, 10, 11
-0000edf0: 2c20 3132 5d29 0d0a 2020 2020 2020 2020  , 12])..        
-0000ee00: 3e3e 3e20 612e 7361 6d70 6c65 2829 2020  >>> a.sample()  
-0000ee10: 2320 3130 2072 616e 646f 6d6c 7920 7365  # 10 randomly se
-0000ee20: 6c65 6374 6564 2076 616c 7565 7320 7265  lected values re
-0000ee30: 7475 726e 6564 2e0d 0a20 2020 2020 2020  turned...       
-0000ee40: 2046 6173 7441 7272 6179 285b 2031 2c20   FastArray([ 1, 
-0000ee50: 2032 2c20 2033 2c20 2034 2c20 2035 2c20   2,  3,  4,  5, 
-0000ee60: 2036 2c20 2037 2c20 2039 2c20 3130 2c20   6,  7,  9, 10, 
-0000ee70: 3131 5d29 2020 2320 5261 6e64 6f6d 0d0a  11])  # Random..
-0000ee80: 0d0a 2020 2020 2020 2020 5361 6d70 6c65  ..        Sample
-0000ee90: 2033 2076 616c 7565 733a 0d0a 0d0a 2020   3 values:....  
-0000eea0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-0000eeb0: 2e46 4128 5b31 2c20 322c 2033 2c20 342c  .FA([1, 2, 3, 4,
-0000eec0: 2035 2c20 362c 2037 2c20 382c 2039 2c20   5, 6, 7, 8, 9, 
-0000eed0: 3130 2c20 3131 2c20 3132 5d29 0d0a 2020  10, 11, 12])..  
-0000eee0: 2020 2020 2020 3e3e 3e20 612e 7361 6d70        >>> a.samp
-0000eef0: 6c65 2833 290d 0a20 2020 2020 2020 2046  le(3)..        F
-0000ef00: 6173 7441 7272 6179 285b 312c 2034 2c20  astArray([1, 4, 
-0000ef10: 395d 2920 2023 2052 616e 646f 6d0d 0a0d  9])  # Random...
-0000ef20: 0a20 2020 2020 2020 2053 7065 6369 6679  .        Specify
-0000ef30: 2061 2073 616d 706c 6520 7369 7a65 206c   a sample size l
-0000ef40: 6172 6765 7220 7468 616e 2074 6865 2061  arger than the a
-0000ef50: 7272 6179 3a0d 0a0d 0a20 2020 2020 2020  rray:....       
-0000ef60: 203e 3e3e 2061 3220 3d20 7274 2e46 4128   >>> a2 = rt.FA(
-0000ef70: 5b31 2c20 322c 2033 2c20 342c 2035 5d29  [1, 2, 3, 4, 5])
-0000ef80: 0d0a 2020 2020 2020 2020 3e3e 3e20 6132  ..        >>> a2
-0000ef90: 2e73 616d 706c 6528 3130 3029 2020 2320  .sample(100)  # 
-0000efa0: 5468 6520 656e 7469 7265 2061 7272 6179  The entire array
-0000efb0: 2069 7320 7265 7475 726e 6564 2e0d 0a20   is returned... 
-0000efc0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-0000efd0: 285b 312c 2032 2c20 332c 2034 2c20 355d  ([1, 2, 3, 4, 5]
-0000efe0: 290d 0a0d 0a20 2020 2020 2020 2053 7065  )....        Spe
-0000eff0: 6369 6679 2061 6e20 696e 6465 7820 6172  cify an index ar
-0000f000: 7261 7920 666f 7220 6669 6c74 6572 696e  ray for filterin
-0000f010: 673a 0d0a 0d0a 2020 2020 2020 2020 3e3e  g:....        >>
-0000f020: 3e20 6133 203d 2072 742e 4641 285b 2754  > a3 = rt.FA(['T
-0000f030: 534c 4127 2c27 414d 5a4e 272c 2749 424d  SLA','AMZN','IBM
-0000f040: 272c 2027 5350 5927 2c20 2747 4d45 272c  ', 'SPY', 'GME',
-0000f050: 2027 4141 504c 272c 2027 4642 272c 2027   'AAPL', 'FB', '
-0000f060: 474f 4f47 272c 2027 4d53 4654 272c 2027  GOOG', 'MSFT', '
-0000f070: 5542 4552 275d 2920 2023 2043 7265 6174  UBER'])  # Creat
-0000f080: 6520 7361 6d70 6c65 2064 6174 612e 0d0a  e sample data...
-0000f090: 2020 2020 2020 2020 3e3e 3e20 6669 6c74          >>> filt
-0000f0a0: 6572 203d 2072 742e 4641 285b 302c 2031  er = rt.FA([0, 1
-0000f0b0: 2c20 332c 2037 5d29 2020 2320 5370 6563  , 3, 7])  # Spec
-0000f0c0: 6966 7920 696e 6469 6365 7320 6f66 2061  ify indices of a
-0000f0d0: 3320 746f 2074 616b 6520 7468 6520 7361  3 to take the sa
-0000f0e0: 6d70 6c65 2066 726f 6d2e 0d0a 2020 2020  mple from...    
-0000f0f0: 2020 2020 3e3e 3e20 6133 2e73 616d 706c      >>> a3.sampl
-0000f100: 6528 322c 2066 696c 7465 7229 0d0a 2020  e(2, filter)..  
-0000f110: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-0000f120: 5b62 2754 534c 4127 2c20 6227 474f 4f47  [b'TSLA', b'GOOG
-0000f130: 275d 2c20 6474 7970 653d 277c 5334 2729  '], dtype='|S4')
-0000f140: 2020 2320 5261 6e64 6f6d 0d0a 0d0a 2020    # Random....  
-0000f150: 2020 2020 2020 5370 6563 6966 7920 6120        Specify a 
-0000f160: 626f 6f6c 6561 6e20 6d61 736b 2061 7272  boolean mask arr
-0000f170: 6179 2066 6f72 2066 696c 7465 7269 6e67  ay for filtering
-0000f180: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
-0000f190: 2061 332e 7361 6d70 6c65 2838 2c20 6669   a3.sample(8, fi
-0000f1a0: 6c74 6572 3d72 742e 4641 2861 3320 213d  lter=rt.FA(a3 !=
-0000f1b0: 2027 5350 5927 2929 0d0a 2020 2020 2020   'SPY'))..      
-0000f1c0: 2020 4661 7374 4172 7261 7928 5b62 2754    FastArray([b'T
-0000f1d0: 534c 4127 2c20 6227 4942 4d27 2c20 6227  SLA', b'IBM', b'
-0000f1e0: 474d 4527 2c20 6227 4141 504c 272c 2062  GME', b'AAPL', b
-0000f1f0: 2746 4227 2c20 6227 474f 4f47 272c 2062  'FB', b'GOOG', b
-0000f200: 274d 5346 5427 2c0d 0a20 2020 2020 2020  'MSFT',..       
-0000f210: 2020 2020 2020 2020 2020 2020 6227 5542              b'UB
-0000f220: 4552 275d 2c20 6474 7970 653d 277c 5334  ER'], dtype='|S4
-0000f230: 2729 2020 2320 5261 6e64 6f6d 0d0a 2020  ')  # Random..  
-0000f240: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000f250: 2020 2072 6574 7572 6e20 7361 6d70 6c65     return sample
-0000f260: 2873 656c 662c 204e 3d4e 2c20 6669 6c74  (self, N=N, filt
-0000f270: 6572 3d66 696c 7465 722c 2073 6565 643d  er=filter, seed=
-0000f280: 7365 6564 290d 0a0d 0a20 2020 2023 202d  seed)....    # -
-0000f290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f2a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f2b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f2c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f2d0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-0000f2e0: 6566 2064 7570 6c69 6361 7465 6428 7365  ef duplicated(se
-0000f2f0: 6c66 2c20 6b65 6570 3d22 6669 7273 7422  lf, keep="first"
-0000f300: 2c20 6869 6768 5f75 6e69 7175 653d 4661  , high_unique=Fa
-0000f310: 6c73 6529 202d 3e20 4661 7374 4172 7261  lse) -> FastArra
-0000f320: 793a 0d0a 2020 2020 2020 2020 2222 220d  y:..        """.
-0000f330: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
-0000f340: 6120 626f 6f6c 6561 6e20 6046 6173 7441  a boolean `FastA
-0000f350: 7272 6179 6020 696e 6469 6361 7469 6e67  rray` indicating
-0000f360: 2060 5472 7565 6020 666f 7220 6475 706c   `True` for dupl
-0000f370: 6963 6174 6520 6974 656d 7320 696e 2074  icate items in t
-0000f380: 6865 2069 6e70 7574 2061 7272 6179 2e0d  he input array..
-0000f390: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
-0000f3a0: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
-0000f3b0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
-0000f3c0: 2020 206b 6565 7020 3a20 7b27 6669 7273     keep : {'firs
-0000f3d0: 7427 2c20 276c 6173 7427 2c20 2746 616c  t', 'last', 'Fal
-0000f3e0: 7365 277d 2c20 6465 6661 756c 7420 2766  se'}, default 'f
-0000f3f0: 6972 7374 270d 0a20 2020 2020 2020 2020  irst'..         
-0000f400: 2020 202d 2027 6669 7273 7427 203a 204d     - 'first' : M
-0000f410: 6172 6b20 6561 6368 2064 7570 6c69 6361  ark each duplica
-0000f420: 7465 2061 7320 6054 7275 6560 2065 7863  te as `True` exc
-0000f430: 6570 7420 666f 7220 7468 6520 6669 7273  ept for the firs
-0000f440: 7420 6f63 6375 7272 656e 6365 2e0d 0a20  t occurrence... 
-0000f450: 2020 2020 2020 2020 2020 202d 2027 6c61             - 'la
-0000f460: 7374 2720 3a20 4d61 726b 2065 6163 6820  st' : Mark each 
-0000f470: 6475 706c 6963 6174 6520 6173 2060 5472  duplicate as `Tr
-0000f480: 7565 6020 6578 6365 7074 2066 6f72 2074  ue` except for t
-0000f490: 6865 206c 6173 7420 6f63 6375 7272 656e  he last occurren
-0000f4a0: 6365 2e0d 0a20 2020 2020 2020 2020 2020  ce...           
-0000f4b0: 202d 2027 4661 6c73 6527 203a 204d 6172   - 'False' : Mar
-0000f4c0: 6b20 616c 6c20 6475 706c 6963 6174 6573  k all duplicates
-0000f4d0: 2061 7320 6054 7275 6560 2e0d 0a20 2020   as `True`...   
-0000f4e0: 2020 2020 2068 6967 685f 756e 6971 7565       high_unique
-0000f4f0: 203a 2062 6f6f 6c2c 2064 6566 6175 6c74   : bool, default
-0000f500: 2060 4661 6c73 6560 2028 6861 7368 696e   `False` (hashin
-0000f510: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
-0000f520: 436f 6e74 726f 6c73 2077 6865 7468 6572  Controls whether
-0000f530: 2074 6865 2066 756e 6374 696f 6e20 7573   the function us
-0000f540: 6573 2068 6173 6869 6e67 2d20 6f72 2073  es hashing- or s
-0000f550: 6f72 7469 6e67 2d62 6173 6564 206c 6f67  orting-based log
-0000f560: 6963 2074 6f20 6669 6e64 2075 6e69 7175  ic to find uniqu
-0000f570: 6520 7661 6c75 6573 2069 6e20 7468 6520  e values in the 
-0000f580: 696e 7075 7420 6172 7261 792e 0d0a 2020  input array...  
-0000f590: 2020 2020 2020 2020 2020 4966 2079 6f75            If you
-0000f5a0: 7220 6461 7461 2068 6173 2061 2068 6967  r data has a hig
-0000f5b0: 6820 7072 6f70 6f72 7469 6f6e 206f 6620  h proportion of 
-0000f5c0: 756e 6971 7565 2076 616c 7565 732c 2073  unique values, s
-0000f5d0: 6574 2074 6f20 6054 7275 6560 2066 6f72  et to `True` for
-0000f5e0: 2066 6173 7465 7220 7065 7266 6f72 6d61   faster performa
-0000f5f0: 6e63 652e 0d0a 0d0a 2020 2020 2020 2020  nce.....        
-0000f600: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
-0000f610: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-0000f620: 2020 4661 7374 4172 7261 790d 0a20 2020    FastArray..   
-0000f630: 2020 2020 2020 2020 2041 2062 6f6f 6c65           A boole
-0000f640: 616e 2060 4661 7374 4172 7261 7960 2069  an `FastArray` i
-0000f650: 6e64 6963 6174 696e 6720 6054 7275 6560  ndicating `True`
-0000f660: 2066 6f72 2064 7570 6c69 6361 7465 2069   for duplicate i
-0000f670: 7465 6d73 2069 6e20 7468 6520 696e 7075  tems in the inpu
-0000f680: 7420 6172 7261 792e 0d0a 0d0a 2020 2020  t array.....    
-0000f690: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
-0000f6a0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-0000f6b0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000f6c0: 792e 6e75 6e69 7175 6520 3a20 5265 7475  y.nunique : Retu
-0000f6d0: 726e 7320 7468 6520 6e75 6d62 6572 206f  rns the number o
-0000f6e0: 6620 756e 6971 7565 2076 616c 7565 7320  f unique values 
-0000f6f0: 696e 2061 6e20 6172 7261 792e 0d0a 2020  in an array...  
-0000f700: 2020 2020 2020 2e44 6174 6173 6574 2e64        .Dataset.d
-0000f710: 7570 6c69 6361 7465 6420 3a20 5265 7475  uplicated : Retu
-0000f720: 726e 7320 6120 626f 6f6c 6561 6e20 6046  rns a boolean `F
-0000f730: 6173 7441 7272 6179 6020 696e 6469 6361  astArray` indica
-0000f740: 7469 6e67 2060 5472 7565 6020 666f 7220  ting `True` for 
-0000f750: 6475 706c 6963 6174 6520 726f 7773 2e0d  duplicate rows..
-0000f760: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-0000f770: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-0000f780: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2045  -----..        E
-0000f790: 7863 6c75 6465 2074 6865 2066 6972 7374  xclude the first
-0000f7a0: 206f 6363 7572 7265 6e63 6520 6f66 2065   occurrence of e
-0000f7b0: 6163 6820 6475 706c 6963 6174 6520 2875  ach duplicate (u
-0000f7c0: 7365 2074 6865 2064 6566 6175 6c74 2060  se the default `
-0000f7d0: 6b65 6570 6020 7661 6c75 6529 3a0d 0a0d  keep` value):...
-0000f7e0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-0000f7f0: 2072 742e 4641 285b 312c 2032 2c20 332c   rt.FA([1, 2, 3,
-0000f800: 2034 2c20 322c 2037 2c20 382c 2038 2c20   4, 2, 7, 8, 8, 
-0000f810: 335d 290d 0a20 2020 2020 2020 203e 3e3e  3])..        >>>
-0000f820: 2061 0d0a 2020 2020 2020 2020 4661 7374   a..        Fast
-0000f830: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
-0000f840: 342c 2032 2c20 372c 2038 2c20 382c 2033  4, 2, 7, 8, 8, 3
-0000f850: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-0000f860: 612e 6475 706c 6963 6174 6564 2829 0d0a  a.duplicated()..
-0000f870: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000f880: 7928 5b46 616c 7365 2c20 4661 6c73 652c  y([False, False,
-0000f890: 2046 616c 7365 2c20 4661 6c73 652c 2020   False, False,  
-0000f8a0: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
-0000f8b0: 7365 2c20 2054 7275 652c 2020 5472 7565  se,  True,  True
-0000f8c0: 5d29 0d0a 0d0a 2020 2020 2020 2020 4d61  ])....        Ma
-0000f8d0: 726b 2061 6c6c 2064 7570 6c69 6361 7465  rk all duplicate
-0000f8e0: 733a 0d0a 0d0a 2020 2020 2020 2020 3e3e  s:....        >>
-0000f8f0: 3e20 612e 6475 706c 6963 6174 6564 286b  > a.duplicated(k
-0000f900: 6565 703d 4661 6c73 6529 0d0a 2020 2020  eep=False)..    
-0000f910: 2020 2020 4661 7374 4172 7261 7928 5b46      FastArray([F
-0000f920: 616c 7365 2c20 2054 7275 652c 2020 5472  alse,  True,  Tr
-0000f930: 7565 2c20 4661 6c73 652c 2020 5472 7565  ue, False,  True
-0000f940: 2c20 4661 6c73 652c 2020 5472 7565 2c20  , False,  True, 
-0000f950: 2054 7275 652c 2020 5472 7565 5d29 0d0a   True,  True])..
-0000f960: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0000f970: 2020 2020 2061 7272 203d 2073 656c 660d       arr = self.
-0000f980: 0a0d 0a20 2020 2020 2020 2069 6620 6b65  ...        if ke
-0000f990: 6570 203d 3d20 226c 6173 7422 3a0d 0a20  ep == "last":.. 
-0000f9a0: 2020 2020 2020 2020 2020 2061 7272 203d             arr =
-0000f9b0: 2061 7272 5b3a 3a2d 315d 2e63 6f70 7928   arr[::-1].copy(
-0000f9c0: 290d 0a0d 0a20 2020 2020 2020 2065 6c69  )....        eli
-0000f9d0: 6620 6b65 6570 2069 7320 6e6f 7420 4661  f keep is not Fa
-0000f9e0: 6c73 6520 616e 6420 6b65 6570 2021 3d20  lse and keep != 
-0000f9f0: 2266 6972 7374 223a 0d0a 2020 2020 2020  "first":..      
-0000fa00: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-0000fa10: 6545 7272 6f72 2866 276b 6565 7020 6d75  eError(f'keep mu
-0000fa20: 7374 2062 6520 6569 7468 6572 2022 6669  st be either "fi
-0000fa30: 7273 7422 2c20 226c 6173 7422 206f 7220  rst", "last" or 
-0000fa40: 4661 6c73 6527 290d 0a0d 0a20 2020 2020  False')....     
-0000fa50: 2020 2023 2063 7265 6174 6520 616e 2072     # create an r
-0000fa60: 6574 7572 6e20 6172 7261 7920 616c 6c20  eturn array all 
-0000fa70: 7365 7420 746f 2054 7275 650d 0a20 2020  set to True..   
-0000fa80: 2020 2020 2072 6573 756c 7420 3d20 6f6e       result = on
-0000fa90: 6573 286c 656e 2861 7272 292c 2064 7479  es(len(arr), dty
-0000faa0: 7065 3d6e 702e 626f 6f6c 5f29 0d0a 0d0a  pe=np.bool_)....
-0000fab0: 2020 2020 2020 2020 6720 3d20 4772 6f75          g = Grou
-0000fac0: 7069 6e67 2861 7272 2e5f 6661 2069 6620  ping(arr._fa if 
-0000fad0: 6861 7361 7474 7228 6172 722c 2022 5f66  hasattr(arr, "_f
-0000fae0: 6122 2920 656c 7365 2061 7272 2c20 6c65  a") else arr, le
-0000faf0: 783d 6869 6768 5f75 6e69 7175 6529 0d0a  x=high_unique)..
-0000fb00: 0d0a 2020 2020 2020 2020 6966 206b 6565  ..        if kee
-0000fb10: 7020 6973 2046 616c 7365 3a0d 0a20 2020  p is False:..   
-0000fb20: 2020 2020 2020 2020 2023 2073 6561 7263           # searc
-0000fb30: 6820 666f 7220 6772 6f75 7073 2077 6974  h for groups wit
-0000fb40: 6820 6120 636f 756e 7420 6f66 2031 0d0a  h a count of 1..
-0000fb50: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0000fb60: 6c74 5b67 2e69 6669 7273 746b 6579 5b67  lt[g.ifirstkey[g
-0000fb70: 2e6e 636f 756e 7467 726f 7570 5b31 3a5d  .ncountgroup[1:]
-0000fb80: 203d 3d20 315d 5d20 3d20 4661 6c73 650d   == 1]] = False.
-0000fb90: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-0000fba0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0000fbb0: 6c74 5b67 2e69 6669 7273 746b 6579 5d20  lt[g.ifirstkey] 
-0000fbc0: 3d20 4661 6c73 650d 0a0d 0a20 2020 2020  = False....     
-0000fbd0: 2020 2020 2020 2069 6620 6b65 6570 203d         if keep =
-0000fbe0: 3d20 226c 6173 7422 3a0d 0a20 2020 2020  = "last":..     
-0000fbf0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-0000fc00: 7420 3d20 7265 7375 6c74 5b3a 3a2d 315d  t = result[::-1]
-0000fc10: 2e63 6f70 7928 290d 0a20 2020 2020 2020  .copy()..       
-0000fc20: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
-0000fc30: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-0000fc40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000fc50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000fc60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000fc70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000fc80: 2d2d 0d0a 2020 2020 6465 6620 7361 7665  --..    def save
-0000fc90: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
-0000fca0: 0d0a 2020 2020 2020 2020 6669 6c65 7061  ..        filepa
-0000fcb0: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
-0000fcc0: 732e 5061 7468 4c69 6b65 5d2c 0d0a 2020  s.PathLike],..  
-0000fcd0: 2020 2020 2020 7368 6172 653a 204f 7074        share: Opt
-0000fce0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-0000fcf0: 652c 0d0a 2020 2020 2020 2020 636f 6d70  e,..        comp
-0000fd00: 7265 7373 3a20 626f 6f6c 203d 2054 7275  ress: bool = Tru
-0000fd10: 652c 0d0a 2020 2020 2020 2020 6f76 6572  e,..        over
-0000fd20: 7772 6974 653a 2062 6f6f 6c20 3d20 5472  write: bool = Tr
-0000fd30: 7565 2c0d 0a20 2020 2020 2020 206e 616d  ue,..        nam
-0000fd40: 653a 204f 7074 696f 6e61 6c5b 7374 725d  e: Optional[str]
-0000fd50: 203d 204e 6f6e 652c 0d0a 2020 2020 2920   = None,..    ) 
-0000fd60: 2d3e 204e 6f6e 653a 0d0a 2020 2020 2020  -> None:..      
-0000fd70: 2020 2222 220d 0a20 2020 2020 2020 2053    """..        S
-0000fd80: 6176 6520 6120 7369 6e67 6c65 2061 7272  ave a single arr
-0000fd90: 6179 2069 6e20 616e 202e 7364 7320 6669  ay in an .sds fi
-0000fda0: 6c65 2e0d 0a0d 0a20 2020 2020 2020 2050  le.....        P
-0000fdb0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-0000fdc0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-0000fdd0: 2020 2020 2020 2066 696c 6570 6174 683a         filepath:
-0000fde0: 2073 7472 206f 7220 6f73 2e50 6174 684c   str or os.PathL
-0000fdf0: 696b 650d 0a20 2020 2020 2020 2073 6861  ike..        sha
-0000fe00: 7265 203a 2073 7472 2c20 6f70 7469 6f6e  re : str, option
-0000fe10: 616c 2c20 6465 6661 756c 7420 4e6f 6e65  al, default None
-0000fe20: 0d0a 2020 2020 2020 2020 636f 6d70 7265  ..        compre
-0000fe30: 7373 203a 2062 6f6f 6c2c 2064 6566 6175  ss : bool, defau
-0000fe40: 6c74 2054 7275 650d 0a20 2020 2020 2020  lt True..       
-0000fe50: 206f 7665 7277 7269 7465 203a 2062 6f6f   overwrite : boo
-0000fe60: 6c2c 2064 6566 6175 6c74 2054 7275 650d  l, default True.
-0000fe70: 0a20 2020 2020 2020 206e 616d 6520 3a20  .        name : 
-0000fe80: 7374 722c 206f 7074 696f 6e61 6c2c 2064  str, optional, d
-0000fe90: 6566 6175 6c74 204e 6f6e 650d 0a0d 0a20  efault None.... 
-0000fea0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
-0000feb0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0000fec0: 2d0d 0a20 2020 2020 2020 2072 745f 7364  -..        rt_sd
-0000fed0: 732e 7361 7665 5f73 6473 0d0a 2020 2020  s.save_sds..    
-0000fee0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0000fef0: 2073 6176 655f 7364 7328 6669 6c65 7061   save_sds(filepa
-0000ff00: 7468 2c20 7365 6c66 2c20 7368 6172 653d  th, self, share=
-0000ff10: 7368 6172 652c 2063 6f6d 7072 6573 733d  share, compress=
-0000ff20: 636f 6d70 7265 7373 2c20 6f76 6572 7772  compress, overwr
-0000ff30: 6974 653d 6f76 6572 7772 6974 652c 206e  ite=overwrite, n
-0000ff40: 616d 653d 6e61 6d65 290d 0a0d 0a20 2020  ame=name)....   
-0000ff50: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-0000ff60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ff70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ff80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ff90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-0000ffa0: 2020 2064 6566 2066 696c 7465 7228 7365     def filter(se
-0000ffb0: 6c66 2c20 6669 6c74 6572 3a20 6e70 742e  lf, filter: npt.
-0000ffc0: 4172 7261 794c 696b 6529 202d 3e20 2246  ArrayLike) -> "F
-0000ffd0: 6173 7441 7272 6179 223a 0d0a 2020 2020  astArray":..    
-0000ffe0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0000fff0: 2052 6574 7572 6e20 6120 636f 7079 206f   Return a copy o
-00010000: 6620 7468 6520 6046 6173 7441 7272 6179  f the `FastArray
-00010010: 6020 636f 6e74 6169 6e69 6e67 206f 6e6c  ` containing onl
-00010020: 7920 7468 6520 656c 656d 656e 7473 2074  y the elements t
-00010030: 6861 7420 6d65 6574 2074 6865 2073 7065  hat meet the spe
-00010040: 6369 6669 6564 0d0a 2020 2020 2020 2020  cified..        
-00010050: 636f 6e64 6974 696f 6e2e 0d0a 0d0a 2020  condition.....  
-00010060: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-00010070: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00010080: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6669  ----..        fi
-00010090: 6c74 6572 203a 2061 7272 6179 3a20 6661  lter : array: fa
-000100a0: 6e63 7920 696e 6465 7820 6f72 2042 6f6f  ncy index or Boo
-000100b0: 6c65 616e 206d 6173 6b0d 0a20 2020 2020  lean mask..     
-000100c0: 2020 2020 2020 2041 2066 616e 6379 2069         A fancy i
-000100d0: 6e64 6578 2073 7065 6369 6669 6573 2062  ndex specifies b
-000100e0: 6f74 6820 7468 6520 6465 7369 7265 6420  oth the desired 
-000100f0: 656c 656d 656e 7473 2061 6e64 2074 6865  elements and the
-00010100: 6972 206f 7264 6572 2069 6e20 7468 650d  ir order in the.
-00010110: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00010120: 7572 6e65 6420 6046 6173 7441 7272 6179  urned `FastArray
-00010130: 602e 2057 6865 6e20 6120 426f 6f6c 6561  `. When a Boolea
-00010140: 6e20 6d61 736b 2069 7320 7061 7373 6564  n mask is passed
-00010150: 2c20 6f6e 6c79 2072 6f77 7320 7468 6174  , only rows that
-00010160: 206d 6565 7420 7468 650d 0a20 2020 2020   meet the..     
-00010170: 2020 2020 2020 2073 7065 6369 6669 6564         specified
-00010180: 2063 6f6e 6469 7469 6f6e 2061 7265 2069   condition are i
-00010190: 6e20 7468 6520 7265 7475 726e 6564 2060  n the returned `
-000101a0: 4661 7374 4172 7261 7960 2e0d 0a0d 0a20  FastArray`..... 
-000101b0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-000101c0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-000101d0: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
-000101e0: 7261 7960 0d0a 0d0a 2020 2020 2020 2020  ray`....        
-000101f0: 4e6f 7465 730d 0a20 2020 2020 2020 202d  Notes..        -
-00010200: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4966  ----..        If
-00010210: 2079 6f75 2077 616e 7420 746f 2070 6572   you want to per
-00010220: 666f 726d 2061 6e20 6f70 6572 6174 696f  form an operatio
-00010230: 6e20 6f6e 2061 2066 696c 7465 7265 6420  n on a filtered 
-00010240: 4661 7374 4172 7261 792c 2069 7427 7320  FastArray, it's 
-00010250: 6d6f 7265 2065 6666 6963 6965 6e74 2074  more efficient t
-00010260: 6f0d 0a20 2020 2020 2020 2070 6572 666f  o..        perfo
-00010270: 726d 2074 6865 206f 7065 7261 7469 6f6e  rm the operation
-00010280: 2075 7369 6e67 2074 6865 2060 6066 696c   using the ``fil
-00010290: 7465 7260 6020 6b65 7977 6f72 6420 6172  ter`` keyword ar
-000102a0: 6775 6d65 6e74 2e20 466f 7220 6578 616d  gument. For exam
-000102b0: 706c 652c 0d0a 2020 2020 2020 2020 6060  ple,..        ``
-000102c0: 6d79 5f66 612e 7375 6d28 6669 6c74 6572  my_fa.sum(filter
-000102d0: 203d 2062 6f6f 6c65 616e 5f6d 6173 6b29   = boolean_mask)
-000102e0: 6060 2e0d 0a0d 0a20 2020 2020 2020 2045  ``.....        E
-000102f0: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-00010300: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-00010310: 2020 2043 7265 6174 6520 6120 6046 6173     Create a `Fas
-00010320: 7441 7272 6179 603a 0d0a 0d0a 2020 2020  tArray`:....    
-00010330: 2020 2020 3e3e 3e20 6661 203d 2072 742e      >>> fa = rt.
-00010340: 4661 7374 4172 7261 7928 6e70 2e6c 696e  FastArray(np.lin
-00010350: 7370 6163 6528 302c 2031 2c20 3131 2929  space(0, 1, 11))
-00010360: 0d0a 2020 2020 2020 2020 3e3e 3e20 6661  ..        >>> fa
-00010370: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00010380: 7261 7928 5b30 2e20 2c20 302e 312c 2030  ray([0. , 0.1, 0
-00010390: 2e32 2c20 302e 332c 2030 2e34 2c20 302e  .2, 0.3, 0.4, 0.
-000103a0: 352c 2030 2e36 2c20 302e 372c 2030 2e38  5, 0.6, 0.7, 0.8
-000103b0: 2c20 302e 392c 2031 2e20 5d29 0d0a 0d0a  , 0.9, 1. ])....
-000103c0: 2020 2020 2020 2020 4669 6c74 6572 2075          Filter u
-000103d0: 7369 6e67 2061 2066 616e 6379 2069 6e64  sing a fancy ind
-000103e0: 6578 3a0d 0a0d 0a20 2020 2020 2020 203e  ex:....        >
-000103f0: 3e3e 2066 612e 6669 6c74 6572 285b 352c  >> fa.filter([5,
-00010400: 2030 2c20 315d 290d 0a20 2020 2020 2020   0, 1])..       
-00010410: 2046 6173 7441 7272 6179 285b 302e 352c   FastArray([0.5,
-00010420: 2030 2e20 2c20 302e 315d 290d 0a0d 0a20   0. , 0.1]).... 
-00010430: 2020 2020 2020 2046 696c 7465 7220 7573         Filter us
-00010440: 696e 6720 6120 636f 6e64 6974 696f 6e20  ing a condition 
-00010450: 7468 6174 2063 7265 6174 6573 2061 2042  that creates a B
-00010460: 6f6f 6c65 616e 206d 6173 6b20 6172 7261  oolean mask arra
-00010470: 793a 0d0a 0d0a 2020 2020 2020 2020 3e3e  y:....        >>
-00010480: 3e20 6661 2e66 696c 7465 7228 6661 203e  > fa.filter(fa >
-00010490: 2030 2e37 3529 0d0a 2020 2020 2020 2020   0.75)..        
-000104a0: 4661 7374 4172 7261 7928 5b30 2e38 2c20  FastArray([0.8, 
-000104b0: 302e 392c 2031 2e20 5d29 0d0a 0d0a 2020  0.9, 1. ])....  
-000104c0: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
-000104d0: 2020 2020 2023 206e 6f72 6d61 6c69 7a65       # normalize
-000104e0: 2072 6f77 6669 6c74 6572 0d0a 2020 2020   rowfilter..    
-000104f0: 2020 2020 6966 206e 702e 6973 7363 616c      if np.isscal
-00010500: 6172 2866 696c 7465 7229 3a0d 0a20 2020  ar(filter):..   
-00010510: 2020 2020 2020 2020 2066 696c 7465 7220           filter 
-00010520: 3d20 6e70 2e61 7361 6e79 6172 7261 7928  = np.asanyarray(
-00010530: 5b66 696c 7465 725d 290d 0a20 2020 2020  [filter])..     
-00010540: 2020 2065 6c69 6620 6e6f 7420 6973 696e     elif not isin
-00010550: 7374 616e 6365 2866 696c 7465 722c 206e  stance(filter, n
-00010560: 702e 6e64 6172 7261 7929 3a0d 0a20 2020  p.ndarray):..   
-00010570: 2020 2020 2020 2020 2066 696c 7465 7220           filter 
-00010580: 3d20 6e70 2e61 7361 6e79 6172 7261 7928  = np.asanyarray(
-00010590: 6669 6c74 6572 290d 0a0d 0a20 2020 2020  filter)....     
-000105a0: 2020 2023 2045 6e73 7572 6520 6669 6c74     # Ensure filt
-000105b0: 6572 2069 7320 626f 6f6c 6561 6e20 6f72  er is boolean or
-000105c0: 2069 6e74 6567 6572 730d 0a20 2020 2020   integers..     
-000105d0: 2020 2069 6620 6e6f 7420 286e 702e 6973     if not (np.is
-000105e0: 7375 6264 7479 7065 2866 696c 7465 722e  subdtype(filter.
-000105f0: 6474 7970 652c 206e 702e 696e 7465 6765  dtype, np.intege
-00010600: 7229 206f 7220 6e70 2e69 7373 7562 6474  r) or np.issubdt
-00010610: 7970 6528 6669 6c74 6572 2e64 7479 7065  ype(filter.dtype
-00010620: 2c20 626f 6f6c 2929 3a0d 0a20 2020 2020  , bool)):..     
-00010630: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
-00010640: 6545 7272 6f72 2866 2254 6865 2066 696c  eError(f"The fil
-00010650: 7465 7220 6d75 7374 2062 6520 6120 626f  ter must be a bo
-00010660: 6f6c 6561 6e20 6d61 736b 206f 7220 696e  olean mask or in
-00010670: 7465 6765 7220 6661 6e63 7920 696e 6465  teger fancy inde
-00010680: 782e 2229 0d0a 0d0a 2020 2020 2020 2020  x.")....        
-00010690: 2320 456e 7375 7265 2060 6669 6c74 6572  # Ensure `filter
-000106a0: 6020 6973 2074 6865 2072 6967 6874 2073  ` is the right s
-000106b0: 6861 7065 2e0d 0a20 2020 2020 2020 2023  hape...        #
-000106c0: 2055 6e6c 696b 6520 6044 6174 6173 6574   Unlike `Dataset
-000106d0: 2e66 696c 7465 7260 2077 6520 646f 6e27  .filter` we don'
-000106e0: 7420 636f 6e76 6572 7420 626f 6f6c 2074  t convert bool t
-000106f0: 6f20 6661 6e63 792c 2020 6265 6361 7573  o fancy,  becaus
-00010700: 6520 7765 2772 6520 6e6f 7420 7265 7573  e we're not reus
-00010710: 696e 6720 7468 6520 6661 6e63 7920 696e  ing the fancy in
-00010720: 6469 6365 732e 0d0a 2020 2020 2020 2020  dices...        
-00010730: 6966 2066 696c 7465 722e 6e64 696d 2021  if filter.ndim !
-00010740: 3d20 313a 0d0a 2020 2020 2020 2020 2020  = 1:..          
-00010750: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00010760: 6f72 2822 6046 6173 7441 7272 6179 2e66  or("`FastArray.f
-00010770: 696c 7465 7260 206f 6e6c 7920 6163 6365  ilter` only acce
-00010780: 7074 7320 3144 2061 7272 6179 7320 666f  pts 1D arrays fo
-00010790: 7220 7468 6520 656c 656d 656e 7420 7365  r the element se
-000107a0: 6c65 6374 6f72 2f6d 6173 6b2e 2229 0d0a  lector/mask.")..
-000107b0: 2020 2020 2020 2020 2320 426f 6f6c 6561          # Boolea
-000107c0: 6e20 6172 7261 7920 6e65 6564 7320 746f  n array needs to
-000107d0: 2062 6520 7468 6520 7269 6768 7420 6c65   be the right le
-000107e0: 6e67 7468 2061 7320 7765 6c6c 2e0d 0a20  ngth as well... 
-000107f0: 2020 2020 2020 2069 6620 6e70 2e69 7373         if np.iss
-00010800: 7562 6474 7970 6528 6669 6c74 6572 2e64  ubdtype(filter.d
-00010810: 7479 7065 2c20 626f 6f6c 2920 616e 6420  type, bool) and 
-00010820: 286c 656e 2866 696c 7465 7229 2021 3d20  (len(filter) != 
-00010830: 7365 6c66 2e73 6861 7065 5b30 5d29 3a0d  self.shape[0]):.
-00010840: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00010850: 7365 2056 616c 7565 4572 726f 7228 0d0a  se ValueError(..
-00010860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010870: 6622 5468 6520 6c65 6e67 7468 206f 6620  f"The length of 
-00010880: 7468 6520 7072 6f76 6964 6564 2073 656c  the provided sel
-00010890: 6563 7469 6f6e 206d 6173 6b20 287b 6c65  ection mask ({le
-000108a0: 6e28 6669 6c74 6572 297d 2920 646f 6573  n(filter)}) does
-000108b0: 206e 6f74 206d 6174 6368 2074 6865 206c   not match the l
-000108c0: 656e 6774 6820 6f66 2074 6865 2046 6173  ength of the Fas
-000108d0: 7441 7272 6179 287b 7365 6c66 2e73 6861  tArray({self.sha
-000108e0: 7065 5b30 5d7d 292e 220d 0a20 2020 2020  pe[0]})."..     
-000108f0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-00010900: 2020 2020 2320 5065 7266 6f72 6d20 6669      # Perform fi
-00010910: 6c74 6572 2061 6e64 2072 6574 7572 6e0d  lter and return.
-00010920: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00010930: 7365 6c66 5b66 696c 7465 725d 0d0a 0d0a  self[filter]....
-00010940: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-00010950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010990: 0d0a 2020 2020 6465 6620 7265 7368 6170  ..    def reshap
-000109a0: 6528 7365 6c66 2c20 2a61 7267 732c 202a  e(self, *args, *
-000109b0: 2a6b 7761 7267 7329 202d 3e20 4661 7374  *kwargs) -> Fast
-000109c0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-000109d0: 7265 7375 6c74 203d 2073 7570 6572 2846  result = super(F
-000109e0: 6173 7441 7272 6179 2c20 7365 6c66 292e  astArray, self).
-000109f0: 7265 7368 6170 6528 2a61 7267 732c 202a  reshape(*args, *
-00010a00: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
-00010a10: 2020 2320 7468 6973 2077 6172 6e69 6e67    # this warning
-00010a20: 2068 6170 7065 6e73 2074 6f6f 206d 7563   happens too muc
-00010a30: 6820 6e6f 770d 0a20 2020 2020 2020 2023  h now..        #
-00010a40: 2069 6620 4661 7374 4172 7261 792e 5f63   if FastArray._c
-00010a50: 6865 636b 5f6e 6469 6d28 7265 7375 6c74  heck_ndim(result
-00010a60: 2920 213d 2031 3a0d 0a20 2020 2020 2020  ) != 1:..       
-00010a70: 2023 2020 2020 7761 726e 696e 6773 2e77   #    warnings.w
-00010a80: 6172 6e28 4661 7374 4172 7261 792e 5761  arn(FastArray.Wa
-00010a90: 726e 696e 6744 6963 745b 226d 756c 7469  rningDict["multi
-00010aa0: 706c 655f 6469 6d65 6e73 696f 6e73 225d  ple_dimensions"]
-00010ab0: 2e66 6f72 6d61 7428 7265 7375 6c74 2e73  .format(result.s
-00010ac0: 6861 7065 2929 0d0a 0d0a 2020 2020 2020  hape))....      
-00010ad0: 2020 6966 206e 6f74 2028 7265 7375 6c74    if not (result
-00010ae0: 2e66 6c61 6773 2e63 5f63 6f6e 7469 6775  .flags.c_contigu
-00010af0: 6f75 7320 6f72 2072 6573 756c 742e 666c  ous or result.fl
-00010b00: 6167 732e 665f 636f 6e74 6967 756f 7573  ags.f_contiguous
-00010b10: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00010b20: 2320 6669 7820 7374 7269 6465 7320 7072  # fix strides pr
-00010b30: 6f62 6c65 6d0d 0a20 2020 2020 2020 2020  oblem..         
-00010b40: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-00010b50: 2e63 6f70 7928 290d 0a20 2020 2020 2020  .copy()..       
-00010b60: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
-00010b70: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-00010b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010bb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010bc0: 2d2d 0d0a 2020 2020 6465 6620 7265 7065  --..    def repe
-00010bd0: 6174 2873 656c 662c 2072 6570 6561 7473  at(self, repeats
-00010be0: 2c20 6178 6973 3d4e 6f6e 6529 202d 3e20  , axis=None) -> 
-00010bf0: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
-00010c00: 2020 2020 2222 2253 6565 2060 7269 7074      """See `ript
-00010c10: 6162 6c65 2e72 6570 6561 7460 2e22 2222  able.repeat`."""
-00010c20: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00010c30: 2072 6570 6561 7428 7365 6c66 2c20 7265   repeat(self, re
-00010c40: 7065 6174 732c 2061 7869 733d 6178 6973  peats, axis=axis
-00010c50: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
-00010c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010c80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010c90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010ca0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2074  -----..    def t
-00010cb0: 696c 6528 7365 6c66 2c20 7265 7073 2920  ile(self, reps) 
-00010cc0: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
-00010cd0: 2020 2020 2020 2022 2222 5365 6520 6072         """See `r
-00010ce0: 6970 7461 626c 652e 7469 6c65 602e 2222  iptable.tile`.""
-00010cf0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-00010d00: 6e20 7469 6c65 2873 656c 662c 2072 6570  n tile(self, rep
-00010d10: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
-00010d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010d60: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-00010d70: 5f6b 7761 7267 5f63 6865 636b 2873 656c  _kwarg_check(sel
-00010d80: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
-00010d90: 6773 293a 0d0a 2020 2020 2020 2020 2320  gs):..        # 
-00010da0: 7765 2068 616e 646c 6520 6474 7970 650d  we handle dtype.
-00010db0: 0a20 2020 2020 2020 2069 6620 2822 6464  .        if ("dd
-00010dc0: 6f66 2220 696e 206b 7761 7267 7320 616e  of" in kwargs an
-00010dd0: 6420 6b77 6172 6773 5b22 6464 6f66 225d  d kwargs["ddof"]
-00010de0: 2021 3d20 3129 206f 7220 2261 7869 7322   != 1) or "axis"
-00010df0: 2069 6e20 6b77 6172 6773 206f 7220 226b   in kwargs or "k
-00010e00: 6565 7064 696d 7322 2069 6e20 6b77 6172  eepdims" in kwar
-00010e10: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-00010e20: 2072 6574 7572 6e20 5472 7565 0d0a 0d0a   return True....
-00010e30: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+0000c650: 2020 2020 2052 6574 7572 6e20 6120 6046       Return a `F
+0000c660: 6173 7441 7272 6179 6020 6f66 2061 6c6c  astArray` of all
+0000c670: 2069 6e76 616c 6964 732c 206f 6620 7468   invalids, of th
+0000c680: 6520 7361 6d65 2073 6861 7065 2061 6e64  e same shape and
+0000c690: 2064 7479 7065 2061 7320 7468 6520 696e   dtype as the in
+0000c6a0: 7075 7420 6172 7261 792e 0d0a 0d0a 2020  put array.....  
+0000c6b0: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+0000c6c0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+0000c6d0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000c6e0: 790d 0a20 2020 2020 2020 2020 2020 2041  y..            A
+0000c6f0: 2060 4661 7374 4172 7261 7960 206f 6620   `FastArray` of 
+0000c700: 616c 6c20 696e 7661 6c69 6473 2c20 6f66  all invalids, of
+0000c710: 2074 6865 2073 616d 6520 7368 6170 6520   the same shape 
+0000c720: 616e 6420 6474 7970 6520 6173 2074 6865  and dtype as the
+0000c730: 2069 6e70 7574 2061 7272 6179 2e0d 0a0d   input array....
+0000c740: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
+0000c750: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
+0000c760: 2d2d 2d0d 0a20 2020 2020 2020 2046 6173  ---..        Fas
+0000c770: 7441 7272 6179 2e69 6e76 203a 2052 6574  tArray.inv : Ret
+0000c780: 7572 6e20 7468 6520 696e 7661 6c69 6420  urn the invalid 
+0000c790: 7661 6c75 6520 666f 7220 7468 6520 696e  value for the in
+0000c7a0: 7075 7420 6172 7261 7927 7320 6474 7970  put array's dtyp
+0000c7b0: 652e 0d0a 2020 2020 2020 2020 4661 7374  e...        Fast
+0000c7c0: 4172 7261 792e 6669 6c6c 5f69 6e76 616c  Array.fill_inval
+0000c7d0: 6964 203a 2052 6570 6c61 6365 2074 6865  id : Replace the
+0000c7e0: 2063 6f6e 7465 6e74 7320 6f66 2061 2060   contents of a `
+0000c7f0: 4661 7374 4172 7261 7960 2077 6974 6820  FastArray` with 
+0000c800: 696e 7661 6c69 6473 2e0d 0a0d 0a20 2020  invalids.....   
+0000c810: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+0000c820: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+0000c830: 0a20 2020 2020 2020 2043 6f70 7920 616e  .        Copy an
+0000c840: 2069 6e74 6567 6572 2061 7272 6179 2061   integer array a
+0000c850: 6e64 2072 6570 6c61 6365 2077 6974 6820  nd replace with 
+0000c860: 696e 7661 6c69 6473 3a0d 0a0d 0a20 2020  invalids:....   
+0000c870: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
+0000c880: 4641 285b 312c 2032 2c20 332c 2034 2c20  FA([1, 2, 3, 4, 
+0000c890: 355d 290d 0a20 2020 2020 2020 203e 3e3e  5])..        >>>
+0000c8a0: 2061 0d0a 2020 2020 2020 2020 4661 7374   a..        Fast
+0000c8b0: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+0000c8c0: 342c 2035 5d29 0d0a 2020 2020 2020 2020  4, 5])..        
+0000c8d0: 3e3e 3e20 6132 203d 2061 2e63 6f70 795f  >>> a2 = a.copy_
+0000c8e0: 696e 7661 6c69 6428 290d 0a20 2020 2020  invalid()..     
+0000c8f0: 2020 203e 3e3e 2061 320d 0a20 2020 2020     >>> a2..     
+0000c900: 2020 2046 6173 7441 7272 6179 285b 2d32     FastArray([-2
+0000c910: 3134 3734 3833 3634 382c 202d 3231 3437  147483648, -2147
+0000c920: 3438 3336 3438 2c20 2d32 3134 3734 3833  483648, -2147483
+0000c930: 3634 382c 202d 3231 3437 3438 3336 3438  648, -2147483648
+0000c940: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000c950: 2020 2020 2020 2d32 3134 3734 3833 3634        -214748364
+0000c960: 385d 290d 0a20 2020 2020 2020 203e 3e3e  8])..        >>>
+0000c970: 2061 0d0a 2020 2020 2020 2020 4661 7374   a..        Fast
+0000c980: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+0000c990: 342c 2035 5d29 2020 2320 6120 6973 2075  4, 5])  # a is u
+0000c9a0: 6e63 6861 6e67 6564 2e0d 0a0d 0a20 2020  nchanged.....   
+0000c9b0: 2020 2020 2043 6f70 7920 6120 666c 6f61       Copy a floa
+0000c9c0: 7469 6e67 2070 6f69 6e74 2061 7272 6179  ting point array
+0000c9d0: 2061 6e64 2072 6570 6c61 6365 2077 6974   and replace wit
+0000c9e0: 6820 696e 7661 6c69 6473 3a0d 0a0d 0a20  h invalids:.... 
+0000c9f0: 2020 2020 2020 203e 3e3e 2061 3320 3d20         >>> a3 = 
+0000ca00: 7274 2e46 4128 5b30 2e2c 2031 2e2c 2032  rt.FA([0., 1., 2
+0000ca10: 2e2c 2033 2e2c 2034 2e5d 290d 0a20 2020  ., 3., 4.])..   
+0000ca20: 2020 2020 203e 3e3e 2061 330d 0a20 2020       >>> a3..   
+0000ca30: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+0000ca40: 302e 2c20 312e 2c20 322e 2c20 332e 2c20  0., 1., 2., 3., 
+0000ca50: 342e 5d29 0d0a 2020 2020 2020 2020 3e3e  4.])..        >>
+0000ca60: 3e20 6133 2e63 6f70 795f 696e 7661 6c69  > a3.copy_invali
+0000ca70: 6428 290d 0a20 2020 2020 2020 2046 6173  d()..        Fas
+0000ca80: 7441 7272 6179 285b 6e61 6e2c 206e 616e  tArray([nan, nan
+0000ca90: 2c20 6e61 6e2c 206e 616e 2c20 6e61 6e5d  , nan, nan, nan]
+0000caa0: 290d 0a0d 0a20 2020 2020 2020 2043 6f70  )....        Cop
+0000cab0: 7920 6120 7374 7269 6e67 2061 7272 6179  y a string array
+0000cac0: 2061 6e64 2072 6570 6c61 6365 2077 6974   and replace wit
+0000cad0: 6820 696e 7661 6c69 6473 3a0d 0a0d 0a20  h invalids:.... 
+0000cae0: 2020 2020 2020 203e 3e3e 2061 3420 3d20         >>> a4 = 
+0000caf0: 7274 2e46 4128 5b27 414d 5a4e 272c 2027  rt.FA(['AMZN', '
+0000cb00: 4942 4d27 2c20 274d 5346 5427 2c20 2741  IBM', 'MSFT', 'A
+0000cb10: 4150 4c27 5d29 0d0a 2020 2020 2020 2020  APL'])..        
+0000cb20: 3e3e 3e20 6134 0d0a 2020 2020 2020 2020  >>> a4..        
+0000cb30: 4661 7374 4172 7261 7928 5b62 2741 4d5a  FastArray([b'AMZ
+0000cb40: 4e27 2c20 6227 4942 4d27 2c20 6227 4d53  N', b'IBM', b'MS
+0000cb50: 4654 272c 2062 2741 4150 4c27 5d2c 2064  FT', b'AAPL'], d
+0000cb60: 7479 7065 3d27 7c53 3427 290d 0a20 2020  type='|S4')..   
+0000cb70: 2020 2020 203e 3e3e 2061 342e 636f 7079       >>> a4.copy
+0000cb80: 5f69 6e76 616c 6964 2829 0d0a 2020 2020  _invalid()..    
+0000cb90: 2020 2020 4661 7374 4172 7261 7928 5b62      FastArray([b
+0000cba0: 2727 2c20 6227 272c 2062 2727 2c20 6227  '', b'', b'', b'
+0000cbb0: 275d 2c20 6474 7970 653d 277c 5334 2729  '], dtype='|S4')
+0000cbc0: 2020 2320 496e 7661 6c69 6420 7374 7269    # Invalid stri
+0000cbd0: 6e67 2076 616c 7565 2069 7320 616e 2065  ng value is an e
+0000cbe0: 6d70 7479 2073 7472 696e 672e 0d0a 2020  mpty string...  
+0000cbf0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000cc00: 2020 2072 6574 7572 6e20 7365 6c66 2e66     return self.f
+0000cc10: 696c 6c5f 696e 7661 6c69 6428 696e 706c  ill_invalid(inpl
+0000cc20: 6163 653d 4661 6c73 6529 0d0a 0d0a 2020  ace=False)....  
+0000cc30: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+0000cc40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cc50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cc60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cc70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+0000cc80: 2020 2020 4070 726f 7065 7274 790d 0a20      @property.. 
+0000cc90: 2020 2064 6566 2069 6e76 2873 656c 6629     def inv(self)
+0000cca0: 202d 3e20 416e 793a 0d0a 2020 2020 2020   -> Any:..      
+0000ccb0: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
+0000ccc0: 6574 7572 6e20 7468 6520 696e 7661 6c69  eturn the invali
+0000ccd0: 6420 7661 6c75 6520 666f 7220 7468 6520  d value for the 
+0000cce0: 696e 7075 7420 6172 7261 7927 7320 6474  input array's dt
+0000ccf0: 7970 652e 0d0a 0d0a 2020 2020 2020 2020  ype.....        
+0000cd00: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+0000cd10: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+0000cd20: 2020 416e 790d 0a20 2020 2020 2020 2020    Any..         
+0000cd30: 2020 2054 6865 2069 6e76 616c 6964 2076     The invalid v
+0000cd40: 616c 7565 2066 6f72 2074 6865 2069 6e70  alue for the inp
+0000cd50: 7574 2061 7272 6179 2773 2064 7479 7065  ut array's dtype
+0000cd60: 2c20 666f 7220 6578 616d 706c 653a 2060  , for example: `
+0000cd70: 6e75 6d70 792e 696e 7438 6020 7265 7475  numpy.int8` retu
+0000cd80: 726e 7320 2d31 3238 2c20 606e 756d 7079  rns -128, `numpy
+0000cd90: 2e75 696e 7438 6020 7265 7475 726e 7320  .uint8` returns 
+0000cda0: 3235 352c 2061 6e64 2060 6e75 6d70 792e  255, and `numpy.
+0000cdb0: 626f 6f6c 5f60 2072 6574 7572 6e73 2046  bool_` returns F
+0000cdc0: 616c 7365 2e0d 0a0d 0a20 2020 2020 2020  alse.....       
+0000cdd0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+0000cde0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+0000cdf0: 2020 2020 2046 6173 7441 7272 6179 2e63       FastArray.c
+0000ce00: 6f70 795f 696e 7661 6c69 6420 3a20 5265  opy_invalid : Re
+0000ce10: 7475 726e 7320 6120 6046 6173 7441 7272  turns a `FastArr
+0000ce20: 6179 6020 636f 7079 2066 696c 6c65 6420  ay` copy filled 
+0000ce30: 7769 7468 2074 6865 2069 6e76 616c 6964  with the invalid
+0000ce40: 2076 616c 7565 2066 6f72 2074 6865 2069   value for the i
+0000ce50: 6e70 7574 2061 7272 6179 2773 2064 7479  nput array's dty
+0000ce60: 7065 2e0d 0a20 2020 2020 2020 2046 6173  pe...        Fas
+0000ce70: 7441 7272 6179 2e66 696c 6c5f 696e 7661  tArray.fill_inva
+0000ce80: 6c69 6420 3a20 5265 7475 726e 7320 7468  lid : Returns th
+0000ce90: 6520 696e 7075 7420 6046 6173 7441 7272  e input `FastArr
+0000cea0: 6179 6020 6f72 2061 2060 4661 7374 4172  ay` or a `FastAr
+0000ceb0: 7261 7960 2063 6f70 792c 2066 696c 6c65  ray` copy, fille
+0000cec0: 6420 7769 7468 2069 6e76 616c 6964 2076  d with invalid v
+0000ced0: 616c 7565 732e 0d0a 2020 2020 2020 2020  alues...        
+0000cee0: 7e72 6970 7461 626c 652e 7274 5f65 6e75  ~riptable.rt_enu
+0000cef0: 6d2e 494e 5641 4c49 445f 4449 4354 203a  m.INVALID_DICT :
+0000cf00: 204d 6170 7320 696e 7661 6c69 6420 7661   Maps invalid va
+0000cf10: 6c75 6573 2074 6f20 6474 7970 6573 2e0d  lues to dtypes..
+0000cf20: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+0000cf30: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
+0000cf40: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2052  -----..        R
+0000cf50: 6574 7572 6e20 7468 6520 696e 7661 6c69  eturn the invali
+0000cf60: 6420 7661 6c75 6520 666f 7220 616e 2069  d value for an i
+0000cf70: 6e74 6567 6572 2061 7272 6179 3a0d 0a0d  nteger array:...
+0000cf80: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+0000cf90: 2072 742e 4641 285b 312c 2032 2c20 332c   rt.FA([1, 2, 3,
+0000cfa0: 2034 2c20 355d 290d 0a20 2020 2020 2020   4, 5])..       
+0000cfb0: 203e 3e3e 2061 0d0a 2020 2020 2020 2020   >>> a..        
+0000cfc0: 4661 7374 4172 7261 7928 5b31 2c20 322c  FastArray([1, 2,
+0000cfd0: 2033 2c20 342c 2035 5d29 0d0a 2020 2020   3, 4, 5])..    
+0000cfe0: 2020 2020 3e3e 3e20 612e 696e 760d 0a20      >>> a.inv.. 
+0000cff0: 2020 2020 2020 202d 3231 3437 3438 3336         -21474836
+0000d000: 3438 0d0a 0d0a 2020 2020 2020 2020 5265  48....        Re
+0000d010: 7475 726e 2074 6865 2069 6e76 616c 6964  turn the invalid
+0000d020: 2076 616c 7565 2066 6f72 2061 2066 6c6f   value for a flo
+0000d030: 6174 696e 6720 706f 696e 7420 6172 7261  ating point arra
+0000d040: 793a 0d0a 0d0a 2020 2020 2020 2020 3e3e  y:....        >>
+0000d050: 3e20 6132 203d 2072 742e 4641 285b 302e  > a2 = rt.FA([0.
+0000d060: 2c20 312e 2c20 322e 2c20 332e 2c20 342e  , 1., 2., 3., 4.
+0000d070: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+0000d080: 6132 0d0a 2020 2020 2020 2020 4661 7374  a2..        Fast
+0000d090: 4172 7261 7928 5b30 2e2c 2031 2e2c 2032  Array([0., 1., 2
+0000d0a0: 2e2c 2033 2e2c 2034 2e5d 290d 0a20 2020  ., 3., 4.])..   
+0000d0b0: 2020 2020 203e 3e3e 2061 322e 696e 760d       >>> a2.inv.
+0000d0c0: 0a20 2020 2020 2020 206e 616e 0d0a 0d0a  .        nan....
+0000d0d0: 2020 2020 2020 2020 5265 7475 726e 2074          Return t
+0000d0e0: 6865 2069 6e76 616c 6964 2076 616c 7565  he invalid value
+0000d0f0: 2066 6f72 2061 2073 7472 696e 6720 6172   for a string ar
+0000d100: 7261 793a 0d0a 0d0a 2020 2020 2020 2020  ray:....        
+0000d110: 3e3e 3e20 6133 203d 2072 742e 4641 285b  >>> a3 = rt.FA([
+0000d120: 2241 4d5a 4e22 2c20 2249 424d 222c 2022  "AMZN", "IBM", "
+0000d130: 4d53 4654 222c 2022 4141 504c 225d 290d  MSFT", "AAPL"]).
+0000d140: 0a20 2020 2020 2020 203e 3e3e 2061 330d  .        >>> a3.
+0000d150: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+0000d160: 6179 285b 6227 414d 5a4e 272c 2062 2749  ay([b'AMZN', b'I
+0000d170: 424d 272c 2062 274d 5346 5427 2c20 6227  BM', b'MSFT', b'
+0000d180: 4141 504c 275d 2c20 6474 7970 653d 277c  AAPL'], dtype='|
+0000d190: 5334 2729 0d0a 2020 2020 2020 2020 3e3e  S4')..        >>
+0000d1a0: 3e20 6133 2e69 6e76 0d0a 2020 2020 2020  > a3.inv..      
+0000d1b0: 2020 6227 270d 0a20 2020 2020 2020 2022    b''..        "
+0000d1c0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+0000d1d0: 726e 2049 4e56 414c 4944 5f44 4943 545b  rn INVALID_DICT[
+0000d1e0: 7365 6c66 2e64 7479 7065 2e6e 756d 5d0d  self.dtype.num].
+0000d1f0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+0000d200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d240: 2d2d 2d0d 0a20 2020 2064 6566 2066 696c  ---..    def fil
+0000d250: 6c5f 696e 7661 6c69 6428 7365 6c66 2c20  l_invalid(self, 
+0000d260: 7368 6170 653d 4e6f 6e65 2c20 6474 7970  shape=None, dtyp
+0000d270: 653d 4e6f 6e65 2c20 696e 706c 6163 653d  e=None, inplace=
+0000d280: 5472 7565 2920 2d3e 2046 6173 7441 7272  True) -> FastArr
+0000d290: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
+0000d2a0: 0d0a 2020 2020 2020 2020 5265 706c 6163  ..        Replac
+0000d2b0: 6520 7468 6520 636f 6e74 656e 7473 206f  e the contents o
+0000d2c0: 6620 7468 6520 696e 7075 7420 6046 6173  f the input `Fas
+0000d2d0: 7441 7272 6179 6020 7769 7468 2069 6e76  tArray` with inv
+0000d2e0: 616c 6964 2076 616c 7565 732e 0d0a 0d0a  alid values.....
+0000d2f0: 2020 2020 2020 2020 5468 6520 696e 7661          The inva
+0000d300: 6c69 6420 7661 6c75 6520 7573 6564 2069  lid value used i
+0000d310: 7320 6465 7465 726d 696e 6564 2062 7920  s determined by 
+0000d320: 7468 6520 696e 7075 7420 6172 7261 7927  the input array'
+0000d330: 7320 6474 7970 6520 6f72 2061 2075 7365  s dtype or a use
+0000d340: 722d 7370 6563 6966 6965 6420 6474 7970  r-specified dtyp
+0000d350: 652e 2057 6172 6e69 6e67 3a20 4279 2064  e. Warning: By d
+0000d360: 6566 6175 6c74 2c20 7468 6973 206f 7065  efault, this ope
+0000d370: 7261 7469 6f6e 2069 7320 696e 2070 6c61  ration is in pla
+0000d380: 6365 2e0d 0a0d 0a20 2020 2020 2020 2050  ce.....        P
+0000d390: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+0000d3a0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+0000d3b0: 2020 2020 2020 2073 6861 7065 203a 2069         shape : i
+0000d3c0: 6e74 206f 7220 7365 7175 656e 6365 206f  nt or sequence o
+0000d3d0: 6620 696e 742c 206f 7074 696f 6e61 6c0d  f int, optional.
+0000d3e0: 0a20 2020 2020 2020 2020 2020 2053 6861  .            Sha
+0000d3f0: 7065 206f 6620 7468 6520 6e65 7720 6172  pe of the new ar
+0000d400: 7261 792c 2066 6f72 2065 7861 6d70 6c65  ray, for example
+0000d410: 3a20 6060 2832 2c20 3329 6060 206f 7220  : ``(2, 3)`` or 
+0000d420: 6060 3260 602e 204e 6f74 6520 7468 6174  ``2``. Note that
+0000d430: 2061 6c74 686f 7567 6820 6d75 6c74 692d   although multi-
+0000d440: 6469 6d65 6e73 696f 6e61 6c20 6172 7261  dimensional arra
+0000d450: 7973 2061 7265 2074 6563 686e 6963 616c  ys are technical
+0000d460: 6c79 2073 7570 706f 7274 6564 2062 7920  ly supported by 
+0000d470: 5269 7074 6162 6c65 2c20 796f 7520 6d61  Riptable, you ma
+0000d480: 7920 6765 7420 756e 6578 7065 6374 6564  y get unexpected
+0000d490: 2072 6573 756c 7473 2077 6865 6e20 776f   results when wo
+0000d4a0: 726b 696e 6720 7769 7468 2074 6865 6d2e  rking with them.
+0000d4b0: 0d0a 2020 2020 2020 2020 6474 7970 6520  ..        dtype 
+0000d4c0: 3a20 7374 722c 206f 7074 696f 6e61 6c0d  : str, optional.
+0000d4d0: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0000d4e0: 2064 6573 6972 6564 2064 7479 7065 2066   desired dtype f
+0000d4f0: 6f72 2074 6865 2072 6574 7572 6e65 6420  or the returned 
+0000d500: 6172 7261 792e 0d0a 2020 2020 2020 2020  array...        
+0000d510: 696e 706c 6163 6520 3a20 626f 6f6c 2c20  inplace : bool, 
+0000d520: 6465 6661 756c 7420 5472 7565 0d0a 2020  default True..  
+0000d530: 2020 2020 2020 2020 2020 4966 2060 4661            If `Fa
+0000d540: 6c73 6560 2c20 7265 7475 726e 2061 2063  lse`, return a c
+0000d550: 6f70 7920 6f66 2074 6865 2061 7272 6179  opy of the array
+0000d560: 2e20 4966 2060 5472 7565 602c 206d 6f64  . If `True`, mod
+0000d570: 6966 7920 6f72 6967 696e 616c 2064 6174  ify original dat
+0000d580: 612e 0d0a 0d0a 2020 2020 2020 2020 5265  a.....        Re
+0000d590: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+0000d5a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0000d5b0: 4661 7374 4172 7261 792c 206f 7074 696f  FastArray, optio
+0000d5c0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
+0000d5d0: 2041 2063 6f70 7920 6f66 2074 6865 2069   A copy of the i
+0000d5e0: 6e70 7574 2060 4661 7374 4172 7261 7960  nput `FastArray`
+0000d5f0: 2077 6974 6820 696e 7661 6c69 6420 6173   with invalid as
+0000d600: 2061 6c6c 206f 6620 6974 7320 7661 6c75   all of its valu
+0000d610: 6573 2e20 5265 7475 726e 6564 206f 6e6c  es. Returned onl
+0000d620: 7920 6966 2074 6865 206f 7065 7261 7469  y if the operati
+0000d630: 6f6e 2069 7320 6e6f 7420 646f 6e65 2069  on is not done i
+0000d640: 6e20 706c 6163 652e 0d0a 0d0a 2020 2020  n place.....    
+0000d650: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+0000d660: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+0000d670: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000d680: 792e 696e 7620 3a20 5265 7475 726e 7320  y.inv : Returns 
+0000d690: 7468 6520 696e 7661 6c69 6420 7661 6c75  the invalid valu
+0000d6a0: 6520 666f 7220 7468 6520 696e 7075 7420  e for the input 
+0000d6b0: 6172 7261 7927 7320 6474 7970 652e 0d0a  array's dtype...
+0000d6c0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000d6d0: 792e 636f 7079 5f69 6e76 616c 6964 203a  y.copy_invalid :
+0000d6e0: 2052 6574 7572 6e73 2061 2060 4661 7374   Returns a `Fast
+0000d6f0: 4172 7261 7960 2063 6f70 7920 7769 7468  Array` copy with
+0000d700: 2069 7473 2076 616c 7565 7320 7265 706c   its values repl
+0000d710: 6163 6564 2077 6974 6820 7468 6520 696e  aced with the in
+0000d720: 7661 6c69 6420 7661 6c75 6520 666f 7220  valid value for 
+0000d730: 7468 6520 696e 7075 7420 6172 7261 7927  the input array'
+0000d740: 7320 6474 7970 652e 0d0a 0d0a 2020 2020  s dtype.....    
+0000d750: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
+0000d760: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+0000d770: 2020 2020 2020 2020 5265 706c 6163 6520          Replace 
+0000d780: 616e 2069 6e74 6567 6572 2061 7272 6179  an integer array
+0000d790: 2773 2076 616c 7565 7320 7769 7468 2069  's values with i
+0000d7a0: 6e76 616c 6964 2076 616c 7565 732e 2042  nvalid values. B
+0000d7b0: 7920 6465 6661 756c 742c 2074 6865 2072  y default, the r
+0000d7c0: 6574 7572 6e65 6420 6172 7261 7920 6973  eturned array is
+0000d7d0: 2074 6865 2073 616d 6520 7369 7a65 2061   the same size a
+0000d7e0: 6e64 2064 7479 7065 2061 7320 7468 6520  nd dtype as the 
+0000d7f0: 696e 7075 7420 6172 7261 792c 2061 6e64  input array, and
+0000d800: 2074 6865 206f 7065 7261 7469 6f6e 2069   the operation i
+0000d810: 7320 7065 7266 6f72 6d65 6420 696e 2070  s performed in p
+0000d820: 6c61 6365 3a0d 0a0d 0a20 2020 2020 2020  lace:....       
+0000d830: 203e 3e3e 2061 203d 2072 742e 4641 285b   >>> a = rt.FA([
+0000d840: 312c 2032 2c20 332c 2034 2c20 355d 290d  1, 2, 3, 4, 5]).
+0000d850: 0a20 2020 2020 2020 203e 3e3e 2061 0d0a  .        >>> a..
+0000d860: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000d870: 7928 5b31 2c20 322c 2033 2c20 342c 2035  y([1, 2, 3, 4, 5
+0000d880: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+0000d890: 612e 6669 6c6c 5f69 6e76 616c 6964 2829  a.fill_invalid()
+0000d8a0: 0d0a 2020 2020 2020 2020 3e3e 3e20 610d  ..        >>> a.
+0000d8b0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+0000d8c0: 6179 285b 2d32 3134 3734 3833 3634 382c  ay([-2147483648,
+0000d8d0: 202d 3231 3437 3438 3336 3438 2c20 2d32   -2147483648, -2
+0000d8e0: 3134 3734 3833 3634 382c 202d 3231 3437  147483648, -2147
+0000d8f0: 3438 3336 3438 2c0d 0a20 2020 2020 2020  483648,..       
+0000d900: 2020 2020 2020 2020 2020 2020 2d32 3134              -214
+0000d910: 3734 3833 3634 385d 290d 0a0d 0a20 2020  7483648])....   
+0000d920: 2020 2020 2052 6570 6c61 6365 2061 2066       Replace a f
+0000d930: 6c6f 6174 696e 6720 706f 696e 7420 6172  loating point ar
+0000d940: 7261 7927 7320 7661 6c75 6573 2077 6974  ray's values wit
+0000d950: 6820 7468 6520 696e 7661 6c69 6420 7661  h the invalid va
+0000d960: 6c75 6520 666f 7220 7468 6520 6060 696e  lue for the ``in
+0000d970: 7433 3260 6020 6474 7970 653a 0d0a 0d0a  t32`` dtype:....
+0000d980: 2020 2020 2020 2020 3e3e 3e20 6132 203d          >>> a2 =
+0000d990: 2072 742e 4641 285b 302e 2c20 312e 2c20   rt.FA([0., 1., 
+0000d9a0: 322e 2c20 332e 2c20 342e 5d29 0d0a 2020  2., 3., 4.])..  
+0000d9b0: 2020 2020 2020 3e3e 3e20 6132 0d0a 2020        >>> a2..  
+0000d9c0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+0000d9d0: 5b30 2e2c 2031 2e2c 2032 2e2c 2033 2e2c  [0., 1., 2., 3.,
+0000d9e0: 2034 2e5d 290d 0a20 2020 2020 2020 203e   4.])..        >
+0000d9f0: 3e3e 2061 322e 6669 6c6c 5f69 6e76 616c  >> a2.fill_inval
+0000da00: 6964 2864 7479 7065 3d22 696e 7433 3222  id(dtype="int32"
+0000da10: 2c20 696e 706c 6163 653d 4661 6c73 6529  , inplace=False)
+0000da20: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+0000da30: 7261 7928 5b2d 3231 3437 3438 3336 3438  ray([-2147483648
+0000da40: 2c20 2d32 3134 3734 3833 3634 382c 202d  , -2147483648, -
+0000da50: 3231 3437 3438 3336 3438 2c20 2d32 3134  2147483648, -214
+0000da60: 3734 3833 3634 382c 0d0a 2020 2020 2020  7483648,..      
+0000da70: 2020 2020 2020 2020 2020 2020 202d 3231               -21
+0000da80: 3437 3438 3336 3438 5d29 0d0a 0d0a 2020  47483648])....  
+0000da90: 2020 2020 2020 5370 6563 6966 7920 7468        Specify th
+0000daa0: 6520 7369 7a65 2061 6e64 2064 7479 7065  e size and dtype
+0000dab0: 206f 6620 7468 6520 6f75 7470 7574 2061   of the output a
+0000dac0: 7272 6179 3a0d 0a0d 0a20 2020 2020 2020  rray:....       
+0000dad0: 203e 3e3e 2061 3320 3d20 7274 2e46 4128   >>> a3 = rt.FA(
+0000dae0: 5b22 414d 5a4e 222c 2022 4942 4d22 2c20  ["AMZN", "IBM", 
+0000daf0: 224d 5346 5422 2c20 2241 4150 4c22 5d29  "MSFT", "AAPL"])
+0000db00: 0d0a 2020 2020 2020 2020 3e3e 3e20 6133  ..        >>> a3
+0000db10: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+0000db20: 7261 7928 5b62 2741 4d5a 4e27 2c20 6227  ray([b'AMZN', b'
+0000db30: 4942 4d27 2c20 6227 4d53 4654 272c 2062  IBM', b'MSFT', b
+0000db40: 2741 4150 4c27 5d2c 2064 7479 7065 3d27  'AAPL'], dtype='
+0000db50: 7c53 3427 290d 0a20 2020 2020 2020 203e  |S4')..        >
+0000db60: 3e3e 2061 332e 6669 6c6c 5f69 6e76 616c  >> a3.fill_inval
+0000db70: 6964 2832 2c20 6474 7970 653d 2262 6f6f  id(2, dtype="boo
+0000db80: 6c22 2c20 696e 706c 6163 653d 4661 6c73  l", inplace=Fals
+0000db90: 6529 0d0a 2020 2020 2020 2020 4661 7374  e)..        Fast
+0000dba0: 4172 7261 7928 5b46 616c 7365 2c20 4661  Array([False, Fa
+0000dbb0: 6c73 655d 290d 0a20 2020 2020 2020 2022  lse])..        "
+0000dbc0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+0000dbd0: 726e 2073 656c 662e 5f66 696c 6c5f 696e  rn self._fill_in
+0000dbe0: 7661 6c69 645f 696e 7465 726e 616c 2873  valid_internal(s
+0000dbf0: 6861 7065 3d73 6861 7065 2c20 6474 7970  hape=shape, dtyp
+0000dc00: 653d 6474 7970 652c 2069 6e70 6c61 6365  e=dtype, inplace
+0000dc10: 3d69 6e70 6c61 6365 290d 0a0d 0a20 2020  =inplace)....   
+0000dc20: 2064 6566 205f 6669 6c6c 5f69 6e76 616c   def _fill_inval
+0000dc30: 6964 5f69 6e74 6572 6e61 6c28 7365 6c66  id_internal(self
+0000dc40: 2c20 7368 6170 653d 4e6f 6e65 2c20 6474  , shape=None, dt
+0000dc50: 7970 653d 4e6f 6e65 2c20 696e 706c 6163  ype=None, inplac
+0000dc60: 653d 5472 7565 2c20 6669 6c6c 5f76 616c  e=True, fill_val
+0000dc70: 3d4e 6f6e 6529 3a0d 0a20 2020 2020 2020  =None):..       
+0000dc80: 2069 6620 6474 7970 6520 6973 204e 6f6e   if dtype is Non
+0000dc90: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000dca0: 6474 7970 6520 3d20 7365 6c66 2e64 7479  dtype = self.dty
+0000dcb0: 7065 0d0a 2020 2020 2020 2020 6966 2069  pe..        if i
+0000dcc0: 7369 6e73 7461 6e63 6528 6474 7970 652c  sinstance(dtype,
+0000dcd0: 2073 7472 293a 0d0a 2020 2020 2020 2020   str):..        
+0000dce0: 2020 2020 6474 7970 6520 3d20 6e70 2e64      dtype = np.d
+0000dcf0: 7479 7065 2864 7479 7065 290d 0a20 2020  type(dtype)..   
+0000dd00: 2020 2020 2069 6620 7368 6170 6520 6973       if shape is
+0000dd10: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000dd20: 2020 2020 7368 6170 6520 3d20 7365 6c66      shape = self
+0000dd30: 2e73 6861 7065 0d0a 2020 2020 2020 2020  .shape..        
+0000dd40: 656c 6966 206e 6f74 2069 7369 6e73 7461  elif not isinsta
+0000dd50: 6e63 6528 7368 6170 652c 2074 7570 6c65  nce(shape, tuple
+0000dd60: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000dd70: 7368 6170 6520 3d20 2873 6861 7065 2c29  shape = (shape,)
+0000dd80: 0d0a 0d0a 2020 2020 2020 2020 6966 2066  ....        if f
+0000dd90: 696c 6c5f 7661 6c20 6973 204e 6f6e 653a  ill_val is None:
+0000dda0: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+0000ddb0: 7620 3d20 494e 5641 4c49 445f 4449 4354  v = INVALID_DICT
+0000ddc0: 5b64 7479 7065 2e6e 756d 5d0d 0a20 2020  [dtype.num]..   
+0000ddd0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0000dde0: 2020 2020 2020 2020 696e 7620 3d20 6669          inv = fi
+0000ddf0: 6c6c 5f76 616c 0d0a 0d0a 2020 2020 2020  ll_val....      
+0000de00: 2020 6966 2069 6e70 6c61 6365 2069 7320    if inplace is 
+0000de10: 5472 7565 3a0d 0a20 2020 2020 2020 2020  True:..         
+0000de20: 2020 2069 6620 7368 6170 6520 213d 2073     if shape != s
+0000de30: 656c 662e 7368 6170 653a 0d0a 2020 2020  elf.shape:..    
+0000de40: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0000de50: 6520 5661 6c75 6545 7272 6f72 280d 0a20  e ValueError(.. 
+0000de60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000de70: 2020 2066 2249 6e70 6c61 6365 2066 696c     f"Inplace fil
+0000de80: 6c20 696e 7661 6c69 6420 6361 6e6e 6f74  l invalid cannot
+0000de90: 2062 6520 6469 6666 6572 656e 7420 6e75   be different nu
+0000dea0: 6d62 6572 206f 6620 726f 7773 2074 6861  mber of rows tha
+0000deb0: 6e20 6578 6973 7469 6e67 2061 7272 6179  n existing array
+0000dec0: 2e20 476f 7420 7b73 6861 7065 7d20 7673  . Got {shape} vs
+0000ded0: 2e20 6c65 6e67 7468 207b 6c65 6e28 7365  . length {len(se
+0000dee0: 6c66 297d 220d 0a20 2020 2020 2020 2020  lf)}"..         
+0000def0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+0000df00: 2020 2020 2020 6966 2064 7479 7065 2021        if dtype !
+0000df10: 3d20 7365 6c66 2e64 7479 7065 3a0d 0a20  = self.dtype:.. 
+0000df20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0000df30: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
+0000df40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000df50: 2020 2020 2020 6622 496e 706c 6163 6520        f"Inplace 
+0000df60: 6669 6c6c 2069 6e76 616c 6964 2063 616e  fill invalid can
+0000df70: 6e6f 7420 6265 2064 6966 6665 7265 6e74  not be different
+0000df80: 2064 7479 7065 2074 6861 6e20 6578 6973   dtype than exis
+0000df90: 7469 6e67 2061 7272 6179 2e20 476f 7420  ting array. Got 
+0000dfa0: 7b64 7479 7065 7d20 7673 2e20 7b6c 656e  {dtype} vs. {len
+0000dfb0: 2873 656c 662e 6474 7970 6529 7d22 0d0a  (self.dtype)}"..
+0000dfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dfd0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000dfe0: 2073 656c 662e 6669 6c6c 2869 6e76 290d   self.fill(inv).
+0000dff0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+0000e000: 2020 2020 2020 2020 2020 2020 6172 7220              arr 
+0000e010: 3d20 6675 6c6c 2873 6861 7065 2c20 696e  = full(shape, in
+0000e020: 762c 2064 7479 7065 3d64 7479 7065 290d  v, dtype=dtype).
+0000e030: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000e040: 7572 6e20 6172 720d 0a0d 0a20 2020 2023  urn arr....    #
+0000e050: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+0000e060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e090: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+0000e0a0: 6465 6620 6973 696e 2873 656c 662c 2074  def isin(self, t
+0000e0b0: 6573 745f 656c 656d 656e 7473 2c20 2a2c  est_elements, *,
+0000e0c0: 2061 7373 756d 655f 756e 6971 7565 3d46   assume_unique=F
+0000e0d0: 616c 7365 2c20 696e 7665 7274 3d46 616c  alse, invert=Fal
+0000e0e0: 7365 2920 2d3e 2046 6173 7441 7272 6179  se) -> FastArray
+0000e0f0: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+0000e100: 2020 2020 2020 2020 4361 6c63 756c 6174          Calculat
+0000e110: 6573 2060 7365 6c66 2069 6e20 7465 7374  es `self in test
+0000e120: 5f65 6c65 6d65 6e74 7360 2c20 6272 6f61  _elements`, broa
+0000e130: 6463 6173 7469 6e67 206f 7665 7220 6073  dcasting over `s
+0000e140: 656c 6660 206f 6e6c 792e 0d0a 2020 2020  elf` only...    
+0000e150: 2020 2020 5265 7475 726e 7320 6120 626f      Returns a bo
+0000e160: 6f6c 6561 6e20 6172 7261 7920 6f66 2074  olean array of t
+0000e170: 6865 2073 616d 6520 7368 6170 6520 6173  he same shape as
+0000e180: 2060 7365 6c66 6020 7468 6174 2069 7320   `self` that is 
+0000e190: 5472 7565 0d0a 2020 2020 2020 2020 7768  True..        wh
+0000e1a0: 6572 6520 616e 2065 6c65 6d65 6e74 206f  ere an element o
+0000e1b0: 6620 6073 656c 6660 2069 7320 696e 2060  f `self` is in `
+0000e1c0: 7465 7374 5f65 6c65 6d65 6e74 7360 2061  test_elements` a
+0000e1d0: 6e64 2046 616c 7365 206f 7468 6572 7769  nd False otherwi
+0000e1e0: 7365 2e0d 0a0d 0a20 2020 2020 2020 2050  se.....        P
+0000e1f0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+0000e200: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+0000e210: 2020 2020 2020 2074 6573 745f 656c 656d         test_elem
+0000e220: 656e 7473 203a 2061 7272 6179 5f6c 696b  ents : array_lik
+0000e230: 650d 0a20 2020 2020 2020 2020 2020 2054  e..            T
+0000e240: 6865 2076 616c 7565 7320 6167 6169 6e73  he values agains
+0000e250: 7420 7768 6963 6820 746f 2074 6573 7420  t which to test 
+0000e260: 6561 6368 2076 616c 7565 206f 6620 6065  each value of `e
+0000e270: 6c65 6d65 6e74 602e 0d0a 2020 2020 2020  lement`...      
+0000e280: 2020 2020 2020 5468 6973 2061 7267 756d        This argum
+0000e290: 656e 7420 6973 2066 6c61 7474 656e 6564  ent is flattened
+0000e2a0: 2069 6620 6974 2069 7320 616e 2061 7272   if it is an arr
+0000e2b0: 6179 206f 7220 6172 7261 795f 6c69 6b65  ay or array_like
+0000e2c0: 2e0d 0a20 2020 2020 2020 2020 2020 2053  ...            S
+0000e2d0: 6565 206e 6f74 6573 2066 6f72 2062 6568  ee notes for beh
+0000e2e0: 6176 696f 7220 7769 7468 206e 6f6e 2d61  avior with non-a
+0000e2f0: 7272 6179 2d6c 696b 6520 7061 7261 6d65  rray-like parame
+0000e300: 7465 7273 2e0d 0a20 2020 2020 2020 2061  ters...        a
+0000e310: 7373 756d 655f 756e 6971 7565 203a 2062  ssume_unique : b
+0000e320: 6f6f 6c2c 206f 7074 696f 6e61 6c0d 0a20  ool, optional.. 
+0000e330: 2020 2020 2020 2020 2020 2049 6620 5472             If Tr
+0000e340: 7565 2c20 7468 6520 696e 7075 7420 6172  ue, the input ar
+0000e350: 7261 7973 2061 7265 2062 6f74 6820 6173  rays are both as
+0000e360: 7375 6d65 6420 746f 2062 6520 756e 6971  sumed to be uniq
+0000e370: 7565 2c20 7768 6963 680d 0a20 2020 2020  ue, which..     
+0000e380: 2020 2020 2020 2063 616e 2073 7065 6564         can speed
+0000e390: 2075 7020 7468 6520 6361 6c63 756c 6174   up the calculat
+0000e3a0: 696f 6e2e 2020 4465 6661 756c 7420 6973  ion.  Default is
+0000e3b0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+0000e3c0: 2069 6e76 6572 7420 3a20 626f 6f6c 2c20   invert : bool, 
+0000e3d0: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
+0000e3e0: 2020 2020 2020 4966 2054 7275 652c 2074        If True, t
+0000e3f0: 6865 2076 616c 7565 7320 696e 2074 6865  he values in the
+0000e400: 2072 6574 7572 6e65 6420 6172 7261 7920   returned array 
+0000e410: 6172 6520 696e 7665 7274 6564 2c20 6173  are inverted, as
+0000e420: 2069 660d 0a20 2020 2020 2020 2020 2020   if..           
+0000e430: 2063 616c 6375 6c61 7469 6e67 2060 656c   calculating `el
+0000e440: 656d 656e 7420 6e6f 7420 696e 2074 6573  ement not in tes
+0000e450: 745f 656c 656d 656e 7473 602e 2044 6566  t_elements`. Def
+0000e460: 6175 6c74 2069 7320 4661 6c73 652e 0d0a  ault is False...
+0000e470: 2020 2020 2020 2020 2020 2020 6060 6e70              ``np
+0000e480: 2e69 7369 6e28 612c 2062 2c20 696e 7665  .isin(a, b, inve
+0000e490: 7274 3d54 7275 6529 6060 2069 7320 6571  rt=True)`` is eq
+0000e4a0: 7569 7661 6c65 6e74 2074 6f20 2862 7574  uivalent to (but
+0000e4b0: 2066 6173 7465 720d 0a20 2020 2020 2020   faster..       
+0000e4c0: 2020 2020 2074 6861 6e29 2060 606e 702e       than) ``np.
+0000e4d0: 696e 7665 7274 286e 702e 6973 696e 2861  invert(np.isin(a
+0000e4e0: 2c20 6229 2960 602e 0d0a 0d0a 2020 2020  , b))``.....    
+0000e4f0: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
+0000e500: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
+0000e510: 2020 2020 2020 6973 696e 203a 206e 6461        isin : nda
+0000e520: 7272 6179 2c20 626f 6f6c 0d0a 2020 2020  rray, bool..    
+0000e530: 2020 2020 2020 2020 4861 7320 7468 6520          Has the 
+0000e540: 7361 6d65 2073 6861 7065 2061 7320 6065  same shape as `e
+0000e550: 6c65 6d65 6e74 602e 2054 6865 2076 616c  lement`. The val
+0000e560: 7565 7320 6065 6c65 6d65 6e74 5b69 7369  ues `element[isi
+0000e570: 6e5d 600d 0a20 2020 2020 2020 2020 2020  n]`..           
+0000e580: 2061 7265 2069 6e20 6074 6573 745f 656c   are in `test_el
+0000e590: 656d 656e 7473 602e 0d0a 0d0a 2020 2020  ements`.....    
+0000e5a0: 2020 2020 4e6f 7465 3a20 6265 6861 7669      Note: behavi
+0000e5b0: 6f72 2064 6966 6665 7273 2066 726f 6d20  or differs from 
+0000e5c0: 7061 6e64 6173 0d0a 2020 2020 2020 2020  pandas..        
+0000e5d0: 2d20 5269 7074 6162 6c65 2066 6176 6f72  - Riptable favor
+0000e5e0: 7320 6279 7465 7374 7269 6e67 732c 2061  s bytestrings, a
+0000e5f0: 6e64 2077 696c 6c20 6d61 6b65 2063 6f6e  nd will make con
+0000e600: 7665 7273 696f 6e73 2066 726f 6d20 756e  versions from un
+0000e610: 6963 6f64 652f 6279 7465 7320 746f 206d  icode/bytes to m
+0000e620: 6174 6368 2066 6f72 206f 7065 7261 7469  atch for operati
+0000e630: 6f6e 7320 6173 206e 6563 6573 7361 7279  ons as necessary
+0000e640: 2e0d 0a20 2020 2020 2020 202d 2057 6520  ...        - We 
+0000e650: 7769 6c6c 2061 6c73 6f20 6163 6365 7074  will also accept
+0000e660: 2073 696e 676c 6520 7363 616c 6172 7320   single scalars 
+0000e670: 666f 7220 7661 6c75 6573 2e0d 0a20 2020  for values...   
+0000e680: 2020 2020 202d 2050 616e 6461 7320 7365       - Pandas se
+0000e690: 7269 6573 2077 696c 6c20 7265 7475 726e  ries will return
+0000e6a0: 2061 6e6f 7468 6572 2073 6572 6965 7320   another series 
+0000e6b0: 2d20 7765 2068 6176 6520 6e6f 2073 6572  - we have no ser
+0000e6c0: 6965 732c 2061 6e64 2077 696c 6c20 7265  ies, and will re
+0000e6d0: 7475 726e 2061 2046 6173 7441 7272 6179  turn a FastArray
+0000e6e0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+0000e6f0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
+0000e700: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0000e710: 3e3e 3e20 6672 6f6d 2072 6970 7461 626c  >>> from riptabl
+0000e720: 6520 696d 706f 7274 202a 0d0a 2020 2020  e import *..    
+0000e730: 2020 2020 3e3e 3e20 6120 3d20 4641 285b      >>> a = FA([
+0000e740: 2761 272c 2762 272c 2763 272c 2764 272c  'a','b','c','d',
+0000e750: 2765 275d 2c20 756e 6963 6f64 653d 4661  'e'], unicode=Fa
+0000e760: 6c73 6529 0d0a 2020 2020 2020 2020 3e3e  lse)..        >>
+0000e770: 3e20 612e 6973 696e 285b 2761 272c 2762  > a.isin(['a','b
+0000e780: 275d 290d 0a20 2020 2020 2020 2046 6173  '])..        Fas
+0000e790: 7441 7272 6179 285b 2054 7275 652c 2020  tArray([ True,  
+0000e7a0: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
+0000e7b0: 7365 2c20 4661 6c73 655d 290d 0a20 2020  se, False])..   
+0000e7c0: 2020 2020 203e 3e3e 2061 2e69 7369 6e28       >>> a.isin(
+0000e7d0: 2761 2729 0d0a 2020 2020 2020 2020 4661  'a')..        Fa
+0000e7e0: 7374 4172 7261 7928 5b20 5472 7565 2c20  stArray([ True, 
+0000e7f0: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
+0000e800: 616c 7365 2c20 4661 6c73 655d 290d 0a20  alse, False]).. 
+0000e810: 2020 2020 2020 203e 3e3e 2061 2e69 7369         >>> a.isi
+0000e820: 6e28 7b27 6227 7d29 0d0a 2020 2020 2020  n({'b'})..      
+0000e830: 2020 4661 7374 4172 7261 7928 5b20 4661    FastArray([ Fa
+0000e840: 6c73 652c 2054 7275 652c 2046 616c 7365  lse, True, False
+0000e850: 2c20 4661 6c73 652c 2046 616c 7365 5d29  , False, False])
+0000e860: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0000e870: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0000e880: 616e 6365 2874 6573 745f 656c 656d 656e  ance(test_elemen
+0000e890: 7473 2c20 7365 7429 3a0d 0a20 2020 2020  ts, set):..     
+0000e8a0: 2020 2020 2020 2074 6573 745f 656c 656d         test_elem
+0000e8b0: 656e 7473 203d 206c 6973 7428 7465 7374  ents = list(test
+0000e8c0: 5f65 6c65 6d65 6e74 7329 0d0a 0d0a 2020  _elements)....  
+0000e8d0: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
+0000e8e0: 6e73 7461 6e63 6528 7465 7374 5f65 6c65  nstance(test_ele
+0000e8f0: 6d65 6e74 732c 206e 702e 6e64 6172 7261  ments, np.ndarra
+0000e900: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+0000e910: 2023 2061 6c69 676e 2062 7974 6520 7374   # align byte st
+0000e920: 7269 6e67 2076 7320 756e 6963 6f64 650d  ring vs unicode.
+0000e930: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000e940: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
+0000e950: 696e 2022 5355 223a 0d0a 2020 2020 2020  in "SU":..      
+0000e960: 2020 2020 2020 2020 2020 6966 206e 702e            if np.
+0000e970: 6973 7363 616c 6172 2874 6573 745f 656c  isscalar(test_el
+0000e980: 656d 656e 7473 293a 0d0a 2020 2020 2020  ements):..      
+0000e990: 2020 2020 2020 2020 2020 2020 2020 7465                te
+0000e9a0: 7374 5f65 6c65 6d65 6e74 7320 3d20 6e70  st_elements = np
+0000e9b0: 2e61 7361 7272 6179 285b 7465 7374 5f65  .asarray([test_e
+0000e9c0: 6c65 6d65 6e74 735d 2c20 6474 7970 653d  lements], dtype=
+0000e9d0: 7365 6c66 2e64 7479 7065 2e63 6861 7229  self.dtype.char)
+0000e9e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e9f0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0000ea00: 2020 2020 2020 2020 2020 2020 2074 6573               tes
+0000ea10: 745f 656c 656d 656e 7473 203d 206e 702e  t_elements = np.
+0000ea20: 6173 6172 7261 7928 7465 7374 5f65 6c65  asarray(test_ele
+0000ea30: 6d65 6e74 732c 2064 7479 7065 3d73 656c  ments, dtype=sel
+0000ea40: 662e 6474 7970 652e 6368 6172 290d 0a20  f.dtype.char).. 
+0000ea50: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000ea60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ea70: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000ea80: 7465 7374 5f65 6c65 6d65 6e74 732c 2074  test_elements, t
+0000ea90: 7570 6c65 293a 0d0a 2020 2020 2020 2020  uple):..        
+0000eaa0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0000eab0: 6520 5661 6c75 6545 7272 6f72 280d 0a20  e ValueError(.. 
+0000eac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ead0: 2020 2020 2020 2022 6973 696e 2064 6f65         "isin doe
+0000eae0: 7320 6e6f 7420 6375 7272 656e 746c 7920  s not currently 
+0000eaf0: 7375 7070 6f72 7420 7475 706c 6573 2e20  support tuples. 
+0000eb00: 2049 6e20 7468 6520 6675 7475 7265 2061   In the future a
+0000eb10: 2074 7570 6c65 2077 696c 6c20 6265 2075   tuple will be u
+0000eb20: 7365 6420 746f 2072 6570 7265 7365 6e74  sed to represent
+0000eb30: 2061 206d 756c 7469 2d6b 6579 2e22 0d0a   a multi-key."..
+0000eb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eb50: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+0000eb60: 2020 2020 2020 2074 6573 745f 656c 656d         test_elem
+0000eb70: 656e 7473 203d 2072 632e 4173 4661 7374  ents = rc.AsFast
+0000eb80: 4172 7261 7928 7465 7374 5f65 6c65 6d65  Array(test_eleme
+0000eb90: 6e74 7329 0d0a 0d0a 2020 2020 2020 2020  nts)....        
+0000eba0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+0000ebb0: 2020 2320 6f70 7469 6d69 7a61 7469 6f6e    # optimization
+0000ebc0: 3a20 6966 2077 6520 6861 7665 206a 7573  : if we have jus
+0000ebd0: 7420 6f6e 6520 656c 656d 656e 742c 2077  t one element, w
+0000ebe0: 6520 6361 6e20 6a75 7374 2070 6172 616c  e can just paral
+0000ebf0: 6c65 6c20 636f 6d70 6172 6520 7468 6174  lel compare that
+0000ec00: 206f 6e65 2065 6c65 6d65 6e74 0d0a 2020   one element..  
+0000ec10: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+0000ec20: 2874 6573 745f 656c 656d 656e 7473 2920  (test_elements) 
+0000ec30: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
+0000ec40: 2020 2020 2020 2023 2073 7472 696e 6720         # string 
+0000ec50: 636f 6d70 6172 6973 6f6e 2074 6f20 696e  comparison to in
+0000ec60: 7420 7769 6c6c 2066 6169 6c0d 0a20 2020  t will fail..   
+0000ec70: 2020 2020 2020 2020 2020 2020 2072 6573               res
+0000ec80: 756c 7420 3d20 7365 6c66 203d 3d20 7465  ult = self == te
+0000ec90: 7374 5f65 6c65 6d65 6e74 735b 305d 0d0a  st_elements[0]..
+0000eca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ecb0: 2320 6368 6563 6b20 666f 7220 6661 696c  # check for fail
+0000ecc0: 6564 2072 6573 756c 740d 0a20 2020 2020  ed result..     
+0000ecd0: 2020 2020 2020 2020 2020 2069 6620 6e70             if np
+0000ece0: 2e69 7373 6361 6c61 7228 7265 7375 6c74  .isscalar(result
+0000ecf0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000ed00: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0000ed10: 2069 736d 656d 6265 7228 7365 6c66 2c20   ismember(self, 
+0000ed20: 7465 7374 5f65 6c65 6d65 6e74 7329 5b30  test_elements)[0
+0000ed30: 5d0d 0a20 2020 2020 2020 2020 2020 2065  ]..            e
+0000ed40: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0000ed50: 2020 2020 2020 7265 7375 6c74 203d 2069        result = i
+0000ed60: 736d 656d 6265 7228 7365 6c66 2c20 7465  smember(self, te
+0000ed70: 7374 5f65 6c65 6d65 6e74 7329 5b30 5d0d  st_elements)[0].
+0000ed80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000ed90: 696e 7665 7274 3a0d 0a20 2020 2020 2020  invert:..       
+0000eda0: 2020 2020 2020 2020 206e 702e 6c6f 6769           np.logi
+0000edb0: 6361 6c5f 6e6f 7428 7265 7375 6c74 2c20  cal_not(result, 
+0000edc0: 6f75 743d 7265 7375 6c74 290d 0a20 2020  out=result)..   
+0000edd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000ede0: 7265 7375 6c74 0d0a 2020 2020 2020 2020  result..        
+0000edf0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+0000ee00: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+0000ee10: 2070 756e 7420 6e6f 6e2d 7375 7070 6f72   punt non-suppor
+0000ee20: 7465 6420 7479 7065 7320 746f 206e 756d  ted types to num
+0000ee30: 7079 0d0a 2020 2020 2020 2020 2020 2020  py..            
+0000ee40: 7265 7475 726e 206e 702e 6973 696e 2873  return np.isin(s
+0000ee50: 656c 662e 5f6e 702c 2074 6573 745f 656c  elf._np, test_el
+0000ee60: 656d 656e 7473 2c20 6173 7375 6d65 5f75  ements, assume_u
+0000ee70: 6e69 7175 653d 6173 7375 6d65 5f75 6e69  nique=assume_uni
+0000ee80: 7175 652c 2069 6e76 6572 743d 696e 7665  que, invert=inve
+0000ee90: 7274 290d 0a0d 0a20 2020 2023 202d 2d2d  rt)....    # ---
+0000eea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000eeb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000eec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000eed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000eee0: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+0000eef0: 6265 7477 6565 6e28 7365 6c66 2c20 6c6f  between(self, lo
+0000ef00: 772c 2068 6967 682c 2069 6e63 6c75 6465  w, high, include
+0000ef10: 5f6c 6f77 3a20 626f 6f6c 203d 2054 7275  _low: bool = Tru
+0000ef20: 652c 2069 6e63 6c75 6465 5f68 6967 683a  e, include_high:
+0000ef30: 2062 6f6f 6c20 3d20 4661 6c73 6529 202d   bool = False) -
+0000ef40: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
+0000ef50: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000ef60: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
+0000ef70: 6561 6e20 6046 6173 7441 7272 6179 6020  ean `FastArray` 
+0000ef80: 696e 6469 6361 7469 6e67 2077 6869 6368  indicating which
+0000ef90: 2069 6e70 7574 2076 616c 7565 7320 6172   input values ar
+0000efa0: 6520 696e 2061 2073 7065 6369 6669 6564  e in a specified
+0000efb0: 2069 6e74 6572 7661 6c2e 0d0a 0d0a 2020   interval.....  
+0000efc0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+0000efd0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0000efe0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6c6f  ----..        lo
+0000eff0: 773a 2073 6361 6c61 722c 2061 7272 6179  w: scalar, array
+0000f000: 0d0a 2020 2020 2020 2020 2020 2020 4c6f  ..            Lo
+0000f010: 7765 7220 626f 756e 6420 666f 7220 7468  wer bound for th
+0000f020: 6520 696e 7465 7276 616c 2e20 4966 2061  e interval. If a
+0000f030: 6e20 6172 7261 792c 206d 7573 7420 6265  n array, must be
+0000f040: 2074 6865 2073 616d 6520 7369 7a65 2061   the same size a
+0000f050: 7320 6073 656c 6660 2c20 616e 6420 636f  s `self`, and co
+0000f060: 6d70 6172 6973 6f6e 7320 6172 6520 646f  mparisons are do
+0000f070: 6e65 2065 6c65 6d65 6e74 7769 7365 2e0d  ne elementwise..
+0000f080: 0a20 2020 2020 2020 2068 6967 683a 2073  .        high: s
+0000f090: 6361 6c61 722c 2061 7272 6179 0d0a 2020  calar, array..  
+0000f0a0: 2020 2020 2020 2020 2020 5570 7065 7220            Upper 
+0000f0b0: 626f 756e 6420 666f 7220 7468 6520 696e  bound for the in
+0000f0c0: 7465 7276 616c 2e20 4966 2061 6e20 6172  terval. If an ar
+0000f0d0: 7261 792c 206d 7573 7420 6265 2074 6865  ray, must be the
+0000f0e0: 2073 616d 6520 7369 7a65 2061 7320 6073   same size as `s
+0000f0f0: 656c 6660 2c20 616e 6420 636f 6d70 6172  elf`, and compar
+0000f100: 6973 6f6e 7320 6172 6520 646f 6e65 2065  isons are done e
+0000f110: 6c65 6d65 6e74 7769 7365 2e0d 0a20 2020  lementwise...   
+0000f120: 2020 2020 2069 6e63 6c75 6465 5f6c 6f77       include_low
+0000f130: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0000f140: 5472 7565 0d0a 2020 2020 2020 2020 2020  True..          
+0000f150: 2020 5370 6563 6966 6965 7320 7768 6574    Specifies whet
+0000f160: 6865 7220 606c 6f77 6020 6973 2069 6e63  her `low` is inc
+0000f170: 6c75 6465 6420 7768 656e 2070 6572 666f  luded when perfo
+0000f180: 726d 696e 6720 636f 6d70 6172 6973 6f6e  rming comparison
+0000f190: 732e 0d0a 2020 2020 2020 2020 696e 636c  s...        incl
+0000f1a0: 7564 655f 6869 6768 3a20 626f 6f6c 2c20  ude_high: bool, 
+0000f1b0: 6465 6661 756c 7420 4661 6c73 650d 0a20  default False.. 
+0000f1c0: 2020 2020 2020 2020 2020 2053 7065 6369             Speci
+0000f1d0: 6669 6573 2077 6865 7468 6572 2060 6869  fies whether `hi
+0000f1e0: 6768 6020 6973 2069 6e63 6c75 6465 6420  gh` is included 
+0000f1f0: 7768 656e 2070 6572 666f 726d 696e 6720  when performing 
+0000f200: 636f 6d70 6172 6973 6f6e 732e 0d0a 0d0a  comparisons.....
+0000f210: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+0000f220: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000f230: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+0000f240: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
+0000f250: 2041 2062 6f6f 6c65 616e 2060 4661 7374   A boolean `Fast
+0000f260: 4172 7261 7960 2069 6e64 6963 6174 696e  Array` indicatin
+0000f270: 6720 7768 6963 6820 696e 7075 7420 7661  g which input va
+0000f280: 6c75 6573 2061 7265 2069 6e20 6120 7370  lues are in a sp
+0000f290: 6563 6966 6965 6420 696e 7465 7276 616c  ecified interval
+0000f2a0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
+0000f2b0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
+0000f2c0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0000f2d0: 2053 7065 6369 6679 2061 6e20 696e 7465   Specify an inte
+0000f2e0: 7276 616c 2075 7369 6e67 2073 6361 6c61  rval using scala
+0000f2f0: 7273 3a0d 0a0d 0a20 2020 2020 2020 203e  rs:....        >
+0000f300: 3e3e 2061 203d 2072 742e 4641 285b 392c  >> a = rt.FA([9,
+0000f310: 2032 2c20 332c 2035 2c20 382c 2039 2c20   2, 3, 5, 8, 9, 
+0000f320: 312c 2034 2c20 365d 290d 0a20 2020 2020  1, 4, 6])..     
+0000f330: 2020 203e 3e3e 2061 2e62 6574 7765 656e     >>> a.between
+0000f340: 2835 2c20 392c 2069 6e63 6c75 6465 5f6c  (5, 9, include_l
+0000f350: 6f77 3d46 616c 7365 2920 2023 2045 7863  ow=False)  # Exc
+0000f360: 6c75 6465 2060 3560 2028 6c65 6674 2065  lude `5` (left e
+0000f370: 6e64 706f 696e 7429 0d0a 2020 2020 2020  ndpoint)..      
+0000f380: 2020 4661 7374 4172 7261 7928 5b46 616c    FastArray([Fal
+0000f390: 7365 2c20 4661 6c73 652c 2046 616c 7365  se, False, False
+0000f3a0: 2c20 4661 6c73 652c 2020 5472 7565 2c20  , False,  True, 
+0000f3b0: 4661 6c73 652c 2046 616c 7365 2c20 4661  False, False, Fa
+0000f3c0: 6c73 652c 2020 5472 7565 5d29 0d0a 0d0a  lse,  True])....
+0000f3d0: 2020 2020 2020 2020 5370 6563 6966 7920          Specify 
+0000f3e0: 616e 2069 6e74 6572 7661 6c20 7573 696e  an interval usin
+0000f3f0: 6720 6172 7261 7973 3a0d 0a0d 0a20 2020  g arrays:....   
+0000f400: 2020 2020 203e 3e3e 2061 3220 3d20 7274       >>> a2 = rt
+0000f410: 2e46 4128 5b31 2c20 322c 2033 2c20 342c  .FA([1, 2, 3, 4,
+0000f420: 2035 5d29 0d0a 2020 2020 2020 2020 3e3e   5])..        >>
+0000f430: 3e20 6132 2e62 6574 7765 656e 285b 312c  > a2.between([1,
+0000f440: 2033 2c20 352c 2035 2c20 355d 2c20 5b32   3, 5, 5, 5], [2
+0000f450: 2c20 342c 2036 2c20 362c 2036 5d29 0d0a  , 4, 6, 6, 6])..
+0000f460: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000f470: 7928 5b20 5472 7565 2c20 4661 6c73 652c  y([ True, False,
+0000f480: 2046 616c 7365 2c20 4661 6c73 652c 2020   False, False,  
+0000f490: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
+0000f4a0: 2020 5370 6563 6966 7920 616e 2069 6e74    Specify an int
+0000f4b0: 6572 7661 6c20 6d69 7869 6e67 2073 6361  erval mixing sca
+0000f4c0: 6c61 7220 616e 6420 6172 7261 7920 626f  lar and array bo
+0000f4d0: 756e 6473 3a0d 0a0d 0a20 2020 2020 2020  unds:....       
+0000f4e0: 203e 3e3e 2061 3320 3d20 7274 2e46 4128   >>> a3 = rt.FA(
+0000f4f0: 5b31 2c20 322c 2033 2c20 342c 2035 5d29  [1, 2, 3, 4, 5])
+0000f500: 0d0a 2020 2020 2020 2020 3e3e 3e20 6133  ..        >>> a3
+0000f510: 2e62 6574 7765 656e 2832 2c20 5b32 2c20  .between(2, [2, 
+0000f520: 342c 2036 2c20 362c 2036 5d29 0d0a 2020  4, 6, 6, 6])..  
+0000f530: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+0000f540: 5b46 616c 7365 2c20 2054 7275 652c 2020  [False,  True,  
+0000f550: 5472 7565 2c20 2054 7275 652c 2020 5472  True,  True,  Tr
+0000f560: 7565 5d29 0d0a 2020 2020 2020 2020 2222  ue])..        ""
+0000f570: 220d 0a20 2020 2020 2020 206c 6f77 203d  "..        low =
+0000f580: 2061 7361 6e79 6172 7261 7928 6c6f 7729   asanyarray(low)
+0000f590: 0d0a 2020 2020 2020 2020 6869 6768 203d  ..        high =
+0000f5a0: 2061 7361 6e79 6172 7261 7928 6869 6768   asanyarray(high
+0000f5b0: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
+0000f5c0: 696e 636c 7564 655f 6c6f 773a 0d0a 2020  include_low:..  
+0000f5d0: 2020 2020 2020 2020 2020 7265 7420 3d20            ret = 
+0000f5e0: 7365 6c66 203e 3d20 6c6f 770d 0a20 2020  self >= low..   
+0000f5f0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0000f600: 2020 2020 2020 2020 7265 7420 3d20 7365          ret = se
+0000f610: 6c66 203e 206c 6f77 0d0a 2020 2020 2020  lf > low..      
+0000f620: 2020 6966 2069 6e63 6c75 6465 5f68 6967    if include_hig
+0000f630: 683a 0d0a 2020 2020 2020 2020 2020 2020  h:..            
+0000f640: 7265 7420 263d 2073 656c 6620 3c3d 2068  ret &= self <= h
+0000f650: 6967 680d 0a20 2020 2020 2020 2065 6c73  igh..        els
+0000f660: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000f670: 7265 7420 263d 2073 656c 6620 3c20 6869  ret &= self < hi
+0000f680: 6768 0d0a 2020 2020 2020 2020 7265 7475  gh..        retu
+0000f690: 726e 2072 6574 0d0a 0d0a 2020 2020 2320  rn ret....    # 
+0000f6a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f6b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f6c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f6d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f6e0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+0000f6f0: 6465 6620 7361 6d70 6c65 280d 0a20 2020  def sample(..   
+0000f700: 2020 2020 2073 656c 662c 0d0a 2020 2020       self,..    
+0000f710: 2020 2020 4e3a 2069 6e74 203d 2031 302c      N: int = 10,
+0000f720: 0d0a 2020 2020 2020 2020 6669 6c74 6572  ..        filter
+0000f730: 3a20 4f70 7469 6f6e 616c 5b6e 702e 6e64  : Optional[np.nd
+0000f740: 6172 7261 795d 203d 204e 6f6e 652c 0d0a  array] = None,..
+0000f750: 2020 2020 2020 2020 7365 6564 3a20 4f70          seed: Op
+0000f760: 7469 6f6e 616c 5b55 6e69 6f6e 5b69 6e74  tional[Union[int
+0000f770: 2c20 5365 7175 656e 6365 5b69 6e74 5d2c  , Sequence[int],
+0000f780: 206e 702e 7261 6e64 6f6d 2e53 6565 6453   np.random.SeedS
+0000f790: 6571 7565 6e63 652c 206e 702e 7261 6e64  equence, np.rand
+0000f7a0: 6f6d 2e47 656e 6572 6174 6f72 5d5d 203d  om.Generator]] =
+0000f7b0: 204e 6f6e 652c 0d0a 2020 2020 2920 2d3e   None,..    ) ->
+0000f7c0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+0000f7d0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0000f7e0: 2020 5265 7475 726e 2061 2067 6976 656e    Return a given
+0000f7f0: 206e 756d 6265 7220 6f66 2072 616e 646f   number of rando
+0000f800: 6d6c 7920 7365 6c65 6374 6564 2076 616c  mly selected val
+0000f810: 7565 7320 6672 6f6d 2061 2060 4661 7374  ues from a `Fast
+0000f820: 4172 7261 7960 2e0d 0a0d 0a20 2020 2020  Array`.....     
+0000f830: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+0000f840: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+0000f850: 2d0d 0a20 2020 2020 2020 204e 203a 2069  -..        N : i
+0000f860: 6e74 2c20 6465 6661 756c 7420 3130 0d0a  nt, default 10..
+0000f870: 2020 2020 2020 2020 2020 2020 4e75 6d62              Numb
+0000f880: 6572 206f 6620 7661 6c75 6573 2074 6f20  er of values to 
+0000f890: 7365 6c65 6374 2e20 5468 6520 656e 7469  select. The enti
+0000f8a0: 7265 2061 7272 6179 2069 7320 7265 7475  re array is retu
+0000f8b0: 726e 6564 2069 6620 604e 6020 6973 2067  rned if `N` is g
+0000f8c0: 7265 6174 6572 2074 6861 6e20 7468 6520  reater than the 
+0000f8d0: 7369 7a65 206f 6620 7468 6520 6172 7261  size of the arra
+0000f8e0: 792e 0d0a 2020 2020 2020 2020 6669 6c74  y...        filt
+0000f8f0: 6572 203a 2061 7272 6179 2028 626f 6f6c  er : array (bool
+0000f900: 206f 7220 696e 7429 2c20 6f70 7469 6f6e   or int), option
+0000f910: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
+0000f920: 4120 626f 6f6c 6561 6e20 6d61 736b 206f  A boolean mask o
+0000f930: 7220 696e 6465 7820 6172 7261 7920 746f  r index array to
+0000f940: 2066 696c 7465 7220 7661 6c75 6573 2062   filter values b
+0000f950: 6566 6f72 6520 7365 6c65 6374 696f 6e2e  efore selection.
+0000f960: 204e 6f74 6520 7468 6174 2075 6e74 696c   Note that until
+0000f970: 2061 2072 6570 6f72 7465 6420 6275 6720   a reported bug 
+0000f980: 6973 2066 6978 6564 2c20 6e6f 2065 7272  is fixed, no err
+0000f990: 6f72 2069 7320 7261 6973 6564 2061 6e64  or is raised and
+0000f9a0: 2075 6e65 7870 6563 7465 6420 7265 7375   unexpected resu
+0000f9b0: 6c74 7320 6d61 7920 6f63 6375 7220 7768  lts may occur wh
+0000f9c0: 656e 2061 2062 6f6f 6c65 616e 206d 6173  en a boolean mas
+0000f9d0: 6b20 6172 7261 7920 7769 7468 2061 206c  k array with a l
+0000f9e0: 656e 6774 6820 6469 6666 6572 656e 7420  ength different 
+0000f9f0: 6672 6f6d 2074 6861 7420 6f66 2074 6865  from that of the
+0000fa00: 2061 7272 6179 2069 7427 7320 6d61 736b   array it's mask
+0000fa10: 696e 6720 6973 2070 6173 7365 6420 6173  ing is passed as
+0000fa20: 2061 2066 696c 7465 722e 0d0a 2020 2020   a filter...    
+0000fa30: 2020 2020 7365 6564 203a 2069 6e74 206f      seed : int o
+0000fa40: 7220 6f74 6865 7220 7479 7065 732c 206f  r other types, o
+0000fa50: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
+0000fa60: 2020 2020 2041 2073 6565 6420 746f 2069       A seed to i
+0000fa70: 6e69 7469 616c 697a 6520 7468 6520 7261  nitialize the ra
+0000fa80: 6e64 6f6d 206e 756d 6265 7220 6765 6e65  ndom number gene
+0000fa90: 7261 746f 722e 2049 6620 6f6e 6520 6973  rator. If one is
+0000faa0: 206e 6f74 2070 726f 7669 6465 642c 2074   not provided, t
+0000fab0: 6865 2067 656e 6572 6174 6f72 2069 7320  he generator is 
+0000fac0: 696e 6974 6961 6c69 7a65 6420 7573 696e  initialized usin
+0000fad0: 6720 7261 6e64 6f6d 2064 6174 6120 6672  g random data fr
+0000fae0: 6f6d 2074 6865 204f 532e 2046 6f72 2064  om the OS. For d
+0000faf0: 6574 6169 6c73 2061 6e64 206f 7468 6572  etails and other
+0000fb00: 2061 6363 6570 7465 6420 7479 7065 732c   accepted types,
+0000fb10: 2073 6565 2074 6865 2060 7365 6564 6020   see the `seed` 
+0000fb20: 7061 7261 6d65 7465 7220 666f 7220 606e  parameter for `n
+0000fb30: 756d 7079 2e72 616e 646f 6d2e 6465 6661  umpy.random.defa
+0000fb40: 756c 745f 726e 6760 2e0d 0a0d 0a20 2020  ult_rng`.....   
+0000fb50: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+0000fb60: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+0000fb70: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0000fb80: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
+0000fb90: 6e65 7720 6046 6173 7441 7272 6179 6020  new `FastArray` 
+0000fba0: 636f 6e74 6169 6e69 6e67 2074 6865 2072  containing the r
+0000fbb0: 616e 646f 6d6c 7920 7365 6c65 6374 6564  andomly selected
+0000fbc0: 2076 616c 7565 732e 0d0a 0d0a 2020 2020   values.....    
+0000fbd0: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+0000fbe0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+0000fbf0: 2020 2020 2020 2020 2e44 6174 6173 6574          .Dataset
+0000fc00: 2e73 616d 706c 6520 3a20 5265 7475 726e  .sample : Return
+0000fc10: 2061 2073 7065 6369 6669 6564 206e 756d   a specified num
+0000fc20: 6265 7220 6f66 2072 616e 646f 6d6c 7920  ber of randomly 
+0000fc30: 7365 6c65 6374 6564 2072 6f77 7320 6672  selected rows fr
+0000fc40: 6f6d 2061 2060 2e44 6174 6173 6574 602e  om a `.Dataset`.
+0000fc50: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+0000fc60: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
+0000fc70: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0000fc80: 4e6f 2073 616d 706c 6520 7369 7a65 2073  No sample size s
+0000fc90: 7065 6369 6669 6564 3a0d 0a0d 0a20 2020  pecified:....   
+0000fca0: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
+0000fcb0: 4641 285b 312c 2032 2c20 332c 2034 2c20  FA([1, 2, 3, 4, 
+0000fcc0: 352c 2036 2c20 372c 2038 2c20 392c 2031  5, 6, 7, 8, 9, 1
+0000fcd0: 302c 2031 312c 2031 325d 290d 0a20 2020  0, 11, 12])..   
+0000fce0: 2020 2020 203e 3e3e 2061 2e73 616d 706c       >>> a.sampl
+0000fcf0: 6528 2920 2023 2031 3020 7261 6e64 6f6d  e()  # 10 random
+0000fd00: 6c79 2073 656c 6563 7465 6420 7661 6c75  ly selected valu
+0000fd10: 6573 2072 6574 7572 6e65 642e 0d0a 2020  es returned...  
+0000fd20: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+0000fd30: 5b20 312c 2020 322c 2020 332c 2020 342c  [ 1,  2,  3,  4,
+0000fd40: 2020 352c 2020 362c 2020 372c 2020 392c    5,  6,  7,  9,
+0000fd50: 2031 302c 2031 315d 2920 2023 2052 616e   10, 11])  # Ran
+0000fd60: 646f 6d0d 0a0d 0a20 2020 2020 2020 2053  dom....        S
+0000fd70: 616d 706c 6520 3320 7661 6c75 6573 3a0d  ample 3 values:.
+0000fd80: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+0000fd90: 203d 2072 742e 4641 285b 312c 2032 2c20   = rt.FA([1, 2, 
+0000fda0: 332c 2034 2c20 352c 2036 2c20 372c 2038  3, 4, 5, 6, 7, 8
+0000fdb0: 2c20 392c 2031 302c 2031 312c 2031 325d  , 9, 10, 11, 12]
+0000fdc0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0000fdd0: 2e73 616d 706c 6528 3329 0d0a 2020 2020  .sample(3)..    
+0000fde0: 2020 2020 4661 7374 4172 7261 7928 5b31      FastArray([1
+0000fdf0: 2c20 342c 2039 5d29 2020 2320 5261 6e64  , 4, 9])  # Rand
+0000fe00: 6f6d 0d0a 0d0a 2020 2020 2020 2020 5370  om....        Sp
+0000fe10: 6563 6966 7920 6120 7361 6d70 6c65 2073  ecify a sample s
+0000fe20: 697a 6520 6c61 7267 6572 2074 6861 6e20  ize larger than 
+0000fe30: 7468 6520 6172 7261 793a 0d0a 0d0a 2020  the array:....  
+0000fe40: 2020 2020 2020 3e3e 3e20 6132 203d 2072        >>> a2 = r
+0000fe50: 742e 4641 285b 312c 2032 2c20 332c 2034  t.FA([1, 2, 3, 4
+0000fe60: 2c20 355d 290d 0a20 2020 2020 2020 203e  , 5])..        >
+0000fe70: 3e3e 2061 322e 7361 6d70 6c65 2831 3030  >> a2.sample(100
+0000fe80: 2920 2023 2054 6865 2065 6e74 6972 6520  )  # The entire 
+0000fe90: 6172 7261 7920 6973 2072 6574 7572 6e65  array is returne
+0000fea0: 642e 0d0a 2020 2020 2020 2020 4661 7374  d...        Fast
+0000feb0: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+0000fec0: 342c 2035 5d29 0d0a 0d0a 2020 2020 2020  4, 5])....      
+0000fed0: 2020 5370 6563 6966 7920 616e 2069 6e64    Specify an ind
+0000fee0: 6578 2061 7272 6179 2066 6f72 2066 696c  ex array for fil
+0000fef0: 7465 7269 6e67 3a0d 0a0d 0a20 2020 2020  tering:....     
+0000ff00: 2020 203e 3e3e 2061 3320 3d20 7274 2e46     >>> a3 = rt.F
+0000ff10: 4128 5b27 5453 4c41 272c 2741 4d5a 4e27  A(['TSLA','AMZN'
+0000ff20: 2c27 4942 4d27 2c20 2753 5059 272c 2027  ,'IBM', 'SPY', '
+0000ff30: 474d 4527 2c20 2741 4150 4c27 2c20 2746  GME', 'AAPL', 'F
+0000ff40: 4227 2c20 2747 4f4f 4727 2c20 274d 5346  B', 'GOOG', 'MSF
+0000ff50: 5427 2c20 2755 4245 5227 5d29 2020 2320  T', 'UBER'])  # 
+0000ff60: 4372 6561 7465 2073 616d 706c 6520 6461  Create sample da
+0000ff70: 7461 2e0d 0a20 2020 2020 2020 203e 3e3e  ta...        >>>
+0000ff80: 2066 696c 7465 7220 3d20 7274 2e46 4128   filter = rt.FA(
+0000ff90: 5b30 2c20 312c 2033 2c20 375d 2920 2023  [0, 1, 3, 7])  #
+0000ffa0: 2053 7065 6369 6679 2069 6e64 6963 6573   Specify indices
+0000ffb0: 206f 6620 6133 2074 6f20 7461 6b65 2074   of a3 to take t
+0000ffc0: 6865 2073 616d 706c 6520 6672 6f6d 2e0d  he sample from..
+0000ffd0: 0a20 2020 2020 2020 203e 3e3e 2061 332e  .        >>> a3.
+0000ffe0: 7361 6d70 6c65 2832 2c20 6669 6c74 6572  sample(2, filter
+0000fff0: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
+00010000: 7272 6179 285b 6227 5453 4c41 272c 2062  rray([b'TSLA', b
+00010010: 2747 4f4f 4727 5d2c 2064 7479 7065 3d27  'GOOG'], dtype='
+00010020: 7c53 3427 2920 2023 2052 616e 646f 6d0d  |S4')  # Random.
+00010030: 0a0d 0a20 2020 2020 2020 2053 7065 6369  ...        Speci
+00010040: 6679 2061 2062 6f6f 6c65 616e 206d 6173  fy a boolean mas
+00010050: 6b20 6172 7261 7920 666f 7220 6669 6c74  k array for filt
+00010060: 6572 696e 673a 0d0a 0d0a 2020 2020 2020  ering:....      
+00010070: 2020 3e3e 3e20 6133 2e73 616d 706c 6528    >>> a3.sample(
+00010080: 382c 2066 696c 7465 723d 7274 2e46 4128  8, filter=rt.FA(
+00010090: 6133 2021 3d20 2753 5059 2729 290d 0a20  a3 != 'SPY')).. 
+000100a0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+000100b0: 285b 6227 5453 4c41 272c 2062 2749 424d  ([b'TSLA', b'IBM
+000100c0: 272c 2062 2747 4d45 272c 2062 2741 4150  ', b'GME', b'AAP
+000100d0: 4c27 2c20 6227 4642 272c 2062 2747 4f4f  L', b'FB', b'GOO
+000100e0: 4727 2c20 6227 4d53 4654 272c 0d0a 2020  G', b'MSFT',..  
+000100f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010100: 2062 2755 4245 5227 5d2c 2064 7479 7065   b'UBER'], dtype
+00010110: 3d27 7c53 3427 2920 2023 2052 616e 646f  ='|S4')  # Rando
+00010120: 6d0d 0a20 2020 2020 2020 2022 2222 0d0a  m..        """..
+00010130: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00010140: 616d 706c 6528 7365 6c66 2c20 4e3d 4e2c  ample(self, N=N,
+00010150: 2066 696c 7465 723d 6669 6c74 6572 2c20   filter=filter, 
+00010160: 7365 6564 3d73 6565 6429 0d0a 0d0a 2020  seed=seed)....  
+00010170: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00010180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000101a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000101b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+000101c0: 2020 2020 6465 6620 6475 706c 6963 6174      def duplicat
+000101d0: 6564 2873 656c 662c 206b 6565 703d 2266  ed(self, keep="f
+000101e0: 6972 7374 222c 2068 6967 685f 756e 6971  irst", high_uniq
+000101f0: 7565 3d46 616c 7365 2920 2d3e 2046 6173  ue=False) -> Fas
+00010200: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+00010210: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
+00010220: 7475 726e 2061 2062 6f6f 6c65 616e 2060  turn a boolean `
+00010230: 4661 7374 4172 7261 7960 2069 6e64 6963  FastArray` indic
+00010240: 6174 696e 6720 6054 7275 6560 2066 6f72  ating `True` for
+00010250: 2064 7570 6c69 6361 7465 2069 7465 6d73   duplicate items
+00010260: 2069 6e20 7468 6520 696e 7075 7420 6172   in the input ar
+00010270: 7261 792e 0d0a 0d0a 2020 2020 2020 2020  ray.....        
+00010280: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+00010290: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+000102a0: 2020 2020 2020 2020 6b65 6570 203a 207b          keep : {
+000102b0: 2766 6972 7374 272c 2027 6c61 7374 272c  'first', 'last',
+000102c0: 2027 4661 6c73 6527 7d2c 2064 6566 6175   'False'}, defau
+000102d0: 6c74 2027 6669 7273 7427 0d0a 2020 2020  lt 'first'..    
+000102e0: 2020 2020 2020 2020 2d20 2766 6972 7374          - 'first
+000102f0: 2720 3a20 4d61 726b 2065 6163 6820 6475  ' : Mark each du
+00010300: 706c 6963 6174 6520 6173 2060 5472 7565  plicate as `True
+00010310: 6020 6578 6365 7074 2066 6f72 2074 6865  ` except for the
+00010320: 2066 6972 7374 206f 6363 7572 7265 6e63   first occurrenc
+00010330: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00010340: 2d20 276c 6173 7427 203a 204d 6172 6b20  - 'last' : Mark 
+00010350: 6561 6368 2064 7570 6c69 6361 7465 2061  each duplicate a
+00010360: 7320 6054 7275 6560 2065 7863 6570 7420  s `True` except 
+00010370: 666f 7220 7468 6520 6c61 7374 206f 6363  for the last occ
+00010380: 7572 7265 6e63 652e 0d0a 2020 2020 2020  urrence...      
+00010390: 2020 2020 2020 2d20 2746 616c 7365 2720        - 'False' 
+000103a0: 3a20 4d61 726b 2061 6c6c 2064 7570 6c69  : Mark all dupli
+000103b0: 6361 7465 7320 6173 2060 5472 7565 602e  cates as `True`.
+000103c0: 0d0a 2020 2020 2020 2020 6869 6768 5f75  ..        high_u
+000103d0: 6e69 7175 6520 3a20 626f 6f6c 2c20 6465  nique : bool, de
+000103e0: 6661 756c 7420 6046 616c 7365 6020 2868  fault `False` (h
+000103f0: 6173 6869 6e67 290d 0a20 2020 2020 2020  ashing)..       
+00010400: 2020 2020 2043 6f6e 7472 6f6c 7320 7768       Controls wh
+00010410: 6574 6865 7220 7468 6520 6675 6e63 7469  ether the functi
+00010420: 6f6e 2075 7365 7320 6861 7368 696e 672d  on uses hashing-
+00010430: 206f 7220 736f 7274 696e 672d 6261 7365   or sorting-base
+00010440: 6420 6c6f 6769 6320 746f 2066 696e 6420  d logic to find 
+00010450: 756e 6971 7565 2076 616c 7565 7320 696e  unique values in
+00010460: 2074 6865 2069 6e70 7574 2061 7272 6179   the input array
+00010470: 2e0d 0a20 2020 2020 2020 2020 2020 2049  ...            I
+00010480: 6620 796f 7572 2064 6174 6120 6861 7320  f your data has 
+00010490: 6120 6869 6768 2070 726f 706f 7274 696f  a high proportio
+000104a0: 6e20 6f66 2075 6e69 7175 6520 7661 6c75  n of unique valu
+000104b0: 6573 2c20 7365 7420 746f 2060 5472 7565  es, set to `True
+000104c0: 6020 666f 7220 6661 7374 6572 2070 6572  ` for faster per
+000104d0: 666f 726d 616e 6365 2e0d 0a0d 0a20 2020  formance.....   
+000104e0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+000104f0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00010500: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00010510: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
+00010520: 626f 6f6c 6561 6e20 6046 6173 7441 7272  boolean `FastArr
+00010530: 6179 6020 696e 6469 6361 7469 6e67 2060  ay` indicating `
+00010540: 5472 7565 6020 666f 7220 6475 706c 6963  True` for duplic
+00010550: 6174 6520 6974 656d 7320 696e 2074 6865  ate items in the
+00010560: 2069 6e70 7574 2061 7272 6179 2e0d 0a0d   input array....
+00010570: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
+00010580: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
+00010590: 2d2d 2d0d 0a20 2020 2020 2020 2046 6173  ---..        Fas
+000105a0: 7441 7272 6179 2e6e 756e 6971 7565 203a  tArray.nunique :
+000105b0: 2052 6574 7572 6e73 2074 6865 206e 756d   Returns the num
+000105c0: 6265 7220 6f66 2075 6e69 7175 6520 7661  ber of unique va
+000105d0: 6c75 6573 2069 6e20 616e 2061 7272 6179  lues in an array
+000105e0: 2e0d 0a20 2020 2020 2020 202e 4461 7461  ...        .Data
+000105f0: 7365 742e 6475 706c 6963 6174 6564 203a  set.duplicated :
+00010600: 2052 6574 7572 6e73 2061 2062 6f6f 6c65   Returns a boole
+00010610: 616e 2060 4661 7374 4172 7261 7960 2069  an `FastArray` i
+00010620: 6e64 6963 6174 696e 6720 6054 7275 6560  ndicating `True`
+00010630: 2066 6f72 2064 7570 6c69 6361 7465 2072   for duplicate r
+00010640: 6f77 732e 0d0a 0d0a 2020 2020 2020 2020  ows.....        
+00010650: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+00010660: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+00010670: 2020 2020 4578 636c 7564 6520 7468 6520      Exclude the 
+00010680: 6669 7273 7420 6f63 6375 7272 656e 6365  first occurrence
+00010690: 206f 6620 6561 6368 2064 7570 6c69 6361   of each duplica
+000106a0: 7465 2028 7573 6520 7468 6520 6465 6661  te (use the defa
+000106b0: 756c 7420 606b 6565 7060 2076 616c 7565  ult `keep` value
+000106c0: 293a 0d0a 0d0a 2020 2020 2020 2020 3e3e  ):....        >>
+000106d0: 3e20 6120 3d20 7274 2e46 4128 5b31 2c20  > a = rt.FA([1, 
+000106e0: 322c 2033 2c20 342c 2032 2c20 372c 2038  2, 3, 4, 2, 7, 8
+000106f0: 2c20 382c 2033 5d29 0d0a 2020 2020 2020  , 8, 3])..      
+00010700: 2020 3e3e 3e20 610d 0a20 2020 2020 2020    >>> a..       
+00010710: 2046 6173 7441 7272 6179 285b 312c 2032   FastArray([1, 2
+00010720: 2c20 332c 2034 2c20 322c 2037 2c20 382c  , 3, 4, 2, 7, 8,
+00010730: 2038 2c20 335d 290d 0a20 2020 2020 2020   8, 3])..       
+00010740: 203e 3e3e 2061 2e64 7570 6c69 6361 7465   >>> a.duplicate
+00010750: 6428 290d 0a20 2020 2020 2020 2046 6173  d()..        Fas
+00010760: 7441 7272 6179 285b 4661 6c73 652c 2046  tArray([False, F
+00010770: 616c 7365 2c20 4661 6c73 652c 2046 616c  alse, False, Fal
+00010780: 7365 2c20 2054 7275 652c 2046 616c 7365  se,  True, False
+00010790: 2c20 4661 6c73 652c 2020 5472 7565 2c20  , False,  True, 
+000107a0: 2054 7275 655d 290d 0a0d 0a20 2020 2020   True])....     
+000107b0: 2020 204d 6172 6b20 616c 6c20 6475 706c     Mark all dupl
+000107c0: 6963 6174 6573 3a0d 0a0d 0a20 2020 2020  icates:....     
+000107d0: 2020 203e 3e3e 2061 2e64 7570 6c69 6361     >>> a.duplica
+000107e0: 7465 6428 6b65 6570 3d46 616c 7365 290d  ted(keep=False).
+000107f0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00010800: 6179 285b 4661 6c73 652c 2020 5472 7565  ay([False,  True
+00010810: 2c20 2054 7275 652c 2046 616c 7365 2c20  ,  True, False, 
+00010820: 2054 7275 652c 2046 616c 7365 2c20 2054   True, False,  T
+00010830: 7275 652c 2020 5472 7565 2c20 2054 7275  rue,  True,  Tru
+00010840: 655d 290d 0a20 2020 2020 2020 2022 2222  e])..        """
+00010850: 0d0a 2020 2020 2020 2020 6172 7220 3d20  ..        arr = 
+00010860: 7365 6c66 0d0a 0d0a 2020 2020 2020 2020  self....        
+00010870: 6966 206b 6565 7020 3d3d 2022 6c61 7374  if keep == "last
+00010880: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00010890: 6172 7220 3d20 6172 725b 3a3a 2d31 5d2e  arr = arr[::-1].
+000108a0: 636f 7079 2829 0d0a 0d0a 2020 2020 2020  copy()....      
+000108b0: 2020 656c 6966 206b 6565 7020 6973 206e    elif keep is n
+000108c0: 6f74 2046 616c 7365 2061 6e64 206b 6565  ot False and kee
+000108d0: 7020 213d 2022 6669 7273 7422 3a0d 0a20  p != "first":.. 
+000108e0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000108f0: 2056 616c 7565 4572 726f 7228 6627 6b65   ValueError(f'ke
+00010900: 6570 206d 7573 7420 6265 2065 6974 6865  ep must be eithe
+00010910: 7220 2266 6972 7374 222c 2022 6c61 7374  r "first", "last
+00010920: 2220 6f72 2046 616c 7365 2729 0d0a 0d0a  " or False')....
+00010930: 2020 2020 2020 2020 2320 6372 6561 7465          # create
+00010940: 2061 6e20 7265 7475 726e 2061 7272 6179   an return array
+00010950: 2061 6c6c 2073 6574 2074 6f20 5472 7565   all set to True
+00010960: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
+00010970: 203d 206f 6e65 7328 6c65 6e28 6172 7229   = ones(len(arr)
+00010980: 2c20 6474 7970 653d 6e70 2e62 6f6f 6c5f  , dtype=np.bool_
+00010990: 290d 0a0d 0a20 2020 2020 2020 2067 203d  )....        g =
+000109a0: 2047 726f 7570 696e 6728 6172 722e 5f66   Grouping(arr._f
+000109b0: 6120 6966 2068 6173 6174 7472 2861 7272  a if hasattr(arr
+000109c0: 2c20 225f 6661 2229 2065 6c73 6520 6172  , "_fa") else ar
+000109d0: 722c 206c 6578 3d68 6967 685f 756e 6971  r, lex=high_uniq
+000109e0: 7565 290d 0a0d 0a20 2020 2020 2020 2069  ue)....        i
+000109f0: 6620 6b65 6570 2069 7320 4661 6c73 653a  f keep is False:
+00010a00: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00010a10: 7365 6172 6368 2066 6f72 2067 726f 7570  search for group
+00010a20: 7320 7769 7468 2061 2063 6f75 6e74 206f  s with a count o
+00010a30: 6620 310d 0a20 2020 2020 2020 2020 2020  f 1..           
+00010a40: 2072 6573 756c 745b 672e 6966 6972 7374   result[g.ifirst
+00010a50: 6b65 795b 672e 6e63 6f75 6e74 6772 6f75  key[g.ncountgrou
+00010a60: 705b 313a 5d20 3d3d 2031 5d5d 203d 2046  p[1:] == 1]] = F
+00010a70: 616c 7365 0d0a 2020 2020 2020 2020 656c  alse..        el
+00010a80: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00010a90: 2072 6573 756c 745b 672e 6966 6972 7374   result[g.ifirst
+00010aa0: 6b65 795d 203d 2046 616c 7365 0d0a 0d0a  key] = False....
+00010ab0: 2020 2020 2020 2020 2020 2020 6966 206b              if k
+00010ac0: 6565 7020 3d3d 2022 6c61 7374 223a 0d0a  eep == "last":..
+00010ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010ae0: 7265 7375 6c74 203d 2072 6573 756c 745b  result = result[
+00010af0: 3a3a 2d31 5d2e 636f 7079 2829 0d0a 2020  ::-1].copy()..  
+00010b00: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00010b10: 756c 740d 0a0d 0a20 2020 2023 202d 2d2d  ult....    # ---
+00010b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010b60: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00010b70: 2073 6176 6528 0d0a 2020 2020 2020 2020   save(..        
+00010b80: 7365 6c66 2c0d 0a20 2020 2020 2020 2066  self,..        f
+00010b90: 696c 6570 6174 683a 2055 6e69 6f6e 5b73  ilepath: Union[s
+00010ba0: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
+00010bb0: 2c0d 0a20 2020 2020 2020 2073 6861 7265  ,..        share
+00010bc0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+00010bd0: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
+00010be0: 2063 6f6d 7072 6573 733a 2062 6f6f 6c20   compress: bool 
+00010bf0: 3d20 5472 7565 2c0d 0a20 2020 2020 2020  = True,..       
+00010c00: 206f 7665 7277 7269 7465 3a20 626f 6f6c   overwrite: bool
+00010c10: 203d 2054 7275 652c 0d0a 2020 2020 2020   = True,..      
+00010c20: 2020 6e61 6d65 3a20 4f70 7469 6f6e 616c    name: Optional
+00010c30: 5b73 7472 5d20 3d20 4e6f 6e65 2c0d 0a20  [str] = None,.. 
+00010c40: 2020 2029 202d 3e20 4e6f 6e65 3a0d 0a20     ) -> None:.. 
+00010c50: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00010c60: 2020 2020 5361 7665 2061 2073 696e 676c      Save a singl
+00010c70: 6520 6172 7261 7920 696e 2061 6e20 2e73  e array in an .s
+00010c80: 6473 2066 696c 652e 0d0a 0d0a 2020 2020  ds file.....    
+00010c90: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+00010ca0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00010cb0: 2d2d 0d0a 2020 2020 2020 2020 6669 6c65  --..        file
+00010cc0: 7061 7468 3a20 7374 7220 6f72 206f 732e  path: str or os.
+00010cd0: 5061 7468 4c69 6b65 0d0a 2020 2020 2020  PathLike..      
+00010ce0: 2020 7368 6172 6520 3a20 7374 722c 206f    share : str, o
+00010cf0: 7074 696f 6e61 6c2c 2064 6566 6175 6c74  ptional, default
+00010d00: 204e 6f6e 650d 0a20 2020 2020 2020 2063   None..        c
+00010d10: 6f6d 7072 6573 7320 3a20 626f 6f6c 2c20  ompress : bool, 
+00010d20: 6465 6661 756c 7420 5472 7565 0d0a 2020  default True..  
+00010d30: 2020 2020 2020 6f76 6572 7772 6974 6520        overwrite 
+00010d40: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+00010d50: 5472 7565 0d0a 2020 2020 2020 2020 6e61  True..        na
+00010d60: 6d65 203a 2073 7472 2c20 6f70 7469 6f6e  me : str, option
+00010d70: 616c 2c20 6465 6661 756c 7420 4e6f 6e65  al, default None
+00010d80: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+00010d90: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
+00010da0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00010db0: 7274 5f73 6473 2e73 6176 655f 7364 730d  rt_sds.save_sds.
+00010dc0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00010dd0: 2020 2020 2020 7361 7665 5f73 6473 2866        save_sds(f
+00010de0: 696c 6570 6174 682c 2073 656c 662c 2073  ilepath, self, s
+00010df0: 6861 7265 3d73 6861 7265 2c20 636f 6d70  hare=share, comp
+00010e00: 7265 7373 3d63 6f6d 7072 6573 732c 206f  ress=compress, o
+00010e10: 7665 7277 7269 7465 3d6f 7665 7277 7269  verwrite=overwri
+00010e20: 7465 2c20 6e61 6d65 3d6e 616d 6529 0d0a  te, name=name)..
+00010e30: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
 00010e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00010e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00010e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00010e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010e80: 0d0a 2020 2020 6465 6620 5f72 6564 7563  ..    def _reduc
-00010e90: 655f 6368 6563 6b28 7365 6c66 2c20 7265  e_check(self, re
-00010ea0: 6475 6365 4675 6e63 3a20 5245 4455 4345  duceFunc: REDUCE
-00010eb0: 5f46 554e 4354 494f 4e53 2c20 6e70 4675  _FUNCTIONS, npFu
-00010ec0: 6e63 2c20 2a61 7267 732c 202a 2a6b 7761  nc, *args, **kwa
-00010ed0: 7267 7329 3a0d 0a20 2020 2020 2020 2022  rgs):..        "
-00010ee0: 2222 0d0a 2020 2020 2020 2020 4172 6732  ""..        Arg2
-00010ef0: 3a20 6e70 4675 6e63 2070 6173 7320 696e  : npFunc pass in
-00010f00: 204e 6f6e 6520 6966 206e 6f20 6e75 6d70   None if no nump
-00010f10: 7920 6571 7569 7661 6c65 6e74 2066 756e  y equivalent fun
-00010f20: 6374 696f 6e0d 0a20 2020 2020 2020 2022  ction..        "
-00010f30: 2222 0d0a 2020 2020 2020 2020 6966 206e  ""..        if n
-00010f40: 7046 756e 6320 6973 206e 6f74 204e 6f6e  pFunc is not Non
-00010f50: 6520 616e 6420 2873 656c 662e 5f6b 7761  e and (self._kwa
-00010f60: 7267 5f63 6865 636b 282a 6172 6773 2c20  rg_check(*args, 
-00010f70: 2a2a 6b77 6172 6773 2920 6f72 206c 656e  **kwargs) or len
-00010f80: 2873 656c 662e 7368 6170 6529 2021 3d20  (self.shape) != 
-00010f90: 3129 3a0d 0a20 2020 2020 2020 2020 2020  1):..           
-00010fa0: 2023 2054 4f44 4f3a 2061 6464 2074 6f20   # TODO: add to 
-00010fb0: 6d61 7468 206c 6564 6765 720d 0a20 2020  math ledger..   
-00010fc0: 2020 2020 2020 2020 2023 2073 6574 2064           # set d
-00010fd0: 646f 663d 3120 6966 204e 4f54 2073 6574  dof=1 if NOT set
-00010fe0: 2077 6869 6368 2069 7320 4661 7374 4172   which is FastAr
-00010ff0: 7261 7920 6465 6661 756c 7420 746f 206d  ray default to m
-00011000: 6174 6368 206d 6174 6c61 622f 7061 6e64  atch matlab/pand
-00011010: 6173 0d0a 2020 2020 2020 2020 2020 2020  as..            
-00011020: 6966 2022 6464 6f66 2220 6e6f 7420 696e  if "ddof" not in
-00011030: 206b 7761 7267 7320 616e 6420 7265 6475   kwargs and redu
-00011040: 6365 4675 6e63 2069 6e20 5b0d 0a20 2020  ceFunc in [..   
-00011050: 2020 2020 2020 2020 2020 2020 2052 4544               RED
-00011060: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
-00011070: 4455 4345 5f56 4152 2c0d 0a20 2020 2020  DUCE_VAR,..     
-00011080: 2020 2020 2020 2020 2020 2052 4544 5543             REDUC
-00011090: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-000110a0: 4345 5f4e 414e 5641 522c 0d0a 2020 2020  CE_NANVAR,..    
-000110b0: 2020 2020 2020 2020 2020 2020 5245 4455              REDU
-000110c0: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
-000110d0: 5543 455f 5354 442c 0d0a 2020 2020 2020  UCE_STD,..      
-000110e0: 2020 2020 2020 2020 2020 5245 4455 4345            REDUCE
-000110f0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-00011100: 455f 4e41 4e53 5444 2c0d 0a20 2020 2020  E_NANSTD,..     
-00011110: 2020 2020 2020 205d 3a0d 0a20 2020 2020         ]:..     
-00011120: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
-00011130: 735b 2264 646f 6622 5d20 3d20 310d 0a0d  s["ddof"] = 1...
-00011140: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00011150: 756c 7420 3d20 6e70 4675 6e63 2873 656c  ult = npFunc(sel
-00011160: 662e 5f6e 702c 202a 6172 6773 2c20 2a2a  f._np, *args, **
-00011170: 6b77 6172 6773 290d 0a20 2020 2020 2020  kwargs)..       
-00011180: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-00011190: 6c74 0d0a 0d0a 2020 2020 2020 2020 7265  lt....        re
-000111a0: 7375 6c74 203d 2054 7970 6552 6567 6973  sult = TypeRegis
-000111b0: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
-000111c0: 5245 4455 4345 2873 656c 662c 2072 6564  REDUCE(self, red
-000111d0: 7563 6546 756e 6329 0d0a 0d0a 2020 2020  uceFunc)....    
-000111e0: 2020 2020 2320 4974 2773 2070 6f73 7369      # It's possi
-000111f0: 626c 6520 7468 6572 6520 7761 7320 6e6f  ble there was no
-00011200: 2072 6573 756c 7420 7265 7475 726e 6564   result returned
-00011210: 2066 726f 6d20 7468 6520 7265 6475 6374   from the reduct
-00011220: 696f 6e20 6675 6e63 7469 6f6e 3b0d 0a20  ion function;.. 
-00011230: 2020 2020 2020 2023 2065 2e67 2e20 6966         # e.g. if
-00011240: 2074 6865 2069 6e70 7574 2077 6173 2065   the input was e
-00011250: 6d70 7479 2e20 4966 2074 6865 2066 756e  mpty. If the fun
-00011260: 6374 696f 6e20 6265 696e 6720 6361 6c6c  ction being call
-00011270: 6564 2069 7320 7765 6c6c 2d64 6566 696e  ed is well-defin
-00011280: 6564 0d0a 2020 2020 2020 2020 2320 666f  ed..        # fo
-00011290: 7220 656d 7074 7920 6c69 7374 7320 2d2d  r empty lists --
-000112a0: 2069 2e65 2e20 6974 2069 7320 6120 7265   i.e. it is a re
-000112b0: 6475 6374 696f 6e20 6f70 6572 6174 696f  duction operatio
-000112c0: 6e20 7769 7468 2061 2064 6566 696e 6564  n with a defined
-000112d0: 0d0a 2020 2020 2020 2020 2320 6964 656e  ..        # iden
-000112e0: 7469 7479 2065 6c65 6d65 6e74 202d 2d20  tity element -- 
-000112f0: 7365 7420 7468 6520 7265 7375 6c74 2074  set the result t
-00011300: 6f20 7468 6520 6964 656e 7469 7479 2065  o the identity e
-00011310: 6c65 6d65 6e74 2073 6f20 7468 6520 7265  lement so the re
-00011320: 7374 206f 660d 0a20 2020 2020 2020 2023  st of..        #
-00011330: 2074 6865 206c 6f67 6963 2062 656c 6f77   the logic below
-00011340: 2077 696c 6c20 776f 726b 2063 6f72 7265   will work corre
-00011350: 6374 6c79 2e0d 0a20 2020 2020 2020 2023  ctly...        #
-00011360: 2049 6620 7468 6572 6520 6973 206e 6f20   If there is no 
-00011370: 6964 656e 7469 7479 2065 6c65 6d65 6e74  identity element
-00011380: 2066 6f72 2074 6869 7320 6f70 6572 6174   for this operat
-00011390: 696f 6e2c 2072 6169 7365 2061 6e20 6578  ion, raise an ex
-000113a0: 6365 7074 696f 6e20 746f 0d0a 2020 2020  ception to..    
-000113b0: 2020 2020 2320 6c65 7420 7468 6520 7573      # let the us
-000113c0: 6572 206b 6e6f 773b 2077 6527 6420 7261  er know; we'd ra
-000113d0: 6973 6520 616e 2065 7863 6570 7469 6f6e  ise an exception
-000113e0: 2062 656c 6f77 202a 616e 7977 6179 2a2c   below *anyway*,
-000113f0: 2061 6e64 2074 6869 7320 616c 6c6f 7773   and this allows
-00011400: 0d0a 2020 2020 2020 2020 2320 7573 2074  ..        # us t
-00011410: 6f20 7072 6f76 6964 6520 7468 6520 7573  o provide the us
-00011420: 6572 2077 6974 6820 6120 6d6f 7265 2d64  er with a more-d
-00011430: 6573 6372 6970 7469 7665 2f61 6374 696f  escriptive/actio
-00011440: 6e61 626c 6520 6572 726f 7220 6d65 7373  nable error mess
-00011450: 6167 652e 0d0a 2020 2020 2020 2020 6966  age...        if
-00011460: 2072 6573 756c 7420 6973 204e 6f6e 653a   result is None:
-00011470: 0d0a 2020 2020 2020 2020 2020 2020 6f70  ..            op
-00011480: 5f69 6465 6e74 6974 795f 7661 6c20 3d20  _identity_val = 
-00011490: 7479 7065 2873 656c 6629 2e5f 7265 6475  type(self)._redu
-000114a0: 6365 5f6f 705f 6964 656e 7469 7479 5f76  ce_op_identity_v
-000114b0: 616c 7565 2e67 6574 2872 6564 7563 6546  alue.get(reduceF
-000114c0: 756e 632c 204e 6f6e 6529 0d0a 2020 2020  unc, None)..    
-000114d0: 2020 2020 2020 2020 6966 206f 705f 6964          if op_id
-000114e0: 656e 7469 7479 5f76 616c 2069 7320 6e6f  entity_val is no
-000114f0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-00011500: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-00011510: 3d20 6f70 5f69 6465 6e74 6974 795f 7661  = op_identity_va
-00011520: 6c0d 0a20 2020 2020 2020 2020 2020 2065  l..            e
-00011530: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00011540: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-00011550: 6545 7272 6f72 280d 0a20 2020 2020 2020  eError(..       
-00011560: 2020 2020 2020 2020 2020 2020 2066 2252               f"R
-00011570: 6564 7563 7469 6f6e 2027 7b73 7472 2872  eduction '{str(r
-00011580: 6564 7563 6546 756e 6329 7d27 2064 6f65  educeFunc)}' doe
-00011590: 7320 6e6f 7420 6861 7665 2061 6e20 6964  s not have an id
-000115a0: 656e 7469 7479 2065 6c65 6d65 6e74 2073  entity element s
-000115b0: 6f20 6361 6e6e 6f74 2062 6520 636f 6d70  o cannot be comp
-000115c0: 7574 6564 206f 7665 7220 616e 2065 6d70  uted over an emp
-000115d0: 7479 2061 7272 6179 2e22 0d0a 2020 2020  ty array."..    
-000115e0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-000115f0: 0a20 2020 2020 2020 2023 2057 6173 2061  .        # Was a
-00011600: 6e20 6f75 7470 7574 2064 7479 7065 2077  n output dtype w
-00011610: 6173 2065 7870 6c69 6369 746c 7920 7370  as explicitly sp
-00011620: 6563 6966 6965 643f 0d0a 2020 2020 2020  ecified?..      
-00011630: 2020 6474 7970 6520 3d20 6b77 6172 6773    dtype = kwargs
-00011640: 2e67 6574 2822 6474 7970 6522 2c20 4e6f  .get("dtype", No
-00011650: 6e65 290d 0a20 2020 2020 2020 2069 6620  ne)..        if 
-00011660: 6474 7970 6520 6973 206e 6f74 204e 6f6e  dtype is not Non
-00011670: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00011680: 2320 7573 6572 2066 6f72 6365 6420 6474  # user forced dt
-00011690: 7970 6520 7265 7475 726e 2076 616c 7565  ype return value
-000116a0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-000116b0: 7475 726e 2064 7479 7065 2872 6573 756c  turn dtype(resul
-000116c0: 7429 0d0a 0d0a 2020 2020 2020 2020 2320  t)....        # 
-000116d0: 7072 6573 6572 7665 2074 7970 6520 666f  preserve type fo
-000116e0: 7220 6d69 6e2f 6d61 782f 6e61 6e6d 696e  r min/max/nanmin
-000116f0: 2f6e 616e 6d61 780d 0a20 2020 2020 2020  /nanmax..       
-00011700: 2069 6620 7265 6475 6365 4675 6e63 2069   if reduceFunc i
-00011710: 6e20 5b0d 0a20 2020 2020 2020 2020 2020  n [..           
-00011720: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
-00011730: 532e 5245 4455 4345 5f4d 494e 2c0d 0a20  S.REDUCE_MIN,.. 
-00011740: 2020 2020 2020 2020 2020 2052 4544 5543             REDUC
-00011750: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-00011760: 4345 5f4e 414e 4d49 4e2c 0d0a 2020 2020  CE_NANMIN,..    
-00011770: 2020 2020 2020 2020 5245 4455 4345 5f46          REDUCE_F
-00011780: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
-00011790: 4d41 582c 0d0a 2020 2020 2020 2020 2020  MAX,..          
-000117a0: 2020 5245 4455 4345 5f46 554e 4354 494f    REDUCE_FUNCTIO
-000117b0: 4e53 2e52 4544 5543 455f 4e41 4e4d 4158  NS.REDUCE_NANMAX
-000117c0: 2c0d 0a20 2020 2020 2020 205d 3a0d 0a20  ,..        ]:.. 
-000117d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000117e0: 6e20 7365 6c66 2e64 7479 7065 2e74 7970  n self.dtype.typ
-000117f0: 6528 7265 7375 6c74 290d 0a0d 0a20 2020  e(result)....   
-00011800: 2020 2020 2023 2069 6e74 6572 6e61 6c6c       # internall
-00011810: 7920 6e75 6d70 7920 6578 7065 6374 7320  y numpy expects 
-00011820: 6120 6474 7970 6520 7265 7475 726e 6564  a dtype returned
-00011830: 2066 6f72 206e 616e 7374 6420 616e 6420   for nanstd and 
-00011840: 6f74 6865 7220 6361 6c63 756c 6174 696f  other calculatio
-00011850: 6e73 0d0a 2020 2020 2020 2020 6966 2069  ns..        if i
-00011860: 7369 6e73 7461 6e63 6528 7265 7375 6c74  sinstance(result
-00011870: 2c20 2869 6e74 2c20 6e70 2e69 6e74 6567  , (int, np.integ
-00011880: 6572 2929 3a0d 0a20 2020 2020 2020 2020  er)):..         
-00011890: 2020 2023 2066 6f72 2075 696e 7436 342c     # for uint64,
-000118a0: 2074 6865 2068 6967 6820 6269 7420 6d75   the high bit mu
-000118b0: 7374 2062 6520 7072 6573 6572 7665 640d  st be preserved.
-000118c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000118d0: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
-000118e0: 696e 204e 756d 7079 4368 6172 5479 7065  in NumpyCharType
-000118f0: 732e 556e 7369 676e 6564 496e 7465 6765  s.UnsignedIntege
-00011900: 7236 343a 0d0a 2020 2020 2020 2020 2020  r64:..          
-00011910: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-00011920: 7569 6e74 3634 2872 6573 756c 7429 0d0a  uint64(result)..
-00011930: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00011940: 726e 206e 702e 696e 7436 3428 7265 7375  rn np.int64(resu
-00011950: 6c74 290d 0a0d 0a20 2020 2020 2020 2072  lt)....        r
-00011960: 6574 7572 6e20 6e70 2e66 6c6f 6174 3634  eturn np.float64
-00011970: 2872 6573 756c 7429 0d0a 0d0a 2020 2020  (result)....    
-00011980: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
-00011990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000119a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000119b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000119c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-000119d0: 2020 2064 6566 205f 636f 6d70 6172 655f     def _compare_
-000119e0: 6368 6563 6b28 7365 6c66 2c20 6675 6e63  check(self, func
-000119f0: 2c20 6f74 6865 7229 202d 3e20 4661 7374  , other) -> Fast
-00011a00: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00011a10: 2320 6120 7573 6572 206d 6967 6874 2074  # a user might t
-00011a20: 7970 6520 696e 2061 2073 7472 696e 6720  ype in a string 
-00011a30: 616e 6420 7765 2077 616e 7420 6120 6279  and we want a by
-00011a40: 7465 7320 7374 7269 6e67 0d0a 2020 2020  tes string..    
-00011a50: 2020 2020 6966 2073 656c 662e 6474 7970      if self.dtyp
-00011a60: 652e 6368 6172 2069 6e20 2253 5522 3a0d  e.char in "SU":.
-00011a70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00011a80: 6973 696e 7374 616e 6365 286f 7468 6572  isinstance(other
-00011a90: 2c20 7374 7229 3a0d 0a20 2020 2020 2020  , str):..       
-00011aa0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00011ab0: 2e64 7479 7065 2e63 6861 7220 3d3d 2022  .dtype.char == "
-00011ac0: 5322 3a0d 0a20 2020 2020 2020 2020 2020  S":..           
-00011ad0: 2020 2020 2020 2020 2023 2077 6520 6172           # we ar
-00011ae0: 6520 6279 7465 2073 7472 696e 6773 2062  e byte strings b
-00011af0: 7574 2073 6361 6c61 7220 756e 6963 6f64  ut scalar unicod
-00011b00: 6520 7061 7373 6564 2069 6e0d 0a20 2020  e passed in..   
-00011b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b20: 206f 7468 6572 203d 2073 7472 2e65 6e63   other = str.enc
-00011b30: 6f64 6528 6f74 6865 7229 0d0a 0d0a 2020  ode(other)....  
-00011b40: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00011b50: 6e73 7461 6e63 6528 6f74 6865 722c 206c  nstance(other, l
-00011b60: 6973 7429 3a0d 0a20 2020 2020 2020 2020  ist):..         
-00011b70: 2020 2020 2020 2023 2063 6f6e 7665 7274         # convert
-00011b80: 2074 6865 206c 6973 7420 736f 2061 2063   the list so a c
-00011b90: 6f6d 7061 7269 736f 6e20 6361 6e20 6265  omparison can be
-00011ba0: 206d 6164 6520 746f 2074 6865 2062 7974   made to the byt
-00011bb0: 6520 7374 7269 6e67 2061 7272 6179 0d0a  e string array..
-00011bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011bd0: 6f74 6865 7220 3d20 4661 7374 4172 7261  other = FastArra
-00011be0: 7928 6f74 6865 7229 0d0a 0d0a 2020 2020  y(other)....    
-00011bf0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00011c00: 2066 756e 6328 6f74 6865 7229 0d0a 0d0a   func(other)....
-00011c10: 2020 2020 2020 2020 2020 2020 2320 4e4f              # NO
-00011c20: 5445 3a20 6e75 6d70 7920 646f 6573 2063  TE: numpy does c
-00011c30: 616c 6c20 4641 2075 6675 6e63 2066 6f72  all FA ufunc for
-00011c40: 2073 7472 696e 6773 0d0a 2020 2020 2020   strings..      
-00011c50: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-00011c60: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
-00011c70: 4661 7374 4172 7261 7929 2061 6e64 2069  FastArray) and i
-00011c80: 7369 6e73 7461 6e63 6528 7265 7375 6c74  sinstance(result
-00011c90: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
-00011ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011cb0: 7265 7375 6c74 203d 2072 6573 756c 742e  result = result.
-00011cc0: 7669 6577 2846 6173 7441 7272 6179 290d  view(FastArray).
-00011cd0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00011ce0: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
-00011cf0: 2020 2020 2020 7265 7375 6c74 203d 2066        result = f
-00011d00: 756e 6328 6f74 6865 7229 0d0a 2020 2020  unc(other)..    
-00011d10: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-00011d20: 740d 0a0d 0a20 2020 2064 6566 205f 5f6e  t....    def __n
-00011d30: 655f 5f28 7365 6c66 2c20 6f74 6865 7229  e__(self, other)
-00011d40: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00011d50: 6e20 7365 6c66 2e5f 636f 6d70 6172 655f  n self._compare_
-00011d60: 6368 6563 6b28 7375 7065 7228 292e 5f5f  check(super().__
-00011d70: 6e65 5f5f 2c20 6f74 6865 7229 0d0a 0d0a  ne__, other)....
-00011d80: 2020 2020 6465 6620 5f5f 6571 5f5f 2873      def __eq__(s
-00011d90: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
-00011da0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00011db0: 662e 5f63 6f6d 7061 7265 5f63 6865 636b  f._compare_check
-00011dc0: 2873 7570 6572 2829 2e5f 5f65 715f 5f2c  (super().__eq__,
-00011dd0: 206f 7468 6572 290d 0a0d 0a20 2020 2064   other)....    d
-00011de0: 6566 205f 5f67 655f 5f28 7365 6c66 2c20  ef __ge__(self, 
-00011df0: 6f74 6865 7229 3a0d 0a20 2020 2020 2020  other):..       
-00011e00: 2072 6574 7572 6e20 7365 6c66 2e5f 636f   return self._co
-00011e10: 6d70 6172 655f 6368 6563 6b28 7375 7065  mpare_check(supe
-00011e20: 7228 292e 5f5f 6765 5f5f 2c20 6f74 6865  r().__ge__, othe
-00011e30: 7229 0d0a 0d0a 2020 2020 6465 6620 5f5f  r)....    def __
-00011e40: 6774 5f5f 2873 656c 662c 206f 7468 6572  gt__(self, other
-00011e50: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-00011e60: 726e 2073 656c 662e 5f63 6f6d 7061 7265  rn self._compare
-00011e70: 5f63 6865 636b 2873 7570 6572 2829 2e5f  _check(super()._
-00011e80: 5f67 745f 5f2c 206f 7468 6572 290d 0a0d  _gt__, other)...
-00011e90: 0a20 2020 2064 6566 205f 5f6c 655f 5f28  .    def __le__(
-00011ea0: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
-00011eb0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00011ec0: 6c66 2e5f 636f 6d70 6172 655f 6368 6563  lf._compare_chec
-00011ed0: 6b28 7375 7065 7228 292e 5f5f 6c65 5f5f  k(super().__le__
-00011ee0: 2c20 6f74 6865 7229 0d0a 0d0a 2020 2020  , other)....    
-00011ef0: 6465 6620 5f5f 6c74 5f5f 2873 656c 662c  def __lt__(self,
-00011f00: 206f 7468 6572 293a 0d0a 2020 2020 2020   other):..      
-00011f10: 2020 7265 7475 726e 2073 656c 662e 5f63    return self._c
-00011f20: 6f6d 7061 7265 5f63 6865 636b 2873 7570  ompare_check(sup
-00011f30: 6572 2829 2e5f 5f6c 745f 5f2c 206f 7468  er().__lt__, oth
-00011f40: 6572 290d 0a0d 0a20 2020 2064 6566 2065  er)....    def e
-00011f50: 7128 7365 6c66 2c20 6f74 6865 7229 3a0d  q(self, other):.
-00011f60: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00011f70: 7365 6c66 2e5f 5f65 715f 5f28 6f74 6865  self.__eq__(othe
-00011f80: 7229 0d0a 0d0a 2020 2020 6465 6620 6e65  r)....    def ne
-00011f90: 2873 656c 662c 206f 7468 6572 293a 0d0a  (self, other):..
-00011fa0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00011fb0: 656c 662e 5f5f 6e65 5f5f 286f 7468 6572  elf.__ne__(other
-00011fc0: 290d 0a0d 0a20 2020 2064 6566 2067 6528  )....    def ge(
-00011fd0: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
-00011fe0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00011ff0: 6c66 2e5f 5f67 655f 5f28 6f74 6865 7229  lf.__ge__(other)
-00012000: 0d0a 0d0a 2020 2020 6465 6620 6c65 2873  ....    def le(s
-00012010: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
-00012020: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00012030: 662e 5f5f 6c65 5f5f 286f 7468 6572 290d  f.__le__(other).
-00012040: 0a0d 0a20 2020 2064 6566 2067 7428 7365  ...    def gt(se
-00012050: 6c66 2c20 6f74 6865 7229 3a0d 0a20 2020  lf, other):..   
-00012060: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00012070: 2e5f 5f67 745f 5f28 6f74 6865 7229 0d0a  .__gt__(other)..
-00012080: 0d0a 2020 2020 6465 6620 6c74 2873 656c  ..    def lt(sel
-00012090: 662c 206f 7468 6572 293a 0d0a 2020 2020  f, other):..    
-000120a0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-000120b0: 5f5f 6c74 5f5f 286f 7468 6572 290d 0a0d  __lt__(other)...
-000120c0: 0a20 2020 2061 6464 203d 206e 702e 6e64  .    add = np.nd
-000120d0: 6172 7261 792e 5f5f 6164 645f 5f0d 0a20  array.__add__.. 
-000120e0: 2020 2073 7562 203d 206e 702e 6e64 6172     sub = np.ndar
-000120f0: 7261 792e 5f5f 7375 625f 5f0d 0a20 2020  ray.__sub__..   
-00012100: 206d 756c 203d 206e 702e 6e64 6172 7261   mul = np.ndarra
-00012110: 792e 5f5f 6d75 6c5f 5f0d 0a20 2020 2064  y.__mul__..    d
-00012120: 6976 203d 206e 702e 6e64 6172 7261 792e  iv = np.ndarray.
-00012130: 5f5f 7472 7565 6469 765f 5f0d 0a20 2020  __truediv__..   
-00012140: 2066 6c6f 6f72 6469 7620 3d20 6e70 2e6e   floordiv = np.n
-00012150: 6461 7272 6179 2e5f 5f66 6c6f 6f72 6469  darray.__floordi
-00012160: 765f 5f0d 0a20 2020 2070 6f77 203d 206e  v__..    pow = n
-00012170: 702e 6e64 6172 7261 792e 5f5f 706f 775f  p.ndarray.__pow_
-00012180: 5f0d 0a20 2020 206d 6f64 203d 206e 702e  _..    mod = np.
-00012190: 6e64 6172 7261 792e 5f5f 6d6f 645f 5f0d  ndarray.__mod__.
-000121a0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-000121b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000121c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000121d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000121e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000121f0: 2d2d 2d2d 0d0a 2020 2020 6465 6620 7374  ----..    def st
-00012200: 725f 6170 7065 6e64 2873 656c 662c 206f  r_append(self, o
-00012210: 7468 6572 293a 0d0a 2020 2020 2020 2020  ther):..        
-00012220: 6966 2073 656c 662e 6474 7970 652e 6e75  if self.dtype.nu
-00012230: 6d20 3d3d 206f 7468 6572 2e64 7479 7065  m == other.dtype
-00012240: 2e6e 756d 3a0d 0a20 2020 2020 2020 2020  .num:..         
-00012250: 2020 2066 756e 6320 3d20 5479 7065 5265     func = TypeRe
-00012260: 6769 7374 6572 2e4d 6174 684c 6564 6765  gister.MathLedge
-00012270: 722e 5f42 4153 4943 4d41 5448 5f54 574f  r._BASICMATH_TWO
-00012280: 5f49 4e50 5554 530d 0a20 2020 2020 2020  _INPUTS..       
-00012290: 2020 2020 2072 6574 7572 6e20 6675 6e63       return func
-000122a0: 2828 7365 6c66 2c20 6f74 6865 7229 2c20  ((self, other), 
-000122b0: 4d41 5448 5f4f 5045 5241 5449 4f4e 2e41  MATH_OPERATION.A
-000122c0: 4444 2c20 7365 6c66 2e64 7479 7065 2e6e  DD, self.dtype.n
-000122d0: 756d 290d 0a20 2020 2020 2020 2072 6169  um)..        rai
-000122e0: 7365 2054 7970 6545 7272 6f72 2822 6361  se TypeError("ca
-000122f0: 6e6e 6f74 2063 6f6e 6361 7422 290d 0a0d  nnot concat")...
-00012300: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-00012310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012350: 2d2d 0d0a 2020 2020 6465 6620 7371 7565  --..    def sque
-00012360: 657a 6528 7365 6c66 2c20 2a61 7267 732c  eze(self, *args,
-00012370: 202a 2a6b 7761 7267 7329 3a0d 0a20 2020   **kwargs):..   
-00012380: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00012390: 2e5f 6e70 2e73 7175 6565 7a65 282a 6172  ._np.squeeze(*ar
-000123a0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
-000123b0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-000123c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000123d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000123e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000123f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012400: 2d2d 0d0a 2020 2020 6465 6620 6973 636f  --..    def isco
-00012410: 6d70 7574 6162 6c65 2873 656c 6629 202d  mputable(self) -
-00012420: 3e20 626f 6f6c 3a0d 0a20 2020 2020 2020  > bool:..       
-00012430: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
-00012440: 7374 6572 2e69 735f 636f 6d70 7574 6162  ster.is_computab
-00012450: 6c65 2873 656c 6629 0d0a 0d0a 2020 2020  le(self)....    
-00012460: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00012470: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00012480: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
-00012490: 2020 2023 206e 6570 2d31 3820 6172 7261     # nep-18 arra
-000124a0: 7920 6675 6e63 7469 6f6e 2070 726f 746f  y function proto
-000124b0: 636f 6c20 696d 706c 656d 656e 7461 7469  col implementati
-000124c0: 6f6e 0d0a 2020 2020 2323 2323 2323 2323  on..    ########
-000124d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000124e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000124f0: 2323 2323 230d 0a20 2020 2040 636c 6173  #####..    @clas
-00012500: 736d 6574 686f 640d 0a20 2020 2064 6566  smethod..    def
-00012510: 205f 7079 5f6e 756d 6265 725f 746f 5f6e   _py_number_to_n
-00012520: 705f 6474 7970 6528 0d0a 2020 2020 2020  p_dtype(..      
-00012530: 2020 636c 732c 2076 616c 3a20 556e 696f    cls, val: Unio
-00012540: 6e5b 696e 742c 206e 702e 696e 7465 6765  n[int, np.intege
-00012550: 722c 204e 6f6e 655d 2c20 6474 7970 653a  r, None], dtype:
-00012560: 206e 702e 6474 7970 650d 0a20 2020 2029   np.dtype..    )
-00012570: 202d 3e20 556e 696f 6e5b 6e70 2e75 696e   -> Union[np.uin
-00012580: 742c 206e 702e 696e 7436 342c 206e 702e  t, np.int64, np.
-00012590: 666c 6f61 7436 342c 204e 6f6e 655d 3a0d  float64, None]:.
-000125a0: 0a20 2020 2020 2020 2022 2222 436f 6e76  .        """Conv
-000125b0: 6572 7420 6120 7079 7468 6f6e 2074 7970  ert a python typ
-000125c0: 6520 746f 206e 756d 7079 2064 7479 7065  e to numpy dtype
-000125d0: 2e0d 0a20 2020 2020 2020 204f 6e6c 7920  ...        Only 
-000125e0: 6861 6e64 6c65 7320 696e 7465 6765 7273  handles integers
-000125f0: 2e22 2222 0d0a 2020 2020 2020 2020 6966  ."""..        if
-00012600: 2076 616c 2069 7320 6e6f 7420 4e6f 6e65   val is not None
-00012610: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00012620: 2069 6e74 6572 6e61 6c6c 7920 6e75 6d70   internally nump
-00012630: 7920 6578 7065 6374 7320 6120 6474 7970  y expects a dtyp
-00012640: 6520 7265 7475 726e 6564 2066 6f72 206e  e returned for n
-00012650: 616e 7374 6420 616e 6420 6f74 6865 7220  anstd and other 
-00012660: 6361 6c63 756c 6174 696f 6e73 0d0a 2020  calculations..  
-00012670: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00012680: 6e73 7461 6e63 6528 7661 6c2c 2028 696e  nstance(val, (in
-00012690: 742c 206e 702e 696e 7465 6765 7229 293a  t, np.integer)):
-000126a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000126b0: 2020 2320 666f 7220 7569 6e74 3634 2c20    # for uint64, 
-000126c0: 7468 6520 6869 6768 2062 6974 206d 7573  the high bit mus
-000126d0: 7420 6265 2070 7265 7365 7276 6564 0d0a  t be preserved..
-000126e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000126f0: 6966 2064 7479 7065 2e63 6861 7220 696e  if dtype.char in
-00012700: 204e 756d 7079 4368 6172 5479 7065 732e   NumpyCharTypes.
-00012710: 556e 7369 676e 6564 496e 7465 6765 7236  UnsignedInteger6
-00012720: 343a 0d0a 2020 2020 2020 2020 2020 2020  4:..            
-00012730: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-00012740: 702e 7569 6e74 3634 2876 616c 290d 0a20  p.uint64(val).. 
-00012750: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00012760: 6574 7572 6e20 6e70 2e69 6e74 3634 2876  eturn np.int64(v
-00012770: 616c 290d 0a20 2020 2020 2020 2020 2020  al)..           
-00012780: 2072 6574 7572 6e20 6e70 2e66 6c6f 6174   return np.float
-00012790: 3634 2876 616c 290d 0a20 2020 2020 2020  64(val)..       
-000127a0: 2072 6574 7572 6e20 7661 6c0d 0a0d 0a20   return val.... 
-000127b0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-000127c0: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
-000127d0: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
-000127e0: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-000127f0: 696f 6e28 6e70 2e61 7267 6d61 7829 0d0a  ion(np.argmax)..
-00012800: 2020 2020 6465 6620 5f61 7267 6d61 7828      def _argmax(
-00012810: 612c 2061 7869 733d 4e6f 6e65 2c20 6f75  a, axis=None, ou
-00012820: 743d 4e6f 6e65 293a 0d0a 2020 2020 2020  t=None):..      
-00012830: 2020 7265 7375 6c74 203d 2072 632e 5265    result = rc.Re
-00012840: 6475 6365 2861 2c20 5245 4455 4345 5f46  duce(a, REDUCE_F
-00012850: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
-00012860: 4152 474d 4158 2c20 3029 0d0a 2020 2020  ARGMAX, 0)..    
-00012870: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
-00012880: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
-00012890: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
-000128a0: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
-000128b0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-000128c0: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
-000128d0: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
-000128e0: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
-000128f0: 7469 6f6e 286e 702e 6e61 6e61 7267 6d61  tion(np.nanargma
-00012900: 7829 0d0a 2020 2020 6465 6620 5f6e 616e  x)..    def _nan
-00012910: 6172 676d 6178 2861 2c20 6178 6973 3d4e  argmax(a, axis=N
-00012920: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
-00012930: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
-00012940: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
-00012950: 5449 4f4e 532e 5245 4455 4345 5f4e 414e  TIONS.REDUCE_NAN
-00012960: 4152 474d 4158 2c20 3029 0d0a 2020 2020  ARGMAX, 0)..    
-00012970: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
-00012980: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
-00012990: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
-000129a0: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
-000129b0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-000129c0: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
-000129d0: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
-000129e0: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
-000129f0: 7469 6f6e 286e 702e 6172 676d 696e 290d  tion(np.argmin).
-00012a00: 0a20 2020 2064 6566 205f 6172 676d 696e  .    def _argmin
-00012a10: 2861 2c20 6178 6973 3d4e 6f6e 652c 206f  (a, axis=None, o
-00012a20: 7574 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ut=None):..     
-00012a30: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
-00012a40: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
-00012a50: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-00012a60: 5f41 5247 4d49 4e2c 2030 290d 0a20 2020  _ARGMIN, 0)..   
-00012a70: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-00012a80: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
-00012a90: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
-00012aa0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
-00012ab0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00012ac0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-00012ad0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00012ae0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00012af0: 6374 696f 6e28 6e70 2e6e 616e 6172 676d  ction(np.nanargm
-00012b00: 696e 290d 0a20 2020 2064 6566 205f 6e61  in)..    def _na
-00012b10: 6e61 7267 6d69 6e28 612c 2061 7869 733d  nargmin(a, axis=
-00012b20: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-00012b30: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
-00012b40: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
-00012b50: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
-00012b60: 4e41 5247 4d49 4e2c 2030 290d 0a20 2020  NARGMIN, 0)..   
-00012b70: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-00012b80: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
-00012b90: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
-00012ba0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
-00012bb0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00012bc0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-00012bd0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00012be0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00012bf0: 6374 696f 6e28 6e70 2e65 6d70 7479 5f6c  ction(np.empty_l
-00012c00: 696b 6529 0d0a 2020 2020 6465 6620 5f65  ike)..    def _e
-00012c10: 6d70 7479 5f6c 696b 6528 0d0a 2020 2020  mpty_like(..    
-00012c20: 2020 2020 6172 7261 793a 2022 4661 7374      array: "Fast
-00012c30: 4172 7261 7922 2c0d 0a20 2020 2020 2020  Array",..       
-00012c40: 2064 7479 7065 3a20 4f70 7469 6f6e 616c   dtype: Optional
-00012c50: 5b55 6e69 6f6e 5b73 7472 2c20 6e70 2e64  [Union[str, np.d
-00012c60: 7479 7065 5d5d 203d 204e 6f6e 652c 0d0a  type]] = None,..
-00012c70: 2020 2020 2020 2020 6f72 6465 723a 2073          order: s
-00012c80: 7472 203d 2022 4b22 2c0d 0a20 2020 2020  tr = "K",..     
-00012c90: 2020 2073 7562 6f6b 3a20 626f 6f6c 203d     subok: bool =
-00012ca0: 2054 7275 652c 0d0a 2020 2020 2020 2020   True,..        
-00012cb0: 7368 6170 653a 204f 7074 696f 6e61 6c5b  shape: Optional[
-00012cc0: 556e 696f 6e5b 696e 742c 2053 6571 7565  Union[int, Seque
-00012cd0: 6e63 655b 696e 745d 5d5d 203d 204e 6f6e  nce[int]]] = Non
-00012ce0: 652c 0d0a 2020 2020 2920 2d3e 2022 4661  e,..    ) -> "Fa
-00012cf0: 7374 4172 7261 7922 3a0d 0a20 2020 2020  stArray":..     
-00012d00: 2020 2061 7272 6179 203d 2061 7272 6179     array = array
-00012d10: 2e5f 6e70 0d0a 2020 2020 2020 2020 7265  ._np..        re
-00012d20: 7375 6c74 203d 2072 632e 4c65 6467 6572  sult = rc.Ledger
-00012d30: 4675 6e63 7469 6f6e 286e 702e 656d 7074  Function(np.empt
-00012d40: 795f 6c69 6b65 2c20 6172 7261 792c 2064  y_like, array, d
-00012d50: 7479 7065 3d64 7479 7065 2c20 6f72 6465  type=dtype, orde
-00012d60: 723d 6f72 6465 722c 2073 7562 6f6b 3d73  r=order, subok=s
-00012d70: 7562 6f6b 2c20 7368 6170 653d 7368 6170  ubok, shape=shap
-00012d80: 6529 0d0a 2020 2020 2020 2020 7265 7475  e)..        retu
-00012d90: 726e 2072 6573 756c 740d 0a0d 0a20 2020  rn result....   
-00012da0: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
-00012db0: 2020 2020 405f 4172 7261 7946 756e 6374      @_ArrayFunct
-00012dc0: 696f 6e48 656c 7065 722e 7265 6769 7374  ionHelper.regist
-00012dd0: 6572 5f61 7272 6179 5f66 756e 6374 696f  er_array_functio
-00012de0: 6e28 6e70 2e6d 6178 290d 0a20 2020 2064  n(np.max)..    d
-00012df0: 6566 205f 6d61 7828 612c 2061 7869 733d  ef _max(a, axis=
-00012e00: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
-00012e10: 6b65 6570 6469 6d73 3d4e 6f6e 652c 2069  keepdims=None, i
-00012e20: 6e69 7469 616c 3d4e 6f6e 652c 2077 6865  nitial=None, whe
-00012e30: 7265 3d4e 6f6e 6529 3a0d 0a20 2020 2020  re=None):..     
-00012e40: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
-00012e50: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
-00012e60: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-00012e70: 5f4d 4158 2c20 3029 0d0a 2020 2020 2020  _MAX, 0)..      
-00012e80: 2020 6966 2072 6573 756c 7420 6973 206e    if result is n
-00012e90: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-00012ea0: 2020 2020 2020 7265 7475 726e 2061 2e64        return a.d
-00012eb0: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
-00012ec0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00012ed0: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
-00012ee0: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
-00012ef0: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
-00012f00: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
-00012f10: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
-00012f20: 286e 702e 6e61 6e6d 6178 290d 0a20 2020  (np.nanmax)..   
-00012f30: 2064 6566 205f 6e61 6e6d 6178 2861 2c20   def _nanmax(a, 
-00012f40: 6178 6973 3d4e 6f6e 652c 206f 7574 3d4e  axis=None, out=N
-00012f50: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
-00012f60: 6e65 293a 0d0a 2020 2020 2020 2020 7265  ne):..        re
-00012f70: 7375 6c74 203d 2072 632e 5265 6475 6365  sult = rc.Reduce
-00012f80: 2861 2c20 5245 4455 4345 5f46 554e 4354  (a, REDUCE_FUNCT
-00012f90: 494f 4e53 2e52 4544 5543 455f 4e41 4e4d  IONS.REDUCE_NANM
-00012fa0: 4158 2c20 3029 0d0a 2020 2020 2020 2020  AX, 0)..        
-00012fb0: 6966 2072 6573 756c 7420 6973 206e 6f74  if result is not
-00012fc0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00012fd0: 2020 2020 7265 7475 726e 2061 2e64 7479      return a.dty
-00012fe0: 7065 2e74 7970 6528 7265 7375 6c74 290d  pe.type(result).
-00012ff0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013000: 7265 7375 6c74 0d0a 0d0a 2020 2020 4073  result....    @s
-00013010: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-00013020: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
-00013030: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
-00013040: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
-00013050: 702e 6d65 616e 290d 0a20 2020 2064 6566  p.mean)..    def
-00013060: 205f 6d65 616e 2861 2c20 6178 6973 3d4e   _mean(a, axis=N
-00013070: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
-00013080: 206f 7574 3d4e 6f6e 652c 206b 6565 7064   out=None, keepd
-00013090: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
-000130a0: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
-000130b0: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
-000130c0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-000130d0: 455f 4d45 414e 2c20 3029 0d0a 2020 2020  E_MEAN, 0)..    
-000130e0: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
-000130f0: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
-00013100: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
-00013110: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
-00013120: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-00013130: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
-00013140: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
-00013150: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
-00013160: 7469 6f6e 286e 702e 6e61 6e6d 6561 6e29  tion(np.nanmean)
-00013170: 0d0a 2020 2020 6465 6620 5f6e 616e 6d65  ..    def _nanme
-00013180: 616e 2861 2c20 6178 6973 3d4e 6f6e 652c  an(a, axis=None,
-00013190: 2064 7479 7065 3d4e 6f6e 652c 206f 7574   dtype=None, out
-000131a0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
-000131b0: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-000131c0: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
-000131d0: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
-000131e0: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
-000131f0: 4e4d 4541 4e2c 2030 290d 0a20 2020 2020  NMEAN, 0)..     
-00013200: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
-00013210: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
-00013220: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
-00013230: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
-00013240: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00013250: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
-00013260: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
-00013270: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-00013280: 696f 6e28 6e70 2e6d 696e 290d 0a20 2020  ion(np.min)..   
-00013290: 2064 6566 205f 6d69 6e28 612c 2061 7869   def _min(a, axi
-000132a0: 733d 4e6f 6e65 2c20 6f75 743d 4e6f 6e65  s=None, out=None
-000132b0: 2c20 6b65 6570 6469 6d73 3d4e 6f6e 652c  , keepdims=None,
-000132c0: 2069 6e69 7469 616c 3d4e 6f6e 652c 2077   initial=None, w
-000132d0: 6865 7265 3d4e 6f6e 6529 3a0d 0a20 2020  here=None):..   
-000132e0: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
-000132f0: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
-00013300: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-00013310: 4345 5f4d 494e 2c20 3029 0d0a 2020 2020  CE_MIN, 0)..    
-00013320: 2020 2020 6966 2072 6573 756c 7420 6973      if result is
-00013330: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-00013340: 2020 2020 2020 2020 7265 7475 726e 2061          return a
-00013350: 2e64 7479 7065 2e74 7970 6528 7265 7375  .dtype.type(resu
-00013360: 6c74 290d 0a20 2020 2020 2020 2072 6574  lt)..        ret
-00013370: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
-00013380: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-00013390: 0a20 2020 2040 5f41 7272 6179 4675 6e63  .    @_ArrayFunc
-000133a0: 7469 6f6e 4865 6c70 6572 2e72 6567 6973  tionHelper.regis
-000133b0: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
-000133c0: 6f6e 286e 702e 6e61 6e6d 696e 290d 0a20  on(np.nanmin).. 
-000133d0: 2020 2064 6566 205f 6e61 6e6d 696e 2861     def _nanmin(a
-000133e0: 2c20 6178 6973 3d4e 6f6e 652c 206f 7574  , axis=None, out
-000133f0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
-00013400: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-00013410: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
-00013420: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
-00013430: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
-00013440: 4e4d 494e 2c20 3029 0d0a 2020 2020 2020  NMIN, 0)..      
-00013450: 2020 6966 2072 6573 756c 7420 6973 206e    if result is n
-00013460: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-00013470: 2020 2020 2020 7265 7475 726e 2061 2e64        return a.d
-00013480: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
-00013490: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-000134a0: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
-000134b0: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
-000134c0: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
-000134d0: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
-000134e0: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
-000134f0: 286e 702e 7374 6429 0d0a 2020 2020 6465  (np.std)..    de
-00013500: 6620 5f73 7464 2861 2c20 6178 6973 3d4e  f _std(a, axis=N
-00013510: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
-00013520: 206f 7574 3d4e 6f6e 652c 2064 646f 663d   out=None, ddof=
-00013530: 4e6f 6e65 2c20 6b65 6570 6469 6d73 3d4e  None, keepdims=N
-00013540: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
-00013550: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
-00013560: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
-00013570: 5449 4f4e 532e 5245 4455 4345 5f53 5444  TIONS.REDUCE_STD
-00013580: 2c20 3029 0d0a 2020 2020 2020 2020 7265  , 0)..        re
-00013590: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
-000135a0: 7079 5f6e 756d 6265 725f 746f 5f6e 705f  py_number_to_np_
-000135b0: 6474 7970 6528 7265 7375 6c74 2c20 612e  dtype(result, a.
-000135c0: 6474 7970 6529 0d0a 0d0a 2020 2020 4073  dtype)....    @s
-000135d0: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-000135e0: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
-000135f0: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
-00013600: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
-00013610: 702e 6e61 6e73 7464 290d 0a20 2020 2064  p.nanstd)..    d
-00013620: 6566 205f 6e61 6e73 7464 2861 2c20 6178  ef _nanstd(a, ax
-00013630: 6973 3d4e 6f6e 652c 2064 7479 7065 3d4e  is=None, dtype=N
-00013640: 6f6e 652c 206f 7574 3d4e 6f6e 652c 2064  one, out=None, d
-00013650: 646f 663d 4e6f 6e65 2c20 6b65 6570 6469  dof=None, keepdi
-00013660: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
-00013670: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
-00013680: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
-00013690: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-000136a0: 5f4e 414e 5354 442c 2030 290d 0a20 2020  _NANSTD, 0)..   
-000136b0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-000136c0: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
-000136d0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
-000136e0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
-000136f0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00013700: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-00013710: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00013720: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00013730: 6374 696f 6e28 6e70 2e72 6f75 6e64 290d  ction(np.round).
-00013740: 0a20 2020 2040 5f41 7272 6179 4675 6e63  .    @_ArrayFunc
-00013750: 7469 6f6e 4865 6c70 6572 2e72 6567 6973  tionHelper.regis
-00013760: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
-00013770: 6f6e 286e 702e 6172 6f75 6e64 290d 0a20  on(np.around).. 
-00013780: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
-00013790: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
-000137a0: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
-000137b0: 286e 702e 726f 756e 645f 2920 2023 204e  (np.round_)  # N
-000137c0: 2e42 2c20 726f 756e 645f 2069 7320 616e  .B, round_ is an
-000137d0: 2061 6c69 6173 2066 6f72 2061 726f 756e   alias for aroun
-000137e0: 640d 0a20 2020 2064 6566 205f 726f 756e  d..    def _roun
-000137f0: 645f 2861 2c20 6465 6369 6d61 6c73 3d4e  d_(a, decimals=N
-00013800: 6f6e 652c 206f 7574 3d4e 6f6e 6529 3a0d  one, out=None):.
-00013810: 0a20 2020 2020 2020 2023 2054 4f44 4f20  .        # TODO 
-00013820: 6861 6e64 6c65 2060 6465 6369 6d61 6c60  handle `decimal`
-00013830: 2061 6e64 2060 6f75 7460 2061 7267 756d   and `out` argum
-00013840: 656e 7473 0d0a 2020 2020 2020 2020 2320  ents..        # 
-00013850: 4966 2063 616c 6c65 7273 2064 6563 6964  If callers decid
-00013860: 6520 746f 2075 7365 2074 6869 7320 4661  e to use this Fa
-00013870: 7374 4172 7261 7920 7374 6174 6963 6d65  stArray staticme
-00013880: 7468 6f64 206f 7574 7369 6465 2074 6865  thod outside the
-00013890: 2073 636f 7065 206f 6620 6172 7261 7920   scope of array 
-000138a0: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
-000138b0: 6c0d 0a20 2020 2020 2020 2023 2070 726f  l..        # pro
-000138c0: 7669 6465 2061 7267 756d 656e 7420 6368  vide argument ch
-000138d0: 6563 6b73 2073 696e 6365 2069 7420 6d61  ecks since it ma
-000138e0: 7920 6265 636f 6d65 2075 6e63 6c65 6172  y become unclear
-000138f0: 2077 6865 6e20 7468 696e 6773 2066 6169   when things fai
-00013900: 6c20 6174 2074 6865 2043 2065 7874 656e  l at the C exten
-00013910: 7369 6f6e 206c 6179 6572 2e0d 0a20 2020  sion layer...   
-00013920: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
-00013930: 7374 616e 6365 2861 2c20 4661 7374 4172  stance(a, FastAr
-00013940: 7261 7929 3a0d 0a20 2020 2020 2020 2020  ray):..         
-00013950: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-00013960: 726f 7228 6622 7b46 6173 7441 7272 6179  ror(f"{FastArray
-00013970: 2e5f 5f6e 616d 655f 5f7d 2e5f 726f 756e  .__name__}._roun
-00013980: 645f 2065 7870 6563 7465 6420 4661 7374  d_ expected Fast
-00013990: 4172 7261 7920 7375 6274 7970 652c 2067  Array subtype, g
-000139a0: 6f74 207b 7479 7065 2861 297d 2229 0d0a  ot {type(a)}")..
-000139b0: 0d0a 2020 2020 2020 2020 6f72 6967 696e  ..        origin
-000139c0: 616c 5f64 7479 7065 203d 2061 2e64 7479  al_dtype = a.dty
-000139d0: 7065 0d0a 2020 2020 2020 2020 6120 3d20  pe..        a = 
-000139e0: 612e 6173 7479 7065 286e 702e 666c 6f61  a.astype(np.floa
-000139f0: 7436 3429 0d0a 2020 2020 2020 2020 6661  t64)..        fa
-00013a00: 7374 5f66 756e 6374 696f 6e20 3d20 6755  st_function = gU
-00013a10: 6e61 7279 5546 756e 6373 2e67 6574 286e  naryUFuncs.get(n
-00013a20: 702e 726f 756e 642c 204e 6f6e 6529 0d0a  p.round, None)..
-00013a30: 2020 2020 2020 2020 6966 2066 6173 745f          if fast_
-00013a40: 6675 6e63 7469 6f6e 2069 7320 4e6f 6e65  function is None
-00013a50: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00013a60: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-00013a70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013a80: 2020 6622 7b46 6173 7441 7272 6179 2e5f    f"{FastArray._
-00013a90: 5f6e 616d 655f 5f7d 2e5f 726f 756e 645f  _name__}._round_
-00013aa0: 2075 6e68 616e 646c 6564 2061 7272 6179   unhandled array
-00013ab0: 2066 756e 6374 696f 6e20 7b6e 702e 726f   function {np.ro
-00013ac0: 756e 647d 5c6e 4b6e 6f77 6e20 6e75 6d70  und}\nKnown nump
-00013ad0: 7920 6172 7261 7920 6675 6e63 7469 6f6e  y array function
-00013ae0: 2074 6f20 7269 7074 6162 6c65 2066 756e   to riptable fun
-00013af0: 6374 696f 6e73 3a20 7b72 6570 7228 6755  ctions: {repr(gU
-00013b00: 6e61 7279 5546 756e 6373 297d 220d 0a20  naryUFuncs)}".. 
-00013b10: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
-00013b20: 2020 2020 2020 2020 2320 466f 7220 4d41          # For MA
-00013b30: 5448 5f4f 5045 5241 5449 4f4e 2e52 4f55  TH_OPERATION.ROU
-00013b40: 4e44 2c20 5f42 4153 4943 4d41 5448 5f4f  ND, _BASICMATH_O
-00013b50: 4e45 5f49 4e50 5554 2072 6574 7572 6e73  NE_INPUT returns
-00013b60: 2061 6e20 6172 7261 7920 6061 7272 6179   an array `array
-00013b70: 284e 6f6e 652c 2064 7479 7065 3d6f 626a  (None, dtype=obj
-00013b80: 6563 7429 600d 0a20 2020 2020 2020 2023  ect)`..        #
-00013b90: 2069 6620 7468 6520 696e 7075 7420 6474   if the input dt
-00013ba0: 7970 6520 6973 206e 6f74 2061 2066 6c6f  ype is not a flo
-00013bb0: 6174 3634 2e20 4173 2061 2077 6f72 6b61  at64. As a worka
-00013bc0: 726f 756e 6420 6361 7374 2074 6f20 666c  round cast to fl
-00013bd0: 6f61 7436 3420 6474 7970 652c 2070 6572  oat64 dtype, per
-00013be0: 666f 726d 2074 6865 206f 7065 7261 7469  form the operati
-00013bf0: 6f6e 2c0d 0a20 2020 2020 2020 2023 2074  on,..        # t
-00013c00: 6865 6e20 6361 7374 2062 6163 6b20 746f  hen cast back to
-00013c10: 2074 6865 206f 7269 6769 6e61 6c20 6474   the original dt
-00013c20: 7970 652e 0d0a 2020 2020 2020 2020 7265  ype...        re
-00013c30: 7375 6c74 203d 2054 7970 6552 6567 6973  sult = TypeRegis
-00013c40: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
-00013c50: 4241 5349 434d 4154 485f 4f4e 455f 494e  BASICMATH_ONE_IN
-00013c60: 5055 5428 612c 2066 6173 745f 6675 6e63  PUT(a, fast_func
-00013c70: 7469 6f6e 2c20 3029 0d0a 0d0a 2020 2020  tion, 0)....    
-00013c80: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
-00013c90: 7461 6e63 6528 7265 7375 6c74 2c20 4661  tance(result, Fa
-00013ca0: 7374 4172 7261 7929 2061 6e64 2069 7369  stArray) and isi
-00013cb0: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
-00013cc0: 6e70 2e6e 6461 7272 6179 293a 0d0a 2020  np.ndarray):..  
-00013cd0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00013ce0: 203d 2072 6573 756c 742e 7669 6577 2846   = result.view(F
-00013cf0: 6173 7441 7272 6179 290d 0a0d 0a20 2020  astArray)....   
-00013d00: 2020 2020 2069 6620 7265 7375 6c74 2e64       if result.d
-00013d10: 7479 7065 2021 3d20 6f72 6967 696e 616c  type != original
-00013d20: 5f64 7479 7065 3a0d 0a20 2020 2020 2020  _dtype:..       
-00013d30: 2020 2020 2072 6573 756c 7420 3d20 7265       result = re
-00013d40: 7375 6c74 2e61 7374 7970 6528 6f72 6967  sult.astype(orig
-00013d50: 696e 616c 5f64 7479 7065 290d 0a0d 0a20  inal_dtype).... 
-00013d60: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-00013d70: 7375 6c74 0d0a 0d0a 2020 2020 4073 7461  sult....    @sta
-00013d80: 7469 636d 6574 686f 640d 0a20 2020 2040  ticmethod..    @
-00013d90: 5f41 7272 6179 4675 6e63 7469 6f6e 4865  _ArrayFunctionHe
-00013da0: 6c70 6572 2e72 6567 6973 7465 725f 6172  lper.register_ar
-00013db0: 7261 795f 6675 6e63 7469 6f6e 286e 702e  ray_function(np.
-00013dc0: 7375 6d29 0d0a 2020 2020 6465 6620 5f73  sum)..    def _s
-00013dd0: 756d 2861 2c20 6178 6973 3d4e 6f6e 652c  um(a, axis=None,
-00013de0: 2064 7479 7065 3d4e 6f6e 652c 206f 7574   dtype=None, out
-00013df0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
-00013e00: 4e6f 6e65 2c20 696e 6974 6961 6c3d 4e6f  None, initial=No
-00013e10: 6e65 2c20 7768 6572 653d 4e6f 6e65 293a  ne, where=None):
-00013e20: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
-00013e30: 203d 2072 632e 5265 6475 6365 2861 2c20   = rc.Reduce(a, 
-00013e40: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
-00013e50: 2e52 4544 5543 455f 5355 4d2c 2030 290d  .REDUCE_SUM, 0).
-00013e60: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013e70: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
-00013e80: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
-00013e90: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
-00013ea0: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
-00013eb0: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
-00013ec0: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
-00013ed0: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
-00013ee0: 5f66 756e 6374 696f 6e28 6e70 2e6e 616e  _function(np.nan
-00013ef0: 7375 6d29 0d0a 2020 2020 6465 6620 5f6e  sum)..    def _n
-00013f00: 616e 7375 6d28 612c 2061 7869 733d 4e6f  ansum(a, axis=No
-00013f10: 6e65 2c20 6474 7970 653d 4e6f 6e65 2c20  ne, dtype=None, 
-00013f20: 6f75 743d 4e6f 6e65 2c20 6b65 6570 6469  out=None, keepdi
-00013f30: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
-00013f40: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
-00013f50: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
-00013f60: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-00013f70: 5f4e 414e 5355 4d2c 2030 290d 0a20 2020  _NANSUM, 0)..   
-00013f80: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-00013f90: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
-00013fa0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
-00013fb0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
-00013fc0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00013fd0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-00013fe0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00013ff0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00014000: 6374 696f 6e28 6e70 2e76 6172 290d 0a20  ction(np.var).. 
-00014010: 2020 2064 6566 205f 7661 7228 612c 2061     def _var(a, a
-00014020: 7869 733d 4e6f 6e65 2c20 6474 7970 653d  xis=None, dtype=
-00014030: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
-00014040: 6464 6f66 3d4e 6f6e 652c 206b 6565 7064  ddof=None, keepd
-00014050: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
-00014060: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
-00014070: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
-00014080: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-00014090: 455f 5641 522c 2030 290d 0a20 2020 2020  E_VAR, 0)..     
-000140a0: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
-000140b0: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
-000140c0: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
-000140d0: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
-000140e0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-000140f0: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
-00014100: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
-00014110: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-00014120: 696f 6e28 6e70 2e6e 616e 7661 7229 0d0a  ion(np.nanvar)..
-00014130: 2020 2020 6465 6620 5f6e 616e 7661 7228      def _nanvar(
-00014140: 612c 2061 7869 733d 4e6f 6e65 2c20 6474  a, axis=None, dt
-00014150: 7970 653d 4e6f 6e65 2c20 6f75 743d 4e6f  ype=None, out=No
-00014160: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 206b  ne, ddof=None, k
-00014170: 6565 7064 696d 733d 4e6f 6e65 293a 0d0a  eepdims=None):..
-00014180: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00014190: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
-000141a0: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-000141b0: 4544 5543 455f 4e41 4e56 4152 2c20 3029  EDUCE_NANVAR, 0)
-000141c0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000141d0: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
-000141e0: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
-000141f0: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
-00014200: 6529 0d0a 0d0a 2020 2020 2323 2323 2323  e)....    ######
-00014210: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014220: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014230: 2323 2323 2323 230d 0a20 2020 2023 2048  #######..    # H
-00014240: 656c 7065 7220 7365 6374 696f 6e0d 0a20  elper section.. 
-00014250: 2020 2023 2323 2323 2323 2323 2323 2323     #############
-00014260: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014270: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014280: 0d0a 2020 2020 6465 6620 6162 7328 7365  ..    def abs(se
-00014290: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
-000142a0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-000142b0: 2020 2020 2072 6574 7572 6e20 6e70 2e61       return np.a
-000142c0: 6273 2873 656c 662c 202a 2a6b 7761 7267  bs(self, **kwarg
-000142d0: 7329 0d0a 0d0a 2020 2020 6465 6620 6d65  s)....    def me
-000142e0: 6469 616e 2873 656c 662c 202a 2a6b 7761  dian(self, **kwa
-000142f0: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
-00014300: 723a 0d0a 2020 2020 2020 2020 7265 7475  r:..        retu
-00014310: 726e 206e 702e 6d65 6469 616e 2873 656c  rn np.median(sel
-00014320: 662c 202a 2a6b 7761 7267 7329 0d0a 0d0a  f, **kwargs)....
-00014330: 2020 2020 6465 6620 6e61 6e6d 6564 6961      def nanmedia
-00014340: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
-00014350: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
-00014360: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00014370: 6e70 2e6e 616e 6d65 6469 616e 2873 656c  np.nanmedian(sel
-00014380: 662c 202a 2a6b 7761 7267 7329 0d0a 0d0a  f, **kwargs)....
-00014390: 2020 2020 6465 6620 7175 616e 7469 6c65      def quantile
-000143a0: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
-000143b0: 202d 3e20 6e70 2e6e 756d 6265 7220 7c20   -> np.number | 
-000143c0: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
-000143d0: 2020 2020 7265 7475 726e 206e 702e 7175      return np.qu
-000143e0: 616e 7469 6c65 2873 656c 662c 202a 2a6b  antile(self, **k
-000143f0: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
-00014400: 6620 6e61 6e71 7561 6e74 696c 6528 7365  f nanquantile(se
-00014410: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
-00014420: 206e 702e 6e75 6d62 6572 207c 2046 6173   np.number | Fas
-00014430: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-00014440: 2072 6574 7572 6e20 6e70 2e6e 616e 7175   return np.nanqu
-00014450: 616e 7469 6c65 2873 656c 662c 202a 2a6b  antile(self, **k
-00014460: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
-00014470: 6620 7065 7263 656e 7469 6c65 2873 656c  f percentile(sel
-00014480: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
-00014490: 6e70 2e6e 756d 6265 7220 7c20 4661 7374  np.number | Fast
-000144a0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-000144b0: 7265 7475 726e 206e 702e 7065 7263 656e  return np.percen
-000144c0: 7469 6c65 2873 656c 662c 202a 2a6b 7761  tile(self, **kwa
-000144d0: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
-000144e0: 6e61 6e70 6572 6365 6e74 696c 6528 7365  nanpercentile(se
-000144f0: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
-00014500: 206e 702e 6e75 6d62 6572 207c 2046 6173   np.number | Fas
-00014510: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-00014520: 2072 6574 7572 6e20 6e70 2e6e 616e 7065   return np.nanpe
-00014530: 7263 656e 7469 6c65 2873 656c 662c 202a  rcentile(self, *
-00014540: 2a6b 7761 7267 7329 0d0a 0d0a 2020 2020  *kwargs)....    
-00014550: 6465 6620 636c 6970 5f6c 6f77 6572 2873  def clip_lower(s
-00014560: 656c 662c 2061 5f6d 696e 2c20 2a2a 6b77  elf, a_min, **kw
-00014570: 6172 6773 2920 2d3e 2046 6173 7441 7272  args) -> FastArr
-00014580: 6179 3a0d 0a20 2020 2020 2020 2072 6574  ay:..        ret
-00014590: 7572 6e20 7365 6c66 2e63 6c69 7028 615f  urn self.clip(a_
-000145a0: 6d69 6e2c 204e 6f6e 652c 202a 2a6b 7761  min, None, **kwa
-000145b0: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
-000145c0: 636c 6970 5f75 7070 6572 2873 656c 662c  clip_upper(self,
-000145d0: 2061 5f6d 6178 2c20 2a2a 6b77 6172 6773   a_max, **kwargs
-000145e0: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
-000145f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00014600: 7365 6c66 2e63 6c69 7028 4e6f 6e65 2c20  self.clip(None, 
-00014610: 615f 6d61 782c 202a 2a6b 7761 7267 7329  a_max, **kwargs)
-00014620: 0d0a 0d0a 2020 2020 6465 6620 7369 676e  ....    def sign
-00014630: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
-00014640: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
-00014650: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-00014660: 702e 7369 676e 2873 656c 662c 202a 2a6b  p.sign(self, **k
-00014670: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
-00014680: 6620 7472 756e 6328 7365 6c66 2c20 2a2a  f trunc(self, **
-00014690: 6b77 6172 6773 2920 2d3e 2046 6173 7441  kwargs) -> FastA
-000146a0: 7272 6179 3a0d 0a20 2020 2020 2020 2072  rray:..        r
-000146b0: 6574 7572 6e20 6e70 2e74 7275 6e63 2873  eturn np.trunc(s
-000146c0: 656c 662c 202a 2a6b 7761 7267 7329 0d0a  elf, **kwargs)..
-000146d0: 0d0a 2020 2020 6465 6620 7768 6572 6528  ..    def where(
-000146e0: 7365 6c66 2c20 636f 6e64 6974 696f 6e2c  self, condition,
-000146f0: 2079 3d6e 702e 6e61 6e29 202d 3e20 4661   y=np.nan) -> Fa
-00014700: 7374 4172 7261 793a 0d0a 2020 2020 2020  stArray:..      
-00014710: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
-00014720: 6574 7572 6e20 6120 6e65 7720 6046 6173  eturn a new `Fas
-00014730: 7441 7272 6179 6020 696e 2077 6869 6368  tArray` in which
-00014740: 2076 616c 7565 7320 6172 6520 7265 706c   values are repl
-00014750: 6163 6564 2077 6865 7265 2061 2067 6976  aced where a giv
-00014760: 656e 0d0a 2020 2020 2020 2020 636f 6e64  en..        cond
-00014770: 6974 696f 6e20 6973 2046 616c 7365 2e0d  ition is False..
-00014780: 0a0d 0a20 2020 2020 2020 2054 6f20 616c  ...        To al
-00014790: 736f 2070 726f 7669 6465 2061 2076 616c  so provide a val
-000147a0: 7565 2066 6f72 2077 6865 7265 2074 6865  ue for where the
-000147b0: 2063 6f6e 6469 7469 6f6e 2069 7320 5472   condition is Tr
-000147c0: 7565 2c20 7573 650d 0a20 2020 2020 2020  ue, use..       
-000147d0: 203a 6d65 7468 3a60 7269 7074 6162 6c65   :meth:`riptable
-000147e0: 2e77 6865 7265 602e 0d0a 0d0a 2020 2020  .where`.....    
-000147f0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
-00014800: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00014810: 2d2d 0d0a 2020 2020 2020 2020 636f 6e64  --..        cond
-00014820: 6974 696f 6e20 3a20 626f 6f6c 206f 7220  ition : bool or 
-00014830: 6172 7261 7920 6f66 2062 6f6f 6c0d 0a20  array of bool.. 
-00014840: 2020 2020 2020 2020 2020 2057 6865 7265             Where
-00014850: 2074 6865 2063 6f6e 6469 7469 6f6e 2069   the condition i
-00014860: 7320 5472 7565 2c20 6b65 6570 2074 6865  s True, keep the
-00014870: 206f 7269 6769 6e61 6c20 7661 6c75 652e   original value.
-00014880: 2057 6865 7265 2046 616c 7365 2c0d 0a20   Where False,.. 
-00014890: 2020 2020 2020 2020 2020 2072 6570 6c61             repla
-000148a0: 6365 2077 6974 6820 6079 6020 2869 6620  ce with `y` (if 
-000148b0: 6079 6020 6973 2061 2073 6361 6c61 7229  `y` is a scalar)
-000148c0: 206f 7220 7468 6520 636f 7272 6573 706f   or the correspo
-000148d0: 6e64 696e 6720 7661 6c75 650d 0a20 2020  nding value..   
-000148e0: 2020 2020 2020 2020 2066 726f 6d20 6079           from `y
-000148f0: 6020 2869 6620 6079 6020 6973 2061 6e20  ` (if `y` is an 
-00014900: 6172 7261 7929 2e20 4966 2060 636f 6e64  array). If `cond
-00014910: 6974 696f 6e60 2069 7320 616e 2061 7272  ition` is an arr
-00014920: 6179 206f 7220 610d 0a20 2020 2020 2020  ay or a..       
-00014930: 2020 2020 2061 2063 6f6d 7061 7269 736f       a compariso
-00014940: 6e20 7468 6174 2072 6574 7572 6e73 2061  n that returns a
-00014950: 6e20 6172 7261 792c 2074 6865 2061 7272  n array, the arr
-00014960: 6179 206d 7573 7420 6265 2074 6865 2073  ay must be the s
-00014970: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
-00014980: 206c 656e 6774 6820 6173 2074 6865 2063   length as the c
-00014990: 616c 6c69 6e67 2060 4661 7374 4172 7261  alling `FastArra
-000149a0: 7960 2e0d 0a20 2020 2020 2020 2079 203a  y`...        y :
-000149b0: 2073 6361 6c61 722c 2061 7272 6179 2c20   scalar, array, 
-000149c0: 6f72 2063 616c 6c61 626c 652c 2064 6566  or callable, def
-000149d0: 6175 6c74 206e 702e 6e61 6e0d 0a20 2020  ault np.nan..   
-000149e0: 2020 2020 2020 2020 2054 6865 2076 616c           The val
-000149f0: 7565 2074 6f20 7573 6520 7768 6572 6520  ue to use where 
-00014a00: 6063 6f6e 6469 7469 6f6e 6020 6973 2046  `condition` is F
-00014a10: 616c 7365 2e20 4966 2060 7960 2069 7320  alse. If `y` is 
-00014a20: 616e 0d0a 2020 2020 2020 2020 2020 2020  an..            
-00014a30: 6172 7261 7920 6f72 2061 2063 616c 6c61  array or a calla
-00014a40: 626c 6520 7468 6174 2072 6574 7572 6e73  ble that returns
-00014a50: 2061 6e20 6172 7261 792c 2069 7420 6d75   an array, it mu
-00014a60: 7374 2062 6520 7468 6520 7361 6d65 0d0a  st be the same..
-00014a70: 2020 2020 2020 2020 2020 2020 6c65 6e67              leng
-00014a80: 7468 2061 7320 7468 6520 6361 6c6c 696e  th as the callin
-00014a90: 6720 6046 6173 7441 7272 6179 602e 2054  g `FastArray`. T
-00014aa0: 6865 2076 616c 7565 206f 6620 6079 6020  he value of `y` 
-00014ab0: 7468 6174 2063 6f72 7265 7370 6f6e 6473  that corresponds
-00014ac0: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
-00014ad0: 2074 6865 2046 616c 7365 2076 616c 7565   the False value
-00014ae0: 2069 7320 7573 6564 2e0d 0a0d 0a20 2020   is used.....   
-00014af0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00014b00: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00014b10: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00014b20: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
-00014b30: 6e65 7720 6046 6173 7441 7272 6179 6020  new `FastArray` 
-00014b40: 7769 7468 2076 616c 7565 7320 7265 706c  with values repl
-00014b50: 6163 6564 2077 6865 7265 2060 636f 6e64  aced where `cond
-00014b60: 6974 696f 6e60 2069 7320 4661 6c73 652e  ition` is False.
-00014b70: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
-00014b80: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
-00014b90: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00014ba0: 2e72 6970 7461 626c 652e 7768 6572 6520  .riptable.where 
-00014bb0: 3a0d 0a20 2020 2020 2020 2020 2020 2052  :..            R
-00014bc0: 6570 6c61 6365 2076 616c 7565 7320 6465  eplace values de
-00014bd0: 7065 6e64 696e 6720 6f6e 2077 6865 7468  pending on wheth
-00014be0: 6572 2061 2067 6976 656e 2063 6f6e 6469  er a given condi
-00014bf0: 7469 6f6e 2069 7320 5472 7565 206f 720d  tion is True or.
-00014c00: 0a20 2020 2020 2020 2020 2020 2046 616c  .            Fal
-00014c10: 7365 2e0d 0a0d 0a20 2020 2020 2020 2045  se.....        E
-00014c20: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-00014c30: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-00014c40: 2020 2060 636f 6e64 6974 696f 6e60 2069     `condition` i
-00014c50: 7320 6120 636f 6d70 6172 6973 6f6e 2074  s a comparison t
-00014c60: 6861 7420 6372 6561 7465 7320 616e 2061  hat creates an a
-00014c70: 7272 6179 206f 6620 626f 6f6c 6561 6e73  rray of booleans
-00014c80: 2c20 616e 640d 0a20 2020 2020 2020 2060  , and..        `
-00014c90: 7960 2069 7320 6120 7363 616c 6172 3a0d  y` is a scalar:.
-00014ca0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
-00014cb0: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
-00014cc0: 7274 2e61 7261 6e67 6528 3529 290d 0a20  rt.arange(5)).. 
-00014cd0: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
-00014ce0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-00014cf0: 5b30 2c20 312c 2032 2c20 332c 2034 5d29  [0, 1, 2, 3, 4])
-00014d00: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00014d10: 7768 6572 6528 6120 3e20 322c 2031 3030  where(a > 2, 100
-00014d20: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-00014d30: 7272 6179 285b 3130 302c 2031 3030 2c20  rray([100, 100, 
-00014d40: 3130 302c 2020 2033 2c20 2020 345d 290d  100,   3,   4]).
-00014d50: 0a0d 0a20 2020 2020 2020 2060 636f 6e64  ...        `cond
-00014d60: 6974 696f 6e60 2061 6e64 2060 7960 2061  ition` and `y` a
-00014d70: 7265 2073 616d 652d 6c65 6e67 7468 2061  re same-length a
-00014d80: 7272 6179 733a 0d0a 0d0a 2020 2020 2020  rrays:....      
-00014d90: 2020 3e3e 3e20 636f 6e64 6974 696f 6e20    >>> condition 
-00014da0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-00014db0: 5472 7565 2c20 5472 7565 2c20 4661 6c73  True, True, Fals
-00014dc0: 652c 2046 616c 7365 2c20 4661 6c73 655d  e, False, False]
-00014dd0: 290d 0a20 2020 2020 2020 203e 3e3e 2079  )..        >>> y
-00014de0: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
-00014df0: 5b31 3030 2c20 3230 302c 2033 3030 2c20  [100, 200, 300, 
-00014e00: 3430 302c 2035 3030 5d29 0d0a 2020 2020  400, 500])..    
-00014e10: 2020 2020 3e3e 3e20 612e 7768 6572 6528      >>> a.where(
-00014e20: 636f 6e64 6974 696f 6e2c 2079 290d 0a20  condition, y).. 
-00014e30: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00014e40: 285b 2020 302c 2020 2031 2c20 3330 302c  ([  0,   1, 300,
-00014e50: 2034 3030 2c20 3530 305d 290d 0a20 2020   400, 500])..   
-00014e60: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00014e70: 2020 7265 7475 726e 2077 6865 7265 2863    return where(c
-00014e80: 6f6e 6469 7469 6f6e 2c20 7365 6c66 2c20  ondition, self, 
-00014e90: 7929 0d0a 0d0a 2020 2020 6465 6620 636f  y)....    def co
-00014ea0: 756e 7428 7365 6c66 2c20 736f 7274 6564  unt(self, sorted
-00014eb0: 3d54 7275 652c 2066 696c 7465 723d 4e6f  =True, filter=No
-00014ec0: 6e65 2920 2d3e 2044 6174 6173 6574 3a0d  ne) -> Dataset:.
-00014ed0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00014ee0: 2020 2020 2020 5468 6520 636f 756e 7420        The count 
-00014ef0: 6f66 2065 6163 6820 756e 6971 7565 2076  of each unique v
-00014f00: 616c 7565 2e0d 0a0d 0a20 2020 2020 2020  alue.....       
-00014f10: 2054 6869 7320 7265 7475 726e 7320 7468   This returns th
-00014f20: 6520 7361 6d65 2069 6e66 6f72 6d61 7469  e same informati
-00014f30: 6f6e 2074 6861 7420 6060 2e75 6e69 7175  on that ``.uniqu
-00014f40: 6528 7265 7475 726e 5f63 6f75 6e74 7320  e(return_counts 
-00014f50: 3d20 5472 7565 2960 600d 0a20 2020 2020  = True)``..     
-00014f60: 2020 2064 6f65 732c 2065 7863 6570 7420     does, except 
-00014f70: 696e 2061 2060 4461 7461 7365 7460 2069  in a `Dataset` i
-00014f80: 6e73 7465 6164 206f 6620 6120 7475 706c  nstead of a tupl
-00014f90: 652e 0d0a 0d0a 2020 2020 2020 2020 5061  e.....        Pa
-00014fa0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-00014fb0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-00014fc0: 2020 2020 2020 736f 7274 6564 203a 2062        sorted : b
-00014fd0: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
-00014fe0: 650d 0a20 2020 2020 2020 2020 2020 2057  e..            W
-00014ff0: 6865 6e20 5472 7565 2028 7468 6520 6465  hen True (the de
-00015000: 6661 756c 7429 2c20 756e 6971 7565 2076  fault), unique v
-00015010: 616c 7565 7320 6172 6520 7265 7475 726e  alues are return
-00015020: 6564 2069 6e20 736f 7274 6564 206f 7264  ed in sorted ord
-00015030: 6572 2e20 5365 7420 746f 0d0a 2020 2020  er. Set to..    
-00015040: 2020 2020 2020 2020 4661 6c73 6520 746f          False to
-00015050: 2072 6574 7572 6e20 7468 656d 2069 6e20   return them in 
-00015060: 6f72 6465 7220 6f66 2066 6972 7374 2061  order of first a
-00015070: 7070 6561 7261 6e63 652e 0d0a 2020 2020  ppearance...    
-00015080: 2020 2020 6669 6c74 6572 3a20 6e64 6172      filter: ndar
-00015090: 7261 7920 6f66 2062 6f6f 6c2c 2064 6566  ray of bool, def
-000150a0: 6175 6c74 204e 6f6e 650d 0a20 2020 2020  ault None..     
-000150b0: 2020 2020 2020 2049 6620 7072 6f76 6964         If provid
-000150c0: 6564 2c20 616e 7920 4661 6c73 6520 7661  ed, any False va
-000150d0: 6c75 6573 2077 696c 6c20 6265 2069 676e  lues will be ign
-000150e0: 6f72 6564 2069 6e20 7468 6520 6361 6c63  ored in the calc
-000150f0: 756c 6174 696f 6e2e 0d0a 0d0a 2020 2020  ulation.....    
-00015100: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
-00015110: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
-00015120: 2020 2020 2020 4461 7461 7365 740d 0a20        Dataset.. 
-00015130: 2020 2020 2020 2020 2020 2041 2060 4461             A `Da
-00015140: 7461 7365 7460 2063 6f6e 7461 696e 696e  taset` containin
-00015150: 6720 7468 6520 756e 6971 7565 2076 616c  g the unique val
-00015160: 7565 7320 616e 6420 7468 6569 7220 636f  ues and their co
-00015170: 756e 7473 2e0d 0a0d 0a20 2020 2020 2020  unts.....       
-00015180: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00015190: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-000151a0: 2020 2020 2046 6173 7441 7272 6179 2e75       FastArray.u
-000151b0: 6e69 7175 650d 0a0d 0a20 2020 2020 2020  nique....       
-000151c0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-000151d0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-000151e0: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-000151f0: 4661 7374 4172 7261 7928 5b30 2c20 322c  FastArray([0, 2,
-00015200: 2031 2c20 332c 2033 2c20 322c 2032 5d29   1, 3, 3, 2, 2])
-00015210: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00015220: 636f 756e 7428 290d 0a20 2020 2020 2020  count()..       
-00015230: 202a 556e 6971 7565 2020 2043 6f75 6e74   *Unique   Count
-00015240: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00015250: 2d20 2020 2d2d 2d2d 2d0d 0a20 2020 2020  -   -----..     
-00015260: 2020 2020 2020 2020 2030 2020 2020 2020           0      
-00015270: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
-00015280: 2020 3120 2020 2020 2020 310d 0a20 2020    1       1..   
-00015290: 2020 2020 2020 2020 2020 2032 2020 2020             2    
-000152a0: 2020 2033 0d0a 2020 2020 2020 2020 2020     3..          
-000152b0: 2020 2020 3320 2020 2020 2020 320d 0a0d      3       2...
-000152c0: 0a20 2020 2020 2020 2057 6974 6820 6060  .        With ``
-000152d0: 736f 7274 6564 203d 2046 616c 7365 6060  sorted = False``
-000152e0: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
-000152f0: 2061 2e63 6f75 6e74 2873 6f72 7465 6420   a.count(sorted 
-00015300: 3d20 4661 6c73 6529 0d0a 2020 2020 2020  = False)..      
-00015310: 2020 2a55 6e69 7175 6520 2020 436f 756e    *Unique   Coun
-00015320: 740d 0a20 2020 2020 2020 202d 2d2d 2d2d  t..        -----
-00015330: 2d2d 2020 202d 2d2d 2d2d 0d0a 2020 2020  --   -----..    
-00015340: 2020 2020 2020 2020 2020 3020 2020 2020            0     
-00015350: 2020 310d 0a20 2020 2020 2020 2020 2020    1..           
-00015360: 2020 2032 2020 2020 2020 2033 0d0a 2020     2       3..  
-00015370: 2020 2020 2020 2020 2020 2020 3120 2020              1   
-00015380: 2020 2020 310d 0a20 2020 2020 2020 2020      1..         
-00015390: 2020 2020 2033 2020 2020 2020 2032 0d0a       3       2..
-000153a0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000153b0: 2020 2020 2075 6e69 7175 655f 636f 756e       unique_coun
-000153c0: 7473 203d 2075 6e69 7175 6528 7365 6c66  ts = unique(self
-000153d0: 2c20 736f 7274 6564 3d73 6f72 7465 642c  , sorted=sorted,
-000153e0: 2072 6574 7572 6e5f 636f 756e 7473 3d54   return_counts=T
-000153f0: 7275 652c 2066 696c 7465 723d 6669 6c74  rue, filter=filt
-00015400: 6572 290d 0a20 2020 2020 2020 206e 616d  er)..        nam
-00015410: 6520 3d20 7365 6c66 2e67 6574 5f6e 616d  e = self.get_nam
-00015420: 6528 290d 0a20 2020 2020 2020 2069 6620  e()..        if 
-00015430: 6e61 6d65 2069 7320 4e6f 6e65 3a0d 0a20  name is None:.. 
-00015440: 2020 2020 2020 2020 2020 206e 616d 6520             name 
-00015450: 3d20 2255 6e69 7175 6522 0d0a 2020 2020  = "Unique"..    
-00015460: 2020 2020 6473 203d 2054 7970 6552 6567      ds = TypeReg
-00015470: 6973 7465 722e 4461 7461 7365 7428 7b6e  ister.Dataset({n
-00015480: 616d 653a 2075 6e69 7175 655f 636f 756e  ame: unique_coun
-00015490: 7473 5b30 5d2c 2022 436f 756e 7422 3a20  ts[0], "Count": 
-000154a0: 756e 6971 7565 5f63 6f75 6e74 735b 315d  unique_counts[1]
-000154b0: 7d29 0d0a 2020 2020 2020 2020 6473 2e6c  })..        ds.l
-000154c0: 6162 656c 5f73 6574 5f6e 616d 6573 285b  abel_set_names([
-000154d0: 6e61 6d65 5d29 0d0a 2020 2020 2020 2020  name])..        
-000154e0: 7265 7475 726e 2064 730d 0a0d 0a20 2020  return ds....   
-000154f0: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
-00015500: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015510: 2323 2323 2323 2323 2323 2323 2323 0d0a  ##############..
-00015520: 2020 2020 2320 526f 6c6c 696e 6720 7365      # Rolling se
-00015530: 6374 696f 6e20 2863 616e 6e6f 7420 6861  ction (cannot ha
-00015540: 6e64 6c65 2073 7472 6964 6573 290d 0a20  ndle strides).. 
-00015550: 2020 2023 2323 2323 2323 2323 2323 2323     #############
-00015560: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015570: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015580: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
-00015590: 675f 7375 6d28 7365 6c66 2c20 7769 6e64  g_sum(self, wind
-000155a0: 6f77 3a20 696e 7420 3d20 3329 202d 3e20  ow: int = 3) -> 
-000155b0: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
-000155c0: 2020 2020 7265 7475 726e 2072 632e 526f      return rc.Ro
-000155d0: 6c6c 696e 6728 7365 6c66 2c20 524f 4c4c  lling(self, ROLL
-000155e0: 494e 475f 4655 4e43 5449 4f4e 532e 524f  ING_FUNCTIONS.RO
-000155f0: 4c4c 494e 475f 5355 4d2c 2077 696e 646f  LLING_SUM, windo
-00015600: 7729 0d0a 0d0a 2020 2020 6465 6620 726f  w)....    def ro
-00015610: 6c6c 696e 675f 6e61 6e73 756d 2873 656c  lling_nansum(sel
-00015620: 662c 2077 696e 646f 773a 2069 6e74 203d  f, window: int =
-00015630: 2033 2920 2d3e 2046 6173 7441 7272 6179   3) -> FastArray
-00015640: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00015650: 6e20 7263 2e52 6f6c 6c69 6e67 2873 656c  n rc.Rolling(sel
-00015660: 662c 2052 4f4c 4c49 4e47 5f46 554e 4354  f, ROLLING_FUNCT
-00015670: 494f 4e53 2e52 4f4c 4c49 4e47 5f4e 414e  IONS.ROLLING_NAN
-00015680: 5355 4d2c 2077 696e 646f 7729 0d0a 0d0a  SUM, window)....
-00015690: 2020 2020 6465 6620 726f 6c6c 696e 675f      def rolling_
-000156a0: 6d65 616e 2873 656c 662c 2077 696e 646f  mean(self, windo
-000156b0: 773a 2069 6e74 203d 2033 2920 2d3e 2046  w: int = 3) -> F
-000156c0: 6173 7441 7272 6179 3a0d 0a20 2020 2020  astArray:..     
-000156d0: 2020 2072 6574 7572 6e20 7263 2e52 6f6c     return rc.Rol
-000156e0: 6c69 6e67 2873 656c 662c 2052 4f4c 4c49  ling(self, ROLLI
-000156f0: 4e47 5f46 554e 4354 494f 4e53 2e52 4f4c  NG_FUNCTIONS.ROL
-00015700: 4c49 4e47 5f4d 4541 4e2c 2077 696e 646f  LING_MEAN, windo
-00015710: 7729 0d0a 0d0a 2020 2020 6465 6620 726f  w)....    def ro
-00015720: 6c6c 696e 675f 6e61 6e6d 6561 6e28 7365  lling_nanmean(se
-00015730: 6c66 2c20 7769 6e64 6f77 3a20 696e 7420  lf, window: int 
-00015740: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
-00015750: 793a 0d0a 2020 2020 2020 2020 7265 7475  y:..        retu
-00015760: 726e 2072 632e 526f 6c6c 696e 6728 7365  rn rc.Rolling(se
-00015770: 6c66 2c20 524f 4c4c 494e 475f 4655 4e43  lf, ROLLING_FUNC
-00015780: 5449 4f4e 532e 524f 4c4c 494e 475f 4e41  TIONS.ROLLING_NA
-00015790: 4e4d 4541 4e2c 2077 696e 646f 7729 0d0a  NMEAN, window)..
-000157a0: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
-000157b0: 675f 7175 616e 7469 6c65 2873 656c 662c  g_quantile(self,
-000157c0: 2071 2c20 7769 6e64 6f77 3a20 696e 7420   q, window: int 
-000157d0: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
-000157e0: 793a 0d0a 2020 2020 2020 2020 7769 6e64  y:..        wind
-000157f0: 6f77 203d 206d 696e 2877 696e 646f 772c  ow = min(window,
-00015800: 206c 656e 2873 656c 6629 290d 0a20 2020   len(self))..   
-00015810: 2020 2020 2077 696e 646f 7750 6172 616d       windowParam
-00015820: 203d 2072 6f6c 6c69 6e67 5f71 7561 6e74   = rolling_quant
-00015830: 696c 655f 6675 6e63 5061 7261 6d28 712c  ile_funcParam(q,
-00015840: 2077 696e 646f 7729 0d0a 2020 2020 2020   window)..      
-00015850: 2020 7265 7475 726e 2072 632e 526f 6c6c    return rc.Roll
-00015860: 696e 6728 7365 6c66 2c20 524f 4c4c 494e  ing(self, ROLLIN
-00015870: 475f 4655 4e43 5449 4f4e 532e 524f 4c4c  G_FUNCTIONS.ROLL
-00015880: 494e 475f 5155 414e 5449 4c45 2c20 7769  ING_QUANTILE, wi
-00015890: 6e64 6f77 5061 7261 6d29 0d0a 0d0a 2020  ndowParam)....  
-000158a0: 2020 6465 6620 726f 6c6c 696e 675f 7661    def rolling_va
-000158b0: 7228 7365 6c66 2c20 7769 6e64 6f77 3a20  r(self, window: 
-000158c0: 696e 7420 3d20 3329 202d 3e20 4661 7374  int = 3) -> Fast
-000158d0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-000158e0: 7265 7475 726e 2072 632e 526f 6c6c 696e  return rc.Rollin
-000158f0: 6728 7365 6c66 2c20 524f 4c4c 494e 475f  g(self, ROLLING_
-00015900: 4655 4e43 5449 4f4e 532e 524f 4c4c 494e  FUNCTIONS.ROLLIN
-00015910: 475f 5641 522c 2077 696e 646f 7729 0d0a  G_VAR, window)..
-00015920: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
-00015930: 675f 6e61 6e76 6172 2873 656c 662c 2077  g_nanvar(self, w
-00015940: 696e 646f 773a 2069 6e74 203d 2033 2920  indow: int = 3) 
-00015950: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
-00015960: 2020 2020 2020 2072 6574 7572 6e20 7263         return rc
-00015970: 2e52 6f6c 6c69 6e67 2873 656c 662c 2052  .Rolling(self, R
-00015980: 4f4c 4c49 4e47 5f46 554e 4354 494f 4e53  OLLING_FUNCTIONS
-00015990: 2e52 4f4c 4c49 4e47 5f4e 414e 5641 522c  .ROLLING_NANVAR,
-000159a0: 2077 696e 646f 7729 0d0a 0d0a 2020 2020   window)....    
-000159b0: 6465 6620 726f 6c6c 696e 675f 7374 6428  def rolling_std(
-000159c0: 7365 6c66 2c20 7769 6e64 6f77 3a20 696e  self, window: in
-000159d0: 7420 3d20 3329 202d 3e20 4661 7374 4172  t = 3) -> FastAr
-000159e0: 7261 793a 0d0a 2020 2020 2020 2020 7265  ray:..        re
-000159f0: 7475 726e 2072 632e 526f 6c6c 696e 6728  turn rc.Rolling(
-00015a00: 7365 6c66 2c20 524f 4c4c 494e 475f 4655  self, ROLLING_FU
-00015a10: 4e43 5449 4f4e 532e 524f 4c4c 494e 475f  NCTIONS.ROLLING_
-00015a20: 5354 442c 2077 696e 646f 7729 0d0a 0d0a  STD, window)....
-00015a30: 2020 2020 6465 6620 726f 6c6c 696e 675f      def rolling_
-00015a40: 6e61 6e73 7464 2873 656c 662c 2077 696e  nanstd(self, win
-00015a50: 646f 773a 2069 6e74 203d 2033 2920 2d3e  dow: int = 3) ->
-00015a60: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-00015a70: 2020 2020 2072 6574 7572 6e20 7263 2e52       return rc.R
-00015a80: 6f6c 6c69 6e67 2873 656c 662c 2052 4f4c  olling(self, ROL
-00015a90: 4c49 4e47 5f46 554e 4354 494f 4e53 2e52  LING_FUNCTIONS.R
-00015aa0: 4f4c 4c49 4e47 5f4e 414e 5354 442c 2077  OLLING_NANSTD, w
-00015ab0: 696e 646f 7729 0d0a 0d0a 2020 2020 2323  indow)....    ##
-00015ac0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015ad0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015ae0: 2323 2323 2323 2323 2323 230d 0a20 2020  ###########..   
-00015af0: 2023 2054 696d 6557 696e 646f 7720 7365   # TimeWindow se
-00015b00: 6374 696f 6e20 2863 616e 6e6f 7420 6861  ction (cannot ha
-00015b10: 6e64 6c65 2073 7472 6964 6573 292c 2074  ndle strides), t
-00015b20: 696d 655f 6172 7261 7920 6d75 7374 2062  ime_array must b
-00015b30: 6520 494e 5436 340d 0a20 2020 2023 2323  e INT64..    ###
-00015b40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015b50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015b60: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
-00015b70: 6465 6620 7469 6d65 7769 6e64 6f77 5f73  def timewindow_s
-00015b80: 756d 2873 656c 662c 2074 696d 655f 6172  um(self, time_ar
-00015b90: 7261 792c 2074 696d 655f 6469 7374 293a  ray, time_dist):
-00015ba0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00015bb0: 2020 2020 2020 2054 6865 2069 6e70 7574         The input
-00015bc0: 2061 7272 6179 206d 7573 7420 6265 2069   array must be i
-00015bd0: 6e74 3634 2061 6e64 2073 6f72 7465 6420  nt64 and sorted 
-00015be0: 7769 7468 2065 7665 7220 696e 6372 6561  with ever increa
-00015bf0: 7369 6e67 2076 616c 7565 732e 0d0a 2020  sing values...  
-00015c00: 2020 2020 2020 5375 6d73 2075 7020 7468        Sums up th
-00015c10: 6520 7661 6c75 6573 2066 6f72 2061 2067  e values for a g
-00015c20: 6976 656e 2074 696d 6520 7769 6e64 6f77  iven time window
-00015c30: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00015c40: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00015c50: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00015c60: 2020 2020 2074 696d 655f 6172 7261 793a       time_array:
-00015c70: 2073 6f72 7465 6420 696e 7465 6765 7220   sorted integer 
-00015c80: 6172 7261 7920 6f66 2074 696d 6573 7461  array of timesta
-00015c90: 6d70 730d 0a20 2020 2020 2020 2074 696d  mps..        tim
-00015ca0: 655f 6469 7374 3a20 696e 7465 6765 7220  e_dist: integer 
-00015cb0: 7661 6c75 6520 6f66 2074 6865 2074 696d  value of the tim
-00015cc0: 6520 7769 6e64 6f77 2073 697a 650d 0a0d  e window size...
-00015cd0: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-00015ce0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00015cf0: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
-00015d00: 2061 3d72 742e 6172 616e 6765 2831 302c   a=rt.arange(10,
-00015d10: 2064 7479 7065 3d72 742e 696e 7436 3429   dtype=rt.int64)
-00015d20: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00015d30: 7469 6d65 7769 6e64 6f77 5f73 756d 2861  timewindow_sum(a
-00015d40: 2c35 290d 0a20 2020 2020 2020 2046 6173  ,5)..        Fas
-00015d50: 7441 7272 6179 285b 2030 2c20 2031 2c20  tArray([ 0,  1, 
-00015d60: 2033 2c20 2036 2c20 3130 2c20 3135 2c20   3,  6, 10, 15, 
-00015d70: 3231 2c20 3237 2c20 3333 2c20 3339 5d2c  21, 27, 33, 39],
-00015d80: 2064 7479 7065 3d69 6e74 3634 290d 0a0d   dtype=int64)...
-00015d90: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00015da0: 2020 2020 2020 7265 7475 726e 2072 632e        return rc.
-00015db0: 5469 6d65 5769 6e64 6f77 2873 656c 662c  TimeWindow(self,
-00015dc0: 2074 696d 655f 6172 7261 792c 2054 494d   time_array, TIM
-00015dd0: 4557 494e 444f 575f 4655 4e43 5449 4f4e  EWINDOW_FUNCTION
-00015de0: 532e 5449 4d45 5749 4e44 4f57 5f53 554d  S.TIMEWINDOW_SUM
-00015df0: 2c20 7469 6d65 5f64 6973 7429 0d0a 0d0a  , time_dist)....
-00015e00: 2020 2020 6465 6620 7469 6d65 7769 6e64      def timewind
-00015e10: 6f77 5f70 726f 6428 7365 6c66 2c20 7469  ow_prod(self, ti
-00015e20: 6d65 5f61 7272 6179 2c20 7469 6d65 5f64  me_array, time_d
-00015e30: 6973 7429 3a0d 0a20 2020 2020 2020 2022  ist):..        "
-00015e40: 2222 0d0a 2020 2020 2020 2020 5468 6520  ""..        The 
-00015e50: 696e 7075 7420 6172 7261 7920 6d75 7374  input array must
-00015e60: 2062 6520 696e 7436 3420 616e 6420 736f   be int64 and so
-00015e70: 7274 6564 2077 6974 6820 6576 6572 2069  rted with ever i
-00015e80: 6e63 7265 6173 696e 6720 7661 6c75 6573  ncreasing values
-00015e90: 2e0d 0a20 2020 2020 2020 204d 756c 7469  ...        Multi
-00015ea0: 706c 6965 7320 7570 2074 6865 2076 616c  plies up the val
-00015eb0: 7565 7320 666f 7220 6120 6769 7665 6e20  ues for a given 
-00015ec0: 7469 6d65 2077 696e 646f 772e 0d0a 0d0a  time window.....
-00015ed0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-00015ee0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-00015ef0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00015f00: 7469 6d65 5f61 7272 6179 3a20 736f 7274  time_array: sort
-00015f10: 6564 2069 6e74 6567 6572 2061 7272 6179  ed integer array
-00015f20: 206f 6620 7469 6d65 7374 616d 7073 0d0a   of timestamps..
-00015f30: 2020 2020 2020 2020 7469 6d65 5f64 6973          time_dis
-00015f40: 743a 2069 6e74 6567 6572 2076 616c 7565  t: integer value
-00015f50: 206f 6620 7468 6520 7469 6d65 2077 696e   of the time win
-00015f60: 646f 7720 7369 7a65 0d0a 0d0a 2020 2020  dow size....    
-00015f70: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-00015f80: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-00015f90: 2020 2020 2020 2020 3e3e 3e20 613d 7274          >>> a=rt
-00015fa0: 2e61 7261 6e67 6528 3130 2c20 6474 7970  .arange(10, dtyp
-00015fb0: 653d 7274 2e69 6e74 3634 290d 0a20 2020  e=rt.int64)..   
-00015fc0: 2020 2020 203e 3e3e 2061 2e74 696d 6577       >>> a.timew
-00015fd0: 696e 646f 775f 7072 6f64 2861 2c35 290d  indow_prod(a,5).
-00015fe0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00015ff0: 6179 285b 2020 2020 302c 2020 2020 2030  ay([    0,     0
-00016000: 2c20 2020 2020 302c 2020 2020 2030 2c20  ,     0,     0, 
-00016010: 2020 2020 302c 2020 2020 2030 2c20 2020      0,     0,   
-00016020: 3732 302c 2020 3530 3430 2c20 3230 3136  720,  5040, 2016
-00016030: 302c 2036 3034 3830 5d2c 2064 7479 7065  0, 60480], dtype
-00016040: 3d69 6e74 3634 290d 0a20 2020 2020 2020  =int64)..       
-00016050: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
-00016060: 7475 726e 2072 632e 5469 6d65 5769 6e64  turn rc.TimeWind
-00016070: 6f77 2873 656c 662c 2074 696d 655f 6172  ow(self, time_ar
-00016080: 7261 792c 2054 494d 4557 494e 444f 575f  ray, TIMEWINDOW_
-00016090: 4655 4e43 5449 4f4e 532e 5449 4d45 5749  FUNCTIONS.TIMEWI
-000160a0: 4e44 4f57 5f50 524f 442c 2074 696d 655f  NDOW_PROD, time_
-000160b0: 6469 7374 290d 0a0d 0a20 2020 2023 2323  dist)....    ###
-000160c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000160d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000160e0: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
-000160f0: 2320 426f 7474 6c65 6e65 636b 2073 6563  # Bottleneck sec
-00016100: 7469 6f6e 2028 6f6e 6c79 2068 616e 646c  tion (only handl
-00016110: 6573 2069 6e74 3332 2f69 6e74 3634 2f66  es int32/int64/f
-00016120: 6c6f 6174 3332 2f66 6c6f 6174 3634 290d  loat32/float64).
-00016130: 0a20 2020 2023 2062 6f74 746c 656e 6563  .    # bottlenec
-00016140: 6b20 6973 206f 7074 696f 6e61 6c0d 0a20  k is optional.. 
-00016150: 2020 2023 2323 2323 2323 2323 2323 2323     #############
-00016160: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016170: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016180: 0d0a 2020 2020 6465 6620 6d6f 7665 5f73  ..    def move_s
-00016190: 756d 2873 656c 662c 202a 6172 6773 2c20  um(self, *args, 
-000161a0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-000161b0: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
-000161c0: 7665 5f73 756d 2873 656c 662c 202a 6172  ve_sum(self, *ar
-000161d0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
-000161e0: 0a20 2020 2064 6566 206d 6f76 655f 6d65  .    def move_me
-000161f0: 616e 2873 656c 662c 202a 6172 6773 2c20  an(self, *args, 
-00016200: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-00016210: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
-00016220: 7665 5f6d 6561 6e28 7365 6c66 2c20 2a61  ve_mean(self, *a
-00016230: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
-00016240: 0d0a 2020 2020 6465 6620 6d6f 7665 5f73  ..    def move_s
-00016250: 7464 2873 656c 662c 202a 6172 6773 2c20  td(self, *args, 
-00016260: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-00016270: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
-00016280: 7665 5f73 7464 2873 656c 662c 202a 6172  ve_std(self, *ar
-00016290: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
-000162a0: 0a20 2020 2064 6566 206d 6f76 655f 7661  .    def move_va
-000162b0: 7228 7365 6c66 2c20 2a61 7267 732c 202a  r(self, *args, *
-000162c0: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
-000162d0: 2020 2072 6574 7572 6e20 626e 2e6d 6f76     return bn.mov
-000162e0: 655f 7661 7228 7365 6c66 2c20 2a61 7267  e_var(self, *arg
-000162f0: 732c 202a 2a6b 7761 7267 7329 0d0a 0d0a  s, **kwargs)....
-00016300: 2020 2020 6465 6620 6d6f 7665 5f6d 696e      def move_min
-00016310: 2873 656c 662c 202a 6172 6773 2c20 2a2a  (self, *args, **
-00016320: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
-00016330: 2020 7265 7475 726e 2062 6e2e 6d6f 7665    return bn.move
-00016340: 5f6d 696e 2873 656c 662c 202a 6172 6773  _min(self, *args
-00016350: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-00016360: 2020 2064 6566 206d 6f76 655f 6d61 7828     def move_max(
-00016370: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
-00016380: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
-00016390: 2072 6574 7572 6e20 626e 2e6d 6f76 655f   return bn.move_
-000163a0: 6d61 7828 7365 6c66 2c20 2a61 7267 732c  max(self, *args,
-000163b0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-000163c0: 2020 6465 6620 6d6f 7665 5f61 7267 6d69    def move_argmi
-000163d0: 6e28 7365 6c66 2c20 2a61 7267 732c 202a  n(self, *args, *
-000163e0: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
-000163f0: 2020 2072 6574 7572 6e20 626e 2e6d 6f76     return bn.mov
-00016400: 655f 6172 676d 696e 2873 656c 662c 202a  e_argmin(self, *
-00016410: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
-00016420: 0a0d 0a20 2020 2064 6566 206d 6f76 655f  ...    def move_
-00016430: 6172 676d 6178 2873 656c 662c 202a 6172  argmax(self, *ar
-00016440: 6773 2c20 2a2a 6b77 6172 6773 293a 0d0a  gs, **kwargs):..
-00016450: 2020 2020 2020 2020 7265 7475 726e 2062          return b
-00016460: 6e2e 6d6f 7665 5f61 7267 6d61 7828 7365  n.move_argmax(se
-00016470: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
-00016480: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
-00016490: 6d6f 7665 5f6d 6564 6961 6e28 7365 6c66  move_median(self
-000164a0: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
-000164b0: 7329 3a0d 0a20 2020 2020 2020 2072 6574  s):..        ret
-000164c0: 7572 6e20 626e 2e6d 6f76 655f 6d65 6469  urn bn.move_medi
-000164d0: 616e 2873 656c 662c 202a 6172 6773 2c20  an(self, *args, 
-000164e0: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-000164f0: 2064 6566 206d 6f76 655f 7261 6e6b 2873   def move_rank(s
-00016500: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
-00016510: 6172 6773 293a 0d0a 2020 2020 2020 2020  args):..        
-00016520: 7265 7475 726e 2062 6e2e 6d6f 7665 5f72  return bn.move_r
-00016530: 616e 6b28 7365 6c66 2c20 2a61 7267 732c  ank(self, *args,
-00016540: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-00016550: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-00016560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-000165a0: 0a20 2020 2064 6566 2072 6570 6c61 6365  .    def replace
-000165b0: 2873 656c 662c 206f 6c64 2c20 6e65 7729  (self, old, new)
-000165c0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-000165d0: 6e20 626e 2e72 6570 6c61 6365 2873 656c  n bn.replace(sel
-000165e0: 662c 206f 6c64 2c20 6e65 7729 0d0a 0d0a  f, old, new)....
-000165f0: 2020 2020 6465 6620 7061 7274 6974 696f      def partitio
-00016600: 6e32 2873 656c 662c 202a 6172 6773 2c20  n2(self, *args, 
-00016610: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-00016620: 2020 2020 7265 7475 726e 2062 6e2e 7061      return bn.pa
-00016630: 7274 6974 696f 6e28 7365 6c66 2c20 2a61  rtition(self, *a
-00016640: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
-00016650: 0d0a 2020 2020 6465 6620 6172 6770 6172  ..    def argpar
-00016660: 7469 7469 6f6e 3228 7365 6c66 2c20 2a61  tition2(self, *a
-00016670: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
-00016680: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00016690: 626e 2e61 7267 7061 7274 6974 696f 6e28  bn.argpartition(
-000166a0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
-000166b0: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
-000166c0: 6620 7261 6e6b 6461 7461 2873 656c 662c  f rankdata(self,
-000166d0: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
-000166e0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-000166f0: 726e 2062 6e2e 7261 6e6b 6461 7461 2873  rn bn.rankdata(s
-00016700: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
-00016710: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
-00016720: 206e 616e 7261 6e6b 6461 7461 2873 656c   nanrankdata(sel
-00016730: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
-00016740: 6773 293a 0d0a 2020 2020 2020 2020 7265  gs):..        re
-00016750: 7475 726e 2062 6e2e 6e61 6e72 616e 6b64  turn bn.nanrankd
-00016760: 6174 6128 7365 6c66 2c20 2a61 7267 732c  ata(self, *args,
-00016770: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-00016780: 2020 6465 6620 7075 7368 2873 656c 662c    def push(self,
-00016790: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
-000167a0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-000167b0: 726e 2062 6e2e 7075 7368 2873 656c 662c  rn bn.push(self,
-000167c0: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
-000167d0: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
-000167e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000167f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016820: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-00016830: 6973 736f 7274 6564 2873 656c 6629 202d  issorted(self) -
-00016840: 3e20 626f 6f6c 3a0d 0a20 2020 2020 2020  > bool:..       
-00016850: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
-00016860: 7475 726e 2054 7275 6520 6966 2074 6865  turn True if the
-00016870: 2061 7272 6179 2069 7320 736f 7274 6564   array is sorted
-00016880: 2c20 4661 6c73 6520 6f74 6865 7277 6973  , False otherwis
-00016890: 652e 0d0a 0d0a 2020 2020 2020 2020 4e61  e.....        Na
-000168a0: 4e73 2061 7420 7468 6520 656e 6420 6f66  Ns at the end of
-000168b0: 2061 6e20 6172 7261 7920 6172 6520 636f   an array are co
-000168c0: 6e73 6964 6572 6564 2073 6f72 7465 642e  nsidered sorted.
-000168d0: 0d0a 0d0a 2020 2020 2020 2020 4361 6c6c  ....        Call
-000168e0: 7320 3a6d 6574 683a 6072 6970 7461 626c  s :meth:`riptabl
-000168f0: 652e 6973 736f 7274 6564 602e 0d0a 0d0a  e.issorted`.....
-00016900: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-00016910: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00016920: 0d0a 2020 2020 2020 2020 626f 6f6c 0d0a  ..        bool..
-00016930: 2020 2020 2020 2020 2020 2020 5472 7565              True
-00016940: 2069 6620 7468 6520 6172 7261 7920 6973   if the array is
-00016950: 2073 6f72 7465 642c 2046 616c 7365 206f   sorted, False o
-00016960: 7468 6572 7769 7365 2e0d 0a0d 0a20 2020  therwise.....   
-00016970: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-00016980: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00016990: 0a20 2020 2020 2020 2072 6970 7461 626c  .        riptabl
-000169a0: 652e 6973 736f 7274 6564 0d0a 0d0a 2020  e.issorted....  
-000169b0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
-000169c0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-000169d0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-000169e0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-000169f0: 2761 272c 2027 6227 2c20 2763 275d 290d  'a', 'b', 'c']).
-00016a00: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
-00016a10: 7373 6f72 7465 6428 290d 0a20 2020 2020  ssorted()..     
-00016a20: 2020 2054 7275 650d 0a0d 0a20 2020 2020     True....     
-00016a30: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
-00016a40: 7374 4172 7261 7928 5b31 2e30 2c20 322e  stArray([1.0, 2.
-00016a50: 302c 2033 2e30 2c20 7274 2e6e 616e 5d29  0, 3.0, rt.nan])
-00016a60: 0d0a 2020 2020 2020 2020 3e3e 3e20 7274  ..        >>> rt
-00016a70: 2e69 7373 6f72 7465 6428 6129 0d0a 2020  .issorted(a)..  
-00016a80: 2020 2020 2020 5472 7565 0d0a 0d0a 2020        True....  
-00016a90: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-00016aa0: 2e46 6173 7441 7272 6179 285b 2761 272c  .FastArray(['a',
-00016ab0: 2027 6327 2c20 2762 275d 290d 0a20 2020   'c', 'b'])..   
-00016ac0: 2020 2020 203e 3e3e 2061 2e69 7373 6f72       >>> a.issor
-00016ad0: 7465 6428 290d 0a20 2020 2020 2020 2046  ted()..        F
-00016ae0: 616c 7365 0d0a 2020 2020 2020 2020 2222  alse..        ""
-00016af0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-00016b00: 6e20 6973 736f 7274 6564 2873 656c 6629  n issorted(self)
-00016b10: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-00016b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016b60: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
-00016b70: 756e 6172 795f 6f70 2873 656c 662c 2066  unary_op(self, f
-00016b80: 756e 636e 756d 2c20 6661 6e63 793d 4661  uncnum, fancy=Fa
-00016b90: 6c73 6529 202d 3e20 4661 7374 4172 7261  lse) -> FastArra
-00016ba0: 793a 0d0a 2020 2020 2020 2020 6966 2073  y:..        if s
-00016bb0: 656c 662e 5f69 735f 6e6f 745f 7375 7070  elf._is_not_supp
-00016bc0: 6f72 7465 6428 7365 6c66 293a 0d0a 2020  orted(self):..  
-00016bd0: 2020 2020 2020 2020 2020 2320 6d61 6b65            # make
-00016be0: 2069 7420 636f 6e74 6967 756f 7573 0d0a   it contiguous..
-00016bf0: 2020 2020 2020 2020 2020 2020 6172 7220              arr 
-00016c00: 3d20 7365 6c66 2e63 6f70 7928 290d 0a20  = self.copy().. 
-00016c10: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00016c20: 2020 2020 2020 2020 2020 6172 7220 3d20            arr = 
-00016c30: 7365 6c66 0d0a 0d0a 2020 2020 2020 2020  self....        
-00016c40: 6675 6e63 203d 2054 7970 6552 6567 6973  func = TypeRegis
-00016c50: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
-00016c60: 4241 5349 434d 4154 485f 4f4e 455f 494e  BASICMATH_ONE_IN
-00016c70: 5055 540d 0a20 2020 2020 2020 2072 6573  PUT..        res
-00016c80: 756c 7420 3d20 6675 6e63 2861 7272 2c20  ult = func(arr, 
-00016c90: 6675 6e63 6e75 6d2c 2030 290d 0a0d 0a20  funcnum, 0).... 
-00016ca0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-00016cb0: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-00016cc0: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
-00016cd0: 6545 7272 6f72 2866 2243 6f75 6c64 206e  eError(f"Could n
-00016ce0: 6f74 2070 6572 666f 726d 206f 7065 7261  ot perform opera
-00016cf0: 7469 6f6e 207b 6675 6e63 6e75 6d7d 206f  tion {funcnum} o
-00016d00: 6e20 4661 7374 4172 7261 7920 6f66 2064  n FastArray of d
-00016d10: 7479 7065 207b 6172 722e 6474 7970 657d  type {arr.dtype}
-00016d20: 2229 0d0a 2020 2020 2020 2020 6966 2066  ")..        if f
-00016d30: 616e 6379 3a0d 0a20 2020 2020 2020 2020  ancy:..         
-00016d40: 2020 2072 6573 756c 7420 3d20 626f 6f6c     result = bool
-00016d50: 5f74 6f5f 6661 6e63 7928 7265 7375 6c74  _to_fancy(result
-00016d60: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00016d70: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
-00016d80: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016d90: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016da0: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
-00016db0: 2020 2023 2042 6f6f 6c65 616e 2073 6563     # Boolean sec
-00016dc0: 7469 6f6e 0d0a 2020 2020 2323 2323 2323  tion..    ######
-00016dd0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016de0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016df0: 2323 2323 2323 230d 0a20 2020 2064 6566  #######..    def
-00016e00: 2069 736e 6f72 6d61 6c28 7365 6c66 2c20   isnormal(self, 
-00016e10: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
-00016e20: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00016e30: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
-00016e40: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
-00016e50: 524d 414c 2c20 6661 6e63 793d 6661 6e63  RMAL, fancy=fanc
-00016e60: 7929 0d0a 0d0a 2020 2020 6465 6620 6973  y)....    def is
-00016e70: 6e6f 746e 6f72 6d61 6c28 7365 6c66 2c20  notnormal(self, 
-00016e80: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
-00016e90: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00016ea0: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
-00016eb0: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
-00016ec0: 544e 4f52 4d41 4c2c 2066 616e 6379 3d66  TNORMAL, fancy=f
-00016ed0: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
-00016ee0: 2069 736e 616e 2873 656c 662c 2066 616e   isnan(self, fan
-00016ef0: 6379 3d46 616c 7365 293a 0d0a 2020 2020  cy=False):..    
-00016f00: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00016f10: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-00016f20: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-00016f30: 7275 6520 666f 7220 6561 6368 2065 6c65  rue for each ele
-00016f40: 6d65 6e74 2074 6861 7427 7320 6120 4e61  ment that's a Na
-00016f50: 4e20 284e 6f74 2061 204e 756d 6265 7229  N (Not a Number)
-00016f60: 2c0d 0a20 2020 2020 2020 2046 616c 7365  ,..        False
-00016f70: 206f 7468 6572 7769 7365 2e0d 0a0d 0a20   otherwise..... 
-00016f80: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-00016f90: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00016fa0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
-00016fb0: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
-00016fc0: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
-00016fd0: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
-00016fe0: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
-00016ff0: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
-00017000: 7320 6f66 2074 6865 2054 7275 6520 284e  s of the True (N
-00017010: 614e 2920 7661 6c75 6573 2e0d 0a0d 0a20  aN) values..... 
-00017020: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00017030: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00017040: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
-00017050: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
-00017060: 2020 4120 6046 6173 7441 7272 6179 6020    A `FastArray` 
-00017070: 6f66 2062 6f6f 6c65 616e 7320 6f72 2069  of booleans or i
-00017080: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
-00017090: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
-000170a0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-000170b0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-000170c0: 2e69 736e 6f74 6e61 6e2c 2046 6173 7441  .isnotnan, FastA
-000170d0: 7272 6179 2e6e 6f74 6e61 2c20 4661 7374  rray.notna, Fast
-000170e0: 4172 7261 792e 6973 6e61 6e6f 727a 6572  Array.isnanorzer
-000170f0: 6f2c 2072 6970 7461 626c 652e 6973 6e61  o, riptable.isna
-00017100: 6e2c 0d0a 2020 2020 2020 2020 7269 7074  n,..        ript
-00017110: 6162 6c65 2e69 736e 6f74 6e61 6e2c 2072  able.isnotnan, r
-00017120: 6970 7461 626c 652e 6973 6e61 6e6f 727a  iptable.isnanorz
-00017130: 6572 6f2c 2043 6174 6567 6f72 6963 616c  ero, Categorical
-00017140: 2e69 736e 616e 2c0d 0a20 2020 2020 2020  .isnan,..       
-00017150: 2043 6174 6567 6f72 6963 616c 2e69 736e   Categorical.isn
-00017160: 6f74 6e61 6e2c 2043 6174 6567 6f72 6963  otnan, Categoric
-00017170: 616c 2e6e 6f74 6e61 2c20 4461 7465 2e69  al.notna, Date.i
-00017180: 736e 616e 2c20 4461 7465 2e69 736e 6f74  snan, Date.isnot
-00017190: 6e61 6e2c 0d0a 2020 2020 2020 2020 4461  nan,..        Da
-000171a0: 7465 5469 6d65 4e61 6e6f 2e69 736e 616e  teTimeNano.isnan
-000171b0: 2c20 4461 7465 5469 6d65 4e61 6e6f 2e69  , DateTimeNano.i
-000171c0: 736e 6f74 6e61 6e0d 0a20 2020 2020 2020  snotnan..       
-000171d0: 2044 6174 6173 6574 2e6d 6173 6b5f 6f72   Dataset.mask_or
-000171e0: 5f69 736e 616e 203a 0d0a 2020 2020 2020  _isnan :..      
-000171f0: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
-00017200: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
-00017210: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
-00017220: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
-00017230: 7468 6174 2063 6f6e 7461 696e 730d 0a20  that contains.. 
-00017240: 2020 2020 2020 2020 2020 2061 7420 6c65             at le
-00017250: 6173 7420 6f6e 6520 4e61 4e2e 0d0a 2020  ast one NaN...  
-00017260: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
-00017270: 736b 5f61 6e64 5f69 736e 616e 203a 0d0a  sk_and_isnan :..
-00017280: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
-00017290: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
-000172a0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
-000172b0: 6f72 2065 6163 6820 616c 6c2d 4e61 4e20  or each all-NaN 
-000172c0: 6044 6174 6173 6574 6020 726f 772e 0d0a  `Dataset` row...
-000172d0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-000172e0: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-000172f0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-00017300: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
-00017310: 6179 285b 7274 2e6e 616e 2c20 7274 2e6e  ay([rt.nan, rt.n
-00017320: 616e 2c20 6e70 2e69 6e66 2c20 335d 290d  an, np.inf, 3]).
-00017330: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
-00017340: 736e 616e 2829 0d0a 2020 2020 2020 2020  snan()..        
-00017350: 4661 7374 4172 7261 7928 5b20 5472 7565  FastArray([ True
-00017360: 2c20 2054 7275 652c 2046 616c 7365 2c20  ,  True, False, 
-00017370: 4661 6c73 655d 290d 0a0d 0a20 2020 2020  False])....     
-00017380: 2020 2057 6974 6820 6060 6661 6e63 7920     With ``fancy 
-00017390: 3d20 5472 7565 6060 3a0d 0a0d 0a20 2020  = True``:....   
-000173a0: 2020 2020 203e 3e3e 2061 2e69 736e 616e       >>> a.isnan
-000173b0: 2866 616e 6379 203d 2054 7275 6529 0d0a  (fancy = True)..
-000173c0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-000173d0: 7928 5b30 2c20 315d 290d 0a20 2020 2020  y([0, 1])..     
-000173e0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-000173f0: 7265 7475 726e 2073 656c 662e 5f75 6e61  return self._una
-00017400: 7279 5f6f 7028 4d41 5448 5f4f 5045 5241  ry_op(MATH_OPERA
-00017410: 5449 4f4e 2e49 534e 414e 2c20 6661 6e63  TION.ISNAN, fanc
-00017420: 793d 6661 6e63 7929 0d0a 0d0a 2020 2020  y=fancy)....    
-00017430: 6465 6620 6973 6e6f 746e 616e 2873 656c  def isnotnan(sel
-00017440: 662c 2066 616e 6379 3d46 616c 7365 293a  f, fancy=False):
-00017450: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00017460: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00017470: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00017480: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00017490: 6368 2065 6c65 6d65 6e74 2074 6861 7427  ch element that'
-000174a0: 7320 6e6f 7420 6120 4e61 4e20 284e 6f74  s not a NaN (Not
-000174b0: 2061 0d0a 2020 2020 2020 2020 4e75 6d62   a..        Numb
-000174c0: 6572 292c 2046 616c 7365 206f 7468 6572  er), False other
-000174d0: 7769 7365 2e0d 0a0d 0a20 2020 2020 2020  wise.....       
-000174e0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-000174f0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-00017500: 0a20 2020 2020 2020 2066 616e 6379 203a  .        fancy :
-00017510: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-00017520: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
-00017530: 2020 5365 7420 746f 2054 7275 6520 746f    Set to True to
-00017540: 2069 6e73 7465 6164 2072 6574 7572 6e20   instead return 
-00017550: 7468 6520 696e 6469 6365 7320 6f66 2074  the indices of t
-00017560: 6865 2054 7275 6520 286e 6f6e 2d4e 614e  he True (non-NaN
-00017570: 2920 7661 6c75 6573 2e0d 0a0d 0a20 2020  ) values.....   
-00017580: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00017590: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-000175a0: 2020 2020 2020 2060 4661 7374 4172 7261         `FastArra
-000175b0: 7960 0d0a 2020 2020 2020 2020 2020 2020  y`..            
-000175c0: 4120 6046 6173 7441 7272 6179 6020 6f66  A `FastArray` of
-000175d0: 2062 6f6f 6c65 616e 7320 6f72 2069 6e64   booleans or ind
-000175e0: 6963 6573 2e0d 0a0d 0a20 2020 2020 2020  ices.....       
-000175f0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00017600: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00017610: 2020 2020 2046 6173 7441 7272 6179 2e69       FastArray.i
-00017620: 736e 616e 2c20 4661 7374 4172 7261 792e  snan, FastArray.
-00017630: 6e6f 746e 612c 2046 6173 7441 7272 6179  notna, FastArray
-00017640: 2e69 736e 616e 6f72 7a65 726f 2c20 7269  .isnanorzero, ri
-00017650: 7074 6162 6c65 2e69 736e 616e 2c0d 0a20  ptable.isnan,.. 
-00017660: 2020 2020 2020 2072 6970 7461 626c 652e         riptable.
-00017670: 6973 6e6f 746e 616e 2c20 7269 7074 6162  isnotnan, riptab
-00017680: 6c65 2e69 736e 616e 6f72 7a65 726f 2c20  le.isnanorzero, 
-00017690: 4361 7465 676f 7269 6361 6c2e 6973 6e61  Categorical.isna
-000176a0: 6e2c 0d0a 2020 2020 2020 2020 4361 7465  n,..        Cate
-000176b0: 676f 7269 6361 6c2e 6973 6e6f 746e 616e  gorical.isnotnan
-000176c0: 2c20 4361 7465 676f 7269 6361 6c2e 6e6f  , Categorical.no
-000176d0: 746e 612c 2044 6174 652e 6973 6e61 6e2c  tna, Date.isnan,
-000176e0: 2044 6174 652e 6973 6e6f 746e 616e 2c0d   Date.isnotnan,.
-000176f0: 0a20 2020 2020 2020 2044 6174 6554 696d  .        DateTim
-00017700: 654e 616e 6f2e 6973 6e61 6e2c 2044 6174  eNano.isnan, Dat
-00017710: 6554 696d 654e 616e 6f2e 6973 6e6f 746e  eTimeNano.isnotn
-00017720: 616e 0d0a 2020 2020 2020 2020 4461 7461  an..        Data
-00017730: 7365 742e 6d61 736b 5f6f 725f 6973 6e61  set.mask_or_isna
-00017740: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
-00017750: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-00017760: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-00017770: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
-00017780: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
-00017790: 636f 6e74 6169 6e73 0d0a 2020 2020 2020  contains..      
-000177a0: 2020 2020 2020 6174 206c 6561 7374 206f        at least o
-000177b0: 6e65 204e 614e 2e0d 0a20 2020 2020 2020  ne NaN...       
-000177c0: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
-000177d0: 645f 6973 6e61 6e20 3a0d 0a20 2020 2020  d_isnan :..     
-000177e0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-000177f0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00017800: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00017810: 6368 2061 6c6c 2d4e 614e 2060 4461 7461  ch all-NaN `Data
-00017820: 7365 7460 2072 6f77 2e0d 0a0d 0a20 2020  set` row.....   
-00017830: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-00017840: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00017850: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-00017860: 2072 742e 4661 7374 4172 7261 7928 5b72   rt.FastArray([r
-00017870: 742e 6e61 6e2c 206e 702e 696e 662c 2032  t.nan, np.inf, 2
-00017880: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-00017890: 612e 6973 6e6f 746e 616e 2829 0d0a 2020  a.isnotnan()..  
-000178a0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-000178b0: 5b46 616c 7365 2c20 2054 7275 652c 2020  [False,  True,  
-000178c0: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
-000178d0: 2020 5769 7468 2060 6066 616e 6379 203d    With ``fancy =
-000178e0: 2054 7275 6560 603a 0d0a 0d0a 2020 2020   True``:....    
-000178f0: 2020 2020 3e3e 3e20 612e 6973 6e6f 746e      >>> a.isnotn
-00017900: 616e 2866 616e 6379 203d 2054 7275 6529  an(fancy = True)
-00017910: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00017920: 7261 7928 5b31 2c20 325d 290d 0a20 2020  ray([1, 2])..   
-00017930: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00017940: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
-00017950: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
-00017960: 5241 5449 4f4e 2e49 534e 4f54 4e41 4e2c  RATION.ISNOTNAN,
-00017970: 2066 616e 6379 3d66 616e 6379 290d 0a0d   fancy=fancy)...
-00017980: 0a20 2020 2064 6566 2069 736e 616e 6f72  .    def isnanor
-00017990: 7a65 726f 2873 656c 662c 2066 616e 6379  zero(self, fancy
-000179a0: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
-000179b0: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
-000179c0: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
-000179d0: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
-000179e0: 6520 666f 7220 6561 6368 2065 6c65 6d65  e for each eleme
-000179f0: 6e74 2074 6861 7427 7320 6120 4e61 4e20  nt that's a NaN 
-00017a00: 284e 6f74 2061 204e 756d 6265 7229 0d0a  (Not a Number)..
-00017a10: 2020 2020 2020 2020 6f72 207a 6572 6f2c          or zero,
-00017a20: 2046 616c 7365 206f 7468 6572 7769 7365   False otherwise
-00017a30: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00017a40: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00017a50: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00017a60: 2020 2020 2066 616e 6379 203a 2062 6f6f       fancy : boo
-00017a70: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-00017a80: 0d0a 2020 2020 2020 2020 2020 2020 5365  ..            Se
-00017a90: 7420 746f 2054 7275 6520 746f 2069 6e73  t to True to ins
-00017aa0: 7465 6164 2072 6574 7572 6e20 7468 6520  tead return the 
-00017ab0: 696e 6469 6365 7320 6f66 2074 6865 2054  indices of the T
-00017ac0: 7275 6520 284e 614e 206f 7220 7a65 726f  rue (NaN or zero
-00017ad0: 2920 7661 6c75 6573 2e0d 0a0d 0a20 2020  ) values.....   
-00017ae0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00017af0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00017b00: 2020 2020 2020 2060 4661 7374 4172 7261         `FastArra
-00017b10: 7960 0d0a 2020 2020 2020 2020 2020 2020  y`..            
-00017b20: 4120 6046 6173 7441 7272 6179 6020 6f66  A `FastArray` of
-00017b30: 2062 6f6f 6c65 616e 7320 6f72 2069 6e64   booleans or ind
-00017b40: 6963 6573 2e0d 0a0d 0a20 2020 2020 2020  ices.....       
-00017b50: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00017b60: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00017b70: 2020 2020 2072 6970 7461 626c 652e 6973       riptable.is
-00017b80: 6e61 6e6f 727a 6572 6f2c 2072 6970 7461  nanorzero, ripta
-00017b90: 626c 652e 6973 6e61 6e2c 2072 6970 7461  ble.isnan, ripta
-00017ba0: 626c 652e 6973 6e6f 746e 616e 2c20 4661  ble.isnotnan, Fa
-00017bb0: 7374 4172 7261 792e 6973 6e61 6e2c 0d0a  stArray.isnan,..
-00017bc0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00017bd0: 792e 6973 6e6f 746e 616e 2c20 4361 7465  y.isnotnan, Cate
-00017be0: 676f 7269 6361 6c2e 6973 6e61 6e2c 2043  gorical.isnan, C
-00017bf0: 6174 6567 6f72 6963 616c 2e69 736e 6f74  ategorical.isnot
-00017c00: 6e61 6e2c 2044 6174 652e 6973 6e61 6e2c  nan, Date.isnan,
-00017c10: 0d0a 2020 2020 2020 2020 4461 7465 2e69  ..        Date.i
-00017c20: 736e 6f74 6e61 6e2c 2044 6174 6554 696d  snotnan, DateTim
-00017c30: 654e 616e 6f2e 6973 6e61 6e2c 2044 6174  eNano.isnan, Dat
-00017c40: 6554 696d 654e 616e 6f2e 6973 6e6f 746e  eTimeNano.isnotn
-00017c50: 616e 0d0a 2020 2020 2020 2020 4461 7461  an..        Data
-00017c60: 7365 742e 6d61 736b 5f6f 725f 6973 6e61  set.mask_or_isna
-00017c70: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
-00017c80: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-00017c90: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-00017ca0: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
-00017cb0: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
-00017cc0: 636f 6e74 6169 6e73 0d0a 2020 2020 2020  contains..      
-00017cd0: 2020 2020 2020 6174 206c 6561 7374 206f        at least o
-00017ce0: 6e65 204e 614e 2e0d 0a20 2020 2020 2020  ne NaN...       
-00017cf0: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
-00017d00: 645f 6973 6e61 6e20 3a0d 0a20 2020 2020  d_isnan :..     
-00017d10: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00017d20: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00017d30: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00017d40: 6368 2061 6c6c 2d4e 614e 2060 4461 7461  ch all-NaN `Data
-00017d50: 7365 7460 2072 6f77 2e0d 0a0d 0a20 2020  set` row.....   
-00017d60: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-00017d70: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00017d80: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-00017d90: 2072 742e 4661 7374 4172 7261 7928 5b30   rt.FastArray([0
-00017da0: 2c20 7274 2e6e 616e 2c20 6e70 2e69 6e66  , rt.nan, np.inf
-00017db0: 2c20 335d 290d 0a20 2020 2020 2020 203e  , 3])..        >
-00017dc0: 3e3e 2061 2e69 736e 616e 6f72 7a65 726f  >> a.isnanorzero
-00017dd0: 2829 0d0a 2020 2020 2020 2020 4661 7374  ()..        Fast
-00017de0: 4172 7261 7928 5b20 5472 7565 2c20 2054  Array([ True,  T
-00017df0: 7275 652c 2046 616c 7365 2c20 4661 6c73  rue, False, Fals
-00017e00: 655d 290d 0a0d 0a20 2020 2020 2020 2057  e])....        W
-00017e10: 6974 6820 6060 6661 6e63 7920 3d20 5472  ith ``fancy = Tr
-00017e20: 7565 6060 3a0d 0a0d 0a20 2020 2020 2020  ue``:....       
-00017e30: 203e 3e3e 2061 2e69 736e 616e 6f72 7a65   >>> a.isnanorze
-00017e40: 726f 2866 616e 6379 203d 2054 7275 6529  ro(fancy = True)
-00017e50: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00017e60: 7261 7928 5b30 2c20 315d 290d 0a20 2020  ray([0, 1])..   
-00017e70: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00017e80: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
-00017e90: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
-00017ea0: 5241 5449 4f4e 2e49 534e 414e 4f52 5a45  RATION.ISNANORZE
-00017eb0: 524f 2c20 6661 6e63 793d 6661 6e63 7929  RO, fancy=fancy)
-00017ec0: 0d0a 0d0a 2020 2020 6465 6620 6973 6669  ....    def isfi
-00017ed0: 6e69 7465 2873 656c 662c 2066 616e 6379  nite(self, fancy
-00017ee0: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
-00017ef0: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
-00017f00: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
-00017f10: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
-00017f20: 6520 666f 7220 6561 6368 2066 696e 6974  e for each finit
-00017f30: 6520 6046 6173 7441 7272 6179 6020 656c  e `FastArray` el
-00017f40: 656d 656e 742c 2046 616c 7365 0d0a 2020  ement, False..  
-00017f50: 2020 2020 2020 6f74 6865 7277 6973 652e        otherwise.
-00017f60: 0d0a 0d0a 2020 2020 2020 2020 4120 7661  ....        A va
-00017f70: 6c75 6520 6973 2063 6f6e 7369 6465 7265  lue is considere
-00017f80: 6420 746f 2062 6520 6669 6e69 7465 2069  d to be finite i
-00017f90: 6620 6974 2773 206e 6f74 2070 6f73 6974  f it's not posit
-00017fa0: 6976 6520 6f72 206e 6567 6174 6976 6520  ive or negative 
-00017fb0: 696e 6669 6e69 7479 0d0a 2020 2020 2020  infinity..      
-00017fc0: 2020 6f72 2061 204e 614e 2028 4e6f 7420    or a NaN (Not 
-00017fd0: 6120 4e75 6d62 6572 292e 0d0a 0d0a 2020  a Number).....  
-00017fe0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-00017ff0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00018000: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6661  ----..        fa
-00018010: 6e63 7920 3a20 626f 6f6c 2c20 6465 6661  ncy : bool, defa
-00018020: 756c 7420 4661 6c73 650d 0a20 2020 2020  ult False..     
-00018030: 2020 2020 2020 2053 6574 2074 6f20 5472         Set to Tr
-00018040: 7565 2074 6f20 696e 7374 6561 6420 7265  ue to instead re
-00018050: 7475 726e 2074 6865 2069 6e64 6963 6573  turn the indices
-00018060: 206f 6620 7468 6520 5472 7565 2028 6669   of the True (fi
-00018070: 6e69 7465 2920 7661 6c75 6573 2e0d 0a0d  nite) values....
-00018080: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00018090: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-000180a0: 2d0d 0a20 2020 2020 2020 2060 4661 7374  -..        `Fast
-000180b0: 4172 7261 7960 0d0a 2020 2020 2020 2020  Array`..        
-000180c0: 2020 2020 416e 2061 7272 6179 206f 7220      An array or 
-000180d0: 626f 6f6c 6561 6e73 206f 7220 696e 6469  booleans or indi
-000180e0: 6365 732e 0d0a 0d0a 2020 2020 2020 2020  ces.....        
-000180f0: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-00018100: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-00018110: 2020 2020 4661 7374 4172 7261 792e 6973      FastArray.is
-00018120: 6e6f 7466 696e 6974 652c 2072 6970 7461  notfinite, ripta
-00018130: 626c 652e 6973 6669 6e69 7465 2c20 7269  ble.isfinite, ri
-00018140: 7074 6162 6c65 2e69 736e 6f74 6669 6e69  ptable.isnotfini
-00018150: 7465 2c20 7269 7074 6162 6c65 2e69 7369  te, riptable.isi
-00018160: 6e66 2c0d 0a20 2020 2020 2020 2072 6970  nf,..        rip
-00018170: 7461 626c 652e 6973 6e6f 7469 6e66 2c20  table.isnotinf, 
-00018180: 4661 7374 4172 7261 792e 6973 696e 662c  FastArray.isinf,
-00018190: 2046 6173 7441 7272 6179 2e69 736e 6f74   FastArray.isnot
-000181a0: 696e 660d 0a20 2020 2020 2020 2044 6174  inf..        Dat
-000181b0: 6173 6574 2e6d 6173 6b5f 6f72 5f69 7366  aset.mask_or_isf
-000181c0: 696e 6974 6520 3a0d 0a20 2020 2020 2020  inite :..       
-000181d0: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
-000181e0: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
-000181f0: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
-00018200: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
-00018210: 6861 7420 6861 7320 6174 206c 6561 7374  hat has at least
-00018220: 0d0a 2020 2020 2020 2020 2020 2020 6f6e  ..            on
-00018230: 6520 6669 6e69 7465 2076 616c 7565 2e0d  e finite value..
-00018240: 0a20 2020 2020 2020 2044 6174 6173 6574  .        Dataset
-00018250: 2e6d 6173 6b5f 616e 645f 6973 6669 6e69  .mask_and_isfini
-00018260: 7465 203a 0d0a 2020 2020 2020 2020 2020  te :..          
-00018270: 2020 5265 7475 726e 2061 2062 6f6f 6c65    Return a boole
-00018280: 616e 2061 7272 6179 2074 6861 7427 7320  an array that's 
-00018290: 5472 7565 2066 6f72 2065 6163 6820 6044  True for each `D
-000182a0: 6174 6173 6574 6020 726f 7720 7468 6174  ataset` row that
-000182b0: 2063 6f6e 7461 696e 7320 616c 6c0d 0a20   contains all.. 
-000182c0: 2020 2020 2020 2020 2020 2066 696e 6974             finit
-000182d0: 6520 7661 6c75 6573 2e0d 0a20 2020 2020  e values...     
-000182e0: 2020 2044 6174 6173 6574 2e6d 6173 6b5f     Dataset.mask_
-000182f0: 6f72 5f69 7369 6e66 203a 0d0a 2020 2020  or_isinf :..    
-00018300: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
-00018310: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
-00018320: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
-00018330: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
-00018340: 7720 7468 6174 2068 6173 2061 7420 6c65  w that has at le
-00018350: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
-00018360: 206f 6e65 2076 616c 7565 2074 6861 7427   one value that'
-00018370: 7320 706f 7369 7469 7665 206f 7220 6e65  s positive or ne
-00018380: 6761 7469 7665 2069 6e66 696e 6974 792e  gative infinity.
-00018390: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
-000183a0: 742e 6d61 736b 5f61 6e64 5f69 7369 6e66  t.mask_and_isinf
-000183b0: 203a 0d0a 2020 2020 2020 2020 2020 2020   :..            
-000183c0: 5265 7475 726e 2061 2062 6f6f 6c65 616e  Return a boolean
-000183d0: 2061 7272 6179 2074 6861 7427 7320 5472   array that's Tr
-000183e0: 7565 2066 6f72 2065 6163 6820 6044 6174  ue for each `Dat
-000183f0: 6173 6574 6020 726f 7720 7468 6174 2063  aset` row that c
-00018400: 6f6e 7461 696e 7320 616c 6c0d 0a20 2020  ontains all..   
-00018410: 2020 2020 2020 2020 2069 6e66 696e 6974           infinit
-00018420: 6520 7661 6c75 6573 2e0d 0a0d 0a20 2020  e values.....   
-00018430: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-00018440: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00018450: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-00018460: 2072 742e 4661 7374 4172 7261 7928 5b6e   rt.FastArray([n
-00018470: 702e 696e 662c 206e 702e 4e49 4e46 2c20  p.inf, np.NINF, 
-00018480: 7274 2e6e 616e 2c20 305d 290d 0a20 2020  rt.nan, 0])..   
-00018490: 2020 2020 203e 3e3e 2061 2e69 7366 696e       >>> a.isfin
-000184a0: 6974 6528 290d 0a20 2020 2020 2020 2046  ite()..        F
-000184b0: 6173 7441 7272 6179 285b 4661 6c73 652c  astArray([False,
-000184c0: 2046 616c 7365 2c20 4661 6c73 652c 2020   False, False,  
-000184d0: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
-000184e0: 2020 5769 7468 2060 6066 616e 6379 203d    With ``fancy =
-000184f0: 2054 7275 6560 603a 0d0a 0d0a 2020 2020   True``:....    
-00018500: 2020 2020 3e3e 3e20 612e 6973 6669 6e69      >>> a.isfini
-00018510: 7465 2866 616e 6379 203d 2054 7275 6529  te(fancy = True)
-00018520: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00018530: 7261 7928 5b33 5d29 0d0a 2020 2020 2020  ray([3])..      
-00018540: 2020 2222 220d 0a20 2020 2020 2020 2072    """..        r
-00018550: 6574 7572 6e20 7365 6c66 2e5f 756e 6172  eturn self._unar
-00018560: 795f 6f70 284d 4154 485f 4f50 4552 4154  y_op(MATH_OPERAT
-00018570: 494f 4e2e 4953 4649 4e49 5445 2c20 6661  ION.ISFINITE, fa
-00018580: 6e63 793d 6661 6e63 7929 0d0a 0d0a 2020  ncy=fancy)....  
-00018590: 2020 6465 6620 6973 6e6f 7466 696e 6974    def isnotfinit
-000185a0: 6528 7365 6c66 2c20 6661 6e63 793d 4661  e(self, fancy=Fa
-000185b0: 6c73 6529 3a0d 0a20 2020 2020 2020 2022  lse):..        "
-000185c0: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
-000185d0: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
-000185e0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
-000185f0: 6f72 2065 6163 6820 6e6f 6e2d 6669 6e69  or each non-fini
-00018600: 7465 2060 4661 7374 4172 7261 7960 2065  te `FastArray` e
-00018610: 6c65 6d65 6e74 2c0d 0a20 2020 2020 2020  lement,..       
-00018620: 2046 616c 7365 206f 7468 6572 7769 7365   False otherwise
-00018630: 2e0d 0a0d 0a20 2020 2020 2020 2041 2076  .....        A v
-00018640: 616c 7565 2069 7320 636f 6e73 6964 6572  alue is consider
-00018650: 6564 2074 6f20 6265 2066 696e 6974 6520  ed to be finite 
-00018660: 6966 2069 7427 7320 6e6f 7420 706f 7369  if it's not posi
-00018670: 7469 7665 206f 7220 6e65 6761 7469 7665  tive or negative
-00018680: 2069 6e66 696e 6974 790d 0a20 2020 2020   infinity..     
-00018690: 2020 206f 7220 6120 4e61 4e20 284e 6f74     or a NaN (Not
-000186a0: 2061 204e 756d 6265 7229 2e0d 0a0d 0a20   a Number)..... 
-000186b0: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-000186c0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-000186d0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
-000186e0: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
-000186f0: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
-00018700: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
-00018710: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
-00018720: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
-00018730: 7320 6f66 2074 6865 2054 7275 6520 286e  s of the True (n
-00018740: 6f6e 2d66 696e 6974 6529 2076 616c 7565  on-finite) value
-00018750: 732e 0d0a 0d0a 2020 2020 2020 2020 5265  s.....        Re
-00018760: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-00018770: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00018780: 6046 6173 7441 7272 6179 600d 0a20 2020  `FastArray`..   
-00018790: 2020 2020 2020 2020 2041 6e20 6172 7261           An arra
-000187a0: 7920 6f72 2062 6f6f 6c65 616e 7320 6f72  y or booleans or
-000187b0: 2069 6e64 6963 6573 2e0d 0a0d 0a20 2020   indices.....   
-000187c0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-000187d0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-000187e0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-000187f0: 6179 2e69 7366 696e 6974 652c 2072 6970  ay.isfinite, rip
-00018800: 7461 626c 652e 6973 6669 6e69 7465 2c20  table.isfinite, 
-00018810: 7269 7074 6162 6c65 2e69 736e 6f74 6669  riptable.isnotfi
-00018820: 6e69 7465 2c20 7269 7074 6162 6c65 2e69  nite, riptable.i
-00018830: 7369 6e66 2c0d 0a20 2020 2020 2020 2072  sinf,..        r
-00018840: 6970 7461 626c 652e 6973 6e6f 7469 6e66  iptable.isnotinf
-00018850: 2c20 4661 7374 4172 7261 792e 6973 696e  , FastArray.isin
-00018860: 662c 2046 6173 7441 7272 6179 2e69 736e  f, FastArray.isn
-00018870: 6f74 696e 660d 0a20 2020 2020 2020 2044  otinf..        D
-00018880: 6174 6173 6574 2e6d 6173 6b5f 6f72 5f69  ataset.mask_or_i
-00018890: 7366 696e 6974 6520 3a0d 0a20 2020 2020  sfinite :..     
-000188a0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-000188b0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-000188c0: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-000188d0: 6368 2060 4461 7461 7365 7460 2072 6f77  ch `Dataset` row
-000188e0: 2074 6861 7420 6861 7320 6174 206c 6561   that has at lea
-000188f0: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
-00018900: 6f6e 6520 6669 6e69 7465 2076 616c 7565  one finite value
-00018910: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
-00018920: 6574 2e6d 6173 6b5f 616e 645f 6973 6669  et.mask_and_isfi
-00018930: 6e69 7465 203a 0d0a 2020 2020 2020 2020  nite :..        
-00018940: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
-00018950: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
-00018960: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
-00018970: 6044 6174 6173 6574 6020 726f 7720 7468  `Dataset` row th
-00018980: 6174 2063 6f6e 7461 696e 7320 616c 6c0d  at contains all.
-00018990: 0a20 2020 2020 2020 2020 2020 2066 696e  .            fin
-000189a0: 6974 6520 7661 6c75 6573 2e0d 0a20 2020  ite values...   
-000189b0: 2020 2020 2044 6174 6173 6574 2e6d 6173       Dataset.mas
-000189c0: 6b5f 6f72 5f69 7369 6e66 203a 0d0a 2020  k_or_isinf :..  
-000189d0: 2020 2020 2020 2020 2020 5265 7475 726e            Return
-000189e0: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
-000189f0: 2074 6861 7427 7320 5472 7565 2066 6f72   that's True for
-00018a00: 2065 6163 6820 6044 6174 6173 6574 6020   each `Dataset` 
-00018a10: 726f 7720 7468 6174 2068 6173 2061 7420  row that has at 
-00018a20: 6c65 6173 740d 0a20 2020 2020 2020 2020  least..         
-00018a30: 2020 206f 6e65 2076 616c 7565 2074 6861     one value tha
-00018a40: 7427 7320 706f 7369 7469 7665 206f 7220  t's positive or 
-00018a50: 6e65 6761 7469 7665 2069 6e66 696e 6974  negative infinit
-00018a60: 792e 0d0a 2020 2020 2020 2020 4461 7461  y...        Data
-00018a70: 7365 742e 6d61 736b 5f61 6e64 5f69 7369  set.mask_and_isi
-00018a80: 6e66 203a 0d0a 2020 2020 2020 2020 2020  nf :..          
-00018a90: 2020 5265 7475 726e 2061 2062 6f6f 6c65    Return a boole
-00018aa0: 616e 2061 7272 6179 2074 6861 7427 7320  an array that's 
-00018ab0: 5472 7565 2066 6f72 2065 6163 6820 6044  True for each `D
-00018ac0: 6174 6173 6574 6020 726f 7720 7468 6174  ataset` row that
-00018ad0: 2063 6f6e 7461 696e 7320 616c 6c0d 0a20   contains all.. 
-00018ae0: 2020 2020 2020 2020 2020 2069 6e66 696e             infin
-00018af0: 6974 6520 7661 6c75 6573 2e0d 0a0d 0a20  ite values..... 
-00018b00: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
-00018b10: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00018b20: 2d0d 0a20 2020 2020 2020 203e 3e3e 2061  -..        >>> a
-00018b30: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
-00018b40: 5b6e 702e 696e 662c 206e 702e 4e49 4e46  [np.inf, np.NINF
-00018b50: 2c20 7274 2e6e 616e 2c20 305d 290d 0a20  , rt.nan, 0]).. 
-00018b60: 2020 2020 2020 203e 3e3e 2061 2e69 736e         >>> a.isn
-00018b70: 6f74 6669 6e69 7465 2829 0d0a 2020 2020  otfinite()..    
-00018b80: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
-00018b90: 5472 7565 2c20 2054 7275 652c 2020 5472  True,  True,  Tr
-00018ba0: 7565 2c20 4661 6c73 655d 290d 0a0d 0a20  ue, False]).... 
-00018bb0: 2020 2020 2020 2057 6974 6820 6060 6661         With ``fa
-00018bc0: 6e63 7920 3d20 5472 7565 6060 3a0d 0a0d  ncy = True``:...
-00018bd0: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
-00018be0: 736e 6f74 6669 6e69 7465 2866 616e 6379  snotfinite(fancy
-00018bf0: 203d 2054 7275 6529 0d0a 2020 2020 2020   = True)..      
-00018c00: 2020 4661 7374 4172 7261 7928 5b30 2c20    FastArray([0, 
-00018c10: 312c 2032 5d29 0d0a 2020 2020 2020 2020  1, 2])..        
-00018c20: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
-00018c30: 7572 6e20 7365 6c66 2e5f 756e 6172 795f  urn self._unary_
-00018c40: 6f70 284d 4154 485f 4f50 4552 4154 494f  op(MATH_OPERATIO
-00018c50: 4e2e 4953 4e4f 5446 494e 4954 452c 2066  N.ISNOTFINITE, f
-00018c60: 616e 6379 3d66 616e 6379 290d 0a0d 0a20  ancy=fancy).... 
-00018c70: 2020 2064 6566 2069 7369 6e66 2873 656c     def isinf(sel
-00018c80: 662c 2066 616e 6379 3d46 616c 7365 293a  f, fancy=False):
-00018c90: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00018ca0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00018cb0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00018cc0: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00018cd0: 6368 2060 4661 7374 4172 7261 7960 2065  ch `FastArray` e
-00018ce0: 6c65 6d65 6e74 2074 6861 7427 7320 706f  lement that's po
-00018cf0: 7369 7469 7665 0d0a 2020 2020 2020 2020  sitive..        
-00018d00: 6f72 206e 6567 6174 6976 6520 696e 6669  or negative infi
-00018d10: 6e69 7479 2c20 4661 6c73 6520 6f74 6865  nity, False othe
-00018d20: 7277 6973 652e 0d0a 0d0a 2020 2020 2020  rwise.....      
-00018d30: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00018d40: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00018d50: 0d0a 2020 2020 2020 2020 6661 6e63 7920  ..        fancy 
-00018d60: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00018d70: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00018d80: 2020 2053 6574 2074 6f20 5472 7565 2074     Set to True t
-00018d90: 6f20 696e 7374 6561 6420 7265 7475 726e  o instead return
-00018da0: 2074 6865 2069 6e64 6963 6573 206f 6620   the indices of 
-00018db0: 7468 6520 5472 7565 2028 696e 6669 6e69  the True (infini
-00018dc0: 7465 2920 7661 6c75 6573 2e0d 0a0d 0a20  te) values..... 
-00018dd0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00018de0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00018df0: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
-00018e00: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
-00018e10: 2020 416e 2061 7272 6179 206f 7220 626f    An array or bo
-00018e20: 6f6c 6561 6e73 206f 7220 696e 6469 6365  oleans or indice
-00018e30: 732e 0d0a 0d0a 2020 2020 2020 2020 5365  s.....        Se
-00018e40: 6520 416c 736f 0d0a 2020 2020 2020 2020  e Also..        
-00018e50: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-00018e60: 2020 4661 7374 4172 7261 792e 6973 6e6f    FastArray.isno
-00018e70: 7469 6e66 2c20 4661 7374 4172 7261 792e  tinf, FastArray.
-00018e80: 6973 6669 6e69 7465 2c20 4661 7374 4172  isfinite, FastAr
-00018e90: 7261 792e 6973 6e6f 7466 696e 6974 652c  ray.isnotfinite,
-00018ea0: 0d0a 2020 2020 2020 2020 7269 7074 6162  ..        riptab
-00018eb0: 6c65 2e69 7369 6e66 2c20 7269 7074 6162  le.isinf, riptab
-00018ec0: 6c65 2e69 736e 6f74 696e 662c 2072 6970  le.isnotinf, rip
-00018ed0: 7461 626c 652e 6973 6669 6e69 7465 2c20  table.isfinite, 
-00018ee0: 7269 7074 6162 6c65 2e69 736e 6f74 6669  riptable.isnotfi
-00018ef0: 6e69 7465 0d0a 2020 2020 2020 2020 4461  nite..        Da
-00018f00: 7461 7365 742e 6d61 736b 5f6f 725f 6973  taset.mask_or_is
-00018f10: 6669 6e69 7465 203a 0d0a 2020 2020 2020  finite :..      
-00018f20: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
-00018f30: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
-00018f40: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
-00018f50: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
-00018f60: 7468 6174 2068 6173 2061 7420 6c65 6173  that has at leas
-00018f70: 740d 0a20 2020 2020 2020 2020 2020 206f  t..            o
-00018f80: 6e65 2066 696e 6974 6520 7661 6c75 652e  ne finite value.
-00018f90: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
-00018fa0: 742e 6d61 736b 5f61 6e64 5f69 7366 696e  t.mask_and_isfin
-00018fb0: 6974 6520 3a0d 0a20 2020 2020 2020 2020  ite :..         
-00018fc0: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
-00018fd0: 6561 6e20 6172 7261 7920 7468 6174 2773  ean array that's
-00018fe0: 2054 7275 6520 666f 7220 6561 6368 2060   True for each `
-00018ff0: 4461 7461 7365 7460 2072 6f77 2074 6861  Dataset` row tha
-00019000: 7420 636f 6e74 6169 6e73 2061 6c6c 0d0a  t contains all..
-00019010: 2020 2020 2020 2020 2020 2020 6669 6e69              fini
-00019020: 7465 2076 616c 7565 732e 0d0a 2020 2020  te values...    
-00019030: 2020 2020 4461 7461 7365 742e 6d61 736b      Dataset.mask
-00019040: 5f6f 725f 6973 696e 6620 3a0d 0a20 2020  _or_isinf :..   
-00019050: 2020 2020 2020 2020 2052 6574 7572 6e20           Return 
-00019060: 6120 626f 6f6c 6561 6e20 6172 7261 7920  a boolean array 
-00019070: 7468 6174 2773 2054 7275 6520 666f 7220  that's True for 
-00019080: 6561 6368 2060 4461 7461 7365 7460 2072  each `Dataset` r
-00019090: 6f77 2074 6861 7420 6861 7320 6174 206c  ow that has at l
-000190a0: 6561 7374 0d0a 2020 2020 2020 2020 2020  east..          
-000190b0: 2020 6f6e 6520 7661 6c75 6520 7468 6174    one value that
-000190c0: 2773 2070 6f73 6974 6976 6520 6f72 206e  's positive or n
-000190d0: 6567 6174 6976 6520 696e 6669 6e69 7479  egative infinity
-000190e0: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
-000190f0: 6574 2e6d 6173 6b5f 616e 645f 6973 696e  et.mask_and_isin
-00019100: 6620 3a0d 0a20 2020 2020 2020 2020 2020  f :..           
-00019110: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-00019120: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-00019130: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
-00019140: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
-00019150: 636f 6e74 6169 6e73 2061 6c6c 0d0a 2020  contains all..  
-00019160: 2020 2020 2020 2020 2020 696e 6669 6e69            infini
-00019170: 7465 2076 616c 7565 732e 0d0a 0d0a 2020  te values.....  
-00019180: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
-00019190: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-000191a0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-000191b0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-000191c0: 6e70 2e69 6e66 2c20 6e70 2e4e 494e 462c  np.inf, np.NINF,
-000191d0: 2072 742e 6e61 6e2c 2030 5d29 0d0a 2020   rt.nan, 0])..  
-000191e0: 2020 2020 2020 3e3e 3e20 612e 6973 696e        >>> a.isin
-000191f0: 6628 290d 0a20 2020 2020 2020 2046 6173  f()..        Fas
-00019200: 7441 7272 6179 285b 2054 7275 652c 2020  tArray([ True,  
-00019210: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
-00019220: 7365 5d29 0d0a 0d0a 2020 2020 2020 2020  se])....        
-00019230: 5769 7468 2060 6066 616e 6379 203d 2054  With ``fancy = T
-00019240: 7275 6560 603a 0d0a 0d0a 2020 2020 2020  rue``:....      
-00019250: 2020 3e3e 3e20 612e 6973 696e 6628 6661    >>> a.isinf(fa
-00019260: 6e63 7920 3d20 5472 7565 290d 0a20 2020  ncy = True)..   
-00019270: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00019280: 302c 2031 5d29 0d0a 2020 2020 2020 2020  0, 1])..        
-00019290: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
-000192a0: 7572 6e20 7365 6c66 2e5f 756e 6172 795f  urn self._unary_
-000192b0: 6f70 284d 4154 485f 4f50 4552 4154 494f  op(MATH_OPERATIO
-000192c0: 4e2e 4953 494e 462c 2066 616e 6379 3d66  N.ISINF, fancy=f
-000192d0: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
-000192e0: 2069 736e 6f74 696e 6628 7365 6c66 2c20   isnotinf(self, 
-000192f0: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
-00019300: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00019310: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
-00019320: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
-00019330: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
-00019340: 6046 6173 7441 7272 6179 6020 656c 656d  `FastArray` elem
-00019350: 656e 7420 7468 6174 2773 206e 6f74 2070  ent that's not p
-00019360: 6f73 6974 6976 650d 0a20 2020 2020 2020  ositive..       
-00019370: 206f 7220 6e65 6761 7469 7665 2069 6e66   or negative inf
-00019380: 696e 6974 792c 2046 616c 7365 206f 7468  inity, False oth
-00019390: 6572 7769 7365 2e0d 0a0d 0a20 2020 2020  erwise.....     
-000193a0: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-000193b0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-000193c0: 2d0d 0a20 2020 2020 2020 2066 616e 6379  -..        fancy
-000193d0: 203a 2062 6f6f 6c2c 2064 6566 6175 6c74   : bool, default
-000193e0: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-000193f0: 2020 2020 5365 7420 746f 2054 7275 6520      Set to True 
-00019400: 746f 2069 6e73 7465 6164 2072 6574 7572  to instead retur
-00019410: 6e20 7468 6520 696e 6469 6365 7320 6f66  n the indices of
-00019420: 2074 6865 2054 7275 6520 286e 6f6e 2d69   the True (non-i
-00019430: 6e66 696e 6974 6529 2076 616c 7565 732e  nfinite) values.
-00019440: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-00019450: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-00019460: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
-00019470: 6173 7441 7272 6179 600d 0a20 2020 2020  astArray`..     
-00019480: 2020 2020 2020 2041 6e20 6172 7261 7920         An array 
-00019490: 6f72 2062 6f6f 6c65 616e 7320 6f72 2069  or booleans or i
-000194a0: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
-000194b0: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
-000194c0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-000194d0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-000194e0: 2e69 7369 6e66 2c20 7269 7074 6162 6c65  .isinf, riptable
-000194f0: 2e69 736e 6f74 696e 662c 2072 6970 7461  .isnotinf, ripta
-00019500: 626c 652e 6973 696e 662c 2072 6970 7461  ble.isinf, ripta
-00019510: 626c 652e 6973 6669 6e69 7465 2c0d 0a20  ble.isfinite,.. 
-00019520: 2020 2020 2020 2072 6970 7461 626c 652e         riptable.
-00019530: 6973 6e6f 7466 696e 6974 652c 2046 6173  isnotfinite, Fas
-00019540: 7441 7272 6179 2e69 7366 696e 6974 652c  tArray.isfinite,
-00019550: 2046 6173 7441 7272 6179 2e69 736e 6f74   FastArray.isnot
-00019560: 6669 6e69 7465 0d0a 2020 2020 2020 2020  finite..        
-00019570: 4461 7461 7365 742e 6d61 736b 5f6f 725f  Dataset.mask_or_
-00019580: 6973 6669 6e69 7465 203a 0d0a 2020 2020  isfinite :..    
-00019590: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
-000195a0: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
-000195b0: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
-000195c0: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
-000195d0: 7720 7468 6174 2068 6173 2061 7420 6c65  w that has at le
-000195e0: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
-000195f0: 206f 6e65 2066 696e 6974 6520 7661 6c75   one finite valu
-00019600: 652e 0d0a 2020 2020 2020 2020 4461 7461  e...        Data
-00019610: 7365 742e 6d61 736b 5f61 6e64 5f69 7366  set.mask_and_isf
-00019620: 696e 6974 6520 3a0d 0a20 2020 2020 2020  inite :..       
-00019630: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
-00019640: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
-00019650: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
-00019660: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
-00019670: 6861 7420 636f 6e74 6169 6e73 2061 6c6c  hat contains all
-00019680: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
-00019690: 6e69 7465 2076 616c 7565 732e 0d0a 2020  nite values...  
-000196a0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
-000196b0: 736b 5f6f 725f 6973 696e 6620 3a0d 0a20  sk_or_isinf :.. 
-000196c0: 2020 2020 2020 2020 2020 2052 6574 7572             Retur
-000196d0: 6e20 6120 626f 6f6c 6561 6e20 6172 7261  n a boolean arra
-000196e0: 7920 7468 6174 2773 2054 7275 6520 666f  y that's True fo
-000196f0: 7220 6561 6368 2060 4461 7461 7365 7460  r each `Dataset`
-00019700: 2072 6f77 2074 6861 7420 6861 7320 6174   row that has at
-00019710: 206c 6561 7374 0d0a 2020 2020 2020 2020   least..        
-00019720: 2020 2020 6f6e 6520 7661 6c75 6520 7468      one value th
-00019730: 6174 2773 2070 6f73 6974 6976 6520 6f72  at's positive or
-00019740: 206e 6567 6174 6976 6520 696e 6669 6e69   negative infini
-00019750: 7479 2e0d 0a20 2020 2020 2020 2044 6174  ty...        Dat
-00019760: 6173 6574 2e6d 6173 6b5f 616e 645f 6973  aset.mask_and_is
-00019770: 696e 6620 3a0d 0a20 2020 2020 2020 2020  inf :..         
-00019780: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
-00019790: 6561 6e20 6172 7261 7920 7468 6174 2773  ean array that's
-000197a0: 2054 7275 6520 666f 7220 6561 6368 2060   True for each `
-000197b0: 4461 7461 7365 7460 2072 6f77 2074 6861  Dataset` row tha
-000197c0: 7420 636f 6e74 6169 6e73 2061 6c6c 0d0a  t contains all..
-000197d0: 2020 2020 2020 2020 2020 2020 696e 6669              infi
-000197e0: 6e69 7465 2076 616c 7565 732e 0d0a 0d0a  nite values.....
-000197f0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
-00019800: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00019810: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
-00019820: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
-00019830: 285b 6e70 2e69 6e66 2c20 6e70 2e4e 494e  ([np.inf, np.NIN
-00019840: 462c 2072 742e 6e61 6e2c 2030 5d29 0d0a  F, rt.nan, 0])..
-00019850: 2020 2020 2020 2020 3e3e 3e20 612e 6973          >>> a.is
-00019860: 6e6f 7469 6e66 2829 0d0a 2020 2020 2020  notinf()..      
-00019870: 2020 4661 7374 4172 7261 7928 5b46 616c    FastArray([Fal
-00019880: 7365 2c20 4661 6c73 652c 2020 5472 7565  se, False,  True
-00019890: 2c20 2054 7275 655d 290d 0a0d 0a20 2020  ,  True])....   
-000198a0: 2020 2020 2057 6974 6820 6060 6661 6e63       With ``fanc
-000198b0: 7920 3d20 5472 7565 6060 3a0d 0a0d 0a20  y = True``:.... 
-000198c0: 2020 2020 2020 203e 3e3e 2061 2e69 736e         >>> a.isn
-000198d0: 6f74 696e 6628 6661 6e63 7920 3d20 5472  otinf(fancy = Tr
-000198e0: 7565 290d 0a20 2020 2020 2020 2046 6173  ue)..        Fas
-000198f0: 7441 7272 6179 285b 322c 2033 5d29 0d0a  tArray([2, 3])..
-00019900: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00019910: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00019920: 2e5f 756e 6172 795f 6f70 284d 4154 485f  ._unary_op(MATH_
-00019930: 4f50 4552 4154 494f 4e2e 4953 4e4f 5449  OPERATION.ISNOTI
-00019940: 4e46 2c20 6661 6e63 793d 6661 6e63 7929  NF, fancy=fancy)
-00019950: 0d0a 0d0a 2020 2020 2323 2323 2323 2323  ....    ########
-00019960: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00019970: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00019980: 2323 2323 230d 0a20 2020 2023 2052 6564  #####..    # Red
-00019990: 7563 6520 7365 6374 696f 6e0d 0a20 2020  uce section..   
-000199a0: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
-000199b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000199c0: 2323 2323 2323 2323 2323 2323 2323 0d0a  ##############..
-000199d0: 0d0a 2020 2020 6465 6620 5f66 615f 6669  ..    def _fa_fi
-000199e0: 6c74 6572 5f77 7261 7070 6572 2873 656c  lter_wrapper(sel
-000199f0: 662c 206d 7946 756e 632c 2066 696c 7465  f, myFunc, filte
-00019a00: 723d 4e6f 6e65 2c20 6474 7970 653d 4e6f  r=None, dtype=No
-00019a10: 6e65 293a 0d0a 2020 2020 2020 2020 6966  ne):..        if
-00019a20: 2066 696c 7465 7220 6973 2054 7275 653a   filter is True:
-00019a30: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
-00019a40: 6c74 6572 203d 206f 6e65 7328 6c65 6e28  lter = ones(len(
-00019a50: 7365 6c66 292c 2064 7479 7065 3d62 6f6f  self), dtype=boo
-00019a60: 6c29 0d0a 2020 2020 2020 2020 6966 2066  l)..        if f
-00019a70: 696c 7465 7220 6973 2046 616c 7365 3a0d  ilter is False:.
-00019a80: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-00019a90: 7465 7220 3d20 7a65 726f 7328 6c65 6e28  ter = zeros(len(
-00019aa0: 7365 6c66 292c 2064 7479 7065 3d62 6f6f  self), dtype=boo
-00019ab0: 6c29 0d0a 2020 2020 2020 2020 6966 206c  l)..        if l
-00019ac0: 656e 2866 696c 7465 7229 2021 3d20 6c65  en(filter) != le
-00019ad0: 6e28 7365 6c66 293a 0d0a 2020 2020 2020  n(self):..      
-00019ae0: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-00019af0: 6545 7272 6f72 2822 4669 6c74 6572 2061  eError("Filter a
-00019b00: 6e64 2069 6e70 7574 206e 6f74 2074 6865  nd input not the
-00019b10: 2073 616d 6520 6c65 6e67 7468 2e22 290d   same length.").
-00019b20: 0a0d 0a20 2020 2020 2020 2069 6620 6e6f  ...        if no
-00019b30: 7420 7365 6c66 2e69 7363 6f6d 7075 7461  t self.iscomputa
-00019b40: 626c 6528 293a 0d0a 2020 2020 2020 2020  ble():..        
-00019b50: 2020 2020 7265 7475 726e 206e 702e 4e61      return np.Na
-00019b60: 4e0d 0a0d 0a20 2020 2020 2020 2069 6620  N....        if 
-00019b70: 6474 7970 6520 6973 206e 6f74 204e 6f6e  dtype is not Non
-00019b80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00019b90: 7265 7475 726e 2064 7479 7065 286d 7946  return dtype(myF
-00019ba0: 756e 6328 7365 6c66 2c20 6669 6c74 6572  unc(self, filter
-00019bb0: 2929 0d0a 0d0a 2020 2020 2020 2020 7265  ))....        re
-00019bc0: 7475 726e 206d 7946 756e 6328 7365 6c66  turn myFunc(self
-00019bd0: 2c20 6669 6c74 6572 290d 0a0d 0a20 2020  , filter)....   
-00019be0: 2064 6566 205f 6661 5f6b 6579 776f 7264   def _fa_keyword
-00019bf0: 5f77 7261 7070 6572 2873 656c 662c 2066  _wrapper(self, f
-00019c00: 696c 7465 723d 4e6f 6e65 2c20 6474 7970  ilter=None, dtyp
-00019c10: 653d 4e6f 6e65 2c20 6178 6973 3d4e 6f6e  e=None, axis=Non
-00019c20: 652c 206b 6565 7064 696d 733d 4e6f 6e65  e, keepdims=None
-00019c30: 2c20 6464 6f66 3d4e 6f6e 652c 202a 2a6b  , ddof=None, **k
-00019c40: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
-00019c50: 2069 6620 7365 6c66 2e64 7479 7065 2e63   if self.dtype.c
-00019c60: 6861 7220 696e 2022 4f53 5522 3a0d 0a20  har in "OSU":.. 
-00019c70: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00019c80: 2054 7970 6545 7272 6f72 2822 4661 7374   TypeError("Fast
-00019c90: 4172 7261 7920 6f70 6572 6174 696f 6e20  Array operation 
-00019ca0: 6170 706c 6965 6420 746f 2073 7472 696e  applied to strin
-00019cb0: 6720 6f72 206f 626a 6563 7420 6172 7261  g or object arra
-00019cc0: 792e 2229 0d0a 0d0a 2020 2020 2020 2020  y.")....        
-00019cd0: 6966 2022 6f75 7422 2069 6e20 6b77 6172  if "out" in kwar
-00019ce0: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-00019cf0: 2069 6620 6b77 6172 6773 5b22 6f75 7422   if kwargs["out"
-00019d00: 5d20 6973 204e 6f6e 653a 0d0a 2020 2020  ] is None:..    
-00019d10: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
-00019d20: 6773 2e70 6f70 2822 6f75 7422 290d 0a0d  gs.pop("out")...
-00019d30: 0a20 2020 2020 2020 2069 6620 616e 7928  .        if any(
-00019d40: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
-00019d50: 2020 2020 2020 6c6f 6767 696e 672e 7761        logging.wa
-00019d60: 726e 696e 6728 0d0a 2020 2020 2020 2020  rning(..        
-00019d70: 2020 2020 2020 2020 2255 6e65 7870 6563          "Unexpec
-00019d80: 7465 6420 4661 7374 4172 7261 7920 6f70  ted FastArray op
-00019d90: 6572 6174 696f 6e20 6b65 7977 6f72 6428  eration keyword(
-00019da0: 7329 3a20 2220 2b20 222c 2022 2e6a 6f69  s): " + ", ".joi
-00019db0: 6e28 5b6b 6579 2066 6f72 206b 6579 2c20  n([key for key, 
-00019dc0: 7661 6c75 6520 696e 206b 7761 7267 732e  value in kwargs.
-00019dd0: 6974 656d 7328 295d 290d 0a20 2020 2020  items()])..     
-00019de0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-00019df0: 2020 2020 6966 2064 7479 7065 2069 7320      if dtype is 
-00019e00: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-00019e10: 2020 2020 2020 206b 7761 7267 735b 2264         kwargs["d
-00019e20: 7479 7065 225d 203d 2064 7479 7065 0d0a  type"] = dtype..
-00019e30: 2020 2020 2020 2020 6966 2061 7869 733a          if axis:
-00019e40: 0d0a 2020 2020 2020 2020 2020 2020 6b77  ..            kw
-00019e50: 6172 6773 5b22 6178 6973 225d 203d 2061  args["axis"] = a
-00019e60: 7869 730d 0a20 2020 2020 2020 2069 6620  xis..        if 
-00019e70: 6b65 6570 6469 6d73 3a0d 0a20 2020 2020  keepdims:..     
-00019e80: 2020 2020 2020 206b 7761 7267 735b 226b         kwargs["k
-00019e90: 6565 7064 696d 7322 5d20 3d20 6b65 6570  eepdims"] = keep
-00019ea0: 6469 6d73 0d0a 2020 2020 2020 2020 6966  dims..        if
-00019eb0: 2064 646f 6620 6973 206e 6f74 204e 6f6e   ddof is not Non
-00019ec0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00019ed0: 6b77 6172 6773 5b22 6464 6f66 225d 203d  kwargs["ddof"] =
-00019ee0: 2064 646f 660d 0a20 2020 2020 2020 2069   ddof..        i
-00019ef0: 6620 6669 6c74 6572 2069 7320 6e6f 7420  f filter is not 
-00019f00: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00019f10: 2020 206b 7761 7267 735b 2266 696c 7465     kwargs["filte
-00019f20: 7222 5d20 3d20 6669 6c74 6572 0d0a 0d0a  r"] = filter....
-00019f30: 2020 2020 2020 2020 6966 2028 6669 6c74          if (filt
-00019f40: 6572 2069 7320 6e6f 7420 4e6f 6e65 2920  er is not None) 
-00019f50: 616e 6420 2828 6178 6973 2069 7320 6e6f  and ((axis is no
-00019f60: 7420 4e6f 6e65 2920 6f72 2028 6b65 6570  t None) or (keep
-00019f70: 6469 6d73 2069 7320 6e6f 7420 4e6f 6e65  dims is not None
-00019f80: 2920 6f72 2028 6464 6f66 2069 7320 6e6f  ) or (ddof is no
-00019f90: 7420 4e6f 6e65 2929 3a0d 0a20 2020 2020  t None)):..     
-00019fa0: 2020 2020 2020 206c 6f67 6769 6e67 2e77         logging.w
-00019fb0: 6172 6e69 6e67 2822 5369 6e63 6520 4669  arning("Since Fi
-00019fc0: 6c74 6572 206b 6579 776f 7264 2069 7320  lter keyword is 
-00019fd0: 7072 6573 656e 742c 2046 6173 7441 7272  present, FastArr
-00019fe0: 6179 206f 7065 7261 7469 6f6e 7320 6967  ay operations ig
-00019ff0: 6e6f 7265 2061 7869 732c 206b 6565 7064  nore axis, keepd
-0001a000: 696d 7320 616e 6420 6464 6f66 2229 0d0a  ims and ddof")..
-0001a010: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0001a020: 206b 7761 7267 730d 0a0d 0a20 2020 2064   kwargs....    d
-0001a030: 6566 206e 616e 7375 6d28 7365 6c66 2c20  ef nansum(self, 
-0001a040: 6669 6c74 6572 3d4e 6f6e 652c 2064 7479  filter=None, dty
-0001a050: 7065 3d4e 6f6e 652c 2061 7869 733d 4e6f  pe=None, axis=No
-0001a060: 6e65 2c20 6b65 6570 6469 6d73 3d4e 6f6e  ne, keepdims=Non
-0001a070: 652c 202a 2a6b 7761 7267 7329 202d 3e20  e, **kwargs) -> 
-0001a080: 6e70 2e6e 756d 6265 723a 0d0a 2020 2020  np.number:..    
-0001a090: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0001a0a0: 2043 6f6d 7075 7465 2074 6865 2073 756d   Compute the sum
-0001a0b0: 206f 6620 7468 6520 7661 6c75 6573 2069   of the values i
-0001a0c0: 6e20 7468 6520 6669 7273 7420 6172 6775  n the first argu
-0001a0d0: 6d65 6e74 2c20 6967 6e6f 7269 6e67 204e  ment, ignoring N
-0001a0e0: 614e 732e 0d0a 0d0a 2020 2020 2020 2020  aNs.....        
-0001a0f0: 4966 2061 6c6c 2076 616c 7565 7320 696e  If all values in
-0001a100: 2074 6865 2066 6972 7374 2061 7267 756d   the first argum
-0001a110: 656e 7420 6172 6520 4e61 4e73 2c20 6060  ent are NaNs, ``
-0001a120: 302e 3060 6020 6973 2072 6574 7572 6e65  0.0`` is returne
-0001a130: 642e 0d0a 0d0a 2020 2020 2020 2020 5061  d.....        Pa
-0001a140: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-0001a150: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-0001a160: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
-0001a170: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
-0001a180: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
-0001a190: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
-0001a1a0: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
-0001a1b0: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
-0001a1c0: 6865 2073 756d 2063 616c 6375 6c61 7469  he sum calculati
-0001a1d0: 6f6e 2e20 4966 2074 6865 2066 696c 7465  on. If the filte
-0001a1e0: 7220 6973 0d0a 2020 2020 2020 2020 2020  r is..          
-0001a1f0: 2020 756e 6966 6f72 6d6c 7920 6060 4661    uniformly ``Fa
-0001a200: 6c73 6560 602c 2060 6e61 6e73 756d 6020  lse``, `nansum` 
-0001a210: 7265 7475 726e 7320 6060 302e 3060 602e  returns ``0.0``.
-0001a220: 0d0a 2020 2020 2020 2020 6474 7970 6520  ..        dtype 
-0001a230: 3a20 7274 2e64 7479 7065 206f 7220 6e75  : rt.dtype or nu
-0001a240: 6d70 792e 6474 7970 652c 2064 6566 6175  mpy.dtype, defau
-0001a250: 6c74 2066 6c6f 6174 3634 0d0a 2020 2020  lt float64..    
-0001a260: 2020 2020 2020 2020 5468 6520 6461 7461          The data
-0001a270: 2074 7970 6520 6f66 2074 6865 2072 6573   type of the res
-0001a280: 756c 742e 2046 6f72 2061 2060 4661 7374  ult. For a `Fast
-0001a290: 4172 7261 7960 2060 6078 6060 2c0d 0a20  Array` ``x``,.. 
-0001a2a0: 2020 2020 2020 2020 2020 2060 6078 2e6e             ``x.n
-0001a2b0: 616e 7375 6d28 6474 7970 6520 3d20 6d79  ansum(dtype = my
-0001a2c0: 5f74 7970 6529 6060 2069 7320 6571 7569  _type)`` is equi
-0001a2d0: 7661 6c65 6e74 2074 6f20 6060 6d79 5f74  valent to ``my_t
-0001a2e0: 7970 6528 782e 6e61 6e73 756d 2829 2960  ype(x.nansum())`
-0001a2f0: 602e 0d0a 0d0a 2020 2020 2020 2020 5265  `.....        Re
-0001a300: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-0001a310: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001a320: 7363 616c 6172 0d0a 2020 2020 2020 2020  scalar..        
-0001a330: 2020 2020 5468 6520 7375 6d20 6f66 2074      The sum of t
-0001a340: 6865 2076 616c 7565 732e 0d0a 0d0a 2020  he values.....  
-0001a350: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
-0001a360: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001a370: 0d0a 2020 2020 2020 2020 6e75 6d70 792e  ..        numpy.
-0001a380: 6e61 6e73 756d 0d0a 2020 2020 2020 2020  nansum..        
-0001a390: 4461 7461 7365 742e 6e61 6e73 756d 203a  Dataset.nansum :
-0001a3a0: 2053 756d 7320 7468 6520 7661 6c75 6573   Sums the values
-0001a3b0: 206f 6620 6e75 6d65 7269 6361 6c20 6044   of numerical `D
-0001a3c0: 6174 6173 6574 6020 636f 6c75 6d6e 732c  ataset` columns,
-0001a3d0: 2069 676e 6f72 696e 6720 4e61 4e73 2e0d   ignoring NaNs..
-0001a3e0: 0a20 2020 2020 2020 2047 726f 7570 4279  .        GroupBy
-0001a3f0: 4f70 732e 6e61 6e73 756d 203a 2053 756d  Ops.nansum : Sum
-0001a400: 7320 7468 6520 7661 6c75 6573 206f 6620  s the values of 
-0001a410: 6561 6368 2067 726f 7570 2c20 6967 6e6f  each group, igno
-0001a420: 7269 6e67 204e 614e 732e 2055 7365 6420  ring NaNs. Used 
-0001a430: 6279 0d0a 2020 2020 2020 2020 2020 2020  by..            
-0001a440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a450: 6043 6174 6567 6f72 6963 616c 6020 6f62  `Categorical` ob
-0001a460: 6a65 6374 732e 0d0a 0d0a 2020 2020 2020  jects.....      
-0001a470: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
-0001a480: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
-0001a490: 5468 6520 6064 7479 7065 6020 6b65 7977  The `dtype` keyw
-0001a4a0: 6f72 6420 666f 7220 6046 6173 7441 7272  ord for `FastArr
-0001a4b0: 6179 2e6e 616e 7375 6d60 2073 7065 6369  ay.nansum` speci
-0001a4c0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
-0001a4d0: 7065 206f 6620 7468 650d 0a20 2020 2020  pe of the..     
-0001a4e0: 2020 2072 6573 756c 742e 2054 6869 7320     result. This 
-0001a4f0: 6469 6666 6572 7320 6672 6f6d 2060 6e75  differs from `nu
-0001a500: 6d70 792e 6e61 6e73 756d 602c 2077 6865  mpy.nansum`, whe
-0001a510: 7265 2069 7420 7370 6563 6966 6965 7320  re it specifies 
-0001a520: 7468 6520 6461 7461 2074 7970 6520 7573  the data type us
-0001a530: 6564 0d0a 2020 2020 2020 2020 746f 2063  ed..        to c
-0001a540: 6f6d 7075 7465 2074 6865 2073 756d 2e0d  ompute the sum..
-0001a550: 0a0d 0a20 2020 2020 2020 202a 2a4e 6f74  ...        **Not
-0001a560: 6573 206f 6e20 5573 696e 6720 4e75 6d50  es on Using NumP
-0001a570: 7920 5061 7261 6d65 7465 7273 2a2a 0d0a  y Parameters**..
-0001a580: 0d0a 2020 2020 2020 2020 5573 696e 6720  ..        Using 
-0001a590: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
-0001a5a0: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
-0001a5b0: 7261 6d65 7465 7273 2077 696c 6c20 6361  rameters will ca
-0001a5c0: 7573 6520 5269 7074 6162 6c65 2074 6f20  use Riptable to 
-0001a5d0: 7377 6974 6368 2074 6f0d 0a20 2020 2020  switch to..     
-0001a5e0: 2020 2074 6865 204e 756d 5079 2069 6d70     the NumPy imp
-0001a5f0: 6c65 6d65 6e74 6174 696f 6e20 6f66 2074  lementation of t
-0001a600: 6869 7320 6d65 7468 6f64 2028 606e 756d  his method (`num
-0001a610: 7079 2e6e 616e 7375 6d60 292e 2048 6f77  py.nansum`). How
-0001a620: 6576 6572 2c20 756e 7469 6c20 610d 0a20  ever, until a.. 
-0001a630: 2020 2020 2020 2072 6570 6f72 7465 6420         reported 
-0001a640: 6275 6720 6973 2066 6978 6564 2c20 6966  bug is fixed, if
-0001a650: 2079 6f75 2061 6c73 6f20 696e 636c 7564   you also includ
-0001a660: 6520 7468 6520 6064 7479 7065 6020 7061  e the `dtype` pa
-0001a670: 7261 6d65 7465 7220 6974 2077 696c 6c20  rameter it will 
-0001a680: 6265 0d0a 2020 2020 2020 2020 6170 706c  be..        appl
-0001a690: 6965 6420 746f 2074 6865 2072 6573 756c  ied to the resul
-0001a6a0: 742c 206e 6f74 2075 7365 6420 746f 2063  t, not used to c
-0001a6b0: 6f6d 7075 7465 2074 6865 2073 756d 2061  ompute the sum a
-0001a6c0: 7320 6974 2069 7320 696e 2060 6e75 6d70  s it is in `nump
-0001a6d0: 792e 6e61 6e73 756d 602e 0d0a 0d0a 2020  y.nansum`.....  
-0001a6e0: 2020 2020 2020 416c 736f 206e 6f74 6520        Also note 
-0001a6f0: 7468 6174 2069 6620 796f 7520 7573 6520  that if you use 
-0001a700: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
-0001a710: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
-0001a720: 7261 6d65 7465 7273 2061 6e64 2061 6c73  rameters and als
-0001a730: 6f0d 0a20 2020 2020 2020 2069 6e63 6c75  o..        inclu
-0001a740: 6465 2061 2060 6669 6c74 6572 6020 6b65  de a `filter` ke
-0001a750: 7977 6f72 6420 6172 6775 6d65 6e74 2028  yword argument (
-0001a760: 7768 6963 6820 606e 756d 7079 2e6e 616e  which `numpy.nan
-0001a770: 7375 6d60 2064 6f65 7320 6e6f 7420 6163  sum` does not ac
-0001a780: 6365 7074 292c 0d0a 2020 2020 2020 2020  cept),..        
-0001a790: 5269 7074 6162 6c65 2773 2069 6d70 6c65  Riptable's imple
-0001a7a0: 6d65 6e74 6174 696f 6e20 6f66 2060 6e61  mentation of `na
-0001a7b0: 6e73 756d 6020 7769 6c6c 2062 6520 7573  nsum` will be us
-0001a7c0: 6564 2077 6974 6820 7468 6520 6669 6c74  ed with the filt
-0001a7d0: 6572 2061 7267 756d 656e 7420 616e 640d  er argument and.
-0001a7e0: 0a20 2020 2020 2020 2074 6865 204e 756d  .        the Num
-0001a7f0: 5079 2070 6172 616d 6574 6572 7320 7769  Py parameters wi
-0001a800: 6c6c 2062 6520 6967 6e6f 7265 642e 0d0a  ll be ignored...
-0001a810: 0d0a 2020 2020 2020 2020 6178 6973 203a  ..        axis :
-0001a820: 207b 696e 742c 2074 7570 6c65 206f 6620   {int, tuple of 
-0001a830: 696e 742c 204e 6f6e 657d 2c20 6f70 7469  int, None}, opti
-0001a840: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
-0001a850: 2020 4178 6973 206f 7220 6178 6573 2061    Axis or axes a
-0001a860: 6c6f 6e67 2077 6869 6368 2074 6865 2073  long which the s
-0001a870: 756d 2069 7320 636f 6d70 7574 6564 2e20  um is computed. 
-0001a880: 5468 6520 6465 6661 756c 7420 6973 2074  The default is t
-0001a890: 6f20 636f 6d70 7574 6520 7468 650d 0a20  o compute the.. 
-0001a8a0: 2020 2020 2020 2020 2020 2073 756d 206f             sum o
-0001a8b0: 6620 7468 6520 666c 6174 7465 6e65 6420  f the flattened 
-0001a8c0: 6172 7261 792e 0d0a 0d0a 2020 2020 2020  array.....      
-0001a8d0: 2020 6b65 6570 6469 6d73 203a 2062 6f6f    keepdims : boo
-0001a8e0: 6c2c 206f 7074 696f 6e61 6c0d 0a20 2020  l, optional..   
-0001a8f0: 2020 2020 2020 2020 2049 6620 7468 6973           If this
-0001a900: 2069 7320 7365 7420 746f 2054 7275 652c   is set to True,
-0001a910: 2074 6865 2061 7865 7320 7768 6963 6820   the axes which 
-0001a920: 6172 6520 7265 6475 6365 6420 6172 6520  are reduced are 
-0001a930: 6c65 6674 2069 6e20 7468 6520 7265 7375  left in the resu
-0001a940: 6c74 2061 730d 0a20 2020 2020 2020 2020  lt as..         
-0001a950: 2020 2064 696d 656e 7369 6f6e 7320 7769     dimensions wi
-0001a960: 7468 2073 697a 6520 6f6e 652e 2057 6974  th size one. Wit
-0001a970: 6820 7468 6973 206f 7074 696f 6e2c 2074  h this option, t
-0001a980: 6865 2072 6573 756c 7420 7769 6c6c 2062  he result will b
-0001a990: 726f 6164 6361 7374 0d0a 2020 2020 2020  roadcast..      
-0001a9a0: 2020 2020 2020 636f 7272 6563 746c 7920        correctly 
-0001a9b0: 6167 6169 6e73 7420 7468 6520 6f72 6967  against the orig
-0001a9c0: 696e 616c 2069 6e70 7574 2061 7272 6179  inal input array
-0001a9d0: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-0001a9e0: 2049 6620 7468 6520 7661 6c75 6520 6973   If the value is
-0001a9f0: 2061 6e79 7468 696e 6720 6275 7420 7468   anything but th
-0001aa00: 6520 6465 6661 756c 742c 2074 6865 6e20  e default, then 
-0001aa10: 606b 6565 7064 696d 7360 2077 696c 6c20  `keepdims` will 
-0001aa20: 6265 2070 6173 7365 640d 0a20 2020 2020  be passed..     
-0001aa30: 2020 2020 2020 2074 6872 6f75 6768 2074         through t
-0001aa40: 6f20 7468 6520 606d 6561 6e60 206f 7220  o the `mean` or 
-0001aa50: 6073 756d 6020 6d65 7468 6f64 7320 6f66  `sum` methods of
-0001aa60: 2073 7562 2d63 6c61 7373 6573 206f 6620   sub-classes of 
-0001aa70: 606e 6461 7272 6179 602e 2049 6620 7468  `ndarray`. If th
-0001aa80: 650d 0a20 2020 2020 2020 2020 2020 2073  e..            s
-0001aa90: 7562 2d63 6c61 7373 6573 2720 6d65 7468  ub-classes' meth
-0001aaa0: 6f64 7320 646f 206e 6f74 2069 6d70 6c65  ods do not imple
-0001aab0: 6d65 6e74 2060 6b65 6570 6469 6d73 602c  ment `keepdims`,
-0001aac0: 2061 6e79 2065 7863 6570 7469 6f6e 7320   any exceptions 
-0001aad0: 7769 6c6c 2062 650d 0a20 2020 2020 2020  will be..       
-0001aae0: 2020 2020 2072 6169 7365 642e 0d0a 0d0a       raised.....
-0001aaf0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
-0001ab00: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0001ab10: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
-0001ab20: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
-0001ab30: 285b 312c 2033 2c20 352c 2037 2c20 7274  ([1, 3, 5, 7, rt
-0001ab40: 2e6e 616e 5d29 0d0a 2020 2020 2020 2020  .nan])..        
-0001ab50: 3e3e 3e20 612e 6e61 6e73 756d 2829 0d0a  >>> a.nansum()..
-0001ab60: 2020 2020 2020 2020 3136 2e30 0d0a 0d0a          16.0....
-0001ab70: 2020 2020 2020 2020 5769 7468 2061 2060          With a `
-0001ab80: 6474 7970 6560 2073 7065 6369 6669 6564  dtype` specified
-0001ab90: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
-0001aba0: 2061 203d 2072 742e 4661 7374 4172 7261   a = rt.FastArra
-0001abb0: 7928 5b31 2e30 2c20 332e 302c 2035 2e30  y([1.0, 3.0, 5.0
-0001abc0: 2c20 372e 302c 2072 742e 6e61 6e5d 290d  , 7.0, rt.nan]).
-0001abd0: 0a20 2020 2020 2020 203e 3e3e 2061 2e6e  .        >>> a.n
-0001abe0: 616e 7375 6d28 6474 7970 6520 3d20 7274  ansum(dtype = rt
-0001abf0: 2e69 6e74 3332 290d 0a20 2020 2020 2020  .int32)..       
-0001ac00: 2031 360d 0a0d 0a20 2020 2020 2020 2057   16....        W
-0001ac10: 6974 6820 6120 6669 6c74 6572 3a0d 0a0d  ith a filter:...
-0001ac20: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-0001ac30: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
-0001ac40: 2c20 332c 2035 2c20 372c 2072 742e 6e61  , 3, 5, 7, rt.na
-0001ac50: 6e5d 290d 0a20 2020 2020 2020 203e 3e3e  n])..        >>>
-0001ac60: 2062 203d 2072 742e 4661 7374 4172 7261   b = rt.FastArra
-0001ac70: 7928 5b46 616c 7365 2c20 5472 7565 2c20  y([False, True, 
-0001ac80: 4661 6c73 652c 2054 7275 652c 2054 7275  False, True, Tru
-0001ac90: 655d 290d 0a20 2020 2020 2020 203e 3e3e  e])..        >>>
-0001aca0: 2061 2e6e 616e 7375 6d28 6669 6c74 6572   a.nansum(filter
-0001acb0: 203d 2062 290d 0a20 2020 2020 2020 2031   = b)..        1
-0001acc0: 302e 300d 0a20 2020 2020 2020 2022 2222  0.0..        """
-0001acd0: 0d0a 0d0a 2020 2020 2020 2020 6b77 6172  ....        kwar
-0001ace0: 6773 203d 2073 656c 662e 5f66 615f 6b65  gs = self._fa_ke
-0001acf0: 7977 6f72 645f 7772 6170 7065 7228 6669  yword_wrapper(fi
-0001ad00: 6c74 6572 3d66 696c 7465 722c 2064 7479  lter=filter, dty
-0001ad10: 7065 3d64 7479 7065 2c20 6178 6973 3d61  pe=dtype, axis=a
-0001ad20: 7869 732c 206b 6565 7064 696d 733d 6b65  xis, keepdims=ke
-0001ad30: 6570 6469 6d73 2c20 6464 6f66 3d4e 6f6e  epdims, ddof=Non
-0001ad40: 652c 202a 2a6b 7761 7267 7329 0d0a 0d0a  e, **kwargs)....
-0001ad50: 2020 2020 2020 2020 6966 2066 696c 7465          if filte
-0001ad60: 7220 6973 206e 6f74 204e 6f6e 653a 0d0a  r is not None:..
-0001ad70: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001ad80: 726e 2073 656c 662e 5f66 615f 6669 6c74  rn self._fa_filt
-0001ad90: 6572 5f77 7261 7070 6572 285f 666e 616e  er_wrapper(_fnan
-0001ada0: 7375 6d2c 2066 696c 7465 723d 6669 6c74  sum, filter=filt
-0001adb0: 6572 2c20 6474 7970 653d 6474 7970 6529  er, dtype=dtype)
-0001adc0: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
-0001add0: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
-0001ade0: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
-0001adf0: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
-0001ae00: 4e53 554d 2c20 6e70 2e6e 616e 7375 6d2c  NSUM, np.nansum,
-0001ae10: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-0001ae20: 2020 6465 6620 6d65 616e 2873 656c 662c    def mean(self,
-0001ae30: 2066 696c 7465 723d 4e6f 6e65 2c20 6474   filter=None, dt
-0001ae40: 7970 653d 4e6f 6e65 2c20 6178 6973 3d4e  ype=None, axis=N
-0001ae50: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
-0001ae60: 6e65 2c20 2a2a 6b77 6172 6773 2920 2d3e  ne, **kwargs) ->
-0001ae70: 206e 702e 6e75 6d62 6572 3a0d 0a20 2020   np.number:..   
-0001ae80: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0001ae90: 2020 436f 6d70 7574 6520 7468 6520 6172    Compute the ar
-0001aea0: 6974 686d 6574 6963 206d 6561 6e20 6f66  ithmetic mean of
-0001aeb0: 2074 6865 2076 616c 7565 7320 696e 2074   the values in t
-0001aec0: 6865 2066 6972 7374 2061 7267 756d 656e  he first argumen
-0001aed0: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
-0001aee0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-0001aef0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-0001af00: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
-0001af10: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
-0001af20: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
-0001af30: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
-0001af40: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
-0001af50: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
-0001af60: 6865 206d 6561 6e20 6361 6c63 756c 6174  he mean calculat
-0001af70: 696f 6e2e 2049 6620 7468 6520 6669 6c74  ion. If the filt
-0001af80: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
-0001af90: 6973 2075 6e69 666f 726d 6c79 2060 6046  is uniformly ``F
-0001afa0: 616c 7365 6060 2c20 606d 6561 6e60 2072  alse``, `mean` r
-0001afb0: 6574 7572 6e73 2061 2060 5a65 726f 4469  eturns a `ZeroDi
-0001afc0: 7669 7369 6f6e 4572 726f 7260 2e0d 0a20  visionError`... 
-0001afd0: 2020 2020 2020 2064 7479 7065 203a 2072         dtype : r
-0001afe0: 742e 6474 7970 6520 6f72 206e 756d 7079  t.dtype or numpy
-0001aff0: 2e64 7479 7065 2c20 6465 6661 756c 7420  .dtype, default 
-0001b000: 666c 6f61 7436 340d 0a20 2020 2020 2020  float64..       
-0001b010: 2020 2020 2054 6865 2064 6174 6120 7479       The data ty
-0001b020: 7065 206f 6620 7468 6520 7265 7375 6c74  pe of the result
-0001b030: 2e20 466f 7220 6120 6046 6173 7441 7272  . For a `FastArr
-0001b040: 6179 6020 6060 7860 602c 0d0a 2020 2020  ay` ``x``,..    
-0001b050: 2020 2020 2020 2020 6060 782e 6d65 616e          ``x.mean
-0001b060: 2864 7479 7065 203d 206d 795f 7479 7065  (dtype = my_type
-0001b070: 2960 6020 6973 2065 7175 6976 616c 656e  )`` is equivalen
-0001b080: 7420 746f 2060 606d 795f 7479 7065 2878  t to ``my_type(x
-0001b090: 2e6d 6561 6e28 2929 6060 2e0d 0a0d 0a20  .mean())``..... 
-0001b0a0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-0001b0b0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-0001b0c0: 0a20 2020 2020 2020 2073 6361 6c61 720d  .        scalar.
-0001b0d0: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-0001b0e0: 206d 6561 6e20 6f66 2074 6865 2076 616c   mean of the val
-0001b0f0: 7565 732e 0d0a 0d0a 2020 2020 2020 2020  ues.....        
-0001b100: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-0001b110: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-0001b120: 2020 2020 6e75 6d70 792e 6d65 616e 0d0a      numpy.mean..
-0001b130: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0001b140: 792e 6e61 6e6d 6561 6e20 3a20 436f 6d70  y.nanmean : Comp
-0001b150: 7574 6573 2074 6865 206d 6561 6e20 6f66  utes the mean of
-0001b160: 2060 4661 7374 4172 7261 7960 2076 616c   `FastArray` val
-0001b170: 7565 732c 2069 676e 6f72 696e 6720 4e61  ues, ignoring Na
-0001b180: 4e73 2e0d 0a20 2020 2020 2020 2044 6174  Ns...        Dat
-0001b190: 6173 6574 2e6d 6561 6e20 3a20 436f 6d70  aset.mean : Comp
-0001b1a0: 7574 6573 2074 6865 206d 6561 6e20 6f66  utes the mean of
-0001b1b0: 206e 756d 6572 6963 616c 2060 4461 7461   numerical `Data
-0001b1c0: 7365 7460 2063 6f6c 756d 6e73 2e0d 0a20  set` columns... 
-0001b1d0: 2020 2020 2020 2047 726f 7570 4279 4f70         GroupByOp
-0001b1e0: 732e 6d65 616e 203a 2043 6f6d 7075 7465  s.mean : Compute
-0001b1f0: 7320 7468 6520 6d65 616e 206f 6620 6561  s the mean of ea
-0001b200: 6368 2067 726f 7570 2e20 5573 6564 2062  ch group. Used b
-0001b210: 7920 6043 6174 6567 6f72 6963 616c 6020  y `Categorical` 
-0001b220: 6f62 6a65 6374 732e 0d0a 0d0a 2020 2020  objects.....    
-0001b230: 2020 2020 4e6f 7465 730d 0a20 2020 2020      Notes..     
-0001b240: 2020 202d 2d2d 2d2d 0d0a 2020 2020 2020     -----..      
-0001b250: 2020 5468 6520 6064 7479 7065 6020 6b65    The `dtype` ke
-0001b260: 7977 6f72 6420 666f 7220 6046 6173 7441  yword for `FastA
-0001b270: 7272 6179 2e6d 6561 6e60 2073 7065 6369  rray.mean` speci
-0001b280: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
-0001b290: 7065 206f 6620 7468 6520 7265 7375 6c74  pe of the result
-0001b2a0: 2e0d 0a20 2020 2020 2020 2054 6869 7320  ...        This 
-0001b2b0: 6469 6666 6572 7320 6672 6f6d 2060 6e75  differs from `nu
-0001b2c0: 6d70 792e 6d65 616e 602c 2077 6865 7265  mpy.mean`, where
-0001b2d0: 2069 7420 7370 6563 6966 6965 7320 7468   it specifies th
-0001b2e0: 6520 6461 7461 2074 7970 6520 7573 6564  e data type used
-0001b2f0: 2074 6f20 636f 6d70 7574 650d 0a20 2020   to compute..   
-0001b300: 2020 2020 2074 6865 206d 6561 6e2e 0d0a       the mean...
-0001b310: 0d0a 2020 2020 2020 2020 2a2a 4e6f 7465  ..        **Note
-0001b320: 7320 6f6e 2055 7369 6e67 204e 756d 5079  s on Using NumPy
-0001b330: 2050 6172 616d 6574 6572 732a 2a0d 0a0d   Parameters**...
-0001b340: 0a20 2020 2020 2020 2055 7369 6e67 2065  .        Using e
-0001b350: 6974 6865 7220 6f66 2074 6865 2066 6f6c  ither of the fol
-0001b360: 6c6f 7769 6e67 204e 756d 5079 2070 6172  lowing NumPy par
-0001b370: 616d 6574 6572 7320 7769 6c6c 2063 6175  ameters will cau
-0001b380: 7365 2052 6970 7461 626c 6520 746f 2073  se Riptable to s
-0001b390: 7769 7463 6820 746f 0d0a 2020 2020 2020  witch to..      
-0001b3a0: 2020 7468 6520 4e75 6d50 7920 696d 706c    the NumPy impl
-0001b3b0: 656d 656e 7461 7469 6f6e 206f 6620 7468  ementation of th
-0001b3c0: 6973 206d 6574 686f 6420 2860 6e75 6d70  is method (`nump
-0001b3d0: 792e 6d65 616e 6029 2e20 486f 7765 7665  y.mean`). Howeve
-0001b3e0: 722c 2075 6e74 696c 2061 0d0a 2020 2020  r, until a..    
-0001b3f0: 2020 2020 7265 706f 7274 6564 2062 7567      reported bug
-0001b400: 2069 7320 6669 7865 642c 2069 6620 796f   is fixed, if yo
-0001b410: 7520 616c 736f 2069 6e63 6c75 6465 2074  u also include t
-0001b420: 6865 2060 6474 7970 6560 2070 6172 616d  he `dtype` param
-0001b430: 6574 6572 2069 7420 7769 6c6c 2062 650d  eter it will be.
-0001b440: 0a20 2020 2020 2020 2061 7070 6c69 6564  .        applied
-0001b450: 2074 6f20 7468 6520 7265 7375 6c74 2c20   to the result, 
-0001b460: 6e6f 7420 7573 6564 2074 6f20 636f 6d70  not used to comp
-0001b470: 7574 6520 7468 6520 6d65 616e 2061 7320  ute the mean as 
-0001b480: 6974 2069 7320 696e 2060 6e75 6d70 792e  it is in `numpy.
-0001b490: 6d65 616e 602e 0d0a 0d0a 2020 2020 2020  mean`.....      
-0001b4a0: 2020 416c 736f 206e 6f74 6520 7468 6174    Also note that
-0001b4b0: 2069 6620 796f 7520 7573 6520 6569 7468   if you use eith
-0001b4c0: 6572 206f 6620 7468 6520 666f 6c6c 6f77  er of the follow
-0001b4d0: 696e 6720 4e75 6d50 7920 7061 7261 6d65  ing NumPy parame
-0001b4e0: 7465 7273 2061 6e64 2061 6c73 6f0d 0a20  ters and also.. 
-0001b4f0: 2020 2020 2020 2069 6e63 6c75 6465 2061         include a
-0001b500: 2060 6669 6c74 6572 6020 6b65 7977 6f72   `filter` keywor
-0001b510: 6420 6172 6775 6d65 6e74 2028 7768 6963  d argument (whic
-0001b520: 6820 606e 756d 7079 2e6d 6561 6e60 2064  h `numpy.mean` d
-0001b530: 6f65 7320 6e6f 7420 6163 6365 7074 292c  oes not accept),
-0001b540: 0d0a 2020 2020 2020 2020 5269 7074 6162  ..        Riptab
-0001b550: 6c65 2773 2069 6d70 6c65 6d65 6e74 6174  le's implementat
-0001b560: 696f 6e20 6f66 2060 6d65 616e 6020 7769  ion of `mean` wi
-0001b570: 6c6c 2062 6520 7573 6564 2077 6974 6820  ll be used with 
-0001b580: 7468 6520 6669 6c74 6572 2061 7267 756d  the filter argum
-0001b590: 656e 7420 616e 640d 0a20 2020 2020 2020  ent and..       
-0001b5a0: 2074 6865 204e 756d 5079 2070 6172 616d   the NumPy param
-0001b5b0: 6574 6572 7320 7769 6c6c 2062 6520 6967  eters will be ig
-0001b5c0: 6e6f 7265 642e 0d0a 0d0a 2020 2020 2020  nored.....      
-0001b5d0: 2020 6178 6973 203a 204e 6f6e 6520 6f72    axis : None or
-0001b5e0: 2069 6e74 206f 7220 7475 706c 6520 6f66   int or tuple of
-0001b5f0: 2069 6e74 732c 206f 7074 696f 6e61 6c0d   ints, optional.
-0001b600: 0a20 2020 2020 2020 2020 2020 2041 7869  .            Axi
-0001b610: 7320 6f72 2061 7865 7320 616c 6f6e 6720  s or axes along 
-0001b620: 7768 6963 6820 7468 6520 6d65 616e 7320  which the means 
-0001b630: 6172 6520 636f 6d70 7574 6564 2e20 5468  are computed. Th
-0001b640: 6520 6465 6661 756c 7420 6973 2074 6f20  e default is to 
-0001b650: 636f 6d70 7574 650d 0a20 2020 2020 2020  compute..       
-0001b660: 2020 2020 2074 6865 206d 6561 6e20 6f66       the mean of
-0001b670: 2074 6865 2066 6c61 7474 656e 6564 2061   the flattened a
-0001b680: 7272 6179 2e0d 0a0d 0a20 2020 2020 2020  rray.....       
-0001b690: 206b 6565 7064 696d 7320 3a20 626f 6f6c   keepdims : bool
-0001b6a0: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
-0001b6b0: 2020 2020 2020 2020 4966 2074 6869 7320          If this 
-0001b6c0: 6973 2073 6574 2074 6f20 5472 7565 2c20  is set to True, 
-0001b6d0: 7468 6520 6178 6573 2077 6869 6368 2061  the axes which a
-0001b6e0: 7265 2072 6564 7563 6564 2061 7265 206c  re reduced are l
-0001b6f0: 6566 7420 696e 2074 6865 2072 6573 756c  eft in the resul
-0001b700: 7420 6173 0d0a 2020 2020 2020 2020 2020  t as..          
-0001b710: 2020 6469 6d65 6e73 696f 6e73 2077 6974    dimensions wit
-0001b720: 6820 7369 7a65 206f 6e65 2e20 5769 7468  h size one. With
-0001b730: 2074 6869 7320 6f70 7469 6f6e 2c20 7468   this option, th
-0001b740: 6520 7265 7375 6c74 2077 696c 6c20 6272  e result will br
-0001b750: 6f61 6463 6173 740d 0a20 2020 2020 2020  oadcast..       
-0001b760: 2020 2020 2063 6f72 7265 6374 6c79 2061       correctly a
-0001b770: 6761 696e 7374 2074 6865 206f 7269 6769  gainst the origi
-0001b780: 6e61 6c20 696e 7075 7420 6172 7261 792e  nal input array.
-0001b790: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001b7a0: 4966 2074 6865 2064 6566 6175 6c74 2076  If the default v
-0001b7b0: 616c 7565 2069 7320 7061 7373 6564 2c20  alue is passed, 
-0001b7c0: 7468 656e 2060 6b65 6570 6469 6d73 6020  then `keepdims` 
-0001b7d0: 7769 6c6c 206e 6f74 2062 6520 7061 7373  will not be pass
-0001b7e0: 6564 2074 6872 6f75 6768 0d0a 2020 2020  ed through..    
-0001b7f0: 2020 2020 2020 2020 746f 2074 6865 2060          to the `
-0001b800: 6d65 616e 6020 6d65 7468 6f64 206f 6620  mean` method of 
-0001b810: 7375 622d 636c 6173 7365 7320 6f66 2060  sub-classes of `
-0001b820: 6e64 6172 7261 7960 2c20 686f 7765 7665  ndarray`, howeve
-0001b830: 7220 616e 7920 6e6f 6e2d 6465 6661 756c  r any non-defaul
-0001b840: 740d 0a20 2020 2020 2020 2020 2020 2076  t..            v
-0001b850: 616c 7565 2077 696c 6c20 6265 2e20 4966  alue will be. If
-0001b860: 2074 6865 2073 7562 2d63 6c61 7373 2773   the sub-class's
-0001b870: 206d 6574 686f 6420 646f 6573 206e 6f74   method does not
-0001b880: 2069 6d70 6c65 6d65 6e74 2060 6b65 6570   implement `keep
-0001b890: 6469 6d73 602c 2061 6e79 0d0a 2020 2020  dims`, any..    
-0001b8a0: 2020 2020 2020 2020 6578 6365 7074 696f          exceptio
-0001b8b0: 6e73 2077 696c 6c20 6265 2072 6169 7365  ns will be raise
-0001b8c0: 642e 0d0a 0d0a 2020 2020 2020 2020 4578  d.....        Ex
-0001b8d0: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
-0001b8e0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0001b8f0: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
-0001b900: 7441 7272 6179 285b 312c 2033 2c20 352c  tArray([1, 3, 5,
-0001b910: 2037 5d29 0d0a 2020 2020 2020 2020 3e3e   7])..        >>
-0001b920: 3e20 612e 6d65 616e 2829 0d0a 2020 2020  > a.mean()..    
-0001b930: 2020 2020 342e 300d 0a0d 0a20 2020 2020      4.0....     
-0001b940: 2020 2057 6974 6820 6120 6064 7479 7065     With a `dtype
-0001b950: 6020 7370 6563 6966 6965 643a 0d0a 0d0a  ` specified:....
-0001b960: 2020 2020 2020 2020 3e3e 3e20 6120 3d20          >>> a = 
-0001b970: 7274 2e46 6173 7441 7272 6179 285b 312c  rt.FastArray([1,
-0001b980: 2033 2c20 352c 2037 5d29 0d0a 2020 2020   3, 5, 7])..    
-0001b990: 2020 2020 3e3e 3e20 612e 6d65 616e 2864      >>> a.mean(d
-0001b9a0: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
-0001b9b0: 0d0a 2020 2020 2020 2020 340d 0a0d 0a20  ..        4.... 
-0001b9c0: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
-0001b9d0: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
-0001b9e0: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-0001b9f0: 4172 7261 7928 5b31 2c20 332c 2035 2c20  Array([1, 3, 5, 
-0001ba00: 375d 290d 0a20 2020 2020 2020 203e 3e3e  7])..        >>>
-0001ba10: 2062 203d 2072 742e 4661 7374 4172 7261   b = rt.FastArra
-0001ba20: 7928 5b46 616c 7365 2c20 5472 7565 2c20  y([False, True, 
-0001ba30: 4661 6c73 652c 2054 7275 655d 290d 0a20  False, True]).. 
-0001ba40: 2020 2020 2020 203e 3e3e 2061 2e6d 6561         >>> a.mea
-0001ba50: 6e28 6669 6c74 6572 203d 2062 290d 0a20  n(filter = b).. 
-0001ba60: 2020 2020 2020 2035 2e30 0d0a 2020 2020         5.0..    
-0001ba70: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-0001ba80: 2020 206b 7761 7267 7320 3d20 7365 6c66     kwargs = self
-0001ba90: 2e5f 6661 5f6b 6579 776f 7264 5f77 7261  ._fa_keyword_wra
-0001baa0: 7070 6572 2866 696c 7465 723d 6669 6c74  pper(filter=filt
-0001bab0: 6572 2c20 6474 7970 653d 6474 7970 652c  er, dtype=dtype,
-0001bac0: 2061 7869 733d 6178 6973 2c20 6b65 6570   axis=axis, keep
-0001bad0: 6469 6d73 3d6b 6565 7064 696d 732c 2064  dims=keepdims, d
-0001bae0: 646f 663d 4e6f 6e65 2c20 2a2a 6b77 6172  dof=None, **kwar
-0001baf0: 6773 290d 0a0d 0a20 2020 2020 2020 2069  gs)....        i
-0001bb00: 6620 6669 6c74 6572 2069 7320 6e6f 7420  f filter is not 
-0001bb10: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-0001bb20: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-0001bb30: 6661 5f66 696c 7465 725f 7772 6170 7065  fa_filter_wrappe
-0001bb40: 7228 5f66 6d65 616e 2c20 6669 6c74 6572  r(_fmean, filter
-0001bb50: 3d66 696c 7465 722c 2064 7479 7065 3d64  =filter, dtype=d
-0001bb60: 7479 7065 290d 0a0d 0a20 2020 2020 2020  type)....       
-0001bb70: 2072 6574 7572 6e20 7365 6c66 2e5f 7265   return self._re
-0001bb80: 6475 6365 5f63 6865 636b 2852 4544 5543  duce_check(REDUC
-0001bb90: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-0001bba0: 4345 5f4d 4541 4e2c 206e 702e 6d65 616e  CE_MEAN, np.mean
-0001bbb0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-0001bbc0: 2020 2064 6566 206e 616e 6d65 616e 2873     def nanmean(s
-0001bbd0: 656c 662c 2066 696c 7465 723d 4e6f 6e65  elf, filter=None
-0001bbe0: 2c20 6474 7970 653d 4e6f 6e65 2c20 6178  , dtype=None, ax
-0001bbf0: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
-0001bc00: 733d 4e6f 6e65 2c20 2a2a 6b77 6172 6773  s=None, **kwargs
-0001bc10: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
-0001bc20: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0001bc30: 2020 2020 2020 436f 6d70 7574 6520 7468        Compute th
-0001bc40: 6520 6172 6974 686d 6574 6963 206d 6561  e arithmetic mea
-0001bc50: 6e20 6f66 2074 6865 2076 616c 7565 7320  n of the values 
-0001bc60: 696e 2074 6865 2066 6972 7374 2061 7267  in the first arg
-0001bc70: 756d 656e 742c 2069 676e 6f72 696e 6720  ument, ignoring 
-0001bc80: 4e61 4e73 2e0d 0a0d 0a20 2020 2020 2020  NaNs.....       
-0001bc90: 2049 6620 616c 6c20 7661 6c75 6573 2069   If all values i
-0001bca0: 6e20 7468 6520 6669 7273 7420 6172 6775  n the first argu
-0001bcb0: 6d65 6e74 2061 7265 204e 614e 732c 2060  ment are NaNs, `
-0001bcc0: 6030 2e30 6060 2069 7320 7265 7475 726e  `0.0`` is return
-0001bcd0: 6564 2e0d 0a0d 0a20 2020 2020 2020 2050  ed.....        P
-0001bce0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-0001bcf0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-0001bd00: 2020 2020 2020 2066 696c 7465 7220 3a20         filter : 
-0001bd10: 6172 7261 7920 6f66 2062 6f6f 6c2c 2064  array of bool, d
-0001bd20: 6566 6175 6c74 204e 6f6e 650d 0a20 2020  efault None..   
-0001bd30: 2020 2020 2020 2020 2053 7065 6369 6669           Specifi
-0001bd40: 6573 2077 6869 6368 2065 6c65 6d65 6e74  es which element
-0001bd50: 7320 746f 2069 6e63 6c75 6465 2069 6e20  s to include in 
-0001bd60: 7468 6520 6d65 616e 2063 616c 6375 6c61  the mean calcula
-0001bd70: 7469 6f6e 2e20 4966 2074 6865 2066 696c  tion. If the fil
-0001bd80: 7465 720d 0a20 2020 2020 2020 2020 2020  ter..           
-0001bd90: 2069 7320 756e 6966 6f72 6d6c 7920 6060   is uniformly ``
-0001bda0: 4661 6c73 6560 602c 2060 6e61 6e6d 6561  False``, `nanmea
-0001bdb0: 6e60 2072 6574 7572 6e73 2061 2060 5a65  n` returns a `Ze
-0001bdc0: 726f 4469 7669 7369 6f6e 4572 726f 7260  roDivisionError`
-0001bdd0: 2e0d 0a20 2020 2020 2020 2064 7479 7065  ...        dtype
-0001bde0: 203a 2072 742e 6474 7970 6520 6f72 206e   : rt.dtype or n
-0001bdf0: 756d 7079 2e64 7479 7065 2c20 6465 6661  umpy.dtype, defa
-0001be00: 756c 7420 666c 6f61 7436 340d 0a20 2020  ult float64..   
-0001be10: 2020 2020 2020 2020 2054 6865 2064 6174           The dat
-0001be20: 6120 7479 7065 206f 6620 7468 6520 7265  a type of the re
-0001be30: 7375 6c74 2e20 466f 7220 6120 6046 6173  sult. For a `Fas
-0001be40: 7441 7272 6179 6020 6060 7860 602c 0d0a  tArray` ``x``,..
-0001be50: 2020 2020 2020 2020 2020 2020 6060 782e              ``x.
-0001be60: 6e61 6e6d 6561 6e28 6474 7970 6520 3d20  nanmean(dtype = 
-0001be70: 6d79 5f74 7970 6529 6060 2069 7320 6571  my_type)`` is eq
-0001be80: 7569 7661 6c65 6e74 2074 6f20 6060 6d79  uivalent to ``my
-0001be90: 5f74 7970 6528 782e 6e61 6e6d 6561 6e28  _type(x.nanmean(
-0001bea0: 2929 6060 2e0d 0a0d 0a20 2020 2020 2020  ))``.....       
-0001beb0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-0001bec0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-0001bed0: 2020 2073 6361 6c61 720d 0a20 2020 2020     scalar..     
-0001bee0: 2020 2020 2020 2054 6865 206d 6561 6e20         The mean 
-0001bef0: 6f66 2074 6865 2076 616c 7565 732e 0d0a  of the values...
-0001bf00: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
-0001bf10: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-0001bf20: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6e75  ----..        nu
-0001bf30: 6d70 792e 6e61 6e6d 6561 6e0d 0a20 2020  mpy.nanmean..   
-0001bf40: 2020 2020 2046 6173 7441 7272 6179 2e6d       FastArray.m
-0001bf50: 6561 6e20 3a20 436f 6d70 7574 6573 2074  ean : Computes t
-0001bf60: 6865 206d 6561 6e20 6f66 2060 4661 7374  he mean of `Fast
-0001bf70: 4172 7261 7960 2076 616c 7565 732e 0d0a  Array` values...
-0001bf80: 2020 2020 2020 2020 4461 7461 7365 742e          Dataset.
-0001bf90: 6e61 6e6d 6561 6e20 3a20 436f 6d70 7574  nanmean : Comput
-0001bfa0: 6573 2074 6865 206d 6561 6e20 6f66 206e  es the mean of n
-0001bfb0: 756d 6572 6963 616c 2060 4461 7461 7365  umerical `Datase
-0001bfc0: 7460 2063 6f6c 756d 6e73 2c20 6967 6e6f  t` columns, igno
-0001bfd0: 7269 6e67 0d0a 2020 2020 2020 2020 2020  ring..          
-0001bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bff0: 4e61 4e73 2e0d 0a20 2020 2020 2020 2047  NaNs...        G
-0001c000: 726f 7570 4279 4f70 732e 6e61 6e6d 6561  roupByOps.nanmea
-0001c010: 6e20 3a20 436f 6d70 7574 6573 2074 6865  n : Computes the
-0001c020: 206d 6561 6e20 6f66 2065 6163 6820 6772   mean of each gr
-0001c030: 6f75 702c 2069 676e 6f72 696e 6720 4e61  oup, ignoring Na
-0001c040: 4e73 2e20 5573 6564 2062 790d 0a20 2020  Ns. Used by..   
-0001c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c060: 2020 2020 2020 2020 2020 6043 6174 6567            `Categ
-0001c070: 6f72 6963 616c 6020 6f62 6a65 6374 732e  orical` objects.
-0001c080: 0d0a 0d0a 2020 2020 2020 2020 4e6f 7465  ....        Note
-0001c090: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0001c0a0: 0d0a 2020 2020 2020 2020 5468 6520 6064  ..        The `d
-0001c0b0: 7479 7065 6020 6b65 7977 6f72 6420 666f  type` keyword fo
-0001c0c0: 7220 6046 6173 7441 7272 6179 2e6e 616e  r `FastArray.nan
-0001c0d0: 6d65 616e 6020 7370 6563 6966 6965 7320  mean` specifies 
-0001c0e0: 7468 6520 6461 7461 2074 7970 6520 6f66  the data type of
-0001c0f0: 2074 6865 0d0a 2020 2020 2020 2020 7265   the..        re
-0001c100: 7375 6c74 2e20 5468 6973 2064 6966 6665  sult. This diffe
-0001c110: 7273 2066 726f 6d20 606e 756d 7079 2e6e  rs from `numpy.n
-0001c120: 616e 6d65 616e 602c 2077 6865 7265 2069  anmean`, where i
-0001c130: 7420 7370 6563 6966 6965 7320 7468 6520  t specifies the 
-0001c140: 6461 7461 2074 7970 6520 7573 6564 0d0a  data type used..
-0001c150: 2020 2020 2020 2020 746f 2063 6f6d 7075          to compu
-0001c160: 7465 2074 6865 206d 6561 6e2e 0d0a 0d0a  te the mean.....
-0001c170: 2020 2020 2020 2020 2a2a 4e6f 7465 7320          **Notes 
-0001c180: 6f6e 2055 7369 6e67 204e 756d 5079 2050  on Using NumPy P
-0001c190: 6172 616d 6574 6572 732a 2a0d 0a0d 0a20  arameters**.... 
-0001c1a0: 2020 2020 2020 2055 7369 6e67 2065 6974         Using eit
-0001c1b0: 6865 7220 6f66 2074 6865 2066 6f6c 6c6f  her of the follo
-0001c1c0: 7769 6e67 204e 756d 5079 2070 6172 616d  wing NumPy param
-0001c1d0: 6574 6572 7320 7769 6c6c 2063 6175 7365  eters will cause
-0001c1e0: 2052 6970 7461 626c 6520 746f 2073 7769   Riptable to swi
-0001c1f0: 7463 6820 746f 0d0a 2020 2020 2020 2020  tch to..        
-0001c200: 7468 6520 4e75 6d50 7920 696d 706c 656d  the NumPy implem
-0001c210: 656e 7461 7469 6f6e 206f 6620 7468 6973  entation of this
-0001c220: 206d 6574 686f 6420 2860 6e75 6d70 792e   method (`numpy.
-0001c230: 6e61 6e6d 6561 6e60 292e 2048 6f77 6576  nanmean`). Howev
-0001c240: 6572 2c20 756e 7469 6c20 610d 0a20 2020  er, until a..   
-0001c250: 2020 2020 2072 6570 6f72 7465 6420 6275       reported bu
-0001c260: 6720 6973 2066 6978 6564 2c20 6966 2079  g is fixed, if y
-0001c270: 6f75 2061 6c73 6f20 696e 636c 7564 6520  ou also include 
-0001c280: 7468 6520 6064 7479 7065 6020 7061 7261  the `dtype` para
-0001c290: 6d65 7465 7220 6974 2077 696c 6c20 6265  meter it will be
-0001c2a0: 0d0a 2020 2020 2020 2020 6170 706c 6965  ..        applie
-0001c2b0: 6420 746f 2074 6865 2072 6573 756c 742c  d to the result,
-0001c2c0: 206e 6f74 2075 7365 6420 746f 2063 6f6d   not used to com
-0001c2d0: 7075 7465 2074 6865 206d 6561 6e20 6173  pute the mean as
-0001c2e0: 2069 7420 6973 2069 6e20 606e 756d 7079   it is in `numpy
-0001c2f0: 2e6e 616e 6d65 616e 602e 0d0a 0d0a 2020  .nanmean`.....  
-0001c300: 2020 2020 2020 416c 736f 206e 6f74 6520        Also note 
-0001c310: 7468 6174 2069 6620 796f 7520 7573 6520  that if you use 
-0001c320: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
-0001c330: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
-0001c340: 7261 6d65 7465 7273 2061 6e64 2061 6c73  rameters and als
-0001c350: 6f0d 0a20 2020 2020 2020 2069 6e63 6c75  o..        inclu
-0001c360: 6465 2061 2060 6669 6c74 6572 6020 6b65  de a `filter` ke
-0001c370: 7977 6f72 6420 6172 6775 6d65 6e74 2028  yword argument (
-0001c380: 7768 6963 6820 606e 756d 7079 2e6e 616e  which `numpy.nan
-0001c390: 6d65 616e 6020 646f 6573 206e 6f74 2061  mean` does not a
-0001c3a0: 6363 6570 7429 2c0d 0a20 2020 2020 2020  ccept),..       
-0001c3b0: 2052 6970 7461 626c 6527 7320 696d 706c   Riptable's impl
-0001c3c0: 656d 656e 7461 7469 6f6e 206f 6620 606e  ementation of `n
-0001c3d0: 616e 6d65 616e 6020 7769 6c6c 2062 6520  anmean` will be 
-0001c3e0: 7573 6564 2077 6974 6820 7468 6520 6669  used with the fi
-0001c3f0: 6c74 6572 2061 7267 756d 656e 740d 0a20  lter argument.. 
-0001c400: 2020 2020 2020 2061 6e64 2074 6865 204e         and the N
-0001c410: 756d 5079 2070 6172 616d 6574 6572 7320  umPy parameters 
-0001c420: 7769 6c6c 2062 6520 6967 6e6f 7265 642e  will be ignored.
-0001c430: 0d0a 0d0a 2020 2020 2020 2020 6178 6973  ....        axis
-0001c440: 203a 207b 696e 742c 2074 7570 6c65 206f   : {int, tuple o
-0001c450: 6620 696e 742c 204e 6f6e 657d 2c20 6f70  f int, None}, op
-0001c460: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
-0001c470: 2020 2020 4178 6973 206f 7220 6178 6573      Axis or axes
-0001c480: 2061 6c6f 6e67 2077 6869 6368 2074 6865   along which the
-0001c490: 206d 6561 6e73 2061 7265 2063 6f6d 7075   means are compu
-0001c4a0: 7465 642e 2054 6865 2064 6566 6175 6c74  ted. The default
-0001c4b0: 2069 7320 746f 2063 6f6d 7075 7465 0d0a   is to compute..
-0001c4c0: 2020 2020 2020 2020 2020 2020 7468 6520              the 
-0001c4d0: 6d65 616e 206f 6620 7468 6520 666c 6174  mean of the flat
-0001c4e0: 7465 6e65 6420 6172 7261 792e 0d0a 0d0a  tened array.....
-0001c4f0: 2020 2020 2020 2020 6b65 6570 6469 6d73          keepdims
-0001c500: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
-0001c510: 6c0d 0a20 2020 2020 2020 2020 2020 2049  l..            I
-0001c520: 6620 7468 6973 2069 7320 7365 7420 746f  f this is set to
-0001c530: 2054 7275 652c 2074 6865 2061 7865 7320   True, the axes 
-0001c540: 7768 6963 6820 6172 6520 7265 6475 6365  which are reduce
-0001c550: 6420 6172 6520 6c65 6674 2069 6e20 7468  d are left in th
-0001c560: 6520 7265 7375 6c74 2061 730d 0a20 2020  e result as..   
-0001c570: 2020 2020 2020 2020 2064 696d 656e 7369           dimensi
-0001c580: 6f6e 7320 7769 7468 2073 697a 6520 6f6e  ons with size on
-0001c590: 652e 2057 6974 6820 7468 6973 206f 7074  e. With this opt
-0001c5a0: 696f 6e2c 2074 6865 2072 6573 756c 7420  ion, the result 
-0001c5b0: 7769 6c6c 2062 726f 6164 6361 7374 0d0a  will broadcast..
-0001c5c0: 2020 2020 2020 2020 2020 2020 636f 7272              corr
-0001c5d0: 6563 746c 7920 6167 6169 6e73 7420 7468  ectly against th
-0001c5e0: 6520 6f72 6967 696e 616c 2069 6e70 7574  e original input
-0001c5f0: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
-0001c600: 2020 2020 2020 2049 6620 7468 6520 7661         If the va
-0001c610: 6c75 6520 6973 2061 6e79 7468 696e 6720  lue is anything 
-0001c620: 6275 7420 7468 6520 6465 6661 756c 742c  but the default,
-0001c630: 2074 6865 6e20 606b 6565 7064 696d 7360   then `keepdims`
-0001c640: 2077 696c 6c20 6265 2070 6173 7365 640d   will be passed.
-0001c650: 0a20 2020 2020 2020 2020 2020 2074 6872  .            thr
-0001c660: 6f75 6768 2074 6f20 7468 6520 606d 6561  ough to the `mea
-0001c670: 6e60 206f 7220 6073 756d 6020 6d65 7468  n` or `sum` meth
-0001c680: 6f64 7320 6f66 2073 7562 2d63 6c61 7373  ods of sub-class
-0001c690: 6573 206f 6620 606e 6461 7272 6179 602e  es of `ndarray`.
-0001c6a0: 2049 6620 7468 650d 0a20 2020 2020 2020   If the..       
-0001c6b0: 2020 2020 2073 7562 2d63 6c61 7373 6573       sub-classes
-0001c6c0: 2720 6d65 7468 6f64 7320 646f 206e 6f74  ' methods do not
-0001c6d0: 2069 6d70 6c65 6d65 6e74 2060 6b65 6570   implement `keep
-0001c6e0: 6469 6d73 602c 2061 6e79 2065 7863 6570  dims`, any excep
-0001c6f0: 7469 6f6e 7320 7769 6c6c 2062 650d 0a20  tions will be.. 
-0001c700: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001c710: 642e 0d0a 0d0a 2020 2020 2020 2020 4578  d.....        Ex
-0001c720: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
-0001c730: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0001c740: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
-0001c750: 7441 7272 6179 285b 312c 2033 2c20 352c  tArray([1, 3, 5,
-0001c760: 2072 742e 6e61 6e5d 290d 0a20 2020 2020   rt.nan])..     
-0001c770: 2020 203e 3e3e 2061 2e6e 616e 6d65 616e     >>> a.nanmean
-0001c780: 2829 0d0a 2020 2020 2020 2020 332e 300d  ()..        3.0.
-0001c790: 0a0d 0a20 2020 2020 2020 2057 6974 6820  ...        With 
-0001c7a0: 6120 6064 7479 7065 6020 7370 6563 6966  a `dtype` specif
-0001c7b0: 6965 643a 0d0a 0d0a 2020 2020 2020 2020  ied:....        
-0001c7c0: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
-0001c7d0: 7272 6179 285b 312c 2033 2c20 352c 2072  rray([1, 3, 5, r
-0001c7e0: 742e 6e61 6e5d 290d 0a20 2020 2020 2020  t.nan])..       
-0001c7f0: 203e 3e3e 2061 2e6e 616e 6d65 616e 2864   >>> a.nanmean(d
-0001c800: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
-0001c810: 0d0a 2020 2020 2020 2020 330d 0a0d 0a20  ..        3.... 
-0001c820: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
-0001c830: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
-0001c840: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-0001c850: 4172 7261 7928 5b31 2c20 332c 2035 2c20  Array([1, 3, 5, 
-0001c860: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
-0001c870: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
-0001c880: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
-0001c890: 7275 652c 2054 7275 652c 2054 7275 655d  rue, True, True]
-0001c8a0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0001c8b0: 2e6e 616e 6d65 616e 2866 696c 7465 7220  .nanmean(filter 
-0001c8c0: 3d20 6229 0d0a 2020 2020 2020 2020 342e  = b)..        4.
-0001c8d0: 300d 0a20 2020 2020 2020 2022 2222 0d0a  0..        """..
-0001c8e0: 0d0a 2020 2020 2020 2020 6b77 6172 6773  ..        kwargs
-0001c8f0: 203d 2073 656c 662e 5f66 615f 6b65 7977   = self._fa_keyw
-0001c900: 6f72 645f 7772 6170 7065 7228 6669 6c74  ord_wrapper(filt
-0001c910: 6572 3d66 696c 7465 722c 2064 7479 7065  er=filter, dtype
-0001c920: 3d64 7479 7065 2c20 6178 6973 3d61 7869  =dtype, axis=axi
-0001c930: 732c 206b 6565 7064 696d 733d 6b65 6570  s, keepdims=keep
-0001c940: 6469 6d73 2c20 6464 6f66 3d4e 6f6e 652c  dims, ddof=None,
-0001c950: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-0001c960: 2020 2020 2020 6966 2066 696c 7465 7220        if filter 
-0001c970: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0001c980: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001c990: 2073 656c 662e 5f66 615f 6669 6c74 6572   self._fa_filter
-0001c9a0: 5f77 7261 7070 6572 285f 666e 616e 6d65  _wrapper(_fnanme
-0001c9b0: 616e 2c20 6669 6c74 6572 3d66 696c 7465  an, filter=filte
-0001c9c0: 722c 2064 7479 7065 3d64 7479 7065 290d  r, dtype=dtype).
-0001c9d0: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
-0001c9e0: 6e20 7365 6c66 2e5f 7265 6475 6365 5f63  n self._reduce_c
-0001c9f0: 6865 636b 2852 4544 5543 455f 4655 4e43  heck(REDUCE_FUNC
-0001ca00: 5449 4f4e 532e 5245 4455 4345 5f4e 414e  TIONS.REDUCE_NAN
-0001ca10: 4d45 414e 2c20 6e70 2e6e 616e 6d65 616e  MEAN, np.nanmean
-0001ca20: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-0001ca30: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
-0001ca40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001ca50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001ca60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001ca70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001ca80: 0d0a 2020 2020 2320 7468 6573 6520 6675  ..    # these fu
-0001ca90: 6e63 7469 6f6e 2074 616b 6520 6120 6464  nction take a dd
-0001caa0: 6f66 206b 7761 7267 0d0a 2020 2020 6465  of kwarg..    de
-0001cab0: 6620 7661 7228 7365 6c66 2c20 6669 6c74  f var(self, filt
-0001cac0: 6572 3d4e 6f6e 652c 2064 7479 7065 3d4e  er=None, dtype=N
-0001cad0: 6f6e 652c 2061 7869 733d 4e6f 6e65 2c20  one, axis=None, 
-0001cae0: 6b65 6570 6469 6d73 3d4e 6f6e 652c 2064  keepdims=None, d
-0001caf0: 646f 663d 4e6f 6e65 2c20 2a2a 6b77 6172  dof=None, **kwar
-0001cb00: 6773 293a 0d0a 2020 2020 2020 2020 2222  gs):..        ""
+00010e80: 2d2d 0d0a 2020 2020 6465 6620 6669 6c74  --..    def filt
+00010e90: 6572 2873 656c 662c 2066 696c 7465 723a  er(self, filter:
+00010ea0: 206e 7074 2e41 7272 6179 4c69 6b65 2920   npt.ArrayLike) 
+00010eb0: 2d3e 2022 4661 7374 4172 7261 7922 3a0d  -> "FastArray":.
+00010ec0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00010ed0: 2020 2020 2020 5265 7475 726e 2061 2063        Return a c
+00010ee0: 6f70 7920 6f66 2074 6865 2060 4661 7374  opy of the `Fast
+00010ef0: 4172 7261 7960 2063 6f6e 7461 696e 696e  Array` containin
+00010f00: 6720 6f6e 6c79 2074 6865 2065 6c65 6d65  g only the eleme
+00010f10: 6e74 7320 7468 6174 206d 6565 7420 7468  nts that meet th
+00010f20: 6520 7370 6563 6966 6965 640d 0a20 2020  e specified..   
+00010f30: 2020 2020 2063 6f6e 6469 7469 6f6e 2e0d       condition..
+00010f40: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+00010f50: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+00010f60: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+00010f70: 2020 2066 696c 7465 7220 3a20 6172 7261     filter : arra
+00010f80: 793a 2066 616e 6379 2069 6e64 6578 206f  y: fancy index o
+00010f90: 7220 426f 6f6c 6561 6e20 6d61 736b 0d0a  r Boolean mask..
+00010fa0: 2020 2020 2020 2020 2020 2020 4120 6661              A fa
+00010fb0: 6e63 7920 696e 6465 7820 7370 6563 6966  ncy index specif
+00010fc0: 6965 7320 626f 7468 2074 6865 2064 6573  ies both the des
+00010fd0: 6972 6564 2065 6c65 6d65 6e74 7320 616e  ired elements an
+00010fe0: 6420 7468 6569 7220 6f72 6465 7220 696e  d their order in
+00010ff0: 2074 6865 0d0a 2020 2020 2020 2020 2020   the..          
+00011000: 2020 7265 7475 726e 6564 2060 4661 7374    returned `Fast
+00011010: 4172 7261 7960 2e20 5768 656e 2061 2042  Array`. When a B
+00011020: 6f6f 6c65 616e 206d 6173 6b20 6973 2070  oolean mask is p
+00011030: 6173 7365 642c 206f 6e6c 7920 726f 7773  assed, only rows
+00011040: 2074 6861 7420 6d65 6574 2074 6865 0d0a   that meet the..
+00011050: 2020 2020 2020 2020 2020 2020 7370 6563              spec
+00011060: 6966 6965 6420 636f 6e64 6974 696f 6e20  ified condition 
+00011070: 6172 6520 696e 2074 6865 2072 6574 7572  are in the retur
+00011080: 6e65 6420 6046 6173 7441 7272 6179 602e  ned `FastArray`.
+00011090: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+000110a0: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+000110b0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
+000110c0: 6173 7441 7272 6179 600d 0a0d 0a20 2020  astArray`....   
+000110d0: 2020 2020 204e 6f74 6573 0d0a 2020 2020       Notes..    
+000110e0: 2020 2020 2d2d 2d2d 2d0d 0a20 2020 2020      -----..     
+000110f0: 2020 2049 6620 796f 7520 7761 6e74 2074     If you want t
+00011100: 6f20 7065 7266 6f72 6d20 616e 206f 7065  o perform an ope
+00011110: 7261 7469 6f6e 206f 6e20 6120 6669 6c74  ration on a filt
+00011120: 6572 6564 2046 6173 7441 7272 6179 2c20  ered FastArray, 
+00011130: 6974 2773 206d 6f72 6520 6566 6669 6369  it's more effici
+00011140: 656e 7420 746f 0d0a 2020 2020 2020 2020  ent to..        
+00011150: 7065 7266 6f72 6d20 7468 6520 6f70 6572  perform the oper
+00011160: 6174 696f 6e20 7573 696e 6720 7468 6520  ation using the 
+00011170: 6060 6669 6c74 6572 6060 206b 6579 776f  ``filter`` keywo
+00011180: 7264 2061 7267 756d 656e 742e 2046 6f72  rd argument. For
+00011190: 2065 7861 6d70 6c65 2c0d 0a20 2020 2020   example,..     
+000111a0: 2020 2060 606d 795f 6661 2e73 756d 2866     ``my_fa.sum(f
+000111b0: 696c 7465 7220 3d20 626f 6f6c 6561 6e5f  ilter = boolean_
+000111c0: 6d61 736b 2960 602e 0d0a 0d0a 2020 2020  mask)``.....    
+000111d0: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
+000111e0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+000111f0: 2020 2020 2020 2020 4372 6561 7465 2061          Create a
+00011200: 2060 4661 7374 4172 7261 7960 3a0d 0a0d   `FastArray`:...
+00011210: 0a20 2020 2020 2020 203e 3e3e 2066 6120  .        >>> fa 
+00011220: 3d20 7274 2e46 6173 7441 7272 6179 286e  = rt.FastArray(n
+00011230: 702e 6c69 6e73 7061 6365 2830 2c20 312c  p.linspace(0, 1,
+00011240: 2031 3129 290d 0a20 2020 2020 2020 203e   11))..        >
+00011250: 3e3e 2066 610d 0a20 2020 2020 2020 2046  >> fa..        F
+00011260: 6173 7441 7272 6179 285b 302e 202c 2030  astArray([0. , 0
+00011270: 2e31 2c20 302e 322c 2030 2e33 2c20 302e  .1, 0.2, 0.3, 0.
+00011280: 342c 2030 2e35 2c20 302e 362c 2030 2e37  4, 0.5, 0.6, 0.7
+00011290: 2c20 302e 382c 2030 2e39 2c20 312e 205d  , 0.8, 0.9, 1. ]
+000112a0: 290d 0a0d 0a20 2020 2020 2020 2046 696c  )....        Fil
+000112b0: 7465 7220 7573 696e 6720 6120 6661 6e63  ter using a fanc
+000112c0: 7920 696e 6465 783a 0d0a 0d0a 2020 2020  y index:....    
+000112d0: 2020 2020 3e3e 3e20 6661 2e66 696c 7465      >>> fa.filte
+000112e0: 7228 5b35 2c20 302c 2031 5d29 0d0a 2020  r([5, 0, 1])..  
+000112f0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00011300: 5b30 2e35 2c20 302e 202c 2030 2e31 5d29  [0.5, 0. , 0.1])
+00011310: 0d0a 0d0a 2020 2020 2020 2020 4669 6c74  ....        Filt
+00011320: 6572 2075 7369 6e67 2061 2063 6f6e 6469  er using a condi
+00011330: 7469 6f6e 2074 6861 7420 6372 6561 7465  tion that create
+00011340: 7320 6120 426f 6f6c 6561 6e20 6d61 736b  s a Boolean mask
+00011350: 2061 7272 6179 3a0d 0a0d 0a20 2020 2020   array:....     
+00011360: 2020 203e 3e3e 2066 612e 6669 6c74 6572     >>> fa.filter
+00011370: 2866 6120 3e20 302e 3735 290d 0a20 2020  (fa > 0.75)..   
+00011380: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+00011390: 302e 382c 2030 2e39 2c20 312e 205d 290d  0.8, 0.9, 1. ]).
+000113a0: 0a0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
+000113b0: 0d0a 2020 2020 2020 2020 2320 6e6f 726d  ..        # norm
+000113c0: 616c 697a 6520 726f 7766 696c 7465 720d  alize rowfilter.
+000113d0: 0a20 2020 2020 2020 2069 6620 6e70 2e69  .        if np.i
+000113e0: 7373 6361 6c61 7228 6669 6c74 6572 293a  sscalar(filter):
+000113f0: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+00011400: 6c74 6572 203d 206e 702e 6173 616e 7961  lter = np.asanya
+00011410: 7272 6179 285b 6669 6c74 6572 5d29 0d0a  rray([filter])..
+00011420: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
+00011430: 2069 7369 6e73 7461 6e63 6528 6669 6c74   isinstance(filt
+00011440: 6572 2c20 6e70 2e6e 6461 7272 6179 293a  er, np.ndarray):
+00011450: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+00011460: 6c74 6572 203d 206e 702e 6173 616e 7961  lter = np.asanya
+00011470: 7272 6179 2866 696c 7465 7229 0d0a 0d0a  rray(filter)....
+00011480: 2020 2020 2020 2020 2320 456e 7375 7265          # Ensure
+00011490: 2066 696c 7465 7220 6973 2062 6f6f 6c65   filter is boole
+000114a0: 616e 206f 7220 696e 7465 6765 7273 0d0a  an or integers..
+000114b0: 2020 2020 2020 2020 6966 206e 6f74 2028          if not (
+000114c0: 6e70 2e69 7373 7562 6474 7970 6528 6669  np.issubdtype(fi
+000114d0: 6c74 6572 2e64 7479 7065 2c20 6e70 2e69  lter.dtype, np.i
+000114e0: 6e74 6567 6572 2920 6f72 206e 702e 6973  nteger) or np.is
+000114f0: 7375 6264 7479 7065 2866 696c 7465 722e  subdtype(filter.
+00011500: 6474 7970 652c 2062 6f6f 6c29 293a 0d0a  dtype, bool)):..
+00011510: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00011520: 6520 5479 7065 4572 726f 7228 6622 5468  e TypeError(f"Th
+00011530: 6520 6669 6c74 6572 206d 7573 7420 6265  e filter must be
+00011540: 2061 2062 6f6f 6c65 616e 206d 6173 6b20   a boolean mask 
+00011550: 6f72 2069 6e74 6567 6572 2066 616e 6379  or integer fancy
+00011560: 2069 6e64 6578 2e22 290d 0a0d 0a20 2020   index.")....   
+00011570: 2020 2020 2023 2045 6e73 7572 6520 6066       # Ensure `f
+00011580: 696c 7465 7260 2069 7320 7468 6520 7269  ilter` is the ri
+00011590: 6768 7420 7368 6170 652e 0d0a 2020 2020  ght shape...    
+000115a0: 2020 2020 2320 556e 6c69 6b65 2060 4461      # Unlike `Da
+000115b0: 7461 7365 742e 6669 6c74 6572 6020 7765  taset.filter` we
+000115c0: 2064 6f6e 2774 2063 6f6e 7665 7274 2062   don't convert b
+000115d0: 6f6f 6c20 746f 2066 616e 6379 2c20 2062  ool to fancy,  b
+000115e0: 6563 6175 7365 2077 6527 7265 206e 6f74  ecause we're not
+000115f0: 2072 6575 7369 6e67 2074 6865 2066 616e   reusing the fan
+00011600: 6379 2069 6e64 6963 6573 2e0d 0a20 2020  cy indices...   
+00011610: 2020 2020 2069 6620 6669 6c74 6572 2e6e       if filter.n
+00011620: 6469 6d20 213d 2031 3a0d 0a20 2020 2020  dim != 1:..     
+00011630: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00011640: 7565 4572 726f 7228 2260 4661 7374 4172  ueError("`FastAr
+00011650: 7261 792e 6669 6c74 6572 6020 6f6e 6c79  ray.filter` only
+00011660: 2061 6363 6570 7473 2031 4420 6172 7261   accepts 1D arra
+00011670: 7973 2066 6f72 2074 6865 2065 6c65 6d65  ys for the eleme
+00011680: 6e74 2073 656c 6563 746f 722f 6d61 736b  nt selector/mask
+00011690: 2e22 290d 0a20 2020 2020 2020 2023 2042  .")..        # B
+000116a0: 6f6f 6c65 616e 2061 7272 6179 206e 6565  oolean array nee
+000116b0: 6473 2074 6f20 6265 2074 6865 2072 6967  ds to be the rig
+000116c0: 6874 206c 656e 6774 6820 6173 2077 656c  ht length as wel
+000116d0: 6c2e 0d0a 2020 2020 2020 2020 6966 206e  l...        if n
+000116e0: 702e 6973 7375 6264 7479 7065 2866 696c  p.issubdtype(fil
+000116f0: 7465 722e 6474 7970 652c 2062 6f6f 6c29  ter.dtype, bool)
+00011700: 2061 6e64 2028 6c65 6e28 6669 6c74 6572   and (len(filter
+00011710: 2920 213d 2073 656c 662e 7368 6170 655b  ) != self.shape[
+00011720: 305d 293a 0d0a 2020 2020 2020 2020 2020  0]):..          
+00011730: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00011740: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+00011750: 2020 2020 2066 2254 6865 206c 656e 6774       f"The lengt
+00011760: 6820 6f66 2074 6865 2070 726f 7669 6465  h of the provide
+00011770: 6420 7365 6c65 6374 696f 6e20 6d61 736b  d selection mask
+00011780: 2028 7b6c 656e 2866 696c 7465 7229 7d29   ({len(filter)})
+00011790: 2064 6f65 7320 6e6f 7420 6d61 7463 6820   does not match 
+000117a0: 7468 6520 6c65 6e67 7468 206f 6620 7468  the length of th
+000117b0: 6520 4661 7374 4172 7261 7928 7b73 656c  e FastArray({sel
+000117c0: 662e 7368 6170 655b 305d 7d29 2e22 0d0a  f.shape[0]})."..
+000117d0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+000117e0: 0a20 2020 2020 2020 2023 2050 6572 666f  .        # Perfo
+000117f0: 726d 2066 696c 7465 7220 616e 6420 7265  rm filter and re
+00011800: 7475 726e 0d0a 2020 2020 2020 2020 7265  turn..        re
+00011810: 7475 726e 2073 656c 665b 6669 6c74 6572  turn self[filter
+00011820: 5d0d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  ]....    # -----
+00011830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011870: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2072  -----..    def r
+00011880: 6573 6861 7065 2873 656c 662c 202a 6172  eshape(self, *ar
+00011890: 6773 2c20 2a2a 6b77 6172 6773 2920 2d3e  gs, **kwargs) ->
+000118a0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+000118b0: 2020 2020 2072 6573 756c 7420 3d20 7375       result = su
+000118c0: 7065 7228 4661 7374 4172 7261 792c 2073  per(FastArray, s
+000118d0: 656c 6629 2e72 6573 6861 7065 282a 6172  elf).reshape(*ar
+000118e0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a20  gs, **kwargs).. 
+000118f0: 2020 2020 2020 2023 2074 6869 7320 7761         # this wa
+00011900: 726e 696e 6720 6861 7070 656e 7320 746f  rning happens to
+00011910: 6f20 6d75 6368 206e 6f77 0d0a 2020 2020  o much now..    
+00011920: 2020 2020 2320 6966 2046 6173 7441 7272      # if FastArr
+00011930: 6179 2e5f 6368 6563 6b5f 6e64 696d 2872  ay._check_ndim(r
+00011940: 6573 756c 7429 2021 3d20 313a 0d0a 2020  esult) != 1:..  
+00011950: 2020 2020 2020 2320 2020 2077 6172 6e69        #    warni
+00011960: 6e67 732e 7761 726e 2846 6173 7441 7272  ngs.warn(FastArr
+00011970: 6179 2e57 6172 6e69 6e67 4469 6374 5b22  ay.WarningDict["
+00011980: 6d75 6c74 6970 6c65 5f64 696d 656e 7369  multiple_dimensi
+00011990: 6f6e 7322 5d2e 666f 726d 6174 2872 6573  ons"].format(res
+000119a0: 756c 742e 7368 6170 6529 290d 0a0d 0a20  ult.shape)).... 
+000119b0: 2020 2020 2020 2069 6620 6e6f 7420 2872         if not (r
+000119c0: 6573 756c 742e 666c 6167 732e 635f 636f  esult.flags.c_co
+000119d0: 6e74 6967 756f 7573 206f 7220 7265 7375  ntiguous or resu
+000119e0: 6c74 2e66 6c61 6773 2e66 5f63 6f6e 7469  lt.flags.f_conti
+000119f0: 6775 6f75 7329 3a0d 0a20 2020 2020 2020  guous):..       
+00011a00: 2020 2020 2023 2066 6978 2073 7472 6964       # fix strid
+00011a10: 6573 2070 726f 626c 656d 0d0a 2020 2020  es problem..    
+00011a20: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00011a30: 6573 756c 742e 636f 7079 2829 0d0a 2020  esult.copy()..  
+00011a40: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00011a50: 756c 740d 0a0d 0a20 2020 2023 202d 2d2d  ult....    # ---
+00011a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011a80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011aa0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00011ab0: 2072 6570 6561 7428 7365 6c66 2c20 7265   repeat(self, re
+00011ac0: 7065 6174 732c 2061 7869 733d 4e6f 6e65  peats, axis=None
+00011ad0: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
+00011ae0: 0a20 2020 2020 2020 2022 2222 5365 6520  .        """See 
+00011af0: 6072 6970 7461 626c 652e 7265 7065 6174  `riptable.repeat
+00011b00: 602e 2222 220d 0a20 2020 2020 2020 2072  `."""..        r
+00011b10: 6574 7572 6e20 7265 7065 6174 2873 656c  eturn repeat(sel
+00011b20: 662c 2072 6570 6561 7473 2c20 6178 6973  f, repeats, axis
+00011b30: 3d61 7869 7329 0d0a 0d0a 2020 2020 2320  =axis)....    # 
+00011b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011b80: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00011b90: 6465 6620 7469 6c65 2873 656c 662c 2072  def tile(self, r
+00011ba0: 6570 7329 202d 3e20 4661 7374 4172 7261  eps) -> FastArra
+00011bb0: 793a 0d0a 2020 2020 2020 2020 2222 2253  y:..        """S
+00011bc0: 6565 2060 7269 7074 6162 6c65 2e74 696c  ee `riptable.til
+00011bd0: 6560 2e22 2222 0d0a 2020 2020 2020 2020  e`."""..        
+00011be0: 7265 7475 726e 2074 696c 6528 7365 6c66  return tile(self
+00011bf0: 2c20 7265 7073 290d 0a0d 0a20 2020 2023  , reps)....    #
+00011c00: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00011c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+00011c50: 2064 6566 205f 6b77 6172 675f 6368 6563   def _kwarg_chec
+00011c60: 6b28 7365 6c66 2c20 2a61 7267 732c 202a  k(self, *args, *
+00011c70: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
+00011c80: 2020 2023 2077 6520 6861 6e64 6c65 2064     # we handle d
+00011c90: 7479 7065 0d0a 2020 2020 2020 2020 6966  type..        if
+00011ca0: 2028 2264 646f 6622 2069 6e20 6b77 6172   ("ddof" in kwar
+00011cb0: 6773 2061 6e64 206b 7761 7267 735b 2264  gs and kwargs["d
+00011cc0: 646f 6622 5d20 213d 2031 2920 6f72 2022  dof"] != 1) or "
+00011cd0: 6178 6973 2220 696e 206b 7761 7267 7320  axis" in kwargs 
+00011ce0: 6f72 2022 6b65 6570 6469 6d73 2220 696e  or "keepdims" in
+00011cf0: 206b 7761 7267 733a 0d0a 2020 2020 2020   kwargs:..      
+00011d00: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+00011d10: 650d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  e....    # -----
+00011d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d60: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
+00011d70: 7265 6475 6365 5f63 6865 636b 2873 656c  reduce_check(sel
+00011d80: 662c 2072 6564 7563 6546 756e 633a 2052  f, reduceFunc: R
+00011d90: 4544 5543 455f 4655 4e43 5449 4f4e 532c  EDUCE_FUNCTIONS,
+00011da0: 206e 7046 756e 632c 202a 6172 6773 2c20   npFunc, *args, 
+00011db0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+00011dc0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00011dd0: 2041 7267 323a 206e 7046 756e 6320 7061   Arg2: npFunc pa
+00011de0: 7373 2069 6e20 4e6f 6e65 2069 6620 6e6f  ss in None if no
+00011df0: 206e 756d 7079 2065 7175 6976 616c 656e   numpy equivalen
+00011e00: 7420 6675 6e63 7469 6f6e 0d0a 2020 2020  t function..    
+00011e10: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00011e20: 2069 6620 6e70 4675 6e63 2069 7320 6e6f   if npFunc is no
+00011e30: 7420 4e6f 6e65 2061 6e64 2028 7365 6c66  t None and (self
+00011e40: 2e5f 6b77 6172 675f 6368 6563 6b28 2a61  ._kwarg_check(*a
+00011e50: 7267 732c 202a 2a6b 7761 7267 7329 206f  rgs, **kwargs) o
+00011e60: 7220 6c65 6e28 7365 6c66 2e73 6861 7065  r len(self.shape
+00011e70: 2920 213d 2031 293a 0d0a 2020 2020 2020  ) != 1):..      
+00011e80: 2020 2020 2020 2320 544f 444f 3a20 6164        # TODO: ad
+00011e90: 6420 746f 206d 6174 6820 6c65 6467 6572  d to math ledger
+00011ea0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00011eb0: 7365 7420 6464 6f66 3d31 2069 6620 4e4f  set ddof=1 if NO
+00011ec0: 5420 7365 7420 7768 6963 6820 6973 2046  T set which is F
+00011ed0: 6173 7441 7272 6179 2064 6566 6175 6c74  astArray default
+00011ee0: 2074 6f20 6d61 7463 6820 6d61 746c 6162   to match matlab
+00011ef0: 2f70 616e 6461 730d 0a20 2020 2020 2020  /pandas..       
+00011f00: 2020 2020 2069 6620 2264 646f 6622 206e       if "ddof" n
+00011f10: 6f74 2069 6e20 6b77 6172 6773 2061 6e64  ot in kwargs and
+00011f20: 2072 6564 7563 6546 756e 6320 696e 205b   reduceFunc in [
+00011f30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011f40: 2020 5245 4455 4345 5f46 554e 4354 494f    REDUCE_FUNCTIO
+00011f50: 4e53 2e52 4544 5543 455f 5641 522c 0d0a  NS.REDUCE_VAR,..
+00011f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f70: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
+00011f80: 2e52 4544 5543 455f 4e41 4e56 4152 2c0d  .REDUCE_NANVAR,.
+00011f90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011fa0: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
+00011fb0: 532e 5245 4455 4345 5f53 5444 2c0d 0a20  S.REDUCE_STD,.. 
+00011fc0: 2020 2020 2020 2020 2020 2020 2020 2052                 R
+00011fd0: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
+00011fe0: 5245 4455 4345 5f4e 414e 5354 442c 0d0a  REDUCE_NANSTD,..
+00011ff0: 2020 2020 2020 2020 2020 2020 5d3a 0d0a              ]:..
+00012000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012010: 6b77 6172 6773 5b22 6464 6f66 225d 203d  kwargs["ddof"] =
+00012020: 2031 0d0a 0d0a 2020 2020 2020 2020 2020   1....          
+00012030: 2020 7265 7375 6c74 203d 206e 7046 756e    result = npFun
+00012040: 6328 7365 6c66 2e5f 6e70 2c20 2a61 7267  c(self._np, *arg
+00012050: 732c 202a 2a6b 7761 7267 7329 0d0a 2020  s, **kwargs)..  
+00012060: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00012070: 2072 6573 756c 740d 0a0d 0a20 2020 2020   result....     
+00012080: 2020 2072 6573 756c 7420 3d20 5479 7065     result = Type
+00012090: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
+000120a0: 6765 722e 5f52 4544 5543 4528 7365 6c66  ger._REDUCE(self
+000120b0: 2c20 7265 6475 6365 4675 6e63 290d 0a0d  , reduceFunc)...
+000120c0: 0a20 2020 2020 2020 2023 2049 7427 7320  .        # It's 
+000120d0: 706f 7373 6962 6c65 2074 6865 7265 2077  possible there w
+000120e0: 6173 206e 6f20 7265 7375 6c74 2072 6574  as no result ret
+000120f0: 7572 6e65 6420 6672 6f6d 2074 6865 2072  urned from the r
+00012100: 6564 7563 7469 6f6e 2066 756e 6374 696f  eduction functio
+00012110: 6e3b 0d0a 2020 2020 2020 2020 2320 652e  n;..        # e.
+00012120: 672e 2069 6620 7468 6520 696e 7075 7420  g. if the input 
+00012130: 7761 7320 656d 7074 792e 2049 6620 7468  was empty. If th
+00012140: 6520 6675 6e63 7469 6f6e 2062 6569 6e67  e function being
+00012150: 2063 616c 6c65 6420 6973 2077 656c 6c2d   called is well-
+00012160: 6465 6669 6e65 640d 0a20 2020 2020 2020  defined..       
+00012170: 2023 2066 6f72 2065 6d70 7479 206c 6973   # for empty lis
+00012180: 7473 202d 2d20 692e 652e 2069 7420 6973  ts -- i.e. it is
+00012190: 2061 2072 6564 7563 7469 6f6e 206f 7065   a reduction ope
+000121a0: 7261 7469 6f6e 2077 6974 6820 6120 6465  ration with a de
+000121b0: 6669 6e65 640d 0a20 2020 2020 2020 2023  fined..        #
+000121c0: 2069 6465 6e74 6974 7920 656c 656d 656e   identity elemen
+000121d0: 7420 2d2d 2073 6574 2074 6865 2072 6573  t -- set the res
+000121e0: 756c 7420 746f 2074 6865 2069 6465 6e74  ult to the ident
+000121f0: 6974 7920 656c 656d 656e 7420 736f 2074  ity element so t
+00012200: 6865 2072 6573 7420 6f66 0d0a 2020 2020  he rest of..    
+00012210: 2020 2020 2320 7468 6520 6c6f 6769 6320      # the logic 
+00012220: 6265 6c6f 7720 7769 6c6c 2077 6f72 6b20  below will work 
+00012230: 636f 7272 6563 746c 792e 0d0a 2020 2020  correctly...    
+00012240: 2020 2020 2320 4966 2074 6865 7265 2069      # If there i
+00012250: 7320 6e6f 2069 6465 6e74 6974 7920 656c  s no identity el
+00012260: 656d 656e 7420 666f 7220 7468 6973 206f  ement for this o
+00012270: 7065 7261 7469 6f6e 2c20 7261 6973 6520  peration, raise 
+00012280: 616e 2065 7863 6570 7469 6f6e 2074 6f0d  an exception to.
+00012290: 0a20 2020 2020 2020 2023 206c 6574 2074  .        # let t
+000122a0: 6865 2075 7365 7220 6b6e 6f77 3b20 7765  he user know; we
+000122b0: 2764 2072 6169 7365 2061 6e20 6578 6365  'd raise an exce
+000122c0: 7074 696f 6e20 6265 6c6f 7720 2a61 6e79  ption below *any
+000122d0: 7761 792a 2c20 616e 6420 7468 6973 2061  way*, and this a
+000122e0: 6c6c 6f77 730d 0a20 2020 2020 2020 2023  llows..        #
+000122f0: 2075 7320 746f 2070 726f 7669 6465 2074   us to provide t
+00012300: 6865 2075 7365 7220 7769 7468 2061 206d  he user with a m
+00012310: 6f72 652d 6465 7363 7269 7074 6976 652f  ore-descriptive/
+00012320: 6163 7469 6f6e 6162 6c65 2065 7272 6f72  actionable error
+00012330: 206d 6573 7361 6765 2e0d 0a20 2020 2020   message...     
+00012340: 2020 2069 6620 7265 7375 6c74 2069 7320     if result is 
+00012350: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00012360: 2020 206f 705f 6964 656e 7469 7479 5f76     op_identity_v
+00012370: 616c 203d 2074 7970 6528 7365 6c66 292e  al = type(self).
+00012380: 5f72 6564 7563 655f 6f70 5f69 6465 6e74  _reduce_op_ident
+00012390: 6974 795f 7661 6c75 652e 6765 7428 7265  ity_value.get(re
+000123a0: 6475 6365 4675 6e63 2c20 4e6f 6e65 290d  duceFunc, None).
+000123b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000123c0: 6f70 5f69 6465 6e74 6974 795f 7661 6c20  op_identity_val 
+000123d0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+000123e0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000123f0: 7375 6c74 203d 206f 705f 6964 656e 7469  sult = op_identi
+00012400: 7479 5f76 616c 0d0a 2020 2020 2020 2020  ty_val..        
+00012410: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00012420: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00012430: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
+00012440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012450: 2020 6622 5265 6475 6374 696f 6e20 277b    f"Reduction '{
+00012460: 7374 7228 7265 6475 6365 4675 6e63 297d  str(reduceFunc)}
+00012470: 2720 646f 6573 206e 6f74 2068 6176 6520  ' does not have 
+00012480: 616e 2069 6465 6e74 6974 7920 656c 656d  an identity elem
+00012490: 656e 7420 736f 2063 616e 6e6f 7420 6265  ent so cannot be
+000124a0: 2063 6f6d 7075 7465 6420 6f76 6572 2061   computed over a
+000124b0: 6e20 656d 7074 7920 6172 7261 792e 220d  n empty array.".
+000124c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000124d0: 2029 0d0a 0d0a 2020 2020 2020 2020 2320   )....        # 
+000124e0: 5761 7320 616e 206f 7574 7075 7420 6474  Was an output dt
+000124f0: 7970 6520 7761 7320 6578 706c 6963 6974  ype was explicit
+00012500: 6c79 2073 7065 6369 6669 6564 3f0d 0a20  ly specified?.. 
+00012510: 2020 2020 2020 2064 7479 7065 203d 206b         dtype = k
+00012520: 7761 7267 732e 6765 7428 2264 7479 7065  wargs.get("dtype
+00012530: 222c 204e 6f6e 6529 0d0a 2020 2020 2020  ", None)..      
+00012540: 2020 6966 2064 7479 7065 2069 7320 6e6f    if dtype is no
+00012550: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00012560: 2020 2020 2023 2075 7365 7220 666f 7263       # user forc
+00012570: 6564 2064 7479 7065 2072 6574 7572 6e20  ed dtype return 
+00012580: 7661 6c75 650d 0a20 2020 2020 2020 2020  value..         
+00012590: 2020 2072 6574 7572 6e20 6474 7970 6528     return dtype(
+000125a0: 7265 7375 6c74 290d 0a0d 0a20 2020 2020  result)....     
+000125b0: 2020 2023 2070 7265 7365 7276 6520 7479     # preserve ty
+000125c0: 7065 2066 6f72 206d 696e 2f6d 6178 2f6e  pe for min/max/n
+000125d0: 616e 6d69 6e2f 6e61 6e6d 6178 0d0a 2020  anmin/nanmax..  
+000125e0: 2020 2020 2020 6966 2072 6564 7563 6546        if reduceF
+000125f0: 756e 6320 696e 205b 0d0a 2020 2020 2020  unc in [..      
+00012600: 2020 2020 2020 5245 4455 4345 5f46 554e        REDUCE_FUN
+00012610: 4354 494f 4e53 2e52 4544 5543 455f 4d49  CTIONS.REDUCE_MI
+00012620: 4e2c 0d0a 2020 2020 2020 2020 2020 2020  N,..            
+00012630: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
+00012640: 2e52 4544 5543 455f 4e41 4e4d 494e 2c0d  .REDUCE_NANMIN,.
+00012650: 0a20 2020 2020 2020 2020 2020 2052 4544  .            RED
+00012660: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
+00012670: 4455 4345 5f4d 4158 2c0d 0a20 2020 2020  DUCE_MAX,..     
+00012680: 2020 2020 2020 2052 4544 5543 455f 4655         REDUCE_FU
+00012690: 4e43 5449 4f4e 532e 5245 4455 4345 5f4e  NCTIONS.REDUCE_N
+000126a0: 414e 4d41 582c 0d0a 2020 2020 2020 2020  ANMAX,..        
+000126b0: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+000126c0: 7265 7475 726e 2073 656c 662e 6474 7970  return self.dtyp
+000126d0: 652e 7479 7065 2872 6573 756c 7429 0d0a  e.type(result)..
+000126e0: 0d0a 2020 2020 2020 2020 2320 696e 7465  ..        # inte
+000126f0: 726e 616c 6c79 206e 756d 7079 2065 7870  rnally numpy exp
+00012700: 6563 7473 2061 2064 7479 7065 2072 6574  ects a dtype ret
+00012710: 7572 6e65 6420 666f 7220 6e61 6e73 7464  urned for nanstd
+00012720: 2061 6e64 206f 7468 6572 2063 616c 6375   and other calcu
+00012730: 6c61 7469 6f6e 730d 0a20 2020 2020 2020  lations..       
+00012740: 2069 6620 6973 696e 7374 616e 6365 2872   if isinstance(r
+00012750: 6573 756c 742c 2028 696e 742c 206e 702e  esult, (int, np.
+00012760: 696e 7465 6765 7229 293a 0d0a 2020 2020  integer)):..    
+00012770: 2020 2020 2020 2020 2320 666f 7220 7569          # for ui
+00012780: 6e74 3634 2c20 7468 6520 6869 6768 2062  nt64, the high b
+00012790: 6974 206d 7573 7420 6265 2070 7265 7365  it must be prese
+000127a0: 7276 6564 0d0a 2020 2020 2020 2020 2020  rved..          
+000127b0: 2020 6966 2073 656c 662e 6474 7970 652e    if self.dtype.
+000127c0: 6368 6172 2069 6e20 4e75 6d70 7943 6861  char in NumpyCha
+000127d0: 7254 7970 6573 2e55 6e73 6967 6e65 6449  rTypes.UnsignedI
+000127e0: 6e74 6567 6572 3634 3a0d 0a20 2020 2020  nteger64:..     
+000127f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00012800: 6e20 6e70 2e75 696e 7436 3428 7265 7375  n np.uint64(resu
+00012810: 6c74 290d 0a20 2020 2020 2020 2020 2020  lt)..           
+00012820: 2072 6574 7572 6e20 6e70 2e69 6e74 3634   return np.int64
+00012830: 2872 6573 756c 7429 0d0a 0d0a 2020 2020  (result)....    
+00012840: 2020 2020 7265 7475 726e 206e 702e 666c      return np.fl
+00012850: 6f61 7436 3428 7265 7375 6c74 290d 0a0d  oat64(result)...
+00012860: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00012870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000128a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000128b0: 2d2d 0d0a 2020 2020 6465 6620 5f63 6f6d  --..    def _com
+000128c0: 7061 7265 5f63 6865 636b 2873 656c 662c  pare_check(self,
+000128d0: 2066 756e 632c 206f 7468 6572 2920 2d3e   func, other) ->
+000128e0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+000128f0: 2020 2020 2023 2061 2075 7365 7220 6d69       # a user mi
+00012900: 6768 7420 7479 7065 2069 6e20 6120 7374  ght type in a st
+00012910: 7269 6e67 2061 6e64 2077 6520 7761 6e74  ring and we want
+00012920: 2061 2062 7974 6573 2073 7472 696e 670d   a bytes string.
+00012930: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00012940: 2e64 7479 7065 2e63 6861 7220 696e 2022  .dtype.char in "
+00012950: 5355 223a 0d0a 2020 2020 2020 2020 2020  SU":..          
+00012960: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00012970: 6f74 6865 722c 2073 7472 293a 0d0a 2020  other, str):..  
+00012980: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00012990: 2073 656c 662e 6474 7970 652e 6368 6172   self.dtype.char
+000129a0: 203d 3d20 2253 223a 0d0a 2020 2020 2020   == "S":..      
+000129b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000129c0: 7765 2061 7265 2062 7974 6520 7374 7269  we are byte stri
+000129d0: 6e67 7320 6275 7420 7363 616c 6172 2075  ngs but scalar u
+000129e0: 6e69 636f 6465 2070 6173 7365 6420 696e  nicode passed in
+000129f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012a00: 2020 2020 2020 6f74 6865 7220 3d20 7374        other = st
+00012a10: 722e 656e 636f 6465 286f 7468 6572 290d  r.encode(other).
+00012a20: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
+00012a30: 6620 6973 696e 7374 616e 6365 286f 7468  f isinstance(oth
+00012a40: 6572 2c20 6c69 7374 293a 0d0a 2020 2020  er, list):..    
+00012a50: 2020 2020 2020 2020 2020 2020 2320 636f              # co
+00012a60: 6e76 6572 7420 7468 6520 6c69 7374 2073  nvert the list s
+00012a70: 6f20 6120 636f 6d70 6172 6973 6f6e 2063  o a comparison c
+00012a80: 616e 2062 6520 6d61 6465 2074 6f20 7468  an be made to th
+00012a90: 6520 6279 7465 2073 7472 696e 6720 6172  e byte string ar
+00012aa0: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
+00012ab0: 2020 2020 206f 7468 6572 203d 2046 6173       other = Fas
+00012ac0: 7441 7272 6179 286f 7468 6572 290d 0a0d  tArray(other)...
+00012ad0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00012ae0: 756c 7420 3d20 6675 6e63 286f 7468 6572  ult = func(other
+00012af0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00012b00: 2023 204e 4f54 453a 206e 756d 7079 2064   # NOTE: numpy d
+00012b10: 6f65 7320 6361 6c6c 2046 4120 7566 756e  oes call FA ufun
+00012b20: 6320 666f 7220 7374 7269 6e67 730d 0a20  c for strings.. 
+00012b30: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00012b40: 7420 6973 696e 7374 616e 6365 2872 6573  t isinstance(res
+00012b50: 756c 742c 2046 6173 7441 7272 6179 2920  ult, FastArray) 
+00012b60: 616e 6420 6973 696e 7374 616e 6365 2872  and isinstance(r
+00012b70: 6573 756c 742c 206e 702e 6e64 6172 7261  esult, np.ndarra
+00012b80: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+00012b90: 2020 2020 2072 6573 756c 7420 3d20 7265       result = re
+00012ba0: 7375 6c74 2e76 6965 7728 4661 7374 4172  sult.view(FastAr
+00012bb0: 7261 7929 0d0a 2020 2020 2020 2020 2020  ray)..          
+00012bc0: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
+00012bd0: 0a0d 0a20 2020 2020 2020 2072 6573 756c  ...        resul
+00012be0: 7420 3d20 6675 6e63 286f 7468 6572 290d  t = func(other).
+00012bf0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00012c00: 7265 7375 6c74 0d0a 0d0a 2020 2020 6465  result....    de
+00012c10: 6620 5f5f 6e65 5f5f 2873 656c 662c 206f  f __ne__(self, o
+00012c20: 7468 6572 293a 0d0a 2020 2020 2020 2020  ther):..        
+00012c30: 7265 7475 726e 2073 656c 662e 5f63 6f6d  return self._com
+00012c40: 7061 7265 5f63 6865 636b 2873 7570 6572  pare_check(super
+00012c50: 2829 2e5f 5f6e 655f 5f2c 206f 7468 6572  ().__ne__, other
+00012c60: 290d 0a0d 0a20 2020 2064 6566 205f 5f65  )....    def __e
+00012c70: 715f 5f28 7365 6c66 2c20 6f74 6865 7229  q__(self, other)
+00012c80: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00012c90: 6e20 7365 6c66 2e5f 636f 6d70 6172 655f  n self._compare_
+00012ca0: 6368 6563 6b28 7375 7065 7228 292e 5f5f  check(super().__
+00012cb0: 6571 5f5f 2c20 6f74 6865 7229 0d0a 0d0a  eq__, other)....
+00012cc0: 2020 2020 6465 6620 5f5f 6765 5f5f 2873      def __ge__(s
+00012cd0: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
+00012ce0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00012cf0: 662e 5f63 6f6d 7061 7265 5f63 6865 636b  f._compare_check
+00012d00: 2873 7570 6572 2829 2e5f 5f67 655f 5f2c  (super().__ge__,
+00012d10: 206f 7468 6572 290d 0a0d 0a20 2020 2064   other)....    d
+00012d20: 6566 205f 5f67 745f 5f28 7365 6c66 2c20  ef __gt__(self, 
+00012d30: 6f74 6865 7229 3a0d 0a20 2020 2020 2020  other):..       
+00012d40: 2072 6574 7572 6e20 7365 6c66 2e5f 636f   return self._co
+00012d50: 6d70 6172 655f 6368 6563 6b28 7375 7065  mpare_check(supe
+00012d60: 7228 292e 5f5f 6774 5f5f 2c20 6f74 6865  r().__gt__, othe
+00012d70: 7229 0d0a 0d0a 2020 2020 6465 6620 5f5f  r)....    def __
+00012d80: 6c65 5f5f 2873 656c 662c 206f 7468 6572  le__(self, other
+00012d90: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+00012da0: 726e 2073 656c 662e 5f63 6f6d 7061 7265  rn self._compare
+00012db0: 5f63 6865 636b 2873 7570 6572 2829 2e5f  _check(super()._
+00012dc0: 5f6c 655f 5f2c 206f 7468 6572 290d 0a0d  _le__, other)...
+00012dd0: 0a20 2020 2064 6566 205f 5f6c 745f 5f28  .    def __lt__(
+00012de0: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
+00012df0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00012e00: 6c66 2e5f 636f 6d70 6172 655f 6368 6563  lf._compare_chec
+00012e10: 6b28 7375 7065 7228 292e 5f5f 6c74 5f5f  k(super().__lt__
+00012e20: 2c20 6f74 6865 7229 0d0a 0d0a 2020 2020  , other)....    
+00012e30: 6465 6620 6571 2873 656c 662c 206f 7468  def eq(self, oth
+00012e40: 6572 293a 0d0a 2020 2020 2020 2020 7265  er):..        re
+00012e50: 7475 726e 2073 656c 662e 5f5f 6571 5f5f  turn self.__eq__
+00012e60: 286f 7468 6572 290d 0a0d 0a20 2020 2064  (other)....    d
+00012e70: 6566 206e 6528 7365 6c66 2c20 6f74 6865  ef ne(self, othe
+00012e80: 7229 3a0d 0a20 2020 2020 2020 2072 6574  r):..        ret
+00012e90: 7572 6e20 7365 6c66 2e5f 5f6e 655f 5f28  urn self.__ne__(
+00012ea0: 6f74 6865 7229 0d0a 0d0a 2020 2020 6465  other)....    de
+00012eb0: 6620 6765 2873 656c 662c 206f 7468 6572  f ge(self, other
+00012ec0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+00012ed0: 726e 2073 656c 662e 5f5f 6765 5f5f 286f  rn self.__ge__(o
+00012ee0: 7468 6572 290d 0a0d 0a20 2020 2064 6566  ther)....    def
+00012ef0: 206c 6528 7365 6c66 2c20 6f74 6865 7229   le(self, other)
+00012f00: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00012f10: 6e20 7365 6c66 2e5f 5f6c 655f 5f28 6f74  n self.__le__(ot
+00012f20: 6865 7229 0d0a 0d0a 2020 2020 6465 6620  her)....    def 
+00012f30: 6774 2873 656c 662c 206f 7468 6572 293a  gt(self, other):
+00012f40: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00012f50: 2073 656c 662e 5f5f 6774 5f5f 286f 7468   self.__gt__(oth
+00012f60: 6572 290d 0a0d 0a20 2020 2064 6566 206c  er)....    def l
+00012f70: 7428 7365 6c66 2c20 6f74 6865 7229 3a0d  t(self, other):.
+00012f80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00012f90: 7365 6c66 2e5f 5f6c 745f 5f28 6f74 6865  self.__lt__(othe
+00012fa0: 7229 0d0a 0d0a 2020 2020 6164 6420 3d20  r)....    add = 
+00012fb0: 6e70 2e6e 6461 7272 6179 2e5f 5f61 6464  np.ndarray.__add
+00012fc0: 5f5f 0d0a 2020 2020 7375 6220 3d20 6e70  __..    sub = np
+00012fd0: 2e6e 6461 7272 6179 2e5f 5f73 7562 5f5f  .ndarray.__sub__
+00012fe0: 0d0a 2020 2020 6d75 6c20 3d20 6e70 2e6e  ..    mul = np.n
+00012ff0: 6461 7272 6179 2e5f 5f6d 756c 5f5f 0d0a  darray.__mul__..
+00013000: 2020 2020 6469 7620 3d20 6e70 2e6e 6461      div = np.nda
+00013010: 7272 6179 2e5f 5f74 7275 6564 6976 5f5f  rray.__truediv__
+00013020: 0d0a 2020 2020 666c 6f6f 7264 6976 203d  ..    floordiv =
+00013030: 206e 702e 6e64 6172 7261 792e 5f5f 666c   np.ndarray.__fl
+00013040: 6f6f 7264 6976 5f5f 0d0a 2020 2020 706f  oordiv__..    po
+00013050: 7720 3d20 6e70 2e6e 6461 7272 6179 2e5f  w = np.ndarray._
+00013060: 5f70 6f77 5f5f 0d0a 2020 2020 6d6f 6420  _pow__..    mod 
+00013070: 3d20 6e70 2e6e 6461 7272 6179 2e5f 5f6d  = np.ndarray.__m
+00013080: 6f64 5f5f 0d0a 0d0a 2020 2020 2320 2d2d  od__....    # --
+00013090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000130a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000130b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000130c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000130d0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+000130e0: 6566 2073 7472 5f61 7070 656e 6428 7365  ef str_append(se
+000130f0: 6c66 2c20 6f74 6865 7229 3a0d 0a20 2020  lf, other):..   
+00013100: 2020 2020 2069 6620 7365 6c66 2e64 7479       if self.dty
+00013110: 7065 2e6e 756d 203d 3d20 6f74 6865 722e  pe.num == other.
+00013120: 6474 7970 652e 6e75 6d3a 0d0a 2020 2020  dtype.num:..    
+00013130: 2020 2020 2020 2020 6675 6e63 203d 2054          func = T
+00013140: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+00013150: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
+00013160: 485f 5457 4f5f 494e 5055 5453 0d0a 2020  H_TWO_INPUTS..  
+00013170: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00013180: 2066 756e 6328 2873 656c 662c 206f 7468   func((self, oth
+00013190: 6572 292c 204d 4154 485f 4f50 4552 4154  er), MATH_OPERAT
+000131a0: 494f 4e2e 4144 442c 2073 656c 662e 6474  ION.ADD, self.dt
+000131b0: 7970 652e 6e75 6d29 0d0a 2020 2020 2020  ype.num)..      
+000131c0: 2020 7261 6973 6520 5479 7065 4572 726f    raise TypeErro
+000131d0: 7228 2263 616e 6e6f 7420 636f 6e63 6174  r("cannot concat
+000131e0: 2229 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  ")....    # ----
+000131f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013230: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00013240: 2073 7175 6565 7a65 2873 656c 662c 202a   squeeze(self, *
+00013250: 6172 6773 2c20 2a2a 6b77 6172 6773 293a  args, **kwargs):
+00013260: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00013270: 2073 656c 662e 5f6e 702e 7371 7565 657a   self._np.squeez
+00013280: 6528 2a61 7267 732c 202a 2a6b 7761 7267  e(*args, **kwarg
+00013290: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
+000132a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000132b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000132c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000132d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000132e0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+000132f0: 2069 7363 6f6d 7075 7461 626c 6528 7365   iscomputable(se
+00013300: 6c66 2920 2d3e 2062 6f6f 6c3a 0d0a 2020  lf) -> bool:..  
+00013310: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
+00013320: 6552 6567 6973 7465 722e 6973 5f63 6f6d  eRegister.is_com
+00013330: 7075 7461 626c 6528 7365 6c66 290d 0a0d  putable(self)...
+00013340: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
+00013350: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013360: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013370: 2323 0d0a 2020 2020 2320 6e65 702d 3138  ##..    # nep-18
+00013380: 2061 7272 6179 2066 756e 6374 696f 6e20   array function 
+00013390: 7072 6f74 6f63 6f6c 2069 6d70 6c65 6d65  protocol impleme
+000133a0: 6e74 6174 696f 6e0d 0a20 2020 2023 2323  ntation..    ###
+000133b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000133c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000133d0: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
+000133e0: 4063 6c61 7373 6d65 7468 6f64 0d0a 2020  @classmethod..  
+000133f0: 2020 6465 6620 5f70 795f 6e75 6d62 6572    def _py_number
+00013400: 5f74 6f5f 6e70 5f64 7479 7065 280d 0a20  _to_np_dtype(.. 
+00013410: 2020 2020 2020 2063 6c73 2c20 7661 6c3a         cls, val:
+00013420: 2055 6e69 6f6e 5b69 6e74 2c20 6e70 2e69   Union[int, np.i
+00013430: 6e74 6567 6572 2c20 4e6f 6e65 5d2c 2064  nteger, None], d
+00013440: 7479 7065 3a20 6e70 2e64 7479 7065 0d0a  type: np.dtype..
+00013450: 2020 2020 2920 2d3e 2055 6e69 6f6e 5b6e      ) -> Union[n
+00013460: 702e 7569 6e74 2c20 6e70 2e69 6e74 3634  p.uint, np.int64
+00013470: 2c20 6e70 2e66 6c6f 6174 3634 2c20 4e6f  , np.float64, No
+00013480: 6e65 5d3a 0d0a 2020 2020 2020 2020 2222  ne]:..        ""
+00013490: 2243 6f6e 7665 7274 2061 2070 7974 686f  "Convert a pytho
+000134a0: 6e20 7479 7065 2074 6f20 6e75 6d70 7920  n type to numpy 
+000134b0: 6474 7970 652e 0d0a 2020 2020 2020 2020  dtype...        
+000134c0: 4f6e 6c79 2068 616e 646c 6573 2069 6e74  Only handles int
+000134d0: 6567 6572 732e 2222 220d 0a20 2020 2020  egers."""..     
+000134e0: 2020 2069 6620 7661 6c20 6973 206e 6f74     if val is not
+000134f0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00013500: 2020 2020 2320 696e 7465 726e 616c 6c79      # internally
+00013510: 206e 756d 7079 2065 7870 6563 7473 2061   numpy expects a
+00013520: 2064 7479 7065 2072 6574 7572 6e65 6420   dtype returned 
+00013530: 666f 7220 6e61 6e73 7464 2061 6e64 206f  for nanstd and o
+00013540: 7468 6572 2063 616c 6375 6c61 7469 6f6e  ther calculation
+00013550: 730d 0a20 2020 2020 2020 2020 2020 2069  s..            i
+00013560: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
+00013570: 2c20 2869 6e74 2c20 6e70 2e69 6e74 6567  , (int, np.integ
+00013580: 6572 2929 3a0d 0a20 2020 2020 2020 2020  er)):..         
+00013590: 2020 2020 2020 2023 2066 6f72 2075 696e         # for uin
+000135a0: 7436 342c 2074 6865 2068 6967 6820 6269  t64, the high bi
+000135b0: 7420 6d75 7374 2062 6520 7072 6573 6572  t must be preser
+000135c0: 7665 640d 0a20 2020 2020 2020 2020 2020  ved..           
+000135d0: 2020 2020 2069 6620 6474 7970 652e 6368       if dtype.ch
+000135e0: 6172 2069 6e20 4e75 6d70 7943 6861 7254  ar in NumpyCharT
+000135f0: 7970 6573 2e55 6e73 6967 6e65 6449 6e74  ypes.UnsignedInt
+00013600: 6567 6572 3634 3a0d 0a20 2020 2020 2020  eger64:..       
+00013610: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00013620: 7572 6e20 6e70 2e75 696e 7436 3428 7661  urn np.uint64(va
+00013630: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
+00013640: 2020 2020 7265 7475 726e 206e 702e 696e      return np.in
+00013650: 7436 3428 7661 6c29 0d0a 2020 2020 2020  t64(val)..      
+00013660: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
+00013670: 666c 6f61 7436 3428 7661 6c29 0d0a 2020  float64(val)..  
+00013680: 2020 2020 2020 7265 7475 726e 2076 616c        return val
+00013690: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
+000136a0: 6574 686f 640d 0a20 2020 2040 5f41 7272  ethod..    @_Arr
+000136b0: 6179 4675 6e63 7469 6f6e 4865 6c70 6572  ayFunctionHelper
+000136c0: 2e72 6567 6973 7465 725f 6172 7261 795f  .register_array_
+000136d0: 6675 6e63 7469 6f6e 286e 702e 6172 676d  function(np.argm
+000136e0: 6178 290d 0a20 2020 2064 6566 205f 6172  ax)..    def _ar
+000136f0: 676d 6178 2861 2c20 6178 6973 3d4e 6f6e  gmax(a, axis=Non
+00013700: 652c 206f 7574 3d4e 6f6e 6529 3a0d 0a20  e, out=None):.. 
+00013710: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00013720: 7263 2e52 6564 7563 6528 612c 2052 4544  rc.Reduce(a, RED
+00013730: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
+00013740: 4455 4345 5f41 5247 4d41 582c 2030 290d  DUCE_ARGMAX, 0).
+00013750: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013760: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
+00013770: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
+00013780: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
+00013790: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+000137a0: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
+000137b0: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
+000137c0: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
+000137d0: 5f66 756e 6374 696f 6e28 6e70 2e6e 616e  _function(np.nan
+000137e0: 6172 676d 6178 290d 0a20 2020 2064 6566  argmax)..    def
+000137f0: 205f 6e61 6e61 7267 6d61 7828 612c 2061   _nanargmax(a, a
+00013800: 7869 733d 4e6f 6e65 293a 0d0a 2020 2020  xis=None):..    
+00013810: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
+00013820: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
+00013830: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+00013840: 455f 4e41 4e41 5247 4d41 582c 2030 290d  E_NANARGMAX, 0).
+00013850: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013860: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
+00013870: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
+00013880: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
+00013890: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+000138a0: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
+000138b0: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
+000138c0: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
+000138d0: 5f66 756e 6374 696f 6e28 6e70 2e61 7267  _function(np.arg
+000138e0: 6d69 6e29 0d0a 2020 2020 6465 6620 5f61  min)..    def _a
+000138f0: 7267 6d69 6e28 612c 2061 7869 733d 4e6f  rgmin(a, axis=No
+00013900: 6e65 2c20 6f75 743d 4e6f 6e65 293a 0d0a  ne, out=None):..
+00013910: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00013920: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
+00013930: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00013940: 4544 5543 455f 4152 474d 494e 2c20 3029  EDUCE_ARGMIN, 0)
+00013950: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00013960: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
+00013970: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
+00013980: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
+00013990: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
+000139a0: 636d 6574 686f 640d 0a20 2020 2040 5f41  cmethod..    @_A
+000139b0: 7272 6179 4675 6e63 7469 6f6e 4865 6c70  rrayFunctionHelp
+000139c0: 6572 2e72 6567 6973 7465 725f 6172 7261  er.register_arra
+000139d0: 795f 6675 6e63 7469 6f6e 286e 702e 6e61  y_function(np.na
+000139e0: 6e61 7267 6d69 6e29 0d0a 2020 2020 6465  nargmin)..    de
+000139f0: 6620 5f6e 616e 6172 676d 696e 2861 2c20  f _nanargmin(a, 
+00013a00: 6178 6973 3d4e 6f6e 6529 3a0d 0a20 2020  axis=None):..   
+00013a10: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
+00013a20: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
+00013a30: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+00013a40: 4345 5f4e 414e 4152 474d 494e 2c20 3029  CE_NANARGMIN, 0)
+00013a50: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00013a60: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
+00013a70: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
+00013a80: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
+00013a90: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
+00013aa0: 636d 6574 686f 640d 0a20 2020 2040 5f41  cmethod..    @_A
+00013ab0: 7272 6179 4675 6e63 7469 6f6e 4865 6c70  rrayFunctionHelp
+00013ac0: 6572 2e72 6567 6973 7465 725f 6172 7261  er.register_arra
+00013ad0: 795f 6675 6e63 7469 6f6e 286e 702e 656d  y_function(np.em
+00013ae0: 7074 795f 6c69 6b65 290d 0a20 2020 2064  pty_like)..    d
+00013af0: 6566 205f 656d 7074 795f 6c69 6b65 280d  ef _empty_like(.
+00013b00: 0a20 2020 2020 2020 2061 7272 6179 3a20  .        array: 
+00013b10: 2246 6173 7441 7272 6179 222c 0d0a 2020  "FastArray",..  
+00013b20: 2020 2020 2020 6474 7970 653a 204f 7074        dtype: Opt
+00013b30: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
+00013b40: 206e 702e 6474 7970 655d 5d20 3d20 4e6f   np.dtype]] = No
+00013b50: 6e65 2c0d 0a20 2020 2020 2020 206f 7264  ne,..        ord
+00013b60: 6572 3a20 7374 7220 3d20 224b 222c 0d0a  er: str = "K",..
+00013b70: 2020 2020 2020 2020 7375 626f 6b3a 2062          subok: b
+00013b80: 6f6f 6c20 3d20 5472 7565 2c0d 0a20 2020  ool = True,..   
+00013b90: 2020 2020 2073 6861 7065 3a20 4f70 7469       shape: Opti
+00013ba0: 6f6e 616c 5b55 6e69 6f6e 5b69 6e74 2c20  onal[Union[int, 
+00013bb0: 5365 7175 656e 6365 5b69 6e74 5d5d 5d20  Sequence[int]]] 
+00013bc0: 3d20 4e6f 6e65 2c0d 0a20 2020 2029 202d  = None,..    ) -
+00013bd0: 3e20 2246 6173 7441 7272 6179 223a 0d0a  > "FastArray":..
+00013be0: 2020 2020 2020 2020 6172 7261 7920 3d20          array = 
+00013bf0: 6172 7261 792e 5f6e 700d 0a20 2020 2020  array._np..     
+00013c00: 2020 2072 6573 756c 7420 3d20 7263 2e4c     result = rc.L
+00013c10: 6564 6765 7246 756e 6374 696f 6e28 6e70  edgerFunction(np
+00013c20: 2e65 6d70 7479 5f6c 696b 652c 2061 7272  .empty_like, arr
+00013c30: 6179 2c20 6474 7970 653d 6474 7970 652c  ay, dtype=dtype,
+00013c40: 206f 7264 6572 3d6f 7264 6572 2c20 7375   order=order, su
+00013c50: 626f 6b3d 7375 626f 6b2c 2073 6861 7065  bok=subok, shape
+00013c60: 3d73 6861 7065 290d 0a20 2020 2020 2020  =shape)..       
+00013c70: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
+00013c80: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+00013c90: 686f 640d 0a20 2020 2040 5f41 7272 6179  hod..    @_Array
+00013ca0: 4675 6e63 7469 6f6e 4865 6c70 6572 2e72  FunctionHelper.r
+00013cb0: 6567 6973 7465 725f 6172 7261 795f 6675  egister_array_fu
+00013cc0: 6e63 7469 6f6e 286e 702e 6d61 7829 0d0a  nction(np.max)..
+00013cd0: 2020 2020 6465 6620 5f6d 6178 2861 2c20      def _max(a, 
+00013ce0: 6178 6973 3d4e 6f6e 652c 206f 7574 3d4e  axis=None, out=N
+00013cf0: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
+00013d00: 6e65 2c20 696e 6974 6961 6c3d 4e6f 6e65  ne, initial=None
+00013d10: 2c20 7768 6572 653d 4e6f 6e65 293a 0d0a  , where=None):..
+00013d20: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00013d30: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
+00013d40: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00013d50: 4544 5543 455f 4d41 582c 2030 290d 0a20  EDUCE_MAX, 0).. 
+00013d60: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+00013d70: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00013d80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00013d90: 6e20 612e 6474 7970 652e 7479 7065 2872  n a.dtype.type(r
+00013da0: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
+00013db0: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
+00013dc0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00013dd0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+00013de0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00013df0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00013e00: 6374 696f 6e28 6e70 2e6e 616e 6d61 7829  ction(np.nanmax)
+00013e10: 0d0a 2020 2020 6465 6620 5f6e 616e 6d61  ..    def _nanma
+00013e20: 7828 612c 2061 7869 733d 4e6f 6e65 2c20  x(a, axis=None, 
+00013e30: 6f75 743d 4e6f 6e65 2c20 6b65 6570 6469  out=None, keepdi
+00013e40: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
+00013e50: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
+00013e60: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
+00013e70: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00013e80: 5f4e 414e 4d41 582c 2030 290d 0a20 2020  _NANMAX, 0)..   
+00013e90: 2020 2020 2069 6620 7265 7375 6c74 2069       if result i
+00013ea0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00013eb0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00013ec0: 612e 6474 7970 652e 7479 7065 2872 6573  a.dtype.type(res
+00013ed0: 756c 7429 0d0a 2020 2020 2020 2020 7265  ult)..        re
+00013ee0: 7475 726e 2072 6573 756c 740d 0a0d 0a20  turn result.... 
+00013ef0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00013f00: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
+00013f10: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
+00013f20: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
+00013f30: 696f 6e28 6e70 2e6d 6561 6e29 0d0a 2020  ion(np.mean)..  
+00013f40: 2020 6465 6620 5f6d 6561 6e28 612c 2061    def _mean(a, a
+00013f50: 7869 733d 4e6f 6e65 2c20 6474 7970 653d  xis=None, dtype=
+00013f60: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
+00013f70: 6b65 6570 6469 6d73 3d4e 6f6e 6529 3a0d  keepdims=None):.
+00013f80: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00013f90: 3d20 7263 2e52 6564 7563 6528 612c 2052  = rc.Reduce(a, R
+00013fa0: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
+00013fb0: 5245 4455 4345 5f4d 4541 4e2c 2030 290d  REDUCE_MEAN, 0).
+00013fc0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013fd0: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
+00013fe0: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
+00013ff0: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
+00014000: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+00014010: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
+00014020: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
+00014030: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
+00014040: 5f66 756e 6374 696f 6e28 6e70 2e6e 616e  _function(np.nan
+00014050: 6d65 616e 290d 0a20 2020 2064 6566 205f  mean)..    def _
+00014060: 6e61 6e6d 6561 6e28 612c 2061 7869 733d  nanmean(a, axis=
+00014070: 4e6f 6e65 2c20 6474 7970 653d 4e6f 6e65  None, dtype=None
+00014080: 2c20 6f75 743d 4e6f 6e65 2c20 6b65 6570  , out=None, keep
+00014090: 6469 6d73 3d4e 6f6e 6529 3a0d 0a20 2020  dims=None):..   
+000140a0: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
+000140b0: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
+000140c0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+000140d0: 4345 5f4e 414e 4d45 414e 2c20 3029 0d0a  CE_NANMEAN, 0)..
+000140e0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+000140f0: 6173 7441 7272 6179 2e5f 7079 5f6e 756d  astArray._py_num
+00014100: 6265 725f 746f 5f6e 705f 6474 7970 6528  ber_to_np_dtype(
+00014110: 7265 7375 6c74 2c20 612e 6474 7970 6529  result, a.dtype)
+00014120: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
+00014130: 6574 686f 640d 0a20 2020 2040 5f41 7272  ethod..    @_Arr
+00014140: 6179 4675 6e63 7469 6f6e 4865 6c70 6572  ayFunctionHelper
+00014150: 2e72 6567 6973 7465 725f 6172 7261 795f  .register_array_
+00014160: 6675 6e63 7469 6f6e 286e 702e 6d69 6e29  function(np.min)
+00014170: 0d0a 2020 2020 6465 6620 5f6d 696e 2861  ..    def _min(a
+00014180: 2c20 6178 6973 3d4e 6f6e 652c 206f 7574  , axis=None, out
+00014190: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
+000141a0: 4e6f 6e65 2c20 696e 6974 6961 6c3d 4e6f  None, initial=No
+000141b0: 6e65 2c20 7768 6572 653d 4e6f 6e65 293a  ne, where=None):
+000141c0: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
+000141d0: 203d 2072 632e 5265 6475 6365 2861 2c20   = rc.Reduce(a, 
+000141e0: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
+000141f0: 2e52 4544 5543 455f 4d49 4e2c 2030 290d  .REDUCE_MIN, 0).
+00014200: 0a20 2020 2020 2020 2069 6620 7265 7375  .        if resu
+00014210: 6c74 2069 7320 6e6f 7420 4e6f 6e65 3a0d  lt is not None:.
+00014220: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00014230: 7572 6e20 612e 6474 7970 652e 7479 7065  urn a.dtype.type
+00014240: 2872 6573 756c 7429 0d0a 2020 2020 2020  (result)..      
+00014250: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
+00014260: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
+00014270: 7468 6f64 0d0a 2020 2020 405f 4172 7261  thod..    @_Arra
+00014280: 7946 756e 6374 696f 6e48 656c 7065 722e  yFunctionHelper.
+00014290: 7265 6769 7374 6572 5f61 7272 6179 5f66  register_array_f
+000142a0: 756e 6374 696f 6e28 6e70 2e6e 616e 6d69  unction(np.nanmi
+000142b0: 6e29 0d0a 2020 2020 6465 6620 5f6e 616e  n)..    def _nan
+000142c0: 6d69 6e28 612c 2061 7869 733d 4e6f 6e65  min(a, axis=None
+000142d0: 2c20 6f75 743d 4e6f 6e65 2c20 6b65 6570  , out=None, keep
+000142e0: 6469 6d73 3d4e 6f6e 6529 3a0d 0a20 2020  dims=None):..   
+000142f0: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
+00014300: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
+00014310: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+00014320: 4345 5f4e 414e 4d49 4e2c 2030 290d 0a20  CE_NANMIN, 0).. 
+00014330: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+00014340: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00014350: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00014360: 6e20 612e 6474 7970 652e 7479 7065 2872  n a.dtype.type(r
+00014370: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
+00014380: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
+00014390: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+000143a0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+000143b0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+000143c0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+000143d0: 6374 696f 6e28 6e70 2e73 7464 290d 0a20  ction(np.std).. 
+000143e0: 2020 2064 6566 205f 7374 6428 612c 2061     def _std(a, a
+000143f0: 7869 733d 4e6f 6e65 2c20 6474 7970 653d  xis=None, dtype=
+00014400: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
+00014410: 6464 6f66 3d4e 6f6e 652c 206b 6565 7064  ddof=None, keepd
+00014420: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
+00014430: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
+00014440: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
+00014450: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+00014460: 455f 5354 442c 2030 290d 0a20 2020 2020  E_STD, 0)..     
+00014470: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
+00014480: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
+00014490: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
+000144a0: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
+000144b0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+000144c0: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
+000144d0: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
+000144e0: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
+000144f0: 696f 6e28 6e70 2e6e 616e 7374 6429 0d0a  ion(np.nanstd)..
+00014500: 2020 2020 6465 6620 5f6e 616e 7374 6428      def _nanstd(
+00014510: 612c 2061 7869 733d 4e6f 6e65 2c20 6474  a, axis=None, dt
+00014520: 7970 653d 4e6f 6e65 2c20 6f75 743d 4e6f  ype=None, out=No
+00014530: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 206b  ne, ddof=None, k
+00014540: 6565 7064 696d 733d 4e6f 6e65 293a 0d0a  eepdims=None):..
+00014550: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00014560: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
+00014570: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00014580: 4544 5543 455f 4e41 4e53 5444 2c20 3029  EDUCE_NANSTD, 0)
+00014590: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000145a0: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
+000145b0: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
+000145c0: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
+000145d0: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
+000145e0: 636d 6574 686f 640d 0a20 2020 2040 5f41  cmethod..    @_A
+000145f0: 7272 6179 4675 6e63 7469 6f6e 4865 6c70  rrayFunctionHelp
+00014600: 6572 2e72 6567 6973 7465 725f 6172 7261  er.register_arra
+00014610: 795f 6675 6e63 7469 6f6e 286e 702e 726f  y_function(np.ro
+00014620: 756e 6429 0d0a 2020 2020 405f 4172 7261  und)..    @_Arra
+00014630: 7946 756e 6374 696f 6e48 656c 7065 722e  yFunctionHelper.
+00014640: 7265 6769 7374 6572 5f61 7272 6179 5f66  register_array_f
+00014650: 756e 6374 696f 6e28 6e70 2e61 726f 756e  unction(np.aroun
+00014660: 6429 0d0a 2020 2020 405f 4172 7261 7946  d)..    @_ArrayF
+00014670: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00014680: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00014690: 6374 696f 6e28 6e70 2e72 6f75 6e64 5f29  ction(np.round_)
+000146a0: 2020 2320 4e2e 422c 2072 6f75 6e64 5f20    # N.B, round_ 
+000146b0: 6973 2061 6e20 616c 6961 7320 666f 7220  is an alias for 
+000146c0: 6172 6f75 6e64 0d0a 2020 2020 6465 6620  around..    def 
+000146d0: 5f72 6f75 6e64 5f28 612c 2064 6563 696d  _round_(a, decim
+000146e0: 616c 733d 4e6f 6e65 2c20 6f75 743d 4e6f  als=None, out=No
+000146f0: 6e65 293a 0d0a 2020 2020 2020 2020 2320  ne):..        # 
+00014700: 544f 444f 2068 616e 646c 6520 6064 6563  TODO handle `dec
+00014710: 696d 616c 6020 616e 6420 606f 7574 6020  imal` and `out` 
+00014720: 6172 6775 6d65 6e74 730d 0a20 2020 2020  arguments..     
+00014730: 2020 2023 2049 6620 6361 6c6c 6572 7320     # If callers 
+00014740: 6465 6369 6465 2074 6f20 7573 6520 7468  decide to use th
+00014750: 6973 2046 6173 7441 7272 6179 2073 7461  is FastArray sta
+00014760: 7469 636d 6574 686f 6420 6f75 7473 6964  ticmethod outsid
+00014770: 6520 7468 6520 7363 6f70 6520 6f66 2061  e the scope of a
+00014780: 7272 6179 2066 756e 6374 696f 6e20 7072  rray function pr
+00014790: 6f74 6f63 6f6c 0d0a 2020 2020 2020 2020  otocol..        
+000147a0: 2320 7072 6f76 6964 6520 6172 6775 6d65  # provide argume
+000147b0: 6e74 2063 6865 636b 7320 7369 6e63 6520  nt checks since 
+000147c0: 6974 206d 6179 2062 6563 6f6d 6520 756e  it may become un
+000147d0: 636c 6561 7220 7768 656e 2074 6869 6e67  clear when thing
+000147e0: 7320 6661 696c 2061 7420 7468 6520 4320  s fail at the C 
+000147f0: 6578 7465 6e73 696f 6e20 6c61 7965 722e  extension layer.
+00014800: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+00014810: 2069 7369 6e73 7461 6e63 6528 612c 2046   isinstance(a, F
+00014820: 6173 7441 7272 6179 293a 0d0a 2020 2020  astArray):..    
+00014830: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00014840: 6c75 6545 7272 6f72 2866 227b 4661 7374  lueError(f"{Fast
+00014850: 4172 7261 792e 5f5f 6e61 6d65 5f5f 7d2e  Array.__name__}.
+00014860: 5f72 6f75 6e64 5f20 6578 7065 6374 6564  _round_ expected
+00014870: 2046 6173 7441 7272 6179 2073 7562 7479   FastArray subty
+00014880: 7065 2c20 676f 7420 7b74 7970 6528 6129  pe, got {type(a)
+00014890: 7d22 290d 0a0d 0a20 2020 2020 2020 206f  }")....        o
+000148a0: 7269 6769 6e61 6c5f 6474 7970 6520 3d20  riginal_dtype = 
+000148b0: 612e 6474 7970 650d 0a20 2020 2020 2020  a.dtype..       
+000148c0: 2061 203d 2061 2e61 7374 7970 6528 6e70   a = a.astype(np
+000148d0: 2e66 6c6f 6174 3634 290d 0a20 2020 2020  .float64)..     
+000148e0: 2020 2066 6173 745f 6675 6e63 7469 6f6e     fast_function
+000148f0: 203d 2067 556e 6172 7955 4675 6e63 732e   = gUnaryUFuncs.
+00014900: 6765 7428 6e70 2e72 6f75 6e64 2c20 4e6f  get(np.round, No
+00014910: 6e65 290d 0a20 2020 2020 2020 2069 6620  ne)..        if 
+00014920: 6661 7374 5f66 756e 6374 696f 6e20 6973  fast_function is
+00014930: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00014940: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+00014950: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
+00014960: 2020 2020 2020 2066 227b 4661 7374 4172         f"{FastAr
+00014970: 7261 792e 5f5f 6e61 6d65 5f5f 7d2e 5f72  ray.__name__}._r
+00014980: 6f75 6e64 5f20 756e 6861 6e64 6c65 6420  ound_ unhandled 
+00014990: 6172 7261 7920 6675 6e63 7469 6f6e 207b  array function {
+000149a0: 6e70 2e72 6f75 6e64 7d5c 6e4b 6e6f 776e  np.round}\nKnown
+000149b0: 206e 756d 7079 2061 7272 6179 2066 756e   numpy array fun
+000149c0: 6374 696f 6e20 746f 2072 6970 7461 626c  ction to riptabl
+000149d0: 6520 6675 6e63 7469 6f6e 733a 207b 7265  e functions: {re
+000149e0: 7072 2867 556e 6172 7955 4675 6e63 7329  pr(gUnaryUFuncs)
+000149f0: 7d22 0d0a 2020 2020 2020 2020 2020 2020  }"..            
+00014a00: 290d 0a0d 0a20 2020 2020 2020 2023 2046  )....        # F
+00014a10: 6f72 204d 4154 485f 4f50 4552 4154 494f  or MATH_OPERATIO
+00014a20: 4e2e 524f 554e 442c 205f 4241 5349 434d  N.ROUND, _BASICM
+00014a30: 4154 485f 4f4e 455f 494e 5055 5420 7265  ATH_ONE_INPUT re
+00014a40: 7475 726e 7320 616e 2061 7272 6179 2060  turns an array `
+00014a50: 6172 7261 7928 4e6f 6e65 2c20 6474 7970  array(None, dtyp
+00014a60: 653d 6f62 6a65 6374 2960 0d0a 2020 2020  e=object)`..    
+00014a70: 2020 2020 2320 6966 2074 6865 2069 6e70      # if the inp
+00014a80: 7574 2064 7479 7065 2069 7320 6e6f 7420  ut dtype is not 
+00014a90: 6120 666c 6f61 7436 342e 2041 7320 6120  a float64. As a 
+00014aa0: 776f 726b 6172 6f75 6e64 2063 6173 7420  workaround cast 
+00014ab0: 746f 2066 6c6f 6174 3634 2064 7479 7065  to float64 dtype
+00014ac0: 2c20 7065 7266 6f72 6d20 7468 6520 6f70  , perform the op
+00014ad0: 6572 6174 696f 6e2c 0d0a 2020 2020 2020  eration,..      
+00014ae0: 2020 2320 7468 656e 2063 6173 7420 6261    # then cast ba
+00014af0: 636b 2074 6f20 7468 6520 6f72 6967 696e  ck to the origin
+00014b00: 616c 2064 7479 7065 2e0d 0a20 2020 2020  al dtype...     
+00014b10: 2020 2072 6573 756c 7420 3d20 5479 7065     result = Type
+00014b20: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
+00014b30: 6765 722e 5f42 4153 4943 4d41 5448 5f4f  ger._BASICMATH_O
+00014b40: 4e45 5f49 4e50 5554 2861 2c20 6661 7374  NE_INPUT(a, fast
+00014b50: 5f66 756e 6374 696f 6e2c 2030 290d 0a0d  _function, 0)...
+00014b60: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00014b70: 6973 696e 7374 616e 6365 2872 6573 756c  isinstance(resul
+00014b80: 742c 2046 6173 7441 7272 6179 2920 616e  t, FastArray) an
+00014b90: 6420 6973 696e 7374 616e 6365 2872 6573  d isinstance(res
+00014ba0: 756c 742c 206e 702e 6e64 6172 7261 7929  ult, np.ndarray)
+00014bb0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00014bc0: 6573 756c 7420 3d20 7265 7375 6c74 2e76  esult = result.v
+00014bd0: 6965 7728 4661 7374 4172 7261 7929 0d0a  iew(FastArray)..
+00014be0: 0d0a 2020 2020 2020 2020 6966 2072 6573  ..        if res
+00014bf0: 756c 742e 6474 7970 6520 213d 206f 7269  ult.dtype != ori
+00014c00: 6769 6e61 6c5f 6474 7970 653a 0d0a 2020  ginal_dtype:..  
+00014c10: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00014c20: 203d 2072 6573 756c 742e 6173 7479 7065   = result.astype
+00014c30: 286f 7269 6769 6e61 6c5f 6474 7970 6529  (original_dtype)
+00014c40: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
+00014c50: 726e 2072 6573 756c 740d 0a0d 0a20 2020  rn result....   
+00014c60: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
+00014c70: 2020 2020 405f 4172 7261 7946 756e 6374      @_ArrayFunct
+00014c80: 696f 6e48 656c 7065 722e 7265 6769 7374  ionHelper.regist
+00014c90: 6572 5f61 7272 6179 5f66 756e 6374 696f  er_array_functio
+00014ca0: 6e28 6e70 2e73 756d 290d 0a20 2020 2064  n(np.sum)..    d
+00014cb0: 6566 205f 7375 6d28 612c 2061 7869 733d  ef _sum(a, axis=
+00014cc0: 4e6f 6e65 2c20 6474 7970 653d 4e6f 6e65  None, dtype=None
+00014cd0: 2c20 6f75 743d 4e6f 6e65 2c20 6b65 6570  , out=None, keep
+00014ce0: 6469 6d73 3d4e 6f6e 652c 2069 6e69 7469  dims=None, initi
+00014cf0: 616c 3d4e 6f6e 652c 2077 6865 7265 3d4e  al=None, where=N
+00014d00: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
+00014d10: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
+00014d20: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
+00014d30: 5449 4f4e 532e 5245 4455 4345 5f53 554d  TIONS.REDUCE_SUM
+00014d40: 2c20 3029 0d0a 2020 2020 2020 2020 7265  , 0)..        re
+00014d50: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
+00014d60: 7079 5f6e 756d 6265 725f 746f 5f6e 705f  py_number_to_np_
+00014d70: 6474 7970 6528 7265 7375 6c74 2c20 612e  dtype(result, a.
+00014d80: 6474 7970 6529 0d0a 0d0a 2020 2020 4073  dtype)....    @s
+00014d90: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+00014da0: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
+00014db0: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
+00014dc0: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
+00014dd0: 702e 6e61 6e73 756d 290d 0a20 2020 2064  p.nansum)..    d
+00014de0: 6566 205f 6e61 6e73 756d 2861 2c20 6178  ef _nansum(a, ax
+00014df0: 6973 3d4e 6f6e 652c 2064 7479 7065 3d4e  is=None, dtype=N
+00014e00: 6f6e 652c 206f 7574 3d4e 6f6e 652c 206b  one, out=None, k
+00014e10: 6565 7064 696d 733d 4e6f 6e65 293a 0d0a  eepdims=None):..
+00014e20: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00014e30: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
+00014e40: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00014e50: 4544 5543 455f 4e41 4e53 554d 2c20 3029  EDUCE_NANSUM, 0)
+00014e60: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00014e70: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
+00014e80: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
+00014e90: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
+00014ea0: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
+00014eb0: 636d 6574 686f 640d 0a20 2020 2040 5f41  cmethod..    @_A
+00014ec0: 7272 6179 4675 6e63 7469 6f6e 4865 6c70  rrayFunctionHelp
+00014ed0: 6572 2e72 6567 6973 7465 725f 6172 7261  er.register_arra
+00014ee0: 795f 6675 6e63 7469 6f6e 286e 702e 7661  y_function(np.va
+00014ef0: 7229 0d0a 2020 2020 6465 6620 5f76 6172  r)..    def _var
+00014f00: 2861 2c20 6178 6973 3d4e 6f6e 652c 2064  (a, axis=None, d
+00014f10: 7479 7065 3d4e 6f6e 652c 206f 7574 3d4e  type=None, out=N
+00014f20: 6f6e 652c 2064 646f 663d 4e6f 6e65 2c20  one, ddof=None, 
+00014f30: 6b65 6570 6469 6d73 3d4e 6f6e 6529 3a0d  keepdims=None):.
+00014f40: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00014f50: 3d20 7263 2e52 6564 7563 6528 612c 2052  = rc.Reduce(a, R
+00014f60: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
+00014f70: 5245 4455 4345 5f56 4152 2c20 3029 0d0a  REDUCE_VAR, 0)..
+00014f80: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+00014f90: 6173 7441 7272 6179 2e5f 7079 5f6e 756d  astArray._py_num
+00014fa0: 6265 725f 746f 5f6e 705f 6474 7970 6528  ber_to_np_dtype(
+00014fb0: 7265 7375 6c74 2c20 612e 6474 7970 6529  result, a.dtype)
+00014fc0: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
+00014fd0: 6574 686f 640d 0a20 2020 2040 5f41 7272  ethod..    @_Arr
+00014fe0: 6179 4675 6e63 7469 6f6e 4865 6c70 6572  ayFunctionHelper
+00014ff0: 2e72 6567 6973 7465 725f 6172 7261 795f  .register_array_
+00015000: 6675 6e63 7469 6f6e 286e 702e 6e61 6e76  function(np.nanv
+00015010: 6172 290d 0a20 2020 2064 6566 205f 6e61  ar)..    def _na
+00015020: 6e76 6172 2861 2c20 6178 6973 3d4e 6f6e  nvar(a, axis=Non
+00015030: 652c 2064 7479 7065 3d4e 6f6e 652c 206f  e, dtype=None, o
+00015040: 7574 3d4e 6f6e 652c 2064 646f 663d 4e6f  ut=None, ddof=No
+00015050: 6e65 2c20 6b65 6570 6469 6d73 3d4e 6f6e  ne, keepdims=Non
+00015060: 6529 3a0d 0a20 2020 2020 2020 2072 6573  e):..        res
+00015070: 756c 7420 3d20 7263 2e52 6564 7563 6528  ult = rc.Reduce(
+00015080: 612c 2052 4544 5543 455f 4655 4e43 5449  a, REDUCE_FUNCTI
+00015090: 4f4e 532e 5245 4455 4345 5f4e 414e 5641  ONS.REDUCE_NANVA
+000150a0: 522c 2030 290d 0a20 2020 2020 2020 2072  R, 0)..        r
+000150b0: 6574 7572 6e20 4661 7374 4172 7261 792e  eturn FastArray.
+000150c0: 5f70 795f 6e75 6d62 6572 5f74 6f5f 6e70  _py_number_to_np
+000150d0: 5f64 7479 7065 2872 6573 756c 742c 2061  _dtype(result, a
+000150e0: 2e64 7479 7065 290d 0a0d 0a20 2020 2023  .dtype)....    #
+000150f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015100: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015110: 2323 2323 2323 2323 2323 2323 0d0a 2020  ############..  
+00015120: 2020 2320 4865 6c70 6572 2073 6563 7469    # Helper secti
+00015130: 6f6e 0d0a 2020 2020 2323 2323 2323 2323  on..    ########
+00015140: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015150: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015160: 2323 2323 230d 0a20 2020 2064 6566 2061  #####..    def a
+00015170: 6273 2873 656c 662c 202a 2a6b 7761 7267  bs(self, **kwarg
+00015180: 7329 202d 3e20 4661 7374 4172 7261 793a  s) -> FastArray:
+00015190: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000151a0: 206e 702e 6162 7328 7365 6c66 2c20 2a2a   np.abs(self, **
+000151b0: 6b77 6172 6773 290d 0a0d 0a20 2020 2064  kwargs)....    d
+000151c0: 6566 206d 6564 6961 6e28 7365 6c66 2c20  ef median(self, 
+000151d0: 2a2a 6b77 6172 6773 2920 2d3e 206e 702e  **kwargs) -> np.
+000151e0: 6e75 6d62 6572 3a0d 0a20 2020 2020 2020  number:..       
+000151f0: 2072 6574 7572 6e20 6e70 2e6d 6564 6961   return np.media
+00015200: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
+00015210: 290d 0a0d 0a20 2020 2064 6566 206e 616e  )....    def nan
+00015220: 6d65 6469 616e 2873 656c 662c 202a 2a6b  median(self, **k
+00015230: 7761 7267 7329 202d 3e20 6e70 2e6e 756d  wargs) -> np.num
+00015240: 6265 723a 0d0a 2020 2020 2020 2020 7265  ber:..        re
+00015250: 7475 726e 206e 702e 6e61 6e6d 6564 6961  turn np.nanmedia
+00015260: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
+00015270: 290d 0a0d 0a20 2020 2064 6566 2071 7561  )....    def qua
+00015280: 6e74 696c 6528 7365 6c66 2c20 2a2a 6b77  ntile(self, **kw
+00015290: 6172 6773 2920 2d3e 206e 702e 6e75 6d62  args) -> np.numb
+000152a0: 6572 207c 2046 6173 7441 7272 6179 3a0d  er | FastArray:.
+000152b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000152c0: 6e70 2e71 7561 6e74 696c 6528 7365 6c66  np.quantile(self
+000152d0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+000152e0: 2020 2064 6566 206e 616e 7175 616e 7469     def nanquanti
+000152f0: 6c65 2873 656c 662c 202a 2a6b 7761 7267  le(self, **kwarg
+00015300: 7329 202d 3e20 6e70 2e6e 756d 6265 7220  s) -> np.number 
+00015310: 7c20 4661 7374 4172 7261 793a 0d0a 2020  | FastArray:..  
+00015320: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
+00015330: 6e61 6e71 7561 6e74 696c 6528 7365 6c66  nanquantile(self
+00015340: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+00015350: 2020 2064 6566 2070 6572 6365 6e74 696c     def percentil
+00015360: 6528 7365 6c66 2c20 2a2a 6b77 6172 6773  e(self, **kwargs
+00015370: 2920 2d3e 206e 702e 6e75 6d62 6572 207c  ) -> np.number |
+00015380: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+00015390: 2020 2020 2072 6574 7572 6e20 6e70 2e70       return np.p
+000153a0: 6572 6365 6e74 696c 6528 7365 6c66 2c20  ercentile(self, 
+000153b0: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
+000153c0: 2064 6566 206e 616e 7065 7263 656e 7469   def nanpercenti
+000153d0: 6c65 2873 656c 662c 202a 2a6b 7761 7267  le(self, **kwarg
+000153e0: 7329 202d 3e20 6e70 2e6e 756d 6265 7220  s) -> np.number 
+000153f0: 7c20 4661 7374 4172 7261 793a 0d0a 2020  | FastArray:..  
+00015400: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
+00015410: 6e61 6e70 6572 6365 6e74 696c 6528 7365  nanpercentile(se
+00015420: 6c66 2c20 2a2a 6b77 6172 6773 290d 0a0d  lf, **kwargs)...
+00015430: 0a20 2020 2064 6566 2063 6c69 705f 6c6f  .    def clip_lo
+00015440: 7765 7228 7365 6c66 2c20 615f 6d69 6e2c  wer(self, a_min,
+00015450: 202a 2a6b 7761 7267 7329 202d 3e20 4661   **kwargs) -> Fa
+00015460: 7374 4172 7261 793a 0d0a 2020 2020 2020  stArray:..      
+00015470: 2020 7265 7475 726e 2073 656c 662e 636c    return self.cl
+00015480: 6970 2861 5f6d 696e 2c20 4e6f 6e65 2c20  ip(a_min, None, 
+00015490: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
+000154a0: 2064 6566 2063 6c69 705f 7570 7065 7228   def clip_upper(
+000154b0: 7365 6c66 2c20 615f 6d61 782c 202a 2a6b  self, a_max, **k
+000154c0: 7761 7267 7329 202d 3e20 4661 7374 4172  wargs) -> FastAr
+000154d0: 7261 793a 0d0a 2020 2020 2020 2020 7265  ray:..        re
+000154e0: 7475 726e 2073 656c 662e 636c 6970 284e  turn self.clip(N
+000154f0: 6f6e 652c 2061 5f6d 6178 2c20 2a2a 6b77  one, a_max, **kw
+00015500: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
+00015510: 2073 6967 6e28 7365 6c66 2c20 2a2a 6b77   sign(self, **kw
+00015520: 6172 6773 2920 2d3e 2046 6173 7441 7272  args) -> FastArr
+00015530: 6179 3a0d 0a20 2020 2020 2020 2072 6574  ay:..        ret
+00015540: 7572 6e20 6e70 2e73 6967 6e28 7365 6c66  urn np.sign(self
+00015550: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+00015560: 2020 2064 6566 2074 7275 6e63 2873 656c     def trunc(sel
+00015570: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
+00015580: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
+00015590: 2020 2020 7265 7475 726e 206e 702e 7472      return np.tr
+000155a0: 756e 6328 7365 6c66 2c20 2a2a 6b77 6172  unc(self, **kwar
+000155b0: 6773 290d 0a0d 0a20 2020 2064 6566 2077  gs)....    def w
+000155c0: 6865 7265 2873 656c 662c 2063 6f6e 6469  here(self, condi
+000155d0: 7469 6f6e 2c20 793d 6e70 2e6e 616e 2920  tion, y=np.nan) 
+000155e0: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
+000155f0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00015600: 2020 2020 5265 7475 726e 2061 206e 6577      Return a new
+00015610: 2060 4661 7374 4172 7261 7960 2069 6e20   `FastArray` in 
+00015620: 7768 6963 6820 7661 6c75 6573 2061 7265  which values are
+00015630: 2072 6570 6c61 6365 6420 7768 6572 6520   replaced where 
+00015640: 6120 6769 7665 6e0d 0a20 2020 2020 2020  a given..       
+00015650: 2063 6f6e 6469 7469 6f6e 2069 7320 4661   condition is Fa
+00015660: 6c73 652e 0d0a 0d0a 2020 2020 2020 2020  lse.....        
+00015670: 546f 2061 6c73 6f20 7072 6f76 6964 6520  To also provide 
+00015680: 6120 7661 6c75 6520 666f 7220 7768 6572  a value for wher
+00015690: 6520 7468 6520 636f 6e64 6974 696f 6e20  e the condition 
+000156a0: 6973 2054 7275 652c 2075 7365 0d0a 2020  is True, use..  
+000156b0: 2020 2020 2020 3a6d 6574 683a 6072 6970        :meth:`rip
+000156c0: 7461 626c 652e 7768 6572 6560 2e0d 0a0d  table.where`....
+000156d0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+000156e0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+000156f0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00015700: 2063 6f6e 6469 7469 6f6e 203a 2062 6f6f   condition : boo
+00015710: 6c20 6f72 2061 7272 6179 206f 6620 626f  l or array of bo
+00015720: 6f6c 0d0a 2020 2020 2020 2020 2020 2020  ol..            
+00015730: 5768 6572 6520 7468 6520 636f 6e64 6974  Where the condit
+00015740: 696f 6e20 6973 2054 7275 652c 206b 6565  ion is True, kee
+00015750: 7020 7468 6520 6f72 6967 696e 616c 2076  p the original v
+00015760: 616c 7565 2e20 5768 6572 6520 4661 6c73  alue. Where Fals
+00015770: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00015780: 7265 706c 6163 6520 7769 7468 2060 7960  replace with `y`
+00015790: 2028 6966 2060 7960 2069 7320 6120 7363   (if `y` is a sc
+000157a0: 616c 6172 2920 6f72 2074 6865 2063 6f72  alar) or the cor
+000157b0: 7265 7370 6f6e 6469 6e67 2076 616c 7565  responding value
+000157c0: 0d0a 2020 2020 2020 2020 2020 2020 6672  ..            fr
+000157d0: 6f6d 2060 7960 2028 6966 2060 7960 2069  om `y` (if `y` i
+000157e0: 7320 616e 2061 7272 6179 292e 2049 6620  s an array). If 
+000157f0: 6063 6f6e 6469 7469 6f6e 6020 6973 2061  `condition` is a
+00015800: 6e20 6172 7261 7920 6f72 2061 0d0a 2020  n array or a..  
+00015810: 2020 2020 2020 2020 2020 6120 636f 6d70            a comp
+00015820: 6172 6973 6f6e 2074 6861 7420 7265 7475  arison that retu
+00015830: 726e 7320 616e 2061 7272 6179 2c20 7468  rns an array, th
+00015840: 6520 6172 7261 7920 6d75 7374 2062 6520  e array must be 
+00015850: 7468 6520 7361 6d65 0d0a 2020 2020 2020  the same..      
+00015860: 2020 2020 2020 6c65 6e67 7468 2061 7320        length as 
+00015870: 7468 6520 6361 6c6c 696e 6720 6046 6173  the calling `Fas
+00015880: 7441 7272 6179 602e 0d0a 2020 2020 2020  tArray`...      
+00015890: 2020 7920 3a20 7363 616c 6172 2c20 6172    y : scalar, ar
+000158a0: 7261 792c 206f 7220 6361 6c6c 6162 6c65  ray, or callable
+000158b0: 2c20 6465 6661 756c 7420 6e70 2e6e 616e  , default np.nan
+000158c0: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
+000158d0: 6520 7661 6c75 6520 746f 2075 7365 2077  e value to use w
+000158e0: 6865 7265 2060 636f 6e64 6974 696f 6e60  here `condition`
+000158f0: 2069 7320 4661 6c73 652e 2049 6620 6079   is False. If `y
+00015900: 6020 6973 2061 6e0d 0a20 2020 2020 2020  ` is an..       
+00015910: 2020 2020 2061 7272 6179 206f 7220 6120       array or a 
+00015920: 6361 6c6c 6162 6c65 2074 6861 7420 7265  callable that re
+00015930: 7475 726e 7320 616e 2061 7272 6179 2c20  turns an array, 
+00015940: 6974 206d 7573 7420 6265 2074 6865 2073  it must be the s
+00015950: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
+00015960: 206c 656e 6774 6820 6173 2074 6865 2063   length as the c
+00015970: 616c 6c69 6e67 2060 4661 7374 4172 7261  alling `FastArra
+00015980: 7960 2e20 5468 6520 7661 6c75 6520 6f66  y`. The value of
+00015990: 2060 7960 2074 6861 7420 636f 7272 6573   `y` that corres
+000159a0: 706f 6e64 730d 0a20 2020 2020 2020 2020  ponds..         
+000159b0: 2020 2074 6f20 7468 6520 4661 6c73 6520     to the False 
+000159c0: 7661 6c75 6520 6973 2075 7365 642e 0d0a  value is used...
+000159d0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+000159e0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+000159f0: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
+00015a00: 4172 7261 790d 0a20 2020 2020 2020 2020  Array..         
+00015a10: 2020 2041 206e 6577 2060 4661 7374 4172     A new `FastAr
+00015a20: 7261 7960 2077 6974 6820 7661 6c75 6573  ray` with values
+00015a30: 2072 6570 6c61 6365 6420 7768 6572 6520   replaced where 
+00015a40: 6063 6f6e 6469 7469 6f6e 6020 6973 2046  `condition` is F
+00015a50: 616c 7365 2e0d 0a0d 0a20 2020 2020 2020  alse.....       
+00015a60: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+00015a70: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00015a80: 2020 2020 202e 7269 7074 6162 6c65 2e77       .riptable.w
+00015a90: 6865 7265 203a 0d0a 2020 2020 2020 2020  here :..        
+00015aa0: 2020 2020 5265 706c 6163 6520 7661 6c75      Replace valu
+00015ab0: 6573 2064 6570 656e 6469 6e67 206f 6e20  es depending on 
+00015ac0: 7768 6574 6865 7220 6120 6769 7665 6e20  whether a given 
+00015ad0: 636f 6e64 6974 696f 6e20 6973 2054 7275  condition is Tru
+00015ae0: 6520 6f72 0d0a 2020 2020 2020 2020 2020  e or..          
+00015af0: 2020 4661 6c73 652e 0d0a 0d0a 2020 2020    False.....    
+00015b00: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
+00015b10: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+00015b20: 2020 2020 2020 2020 6063 6f6e 6469 7469          `conditi
+00015b30: 6f6e 6020 6973 2061 2063 6f6d 7061 7269  on` is a compari
+00015b40: 736f 6e20 7468 6174 2063 7265 6174 6573  son that creates
+00015b50: 2061 6e20 6172 7261 7920 6f66 2062 6f6f   an array of boo
+00015b60: 6c65 616e 732c 2061 6e64 0d0a 2020 2020  leans, and..    
+00015b70: 2020 2020 6079 6020 6973 2061 2073 6361      `y` is a sca
+00015b80: 6c61 723a 0d0a 0d0a 2020 2020 2020 2020  lar:....        
+00015b90: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
+00015ba0: 7272 6179 2872 742e 6172 616e 6765 2835  rray(rt.arange(5
+00015bb0: 2929 0d0a 2020 2020 2020 2020 3e3e 3e20  ))..        >>> 
+00015bc0: 610d 0a20 2020 2020 2020 2046 6173 7441  a..        FastA
+00015bd0: 7272 6179 285b 302c 2031 2c20 322c 2033  rray([0, 1, 2, 3
+00015be0: 2c20 345d 290d 0a20 2020 2020 2020 203e  , 4])..        >
+00015bf0: 3e3e 2061 2e77 6865 7265 2861 203e 2032  >> a.where(a > 2
+00015c00: 2c20 3130 3029 0d0a 2020 2020 2020 2020  , 100)..        
+00015c10: 4661 7374 4172 7261 7928 5b31 3030 2c20  FastArray([100, 
+00015c20: 3130 302c 2031 3030 2c20 2020 332c 2020  100, 100,   3,  
+00015c30: 2034 5d29 0d0a 0d0a 2020 2020 2020 2020   4])....        
+00015c40: 6063 6f6e 6469 7469 6f6e 6020 616e 6420  `condition` and 
+00015c50: 6079 6020 6172 6520 7361 6d65 2d6c 656e  `y` are same-len
+00015c60: 6774 6820 6172 7261 7973 3a0d 0a0d 0a20  gth arrays:.... 
+00015c70: 2020 2020 2020 203e 3e3e 2063 6f6e 6469         >>> condi
+00015c80: 7469 6f6e 203d 2072 742e 4661 7374 4172  tion = rt.FastAr
+00015c90: 7261 7928 5b54 7275 652c 2054 7275 652c  ray([True, True,
+00015ca0: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
+00015cb0: 616c 7365 5d29 0d0a 2020 2020 2020 2020  alse])..        
+00015cc0: 3e3e 3e20 7920 3d20 7274 2e46 6173 7441  >>> y = rt.FastA
+00015cd0: 7272 6179 285b 3130 302c 2032 3030 2c20  rray([100, 200, 
+00015ce0: 3330 302c 2034 3030 2c20 3530 305d 290d  300, 400, 500]).
+00015cf0: 0a20 2020 2020 2020 203e 3e3e 2061 2e77  .        >>> a.w
+00015d00: 6865 7265 2863 6f6e 6469 7469 6f6e 2c20  here(condition, 
+00015d10: 7929 0d0a 2020 2020 2020 2020 4661 7374  y)..        Fast
+00015d20: 4172 7261 7928 5b20 2030 2c20 2020 312c  Array([  0,   1,
+00015d30: 2033 3030 2c20 3430 302c 2035 3030 5d29   300, 400, 500])
+00015d40: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00015d50: 2020 2020 2020 2072 6574 7572 6e20 7768         return wh
+00015d60: 6572 6528 636f 6e64 6974 696f 6e2c 2073  ere(condition, s
+00015d70: 656c 662c 2079 290d 0a0d 0a20 2020 2064  elf, y)....    d
+00015d80: 6566 2063 6f75 6e74 2873 656c 662c 2073  ef count(self, s
+00015d90: 6f72 7465 643d 5472 7565 2c20 6669 6c74  orted=True, filt
+00015da0: 6572 3d4e 6f6e 6529 202d 3e20 4461 7461  er=None) -> Data
+00015db0: 7365 743a 0d0a 2020 2020 2020 2020 2222  set:..        ""
+00015dc0: 220d 0a20 2020 2020 2020 2054 6865 2063  "..        The c
+00015dd0: 6f75 6e74 206f 6620 6561 6368 2075 6e69  ount of each uni
+00015de0: 7175 6520 7661 6c75 652e 0d0a 0d0a 2020  que value.....  
+00015df0: 2020 2020 2020 5468 6973 2072 6574 7572        This retur
+00015e00: 6e73 2074 6865 2073 616d 6520 696e 666f  ns the same info
+00015e10: 726d 6174 696f 6e20 7468 6174 2060 602e  rmation that ``.
+00015e20: 756e 6971 7565 2872 6574 7572 6e5f 636f  unique(return_co
+00015e30: 756e 7473 203d 2054 7275 6529 6060 0d0a  unts = True)``..
+00015e40: 2020 2020 2020 2020 646f 6573 2c20 6578          does, ex
+00015e50: 6365 7074 2069 6e20 6120 6044 6174 6173  cept in a `Datas
+00015e60: 6574 6020 696e 7374 6561 6420 6f66 2061  et` instead of a
+00015e70: 2074 7570 6c65 2e0d 0a0d 0a20 2020 2020   tuple.....     
+00015e80: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+00015e90: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00015ea0: 2d0d 0a20 2020 2020 2020 2073 6f72 7465  -..        sorte
+00015eb0: 6420 3a20 626f 6f6c 2c20 6465 6661 756c  d : bool, defaul
+00015ec0: 7420 5472 7565 0d0a 2020 2020 2020 2020  t True..        
+00015ed0: 2020 2020 5768 656e 2054 7275 6520 2874      When True (t
+00015ee0: 6865 2064 6566 6175 6c74 292c 2075 6e69  he default), uni
+00015ef0: 7175 6520 7661 6c75 6573 2061 7265 2072  que values are r
+00015f00: 6574 7572 6e65 6420 696e 2073 6f72 7465  eturned in sorte
+00015f10: 6420 6f72 6465 722e 2053 6574 2074 6f0d  d order. Set to.
+00015f20: 0a20 2020 2020 2020 2020 2020 2046 616c  .            Fal
+00015f30: 7365 2074 6f20 7265 7475 726e 2074 6865  se to return the
+00015f40: 6d20 696e 206f 7264 6572 206f 6620 6669  m in order of fi
+00015f50: 7273 7420 6170 7065 6172 616e 6365 2e0d  rst appearance..
+00015f60: 0a20 2020 2020 2020 2066 696c 7465 723a  .        filter:
+00015f70: 206e 6461 7272 6179 206f 6620 626f 6f6c   ndarray of bool
+00015f80: 2c20 6465 6661 756c 7420 4e6f 6e65 0d0a  , default None..
+00015f90: 2020 2020 2020 2020 2020 2020 4966 2070              If p
+00015fa0: 726f 7669 6465 642c 2061 6e79 2046 616c  rovided, any Fal
+00015fb0: 7365 2076 616c 7565 7320 7769 6c6c 2062  se values will b
+00015fc0: 6520 6967 6e6f 7265 6420 696e 2074 6865  e ignored in the
+00015fd0: 2063 616c 6375 6c61 7469 6f6e 2e0d 0a0d   calculation....
+00015fe0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00015ff0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00016000: 2d0d 0a20 2020 2020 2020 2044 6174 6173  -..        Datas
+00016010: 6574 0d0a 2020 2020 2020 2020 2020 2020  et..            
+00016020: 4120 6044 6174 6173 6574 6020 636f 6e74  A `Dataset` cont
+00016030: 6169 6e69 6e67 2074 6865 2075 6e69 7175  aining the uniqu
+00016040: 6520 7661 6c75 6573 2061 6e64 2074 6865  e values and the
+00016050: 6972 2063 6f75 6e74 732e 0d0a 0d0a 2020  ir counts.....  
+00016060: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
+00016070: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00016080: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00016090: 7261 792e 756e 6971 7565 0d0a 0d0a 2020  ray.unique....  
+000160a0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+000160b0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+000160c0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+000160d0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+000160e0: 302c 2032 2c20 312c 2033 2c20 332c 2032  0, 2, 1, 3, 3, 2
+000160f0: 2c20 325d 290d 0a20 2020 2020 2020 203e  , 2])..        >
+00016100: 3e3e 2061 2e63 6f75 6e74 2829 0d0a 2020  >> a.count()..  
+00016110: 2020 2020 2020 2a55 6e69 7175 6520 2020        *Unique   
+00016120: 436f 756e 740d 0a20 2020 2020 2020 202d  Count..        -
+00016130: 2d2d 2d2d 2d2d 2020 202d 2d2d 2d2d 0d0a  ------   -----..
+00016140: 2020 2020 2020 2020 2020 2020 2020 3020                0 
+00016150: 2020 2020 2020 310d 0a20 2020 2020 2020        1..       
+00016160: 2020 2020 2020 2031 2020 2020 2020 2031         1       1
+00016170: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016180: 3220 2020 2020 2020 330d 0a20 2020 2020  2       3..     
+00016190: 2020 2020 2020 2020 2033 2020 2020 2020           3      
+000161a0: 2032 0d0a 0d0a 2020 2020 2020 2020 5769   2....        Wi
+000161b0: 7468 2060 6073 6f72 7465 6420 3d20 4661  th ``sorted = Fa
+000161c0: 6c73 6560 603a 0d0a 0d0a 2020 2020 2020  lse``:....      
+000161d0: 2020 3e3e 3e20 612e 636f 756e 7428 736f    >>> a.count(so
+000161e0: 7274 6564 203d 2046 616c 7365 290d 0a20  rted = False).. 
+000161f0: 2020 2020 2020 202a 556e 6971 7565 2020         *Unique  
+00016200: 2043 6f75 6e74 0d0a 2020 2020 2020 2020   Count..        
+00016210: 2d2d 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d0d  -------   -----.
+00016220: 0a20 2020 2020 2020 2020 2020 2020 2030  .              0
+00016230: 2020 2020 2020 2031 0d0a 2020 2020 2020         1..      
+00016240: 2020 2020 2020 2020 3220 2020 2020 2020          2       
+00016250: 330d 0a20 2020 2020 2020 2020 2020 2020  3..             
+00016260: 2031 2020 2020 2020 2031 0d0a 2020 2020   1       1..    
+00016270: 2020 2020 2020 2020 2020 3320 2020 2020            3     
+00016280: 2020 320d 0a20 2020 2020 2020 2022 2222    2..        """
+00016290: 0d0a 2020 2020 2020 2020 756e 6971 7565  ..        unique
+000162a0: 5f63 6f75 6e74 7320 3d20 756e 6971 7565  _counts = unique
+000162b0: 2873 656c 662c 2073 6f72 7465 643d 736f  (self, sorted=so
+000162c0: 7274 6564 2c20 7265 7475 726e 5f63 6f75  rted, return_cou
+000162d0: 6e74 733d 5472 7565 2c20 6669 6c74 6572  nts=True, filter
+000162e0: 3d66 696c 7465 7229 0d0a 2020 2020 2020  =filter)..      
+000162f0: 2020 6e61 6d65 203d 2073 656c 662e 6765    name = self.ge
+00016300: 745f 6e61 6d65 2829 0d0a 2020 2020 2020  t_name()..      
+00016310: 2020 6966 206e 616d 6520 6973 204e 6f6e    if name is Non
+00016320: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00016330: 6e61 6d65 203d 2022 556e 6971 7565 220d  name = "Unique".
+00016340: 0a20 2020 2020 2020 2064 7320 3d20 5479  .        ds = Ty
+00016350: 7065 5265 6769 7374 6572 2e44 6174 6173  peRegister.Datas
+00016360: 6574 287b 6e61 6d65 3a20 756e 6971 7565  et({name: unique
+00016370: 5f63 6f75 6e74 735b 305d 2c20 2243 6f75  _counts[0], "Cou
+00016380: 6e74 223a 2075 6e69 7175 655f 636f 756e  nt": unique_coun
+00016390: 7473 5b31 5d7d 290d 0a20 2020 2020 2020  ts[1]})..       
+000163a0: 2064 732e 6c61 6265 6c5f 7365 745f 6e61   ds.label_set_na
+000163b0: 6d65 7328 5b6e 616d 655d 290d 0a20 2020  mes([name])..   
+000163c0: 2020 2020 2072 6574 7572 6e20 6473 0d0a       return ds..
+000163d0: 0d0a 2020 2020 2323 2323 2323 2323 2323  ..    ##########
+000163e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000163f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016400: 2323 230d 0a20 2020 2023 2052 6f6c 6c69  ###..    # Rolli
+00016410: 6e67 2073 6563 7469 6f6e 2028 6361 6e6e  ng section (cann
+00016420: 6f74 2068 616e 646c 6520 7374 7269 6465  ot handle stride
+00016430: 7329 0d0a 2020 2020 2323 2323 2323 2323  s)..    ########
+00016440: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016450: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016460: 2323 2323 230d 0a20 2020 2064 6566 2072  #####..    def r
+00016470: 6f6c 6c69 6e67 5f73 756d 2873 656c 662c  olling_sum(self,
+00016480: 2077 696e 646f 773a 2069 6e74 203d 2033   window: int = 3
+00016490: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
+000164a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000164b0: 7263 2e52 6f6c 6c69 6e67 2873 656c 662c  rc.Rolling(self,
+000164c0: 2052 4f4c 4c49 4e47 5f46 554e 4354 494f   ROLLING_FUNCTIO
+000164d0: 4e53 2e52 4f4c 4c49 4e47 5f53 554d 2c20  NS.ROLLING_SUM, 
+000164e0: 7769 6e64 6f77 290d 0a0d 0a20 2020 2064  window)....    d
+000164f0: 6566 2072 6f6c 6c69 6e67 5f6e 616e 7375  ef rolling_nansu
+00016500: 6d28 7365 6c66 2c20 7769 6e64 6f77 3a20  m(self, window: 
+00016510: 696e 7420 3d20 3329 202d 3e20 4661 7374  int = 3) -> Fast
+00016520: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00016530: 7265 7475 726e 2072 632e 526f 6c6c 696e  return rc.Rollin
+00016540: 6728 7365 6c66 2c20 524f 4c4c 494e 475f  g(self, ROLLING_
+00016550: 4655 4e43 5449 4f4e 532e 524f 4c4c 494e  FUNCTIONS.ROLLIN
+00016560: 475f 4e41 4e53 554d 2c20 7769 6e64 6f77  G_NANSUM, window
+00016570: 290d 0a0d 0a20 2020 2064 6566 2072 6f6c  )....    def rol
+00016580: 6c69 6e67 5f6d 6561 6e28 7365 6c66 2c20  ling_mean(self, 
+00016590: 7769 6e64 6f77 3a20 696e 7420 3d20 3329  window: int = 3)
+000165a0: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
+000165b0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+000165c0: 632e 526f 6c6c 696e 6728 7365 6c66 2c20  c.Rolling(self, 
+000165d0: 524f 4c4c 494e 475f 4655 4e43 5449 4f4e  ROLLING_FUNCTION
+000165e0: 532e 524f 4c4c 494e 475f 4d45 414e 2c20  S.ROLLING_MEAN, 
+000165f0: 7769 6e64 6f77 290d 0a0d 0a20 2020 2064  window)....    d
+00016600: 6566 2072 6f6c 6c69 6e67 5f6e 616e 6d65  ef rolling_nanme
+00016610: 616e 2873 656c 662c 2077 696e 646f 773a  an(self, window:
+00016620: 2069 6e74 203d 2033 2920 2d3e 2046 6173   int = 3) -> Fas
+00016630: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+00016640: 2072 6574 7572 6e20 7263 2e52 6f6c 6c69   return rc.Rolli
+00016650: 6e67 2873 656c 662c 2052 4f4c 4c49 4e47  ng(self, ROLLING
+00016660: 5f46 554e 4354 494f 4e53 2e52 4f4c 4c49  _FUNCTIONS.ROLLI
+00016670: 4e47 5f4e 414e 4d45 414e 2c20 7769 6e64  NG_NANMEAN, wind
+00016680: 6f77 290d 0a0d 0a20 2020 2064 6566 2072  ow)....    def r
+00016690: 6f6c 6c69 6e67 5f71 7561 6e74 696c 6528  olling_quantile(
+000166a0: 7365 6c66 2c20 712c 2077 696e 646f 773a  self, q, window:
+000166b0: 2069 6e74 203d 2033 2920 2d3e 2046 6173   int = 3) -> Fas
+000166c0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+000166d0: 2077 696e 646f 7720 3d20 6d69 6e28 7769   window = min(wi
+000166e0: 6e64 6f77 2c20 6c65 6e28 7365 6c66 2929  ndow, len(self))
+000166f0: 0d0a 2020 2020 2020 2020 7769 6e64 6f77  ..        window
+00016700: 5061 7261 6d20 3d20 726f 6c6c 696e 675f  Param = rolling_
+00016710: 7175 616e 7469 6c65 5f66 756e 6350 6172  quantile_funcPar
+00016720: 616d 2871 2c20 7769 6e64 6f77 290d 0a20  am(q, window).. 
+00016730: 2020 2020 2020 2072 6574 7572 6e20 7263         return rc
+00016740: 2e52 6f6c 6c69 6e67 2873 656c 662c 2052  .Rolling(self, R
+00016750: 4f4c 4c49 4e47 5f46 554e 4354 494f 4e53  OLLING_FUNCTIONS
+00016760: 2e52 4f4c 4c49 4e47 5f51 5541 4e54 494c  .ROLLING_QUANTIL
+00016770: 452c 2077 696e 646f 7750 6172 616d 290d  E, windowParam).
+00016780: 0a0d 0a20 2020 2064 6566 2072 6f6c 6c69  ...    def rolli
+00016790: 6e67 5f76 6172 2873 656c 662c 2077 696e  ng_var(self, win
+000167a0: 646f 773a 2069 6e74 203d 2033 2920 2d3e  dow: int = 3) ->
+000167b0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+000167c0: 2020 2020 2072 6574 7572 6e20 7263 2e52       return rc.R
+000167d0: 6f6c 6c69 6e67 2873 656c 662c 2052 4f4c  olling(self, ROL
+000167e0: 4c49 4e47 5f46 554e 4354 494f 4e53 2e52  LING_FUNCTIONS.R
+000167f0: 4f4c 4c49 4e47 5f56 4152 2c20 7769 6e64  OLLING_VAR, wind
+00016800: 6f77 290d 0a0d 0a20 2020 2064 6566 2072  ow)....    def r
+00016810: 6f6c 6c69 6e67 5f6e 616e 7661 7228 7365  olling_nanvar(se
+00016820: 6c66 2c20 7769 6e64 6f77 3a20 696e 7420  lf, window: int 
+00016830: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
+00016840: 793a 0d0a 2020 2020 2020 2020 7265 7475  y:..        retu
+00016850: 726e 2072 632e 526f 6c6c 696e 6728 7365  rn rc.Rolling(se
+00016860: 6c66 2c20 524f 4c4c 494e 475f 4655 4e43  lf, ROLLING_FUNC
+00016870: 5449 4f4e 532e 524f 4c4c 494e 475f 4e41  TIONS.ROLLING_NA
+00016880: 4e56 4152 2c20 7769 6e64 6f77 290d 0a0d  NVAR, window)...
+00016890: 0a20 2020 2064 6566 2072 6f6c 6c69 6e67  .    def rolling
+000168a0: 5f73 7464 2873 656c 662c 2077 696e 646f  _std(self, windo
+000168b0: 773a 2069 6e74 203d 2033 2920 2d3e 2046  w: int = 3) -> F
+000168c0: 6173 7441 7272 6179 3a0d 0a20 2020 2020  astArray:..     
+000168d0: 2020 2072 6574 7572 6e20 7263 2e52 6f6c     return rc.Rol
+000168e0: 6c69 6e67 2873 656c 662c 2052 4f4c 4c49  ling(self, ROLLI
+000168f0: 4e47 5f46 554e 4354 494f 4e53 2e52 4f4c  NG_FUNCTIONS.ROL
+00016900: 4c49 4e47 5f53 5444 2c20 7769 6e64 6f77  LING_STD, window
+00016910: 290d 0a0d 0a20 2020 2064 6566 2072 6f6c  )....    def rol
+00016920: 6c69 6e67 5f6e 616e 7374 6428 7365 6c66  ling_nanstd(self
+00016930: 2c20 7769 6e64 6f77 3a20 696e 7420 3d20  , window: int = 
+00016940: 3329 202d 3e20 4661 7374 4172 7261 793a  3) -> FastArray:
+00016950: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00016960: 2072 632e 526f 6c6c 696e 6728 7365 6c66   rc.Rolling(self
+00016970: 2c20 524f 4c4c 494e 475f 4655 4e43 5449  , ROLLING_FUNCTI
+00016980: 4f4e 532e 524f 4c4c 494e 475f 4e41 4e53  ONS.ROLLING_NANS
+00016990: 5444 2c20 7769 6e64 6f77 290d 0a0d 0a20  TD, window).... 
+000169a0: 2020 2023 2323 2323 2323 2323 2323 2323     #############
+000169b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000169c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000169d0: 0d0a 2020 2020 2320 5469 6d65 5769 6e64  ..    # TimeWind
+000169e0: 6f77 2073 6563 7469 6f6e 2028 6361 6e6e  ow section (cann
+000169f0: 6f74 2068 616e 646c 6520 7374 7269 6465  ot handle stride
+00016a00: 7329 2c20 7469 6d65 5f61 7272 6179 206d  s), time_array m
+00016a10: 7573 7420 6265 2049 4e54 3634 0d0a 2020  ust be INT64..  
+00016a20: 2020 2323 2323 2323 2323 2323 2323 2323    ##############
+00016a30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016a40: 2323 2323 2323 2323 2323 2323 2323 230d  ###############.
+00016a50: 0a20 2020 2064 6566 2074 696d 6577 696e  .    def timewin
+00016a60: 646f 775f 7375 6d28 7365 6c66 2c20 7469  dow_sum(self, ti
+00016a70: 6d65 5f61 7272 6179 2c20 7469 6d65 5f64  me_array, time_d
+00016a80: 6973 7429 3a0d 0a20 2020 2020 2020 2022  ist):..        "
+00016a90: 2222 0d0a 2020 2020 2020 2020 5468 6520  ""..        The 
+00016aa0: 696e 7075 7420 6172 7261 7920 6d75 7374  input array must
+00016ab0: 2062 6520 696e 7436 3420 616e 6420 736f   be int64 and so
+00016ac0: 7274 6564 2077 6974 6820 6576 6572 2069  rted with ever i
+00016ad0: 6e63 7265 6173 696e 6720 7661 6c75 6573  ncreasing values
+00016ae0: 2e0d 0a20 2020 2020 2020 2053 756d 7320  ...        Sums 
+00016af0: 7570 2074 6865 2076 616c 7565 7320 666f  up the values fo
+00016b00: 7220 6120 6769 7665 6e20 7469 6d65 2077  r a given time w
+00016b10: 696e 646f 772e 0d0a 0d0a 2020 2020 2020  indow.....      
+00016b20: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00016b30: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00016b40: 0d0a 2020 2020 2020 2020 7469 6d65 5f61  ..        time_a
+00016b50: 7272 6179 3a20 736f 7274 6564 2069 6e74  rray: sorted int
+00016b60: 6567 6572 2061 7272 6179 206f 6620 7469  eger array of ti
+00016b70: 6d65 7374 616d 7073 0d0a 2020 2020 2020  mestamps..      
+00016b80: 2020 7469 6d65 5f64 6973 743a 2069 6e74    time_dist: int
+00016b90: 6567 6572 2076 616c 7565 206f 6620 7468  eger value of th
+00016ba0: 6520 7469 6d65 2077 696e 646f 7720 7369  e time window si
+00016bb0: 7a65 0d0a 0d0a 2020 2020 2020 2020 4578  ze....        Ex
+00016bc0: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
+00016bd0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00016be0: 2020 3e3e 3e20 613d 7274 2e61 7261 6e67    >>> a=rt.arang
+00016bf0: 6528 3130 2c20 6474 7970 653d 7274 2e69  e(10, dtype=rt.i
+00016c00: 6e74 3634 290d 0a20 2020 2020 2020 203e  nt64)..        >
+00016c10: 3e3e 2061 2e74 696d 6577 696e 646f 775f  >> a.timewindow_
+00016c20: 7375 6d28 612c 3529 0d0a 2020 2020 2020  sum(a,5)..      
+00016c30: 2020 4661 7374 4172 7261 7928 5b20 302c    FastArray([ 0,
+00016c40: 2020 312c 2020 332c 2020 362c 2031 302c    1,  3,  6, 10,
+00016c50: 2031 352c 2032 312c 2032 372c 2033 332c   15, 21, 27, 33,
+00016c60: 2033 395d 2c20 6474 7970 653d 696e 7436   39], dtype=int6
+00016c70: 3429 0d0a 0d0a 2020 2020 2020 2020 2222  4)....        ""
+00016c80: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+00016c90: 6e20 7263 2e54 696d 6557 696e 646f 7728  n rc.TimeWindow(
+00016ca0: 7365 6c66 2c20 7469 6d65 5f61 7272 6179  self, time_array
+00016cb0: 2c20 5449 4d45 5749 4e44 4f57 5f46 554e  , TIMEWINDOW_FUN
+00016cc0: 4354 494f 4e53 2e54 494d 4557 494e 444f  CTIONS.TIMEWINDO
+00016cd0: 575f 5355 4d2c 2074 696d 655f 6469 7374  W_SUM, time_dist
+00016ce0: 290d 0a0d 0a20 2020 2064 6566 2074 696d  )....    def tim
+00016cf0: 6577 696e 646f 775f 7072 6f64 2873 656c  ewindow_prod(sel
+00016d00: 662c 2074 696d 655f 6172 7261 792c 2074  f, time_array, t
+00016d10: 696d 655f 6469 7374 293a 0d0a 2020 2020  ime_dist):..    
+00016d20: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00016d30: 2054 6865 2069 6e70 7574 2061 7272 6179   The input array
+00016d40: 206d 7573 7420 6265 2069 6e74 3634 2061   must be int64 a
+00016d50: 6e64 2073 6f72 7465 6420 7769 7468 2065  nd sorted with e
+00016d60: 7665 7220 696e 6372 6561 7369 6e67 2076  ver increasing v
+00016d70: 616c 7565 732e 0d0a 2020 2020 2020 2020  alues...        
+00016d80: 4d75 6c74 6970 6c69 6573 2075 7020 7468  Multiplies up th
+00016d90: 6520 7661 6c75 6573 2066 6f72 2061 2067  e values for a g
+00016da0: 6976 656e 2074 696d 6520 7769 6e64 6f77  iven time window
+00016db0: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+00016dc0: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+00016dd0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+00016de0: 2020 2020 2074 696d 655f 6172 7261 793a       time_array:
+00016df0: 2073 6f72 7465 6420 696e 7465 6765 7220   sorted integer 
+00016e00: 6172 7261 7920 6f66 2074 696d 6573 7461  array of timesta
+00016e10: 6d70 730d 0a20 2020 2020 2020 2074 696d  mps..        tim
+00016e20: 655f 6469 7374 3a20 696e 7465 6765 7220  e_dist: integer 
+00016e30: 7661 6c75 6520 6f66 2074 6865 2074 696d  value of the tim
+00016e40: 6520 7769 6e64 6f77 2073 697a 650d 0a0d  e window size...
+00016e50: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+00016e60: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00016e70: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
+00016e80: 2061 3d72 742e 6172 616e 6765 2831 302c   a=rt.arange(10,
+00016e90: 2064 7479 7065 3d72 742e 696e 7436 3429   dtype=rt.int64)
+00016ea0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00016eb0: 7469 6d65 7769 6e64 6f77 5f70 726f 6428  timewindow_prod(
+00016ec0: 612c 3529 0d0a 2020 2020 2020 2020 4661  a,5)..        Fa
+00016ed0: 7374 4172 7261 7928 5b20 2020 2030 2c20  stArray([    0, 
+00016ee0: 2020 2020 302c 2020 2020 2030 2c20 2020      0,     0,   
+00016ef0: 2020 302c 2020 2020 2030 2c20 2020 2020    0,     0,     
+00016f00: 302c 2020 2037 3230 2c20 2035 3034 302c  0,   720,  5040,
+00016f10: 2032 3031 3630 2c20 3630 3438 305d 2c20   20160, 60480], 
+00016f20: 6474 7970 653d 696e 7436 3429 0d0a 2020  dtype=int64)..  
+00016f30: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00016f40: 2020 2072 6574 7572 6e20 7263 2e54 696d     return rc.Tim
+00016f50: 6557 696e 646f 7728 7365 6c66 2c20 7469  eWindow(self, ti
+00016f60: 6d65 5f61 7272 6179 2c20 5449 4d45 5749  me_array, TIMEWI
+00016f70: 4e44 4f57 5f46 554e 4354 494f 4e53 2e54  NDOW_FUNCTIONS.T
+00016f80: 494d 4557 494e 444f 575f 5052 4f44 2c20  IMEWINDOW_PROD, 
+00016f90: 7469 6d65 5f64 6973 7429 0d0a 0d0a 2020  time_dist)....  
+00016fa0: 2020 2323 2323 2323 2323 2323 2323 2323    ##############
+00016fb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016fc0: 2323 2323 2323 2323 2323 2323 2323 230d  ###############.
+00016fd0: 0a20 2020 2023 2042 6f74 746c 656e 6563  .    # Bottlenec
+00016fe0: 6b20 7365 6374 696f 6e20 286f 6e6c 7920  k section (only 
+00016ff0: 6861 6e64 6c65 7320 696e 7433 322f 696e  handles int32/in
+00017000: 7436 342f 666c 6f61 7433 322f 666c 6f61  t64/float32/floa
+00017010: 7436 3429 0d0a 2020 2020 2320 626f 7474  t64)..    # bott
+00017020: 6c65 6e65 636b 2069 7320 6f70 7469 6f6e  leneck is option
+00017030: 616c 0d0a 2020 2020 2323 2323 2323 2323  al..    ########
+00017040: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017050: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017060: 2323 2323 230d 0a20 2020 2064 6566 206d  #####..    def m
+00017070: 6f76 655f 7375 6d28 7365 6c66 2c20 2a61  ove_sum(self, *a
+00017080: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
+00017090: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000170a0: 626e 2e6d 6f76 655f 7375 6d28 7365 6c66  bn.move_sum(self
+000170b0: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
+000170c0: 7329 0d0a 0d0a 2020 2020 6465 6620 6d6f  s)....    def mo
+000170d0: 7665 5f6d 6561 6e28 7365 6c66 2c20 2a61  ve_mean(self, *a
+000170e0: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
+000170f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00017100: 626e 2e6d 6f76 655f 6d65 616e 2873 656c  bn.move_mean(sel
+00017110: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
+00017120: 6773 290d 0a0d 0a20 2020 2064 6566 206d  gs)....    def m
+00017130: 6f76 655f 7374 6428 7365 6c66 2c20 2a61  ove_std(self, *a
+00017140: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
+00017150: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00017160: 626e 2e6d 6f76 655f 7374 6428 7365 6c66  bn.move_std(self
+00017170: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
+00017180: 7329 0d0a 0d0a 2020 2020 6465 6620 6d6f  s)....    def mo
+00017190: 7665 5f76 6172 2873 656c 662c 202a 6172  ve_var(self, *ar
+000171a0: 6773 2c20 2a2a 6b77 6172 6773 293a 0d0a  gs, **kwargs):..
+000171b0: 2020 2020 2020 2020 7265 7475 726e 2062          return b
+000171c0: 6e2e 6d6f 7665 5f76 6172 2873 656c 662c  n.move_var(self,
+000171d0: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
+000171e0: 290d 0a0d 0a20 2020 2064 6566 206d 6f76  )....    def mov
+000171f0: 655f 6d69 6e28 7365 6c66 2c20 2a61 7267  e_min(self, *arg
+00017200: 732c 202a 2a6b 7761 7267 7329 3a0d 0a20  s, **kwargs):.. 
+00017210: 2020 2020 2020 2072 6574 7572 6e20 626e         return bn
+00017220: 2e6d 6f76 655f 6d69 6e28 7365 6c66 2c20  .move_min(self, 
+00017230: 2a61 7267 732c 202a 2a6b 7761 7267 7329  *args, **kwargs)
+00017240: 0d0a 0d0a 2020 2020 6465 6620 6d6f 7665  ....    def move
+00017250: 5f6d 6178 2873 656c 662c 202a 6172 6773  _max(self, *args
+00017260: 2c20 2a2a 6b77 6172 6773 293a 0d0a 2020  , **kwargs):..  
+00017270: 2020 2020 2020 7265 7475 726e 2062 6e2e        return bn.
+00017280: 6d6f 7665 5f6d 6178 2873 656c 662c 202a  move_max(self, *
+00017290: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
+000172a0: 0a0d 0a20 2020 2064 6566 206d 6f76 655f  ...    def move_
+000172b0: 6172 676d 696e 2873 656c 662c 202a 6172  argmin(self, *ar
+000172c0: 6773 2c20 2a2a 6b77 6172 6773 293a 0d0a  gs, **kwargs):..
+000172d0: 2020 2020 2020 2020 7265 7475 726e 2062          return b
+000172e0: 6e2e 6d6f 7665 5f61 7267 6d69 6e28 7365  n.move_argmin(se
+000172f0: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
+00017300: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
+00017310: 6d6f 7665 5f61 7267 6d61 7828 7365 6c66  move_argmax(self
+00017320: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
+00017330: 7329 3a0d 0a20 2020 2020 2020 2072 6574  s):..        ret
+00017340: 7572 6e20 626e 2e6d 6f76 655f 6172 676d  urn bn.move_argm
+00017350: 6178 2873 656c 662c 202a 6172 6773 2c20  ax(self, *args, 
+00017360: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
+00017370: 2064 6566 206d 6f76 655f 6d65 6469 616e   def move_median
+00017380: 2873 656c 662c 202a 6172 6773 2c20 2a2a  (self, *args, **
+00017390: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
+000173a0: 2020 7265 7475 726e 2062 6e2e 6d6f 7665    return bn.move
+000173b0: 5f6d 6564 6961 6e28 7365 6c66 2c20 2a61  _median(self, *a
+000173c0: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
+000173d0: 0d0a 2020 2020 6465 6620 6d6f 7665 5f72  ..    def move_r
+000173e0: 616e 6b28 7365 6c66 2c20 2a61 7267 732c  ank(self, *args,
+000173f0: 202a 2a6b 7761 7267 7329 3a0d 0a20 2020   **kwargs):..   
+00017400: 2020 2020 2072 6574 7572 6e20 626e 2e6d       return bn.m
+00017410: 6f76 655f 7261 6e6b 2873 656c 662c 202a  ove_rank(self, *
+00017420: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
+00017430: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+00017440: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017480: 2d2d 2d2d 0d0a 2020 2020 6465 6620 7265  ----..    def re
+00017490: 706c 6163 6528 7365 6c66 2c20 6f6c 642c  place(self, old,
+000174a0: 206e 6577 293a 0d0a 2020 2020 2020 2020   new):..        
+000174b0: 7265 7475 726e 2062 6e2e 7265 706c 6163  return bn.replac
+000174c0: 6528 7365 6c66 2c20 6f6c 642c 206e 6577  e(self, old, new
+000174d0: 290d 0a0d 0a20 2020 2064 6566 2070 6172  )....    def par
+000174e0: 7469 7469 6f6e 3228 7365 6c66 2c20 2a61  tition2(self, *a
+000174f0: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
+00017500: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00017510: 626e 2e70 6172 7469 7469 6f6e 2873 656c  bn.partition(sel
+00017520: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
+00017530: 6773 290d 0a0d 0a20 2020 2064 6566 2061  gs)....    def a
+00017540: 7267 7061 7274 6974 696f 6e32 2873 656c  rgpartition2(sel
+00017550: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
+00017560: 6773 293a 0d0a 2020 2020 2020 2020 7265  gs):..        re
+00017570: 7475 726e 2062 6e2e 6172 6770 6172 7469  turn bn.argparti
+00017580: 7469 6f6e 2873 656c 662c 202a 6172 6773  tion(self, *args
+00017590: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+000175a0: 2020 2064 6566 2072 616e 6b64 6174 6128     def rankdata(
+000175b0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
+000175c0: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
+000175d0: 2072 6574 7572 6e20 626e 2e72 616e 6b64   return bn.rankd
+000175e0: 6174 6128 7365 6c66 2c20 2a61 7267 732c  ata(self, *args,
+000175f0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+00017600: 2020 6465 6620 6e61 6e72 616e 6b64 6174    def nanrankdat
+00017610: 6128 7365 6c66 2c20 2a61 7267 732c 202a  a(self, *args, *
+00017620: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
+00017630: 2020 2072 6574 7572 6e20 626e 2e6e 616e     return bn.nan
+00017640: 7261 6e6b 6461 7461 2873 656c 662c 202a  rankdata(self, *
+00017650: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
+00017660: 0a0d 0a20 2020 2064 6566 2070 7573 6828  ...    def push(
+00017670: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
+00017680: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
+00017690: 2072 6574 7572 6e20 626e 2e70 7573 6828   return bn.push(
+000176a0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
+000176b0: 7761 7267 7329 0d0a 0d0a 2020 2020 2320  wargs)....    # 
+000176c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000176d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000176e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000176f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+00017710: 2064 6566 2069 7373 6f72 7465 6428 7365   def issorted(se
+00017720: 6c66 2920 2d3e 2062 6f6f 6c3a 0d0a 2020  lf) -> bool:..  
+00017730: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00017740: 2020 2052 6574 7572 6e20 5472 7565 2069     Return True i
+00017750: 6620 7468 6520 6172 7261 7920 6973 2073  f the array is s
+00017760: 6f72 7465 642c 2046 616c 7365 206f 7468  orted, False oth
+00017770: 6572 7769 7365 2e0d 0a0d 0a20 2020 2020  erwise.....     
+00017780: 2020 204e 614e 7320 6174 2074 6865 2065     NaNs at the e
+00017790: 6e64 206f 6620 616e 2061 7272 6179 2061  nd of an array a
+000177a0: 7265 2063 6f6e 7369 6465 7265 6420 736f  re considered so
+000177b0: 7274 6564 2e0d 0a0d 0a20 2020 2020 2020  rted.....       
+000177c0: 2043 616c 6c73 203a 6d65 7468 3a60 7269   Calls :meth:`ri
+000177d0: 7074 6162 6c65 2e69 7373 6f72 7465 6460  ptable.issorted`
+000177e0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
+000177f0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+00017800: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2062  -----..        b
+00017810: 6f6f 6c0d 0a20 2020 2020 2020 2020 2020  ool..           
+00017820: 2054 7275 6520 6966 2074 6865 2061 7272   True if the arr
+00017830: 6179 2069 7320 736f 7274 6564 2c20 4661  ay is sorted, Fa
+00017840: 6c73 6520 6f74 6865 7277 6973 652e 0d0a  lse otherwise...
+00017850: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+00017860: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+00017870: 2d2d 2d2d 0d0a 2020 2020 2020 2020 7269  ----..        ri
+00017880: 7074 6162 6c65 2e69 7373 6f72 7465 640d  ptable.issorted.
+00017890: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+000178a0: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
+000178b0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
+000178c0: 3e3e 2061 203d 2072 742e 4661 7374 4172  >> a = rt.FastAr
+000178d0: 7261 7928 5b27 6127 2c20 2762 272c 2027  ray(['a', 'b', '
+000178e0: 6327 5d29 0d0a 2020 2020 2020 2020 3e3e  c'])..        >>
+000178f0: 3e20 612e 6973 736f 7274 6564 2829 0d0a  > a.issorted()..
+00017900: 2020 2020 2020 2020 5472 7565 0d0a 0d0a          True....
+00017910: 2020 2020 2020 2020 3e3e 3e20 6120 3d20          >>> a = 
+00017920: 7274 2e46 6173 7441 7272 6179 285b 312e  rt.FastArray([1.
+00017930: 302c 2032 2e30 2c20 332e 302c 2072 742e  0, 2.0, 3.0, rt.
+00017940: 6e61 6e5d 290d 0a20 2020 2020 2020 203e  nan])..        >
+00017950: 3e3e 2072 742e 6973 736f 7274 6564 2861  >> rt.issorted(a
+00017960: 290d 0a20 2020 2020 2020 2054 7275 650d  )..        True.
+00017970: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+00017980: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
+00017990: 5b27 6127 2c20 2763 272c 2027 6227 5d29  ['a', 'c', 'b'])
+000179a0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+000179b0: 6973 736f 7274 6564 2829 0d0a 2020 2020  issorted()..    
+000179c0: 2020 2020 4661 6c73 650d 0a20 2020 2020      False..     
+000179d0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000179e0: 7265 7475 726e 2069 7373 6f72 7465 6428  return issorted(
+000179f0: 7365 6c66 290d 0a0d 0a20 2020 2023 202d  self)....    # -
+00017a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a40: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00017a50: 6465 6620 5f75 6e61 7279 5f6f 7028 7365  def _unary_op(se
+00017a60: 6c66 2c20 6675 6e63 6e75 6d2c 2066 616e  lf, funcnum, fan
+00017a70: 6379 3d46 616c 7365 2920 2d3e 2046 6173  cy=False) -> Fas
+00017a80: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+00017a90: 2069 6620 7365 6c66 2e5f 6973 5f6e 6f74   if self._is_not
+00017aa0: 5f73 7570 706f 7274 6564 2873 656c 6629  _supported(self)
+00017ab0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00017ac0: 206d 616b 6520 6974 2063 6f6e 7469 6775   make it contigu
+00017ad0: 6f75 730d 0a20 2020 2020 2020 2020 2020  ous..           
+00017ae0: 2061 7272 203d 2073 656c 662e 636f 7079   arr = self.copy
+00017af0: 2829 0d0a 2020 2020 2020 2020 656c 7365  ()..        else
+00017b00: 3a0d 0a20 2020 2020 2020 2020 2020 2061  :..            a
+00017b10: 7272 203d 2073 656c 660d 0a0d 0a20 2020  rr = self....   
+00017b20: 2020 2020 2066 756e 6320 3d20 5479 7065       func = Type
+00017b30: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
+00017b40: 6765 722e 5f42 4153 4943 4d41 5448 5f4f  ger._BASICMATH_O
+00017b50: 4e45 5f49 4e50 5554 0d0a 2020 2020 2020  NE_INPUT..      
+00017b60: 2020 7265 7375 6c74 203d 2066 756e 6328    result = func(
+00017b70: 6172 722c 2066 756e 636e 756d 2c20 3029  arr, funcnum, 0)
+00017b80: 0d0a 0d0a 2020 2020 2020 2020 6966 2072  ....        if r
+00017b90: 6573 756c 7420 6973 204e 6f6e 653a 0d0a  esult is None:..
+00017ba0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00017bb0: 6520 5479 7065 4572 726f 7228 6622 436f  e TypeError(f"Co
+00017bc0: 756c 6420 6e6f 7420 7065 7266 6f72 6d20  uld not perform 
+00017bd0: 6f70 6572 6174 696f 6e20 7b66 756e 636e  operation {funcn
+00017be0: 756d 7d20 6f6e 2046 6173 7441 7272 6179  um} on FastArray
+00017bf0: 206f 6620 6474 7970 6520 7b61 7272 2e64   of dtype {arr.d
+00017c00: 7479 7065 7d22 290d 0a20 2020 2020 2020  type}")..       
+00017c10: 2069 6620 6661 6e63 793a 0d0a 2020 2020   if fancy:..    
+00017c20: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00017c30: 2062 6f6f 6c5f 746f 5f66 616e 6379 2872   bool_to_fancy(r
+00017c40: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
+00017c50: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
+00017c60: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
+00017c70: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017c80: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017c90: 2323 0d0a 2020 2020 2320 426f 6f6c 6561  ##..    # Boolea
+00017ca0: 6e20 7365 6374 696f 6e0d 0a20 2020 2023  n section..    #
+00017cb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017cc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017cd0: 2323 2323 2323 2323 2323 2323 0d0a 2020  ############..  
+00017ce0: 2020 6465 6620 6973 6e6f 726d 616c 2873    def isnormal(s
+00017cf0: 656c 662c 2066 616e 6379 3d46 616c 7365  elf, fancy=False
+00017d00: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+00017d10: 726e 2073 656c 662e 5f75 6e61 7279 5f6f  rn self._unary_o
+00017d20: 7028 4d41 5448 5f4f 5045 5241 5449 4f4e  p(MATH_OPERATION
+00017d30: 2e49 534e 4f52 4d41 4c2c 2066 616e 6379  .ISNORMAL, fancy
+00017d40: 3d66 616e 6379 290d 0a0d 0a20 2020 2064  =fancy)....    d
+00017d50: 6566 2069 736e 6f74 6e6f 726d 616c 2873  ef isnotnormal(s
+00017d60: 656c 662c 2066 616e 6379 3d46 616c 7365  elf, fancy=False
+00017d70: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+00017d80: 726e 2073 656c 662e 5f75 6e61 7279 5f6f  rn self._unary_o
+00017d90: 7028 4d41 5448 5f4f 5045 5241 5449 4f4e  p(MATH_OPERATION
+00017da0: 2e49 534e 4f54 4e4f 524d 414c 2c20 6661  .ISNOTNORMAL, fa
+00017db0: 6e63 793d 6661 6e63 7929 0d0a 0d0a 2020  ncy=fancy)....  
+00017dc0: 2020 6465 6620 6973 6e61 6e28 7365 6c66    def isnan(self
+00017dd0: 2c20 6661 6e63 793d 4661 6c73 6529 3a0d  , fancy=False):.
+00017de0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00017df0: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
+00017e00: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
+00017e10: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
+00017e20: 6820 656c 656d 656e 7420 7468 6174 2773  h element that's
+00017e30: 2061 204e 614e 2028 4e6f 7420 6120 4e75   a NaN (Not a Nu
+00017e40: 6d62 6572 292c 0d0a 2020 2020 2020 2020  mber),..        
+00017e50: 4661 6c73 6520 6f74 6865 7277 6973 652e  False otherwise.
+00017e60: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
+00017e70: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
+00017e80: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00017e90: 2020 2020 6661 6e63 7920 3a20 626f 6f6c      fancy : bool
+00017ea0: 2c20 6465 6661 756c 7420 4661 6c73 650d  , default False.
+00017eb0: 0a20 2020 2020 2020 2020 2020 2053 6574  .            Set
+00017ec0: 2074 6f20 5472 7565 2074 6f20 696e 7374   to True to inst
+00017ed0: 6561 6420 7265 7475 726e 2074 6865 2069  ead return the i
+00017ee0: 6e64 6963 6573 206f 6620 7468 6520 5472  ndices of the Tr
+00017ef0: 7565 2028 4e61 4e29 2076 616c 7565 732e  ue (NaN) values.
+00017f00: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+00017f10: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+00017f20: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
+00017f30: 6173 7441 7272 6179 600d 0a20 2020 2020  astArray`..     
+00017f40: 2020 2020 2020 2041 2060 4661 7374 4172         A `FastAr
+00017f50: 7261 7960 206f 6620 626f 6f6c 6561 6e73  ray` of booleans
+00017f60: 206f 7220 696e 6469 6365 732e 0d0a 0d0a   or indices.....
+00017f70: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
+00017f80: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00017f90: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
+00017fa0: 4172 7261 792e 6973 6e6f 746e 616e 2c20  Array.isnotnan, 
+00017fb0: 4661 7374 4172 7261 792e 6e6f 746e 612c  FastArray.notna,
+00017fc0: 2046 6173 7441 7272 6179 2e69 736e 616e   FastArray.isnan
+00017fd0: 6f72 7a65 726f 2c20 7269 7074 6162 6c65  orzero, riptable
+00017fe0: 2e69 736e 616e 2c0d 0a20 2020 2020 2020  .isnan,..       
+00017ff0: 2072 6970 7461 626c 652e 6973 6e6f 746e   riptable.isnotn
+00018000: 616e 2c20 7269 7074 6162 6c65 2e69 736e  an, riptable.isn
+00018010: 616e 6f72 7a65 726f 2c20 4361 7465 676f  anorzero, Catego
+00018020: 7269 6361 6c2e 6973 6e61 6e2c 0d0a 2020  rical.isnan,..  
+00018030: 2020 2020 2020 4361 7465 676f 7269 6361        Categorica
+00018040: 6c2e 6973 6e6f 746e 616e 2c20 4361 7465  l.isnotnan, Cate
+00018050: 676f 7269 6361 6c2e 6e6f 746e 612c 2044  gorical.notna, D
+00018060: 6174 652e 6973 6e61 6e2c 2044 6174 652e  ate.isnan, Date.
+00018070: 6973 6e6f 746e 616e 2c0d 0a20 2020 2020  isnotnan,..     
+00018080: 2020 2044 6174 6554 696d 654e 616e 6f2e     DateTimeNano.
+00018090: 6973 6e61 6e2c 2044 6174 6554 696d 654e  isnan, DateTimeN
+000180a0: 616e 6f2e 6973 6e6f 746e 616e 0d0a 2020  ano.isnotnan..  
+000180b0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
+000180c0: 736b 5f6f 725f 6973 6e61 6e20 3a0d 0a20  sk_or_isnan :.. 
+000180d0: 2020 2020 2020 2020 2020 2052 6574 7572             Retur
+000180e0: 6e20 6120 626f 6f6c 6561 6e20 6172 7261  n a boolean arra
+000180f0: 7920 7468 6174 2773 2054 7275 6520 666f  y that's True fo
+00018100: 7220 6561 6368 2060 4461 7461 7365 7460  r each `Dataset`
+00018110: 2072 6f77 2074 6861 7420 636f 6e74 6169   row that contai
+00018120: 6e73 0d0a 2020 2020 2020 2020 2020 2020  ns..            
+00018130: 6174 206c 6561 7374 206f 6e65 204e 614e  at least one NaN
+00018140: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
+00018150: 6574 2e6d 6173 6b5f 616e 645f 6973 6e61  et.mask_and_isna
+00018160: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
+00018170: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+00018180: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+00018190: 7275 6520 666f 7220 6561 6368 2061 6c6c  rue for each all
+000181a0: 2d4e 614e 2060 4461 7461 7365 7460 2072  -NaN `Dataset` r
+000181b0: 6f77 2e0d 0a0d 0a20 2020 2020 2020 2045  ow.....        E
+000181c0: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+000181d0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+000181e0: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
+000181f0: 7374 4172 7261 7928 5b72 742e 6e61 6e2c  stArray([rt.nan,
+00018200: 2072 742e 6e61 6e2c 206e 702e 696e 662c   rt.nan, np.inf,
+00018210: 2033 5d29 0d0a 2020 2020 2020 2020 3e3e   3])..        >>
+00018220: 3e20 612e 6973 6e61 6e28 290d 0a20 2020  > a.isnan()..   
+00018230: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+00018240: 2054 7275 652c 2020 5472 7565 2c20 4661   True,  True, Fa
+00018250: 6c73 652c 2046 616c 7365 5d29 0d0a 0d0a  lse, False])....
+00018260: 2020 2020 2020 2020 5769 7468 2060 6066          With ``f
+00018270: 616e 6379 203d 2054 7275 6560 603a 0d0a  ancy = True``:..
+00018280: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00018290: 6973 6e61 6e28 6661 6e63 7920 3d20 5472  isnan(fancy = Tr
+000182a0: 7565 290d 0a20 2020 2020 2020 2046 6173  ue)..        Fas
+000182b0: 7441 7272 6179 285b 302c 2031 5d29 0d0a  tArray([0, 1])..
+000182c0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000182d0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000182e0: 2e5f 756e 6172 795f 6f70 284d 4154 485f  ._unary_op(MATH_
+000182f0: 4f50 4552 4154 494f 4e2e 4953 4e41 4e2c  OPERATION.ISNAN,
+00018300: 2066 616e 6379 3d66 616e 6379 290d 0a0d   fancy=fancy)...
+00018310: 0a20 2020 2064 6566 2069 736e 6f74 6e61  .    def isnotna
+00018320: 6e28 7365 6c66 2c20 6661 6e63 793d 4661  n(self, fancy=Fa
+00018330: 6c73 6529 3a0d 0a20 2020 2020 2020 2022  lse):..        "
+00018340: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
+00018350: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
+00018360: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
+00018370: 6f72 2065 6163 6820 656c 656d 656e 7420  or each element 
+00018380: 7468 6174 2773 206e 6f74 2061 204e 614e  that's not a NaN
+00018390: 2028 4e6f 7420 610d 0a20 2020 2020 2020   (Not a..       
+000183a0: 204e 756d 6265 7229 2c20 4661 6c73 6520   Number), False 
+000183b0: 6f74 6865 7277 6973 652e 0d0a 0d0a 2020  otherwise.....  
+000183c0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+000183d0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+000183e0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6661  ----..        fa
+000183f0: 6e63 7920 3a20 626f 6f6c 2c20 6465 6661  ncy : bool, defa
+00018400: 756c 7420 4661 6c73 650d 0a20 2020 2020  ult False..     
+00018410: 2020 2020 2020 2053 6574 2074 6f20 5472         Set to Tr
+00018420: 7565 2074 6f20 696e 7374 6561 6420 7265  ue to instead re
+00018430: 7475 726e 2074 6865 2069 6e64 6963 6573  turn the indices
+00018440: 206f 6620 7468 6520 5472 7565 2028 6e6f   of the True (no
+00018450: 6e2d 4e61 4e29 2076 616c 7565 732e 0d0a  n-NaN) values...
+00018460: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00018470: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00018480: 2d2d 0d0a 2020 2020 2020 2020 6046 6173  --..        `Fas
+00018490: 7441 7272 6179 600d 0a20 2020 2020 2020  tArray`..       
+000184a0: 2020 2020 2041 2060 4661 7374 4172 7261       A `FastArra
+000184b0: 7960 206f 6620 626f 6f6c 6561 6e73 206f  y` of booleans o
+000184c0: 7220 696e 6469 6365 732e 0d0a 0d0a 2020  r indices.....  
+000184d0: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
+000184e0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+000184f0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00018500: 7261 792e 6973 6e61 6e2c 2046 6173 7441  ray.isnan, FastA
+00018510: 7272 6179 2e6e 6f74 6e61 2c20 4661 7374  rray.notna, Fast
+00018520: 4172 7261 792e 6973 6e61 6e6f 727a 6572  Array.isnanorzer
+00018530: 6f2c 2072 6970 7461 626c 652e 6973 6e61  o, riptable.isna
+00018540: 6e2c 0d0a 2020 2020 2020 2020 7269 7074  n,..        ript
+00018550: 6162 6c65 2e69 736e 6f74 6e61 6e2c 2072  able.isnotnan, r
+00018560: 6970 7461 626c 652e 6973 6e61 6e6f 727a  iptable.isnanorz
+00018570: 6572 6f2c 2043 6174 6567 6f72 6963 616c  ero, Categorical
+00018580: 2e69 736e 616e 2c0d 0a20 2020 2020 2020  .isnan,..       
+00018590: 2043 6174 6567 6f72 6963 616c 2e69 736e   Categorical.isn
+000185a0: 6f74 6e61 6e2c 2043 6174 6567 6f72 6963  otnan, Categoric
+000185b0: 616c 2e6e 6f74 6e61 2c20 4461 7465 2e69  al.notna, Date.i
+000185c0: 736e 616e 2c20 4461 7465 2e69 736e 6f74  snan, Date.isnot
+000185d0: 6e61 6e2c 0d0a 2020 2020 2020 2020 4461  nan,..        Da
+000185e0: 7465 5469 6d65 4e61 6e6f 2e69 736e 616e  teTimeNano.isnan
+000185f0: 2c20 4461 7465 5469 6d65 4e61 6e6f 2e69  , DateTimeNano.i
+00018600: 736e 6f74 6e61 6e0d 0a20 2020 2020 2020  snotnan..       
+00018610: 2044 6174 6173 6574 2e6d 6173 6b5f 6f72   Dataset.mask_or
+00018620: 5f69 736e 616e 203a 0d0a 2020 2020 2020  _isnan :..      
+00018630: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
+00018640: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
+00018650: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
+00018660: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
+00018670: 7468 6174 2063 6f6e 7461 696e 730d 0a20  that contains.. 
+00018680: 2020 2020 2020 2020 2020 2061 7420 6c65             at le
+00018690: 6173 7420 6f6e 6520 4e61 4e2e 0d0a 2020  ast one NaN...  
+000186a0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
+000186b0: 736b 5f61 6e64 5f69 736e 616e 203a 0d0a  sk_and_isnan :..
+000186c0: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
+000186d0: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
+000186e0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
+000186f0: 6f72 2065 6163 6820 616c 6c2d 4e61 4e20  or each all-NaN 
+00018700: 6044 6174 6173 6574 6020 726f 772e 0d0a  `Dataset` row...
+00018710: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00018720: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00018730: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+00018740: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+00018750: 6179 285b 7274 2e6e 616e 2c20 6e70 2e69  ay([rt.nan, np.i
+00018760: 6e66 2c20 325d 290d 0a20 2020 2020 2020  nf, 2])..       
+00018770: 203e 3e3e 2061 2e69 736e 6f74 6e61 6e28   >>> a.isnotnan(
+00018780: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
+00018790: 7272 6179 285b 4661 6c73 652c 2020 5472  rray([False,  Tr
+000187a0: 7565 2c20 2054 7275 655d 290d 0a0d 0a20  ue,  True]).... 
+000187b0: 2020 2020 2020 2057 6974 6820 6060 6661         With ``fa
+000187c0: 6e63 7920 3d20 5472 7565 6060 3a0d 0a0d  ncy = True``:...
+000187d0: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+000187e0: 736e 6f74 6e61 6e28 6661 6e63 7920 3d20  snotnan(fancy = 
+000187f0: 5472 7565 290d 0a20 2020 2020 2020 2046  True)..        F
+00018800: 6173 7441 7272 6179 285b 312c 2032 5d29  astArray([1, 2])
+00018810: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00018820: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00018830: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
+00018840: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
+00018850: 544e 414e 2c20 6661 6e63 793d 6661 6e63  TNAN, fancy=fanc
+00018860: 7929 0d0a 0d0a 2020 2020 6465 6620 6973  y)....    def is
+00018870: 6e61 6e6f 727a 6572 6f28 7365 6c66 2c20  nanorzero(self, 
+00018880: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
+00018890: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+000188a0: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
+000188b0: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
+000188c0: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
+000188d0: 656c 656d 656e 7420 7468 6174 2773 2061  element that's a
+000188e0: 204e 614e 2028 4e6f 7420 6120 4e75 6d62   NaN (Not a Numb
+000188f0: 6572 290d 0a20 2020 2020 2020 206f 7220  er)..        or 
+00018900: 7a65 726f 2c20 4661 6c73 6520 6f74 6865  zero, False othe
+00018910: 7277 6973 652e 0d0a 0d0a 2020 2020 2020  rwise.....      
+00018920: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00018930: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00018940: 0d0a 2020 2020 2020 2020 6661 6e63 7920  ..        fancy 
+00018950: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+00018960: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
+00018970: 2020 2053 6574 2074 6f20 5472 7565 2074     Set to True t
+00018980: 6f20 696e 7374 6561 6420 7265 7475 726e  o instead return
+00018990: 2074 6865 2069 6e64 6963 6573 206f 6620   the indices of 
+000189a0: 7468 6520 5472 7565 2028 4e61 4e20 6f72  the True (NaN or
+000189b0: 207a 6572 6f29 2076 616c 7565 732e 0d0a   zero) values...
+000189c0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+000189d0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+000189e0: 2d2d 0d0a 2020 2020 2020 2020 6046 6173  --..        `Fas
+000189f0: 7441 7272 6179 600d 0a20 2020 2020 2020  tArray`..       
+00018a00: 2020 2020 2041 2060 4661 7374 4172 7261       A `FastArra
+00018a10: 7960 206f 6620 626f 6f6c 6561 6e73 206f  y` of booleans o
+00018a20: 7220 696e 6469 6365 732e 0d0a 0d0a 2020  r indices.....  
+00018a30: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
+00018a40: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00018a50: 0d0a 2020 2020 2020 2020 7269 7074 6162  ..        riptab
+00018a60: 6c65 2e69 736e 616e 6f72 7a65 726f 2c20  le.isnanorzero, 
+00018a70: 7269 7074 6162 6c65 2e69 736e 616e 2c20  riptable.isnan, 
+00018a80: 7269 7074 6162 6c65 2e69 736e 6f74 6e61  riptable.isnotna
+00018a90: 6e2c 2046 6173 7441 7272 6179 2e69 736e  n, FastArray.isn
+00018aa0: 616e 2c0d 0a20 2020 2020 2020 2046 6173  an,..        Fas
+00018ab0: 7441 7272 6179 2e69 736e 6f74 6e61 6e2c  tArray.isnotnan,
+00018ac0: 2043 6174 6567 6f72 6963 616c 2e69 736e   Categorical.isn
+00018ad0: 616e 2c20 4361 7465 676f 7269 6361 6c2e  an, Categorical.
+00018ae0: 6973 6e6f 746e 616e 2c20 4461 7465 2e69  isnotnan, Date.i
+00018af0: 736e 616e 2c0d 0a20 2020 2020 2020 2044  snan,..        D
+00018b00: 6174 652e 6973 6e6f 746e 616e 2c20 4461  ate.isnotnan, Da
+00018b10: 7465 5469 6d65 4e61 6e6f 2e69 736e 616e  teTimeNano.isnan
+00018b20: 2c20 4461 7465 5469 6d65 4e61 6e6f 2e69  , DateTimeNano.i
+00018b30: 736e 6f74 6e61 6e0d 0a20 2020 2020 2020  snotnan..       
+00018b40: 2044 6174 6173 6574 2e6d 6173 6b5f 6f72   Dataset.mask_or
+00018b50: 5f69 736e 616e 203a 0d0a 2020 2020 2020  _isnan :..      
+00018b60: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
+00018b70: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
+00018b80: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
+00018b90: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
+00018ba0: 7468 6174 2063 6f6e 7461 696e 730d 0a20  that contains.. 
+00018bb0: 2020 2020 2020 2020 2020 2061 7420 6c65             at le
+00018bc0: 6173 7420 6f6e 6520 4e61 4e2e 0d0a 2020  ast one NaN...  
+00018bd0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
+00018be0: 736b 5f61 6e64 5f69 736e 616e 203a 0d0a  sk_and_isnan :..
+00018bf0: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
+00018c00: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
+00018c10: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
+00018c20: 6f72 2065 6163 6820 616c 6c2d 4e61 4e20  or each all-NaN 
+00018c30: 6044 6174 6173 6574 6020 726f 772e 0d0a  `Dataset` row...
+00018c40: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00018c50: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00018c60: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+00018c70: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+00018c80: 6179 285b 302c 2072 742e 6e61 6e2c 206e  ay([0, rt.nan, n
+00018c90: 702e 696e 662c 2033 5d29 0d0a 2020 2020  p.inf, 3])..    
+00018ca0: 2020 2020 3e3e 3e20 612e 6973 6e61 6e6f      >>> a.isnano
+00018cb0: 727a 6572 6f28 290d 0a20 2020 2020 2020  rzero()..       
+00018cc0: 2046 6173 7441 7272 6179 285b 2054 7275   FastArray([ Tru
+00018cd0: 652c 2020 5472 7565 2c20 4661 6c73 652c  e,  True, False,
+00018ce0: 2046 616c 7365 5d29 0d0a 0d0a 2020 2020   False])....    
+00018cf0: 2020 2020 5769 7468 2060 6066 616e 6379      With ``fancy
+00018d00: 203d 2054 7275 6560 603a 0d0a 0d0a 2020   = True``:....  
+00018d10: 2020 2020 2020 3e3e 3e20 612e 6973 6e61        >>> a.isna
+00018d20: 6e6f 727a 6572 6f28 6661 6e63 7920 3d20  norzero(fancy = 
+00018d30: 5472 7565 290d 0a20 2020 2020 2020 2046  True)..        F
+00018d40: 6173 7441 7272 6179 285b 302c 2031 5d29  astArray([0, 1])
+00018d50: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00018d60: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00018d70: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
+00018d80: 485f 4f50 4552 4154 494f 4e2e 4953 4e41  H_OPERATION.ISNA
+00018d90: 4e4f 525a 4552 4f2c 2066 616e 6379 3d66  NORZERO, fancy=f
+00018da0: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
+00018db0: 2069 7366 696e 6974 6528 7365 6c66 2c20   isfinite(self, 
+00018dc0: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
+00018dd0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00018de0: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
+00018df0: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
+00018e00: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
+00018e10: 6669 6e69 7465 2060 4661 7374 4172 7261  finite `FastArra
+00018e20: 7960 2065 6c65 6d65 6e74 2c20 4661 6c73  y` element, Fals
+00018e30: 650d 0a20 2020 2020 2020 206f 7468 6572  e..        other
+00018e40: 7769 7365 2e0d 0a0d 0a20 2020 2020 2020  wise.....       
+00018e50: 2041 2076 616c 7565 2069 7320 636f 6e73   A value is cons
+00018e60: 6964 6572 6564 2074 6f20 6265 2066 696e  idered to be fin
+00018e70: 6974 6520 6966 2069 7427 7320 6e6f 7420  ite if it's not 
+00018e80: 706f 7369 7469 7665 206f 7220 6e65 6761  positive or nega
+00018e90: 7469 7665 2069 6e66 696e 6974 790d 0a20  tive infinity.. 
+00018ea0: 2020 2020 2020 206f 7220 6120 4e61 4e20         or a NaN 
+00018eb0: 284e 6f74 2061 204e 756d 6265 7229 2e0d  (Not a Number)..
+00018ec0: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+00018ed0: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+00018ee0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+00018ef0: 2020 2066 616e 6379 203a 2062 6f6f 6c2c     fancy : bool,
+00018f00: 2064 6566 6175 6c74 2046 616c 7365 0d0a   default False..
+00018f10: 2020 2020 2020 2020 2020 2020 5365 7420              Set 
+00018f20: 746f 2054 7275 6520 746f 2069 6e73 7465  to True to inste
+00018f30: 6164 2072 6574 7572 6e20 7468 6520 696e  ad return the in
+00018f40: 6469 6365 7320 6f66 2074 6865 2054 7275  dices of the Tru
+00018f50: 6520 2866 696e 6974 6529 2076 616c 7565  e (finite) value
+00018f60: 732e 0d0a 0d0a 2020 2020 2020 2020 5265  s.....        Re
+00018f70: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+00018f80: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00018f90: 6046 6173 7441 7272 6179 600d 0a20 2020  `FastArray`..   
+00018fa0: 2020 2020 2020 2020 2041 6e20 6172 7261           An arra
+00018fb0: 7920 6f72 2062 6f6f 6c65 616e 7320 6f72  y or booleans or
+00018fc0: 2069 6e64 6963 6573 2e0d 0a0d 0a20 2020   indices.....   
+00018fd0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+00018fe0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00018ff0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00019000: 6179 2e69 736e 6f74 6669 6e69 7465 2c20  ay.isnotfinite, 
+00019010: 7269 7074 6162 6c65 2e69 7366 696e 6974  riptable.isfinit
+00019020: 652c 2072 6970 7461 626c 652e 6973 6e6f  e, riptable.isno
+00019030: 7466 696e 6974 652c 2072 6970 7461 626c  tfinite, riptabl
+00019040: 652e 6973 696e 662c 0d0a 2020 2020 2020  e.isinf,..      
+00019050: 2020 7269 7074 6162 6c65 2e69 736e 6f74    riptable.isnot
+00019060: 696e 662c 2046 6173 7441 7272 6179 2e69  inf, FastArray.i
+00019070: 7369 6e66 2c20 4661 7374 4172 7261 792e  sinf, FastArray.
+00019080: 6973 6e6f 7469 6e66 0d0a 2020 2020 2020  isnotinf..      
+00019090: 2020 4461 7461 7365 742e 6d61 736b 5f6f    Dataset.mask_o
+000190a0: 725f 6973 6669 6e69 7465 203a 0d0a 2020  r_isfinite :..  
+000190b0: 2020 2020 2020 2020 2020 5265 7475 726e            Return
+000190c0: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
+000190d0: 2074 6861 7427 7320 5472 7565 2066 6f72   that's True for
+000190e0: 2065 6163 6820 6044 6174 6173 6574 6020   each `Dataset` 
+000190f0: 726f 7720 7468 6174 2068 6173 2061 7420  row that has at 
+00019100: 6c65 6173 740d 0a20 2020 2020 2020 2020  least..         
+00019110: 2020 206f 6e65 2066 696e 6974 6520 7661     one finite va
+00019120: 6c75 652e 0d0a 2020 2020 2020 2020 4461  lue...        Da
+00019130: 7461 7365 742e 6d61 736b 5f61 6e64 5f69  taset.mask_and_i
+00019140: 7366 696e 6974 6520 3a0d 0a20 2020 2020  sfinite :..     
+00019150: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+00019160: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+00019170: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+00019180: 6368 2060 4461 7461 7365 7460 2072 6f77  ch `Dataset` row
+00019190: 2074 6861 7420 636f 6e74 6169 6e73 2061   that contains a
+000191a0: 6c6c 0d0a 2020 2020 2020 2020 2020 2020  ll..            
+000191b0: 6669 6e69 7465 2076 616c 7565 732e 0d0a  finite values...
+000191c0: 2020 2020 2020 2020 4461 7461 7365 742e          Dataset.
+000191d0: 6d61 736b 5f6f 725f 6973 696e 6620 3a0d  mask_or_isinf :.
+000191e0: 0a20 2020 2020 2020 2020 2020 2052 6574  .            Ret
+000191f0: 7572 6e20 6120 626f 6f6c 6561 6e20 6172  urn a boolean ar
+00019200: 7261 7920 7468 6174 2773 2054 7275 6520  ray that's True 
+00019210: 666f 7220 6561 6368 2060 4461 7461 7365  for each `Datase
+00019220: 7460 2072 6f77 2074 6861 7420 6861 7320  t` row that has 
+00019230: 6174 206c 6561 7374 0d0a 2020 2020 2020  at least..      
+00019240: 2020 2020 2020 6f6e 6520 7661 6c75 6520        one value 
+00019250: 7468 6174 2773 2070 6f73 6974 6976 6520  that's positive 
+00019260: 6f72 206e 6567 6174 6976 6520 696e 6669  or negative infi
+00019270: 6e69 7479 2e0d 0a20 2020 2020 2020 2044  nity...        D
+00019280: 6174 6173 6574 2e6d 6173 6b5f 616e 645f  ataset.mask_and_
+00019290: 6973 696e 6620 3a0d 0a20 2020 2020 2020  isinf :..       
+000192a0: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
+000192b0: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
+000192c0: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
+000192d0: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
+000192e0: 6861 7420 636f 6e74 6169 6e73 2061 6c6c  hat contains all
+000192f0: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+00019300: 6669 6e69 7465 2076 616c 7565 732e 0d0a  finite values...
+00019310: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00019320: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00019330: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+00019340: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+00019350: 6179 285b 6e70 2e69 6e66 2c20 6e70 2e4e  ay([np.inf, np.N
+00019360: 494e 462c 2072 742e 6e61 6e2c 2030 5d29  INF, rt.nan, 0])
+00019370: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00019380: 6973 6669 6e69 7465 2829 0d0a 2020 2020  isfinite()..    
+00019390: 2020 2020 4661 7374 4172 7261 7928 5b46      FastArray([F
+000193a0: 616c 7365 2c20 4661 6c73 652c 2046 616c  alse, False, Fal
+000193b0: 7365 2c20 2054 7275 655d 290d 0a0d 0a20  se,  True]).... 
+000193c0: 2020 2020 2020 2057 6974 6820 6060 6661         With ``fa
+000193d0: 6e63 7920 3d20 5472 7565 6060 3a0d 0a0d  ncy = True``:...
+000193e0: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+000193f0: 7366 696e 6974 6528 6661 6e63 7920 3d20  sfinite(fancy = 
+00019400: 5472 7565 290d 0a20 2020 2020 2020 2046  True)..        F
+00019410: 6173 7441 7272 6179 285b 335d 290d 0a20  astArray([3]).. 
+00019420: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00019430: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00019440: 5f75 6e61 7279 5f6f 7028 4d41 5448 5f4f  _unary_op(MATH_O
+00019450: 5045 5241 5449 4f4e 2e49 5346 494e 4954  PERATION.ISFINIT
+00019460: 452c 2066 616e 6379 3d66 616e 6379 290d  E, fancy=fancy).
+00019470: 0a0d 0a20 2020 2064 6566 2069 736e 6f74  ...    def isnot
+00019480: 6669 6e69 7465 2873 656c 662c 2066 616e  finite(self, fan
+00019490: 6379 3d46 616c 7365 293a 0d0a 2020 2020  cy=False):..    
+000194a0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000194b0: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+000194c0: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+000194d0: 7275 6520 666f 7220 6561 6368 206e 6f6e  rue for each non
+000194e0: 2d66 696e 6974 6520 6046 6173 7441 7272  -finite `FastArr
+000194f0: 6179 6020 656c 656d 656e 742c 0d0a 2020  ay` element,..  
+00019500: 2020 2020 2020 4661 6c73 6520 6f74 6865        False othe
+00019510: 7277 6973 652e 0d0a 0d0a 2020 2020 2020  rwise.....      
+00019520: 2020 4120 7661 6c75 6520 6973 2063 6f6e    A value is con
+00019530: 7369 6465 7265 6420 746f 2062 6520 6669  sidered to be fi
+00019540: 6e69 7465 2069 6620 6974 2773 206e 6f74  nite if it's not
+00019550: 2070 6f73 6974 6976 6520 6f72 206e 6567   positive or neg
+00019560: 6174 6976 6520 696e 6669 6e69 7479 0d0a  ative infinity..
+00019570: 2020 2020 2020 2020 6f72 2061 204e 614e          or a NaN
+00019580: 2028 4e6f 7420 6120 4e75 6d62 6572 292e   (Not a Number).
+00019590: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
+000195a0: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
+000195b0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+000195c0: 2020 2020 6661 6e63 7920 3a20 626f 6f6c      fancy : bool
+000195d0: 2c20 6465 6661 756c 7420 4661 6c73 650d  , default False.
+000195e0: 0a20 2020 2020 2020 2020 2020 2053 6574  .            Set
+000195f0: 2074 6f20 5472 7565 2074 6f20 696e 7374   to True to inst
+00019600: 6561 6420 7265 7475 726e 2074 6865 2069  ead return the i
+00019610: 6e64 6963 6573 206f 6620 7468 6520 5472  ndices of the Tr
+00019620: 7565 2028 6e6f 6e2d 6669 6e69 7465 2920  ue (non-finite) 
+00019630: 7661 6c75 6573 2e0d 0a0d 0a20 2020 2020  values.....     
+00019640: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+00019650: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+00019660: 2020 2020 2060 4661 7374 4172 7261 7960       `FastArray`
+00019670: 0d0a 2020 2020 2020 2020 2020 2020 416e  ..            An
+00019680: 2061 7272 6179 206f 7220 626f 6f6c 6561   array or boolea
+00019690: 6e73 206f 7220 696e 6469 6365 732e 0d0a  ns or indices...
+000196a0: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+000196b0: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+000196c0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4661  ----..        Fa
+000196d0: 7374 4172 7261 792e 6973 6669 6e69 7465  stArray.isfinite
+000196e0: 2c20 7269 7074 6162 6c65 2e69 7366 696e  , riptable.isfin
+000196f0: 6974 652c 2072 6970 7461 626c 652e 6973  ite, riptable.is
+00019700: 6e6f 7466 696e 6974 652c 2072 6970 7461  notfinite, ripta
+00019710: 626c 652e 6973 696e 662c 0d0a 2020 2020  ble.isinf,..    
+00019720: 2020 2020 7269 7074 6162 6c65 2e69 736e      riptable.isn
+00019730: 6f74 696e 662c 2046 6173 7441 7272 6179  otinf, FastArray
+00019740: 2e69 7369 6e66 2c20 4661 7374 4172 7261  .isinf, FastArra
+00019750: 792e 6973 6e6f 7469 6e66 0d0a 2020 2020  y.isnotinf..    
+00019760: 2020 2020 4461 7461 7365 742e 6d61 736b      Dataset.mask
+00019770: 5f6f 725f 6973 6669 6e69 7465 203a 0d0a  _or_isfinite :..
+00019780: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
+00019790: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
+000197a0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
+000197b0: 6f72 2065 6163 6820 6044 6174 6173 6574  or each `Dataset
+000197c0: 6020 726f 7720 7468 6174 2068 6173 2061  ` row that has a
+000197d0: 7420 6c65 6173 740d 0a20 2020 2020 2020  t least..       
+000197e0: 2020 2020 206f 6e65 2066 696e 6974 6520       one finite 
+000197f0: 7661 6c75 652e 0d0a 2020 2020 2020 2020  value...        
+00019800: 4461 7461 7365 742e 6d61 736b 5f61 6e64  Dataset.mask_and
+00019810: 5f69 7366 696e 6974 6520 3a0d 0a20 2020  _isfinite :..   
+00019820: 2020 2020 2020 2020 2052 6574 7572 6e20           Return 
+00019830: 6120 626f 6f6c 6561 6e20 6172 7261 7920  a boolean array 
+00019840: 7468 6174 2773 2054 7275 6520 666f 7220  that's True for 
+00019850: 6561 6368 2060 4461 7461 7365 7460 2072  each `Dataset` r
+00019860: 6f77 2074 6861 7420 636f 6e74 6169 6e73  ow that contains
+00019870: 2061 6c6c 0d0a 2020 2020 2020 2020 2020   all..          
+00019880: 2020 6669 6e69 7465 2076 616c 7565 732e    finite values.
+00019890: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
+000198a0: 742e 6d61 736b 5f6f 725f 6973 696e 6620  t.mask_or_isinf 
+000198b0: 3a0d 0a20 2020 2020 2020 2020 2020 2052  :..            R
+000198c0: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
+000198d0: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
+000198e0: 6520 666f 7220 6561 6368 2060 4461 7461  e for each `Data
+000198f0: 7365 7460 2072 6f77 2074 6861 7420 6861  set` row that ha
+00019900: 7320 6174 206c 6561 7374 0d0a 2020 2020  s at least..    
+00019910: 2020 2020 2020 2020 6f6e 6520 7661 6c75          one valu
+00019920: 6520 7468 6174 2773 2070 6f73 6974 6976  e that's positiv
+00019930: 6520 6f72 206e 6567 6174 6976 6520 696e  e or negative in
+00019940: 6669 6e69 7479 2e0d 0a20 2020 2020 2020  finity...       
+00019950: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
+00019960: 645f 6973 696e 6620 3a0d 0a20 2020 2020  d_isinf :..     
+00019970: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+00019980: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+00019990: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+000199a0: 6368 2060 4461 7461 7365 7460 2072 6f77  ch `Dataset` row
+000199b0: 2074 6861 7420 636f 6e74 6169 6e73 2061   that contains a
+000199c0: 6c6c 0d0a 2020 2020 2020 2020 2020 2020  ll..            
+000199d0: 696e 6669 6e69 7465 2076 616c 7565 732e  infinite values.
+000199e0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+000199f0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
+00019a00: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00019a10: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
+00019a20: 7272 6179 285b 6e70 2e69 6e66 2c20 6e70  rray([np.inf, np
+00019a30: 2e4e 494e 462c 2072 742e 6e61 6e2c 2030  .NINF, rt.nan, 0
+00019a40: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+00019a50: 612e 6973 6e6f 7466 696e 6974 6528 290d  a.isnotfinite().
+00019a60: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00019a70: 6179 285b 2054 7275 652c 2020 5472 7565  ay([ True,  True
+00019a80: 2c20 2054 7275 652c 2046 616c 7365 5d29  ,  True, False])
+00019a90: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+00019aa0: 2060 6066 616e 6379 203d 2054 7275 6560   ``fancy = True`
+00019ab0: 603a 0d0a 0d0a 2020 2020 2020 2020 3e3e  `:....        >>
+00019ac0: 3e20 612e 6973 6e6f 7466 696e 6974 6528  > a.isnotfinite(
+00019ad0: 6661 6e63 7920 3d20 5472 7565 290d 0a20  fancy = True).. 
+00019ae0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00019af0: 285b 302c 2031 2c20 325d 290d 0a20 2020  ([0, 1, 2])..   
+00019b00: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00019b10: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
+00019b20: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
+00019b30: 5241 5449 4f4e 2e49 534e 4f54 4649 4e49  RATION.ISNOTFINI
+00019b40: 5445 2c20 6661 6e63 793d 6661 6e63 7929  TE, fancy=fancy)
+00019b50: 0d0a 0d0a 2020 2020 6465 6620 6973 696e  ....    def isin
+00019b60: 6628 7365 6c66 2c20 6661 6e63 793d 4661  f(self, fancy=Fa
+00019b70: 6c73 6529 3a0d 0a20 2020 2020 2020 2022  lse):..        "
+00019b80: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
+00019b90: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
+00019ba0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
+00019bb0: 6f72 2065 6163 6820 6046 6173 7441 7272  or each `FastArr
+00019bc0: 6179 6020 656c 656d 656e 7420 7468 6174  ay` element that
+00019bd0: 2773 2070 6f73 6974 6976 650d 0a20 2020  's positive..   
+00019be0: 2020 2020 206f 7220 6e65 6761 7469 7665       or negative
+00019bf0: 2069 6e66 696e 6974 792c 2046 616c 7365   infinity, False
+00019c00: 206f 7468 6572 7769 7365 2e0d 0a0d 0a20   otherwise..... 
+00019c10: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+00019c20: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00019c30: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
+00019c40: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
+00019c50: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
+00019c60: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
+00019c70: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
+00019c80: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
+00019c90: 7320 6f66 2074 6865 2054 7275 6520 2869  s of the True (i
+00019ca0: 6e66 696e 6974 6529 2076 616c 7565 732e  nfinite) values.
+00019cb0: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+00019cc0: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+00019cd0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
+00019ce0: 6173 7441 7272 6179 600d 0a20 2020 2020  astArray`..     
+00019cf0: 2020 2020 2020 2041 6e20 6172 7261 7920         An array 
+00019d00: 6f72 2062 6f6f 6c65 616e 7320 6f72 2069  or booleans or i
+00019d10: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
+00019d20: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+00019d30: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+00019d40: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00019d50: 2e69 736e 6f74 696e 662c 2046 6173 7441  .isnotinf, FastA
+00019d60: 7272 6179 2e69 7366 696e 6974 652c 2046  rray.isfinite, F
+00019d70: 6173 7441 7272 6179 2e69 736e 6f74 6669  astArray.isnotfi
+00019d80: 6e69 7465 2c0d 0a20 2020 2020 2020 2072  nite,..        r
+00019d90: 6970 7461 626c 652e 6973 696e 662c 2072  iptable.isinf, r
+00019da0: 6970 7461 626c 652e 6973 6e6f 7469 6e66  iptable.isnotinf
+00019db0: 2c20 7269 7074 6162 6c65 2e69 7366 696e  , riptable.isfin
+00019dc0: 6974 652c 2072 6970 7461 626c 652e 6973  ite, riptable.is
+00019dd0: 6e6f 7466 696e 6974 650d 0a20 2020 2020  notfinite..     
+00019de0: 2020 2044 6174 6173 6574 2e6d 6173 6b5f     Dataset.mask_
+00019df0: 6f72 5f69 7366 696e 6974 6520 3a0d 0a20  or_isfinite :.. 
+00019e00: 2020 2020 2020 2020 2020 2052 6574 7572             Retur
+00019e10: 6e20 6120 626f 6f6c 6561 6e20 6172 7261  n a boolean arra
+00019e20: 7920 7468 6174 2773 2054 7275 6520 666f  y that's True fo
+00019e30: 7220 6561 6368 2060 4461 7461 7365 7460  r each `Dataset`
+00019e40: 2072 6f77 2074 6861 7420 6861 7320 6174   row that has at
+00019e50: 206c 6561 7374 0d0a 2020 2020 2020 2020   least..        
+00019e60: 2020 2020 6f6e 6520 6669 6e69 7465 2076      one finite v
+00019e70: 616c 7565 2e0d 0a20 2020 2020 2020 2044  alue...        D
+00019e80: 6174 6173 6574 2e6d 6173 6b5f 616e 645f  ataset.mask_and_
+00019e90: 6973 6669 6e69 7465 203a 0d0a 2020 2020  isfinite :..    
+00019ea0: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
+00019eb0: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
+00019ec0: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
+00019ed0: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
+00019ee0: 7720 7468 6174 2063 6f6e 7461 696e 7320  w that contains 
+00019ef0: 616c 6c0d 0a20 2020 2020 2020 2020 2020  all..           
+00019f00: 2066 696e 6974 6520 7661 6c75 6573 2e0d   finite values..
+00019f10: 0a20 2020 2020 2020 2044 6174 6173 6574  .        Dataset
+00019f20: 2e6d 6173 6b5f 6f72 5f69 7369 6e66 203a  .mask_or_isinf :
+00019f30: 0d0a 2020 2020 2020 2020 2020 2020 5265  ..            Re
+00019f40: 7475 726e 2061 2062 6f6f 6c65 616e 2061  turn a boolean a
+00019f50: 7272 6179 2074 6861 7427 7320 5472 7565  rray that's True
+00019f60: 2066 6f72 2065 6163 6820 6044 6174 6173   for each `Datas
+00019f70: 6574 6020 726f 7720 7468 6174 2068 6173  et` row that has
+00019f80: 2061 7420 6c65 6173 740d 0a20 2020 2020   at least..     
+00019f90: 2020 2020 2020 206f 6e65 2076 616c 7565         one value
+00019fa0: 2074 6861 7427 7320 706f 7369 7469 7665   that's positive
+00019fb0: 206f 7220 6e65 6761 7469 7665 2069 6e66   or negative inf
+00019fc0: 696e 6974 792e 0d0a 2020 2020 2020 2020  inity...        
+00019fd0: 4461 7461 7365 742e 6d61 736b 5f61 6e64  Dataset.mask_and
+00019fe0: 5f69 7369 6e66 203a 0d0a 2020 2020 2020  _isinf :..      
+00019ff0: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
+0001a000: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
+0001a010: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
+0001a020: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
+0001a030: 7468 6174 2063 6f6e 7461 696e 7320 616c  that contains al
+0001a040: 6c0d 0a20 2020 2020 2020 2020 2020 2069  l..            i
+0001a050: 6e66 696e 6974 6520 7661 6c75 6573 2e0d  nfinite values..
+0001a060: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+0001a070: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
+0001a080: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
+0001a090: 3e3e 2061 203d 2072 742e 4661 7374 4172  >> a = rt.FastAr
+0001a0a0: 7261 7928 5b6e 702e 696e 662c 206e 702e  ray([np.inf, np.
+0001a0b0: 4e49 4e46 2c20 7274 2e6e 616e 2c20 305d  NINF, rt.nan, 0]
+0001a0c0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0001a0d0: 2e69 7369 6e66 2829 0d0a 2020 2020 2020  .isinf()..      
+0001a0e0: 2020 4661 7374 4172 7261 7928 5b20 5472    FastArray([ Tr
+0001a0f0: 7565 2c20 2054 7275 652c 2046 616c 7365  ue,  True, False
+0001a100: 2c20 4661 6c73 655d 290d 0a0d 0a20 2020  , False])....   
+0001a110: 2020 2020 2057 6974 6820 6060 6661 6e63       With ``fanc
+0001a120: 7920 3d20 5472 7565 6060 3a0d 0a0d 0a20  y = True``:.... 
+0001a130: 2020 2020 2020 203e 3e3e 2061 2e69 7369         >>> a.isi
+0001a140: 6e66 2866 616e 6379 203d 2054 7275 6529  nf(fancy = True)
+0001a150: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+0001a160: 7261 7928 5b30 2c20 315d 290d 0a20 2020  ray([0, 1])..   
+0001a170: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0001a180: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
+0001a190: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
+0001a1a0: 5241 5449 4f4e 2e49 5349 4e46 2c20 6661  RATION.ISINF, fa
+0001a1b0: 6e63 793d 6661 6e63 7929 0d0a 0d0a 2020  ncy=fancy)....  
+0001a1c0: 2020 6465 6620 6973 6e6f 7469 6e66 2873    def isnotinf(s
+0001a1d0: 656c 662c 2066 616e 6379 3d46 616c 7365  elf, fancy=False
+0001a1e0: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+0001a1f0: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
+0001a200: 6120 626f 6f6c 6561 6e20 6172 7261 7920  a boolean array 
+0001a210: 7468 6174 2773 2054 7275 6520 666f 7220  that's True for 
+0001a220: 6561 6368 2060 4661 7374 4172 7261 7960  each `FastArray`
+0001a230: 2065 6c65 6d65 6e74 2074 6861 7427 7320   element that's 
+0001a240: 6e6f 7420 706f 7369 7469 7665 0d0a 2020  not positive..  
+0001a250: 2020 2020 2020 6f72 206e 6567 6174 6976        or negativ
+0001a260: 6520 696e 6669 6e69 7479 2c20 4661 6c73  e infinity, Fals
+0001a270: 6520 6f74 6865 7277 6973 652e 0d0a 0d0a  e otherwise.....
+0001a280: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+0001a290: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+0001a2a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0001a2b0: 6661 6e63 7920 3a20 626f 6f6c 2c20 6465  fancy : bool, de
+0001a2c0: 6661 756c 7420 4661 6c73 650d 0a20 2020  fault False..   
+0001a2d0: 2020 2020 2020 2020 2053 6574 2074 6f20           Set to 
+0001a2e0: 5472 7565 2074 6f20 696e 7374 6561 6420  True to instead 
+0001a2f0: 7265 7475 726e 2074 6865 2069 6e64 6963  return the indic
+0001a300: 6573 206f 6620 7468 6520 5472 7565 2028  es of the True (
+0001a310: 6e6f 6e2d 696e 6669 6e69 7465 2920 7661  non-infinite) va
+0001a320: 6c75 6573 2e0d 0a0d 0a20 2020 2020 2020  lues.....       
+0001a330: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+0001a340: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+0001a350: 2020 2060 4661 7374 4172 7261 7960 0d0a     `FastArray`..
+0001a360: 2020 2020 2020 2020 2020 2020 416e 2061              An a
+0001a370: 7272 6179 206f 7220 626f 6f6c 6561 6e73  rray or booleans
+0001a380: 206f 7220 696e 6469 6365 732e 0d0a 0d0a   or indices.....
+0001a390: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
+0001a3a0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001a3b0: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
+0001a3c0: 4172 7261 792e 6973 696e 662c 2072 6970  Array.isinf, rip
+0001a3d0: 7461 626c 652e 6973 6e6f 7469 6e66 2c20  table.isnotinf, 
+0001a3e0: 7269 7074 6162 6c65 2e69 7369 6e66 2c20  riptable.isinf, 
+0001a3f0: 7269 7074 6162 6c65 2e69 7366 696e 6974  riptable.isfinit
+0001a400: 652c 0d0a 2020 2020 2020 2020 7269 7074  e,..        ript
+0001a410: 6162 6c65 2e69 736e 6f74 6669 6e69 7465  able.isnotfinite
+0001a420: 2c20 4661 7374 4172 7261 792e 6973 6669  , FastArray.isfi
+0001a430: 6e69 7465 2c20 4661 7374 4172 7261 792e  nite, FastArray.
+0001a440: 6973 6e6f 7466 696e 6974 650d 0a20 2020  isnotfinite..   
+0001a450: 2020 2020 2044 6174 6173 6574 2e6d 6173       Dataset.mas
+0001a460: 6b5f 6f72 5f69 7366 696e 6974 6520 3a0d  k_or_isfinite :.
+0001a470: 0a20 2020 2020 2020 2020 2020 2052 6574  .            Ret
+0001a480: 7572 6e20 6120 626f 6f6c 6561 6e20 6172  urn a boolean ar
+0001a490: 7261 7920 7468 6174 2773 2054 7275 6520  ray that's True 
+0001a4a0: 666f 7220 6561 6368 2060 4461 7461 7365  for each `Datase
+0001a4b0: 7460 2072 6f77 2074 6861 7420 6861 7320  t` row that has 
+0001a4c0: 6174 206c 6561 7374 0d0a 2020 2020 2020  at least..      
+0001a4d0: 2020 2020 2020 6f6e 6520 6669 6e69 7465        one finite
+0001a4e0: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
+0001a4f0: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
+0001a500: 645f 6973 6669 6e69 7465 203a 0d0a 2020  d_isfinite :..  
+0001a510: 2020 2020 2020 2020 2020 5265 7475 726e            Return
+0001a520: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
+0001a530: 2074 6861 7427 7320 5472 7565 2066 6f72   that's True for
+0001a540: 2065 6163 6820 6044 6174 6173 6574 6020   each `Dataset` 
+0001a550: 726f 7720 7468 6174 2063 6f6e 7461 696e  row that contain
+0001a560: 7320 616c 6c0d 0a20 2020 2020 2020 2020  s all..         
+0001a570: 2020 2066 696e 6974 6520 7661 6c75 6573     finite values
+0001a580: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
+0001a590: 6574 2e6d 6173 6b5f 6f72 5f69 7369 6e66  et.mask_or_isinf
+0001a5a0: 203a 0d0a 2020 2020 2020 2020 2020 2020   :..            
+0001a5b0: 5265 7475 726e 2061 2062 6f6f 6c65 616e  Return a boolean
+0001a5c0: 2061 7272 6179 2074 6861 7427 7320 5472   array that's Tr
+0001a5d0: 7565 2066 6f72 2065 6163 6820 6044 6174  ue for each `Dat
+0001a5e0: 6173 6574 6020 726f 7720 7468 6174 2068  aset` row that h
+0001a5f0: 6173 2061 7420 6c65 6173 740d 0a20 2020  as at least..   
+0001a600: 2020 2020 2020 2020 206f 6e65 2076 616c           one val
+0001a610: 7565 2074 6861 7427 7320 706f 7369 7469  ue that's positi
+0001a620: 7665 206f 7220 6e65 6761 7469 7665 2069  ve or negative i
+0001a630: 6e66 696e 6974 792e 0d0a 2020 2020 2020  nfinity...      
+0001a640: 2020 4461 7461 7365 742e 6d61 736b 5f61    Dataset.mask_a
+0001a650: 6e64 5f69 7369 6e66 203a 0d0a 2020 2020  nd_isinf :..    
+0001a660: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
+0001a670: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
+0001a680: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
+0001a690: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
+0001a6a0: 7720 7468 6174 2063 6f6e 7461 696e 7320  w that contains 
+0001a6b0: 616c 6c0d 0a20 2020 2020 2020 2020 2020  all..           
+0001a6c0: 2069 6e66 696e 6974 6520 7661 6c75 6573   infinite values
+0001a6d0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
+0001a6e0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
+0001a6f0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0001a700: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001a710: 4172 7261 7928 5b6e 702e 696e 662c 206e  Array([np.inf, n
+0001a720: 702e 4e49 4e46 2c20 7274 2e6e 616e 2c20  p.NINF, rt.nan, 
+0001a730: 305d 290d 0a20 2020 2020 2020 203e 3e3e  0])..        >>>
+0001a740: 2061 2e69 736e 6f74 696e 6628 290d 0a20   a.isnotinf().. 
+0001a750: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0001a760: 285b 4661 6c73 652c 2046 616c 7365 2c20  ([False, False, 
+0001a770: 2054 7275 652c 2020 5472 7565 5d29 0d0a   True,  True])..
+0001a780: 0d0a 2020 2020 2020 2020 5769 7468 2060  ..        With `
+0001a790: 6066 616e 6379 203d 2054 7275 6560 603a  `fancy = True``:
+0001a7a0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+0001a7b0: 612e 6973 6e6f 7469 6e66 2866 616e 6379  a.isnotinf(fancy
+0001a7c0: 203d 2054 7275 6529 0d0a 2020 2020 2020   = True)..      
+0001a7d0: 2020 4661 7374 4172 7261 7928 5b32 2c20    FastArray([2, 
+0001a7e0: 335d 290d 0a20 2020 2020 2020 2022 2222  3])..        """
+0001a7f0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0001a800: 2073 656c 662e 5f75 6e61 7279 5f6f 7028   self._unary_op(
+0001a810: 4d41 5448 5f4f 5045 5241 5449 4f4e 2e49  MATH_OPERATION.I
+0001a820: 534e 4f54 494e 462c 2066 616e 6379 3d66  SNOTINF, fancy=f
+0001a830: 616e 6379 290d 0a0d 0a20 2020 2023 2323  ancy)....    ###
+0001a840: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0001a850: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0001a860: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
+0001a870: 2320 5265 6475 6365 2073 6563 7469 6f6e  # Reduce section
+0001a880: 0d0a 2020 2020 2323 2323 2323 2323 2323  ..    ##########
+0001a890: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0001a8a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0001a8b0: 2323 230d 0a0d 0a20 2020 2064 6566 205f  ###....    def _
+0001a8c0: 6661 5f66 696c 7465 725f 7772 6170 7065  fa_filter_wrappe
+0001a8d0: 7228 7365 6c66 2c20 6d79 4675 6e63 2c20  r(self, myFunc, 
+0001a8e0: 6669 6c74 6572 3d4e 6f6e 652c 2064 7479  filter=None, dty
+0001a8f0: 7065 3d4e 6f6e 6529 3a0d 0a20 2020 2020  pe=None):..     
+0001a900: 2020 2069 6620 6669 6c74 6572 2069 7320     if filter is 
+0001a910: 5472 7565 3a0d 0a20 2020 2020 2020 2020  True:..         
+0001a920: 2020 2066 696c 7465 7220 3d20 6f6e 6573     filter = ones
+0001a930: 286c 656e 2873 656c 6629 2c20 6474 7970  (len(self), dtyp
+0001a940: 653d 626f 6f6c 290d 0a20 2020 2020 2020  e=bool)..       
+0001a950: 2069 6620 6669 6c74 6572 2069 7320 4661   if filter is Fa
+0001a960: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0001a970: 2020 6669 6c74 6572 203d 207a 6572 6f73    filter = zeros
+0001a980: 286c 656e 2873 656c 6629 2c20 6474 7970  (len(self), dtyp
+0001a990: 653d 626f 6f6c 290d 0a20 2020 2020 2020  e=bool)..       
+0001a9a0: 2069 6620 6c65 6e28 6669 6c74 6572 2920   if len(filter) 
+0001a9b0: 213d 206c 656e 2873 656c 6629 3a0d 0a20  != len(self):.. 
+0001a9c0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0001a9d0: 2056 616c 7565 4572 726f 7228 2246 696c   ValueError("Fil
+0001a9e0: 7465 7220 616e 6420 696e 7075 7420 6e6f  ter and input no
+0001a9f0: 7420 7468 6520 7361 6d65 206c 656e 6774  t the same lengt
+0001aa00: 682e 2229 0d0a 0d0a 2020 2020 2020 2020  h.")....        
+0001aa10: 6966 206e 6f74 2073 656c 662e 6973 636f  if not self.isco
+0001aa20: 6d70 7574 6162 6c65 2829 3a0d 0a20 2020  mputable():..   
+0001aa30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001aa40: 6e70 2e4e 614e 0d0a 0d0a 2020 2020 2020  np.NaN....      
+0001aa50: 2020 6966 2064 7479 7065 2069 7320 6e6f    if dtype is no
+0001aa60: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+0001aa70: 2020 2020 2072 6574 7572 6e20 6474 7970       return dtyp
+0001aa80: 6528 6d79 4675 6e63 2873 656c 662c 2066  e(myFunc(self, f
+0001aa90: 696c 7465 7229 290d 0a0d 0a20 2020 2020  ilter))....     
+0001aaa0: 2020 2072 6574 7572 6e20 6d79 4675 6e63     return myFunc
+0001aab0: 2873 656c 662c 2066 696c 7465 7229 0d0a  (self, filter)..
+0001aac0: 0d0a 2020 2020 6465 6620 5f66 615f 6b65  ..    def _fa_ke
+0001aad0: 7977 6f72 645f 7772 6170 7065 7228 7365  yword_wrapper(se
+0001aae0: 6c66 2c20 6669 6c74 6572 3d4e 6f6e 652c  lf, filter=None,
+0001aaf0: 2064 7479 7065 3d4e 6f6e 652c 2061 7869   dtype=None, axi
+0001ab00: 733d 4e6f 6e65 2c20 6b65 6570 6469 6d73  s=None, keepdims
+0001ab10: 3d4e 6f6e 652c 2064 646f 663d 4e6f 6e65  =None, ddof=None
+0001ab20: 2c20 2a2a 6b77 6172 6773 293a 0d0a 2020  , **kwargs):..  
+0001ab30: 2020 2020 2020 6966 2073 656c 662e 6474        if self.dt
+0001ab40: 7970 652e 6368 6172 2069 6e20 224f 5355  ype.char in "OSU
+0001ab50: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+0001ab60: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
+0001ab70: 2246 6173 7441 7272 6179 206f 7065 7261  "FastArray opera
+0001ab80: 7469 6f6e 2061 7070 6c69 6564 2074 6f20  tion applied to 
+0001ab90: 7374 7269 6e67 206f 7220 6f62 6a65 6374  string or object
+0001aba0: 2061 7272 6179 2e22 290d 0a0d 0a20 2020   array.")....   
+0001abb0: 2020 2020 2069 6620 226f 7574 2220 696e       if "out" in
+0001abc0: 206b 7761 7267 733a 0d0a 2020 2020 2020   kwargs:..      
+0001abd0: 2020 2020 2020 6966 206b 7761 7267 735b        if kwargs[
+0001abe0: 226f 7574 225d 2069 7320 4e6f 6e65 3a0d  "out"] is None:.
+0001abf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ac00: 206b 7761 7267 732e 706f 7028 226f 7574   kwargs.pop("out
+0001ac10: 2229 0d0a 0d0a 2020 2020 2020 2020 6966  ")....        if
+0001ac20: 2061 6e79 286b 7761 7267 7329 3a0d 0a20   any(kwargs):.. 
+0001ac30: 2020 2020 2020 2020 2020 206c 6f67 6769             loggi
+0001ac40: 6e67 2e77 6172 6e69 6e67 280d 0a20 2020  ng.warning(..   
+0001ac50: 2020 2020 2020 2020 2020 2020 2022 556e               "Un
+0001ac60: 6578 7065 6374 6564 2046 6173 7441 7272  expected FastArr
+0001ac70: 6179 206f 7065 7261 7469 6f6e 206b 6579  ay operation key
+0001ac80: 776f 7264 2873 293a 2022 202b 2022 2c20  word(s): " + ", 
+0001ac90: 222e 6a6f 696e 285b 6b65 7920 666f 7220  ".join([key for 
+0001aca0: 6b65 792c 2076 616c 7565 2069 6e20 6b77  key, value in kw
+0001acb0: 6172 6773 2e69 7465 6d73 2829 5d29 0d0a  args.items()])..
+0001acc0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+0001acd0: 0a20 2020 2020 2020 2069 6620 6474 7970  .        if dtyp
+0001ace0: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
+0001acf0: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
+0001ad00: 6773 5b22 6474 7970 6522 5d20 3d20 6474  gs["dtype"] = dt
+0001ad10: 7970 650d 0a20 2020 2020 2020 2069 6620  ype..        if 
+0001ad20: 6178 6973 3a0d 0a20 2020 2020 2020 2020  axis:..         
+0001ad30: 2020 206b 7761 7267 735b 2261 7869 7322     kwargs["axis"
+0001ad40: 5d20 3d20 6178 6973 0d0a 2020 2020 2020  ] = axis..      
+0001ad50: 2020 6966 206b 6565 7064 696d 733a 0d0a    if keepdims:..
+0001ad60: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
+0001ad70: 6773 5b22 6b65 6570 6469 6d73 225d 203d  gs["keepdims"] =
+0001ad80: 206b 6565 7064 696d 730d 0a20 2020 2020   keepdims..     
+0001ad90: 2020 2069 6620 6464 6f66 2069 7320 6e6f     if ddof is no
+0001ada0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+0001adb0: 2020 2020 206b 7761 7267 735b 2264 646f       kwargs["ddo
+0001adc0: 6622 5d20 3d20 6464 6f66 0d0a 2020 2020  f"] = ddof..    
+0001add0: 2020 2020 6966 2066 696c 7465 7220 6973      if filter is
+0001ade0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0001adf0: 2020 2020 2020 2020 6b77 6172 6773 5b22          kwargs["
+0001ae00: 6669 6c74 6572 225d 203d 2066 696c 7465  filter"] = filte
+0001ae10: 720d 0a0d 0a20 2020 2020 2020 2069 6620  r....        if 
+0001ae20: 2866 696c 7465 7220 6973 206e 6f74 204e  (filter is not N
+0001ae30: 6f6e 6529 2061 6e64 2028 2861 7869 7320  one) and ((axis 
+0001ae40: 6973 206e 6f74 204e 6f6e 6529 206f 7220  is not None) or 
+0001ae50: 286b 6565 7064 696d 7320 6973 206e 6f74  (keepdims is not
+0001ae60: 204e 6f6e 6529 206f 7220 2864 646f 6620   None) or (ddof 
+0001ae70: 6973 206e 6f74 204e 6f6e 6529 293a 0d0a  is not None)):..
+0001ae80: 2020 2020 2020 2020 2020 2020 6c6f 6767              logg
+0001ae90: 696e 672e 7761 726e 696e 6728 2253 696e  ing.warning("Sin
+0001aea0: 6365 2046 696c 7465 7220 6b65 7977 6f72  ce Filter keywor
+0001aeb0: 6420 6973 2070 7265 7365 6e74 2c20 4661  d is present, Fa
+0001aec0: 7374 4172 7261 7920 6f70 6572 6174 696f  stArray operatio
+0001aed0: 6e73 2069 676e 6f72 6520 6178 6973 2c20  ns ignore axis, 
+0001aee0: 6b65 6570 6469 6d73 2061 6e64 2064 646f  keepdims and ddo
+0001aef0: 6622 290d 0a0d 0a20 2020 2020 2020 2072  f")....        r
+0001af00: 6574 7572 6e20 6b77 6172 6773 0d0a 0d0a  eturn kwargs....
+0001af10: 2020 2020 6465 6620 6e61 6e73 756d 2873      def nansum(s
+0001af20: 656c 662c 2066 696c 7465 723d 4e6f 6e65  elf, filter=None
+0001af30: 2c20 6474 7970 653d 4e6f 6e65 2c20 6178  , dtype=None, ax
+0001af40: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
+0001af50: 733d 4e6f 6e65 2c20 2a2a 6b77 6172 6773  s=None, **kwargs
+0001af60: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
+0001af70: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0001af80: 2020 2020 2020 436f 6d70 7574 6520 7468        Compute th
+0001af90: 6520 7375 6d20 6f66 2074 6865 2076 616c  e sum of the val
+0001afa0: 7565 7320 696e 2074 6865 2066 6972 7374  ues in the first
+0001afb0: 2061 7267 756d 656e 742c 2069 676e 6f72   argument, ignor
+0001afc0: 696e 6720 4e61 4e73 2e0d 0a0d 0a20 2020  ing NaNs.....   
+0001afd0: 2020 2020 2049 6620 616c 6c20 7661 6c75       If all valu
+0001afe0: 6573 2069 6e20 7468 6520 6669 7273 7420  es in the first 
+0001aff0: 6172 6775 6d65 6e74 2061 7265 204e 614e  argument are NaN
+0001b000: 732c 2060 6030 2e30 6060 2069 7320 7265  s, ``0.0`` is re
+0001b010: 7475 726e 6564 2e0d 0a0d 0a20 2020 2020  turned.....     
+0001b020: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+0001b030: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+0001b040: 2d0d 0a20 2020 2020 2020 2066 696c 7465  -..        filte
+0001b050: 7220 3a20 6172 7261 7920 6f66 2062 6f6f  r : array of boo
+0001b060: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
+0001b070: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
+0001b080: 6369 6669 6573 2077 6869 6368 2065 6c65  cifies which ele
+0001b090: 6d65 6e74 7320 746f 2069 6e63 6c75 6465  ments to include
+0001b0a0: 2069 6e20 7468 6520 7375 6d20 6361 6c63   in the sum calc
+0001b0b0: 756c 6174 696f 6e2e 2049 6620 7468 6520  ulation. If the 
+0001b0c0: 6669 6c74 6572 2069 730d 0a20 2020 2020  filter is..     
+0001b0d0: 2020 2020 2020 2075 6e69 666f 726d 6c79         uniformly
+0001b0e0: 2060 6046 616c 7365 6060 2c20 606e 616e   ``False``, `nan
+0001b0f0: 7375 6d60 2072 6574 7572 6e73 2060 6030  sum` returns ``0
+0001b100: 2e30 6060 2e0d 0a20 2020 2020 2020 2064  .0``...        d
+0001b110: 7479 7065 203a 2072 742e 6474 7970 6520  type : rt.dtype 
+0001b120: 6f72 206e 756d 7079 2e64 7479 7065 2c20  or numpy.dtype, 
+0001b130: 6465 6661 756c 7420 666c 6f61 7436 340d  default float64.
+0001b140: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0001b150: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
+0001b160: 6520 7265 7375 6c74 2e20 466f 7220 6120  e result. For a 
+0001b170: 6046 6173 7441 7272 6179 6020 6060 7860  `FastArray` ``x`
+0001b180: 602c 0d0a 2020 2020 2020 2020 2020 2020  `,..            
+0001b190: 6060 782e 6e61 6e73 756d 2864 7479 7065  ``x.nansum(dtype
+0001b1a0: 203d 206d 795f 7479 7065 2960 6020 6973   = my_type)`` is
+0001b1b0: 2065 7175 6976 616c 656e 7420 746f 2060   equivalent to `
+0001b1c0: 606d 795f 7479 7065 2878 2e6e 616e 7375  `my_type(x.nansu
+0001b1d0: 6d28 2929 6060 2e0d 0a0d 0a20 2020 2020  m())``.....     
+0001b1e0: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+0001b1f0: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+0001b200: 2020 2020 2073 6361 6c61 720d 0a20 2020       scalar..   
+0001b210: 2020 2020 2020 2020 2054 6865 2073 756d           The sum
+0001b220: 206f 6620 7468 6520 7661 6c75 6573 2e0d   of the values..
+0001b230: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
+0001b240: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
+0001b250: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 206e  -----..        n
+0001b260: 756d 7079 2e6e 616e 7375 6d0d 0a20 2020  umpy.nansum..   
+0001b270: 2020 2020 2044 6174 6173 6574 2e6e 616e       Dataset.nan
+0001b280: 7375 6d20 3a20 5375 6d73 2074 6865 2076  sum : Sums the v
+0001b290: 616c 7565 7320 6f66 206e 756d 6572 6963  alues of numeric
+0001b2a0: 616c 2060 4461 7461 7365 7460 2063 6f6c  al `Dataset` col
+0001b2b0: 756d 6e73 2c20 6967 6e6f 7269 6e67 204e  umns, ignoring N
+0001b2c0: 614e 732e 0d0a 2020 2020 2020 2020 4772  aNs...        Gr
+0001b2d0: 6f75 7042 794f 7073 2e6e 616e 7375 6d20  oupByOps.nansum 
+0001b2e0: 3a20 5375 6d73 2074 6865 2076 616c 7565  : Sums the value
+0001b2f0: 7320 6f66 2065 6163 6820 6772 6f75 702c  s of each group,
+0001b300: 2069 676e 6f72 696e 6720 4e61 4e73 2e20   ignoring NaNs. 
+0001b310: 5573 6564 2062 790d 0a20 2020 2020 2020  Used by..       
+0001b320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b330: 2020 2020 2060 4361 7465 676f 7269 6361       `Categorica
+0001b340: 6c60 206f 626a 6563 7473 2e0d 0a0d 0a20  l` objects..... 
+0001b350: 2020 2020 2020 204e 6f74 6573 0d0a 2020         Notes..  
+0001b360: 2020 2020 2020 2d2d 2d2d 2d0d 0a20 2020        -----..   
+0001b370: 2020 2020 2054 6865 2060 6474 7970 6560       The `dtype`
+0001b380: 206b 6579 776f 7264 2066 6f72 2060 4661   keyword for `Fa
+0001b390: 7374 4172 7261 792e 6e61 6e73 756d 6020  stArray.nansum` 
+0001b3a0: 7370 6563 6966 6965 7320 7468 6520 6461  specifies the da
+0001b3b0: 7461 2074 7970 6520 6f66 2074 6865 0d0a  ta type of the..
+0001b3c0: 2020 2020 2020 2020 7265 7375 6c74 2e20          result. 
+0001b3d0: 5468 6973 2064 6966 6665 7273 2066 726f  This differs fro
+0001b3e0: 6d20 606e 756d 7079 2e6e 616e 7375 6d60  m `numpy.nansum`
+0001b3f0: 2c20 7768 6572 6520 6974 2073 7065 6369  , where it speci
+0001b400: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+0001b410: 7065 2075 7365 640d 0a20 2020 2020 2020  pe used..       
+0001b420: 2074 6f20 636f 6d70 7574 6520 7468 6520   to compute the 
+0001b430: 7375 6d2e 0d0a 0d0a 2020 2020 2020 2020  sum.....        
+0001b440: 2a2a 4e6f 7465 7320 6f6e 2055 7369 6e67  **Notes on Using
+0001b450: 204e 756d 5079 2050 6172 616d 6574 6572   NumPy Parameter
+0001b460: 732a 2a0d 0a0d 0a20 2020 2020 2020 2055  s**....        U
+0001b470: 7369 6e67 2065 6974 6865 7220 6f66 2074  sing either of t
+0001b480: 6865 2066 6f6c 6c6f 7769 6e67 204e 756d  he following Num
+0001b490: 5079 2070 6172 616d 6574 6572 7320 7769  Py parameters wi
+0001b4a0: 6c6c 2063 6175 7365 2052 6970 7461 626c  ll cause Riptabl
+0001b4b0: 6520 746f 2073 7769 7463 6820 746f 0d0a  e to switch to..
+0001b4c0: 2020 2020 2020 2020 7468 6520 4e75 6d50          the NumP
+0001b4d0: 7920 696d 706c 656d 656e 7461 7469 6f6e  y implementation
+0001b4e0: 206f 6620 7468 6973 206d 6574 686f 6420   of this method 
+0001b4f0: 2860 6e75 6d70 792e 6e61 6e73 756d 6029  (`numpy.nansum`)
+0001b500: 2e20 486f 7765 7665 722c 2075 6e74 696c  . However, until
+0001b510: 2061 0d0a 2020 2020 2020 2020 7265 706f   a..        repo
+0001b520: 7274 6564 2062 7567 2069 7320 6669 7865  rted bug is fixe
+0001b530: 642c 2069 6620 796f 7520 616c 736f 2069  d, if you also i
+0001b540: 6e63 6c75 6465 2074 6865 2060 6474 7970  nclude the `dtyp
+0001b550: 6560 2070 6172 616d 6574 6572 2069 7420  e` parameter it 
+0001b560: 7769 6c6c 2062 650d 0a20 2020 2020 2020  will be..       
+0001b570: 2061 7070 6c69 6564 2074 6f20 7468 6520   applied to the 
+0001b580: 7265 7375 6c74 2c20 6e6f 7420 7573 6564  result, not used
+0001b590: 2074 6f20 636f 6d70 7574 6520 7468 6520   to compute the 
+0001b5a0: 7375 6d20 6173 2069 7420 6973 2069 6e20  sum as it is in 
+0001b5b0: 606e 756d 7079 2e6e 616e 7375 6d60 2e0d  `numpy.nansum`..
+0001b5c0: 0a0d 0a20 2020 2020 2020 2041 6c73 6f20  ...        Also 
+0001b5d0: 6e6f 7465 2074 6861 7420 6966 2079 6f75  note that if you
+0001b5e0: 2075 7365 2065 6974 6865 7220 6f66 2074   use either of t
+0001b5f0: 6865 2066 6f6c 6c6f 7769 6e67 204e 756d  he following Num
+0001b600: 5079 2070 6172 616d 6574 6572 7320 616e  Py parameters an
+0001b610: 6420 616c 736f 0d0a 2020 2020 2020 2020  d also..        
+0001b620: 696e 636c 7564 6520 6120 6066 696c 7465  include a `filte
+0001b630: 7260 206b 6579 776f 7264 2061 7267 756d  r` keyword argum
+0001b640: 656e 7420 2877 6869 6368 2060 6e75 6d70  ent (which `nump
+0001b650: 792e 6e61 6e73 756d 6020 646f 6573 206e  y.nansum` does n
+0001b660: 6f74 2061 6363 6570 7429 2c0d 0a20 2020  ot accept),..   
+0001b670: 2020 2020 2052 6970 7461 626c 6527 7320       Riptable's 
+0001b680: 696d 706c 656d 656e 7461 7469 6f6e 206f  implementation o
+0001b690: 6620 606e 616e 7375 6d60 2077 696c 6c20  f `nansum` will 
+0001b6a0: 6265 2075 7365 6420 7769 7468 2074 6865  be used with the
+0001b6b0: 2066 696c 7465 7220 6172 6775 6d65 6e74   filter argument
+0001b6c0: 2061 6e64 0d0a 2020 2020 2020 2020 7468   and..        th
+0001b6d0: 6520 4e75 6d50 7920 7061 7261 6d65 7465  e NumPy paramete
+0001b6e0: 7273 2077 696c 6c20 6265 2069 676e 6f72  rs will be ignor
+0001b6f0: 6564 2e0d 0a0d 0a20 2020 2020 2020 2061  ed.....        a
+0001b700: 7869 7320 3a20 7b69 6e74 2c20 7475 706c  xis : {int, tupl
+0001b710: 6520 6f66 2069 6e74 2c20 4e6f 6e65 7d2c  e of int, None},
+0001b720: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
+0001b730: 2020 2020 2020 2041 7869 7320 6f72 2061         Axis or a
+0001b740: 7865 7320 616c 6f6e 6720 7768 6963 6820  xes along which 
+0001b750: 7468 6520 7375 6d20 6973 2063 6f6d 7075  the sum is compu
+0001b760: 7465 642e 2054 6865 2064 6566 6175 6c74  ted. The default
+0001b770: 2069 7320 746f 2063 6f6d 7075 7465 2074   is to compute t
+0001b780: 6865 0d0a 2020 2020 2020 2020 2020 2020  he..            
+0001b790: 7375 6d20 6f66 2074 6865 2066 6c61 7474  sum of the flatt
+0001b7a0: 656e 6564 2061 7272 6179 2e0d 0a0d 0a20  ened array..... 
+0001b7b0: 2020 2020 2020 206b 6565 7064 696d 7320         keepdims 
+0001b7c0: 3a20 626f 6f6c 2c20 6f70 7469 6f6e 616c  : bool, optional
+0001b7d0: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
+0001b7e0: 2074 6869 7320 6973 2073 6574 2074 6f20   this is set to 
+0001b7f0: 5472 7565 2c20 7468 6520 6178 6573 2077  True, the axes w
+0001b800: 6869 6368 2061 7265 2072 6564 7563 6564  hich are reduced
+0001b810: 2061 7265 206c 6566 7420 696e 2074 6865   are left in the
+0001b820: 2072 6573 756c 7420 6173 0d0a 2020 2020   result as..    
+0001b830: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
+0001b840: 6e73 2077 6974 6820 7369 7a65 206f 6e65  ns with size one
+0001b850: 2e20 5769 7468 2074 6869 7320 6f70 7469  . With this opti
+0001b860: 6f6e 2c20 7468 6520 7265 7375 6c74 2077  on, the result w
+0001b870: 696c 6c20 6272 6f61 6463 6173 740d 0a20  ill broadcast.. 
+0001b880: 2020 2020 2020 2020 2020 2063 6f72 7265             corre
+0001b890: 6374 6c79 2061 6761 696e 7374 2074 6865  ctly against the
+0001b8a0: 206f 7269 6769 6e61 6c20 696e 7075 7420   original input 
+0001b8b0: 6172 7261 792e 0d0a 0d0a 2020 2020 2020  array.....      
+0001b8c0: 2020 2020 2020 4966 2074 6865 2076 616c        If the val
+0001b8d0: 7565 2069 7320 616e 7974 6869 6e67 2062  ue is anything b
+0001b8e0: 7574 2074 6865 2064 6566 6175 6c74 2c20  ut the default, 
+0001b8f0: 7468 656e 2060 6b65 6570 6469 6d73 6020  then `keepdims` 
+0001b900: 7769 6c6c 2062 6520 7061 7373 6564 0d0a  will be passed..
+0001b910: 2020 2020 2020 2020 2020 2020 7468 726f              thro
+0001b920: 7567 6820 746f 2074 6865 2060 6d65 616e  ugh to the `mean
+0001b930: 6020 6f72 2060 7375 6d60 206d 6574 686f  ` or `sum` metho
+0001b940: 6473 206f 6620 7375 622d 636c 6173 7365  ds of sub-classe
+0001b950: 7320 6f66 2060 6e64 6172 7261 7960 2e20  s of `ndarray`. 
+0001b960: 4966 2074 6865 0d0a 2020 2020 2020 2020  If the..        
+0001b970: 2020 2020 7375 622d 636c 6173 7365 7327      sub-classes'
+0001b980: 206d 6574 686f 6473 2064 6f20 6e6f 7420   methods do not 
+0001b990: 696d 706c 656d 656e 7420 606b 6565 7064  implement `keepd
+0001b9a0: 696d 7360 2c20 616e 7920 6578 6365 7074  ims`, any except
+0001b9b0: 696f 6e73 2077 696c 6c20 6265 0d0a 2020  ions will be..  
+0001b9c0: 2020 2020 2020 2020 2020 7261 6973 6564            raised
+0001b9d0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
+0001b9e0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
+0001b9f0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0001ba00: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001ba10: 4172 7261 7928 5b31 2c20 332c 2035 2c20  Array([1, 3, 5, 
+0001ba20: 372c 2072 742e 6e61 6e5d 290d 0a20 2020  7, rt.nan])..   
+0001ba30: 2020 2020 203e 3e3e 2061 2e6e 616e 7375       >>> a.nansu
+0001ba40: 6d28 290d 0a20 2020 2020 2020 2031 362e  m()..        16.
+0001ba50: 300d 0a0d 0a20 2020 2020 2020 2057 6974  0....        Wit
+0001ba60: 6820 6120 6064 7479 7065 6020 7370 6563  h a `dtype` spec
+0001ba70: 6966 6965 643a 0d0a 0d0a 2020 2020 2020  ified:....      
+0001ba80: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
+0001ba90: 7441 7272 6179 285b 312e 302c 2033 2e30  tArray([1.0, 3.0
+0001baa0: 2c20 352e 302c 2037 2e30 2c20 7274 2e6e  , 5.0, 7.0, rt.n
+0001bab0: 616e 5d29 0d0a 2020 2020 2020 2020 3e3e  an])..        >>
+0001bac0: 3e20 612e 6e61 6e73 756d 2864 7479 7065  > a.nansum(dtype
+0001bad0: 203d 2072 742e 696e 7433 3229 0d0a 2020   = rt.int32)..  
+0001bae0: 2020 2020 2020 3136 0d0a 0d0a 2020 2020        16....    
+0001baf0: 2020 2020 5769 7468 2061 2066 696c 7465      With a filte
+0001bb00: 723a 0d0a 0d0a 2020 2020 2020 2020 3e3e  r:....        >>
+0001bb10: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+0001bb20: 6179 285b 312c 2033 2c20 352c 2037 2c20  ay([1, 3, 5, 7, 
+0001bb30: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
+0001bb40: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
+0001bb50: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
+0001bb60: 7275 652c 2046 616c 7365 2c20 5472 7565  rue, False, True
+0001bb70: 2c20 5472 7565 5d29 0d0a 2020 2020 2020  , True])..      
+0001bb80: 2020 3e3e 3e20 612e 6e61 6e73 756d 2866    >>> a.nansum(f
+0001bb90: 696c 7465 7220 3d20 6229 0d0a 2020 2020  ilter = b)..    
+0001bba0: 2020 2020 3130 2e30 0d0a 2020 2020 2020      10.0..      
+0001bbb0: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
+0001bbc0: 206b 7761 7267 7320 3d20 7365 6c66 2e5f   kwargs = self._
+0001bbd0: 6661 5f6b 6579 776f 7264 5f77 7261 7070  fa_keyword_wrapp
+0001bbe0: 6572 2866 696c 7465 723d 6669 6c74 6572  er(filter=filter
+0001bbf0: 2c20 6474 7970 653d 6474 7970 652c 2061  , dtype=dtype, a
+0001bc00: 7869 733d 6178 6973 2c20 6b65 6570 6469  xis=axis, keepdi
+0001bc10: 6d73 3d6b 6565 7064 696d 732c 2064 646f  ms=keepdims, ddo
+0001bc20: 663d 4e6f 6e65 2c20 2a2a 6b77 6172 6773  f=None, **kwargs
+0001bc30: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
+0001bc40: 6669 6c74 6572 2069 7320 6e6f 7420 4e6f  filter is not No
+0001bc50: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+0001bc60: 2072 6574 7572 6e20 7365 6c66 2e5f 6661   return self._fa
+0001bc70: 5f66 696c 7465 725f 7772 6170 7065 7228  _filter_wrapper(
+0001bc80: 5f66 6e61 6e73 756d 2c20 6669 6c74 6572  _fnansum, filter
+0001bc90: 3d66 696c 7465 722c 2064 7479 7065 3d64  =filter, dtype=d
+0001bca0: 7479 7065 290d 0a0d 0a20 2020 2020 2020  type)....       
+0001bcb0: 2072 6574 7572 6e20 7365 6c66 2e5f 7265   return self._re
+0001bcc0: 6475 6365 5f63 6865 636b 2852 4544 5543  duce_check(REDUC
+0001bcd0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+0001bce0: 4345 5f4e 414e 5355 4d2c 206e 702e 6e61  CE_NANSUM, np.na
+0001bcf0: 6e73 756d 2c20 2a2a 6b77 6172 6773 290d  nsum, **kwargs).
+0001bd00: 0a0d 0a20 2020 2064 6566 206d 6561 6e28  ...    def mean(
+0001bd10: 7365 6c66 2c20 6669 6c74 6572 3d4e 6f6e  self, filter=Non
+0001bd20: 652c 2064 7479 7065 3d4e 6f6e 652c 2061  e, dtype=None, a
+0001bd30: 7869 733d 4e6f 6e65 2c20 6b65 6570 6469  xis=None, keepdi
+0001bd40: 6d73 3d4e 6f6e 652c 202a 2a6b 7761 7267  ms=None, **kwarg
+0001bd50: 7329 202d 3e20 6e70 2e6e 756d 6265 723a  s) -> np.number:
+0001bd60: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0001bd70: 2020 2020 2020 2043 6f6d 7075 7465 2074         Compute t
+0001bd80: 6865 2061 7269 7468 6d65 7469 6320 6d65  he arithmetic me
+0001bd90: 616e 206f 6620 7468 6520 7661 6c75 6573  an of the values
+0001bda0: 2069 6e20 7468 6520 6669 7273 7420 6172   in the first ar
+0001bdb0: 6775 6d65 6e74 2e0d 0a0d 0a20 2020 2020  gument.....     
+0001bdc0: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+0001bdd0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+0001bde0: 2d0d 0a20 2020 2020 2020 2066 696c 7465  -..        filte
+0001bdf0: 7220 3a20 6172 7261 7920 6f66 2062 6f6f  r : array of boo
+0001be00: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
+0001be10: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
+0001be20: 6369 6669 6573 2077 6869 6368 2065 6c65  cifies which ele
+0001be30: 6d65 6e74 7320 746f 2069 6e63 6c75 6465  ments to include
+0001be40: 2069 6e20 7468 6520 6d65 616e 2063 616c   in the mean cal
+0001be50: 6375 6c61 7469 6f6e 2e20 4966 2074 6865  culation. If the
+0001be60: 2066 696c 7465 720d 0a20 2020 2020 2020   filter..       
+0001be70: 2020 2020 2069 7320 756e 6966 6f72 6d6c       is uniforml
+0001be80: 7920 6060 4661 6c73 6560 602c 2060 6d65  y ``False``, `me
+0001be90: 616e 6020 7265 7475 726e 7320 6120 605a  an` returns a `Z
+0001bea0: 6572 6f44 6976 6973 696f 6e45 7272 6f72  eroDivisionError
+0001beb0: 602e 0d0a 2020 2020 2020 2020 6474 7970  `...        dtyp
+0001bec0: 6520 3a20 7274 2e64 7479 7065 206f 7220  e : rt.dtype or 
+0001bed0: 6e75 6d70 792e 6474 7970 652c 2064 6566  numpy.dtype, def
+0001bee0: 6175 6c74 2066 6c6f 6174 3634 0d0a 2020  ault float64..  
+0001bef0: 2020 2020 2020 2020 2020 5468 6520 6461            The da
+0001bf00: 7461 2074 7970 6520 6f66 2074 6865 2072  ta type of the r
+0001bf10: 6573 756c 742e 2046 6f72 2061 2060 4661  esult. For a `Fa
+0001bf20: 7374 4172 7261 7960 2060 6078 6060 2c0d  stArray` ``x``,.
+0001bf30: 0a20 2020 2020 2020 2020 2020 2060 6078  .            ``x
+0001bf40: 2e6d 6561 6e28 6474 7970 6520 3d20 6d79  .mean(dtype = my
+0001bf50: 5f74 7970 6529 6060 2069 7320 6571 7569  _type)`` is equi
+0001bf60: 7661 6c65 6e74 2074 6f20 6060 6d79 5f74  valent to ``my_t
+0001bf70: 7970 6528 782e 6d65 616e 2829 2960 602e  ype(x.mean())``.
+0001bf80: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+0001bf90: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+0001bfa0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 7363  ----..        sc
+0001bfb0: 616c 6172 0d0a 2020 2020 2020 2020 2020  alar..          
+0001bfc0: 2020 5468 6520 6d65 616e 206f 6620 7468    The mean of th
+0001bfd0: 6520 7661 6c75 6573 2e0d 0a0d 0a20 2020  e values.....   
+0001bfe0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+0001bff0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+0001c000: 0a20 2020 2020 2020 206e 756d 7079 2e6d  .        numpy.m
+0001c010: 6561 6e0d 0a20 2020 2020 2020 2046 6173  ean..        Fas
+0001c020: 7441 7272 6179 2e6e 616e 6d65 616e 203a  tArray.nanmean :
+0001c030: 2043 6f6d 7075 7465 7320 7468 6520 6d65   Computes the me
+0001c040: 616e 206f 6620 6046 6173 7441 7272 6179  an of `FastArray
+0001c050: 6020 7661 6c75 6573 2c20 6967 6e6f 7269  ` values, ignori
+0001c060: 6e67 204e 614e 732e 0d0a 2020 2020 2020  ng NaNs...      
+0001c070: 2020 4461 7461 7365 742e 6d65 616e 203a    Dataset.mean :
+0001c080: 2043 6f6d 7075 7465 7320 7468 6520 6d65   Computes the me
+0001c090: 616e 206f 6620 6e75 6d65 7269 6361 6c20  an of numerical 
+0001c0a0: 6044 6174 6173 6574 6020 636f 6c75 6d6e  `Dataset` column
+0001c0b0: 732e 0d0a 2020 2020 2020 2020 4772 6f75  s...        Grou
+0001c0c0: 7042 794f 7073 2e6d 6561 6e20 3a20 436f  pByOps.mean : Co
+0001c0d0: 6d70 7574 6573 2074 6865 206d 6561 6e20  mputes the mean 
+0001c0e0: 6f66 2065 6163 6820 6772 6f75 702e 2055  of each group. U
+0001c0f0: 7365 6420 6279 2060 4361 7465 676f 7269  sed by `Categori
+0001c100: 6361 6c60 206f 626a 6563 7473 2e0d 0a0d  cal` objects....
+0001c110: 0a20 2020 2020 2020 204e 6f74 6573 0d0a  .        Notes..
+0001c120: 2020 2020 2020 2020 2d2d 2d2d 2d0d 0a20          -----.. 
+0001c130: 2020 2020 2020 2054 6865 2060 6474 7970         The `dtyp
+0001c140: 6560 206b 6579 776f 7264 2066 6f72 2060  e` keyword for `
+0001c150: 4661 7374 4172 7261 792e 6d65 616e 6020  FastArray.mean` 
+0001c160: 7370 6563 6966 6965 7320 7468 6520 6461  specifies the da
+0001c170: 7461 2074 7970 6520 6f66 2074 6865 2072  ta type of the r
+0001c180: 6573 756c 742e 0d0a 2020 2020 2020 2020  esult...        
+0001c190: 5468 6973 2064 6966 6665 7273 2066 726f  This differs fro
+0001c1a0: 6d20 606e 756d 7079 2e6d 6561 6e60 2c20  m `numpy.mean`, 
+0001c1b0: 7768 6572 6520 6974 2073 7065 6369 6669  where it specifi
+0001c1c0: 6573 2074 6865 2064 6174 6120 7479 7065  es the data type
+0001c1d0: 2075 7365 6420 746f 2063 6f6d 7075 7465   used to compute
+0001c1e0: 0d0a 2020 2020 2020 2020 7468 6520 6d65  ..        the me
+0001c1f0: 616e 2e0d 0a0d 0a20 2020 2020 2020 202a  an.....        *
+0001c200: 2a4e 6f74 6573 206f 6e20 5573 696e 6720  *Notes on Using 
+0001c210: 4e75 6d50 7920 5061 7261 6d65 7465 7273  NumPy Parameters
+0001c220: 2a2a 0d0a 0d0a 2020 2020 2020 2020 5573  **....        Us
+0001c230: 696e 6720 6569 7468 6572 206f 6620 7468  ing either of th
+0001c240: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
+0001c250: 7920 7061 7261 6d65 7465 7273 2077 696c  y parameters wil
+0001c260: 6c20 6361 7573 6520 5269 7074 6162 6c65  l cause Riptable
+0001c270: 2074 6f20 7377 6974 6368 2074 6f0d 0a20   to switch to.. 
+0001c280: 2020 2020 2020 2074 6865 204e 756d 5079         the NumPy
+0001c290: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
+0001c2a0: 6f66 2074 6869 7320 6d65 7468 6f64 2028  of this method (
+0001c2b0: 606e 756d 7079 2e6d 6561 6e60 292e 2048  `numpy.mean`). H
+0001c2c0: 6f77 6576 6572 2c20 756e 7469 6c20 610d  owever, until a.
+0001c2d0: 0a20 2020 2020 2020 2072 6570 6f72 7465  .        reporte
+0001c2e0: 6420 6275 6720 6973 2066 6978 6564 2c20  d bug is fixed, 
+0001c2f0: 6966 2079 6f75 2061 6c73 6f20 696e 636c  if you also incl
+0001c300: 7564 6520 7468 6520 6064 7479 7065 6020  ude the `dtype` 
+0001c310: 7061 7261 6d65 7465 7220 6974 2077 696c  parameter it wil
+0001c320: 6c20 6265 0d0a 2020 2020 2020 2020 6170  l be..        ap
+0001c330: 706c 6965 6420 746f 2074 6865 2072 6573  plied to the res
+0001c340: 756c 742c 206e 6f74 2075 7365 6420 746f  ult, not used to
+0001c350: 2063 6f6d 7075 7465 2074 6865 206d 6561   compute the mea
+0001c360: 6e20 6173 2069 7420 6973 2069 6e20 606e  n as it is in `n
+0001c370: 756d 7079 2e6d 6561 6e60 2e0d 0a0d 0a20  umpy.mean`..... 
+0001c380: 2020 2020 2020 2041 6c73 6f20 6e6f 7465         Also note
+0001c390: 2074 6861 7420 6966 2079 6f75 2075 7365   that if you use
+0001c3a0: 2065 6974 6865 7220 6f66 2074 6865 2066   either of the f
+0001c3b0: 6f6c 6c6f 7769 6e67 204e 756d 5079 2070  ollowing NumPy p
+0001c3c0: 6172 616d 6574 6572 7320 616e 6420 616c  arameters and al
+0001c3d0: 736f 0d0a 2020 2020 2020 2020 696e 636c  so..        incl
+0001c3e0: 7564 6520 6120 6066 696c 7465 7260 206b  ude a `filter` k
+0001c3f0: 6579 776f 7264 2061 7267 756d 656e 7420  eyword argument 
+0001c400: 2877 6869 6368 2060 6e75 6d70 792e 6d65  (which `numpy.me
+0001c410: 616e 6020 646f 6573 206e 6f74 2061 6363  an` does not acc
+0001c420: 6570 7429 2c0d 0a20 2020 2020 2020 2052  ept),..        R
+0001c430: 6970 7461 626c 6527 7320 696d 706c 656d  iptable's implem
+0001c440: 656e 7461 7469 6f6e 206f 6620 606d 6561  entation of `mea
+0001c450: 6e60 2077 696c 6c20 6265 2075 7365 6420  n` will be used 
+0001c460: 7769 7468 2074 6865 2066 696c 7465 7220  with the filter 
+0001c470: 6172 6775 6d65 6e74 2061 6e64 0d0a 2020  argument and..  
+0001c480: 2020 2020 2020 7468 6520 4e75 6d50 7920        the NumPy 
+0001c490: 7061 7261 6d65 7465 7273 2077 696c 6c20  parameters will 
+0001c4a0: 6265 2069 676e 6f72 6564 2e0d 0a0d 0a20  be ignored..... 
+0001c4b0: 2020 2020 2020 2061 7869 7320 3a20 4e6f         axis : No
+0001c4c0: 6e65 206f 7220 696e 7420 6f72 2074 7570  ne or int or tup
+0001c4d0: 6c65 206f 6620 696e 7473 2c20 6f70 7469  le of ints, opti
+0001c4e0: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+0001c4f0: 2020 4178 6973 206f 7220 6178 6573 2061    Axis or axes a
+0001c500: 6c6f 6e67 2077 6869 6368 2074 6865 206d  long which the m
+0001c510: 6561 6e73 2061 7265 2063 6f6d 7075 7465  eans are compute
+0001c520: 642e 2054 6865 2064 6566 6175 6c74 2069  d. The default i
+0001c530: 7320 746f 2063 6f6d 7075 7465 0d0a 2020  s to compute..  
+0001c540: 2020 2020 2020 2020 2020 7468 6520 6d65            the me
+0001c550: 616e 206f 6620 7468 6520 666c 6174 7465  an of the flatte
+0001c560: 6e65 6420 6172 7261 792e 0d0a 0d0a 2020  ned array.....  
+0001c570: 2020 2020 2020 6b65 6570 6469 6d73 203a        keepdims :
+0001c580: 2062 6f6f 6c2c 206f 7074 696f 6e61 6c0d   bool, optional.
+0001c590: 0a20 2020 2020 2020 2020 2020 2049 6620  .            If 
+0001c5a0: 7468 6973 2069 7320 7365 7420 746f 2054  this is set to T
+0001c5b0: 7275 652c 2074 6865 2061 7865 7320 7768  rue, the axes wh
+0001c5c0: 6963 6820 6172 6520 7265 6475 6365 6420  ich are reduced 
+0001c5d0: 6172 6520 6c65 6674 2069 6e20 7468 6520  are left in the 
+0001c5e0: 7265 7375 6c74 2061 730d 0a20 2020 2020  result as..     
+0001c5f0: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
+0001c600: 7320 7769 7468 2073 697a 6520 6f6e 652e  s with size one.
+0001c610: 2057 6974 6820 7468 6973 206f 7074 696f   With this optio
+0001c620: 6e2c 2074 6865 2072 6573 756c 7420 7769  n, the result wi
+0001c630: 6c6c 2062 726f 6164 6361 7374 0d0a 2020  ll broadcast..  
+0001c640: 2020 2020 2020 2020 2020 636f 7272 6563            correc
+0001c650: 746c 7920 6167 6169 6e73 7420 7468 6520  tly against the 
+0001c660: 6f72 6967 696e 616c 2069 6e70 7574 2061  original input a
+0001c670: 7272 6179 2e0d 0a0d 0a20 2020 2020 2020  rray.....       
+0001c680: 2020 2020 2049 6620 7468 6520 6465 6661       If the defa
+0001c690: 756c 7420 7661 6c75 6520 6973 2070 6173  ult value is pas
+0001c6a0: 7365 642c 2074 6865 6e20 606b 6565 7064  sed, then `keepd
+0001c6b0: 696d 7360 2077 696c 6c20 6e6f 7420 6265  ims` will not be
+0001c6c0: 2070 6173 7365 6420 7468 726f 7567 680d   passed through.
+0001c6d0: 0a20 2020 2020 2020 2020 2020 2074 6f20  .            to 
+0001c6e0: 7468 6520 606d 6561 6e60 206d 6574 686f  the `mean` metho
+0001c6f0: 6420 6f66 2073 7562 2d63 6c61 7373 6573  d of sub-classes
+0001c700: 206f 6620 606e 6461 7272 6179 602c 2068   of `ndarray`, h
+0001c710: 6f77 6576 6572 2061 6e79 206e 6f6e 2d64  owever any non-d
+0001c720: 6566 6175 6c74 0d0a 2020 2020 2020 2020  efault..        
+0001c730: 2020 2020 7661 6c75 6520 7769 6c6c 2062      value will b
+0001c740: 652e 2049 6620 7468 6520 7375 622d 636c  e. If the sub-cl
+0001c750: 6173 7327 7320 6d65 7468 6f64 2064 6f65  ass's method doe
+0001c760: 7320 6e6f 7420 696d 706c 656d 656e 7420  s not implement 
+0001c770: 606b 6565 7064 696d 7360 2c20 616e 790d  `keepdims`, any.
+0001c780: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+0001c790: 6570 7469 6f6e 7320 7769 6c6c 2062 6520  eptions will be 
+0001c7a0: 7261 6973 6564 2e0d 0a0d 0a20 2020 2020  raised.....     
+0001c7b0: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
+0001c7c0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+0001c7d0: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
+0001c7e0: 742e 4661 7374 4172 7261 7928 5b31 2c20  t.FastArray([1, 
+0001c7f0: 332c 2035 2c20 375d 290d 0a20 2020 2020  3, 5, 7])..     
+0001c800: 2020 203e 3e3e 2061 2e6d 6561 6e28 290d     >>> a.mean().
+0001c810: 0a20 2020 2020 2020 2034 2e30 0d0a 0d0a  .        4.0....
+0001c820: 2020 2020 2020 2020 5769 7468 2061 2060          With a `
+0001c830: 6474 7970 6560 2073 7065 6369 6669 6564  dtype` specified
+0001c840: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+0001c850: 2061 203d 2072 742e 4661 7374 4172 7261   a = rt.FastArra
+0001c860: 7928 5b31 2c20 332c 2035 2c20 375d 290d  y([1, 3, 5, 7]).
+0001c870: 0a20 2020 2020 2020 203e 3e3e 2061 2e6d  .        >>> a.m
+0001c880: 6561 6e28 6474 7970 6520 3d20 7274 2e69  ean(dtype = rt.i
+0001c890: 6e74 3332 290d 0a20 2020 2020 2020 2034  nt32)..        4
+0001c8a0: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+0001c8b0: 2061 2066 696c 7465 723a 0d0a 0d0a 2020   a filter:....  
+0001c8c0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+0001c8d0: 2e46 6173 7441 7272 6179 285b 312c 2033  .FastArray([1, 3
+0001c8e0: 2c20 352c 2037 5d29 0d0a 2020 2020 2020  , 5, 7])..      
+0001c8f0: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
+0001c900: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
+0001c910: 7275 652c 2046 616c 7365 2c20 5472 7565  rue, False, True
+0001c920: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+0001c930: 612e 6d65 616e 2866 696c 7465 7220 3d20  a.mean(filter = 
+0001c940: 6229 0d0a 2020 2020 2020 2020 352e 300d  b)..        5.0.
+0001c950: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
+0001c960: 2020 2020 2020 2020 6b77 6172 6773 203d          kwargs =
+0001c970: 2073 656c 662e 5f66 615f 6b65 7977 6f72   self._fa_keywor
+0001c980: 645f 7772 6170 7065 7228 6669 6c74 6572  d_wrapper(filter
+0001c990: 3d66 696c 7465 722c 2064 7479 7065 3d64  =filter, dtype=d
+0001c9a0: 7479 7065 2c20 6178 6973 3d61 7869 732c  type, axis=axis,
+0001c9b0: 206b 6565 7064 696d 733d 6b65 6570 6469   keepdims=keepdi
+0001c9c0: 6d73 2c20 6464 6f66 3d4e 6f6e 652c 202a  ms, ddof=None, *
+0001c9d0: 2a6b 7761 7267 7329 0d0a 0d0a 2020 2020  *kwargs)....    
+0001c9e0: 2020 2020 6966 2066 696c 7465 7220 6973      if filter is
+0001c9f0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0001ca00: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0001ca10: 656c 662e 5f66 615f 6669 6c74 6572 5f77  elf._fa_filter_w
+0001ca20: 7261 7070 6572 285f 666d 6561 6e2c 2066  rapper(_fmean, f
+0001ca30: 696c 7465 723d 6669 6c74 6572 2c20 6474  ilter=filter, dt
+0001ca40: 7970 653d 6474 7970 6529 0d0a 0d0a 2020  ype=dtype)....  
+0001ca50: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0001ca60: 662e 5f72 6564 7563 655f 6368 6563 6b28  f._reduce_check(
+0001ca70: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
+0001ca80: 2e52 4544 5543 455f 4d45 414e 2c20 6e70  .REDUCE_MEAN, np
+0001ca90: 2e6d 6561 6e2c 202a 2a6b 7761 7267 7329  .mean, **kwargs)
+0001caa0: 0d0a 0d0a 2020 2020 6465 6620 6e61 6e6d  ....    def nanm
+0001cab0: 6561 6e28 7365 6c66 2c20 6669 6c74 6572  ean(self, filter
+0001cac0: 3d4e 6f6e 652c 2064 7479 7065 3d4e 6f6e  =None, dtype=Non
+0001cad0: 652c 2061 7869 733d 4e6f 6e65 2c20 6b65  e, axis=None, ke
+0001cae0: 6570 6469 6d73 3d4e 6f6e 652c 202a 2a6b  epdims=None, **k
+0001caf0: 7761 7267 7329 202d 3e20 6e70 2e6e 756d  wargs) -> np.num
+0001cb00: 6265 723a 0d0a 2020 2020 2020 2020 2222  ber:..        ""
 0001cb10: 220d 0a20 2020 2020 2020 2043 6f6d 7075  "..        Compu
-0001cb20: 7465 2074 6865 2076 6172 6961 6e63 6520  te the variance 
-0001cb30: 6f66 2074 6865 2076 616c 7565 7320 696e  of the values in
-0001cb40: 2074 6865 2066 6972 7374 2061 7267 756d   the first argum
-0001cb50: 656e 742e 0d0a 0d0a 2020 2020 2020 2020  ent.....        
-0001cb60: 5269 7074 6162 6c65 2075 7365 7320 7468  Riptable uses th
-0001cb70: 6520 636f 6e76 656e 7469 6f6e 2074 6861  e convention tha
-0001cb80: 7420 6060 6464 6f66 203d 2031 6060 2c20  t ``ddof = 1``, 
-0001cb90: 6d65 616e 696e 6720 7468 6520 7661 7269  meaning the vari
-0001cba0: 616e 6365 206f 660d 0a20 2020 2020 2020  ance of..       
-0001cbb0: 2060 605b 785f 312c 202e 2e2e 2c20 785f   ``[x_1, ..., x_
-0001cbc0: 6e5d 6060 2069 7320 6465 6669 6e65 6420  n]`` is defined 
-0001cbd0: 6279 2060 6076 6172 203d 2031 2f28 6e20  by ``var = 1/(n 
-0001cbe0: 2d20 3129 202a 2073 756d 2878 5f69 202d  - 1) * sum(x_i -
-0001cbf0: 206d 6561 6e20 292a 2a32 6060 0d0a 2020   mean )**2``..  
-0001cc00: 2020 2020 2020 286e 6f74 6520 7468 6520        (note the 
-0001cc10: 6060 6e20 2d20 3160 6020 696e 7374 6561  ``n - 1`` instea
-0001cc20: 6420 6f66 2060 606e 6060 292e 2054 6869  d of ``n``). Thi
-0001cc30: 7320 6469 6666 6572 7320 6672 6f6d 204e  s differs from N
-0001cc40: 756d 5079 2c20 7768 6963 6820 7573 6573  umPy, which uses
-0001cc50: 0d0a 2020 2020 2020 2020 6060 6464 6f66  ..        ``ddof
-0001cc60: 203d 2030 6060 2062 7920 6465 6661 756c   = 0`` by defaul
-0001cc70: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
-0001cc80: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-0001cc90: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-0001cca0: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
-0001ccb0: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
-0001ccc0: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
-0001ccd0: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
-0001cce0: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
-0001ccf0: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
-0001cd00: 6865 2076 6172 6961 6e63 6520 6361 6c63  he variance calc
-0001cd10: 756c 6174 696f 6e2e 2049 6620 7468 650d  ulation. If the.
-0001cd20: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-0001cd30: 7465 7220 6973 2075 6e69 666f 726d 6c79  ter is uniformly
-0001cd40: 2060 6046 616c 7365 6060 2c20 6076 6172   ``False``, `var
-0001cd50: 6020 7265 7475 726e 7320 6120 605a 6572  ` returns a `Zer
-0001cd60: 6f44 6976 6973 696f 6e45 7272 6f72 602e  oDivisionError`.
-0001cd70: 0d0a 0d0a 2020 2020 2020 2020 6474 7970  ....        dtyp
-0001cd80: 6520 3a20 7274 2e64 7479 7065 206f 7220  e : rt.dtype or 
-0001cd90: 6e75 6d70 792e 6474 7970 652c 2064 6566  numpy.dtype, def
-0001cda0: 6175 6c74 2066 6c6f 6174 3634 0d0a 2020  ault float64..  
-0001cdb0: 2020 2020 2020 2020 2020 5468 6520 6461            The da
-0001cdc0: 7461 2074 7970 6520 6f66 2074 6865 2072  ta type of the r
-0001cdd0: 6573 756c 742e 2046 6f72 2061 2060 4661  esult. For a `Fa
-0001cde0: 7374 4172 7261 7960 2060 6078 6060 2c0d  stArray` ``x``,.
-0001cdf0: 0a20 2020 2020 2020 2020 2020 2060 6078  .            ``x
-0001ce00: 2e76 6172 2864 7479 7065 203d 206d 795f  .var(dtype = my_
-0001ce10: 7479 7065 2960 6020 6973 2065 7175 6976  type)`` is equiv
-0001ce20: 616c 656e 7420 746f 2060 606d 795f 7479  alent to ``my_ty
-0001ce30: 7065 2878 2e76 6172 2829 2960 602e 0d0a  pe(x.var())``...
-0001ce40: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0001ce50: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0001ce60: 2d2d 0d0a 2020 2020 2020 2020 7363 616c  --..        scal
-0001ce70: 6172 0d0a 2020 2020 2020 2020 2020 2020  ar..            
-0001ce80: 5468 6520 7661 7269 616e 6365 206f 6620  The variance of 
-0001ce90: 7468 6520 7661 6c75 6573 2e0d 0a0d 0a20  the values..... 
-0001cea0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
-0001ceb0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0001cec0: 2d0d 0a20 2020 2020 2020 206e 756d 7079  -..        numpy
-0001ced0: 2e76 6172 0d0a 2020 2020 2020 2020 4661  .var..        Fa
-0001cee0: 7374 4172 7261 792e 6e61 6e76 6172 203a  stArray.nanvar :
-0001cef0: 2043 6f6d 7075 7465 7320 7468 6520 7661   Computes the va
-0001cf00: 7269 616e 6365 206f 6620 6046 6173 7441  riance of `FastA
-0001cf10: 7272 6179 6020 7661 6c75 6573 2c20 6967  rray` values, ig
-0001cf20: 6e6f 7269 6e67 204e 614e 732e 0d0a 2020  noring NaNs...  
-0001cf30: 2020 2020 2020 4461 7461 7365 742e 7661        Dataset.va
-0001cf40: 7220 3a20 436f 6d70 7574 6573 2074 6865  r : Computes the
-0001cf50: 2076 6172 6961 6e63 6520 6f66 206e 756d   variance of num
-0001cf60: 6572 6963 616c 2060 4461 7461 7365 7460  erical `Dataset`
-0001cf70: 2063 6f6c 756d 6e73 2e0d 0a20 2020 2020   columns...     
-0001cf80: 2020 2047 726f 7570 4279 4f70 732e 7661     GroupByOps.va
-0001cf90: 7220 3a20 436f 6d70 7574 6573 2074 6865  r : Computes the
-0001cfa0: 2076 6172 6961 6e63 6520 6f66 2065 6163   variance of eac
-0001cfb0: 6820 6772 6f75 702e 2055 7365 6420 6279  h group. Used by
-0001cfc0: 2060 4361 7465 676f 7269 6361 6c60 0d0a   `Categorical`..
-0001cfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cfe0: 2020 2020 2020 2020 206f 626a 6563 7473           objects
-0001cff0: 2e0d 0a0d 0a20 2020 2020 2020 204e 6f74  .....        Not
-0001d000: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-0001d010: 2d0d 0a20 2020 2020 2020 2054 6865 2060  -..        The `
-0001d020: 6474 7970 6560 206b 6579 776f 7264 2066  dtype` keyword f
-0001d030: 6f72 2060 4661 7374 4172 7261 792e 7661  or `FastArray.va
-0001d040: 7260 2073 7065 6369 6669 6573 2074 6865  r` specifies the
-0001d050: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
-0001d060: 6520 7265 7375 6c74 2e0d 0a20 2020 2020  e result...     
-0001d070: 2020 2054 6869 7320 6469 6666 6572 7320     This differs 
-0001d080: 6672 6f6d 2060 6e75 6d70 792e 7661 7260  from `numpy.var`
-0001d090: 2c20 7768 6572 6520 6974 2073 7065 6369  , where it speci
-0001d0a0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
-0001d0b0: 7065 2075 7365 6420 746f 2063 6f6d 7075  pe used to compu
-0001d0c0: 7465 0d0a 2020 2020 2020 2020 7468 6520  te..        the 
-0001d0d0: 7661 7269 616e 6365 2e0d 0a0d 0a20 2020  variance.....   
-0001d0e0: 2020 2020 202a 2a4e 6f74 6573 206f 6e20       **Notes on 
-0001d0f0: 5573 696e 6720 4e75 6d50 7920 5061 7261  Using NumPy Para
-0001d100: 6d65 7465 7273 2a2a 0d0a 0d0a 2020 2020  meters**....    
-0001d110: 2020 2020 5573 696e 6720 616e 7920 6f66      Using any of
-0001d120: 2074 6865 2066 6f6c 6c6f 7769 6e67 204e   the following N
-0001d130: 756d 5079 2070 6172 616d 6574 6572 7320  umPy parameters 
-0001d140: 7769 6c6c 2063 6175 7365 2052 6970 7461  will cause Ripta
-0001d150: 626c 6520 746f 2073 7769 7463 6820 746f  ble to switch to
-0001d160: 0d0a 2020 2020 2020 2020 7468 6520 4e75  ..        the Nu
-0001d170: 6d50 7920 696d 706c 656d 656e 7461 7469  mPy implementati
-0001d180: 6f6e 206f 6620 7468 6973 206d 6574 686f  on of this metho
-0001d190: 6420 2860 6e75 6d70 792e 7661 7260 292e  d (`numpy.var`).
-0001d1a0: 2048 6f77 6576 6572 2c20 756e 7469 6c20   However, until 
-0001d1b0: 610d 0a20 2020 2020 2020 2072 6570 6f72  a..        repor
-0001d1c0: 7465 6420 6275 6720 6973 2066 6978 6564  ted bug is fixed
-0001d1d0: 2c20 6966 2079 6f75 2061 6c73 6f20 696e  , if you also in
-0001d1e0: 636c 7564 6520 7468 6520 6064 7479 7065  clude the `dtype
-0001d1f0: 6020 7061 7261 6d65 7465 7220 6974 2077  ` parameter it w
-0001d200: 696c 6c20 6265 0d0a 2020 2020 2020 2020  ill be..        
-0001d210: 6170 706c 6965 6420 746f 2074 6865 2072  applied to the r
-0001d220: 6573 756c 742c 206e 6f74 2075 7365 6420  esult, not used 
-0001d230: 746f 2063 6f6d 7075 7465 2074 6865 2076  to compute the v
-0001d240: 6172 6961 6e63 6520 6173 2069 7420 6973  ariance as it is
-0001d250: 2069 6e20 606e 756d 7079 2e76 6172 602e   in `numpy.var`.
-0001d260: 0d0a 0d0a 2020 2020 2020 2020 416c 736f  ....        Also
-0001d270: 206e 6f74 6520 7468 6174 2069 6620 796f   note that if yo
-0001d280: 7520 7573 6520 616e 7920 6f66 2074 6865  u use any of the
-0001d290: 2066 6f6c 6c6f 7769 6e67 204e 756d 5079   following NumPy
-0001d2a0: 2070 6172 616d 6574 6572 7320 616e 6420   parameters and 
-0001d2b0: 616c 736f 0d0a 2020 2020 2020 2020 696e  also..        in
-0001d2c0: 636c 7564 6520 6120 6066 696c 7465 7260  clude a `filter`
-0001d2d0: 206b 6579 776f 7264 2061 7267 756d 656e   keyword argumen
-0001d2e0: 7420 2877 6869 6368 2060 6e75 6d70 792e  t (which `numpy.
-0001d2f0: 7661 7260 2064 6f65 7320 6e6f 7420 6163  var` does not ac
-0001d300: 6365 7074 292c 0d0a 2020 2020 2020 2020  cept),..        
-0001d310: 5269 7074 6162 6c65 2773 2069 6d70 6c65  Riptable's imple
-0001d320: 6d65 6e74 6174 696f 6e20 6f66 2060 7661  mentation of `va
-0001d330: 7260 2077 696c 6c20 6265 2075 7365 6420  r` will be used 
-0001d340: 7769 7468 2074 6865 2066 696c 7465 7220  with the filter 
-0001d350: 6172 6775 6d65 6e74 0d0a 2020 2020 2020  argument..      
-0001d360: 2020 616e 6420 7468 6520 4e75 6d50 7920    and the NumPy 
-0001d370: 7061 7261 6d65 7465 7273 2077 696c 6c20  parameters will 
-0001d380: 6265 2069 676e 6f72 6564 2e0d 0a0d 0a20  be ignored..... 
-0001d390: 2020 2020 2020 2061 7869 7320 3a20 4e6f         axis : No
-0001d3a0: 6e65 206f 7220 696e 7420 6f72 2074 7570  ne or int or tup
-0001d3b0: 6c65 206f 6620 696e 7473 2c20 6f70 7469  le of ints, opti
-0001d3c0: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
-0001d3d0: 2020 4178 6973 206f 7220 6178 6573 2061    Axis or axes a
-0001d3e0: 6c6f 6e67 2077 6869 6368 2074 6865 2076  long which the v
-0001d3f0: 6172 6961 6e63 6520 6973 2063 6f6d 7075  ariance is compu
-0001d400: 7465 642e 2054 6865 2064 6566 6175 6c74  ted. The default
-0001d410: 2069 7320 746f 0d0a 2020 2020 2020 2020   is to..        
-0001d420: 2020 2020 636f 6d70 7574 6520 7468 6520      compute the 
-0001d430: 7661 7269 616e 6365 206f 6620 7468 6520  variance of the 
-0001d440: 666c 6174 7465 6e65 6420 6172 7261 792e  flattened array.
-0001d450: 0d0a 0d0a 2020 2020 2020 2020 6b65 6570  ....        keep
-0001d460: 6469 6d73 203a 2062 6f6f 6c2c 206f 7074  dims : bool, opt
-0001d470: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
-0001d480: 2020 2049 6620 7468 6973 2069 7320 7365     If this is se
-0001d490: 7420 746f 2054 7275 652c 2074 6865 2061  t to True, the a
-0001d4a0: 7865 7320 7768 6963 6820 6172 6520 7265  xes which are re
-0001d4b0: 6475 6365 6420 6172 6520 6c65 6674 2069  duced are left i
-0001d4c0: 6e20 7468 6520 7265 7375 6c74 2061 730d  n the result as.
-0001d4d0: 0a20 2020 2020 2020 2020 2020 2064 696d  .            dim
-0001d4e0: 656e 7369 6f6e 7320 7769 7468 2073 697a  ensions with siz
-0001d4f0: 6520 6f6e 652e 2057 6974 6820 7468 6973  e one. With this
-0001d500: 206f 7074 696f 6e2c 2074 6865 2072 6573   option, the res
-0001d510: 756c 7420 7769 6c6c 2062 726f 6164 6361  ult will broadca
-0001d520: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
-0001d530: 636f 7272 6563 746c 7920 6167 6169 6e73  correctly agains
-0001d540: 7420 7468 6520 696e 7075 7420 6172 7261  t the input arra
-0001d550: 792e 0d0a 0d0a 2020 2020 2020 2020 2020  y.....          
-0001d560: 2020 4966 2074 6865 2064 6566 6175 6c74    If the default
-0001d570: 2076 616c 7565 2069 7320 7061 7373 6564   value is passed
-0001d580: 2c20 7468 656e 2060 6b65 6570 6469 6d73  , then `keepdims
-0001d590: 6020 7769 6c6c 206e 6f74 2062 6520 7061  ` will not be pa
-0001d5a0: 7373 6564 2074 6872 6f75 6768 0d0a 2020  ssed through..  
-0001d5b0: 2020 2020 2020 2020 2020 746f 2074 6865            to the
-0001d5c0: 2060 7661 7260 206d 6574 686f 6420 6f66   `var` method of
-0001d5d0: 2073 7562 2d63 6c61 7373 6573 206f 6620   sub-classes of 
-0001d5e0: 606e 6461 7272 6179 602c 2068 6f77 6576  `ndarray`, howev
-0001d5f0: 6572 2061 6e79 206e 6f6e 2d64 6566 6175  er any non-defau
-0001d600: 6c74 0d0a 2020 2020 2020 2020 2020 2020  lt..            
-0001d610: 7661 6c75 6520 7769 6c6c 2062 652e 2049  value will be. I
-0001d620: 6620 7468 6520 7375 622d 636c 6173 7365  f the sub-classe
-0001d630: 7327 206d 6574 686f 6420 646f 6573 206e  s' method does n
-0001d640: 6f74 2069 6d70 6c65 6d65 6e74 2060 6b65  ot implement `ke
-0001d650: 6570 6469 6d73 602c 2061 6e79 0d0a 2020  epdims`, any..  
-0001d660: 2020 2020 2020 2020 2020 6578 6365 7074            except
-0001d670: 696f 6e73 2077 696c 6c20 6265 2072 6169  ions will be rai
-0001d680: 7365 642e 0d0a 0d0a 2020 2020 2020 2020  sed.....        
-0001d690: 6464 6f66 203a 2069 6e74 2c20 6f70 7469  ddof : int, opti
-0001d6a0: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
-0001d6b0: 2020 2244 656c 7461 2044 6567 7265 6573    "Delta Degrees
-0001d6c0: 206f 6620 4672 6565 646f 6d22 3a20 7468   of Freedom": th
-0001d6d0: 6520 6469 7669 736f 7220 7573 6564 2069  e divisor used i
-0001d6e0: 6e20 7468 6520 6361 6c63 756c 6174 696f  n the calculatio
-0001d6f0: 6e20 6973 0d0a 2020 2020 2020 2020 2020  n is..          
-0001d700: 2020 6060 4e20 2d20 6464 6f66 6060 2c20    ``N - ddof``, 
-0001d710: 7768 6572 6520 6060 4e60 6020 7265 7072  where ``N`` repr
-0001d720: 6573 656e 7473 2074 6865 206e 756d 6265  esents the numbe
-0001d730: 7220 6f66 2065 6c65 6d65 6e74 732e 2042  r of elements. B
-0001d740: 7920 6465 6661 756c 740d 0a20 2020 2020  y default..     
-0001d750: 2020 2020 2020 2060 6464 6f66 6020 6973         `ddof` is
-0001d760: 207a 6572 6f20 666f 7220 7468 6520 4e75   zero for the Nu
-0001d770: 6d50 7920 696d 706c 656d 656e 7461 7469  mPy implementati
-0001d780: 6f6e 2c20 7665 7273 7573 206f 6e65 2066  on, versus one f
-0001d790: 6f72 2074 6865 2052 6970 7461 626c 650d  or the Riptable.
-0001d7a0: 0a20 2020 2020 2020 2020 2020 2069 6d70  .            imp
-0001d7b0: 6c65 6d65 6e74 6174 696f 6e2e 0d0a 0d0a  lementation.....
-0001d7c0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
-0001d7d0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0001d7e0: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
-0001d7f0: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
-0001d800: 285b 312c 2032 2c20 335d 290d 0a20 2020  ([1, 2, 3])..   
-0001d810: 2020 2020 203e 3e3e 2061 2e76 6172 2829       >>> a.var()
-0001d820: 0d0a 2020 2020 2020 2020 312e 300d 0a0d  ..        1.0...
-0001d830: 0a20 2020 2020 2020 2057 6974 6820 6120  .        With a 
-0001d840: 6064 7479 7065 6020 7370 6563 6966 6965  `dtype` specifie
-0001d850: 643a 0d0a 0d0a 2020 2020 2020 2020 3e3e  d:....        >>
-0001d860: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
-0001d870: 6179 285b 312c 2032 2c20 335d 290d 0a20  ay([1, 2, 3]).. 
-0001d880: 2020 2020 2020 203e 3e3e 2061 2e76 6172         >>> a.var
-0001d890: 2864 7479 7065 203d 2072 742e 696e 7433  (dtype = rt.int3
-0001d8a0: 3229 0d0a 2020 2020 2020 2020 310d 0a0d  2)..        1...
-0001d8b0: 0a20 2020 2020 2020 2057 6974 6820 6120  .        With a 
-0001d8c0: 6669 6c74 6572 3a0d 0a0d 0a20 2020 2020  filter:....     
-0001d8d0: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
-0001d8e0: 7374 4172 7261 7928 5b31 2c20 322c 2033  stArray([1, 2, 3
-0001d8f0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-0001d900: 6220 3d20 7274 2e46 6173 7441 7272 6179  b = rt.FastArray
-0001d910: 285b 4661 6c73 652c 2054 7275 652c 2054  ([False, True, T
-0001d920: 7275 655d 290d 0a20 2020 2020 2020 203e  rue])..        >
-0001d930: 3e3e 2061 2e76 6172 2866 696c 7465 7220  >> a.var(filter 
-0001d940: 3d20 6229 0d0a 2020 2020 2020 2020 302e  = b)..        0.
-0001d950: 350d 0a20 2020 2020 2020 2022 2222 0d0a  5..        """..
-0001d960: 0d0a 2020 2020 2020 2020 6b77 6172 6773  ..        kwargs
-0001d970: 203d 2073 656c 662e 5f66 615f 6b65 7977   = self._fa_keyw
-0001d980: 6f72 645f 7772 6170 7065 7228 6669 6c74  ord_wrapper(filt
-0001d990: 6572 3d66 696c 7465 722c 2064 7479 7065  er=filter, dtype
-0001d9a0: 3d64 7479 7065 2c20 6178 6973 3d61 7869  =dtype, axis=axi
-0001d9b0: 732c 206b 6565 7064 696d 733d 6b65 6570  s, keepdims=keep
-0001d9c0: 6469 6d73 2c20 6464 6f66 3d64 646f 662c  dims, ddof=ddof,
-0001d9d0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-0001d9e0: 2020 2020 2020 6966 2066 696c 7465 7220        if filter 
-0001d9f0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0001da00: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001da10: 2073 656c 662e 5f66 615f 6669 6c74 6572   self._fa_filter
-0001da20: 5f77 7261 7070 6572 285f 6676 6172 2c20  _wrapper(_fvar, 
-0001da30: 6669 6c74 6572 3d66 696c 7465 722c 2064  filter=filter, d
-0001da40: 7479 7065 3d64 7479 7065 290d 0a0d 0a20  type=dtype).... 
-0001da50: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0001da60: 6c66 2e5f 7265 6475 6365 5f63 6865 636b  lf._reduce_check
-0001da70: 2852 4544 5543 455f 4655 4e43 5449 4f4e  (REDUCE_FUNCTION
-0001da80: 532e 5245 4455 4345 5f56 4152 2c20 6e70  S.REDUCE_VAR, np
-0001da90: 2e76 6172 2c20 2a2a 6b77 6172 6773 290d  .var, **kwargs).
-0001daa0: 0a0d 0a20 2020 2064 6566 206e 616e 7661  ...    def nanva
-0001dab0: 7228 7365 6c66 2c20 6669 6c74 6572 3d4e  r(self, filter=N
-0001dac0: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
-0001dad0: 2061 7869 733d 4e6f 6e65 2c20 6b65 6570   axis=None, keep
-0001dae0: 6469 6d73 3d4e 6f6e 652c 2064 646f 663d  dims=None, ddof=
-0001daf0: 4e6f 6e65 2c20 2a2a 6b77 6172 6773 2920  None, **kwargs) 
-0001db00: 2d3e 206e 702e 6e75 6d62 6572 3a0d 0a20  -> np.number:.. 
-0001db10: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0001db20: 2020 2020 436f 6d70 7574 6520 7468 6520      Compute the 
-0001db30: 7661 7269 616e 6365 206f 6620 7468 6520  variance of the 
-0001db40: 7661 6c75 6573 2069 6e20 7468 6520 6669  values in the fi
-0001db50: 7273 7420 6172 6775 6d65 6e74 2c20 6967  rst argument, ig
-0001db60: 6e6f 7269 6e67 204e 614e 732e 0d0a 0d0a  noring NaNs.....
-0001db70: 2020 2020 2020 2020 4966 2061 6c6c 2076          If all v
-0001db80: 616c 7565 7320 696e 2074 6865 2066 6972  alues in the fir
-0001db90: 7374 2061 7267 756d 656e 7420 6172 6520  st argument are 
-0001dba0: 4e61 4e73 2c20 6060 4e61 4e60 6020 6973  NaNs, ``NaN`` is
-0001dbb0: 2072 6574 7572 6e65 642e 0d0a 0d0a 2020   returned.....  
-0001dbc0: 2020 2020 2020 5269 7074 6162 6c65 2075        Riptable u
-0001dbd0: 7365 7320 7468 6520 636f 6e76 656e 7469  ses the conventi
-0001dbe0: 6f6e 2074 6861 7420 6060 6464 6f66 203d  on that ``ddof =
-0001dbf0: 2031 6060 2c20 6d65 616e 696e 6720 7468   1``, meaning th
-0001dc00: 6520 7661 7269 616e 6365 206f 660d 0a20  e variance of.. 
-0001dc10: 2020 2020 2020 2060 605b 785f 312c 202e         ``[x_1, .
-0001dc20: 2e2e 2c20 785f 6e5d 6060 2069 7320 6465  .., x_n]`` is de
-0001dc30: 6669 6e65 6420 6279 2060 6076 6172 203d  fined by ``var =
-0001dc40: 2031 2f28 6e20 2d20 3129 202a 2073 756d   1/(n - 1) * sum
-0001dc50: 2878 5f69 202d 206d 6561 6e20 292a 2a32  (x_i - mean )**2
-0001dc60: 6060 2028 6e6f 7465 0d0a 2020 2020 2020  `` (note..      
-0001dc70: 2020 7468 6520 6060 6e20 2d20 3160 6020    the ``n - 1`` 
-0001dc80: 696e 7374 6561 6420 6f66 2060 606e 6060  instead of ``n``
-0001dc90: 292e 2054 6869 7320 6469 6666 6572 7320  ). This differs 
-0001dca0: 6672 6f6d 204e 756d 5079 2c20 7768 6963  from NumPy, whic
-0001dcb0: 6820 7573 6573 2060 6064 646f 6620 3d20  h uses ``ddof = 
-0001dcc0: 3060 6020 6279 0d0a 2020 2020 2020 2020  0`` by..        
-0001dcd0: 6465 6661 756c 742e 0d0a 0d0a 2020 2020  default.....    
-0001dce0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
-0001dcf0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001dd00: 2d2d 0d0a 2020 2020 2020 2020 6669 6c74  --..        filt
-0001dd10: 6572 203a 2061 7272 6179 206f 6620 626f  er : array of bo
-0001dd20: 6f6c 2c20 6465 6661 756c 7420 4e6f 6e65  ol, default None
-0001dd30: 0d0a 2020 2020 2020 2020 2020 2020 5370  ..            Sp
-0001dd40: 6563 6966 6965 7320 7768 6963 6820 656c  ecifies which el
-0001dd50: 656d 656e 7473 2074 6f20 696e 636c 7564  ements to includ
-0001dd60: 6520 696e 2074 6865 2076 6172 6961 6e63  e in the varianc
-0001dd70: 6520 6361 6c63 756c 6174 696f 6e2e 2049  e calculation. I
-0001dd80: 6620 7468 6520 6669 6c74 6572 0d0a 2020  f the filter..  
-0001dd90: 2020 2020 2020 2020 2020 6973 2075 6e69            is uni
-0001dda0: 666f 726d 6c79 2060 6046 616c 7365 6060  formly ``False``
-0001ddb0: 2c20 606e 616e 7661 7260 2072 6574 7572  , `nanvar` retur
-0001ddc0: 6e73 2061 2060 5a65 726f 4469 7669 7369  ns a `ZeroDivisi
-0001ddd0: 6f6e 4572 726f 7260 2e0d 0a0d 0a20 2020  onError`.....   
-0001dde0: 2020 2020 2064 7479 7065 203a 2072 742e       dtype : rt.
-0001ddf0: 6474 7970 6520 6f72 206e 756d 7079 2e64  dtype or numpy.d
-0001de00: 7479 7065 2c20 6465 6661 756c 7420 666c  type, default fl
-0001de10: 6f61 7436 340d 0a20 2020 2020 2020 2020  oat64..         
-0001de20: 2020 2054 6865 2064 6174 6120 7479 7065     The data type
-0001de30: 206f 6620 7468 6520 7265 7375 6c74 2e20   of the result. 
-0001de40: 466f 7220 6120 6046 6173 7441 7272 6179  For a `FastArray
-0001de50: 6020 6060 7860 602c 0d0a 2020 2020 2020  ` ``x``,..      
-0001de60: 2020 2020 2020 6060 782e 6e61 6e76 6172        ``x.nanvar
-0001de70: 2864 7479 7065 203d 206d 795f 7479 7065  (dtype = my_type
-0001de80: 2960 6020 6973 2065 7175 6976 616c 656e  )`` is equivalen
-0001de90: 7420 746f 2060 606d 795f 7479 7065 2878  t to ``my_type(x
-0001dea0: 2e6e 616e 7661 7228 2929 6060 2e0d 0a0d  .nanvar())``....
-0001deb0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-0001dec0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0001ded0: 2d0d 0a20 2020 2020 2020 2073 6361 6c61  -..        scala
-0001dee0: 720d 0a20 2020 2020 2020 2020 2020 2054  r..            T
-0001def0: 6865 2076 6172 6961 6e63 6520 6f66 2074  he variance of t
-0001df00: 6865 2076 616c 7565 732e 0d0a 0d0a 2020  he values.....  
-0001df10: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
-0001df20: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001df30: 0d0a 2020 2020 2020 2020 6e75 6d70 792e  ..        numpy.
-0001df40: 6e61 6e76 6172 0d0a 2020 2020 2020 2020  nanvar..        
-0001df50: 4661 7374 4172 7261 792e 7661 7220 3a20  FastArray.var : 
-0001df60: 436f 6d70 7574 6573 2074 6865 2076 6172  Computes the var
-0001df70: 6961 6e63 6520 6f66 2060 4661 7374 4172  iance of `FastAr
-0001df80: 7261 7960 2076 616c 7565 732e 0d0a 2020  ray` values...  
-0001df90: 2020 2020 2020 4461 7461 7365 742e 6e61        Dataset.na
-0001dfa0: 6e76 6172 203a 2043 6f6d 7075 7465 7320  nvar : Computes 
-0001dfb0: 7468 6520 7661 7269 616e 6365 206f 6620  the variance of 
-0001dfc0: 6e75 6d65 7269 6361 6c20 6044 6174 6173  numerical `Datas
-0001dfd0: 6574 6020 636f 6c75 6d6e 732c 0d0a 2020  et` columns,..  
-0001dfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dff0: 2020 2020 2020 2069 676e 6f72 696e 6720         ignoring 
-0001e000: 4e61 4e73 2e0d 0a20 2020 2020 2020 2047  NaNs...        G
-0001e010: 726f 7570 4279 4f70 732e 6e61 6e76 6172  roupByOps.nanvar
-0001e020: 203a 2043 6f6d 7075 7465 7320 7468 6520   : Computes the 
-0001e030: 7661 7269 616e 6365 206f 6620 6561 6368  variance of each
-0001e040: 2067 726f 7570 2c20 6967 6e6f 7269 6e67   group, ignoring
-0001e050: 204e 614e 732e 2055 7365 6420 6279 0d0a   NaNs. Used by..
-0001e060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e070: 2020 2020 2020 2020 2020 2020 6043 6174              `Cat
-0001e080: 6567 6f72 6963 616c 6020 6f62 6a65 6374  egorical` object
-0001e090: 732e 0d0a 0d0a 2020 2020 2020 2020 4e6f  s.....        No
-0001e0a0: 7465 730d 0a20 2020 2020 2020 202d 2d2d  tes..        ---
-0001e0b0: 2d2d 0d0a 2020 2020 2020 2020 5468 6520  --..        The 
-0001e0c0: 6064 7479 7065 6020 6b65 7977 6f72 6420  `dtype` keyword 
-0001e0d0: 666f 7220 6046 6173 7441 7272 6179 2e6e  for `FastArray.n
-0001e0e0: 616e 7661 7260 2073 7065 6369 6669 6573  anvar` specifies
-0001e0f0: 2074 6865 2064 6174 6120 7479 7065 206f   the data type o
-0001e100: 6620 7468 650d 0a20 2020 2020 2020 2072  f the..        r
-0001e110: 6573 756c 742e 2054 6869 7320 6469 6666  esult. This diff
-0001e120: 6572 7320 6672 6f6d 2060 6e75 6d70 792e  ers from `numpy.
-0001e130: 6e61 6e76 6172 602c 2077 6865 7265 2069  nanvar`, where i
-0001e140: 7420 7370 6563 6966 6965 7320 7468 6520  t specifies the 
-0001e150: 6461 7461 2074 7970 6520 7573 6564 0d0a  data type used..
-0001e160: 2020 2020 2020 2020 746f 2063 6f6d 7075          to compu
-0001e170: 7465 2074 6865 2076 6172 6961 6e63 652e  te the variance.
-0001e180: 0d0a 0d0a 2020 2020 2020 2020 2a2a 4e6f  ....        **No
-0001e190: 7465 7320 6f6e 2055 7369 6e67 204e 756d  tes on Using Num
-0001e1a0: 5079 2050 6172 616d 6574 6572 732a 2a0d  Py Parameters**.
-0001e1b0: 0a0d 0a20 2020 2020 2020 2055 7369 6e67  ...        Using
-0001e1c0: 2061 6e79 206f 6620 7468 6520 666f 6c6c   any of the foll
-0001e1d0: 6f77 696e 6720 4e75 6d50 7920 7061 7261  owing NumPy para
-0001e1e0: 6d65 7465 7273 2077 696c 6c20 6361 7573  meters will caus
-0001e1f0: 6520 5269 7074 6162 6c65 2074 6f20 7377  e Riptable to sw
-0001e200: 6974 6368 2074 6f0d 0a20 2020 2020 2020  itch to..       
-0001e210: 2074 6865 204e 756d 5079 2069 6d70 6c65   the NumPy imple
-0001e220: 6d65 6e74 6174 696f 6e20 6f66 2074 6869  mentation of thi
-0001e230: 7320 6d65 7468 6f64 2028 606e 756d 7079  s method (`numpy
-0001e240: 2e6e 616e 7661 7260 292e 2048 6f77 6576  .nanvar`). Howev
-0001e250: 6572 2c20 756e 7469 6c20 610d 0a20 2020  er, until a..   
-0001e260: 2020 2020 2072 6570 6f72 7465 6420 6275       reported bu
-0001e270: 6720 6973 2066 6978 6564 2c20 6966 2079  g is fixed, if y
-0001e280: 6f75 2061 6c73 6f20 696e 636c 7564 6520  ou also include 
-0001e290: 7468 6520 6064 7479 7065 6020 7061 7261  the `dtype` para
-0001e2a0: 6d65 7465 7220 6974 2077 696c 6c20 6265  meter it will be
-0001e2b0: 0d0a 2020 2020 2020 2020 6170 706c 6965  ..        applie
-0001e2c0: 6420 746f 2074 6865 2072 6573 756c 742c  d to the result,
-0001e2d0: 206e 6f74 2075 7365 6420 746f 2063 6f6d   not used to com
-0001e2e0: 7075 7465 2074 6865 2076 6172 6961 6e63  pute the varianc
-0001e2f0: 6520 6173 2069 7420 6973 2069 6e0d 0a20  e as it is in.. 
-0001e300: 2020 2020 2020 2060 6e75 6d70 792e 6e61         `numpy.na
-0001e310: 6e76 6172 602e 0d0a 0d0a 2020 2020 2020  nvar`.....      
-0001e320: 2020 416c 736f 206e 6f74 6520 7468 6174    Also note that
-0001e330: 2069 6620 796f 7520 7573 6520 616e 7920   if you use any 
-0001e340: 6f66 2074 6865 2066 6f6c 6c6f 7769 6e67  of the following
-0001e350: 204e 756d 5079 2070 6172 616d 6574 6572   NumPy parameter
-0001e360: 7320 616e 6420 616c 736f 0d0a 2020 2020  s and also..    
-0001e370: 2020 2020 696e 636c 7564 6520 6120 6066      include a `f
-0001e380: 696c 7465 7260 206b 6579 776f 7264 2061  ilter` keyword a
-0001e390: 7267 756d 656e 7420 2877 6869 6368 2060  rgument (which `
-0001e3a0: 6e75 6d70 792e 6e61 6e76 6172 6020 646f  numpy.nanvar` do
-0001e3b0: 6573 206e 6f74 2061 6363 6570 7429 2c0d  es not accept),.
-0001e3c0: 0a20 2020 2020 2020 2052 6970 7461 626c  .        Riptabl
-0001e3d0: 6527 7320 696d 706c 656d 656e 7461 7469  e's implementati
-0001e3e0: 6f6e 206f 6620 606e 616e 7661 7260 2077  on of `nanvar` w
-0001e3f0: 696c 6c20 6265 2075 7365 6420 7769 7468  ill be used with
-0001e400: 2074 6865 2066 696c 7465 7220 6172 6775   the filter argu
-0001e410: 6d65 6e74 0d0a 2020 2020 2020 2020 616e  ment..        an
-0001e420: 6420 7468 6520 4e75 6d50 7920 7061 7261  d the NumPy para
-0001e430: 6d65 7465 7273 2077 696c 6c20 6265 2069  meters will be i
-0001e440: 676e 6f72 6564 2e0d 0a0d 0a20 2020 2020  gnored.....     
-0001e450: 2020 2061 7869 7320 3a20 7b69 6e74 2c20     axis : {int, 
-0001e460: 7475 706c 6520 6f66 2069 6e74 2c20 4e6f  tuple of int, No
-0001e470: 6e65 7d2c 206f 7074 696f 6e61 6c0d 0a20  ne}, optional.. 
-0001e480: 2020 2020 2020 2020 2020 2041 7869 7320             Axis 
-0001e490: 6f72 2061 7865 7320 616c 6f6e 6720 7768  or axes along wh
-0001e4a0: 6963 6820 7468 6520 7661 7269 616e 6365  ich the variance
-0001e4b0: 2069 7320 636f 6d70 7574 6564 2e20 5468   is computed. Th
-0001e4c0: 6520 6465 6661 756c 7420 6973 2074 6f0d  e default is to.
-0001e4d0: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
-0001e4e0: 7075 7465 2074 6865 2076 6172 6961 6e63  pute the varianc
-0001e4f0: 6520 6f66 2074 6865 2066 6c61 7474 656e  e of the flatten
-0001e500: 6564 2061 7272 6179 2e0d 0a0d 0a20 2020  ed array.....   
-0001e510: 2020 2020 206b 6565 7064 696d 7320 3a20       keepdims : 
-0001e520: 626f 6f6c 2c20 6f70 7469 6f6e 616c 0d0a  bool, optional..
-0001e530: 2020 2020 2020 2020 2020 2020 4966 2074              If t
-0001e540: 6869 7320 6973 2073 6574 2074 6f20 5472  his is set to Tr
-0001e550: 7565 2c20 7468 6520 6178 6573 2077 6869  ue, the axes whi
-0001e560: 6368 2061 7265 2072 6564 7563 6564 2061  ch are reduced a
-0001e570: 7265 206c 6566 7420 696e 2074 6865 2072  re left in the r
-0001e580: 6573 756c 7420 6173 0d0a 2020 2020 2020  esult as..      
-0001e590: 2020 2020 2020 6469 6d65 6e73 696f 6e73        dimensions
-0001e5a0: 2077 6974 6820 7369 7a65 206f 6e65 2e20   with size one. 
-0001e5b0: 5769 7468 2074 6869 7320 6f70 7469 6f6e  With this option
-0001e5c0: 2c20 7468 6520 7265 7375 6c74 2077 696c  , the result wil
-0001e5d0: 6c20 6272 6f61 6463 6173 740d 0a20 2020  l broadcast..   
-0001e5e0: 2020 2020 2020 2020 2063 6f72 7265 6374           correct
-0001e5f0: 6c79 2061 6761 696e 7374 2074 6865 206f  ly against the o
-0001e600: 7269 6769 6e61 6c20 696e 7075 7420 6172  riginal input ar
-0001e610: 7261 792e 0d0a 0d0a 2020 2020 2020 2020  ray.....        
-0001e620: 6464 6f66 203a 2069 6e74 2c20 6f70 7469  ddof : int, opti
-0001e630: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
-0001e640: 2020 2244 656c 7461 2044 6567 7265 6573    "Delta Degrees
-0001e650: 206f 6620 4672 6565 646f 6d22 3a20 7468   of Freedom": th
-0001e660: 6520 6469 7669 736f 7220 7573 6564 2069  e divisor used i
-0001e670: 6e20 7468 6520 6361 6c63 756c 6174 696f  n the calculatio
-0001e680: 6e20 6973 0d0a 2020 2020 2020 2020 2020  n is..          
-0001e690: 2020 6060 4e20 2d20 6464 6f66 6060 2c20    ``N - ddof``, 
-0001e6a0: 7768 6572 6520 6060 4e60 6020 7265 7072  where ``N`` repr
-0001e6b0: 6573 656e 7473 2074 6865 206e 756d 6265  esents the numbe
-0001e6c0: 7220 6f66 206e 6f6e 2d4e 614e 2065 6c65  r of non-NaN ele
-0001e6d0: 6d65 6e74 732e 2042 790d 0a20 2020 2020  ments. By..     
-0001e6e0: 2020 2020 2020 2064 6566 6175 6c74 2060         default `
-0001e6f0: 6464 6f66 6020 6973 207a 6572 6f20 666f  ddof` is zero fo
-0001e700: 7220 7468 6520 4e75 6d50 7920 696d 706c  r the NumPy impl
-0001e710: 656d 656e 7461 7469 6f6e 2c20 7665 7273  ementation, vers
-0001e720: 7573 206f 6e65 2066 6f72 2074 6865 0d0a  us one for the..
-0001e730: 2020 2020 2020 2020 2020 2020 5269 7074              Ript
-0001e740: 6162 6c65 2069 6d70 6c65 6d65 6e74 6174  able implementat
-0001e750: 696f 6e2e 0d0a 0d0a 2020 2020 2020 2020  ion.....        
-0001e760: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
-0001e770: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-0001e780: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
-0001e790: 6173 7441 7272 6179 285b 312c 2032 2c20  astArray([1, 2, 
-0001e7a0: 332c 2072 742e 6e61 6e5d 290d 0a20 2020  3, rt.nan])..   
-0001e7b0: 2020 2020 203e 3e3e 2061 2e6e 616e 7661       >>> a.nanva
-0001e7c0: 7228 290d 0a20 2020 2020 2020 2031 2e30  r()..        1.0
-0001e7d0: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-0001e7e0: 2061 2060 6474 7970 6560 2073 7065 6369   a `dtype` speci
-0001e7f0: 6669 6564 3a0d 0a0d 0a20 2020 2020 2020  fied:....       
-0001e800: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-0001e810: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
-0001e820: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
-0001e830: 2020 3e3e 3e20 612e 6e61 6e76 6172 2864    >>> a.nanvar(d
-0001e840: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
-0001e850: 0d0a 2020 2020 2020 2020 310d 0a0d 0a20  ..        1.... 
-0001e860: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
-0001e870: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
-0001e880: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-0001e890: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
-0001e8a0: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
-0001e8b0: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
-0001e8c0: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
-0001e8d0: 7275 652c 2054 7275 652c 2054 7275 655d  rue, True, True]
-0001e8e0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0001e8f0: 2e6e 616e 7661 7228 6669 6c74 6572 203d  .nanvar(filter =
-0001e900: 2062 290d 0a20 2020 2020 2020 2030 2e35   b)..        0.5
-0001e910: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
-0001e920: 0a20 2020 2020 2020 206b 7761 7267 7320  .        kwargs 
-0001e930: 3d20 7365 6c66 2e5f 6661 5f6b 6579 776f  = self._fa_keywo
-0001e940: 7264 5f77 7261 7070 6572 2866 696c 7465  rd_wrapper(filte
-0001e950: 723d 6669 6c74 6572 2c20 6474 7970 653d  r=filter, dtype=
-0001e960: 6474 7970 652c 2061 7869 733d 6178 6973  dtype, axis=axis
-0001e970: 2c20 6b65 6570 6469 6d73 3d6b 6565 7064  , keepdims=keepd
-0001e980: 696d 732c 2064 646f 663d 6464 6f66 2c20  ims, ddof=ddof, 
-0001e990: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-0001e9a0: 2020 2020 2069 6620 6669 6c74 6572 2069       if filter i
-0001e9b0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-0001e9c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001e9d0: 7365 6c66 2e5f 6661 5f66 696c 7465 725f  self._fa_filter_
-0001e9e0: 7772 6170 7065 7228 5f66 6e61 6e76 6172  wrapper(_fnanvar
-0001e9f0: 2c20 6669 6c74 6572 3d66 696c 7465 722c  , filter=filter,
-0001ea00: 2064 7479 7065 3d64 7479 7065 290d 0a0d   dtype=dtype)...
-0001ea10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001ea20: 7365 6c66 2e5f 7265 6475 6365 5f63 6865  self._reduce_che
-0001ea30: 636b 2852 4544 5543 455f 4655 4e43 5449  ck(REDUCE_FUNCTI
-0001ea40: 4f4e 532e 5245 4455 4345 5f4e 414e 5641  ONS.REDUCE_NANVA
-0001ea50: 522c 206e 702e 6e61 6e76 6172 2c20 2a2a  R, np.nanvar, **
-0001ea60: 6b77 6172 6773 290d 0a0d 0a20 2020 2064  kwargs)....    d
-0001ea70: 6566 2073 7464 2873 656c 662c 2066 696c  ef std(self, fil
-0001ea80: 7465 723d 4e6f 6e65 2c20 6474 7970 653d  ter=None, dtype=
-0001ea90: 4e6f 6e65 2c20 6178 6973 3d4e 6f6e 652c  None, axis=None,
-0001eaa0: 206b 6565 7064 696d 733d 4e6f 6e65 2c20   keepdims=None, 
-0001eab0: 6464 6f66 3d4e 6f6e 652c 202a 2a6b 7761  ddof=None, **kwa
-0001eac0: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
-0001ead0: 723a 0d0a 2020 2020 2020 2020 2222 220d  r:..        """.
-0001eae0: 0a20 2020 2020 2020 2043 6f6d 7075 7465  .        Compute
-0001eaf0: 2074 6865 2073 7461 6e64 6172 6420 6465   the standard de
-0001eb00: 7669 6174 696f 6e20 6f66 2074 6865 2076  viation of the v
-0001eb10: 616c 7565 7320 696e 2074 6865 2066 6972  alues in the fir
-0001eb20: 7374 2061 7267 756d 656e 742e 0d0a 0d0a  st argument.....
-0001eb30: 2020 2020 2020 2020 5269 7074 6162 6c65          Riptable
-0001eb40: 2075 7365 7320 7468 6520 636f 6e76 656e   uses the conven
-0001eb50: 7469 6f6e 2074 6861 7420 6060 6464 6f66  tion that ``ddof
-0001eb60: 203d 2031 6060 2c20 6d65 616e 696e 6720   = 1``, meaning 
-0001eb70: 7468 6520 7374 616e 6461 7264 2064 6576  the standard dev
-0001eb80: 6961 7469 6f6e 206f 660d 0a20 2020 2020  iation of..     
-0001eb90: 2020 2060 605b 785f 312c 202e 2e2e 2c20     ``[x_1, ..., 
-0001eba0: 785f 6e5d 6060 2069 7320 6465 6669 6e65  x_n]`` is define
-0001ebb0: 6420 6279 2060 6073 7464 203d 2031 2f28  d by ``std = 1/(
-0001ebc0: 6e20 2d20 3129 202a 2073 756d 2878 5f69  n - 1) * sum(x_i
-0001ebd0: 202d 206d 6561 6e20 292a 2a32 6060 2028   - mean )**2`` (
-0001ebe0: 6e6f 7465 0d0a 2020 2020 2020 2020 7468  note..        th
-0001ebf0: 6520 6060 6e20 2d20 3160 6020 696e 7374  e ``n - 1`` inst
-0001ec00: 6561 6420 6f66 2060 606e 6060 292e 2054  ead of ``n``). T
-0001ec10: 6869 7320 6469 6666 6572 7320 6672 6f6d  his differs from
-0001ec20: 204e 756d 5079 2c20 7768 6963 6820 7573   NumPy, which us
-0001ec30: 6573 2060 6064 646f 6620 3d20 3060 6020  es ``ddof = 0`` 
-0001ec40: 6279 0d0a 2020 2020 2020 2020 6465 6661  by..        defa
-0001ec50: 756c 742e 0d0a 0d0a 2020 2020 2020 2020  ult.....        
-0001ec60: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-0001ec70: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-0001ec80: 2020 2020 2020 2020 6669 6c74 6572 203a          filter :
-0001ec90: 2061 7272 6179 206f 6620 626f 6f6c 2c20   array of bool, 
-0001eca0: 6465 6661 756c 7420 4e6f 6e65 0d0a 2020  default None..  
-0001ecb0: 2020 2020 2020 2020 2020 5370 6563 6966            Specif
-0001ecc0: 6965 7320 7768 6963 6820 656c 656d 656e  ies which elemen
-0001ecd0: 7473 2074 6f20 696e 636c 7564 6520 696e  ts to include in
-0001ece0: 2074 6865 2073 7461 6e64 6172 6420 6465   the standard de
-0001ecf0: 7669 6174 696f 6e20 6361 6c63 756c 6174  viation calculat
-0001ed00: 696f 6e2e 2049 660d 0a20 2020 2020 2020  ion. If..       
-0001ed10: 2020 2020 2074 6865 2066 696c 7465 7220       the filter 
-0001ed20: 6973 2075 6e69 666f 726d 6c79 2060 6046  is uniformly ``F
-0001ed30: 616c 7365 6060 2c20 6073 7464 6020 7265  alse``, `std` re
-0001ed40: 7475 726e 7320 6120 605a 6572 6f44 6976  turns a `ZeroDiv
-0001ed50: 6973 696f 6e45 7272 6f72 602e 0d0a 0d0a  isionError`.....
-0001ed60: 2020 2020 2020 2020 6474 7970 6520 3a20          dtype : 
-0001ed70: 7274 2e64 7479 7065 206f 7220 6e75 6d70  rt.dtype or nump
-0001ed80: 792e 6474 7970 652c 2064 6566 6175 6c74  y.dtype, default
-0001ed90: 2066 6c6f 6174 3634 0d0a 2020 2020 2020   float64..      
-0001eda0: 2020 2020 2020 5468 6520 6461 7461 2074        The data t
-0001edb0: 7970 6520 6f66 2074 6865 2072 6573 756c  ype of the resul
-0001edc0: 742e 2046 6f72 2061 2060 4661 7374 4172  t. For a `FastAr
-0001edd0: 7261 7960 2060 6078 6060 2c0d 0a20 2020  ray` ``x``,..   
-0001ede0: 2020 2020 2020 2020 2060 6078 2e73 7464           ``x.std
-0001edf0: 2864 7479 7065 203d 206d 795f 7479 7065  (dtype = my_type
-0001ee00: 2960 6020 6973 2065 7175 6976 616c 656e  )`` is equivalen
-0001ee10: 7420 746f 2060 606d 795f 7479 7065 2878  t to ``my_type(x
-0001ee20: 2e73 7464 2829 2960 602e 0d0a 0d0a 2020  .std())``.....  
-0001ee30: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-0001ee40: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-0001ee50: 2020 2020 2020 2020 7363 616c 6172 0d0a          scalar..
-0001ee60: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-0001ee70: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
-0001ee80: 6f6e 206f 6620 7468 6520 7661 6c75 6573  on of the values
-0001ee90: 2e0d 0a0d 0a20 2020 2020 2020 2053 6565  .....        See
-0001eea0: 2041 6c73 6f0d 0a20 2020 2020 2020 202d   Also..        -
-0001eeb0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0001eec0: 206e 756d 7079 2e73 7464 0d0a 2020 2020   numpy.std..    
-0001eed0: 2020 2020 4661 7374 4172 7261 792e 6e61      FastArray.na
-0001eee0: 6e73 7464 203a 2043 6f6d 7075 7465 7320  nstd : Computes 
-0001eef0: 7468 6520 7374 616e 6461 7264 2064 6576  the standard dev
-0001ef00: 6961 7469 6f6e 206f 6620 6046 6173 7441  iation of `FastA
-0001ef10: 7272 6179 6020 7661 6c75 6573 2c20 6967  rray` values, ig
-0001ef20: 6e6f 7269 6e67 0d0a 2020 2020 2020 2020  noring..        
-0001ef30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ef40: 2020 204e 614e 732e 0d0a 2020 2020 2020     NaNs...      
-0001ef50: 2020 4461 7461 7365 742e 7374 6420 3a20    Dataset.std : 
-0001ef60: 436f 6d70 7574 6573 2074 6865 2073 7461  Computes the sta
-0001ef70: 6e64 6172 6420 6465 7669 6174 696f 6e20  ndard deviation 
-0001ef80: 6f66 206e 756d 6572 6963 616c 2060 4461  of numerical `Da
-0001ef90: 7461 7365 7460 2063 6f6c 756d 6e73 2e0d  taset` columns..
-0001efa0: 0a20 2020 2020 2020 2047 726f 7570 4279  .        GroupBy
-0001efb0: 4f70 732e 7374 6420 3a20 436f 6d70 7574  Ops.std : Comput
-0001efc0: 6573 2074 6865 2073 7461 6e64 6172 6420  es the standard 
-0001efd0: 6465 7669 6174 696f 6e20 6f66 2065 6163  deviation of eac
-0001efe0: 6820 6772 6f75 702e 2055 7365 6420 6279  h group. Used by
-0001eff0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001f000: 2020 2020 2020 2020 2020 2060 4361 7465             `Cate
-0001f010: 676f 7269 6361 6c60 206f 626a 6563 7473  gorical` objects
-0001f020: 2e0d 0a0d 0a20 2020 2020 2020 204e 6f74  .....        Not
-0001f030: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-0001f040: 2d0d 0a20 2020 2020 2020 2054 6865 2060  -..        The `
-0001f050: 6474 7970 6560 206b 6579 776f 7264 2066  dtype` keyword f
-0001f060: 6f72 2060 4661 7374 4172 7261 792e 7374  or `FastArray.st
-0001f070: 6460 2073 7065 6369 6669 6573 2074 6865  d` specifies the
-0001f080: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
-0001f090: 6520 7265 7375 6c74 2e0d 0a20 2020 2020  e result...     
-0001f0a0: 2020 2054 6869 7320 6469 6666 6572 7320     This differs 
-0001f0b0: 6672 6f6d 2060 6e75 6d70 792e 7374 6460  from `numpy.std`
-0001f0c0: 2c20 7768 6572 6520 6974 2073 7065 6369  , where it speci
-0001f0d0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
-0001f0e0: 7065 2075 7365 6420 746f 2063 6f6d 7075  pe used to compu
-0001f0f0: 7465 0d0a 2020 2020 2020 2020 7468 6520  te..        the 
-0001f100: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
-0001f110: 6f6e 2e0d 0a0d 0a20 2020 2020 2020 202a  on.....        *
-0001f120: 2a4e 6f74 6573 206f 6e20 5573 696e 6720  *Notes on Using 
-0001f130: 4e75 6d50 7920 5061 7261 6d65 7465 7273  NumPy Parameters
-0001f140: 2a2a 0d0a 0d0a 2020 2020 2020 2020 5573  **....        Us
-0001f150: 696e 6720 616e 7920 6f66 2074 6865 2066  ing any of the f
-0001f160: 6f6c 6c6f 7769 6e67 204e 756d 5079 2070  ollowing NumPy p
-0001f170: 6172 616d 6574 6572 7320 7769 6c6c 2063  arameters will c
-0001f180: 6175 7365 2052 6970 7461 626c 6520 746f  ause Riptable to
-0001f190: 2073 7769 7463 6820 746f 0d0a 2020 2020   switch to..    
-0001f1a0: 2020 2020 7468 6520 4e75 6d50 7920 696d      the NumPy im
-0001f1b0: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
-0001f1c0: 7468 6973 206d 6574 686f 6420 2860 6e75  this method (`nu
-0001f1d0: 6d70 792e 7374 6460 292e 2048 6f77 6576  mpy.std`). Howev
-0001f1e0: 6572 2c20 756e 7469 6c20 610d 0a20 2020  er, until a..   
-0001f1f0: 2020 2020 2072 6570 6f72 7465 6420 6275       reported bu
-0001f200: 6720 6973 2066 6978 6564 2c20 6966 2079  g is fixed, if y
-0001f210: 6f75 2061 6c73 6f20 696e 636c 7564 6520  ou also include 
-0001f220: 7468 6520 6064 7479 7065 6020 7061 7261  the `dtype` para
-0001f230: 6d65 7465 7220 6974 2077 696c 6c20 6265  meter it will be
-0001f240: 0d0a 2020 2020 2020 2020 6170 706c 6965  ..        applie
-0001f250: 6420 746f 2074 6865 2072 6573 756c 742c  d to the result,
-0001f260: 206e 6f74 2075 7365 6420 746f 2063 6f6d   not used to com
-0001f270: 7075 7465 2074 6865 2076 6172 6961 6e63  pute the varianc
-0001f280: 6520 6173 2069 7420 6973 2069 6e0d 0a20  e as it is in.. 
-0001f290: 2020 2020 2020 2060 6e75 6d70 792e 7374         `numpy.st
-0001f2a0: 6460 2e0d 0a0d 0a20 2020 2020 2020 2041  d`.....        A
-0001f2b0: 6c73 6f20 6e6f 7465 2074 6861 7420 6966  lso note that if
-0001f2c0: 2079 6f75 2075 7365 2061 6e79 206f 6620   you use any of 
-0001f2d0: 7468 6520 666f 6c6c 6f77 696e 6720 4e75  the following Nu
-0001f2e0: 6d50 7920 7061 7261 6d65 7465 7273 2061  mPy parameters a
-0001f2f0: 6e64 2061 6c73 6f0d 0a20 2020 2020 2020  nd also..       
-0001f300: 2069 6e63 6c75 6465 2061 2060 6669 6c74   include a `filt
-0001f310: 6572 6020 6b65 7977 6f72 6420 6172 6775  er` keyword argu
-0001f320: 6d65 6e74 2028 7768 6963 6820 606e 756d  ment (which `num
-0001f330: 7079 2e73 7464 6020 646f 6573 206e 6f74  py.std` does not
-0001f340: 2061 6363 6570 7429 2c0d 0a20 2020 2020   accept),..     
-0001f350: 2020 2052 6970 7461 626c 6527 7320 696d     Riptable's im
-0001f360: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
-0001f370: 6073 7464 6020 7769 6c6c 2062 6520 7573  `std` will be us
-0001f380: 6564 2077 6974 6820 7468 6520 6669 6c74  ed with the filt
-0001f390: 6572 2061 7267 756d 656e 740d 0a20 2020  er argument..   
-0001f3a0: 2020 2020 2061 6e64 2074 6865 204e 756d       and the Num
-0001f3b0: 5079 2070 6172 616d 6574 6572 7320 7769  Py parameters wi
-0001f3c0: 6c6c 2062 6520 6967 6e6f 7265 642e 0d0a  ll be ignored...
-0001f3d0: 0d0a 2020 2020 2020 2020 6178 6973 203a  ..        axis :
-0001f3e0: 204e 6f6e 6520 6f72 2069 6e74 206f 7220   None or int or 
-0001f3f0: 7475 706c 6520 6f66 2069 6e74 732c 206f  tuple of ints, o
-0001f400: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
-0001f410: 2020 2020 2041 7869 7320 6f72 2061 7865       Axis or axe
-0001f420: 7320 616c 6f6e 6720 7768 6963 6820 7468  s along which th
-0001f430: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
-0001f440: 7469 6f6e 2069 7320 636f 6d70 7574 6564  tion is computed
-0001f450: 2e20 5468 650d 0a20 2020 2020 2020 2020  . The..         
-0001f460: 2020 2064 6566 6175 6c74 2069 7320 746f     default is to
-0001f470: 2063 6f6d 7075 7465 2074 6865 2073 7461   compute the sta
-0001f480: 6e64 6172 6420 6465 7669 6174 696f 6e20  ndard deviation 
-0001f490: 6f66 2074 6865 2066 6c61 7474 656e 6564  of the flattened
-0001f4a0: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
-0001f4b0: 2020 2020 2020 202e 2e20 7665 7273 696f         .. versio
-0001f4c0: 6e61 6464 6564 3a3a 2031 2e37 2e30 0d0a  nadded:: 1.7.0..
-0001f4d0: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
-0001f4e0: 2074 6869 7320 6973 2061 2074 7570 6c65   this is a tuple
-0001f4f0: 206f 6620 696e 7473 2c20 6120 7374 616e   of ints, a stan
-0001f500: 6461 7264 2064 6576 6961 7469 6f6e 2069  dard deviation i
-0001f510: 7320 7065 7266 6f72 6d65 6420 6f76 6572  s performed over
-0001f520: 206d 756c 7469 706c 650d 0a20 2020 2020   multiple..     
-0001f530: 2020 2020 2020 2061 7865 732c 2069 6e73         axes, ins
-0001f540: 7465 6164 206f 6620 6120 7369 6e67 6c65  tead of a single
-0001f550: 2061 7869 7320 6f72 2061 6c6c 2074 6865   axis or all the
-0001f560: 2061 7865 7320 6173 2062 6566 6f72 652e   axes as before.
-0001f570: 0d0a 0d0a 2020 2020 2020 2020 6b65 6570  ....        keep
-0001f580: 6469 6d73 203a 2062 6f6f 6c2c 206f 7074  dims : bool, opt
-0001f590: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
-0001f5a0: 2020 2049 6620 7468 6973 2069 7320 7365     If this is se
-0001f5b0: 7420 746f 2054 7275 652c 2074 6865 2061  t to True, the a
-0001f5c0: 7865 7320 7768 6963 6820 6172 6520 7265  xes which are re
-0001f5d0: 6475 6365 6420 6172 6520 6c65 6674 2069  duced are left i
-0001f5e0: 6e20 7468 6520 7265 7375 6c74 2061 730d  n the result as.
-0001f5f0: 0a20 2020 2020 2020 2020 2020 2064 696d  .            dim
-0001f600: 656e 7369 6f6e 7320 7769 7468 2073 697a  ensions with siz
-0001f610: 6520 6f6e 652e 2057 6974 6820 7468 6973  e one. With this
-0001f620: 206f 7074 696f 6e2c 2074 6865 2072 6573   option, the res
-0001f630: 756c 7420 7769 6c6c 2062 726f 6164 6361  ult will broadca
-0001f640: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
-0001f650: 636f 7272 6563 746c 7920 6167 6169 6e73  correctly agains
-0001f660: 7420 7468 6520 696e 7075 7420 6172 7261  t the input arra
-0001f670: 792e 0d0a 0d0a 2020 2020 2020 2020 2020  y.....          
-0001f680: 2020 4966 2074 6865 2064 6566 6175 6c74    If the default
-0001f690: 2076 616c 7565 2069 7320 7061 7373 6564   value is passed
-0001f6a0: 2c20 7468 656e 2060 6b65 6570 6469 6d73  , then `keepdims
-0001f6b0: 6020 7769 6c6c 206e 6f74 2062 6520 7061  ` will not be pa
-0001f6c0: 7373 6564 2074 6872 6f75 6768 0d0a 2020  ssed through..  
-0001f6d0: 2020 2020 2020 2020 2020 746f 2074 6865            to the
-0001f6e0: 2060 7374 6460 206d 6574 686f 6420 6f66   `std` method of
-0001f6f0: 2073 7562 2d63 6c61 7373 6573 206f 6620   sub-classes of 
-0001f700: 606e 6461 7272 6179 602c 2068 6f77 6576  `ndarray`, howev
-0001f710: 6572 2061 6e79 206e 6f6e 2d64 6566 6175  er any non-defau
-0001f720: 6c74 0d0a 2020 2020 2020 2020 2020 2020  lt..            
-0001f730: 7661 6c75 6520 7769 6c6c 2062 652e 2049  value will be. I
-0001f740: 6620 7468 6520 7375 622d 636c 6173 7327  f the sub-class'
-0001f750: 206d 6574 686f 6420 646f 6573 206e 6f74   method does not
-0001f760: 2069 6d70 6c65 6d65 6e74 2060 6b65 6570   implement `keep
-0001f770: 6469 6d73 602c 0d0a 2020 2020 2020 2020  dims`,..        
-0001f780: 2020 2020 616e 7920 6578 6365 7074 696f      any exceptio
-0001f790: 6e73 2077 696c 6c20 6265 2072 6169 7365  ns will be raise
-0001f7a0: 642e 0d0a 0d0a 2020 2020 2020 2020 6464  d.....        dd
-0001f7b0: 6f66 203a 2069 6e74 2c20 6f70 7469 6f6e  of : int, option
-0001f7c0: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
-0001f7d0: 2244 656c 7461 2044 6567 7265 6573 206f  "Delta Degrees o
-0001f7e0: 6620 4672 6565 646f 6d22 3a20 7468 6520  f Freedom": the 
-0001f7f0: 6469 7669 736f 7220 7573 6564 2069 6e20  divisor used in 
-0001f800: 7468 6520 6361 6c63 756c 6174 696f 6e20  the calculation 
-0001f810: 6973 0d0a 2020 2020 2020 2020 2020 2020  is..            
-0001f820: 6060 4e20 2d20 6464 6f66 6060 2c20 7768  ``N - ddof``, wh
-0001f830: 6572 6520 6060 4e60 6020 7265 7072 6573  ere ``N`` repres
-0001f840: 656e 7473 2074 6865 206e 756d 6265 7220  ents the number 
-0001f850: 6f66 2065 6c65 6d65 6e74 732e 2042 7920  of elements. By 
-0001f860: 6465 6661 756c 740d 0a20 2020 2020 2020  default..       
-0001f870: 2020 2020 2060 6464 6f66 6020 6973 207a       `ddof` is z
-0001f880: 6572 6f20 666f 7220 7468 6520 4e75 6d50  ero for the NumP
-0001f890: 7920 696d 706c 656d 656e 7461 7469 6f6e  y implementation
-0001f8a0: 2c20 7665 7273 7573 206f 6e65 2066 6f72  , versus one for
-0001f8b0: 2074 6865 0d0a 2020 2020 2020 2020 2020   the..          
-0001f8c0: 2020 5269 7074 6162 6c65 2069 6d70 6c65    Riptable imple
-0001f8d0: 6d65 6e74 6174 696f 6e2e 0d0a 0d0a 2020  mentation.....  
-0001f8e0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
-0001f8f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001f900: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-0001f910: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-0001f920: 312c 2032 2c20 335d 290d 0a20 2020 2020  1, 2, 3])..     
-0001f930: 2020 203e 3e3e 2061 2e73 7464 2829 0d0a     >>> a.std()..
-0001f940: 2020 2020 2020 2020 312e 300d 0a0d 0a20          1.0.... 
-0001f950: 2020 2020 2020 2057 6974 6820 6120 6064         With a `d
-0001f960: 7479 7065 6020 7370 6563 6966 6965 643a  type` specified:
-0001f970: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-0001f980: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
-0001f990: 285b 312c 2032 2c20 335d 290d 0a20 2020  ([1, 2, 3])..   
-0001f9a0: 2020 2020 203e 3e3e 2061 2e73 7464 2864       >>> a.std(d
-0001f9b0: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
-0001f9c0: 0d0a 2020 2020 2020 2020 310d 0a0d 0a20  ..        1.... 
-0001f9d0: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
-0001f9e0: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
-0001f9f0: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-0001fa00: 4172 7261 7928 5b31 2c20 322c 2033 5d29  Array([1, 2, 3])
-0001fa10: 0d0a 2020 2020 2020 2020 3e3e 3e20 6220  ..        >>> b 
-0001fa20: 3d20 7274 2e46 4128 5b46 616c 7365 2c20  = rt.FA([False, 
-0001fa30: 5472 7565 2c20 5472 7565 5d29 0d0a 2020  True, True])..  
-0001fa40: 2020 2020 2020 3e3e 3e20 612e 7374 6428        >>> a.std(
-0001fa50: 6669 6c74 6572 203d 2062 290d 0a20 2020  filter = b)..   
-0001fa60: 2020 2020 2030 2e37 3037 3130 3637 3831       0.707106781
-0001fa70: 3138 3635 3437 360d 0a20 2020 2020 2020  1865476..       
-0001fa80: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
-0001fa90: 6b77 6172 6773 203d 2073 656c 662e 5f66  kwargs = self._f
-0001faa0: 615f 6b65 7977 6f72 645f 7772 6170 7065  a_keyword_wrappe
-0001fab0: 7228 6669 6c74 6572 3d66 696c 7465 722c  r(filter=filter,
-0001fac0: 2064 7479 7065 3d64 7479 7065 2c20 6178   dtype=dtype, ax
-0001fad0: 6973 3d61 7869 732c 206b 6565 7064 696d  is=axis, keepdim
-0001fae0: 733d 6b65 6570 6469 6d73 2c20 6464 6f66  s=keepdims, ddof
-0001faf0: 3d64 646f 662c 202a 2a6b 7761 7267 7329  =ddof, **kwargs)
-0001fb00: 0d0a 0d0a 2020 2020 2020 2020 6966 2066  ....        if f
-0001fb10: 696c 7465 7220 6973 206e 6f74 204e 6f6e  ilter is not Non
-0001fb20: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001fb30: 7265 7475 726e 2073 656c 662e 5f66 615f  return self._fa_
-0001fb40: 6669 6c74 6572 5f77 7261 7070 6572 285f  filter_wrapper(_
-0001fb50: 6673 7464 2c20 6669 6c74 6572 3d66 696c  fstd, filter=fil
-0001fb60: 7465 722c 2064 7479 7065 3d64 7479 7065  ter, dtype=dtype
-0001fb70: 290d 0a0d 0a20 2020 2020 2020 2072 6574  )....        ret
-0001fb80: 7572 6e20 7365 6c66 2e5f 7265 6475 6365  urn self._reduce
-0001fb90: 5f63 6865 636b 2852 4544 5543 455f 4655  _check(REDUCE_FU
-0001fba0: 4e43 5449 4f4e 532e 5245 4455 4345 5f53  NCTIONS.REDUCE_S
-0001fbb0: 5444 2c20 6e70 2e73 7464 2c20 2a2a 6b77  TD, np.std, **kw
-0001fbc0: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
-0001fbd0: 206e 616e 7374 6428 7365 6c66 2c20 6669   nanstd(self, fi
-0001fbe0: 6c74 6572 3d4e 6f6e 652c 2064 7479 7065  lter=None, dtype
-0001fbf0: 3d4e 6f6e 652c 2061 7869 733d 4e6f 6e65  =None, axis=None
-0001fc00: 2c20 6b65 6570 6469 6d73 3d4e 6f6e 652c  , keepdims=None,
-0001fc10: 2064 646f 663d 4e6f 6e65 2c20 2a2a 6b77   ddof=None, **kw
-0001fc20: 6172 6773 2920 2d3e 206e 702e 6e75 6d62  args) -> np.numb
-0001fc30: 6572 3a0d 0a20 2020 2020 2020 2022 2222  er:..        """
-0001fc40: 0d0a 2020 2020 2020 2020 436f 6d70 7574  ..        Comput
-0001fc50: 6520 7468 6520 7374 616e 6461 7264 2064  e the standard d
-0001fc60: 6576 6961 7469 6f6e 206f 6620 7468 6520  eviation of the 
-0001fc70: 7661 6c75 6573 2069 6e20 7468 6520 6669  values in the fi
-0001fc80: 7273 7420 6172 6775 6d65 6e74 2c20 6967  rst argument, ig
-0001fc90: 6e6f 7269 6e67 204e 614e 732e 0d0a 0d0a  noring NaNs.....
-0001fca0: 2020 2020 2020 2020 4966 2061 6c6c 2076          If all v
-0001fcb0: 616c 7565 7320 696e 2074 6865 2066 6972  alues in the fir
-0001fcc0: 7374 2061 7267 756d 656e 7420 6172 6520  st argument are 
-0001fcd0: 4e61 4e73 2c20 6060 4e61 4e60 6020 6973  NaNs, ``NaN`` is
-0001fce0: 2072 6574 7572 6e65 642e 0d0a 0d0a 2020   returned.....  
-0001fcf0: 2020 2020 2020 5269 7074 6162 6c65 2075        Riptable u
-0001fd00: 7365 7320 7468 6520 636f 6e76 656e 7469  ses the conventi
-0001fd10: 6f6e 2074 6861 7420 6060 6464 6f66 203d  on that ``ddof =
-0001fd20: 2031 6060 2c20 6d65 616e 696e 6720 7468   1``, meaning th
-0001fd30: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
-0001fd40: 7469 6f6e 206f 660d 0a20 2020 2020 2020  tion of..       
-0001fd50: 2060 605b 785f 312c 202e 2e2e 2c20 785f   ``[x_1, ..., x_
-0001fd60: 6e5d 6060 2069 7320 6465 6669 6e65 6420  n]`` is defined 
-0001fd70: 6279 2060 6073 7464 203d 2031 2f28 6e20  by ``std = 1/(n 
-0001fd80: 2d20 3129 202a 2073 756d 2878 5f69 202d  - 1) * sum(x_i -
-0001fd90: 206d 6561 6e20 292a 2a32 6060 2028 6e6f   mean )**2`` (no
-0001fda0: 7465 0d0a 2020 2020 2020 2020 7468 6520  te..        the 
-0001fdb0: 6060 6e20 2d20 3160 6020 696e 7374 6561  ``n - 1`` instea
-0001fdc0: 6420 6f66 2060 606e 6060 292e 2054 6869  d of ``n``). Thi
-0001fdd0: 7320 6469 6666 6572 7320 6672 6f6d 204e  s differs from N
-0001fde0: 756d 5079 2c20 7768 6963 6820 7573 6573  umPy, which uses
-0001fdf0: 2060 6064 646f 6620 3d20 3060 6020 6279   ``ddof = 0`` by
-0001fe00: 0d0a 2020 2020 2020 2020 6465 6661 756c  ..        defaul
-0001fe10: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
-0001fe20: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-0001fe30: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-0001fe40: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
-0001fe50: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
-0001fe60: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
-0001fe70: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
-0001fe80: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
-0001fe90: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
-0001fea0: 6865 2073 7461 6e64 6172 6420 6465 7669  he standard devi
-0001feb0: 6174 696f 6e20 6361 6c63 756c 6174 696f  ation calculatio
-0001fec0: 6e2e 2049 660d 0a20 2020 2020 2020 2020  n. If..         
-0001fed0: 2020 2074 6865 2066 696c 7465 7220 6973     the filter is
-0001fee0: 2075 6e69 666f 726d 6c79 2060 6046 616c   uniformly ``Fal
-0001fef0: 7365 6060 2c20 606e 616e 7374 6460 2072  se``, `nanstd` r
-0001ff00: 6574 7572 6e73 2061 2060 5a65 726f 4469  eturns a `ZeroDi
-0001ff10: 7669 7369 6f6e 4572 726f 7260 2e0d 0a0d  visionError`....
-0001ff20: 0a20 2020 2020 2020 2064 7479 7065 203a  .        dtype :
-0001ff30: 2072 742e 6474 7970 6520 6f72 206e 756d   rt.dtype or num
-0001ff40: 7079 2e64 7479 7065 2c20 6465 6661 756c  py.dtype, defaul
-0001ff50: 7420 666c 6f61 7436 340d 0a20 2020 2020  t float64..     
-0001ff60: 2020 2020 2020 2054 6865 2064 6174 6120         The data 
-0001ff70: 7479 7065 206f 6620 7468 6520 7265 7375  type of the resu
-0001ff80: 6c74 2e20 466f 7220 6120 6046 6173 7441  lt. For a `FastA
-0001ff90: 7272 6179 6020 6060 7860 602c 0d0a 2020  rray` ``x``,..  
-0001ffa0: 2020 2020 2020 2020 2020 6060 782e 6e61            ``x.na
-0001ffb0: 6e73 7464 2864 7479 7065 203d 206d 795f  nstd(dtype = my_
-0001ffc0: 7479 7065 2960 6020 6973 2065 7175 6976  type)`` is equiv
-0001ffd0: 616c 656e 7420 746f 2060 606d 795f 7479  alent to ``my_ty
-0001ffe0: 7065 2878 2e6e 616e 7374 6428 2929 6060  pe(x.nanstd())``
-0001fff0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
-00020000: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-00020010: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2073  -----..        s
-00020020: 6361 6c61 720d 0a20 2020 2020 2020 2020  calar..         
-00020030: 2020 2054 6865 2073 7461 6e64 6172 6420     The standard 
-00020040: 6465 7669 6174 696f 6e20 6f66 2074 6865  deviation of the
-00020050: 2076 616c 7565 732e 0d0a 0d0a 2020 2020   values.....    
-00020060: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
-00020070: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-00020080: 2020 2020 2020 2020 6e75 6d70 792e 6e61          numpy.na
-00020090: 6e73 7464 0d0a 2020 2020 2020 2020 4661  nstd..        Fa
-000200a0: 7374 4172 7261 792e 7374 6420 3a20 436f  stArray.std : Co
-000200b0: 6d70 7574 6573 2074 6865 2073 7461 6e64  mputes the stand
-000200c0: 6172 6420 6465 7669 6174 696f 6e20 6f66  ard deviation of
-000200d0: 2060 4661 7374 4172 7261 7960 2076 616c   `FastArray` val
-000200e0: 7565 732e 0d0a 2020 2020 2020 2020 4461  ues...        Da
-000200f0: 7461 7365 742e 6e61 6e73 7464 203a 2043  taset.nanstd : C
-00020100: 6f6d 7075 7465 7320 7468 6520 7374 616e  omputes the stan
-00020110: 6461 7264 2064 6576 6961 7469 6f6e 206f  dard deviation o
-00020120: 6620 6e75 6d65 7269 6361 6c20 6044 6174  f numerical `Dat
-00020130: 6173 6574 6020 636f 6c75 6d6e 732c 0d0a  aset` columns,..
-00020140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020150: 2020 2020 2020 2020 2069 676e 6f72 696e           ignorin
-00020160: 6720 4e61 4e73 2e0d 0a20 2020 2020 2020  g NaNs...       
-00020170: 2047 726f 7570 4279 4f70 732e 6e61 6e73   GroupByOps.nans
-00020180: 7464 203a 2043 6f6d 7075 7465 7320 7468  td : Computes th
-00020190: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
-000201a0: 7469 6f6e 206f 6620 6561 6368 2067 726f  tion of each gro
-000201b0: 7570 2c20 6967 6e6f 7269 6e67 204e 614e  up, ignoring NaN
-000201c0: 732e 0d0a 2020 2020 2020 2020 2020 2020  s...            
-000201d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000201e0: 5573 6564 2062 7920 6043 6174 6567 6f72  Used by `Categor
-000201f0: 6963 616c 6020 6f62 6a65 6374 732e 0d0a  ical` objects...
-00020200: 0d0a 2020 2020 2020 2020 4e6f 7465 730d  ..        Notes.
-00020210: 0a20 2020 2020 2020 202d 2d2d 2d2d 0d0a  .        -----..
-00020220: 2020 2020 2020 2020 5468 6520 6064 7479          The `dty
-00020230: 7065 6020 6b65 7977 6f72 6420 666f 7220  pe` keyword for 
-00020240: 6046 6173 7441 7272 6179 2e6e 616e 7374  `FastArray.nanst
-00020250: 6460 2073 7065 6369 6669 6573 2074 6865  d` specifies the
-00020260: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
-00020270: 650d 0a20 2020 2020 2020 2072 6573 756c  e..        resul
-00020280: 742e 2054 6869 7320 6469 6666 6572 7320  t. This differs 
-00020290: 6672 6f6d 2060 6e75 6d70 792e 6e61 6e73  from `numpy.nans
-000202a0: 7464 602c 2077 6865 7265 2069 7420 7370  td`, where it sp
-000202b0: 6563 6966 6965 7320 7468 6520 6461 7461  ecifies the data
-000202c0: 2074 7970 6520 7573 6564 0d0a 2020 2020   type used..    
-000202d0: 2020 2020 746f 2063 6f6d 7075 7465 2074      to compute t
-000202e0: 6865 2073 7461 6e64 6172 6420 6465 7669  he standard devi
-000202f0: 6174 696f 6e2e 0d0a 0d0a 2020 2020 2020  ation.....      
-00020300: 2020 2a2a 4e6f 7465 7320 6f6e 2055 7369    **Notes on Usi
-00020310: 6e67 204e 756d 5079 2050 6172 616d 6574  ng NumPy Paramet
-00020320: 6572 732a 2a0d 0a0d 0a20 2020 2020 2020  ers**....       
-00020330: 2055 7369 6e67 2061 6e79 206f 6620 7468   Using any of th
-00020340: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
-00020350: 7920 7061 7261 6d65 7465 7273 2077 696c  y parameters wil
-00020360: 6c20 6361 7573 6520 5269 7074 6162 6c65  l cause Riptable
-00020370: 2074 6f20 7377 6974 6368 2074 6f0d 0a20   to switch to.. 
-00020380: 2020 2020 2020 2074 6865 204e 756d 5079         the NumPy
-00020390: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
-000203a0: 6f66 2074 6869 7320 6d65 7468 6f64 2028  of this method (
-000203b0: 606e 756d 7079 2e6e 616e 7374 6460 292e  `numpy.nanstd`).
-000203c0: 2048 6f77 6576 6572 2c20 756e 7469 6c20   However, until 
-000203d0: 610d 0a20 2020 2020 2020 2072 6570 6f72  a..        repor
-000203e0: 7465 6420 6275 6720 6973 2066 6978 6564  ted bug is fixed
-000203f0: 2c20 6966 2079 6f75 2061 6c73 6f20 696e  , if you also in
-00020400: 636c 7564 6520 7468 6520 6064 7479 7065  clude the `dtype
-00020410: 6020 7061 7261 6d65 7465 7220 6974 2077  ` parameter it w
-00020420: 696c 6c20 6265 0d0a 2020 2020 2020 2020  ill be..        
-00020430: 6170 706c 6965 6420 746f 2074 6865 2072  applied to the r
-00020440: 6573 756c 742c 206e 6f74 2075 7365 6420  esult, not used 
-00020450: 746f 2063 6f6d 7075 7465 2074 6865 2076  to compute the v
-00020460: 6172 6961 6e63 6520 6173 2069 7420 6973  ariance as it is
-00020470: 2069 6e0d 0a20 2020 2020 2020 2060 6e75   in..        `nu
-00020480: 6d70 792e 6e61 6e73 7464 602e 0d0a 0d0a  mpy.nanstd`.....
-00020490: 2020 2020 2020 2020 416c 736f 206e 6f74          Also not
-000204a0: 6520 7468 6174 2069 6620 796f 7520 7573  e that if you us
-000204b0: 6520 616e 7920 6f66 2074 6865 2066 6f6c  e any of the fol
-000204c0: 6c6f 7769 6e67 204e 756d 5079 2070 6172  lowing NumPy par
-000204d0: 616d 6574 6572 7320 616e 6420 616c 736f  ameters and also
-000204e0: 0d0a 2020 2020 2020 2020 696e 636c 7564  ..        includ
-000204f0: 6520 6120 6066 696c 7465 7260 206b 6579  e a `filter` key
-00020500: 776f 7264 2061 7267 756d 656e 7420 2877  word argument (w
-00020510: 6869 6368 2060 6e75 6d70 792e 6e61 6e73  hich `numpy.nans
-00020520: 7464 6020 646f 6573 206e 6f74 2061 6363  td` does not acc
-00020530: 6570 7429 2c0d 0a20 2020 2020 2020 2052  ept),..        R
-00020540: 6970 7461 626c 6527 7320 696d 706c 656d  iptable's implem
-00020550: 656e 7461 7469 6f6e 206f 6620 606e 616e  entation of `nan
-00020560: 7374 6460 2077 696c 6c20 6265 2075 7365  std` will be use
-00020570: 6420 7769 7468 2074 6865 2066 696c 7465  d with the filte
-00020580: 7220 6172 6775 6d65 6e74 0d0a 2020 2020  r argument..    
-00020590: 2020 2020 616e 6420 7468 6520 4e75 6d50      and the NumP
-000205a0: 7920 7061 7261 6d65 7465 7273 2077 696c  y parameters wil
-000205b0: 6c20 6265 2069 676e 6f72 6564 2e0d 0a0d  l be ignored....
-000205c0: 0a20 2020 2020 2020 2061 7869 7320 3a20  .        axis : 
-000205d0: 7b69 6e74 2c20 7475 706c 6520 6f66 2069  {int, tuple of i
-000205e0: 6e74 2c20 4e6f 6e65 7d2c 206f 7074 696f  nt, None}, optio
-000205f0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
-00020600: 2041 7869 7320 6f72 2061 7865 7320 616c   Axis or axes al
-00020610: 6f6e 6720 7768 6963 6820 7468 6520 7374  ong which the st
-00020620: 616e 6461 7264 2064 6576 6961 7469 6f6e  andard deviation
-00020630: 2069 7320 636f 6d70 7574 6564 2e20 5468   is computed. Th
-00020640: 6520 6465 6661 756c 7420 6973 0d0a 2020  e default is..  
-00020650: 2020 2020 2020 2020 2020 746f 2063 6f6d            to com
-00020660: 7075 7465 2074 6865 2073 7461 6e64 6172  pute the standar
-00020670: 6420 6465 7669 6174 696f 6e20 6f66 2074  d deviation of t
-00020680: 6865 2066 6c61 7474 656e 6564 2061 7272  he flattened arr
-00020690: 6179 2e0d 0a0d 0a20 2020 2020 2020 206b  ay.....        k
-000206a0: 6565 7064 696d 7320 3a20 626f 6f6c 2c20  eepdims : bool, 
-000206b0: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
-000206c0: 2020 2020 2020 4966 2074 6869 7320 6973        If this is
-000206d0: 2073 6574 2074 6f20 5472 7565 2c20 7468   set to True, th
-000206e0: 6520 6178 6573 2077 6869 6368 2061 7265  e axes which are
-000206f0: 2072 6564 7563 6564 2061 7265 206c 6566   reduced are lef
-00020700: 7420 696e 2074 6865 2072 6573 756c 7420  t in the result 
-00020710: 6173 0d0a 2020 2020 2020 2020 2020 2020  as..            
-00020720: 6469 6d65 6e73 696f 6e73 2077 6974 6820  dimensions with 
-00020730: 7369 7a65 206f 6e65 2e20 5769 7468 2074  size one. With t
-00020740: 6869 7320 6f70 7469 6f6e 2c20 7468 6520  his option, the 
-00020750: 7265 7375 6c74 2077 696c 6c20 6272 6f61  result will broa
-00020760: 6463 6173 740d 0a20 2020 2020 2020 2020  dcast..         
-00020770: 2020 2063 6f72 7265 6374 6c79 2061 6761     correctly aga
-00020780: 696e 7374 2074 6865 206f 7269 6769 6e61  inst the origina
-00020790: 6c20 696e 7075 7420 6172 7261 792e 0d0a  l input array...
-000207a0: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
-000207b0: 2074 6869 7320 7661 6c75 6520 6973 2061   this value is a
-000207c0: 6e79 7468 696e 6720 6275 7420 7468 6520  nything but the 
-000207d0: 6465 6661 756c 7420 6974 2069 7320 7061  default it is pa
-000207e0: 7373 6564 2074 6872 6f75 6768 2061 732d  ssed through as-
-000207f0: 6973 2074 6f20 7468 650d 0a20 2020 2020  is to the..     
-00020800: 2020 2020 2020 2072 656c 6576 616e 7420         relevant 
-00020810: 6675 6e63 7469 6f6e 7320 6f66 2074 6865  functions of the
-00020820: 2073 7562 2d63 6c61 7373 6573 2e20 4966   sub-classes. If
-00020830: 2074 6865 7365 2066 756e 6374 696f 6e73   these functions
-00020840: 2064 6f20 6e6f 7420 6861 7665 2061 0d0a   do not have a..
-00020850: 2020 2020 2020 2020 2020 2020 606b 6565              `kee
-00020860: 7064 696d 7360 206b 7761 7267 2c20 6120  pdims` kwarg, a 
-00020870: 5275 6e74 696d 6545 7272 6f72 2077 696c  RuntimeError wil
-00020880: 6c20 6265 2072 6169 7365 642e 0d0a 0d0a  l be raised.....
-00020890: 2020 2020 2020 2020 6464 6f66 203a 2069          ddof : i
-000208a0: 6e74 2c20 6f70 7469 6f6e 616c 0d0a 2020  nt, optional..  
-000208b0: 2020 2020 2020 2020 2020 2244 656c 7461            "Delta
-000208c0: 2044 6567 7265 6573 206f 6620 4672 6565   Degrees of Free
-000208d0: 646f 6d22 3a20 7468 6520 6469 7669 736f  dom": the diviso
-000208e0: 7220 7573 6564 2069 6e20 7468 6520 6361  r used in the ca
-000208f0: 6c63 756c 6174 696f 6e20 6973 0d0a 2020  lculation is..  
-00020900: 2020 2020 2020 2020 2020 6060 4e20 2d20            ``N - 
-00020910: 6464 6f66 6060 2c20 7768 6572 6520 6060  ddof``, where ``
-00020920: 4e60 6020 7265 7072 6573 656e 7473 2074  N`` represents t
-00020930: 6865 206e 756d 6265 7220 6f66 2065 6c65  he number of ele
-00020940: 6d65 6e74 732e 2042 7920 6465 6661 756c  ments. By defaul
-00020950: 740d 0a20 2020 2020 2020 2020 2020 2060  t..            `
-00020960: 6464 6f66 6020 6973 207a 6572 6f20 666f  ddof` is zero fo
-00020970: 7220 7468 6520 4e75 6d50 7920 696d 706c  r the NumPy impl
-00020980: 656d 656e 7461 7469 6f6e 2c20 7665 7273  ementation, vers
-00020990: 7573 206f 6e65 2066 6f72 2074 6865 0d0a  us one for the..
-000209a0: 2020 2020 2020 2020 2020 2020 5269 7074              Ript
-000209b0: 6162 6c65 2069 6d70 6c65 6d65 6e74 6174  able implementat
-000209c0: 696f 6e2e 0d0a 0d0a 2020 2020 2020 2020  ion.....        
-000209d0: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
-000209e0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-000209f0: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
-00020a00: 6173 7441 7272 6179 285b 312c 2032 2c20  astArray([1, 2, 
-00020a10: 332c 2072 742e 6e61 6e5d 290d 0a20 2020  3, rt.nan])..   
-00020a20: 2020 2020 203e 3e3e 2061 2e6e 616e 7374       >>> a.nanst
-00020a30: 6428 290d 0a20 2020 2020 2020 2031 2e30  d()..        1.0
-00020a40: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-00020a50: 2061 2060 6474 7970 6560 2073 7065 6369   a `dtype` speci
-00020a60: 6669 6564 3a0d 0a0d 0a20 2020 2020 2020  fied:....       
-00020a70: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-00020a80: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
-00020a90: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
-00020aa0: 2020 3e3e 3e20 612e 6e61 6e73 7464 2864    >>> a.nanstd(d
-00020ab0: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
-00020ac0: 0d0a 2020 2020 2020 2020 310d 0a0d 0a20  ..        1.... 
-00020ad0: 2020 2020 2020 2057 6974 6820 6669 6c74         With filt
-00020ae0: 6572 3a0d 0a0d 0a20 2020 2020 2020 203e  er:....        >
-00020af0: 3e3e 2061 203d 2072 742e 4661 7374 4172  >> a = rt.FastAr
-00020b00: 7261 7928 5b31 2c20 322c 2033 2c20 7274  ray([1, 2, 3, rt
-00020b10: 2e6e 616e 5d29 0d0a 2020 2020 2020 2020  .nan])..        
-00020b20: 3e3e 3e20 6220 3d20 7274 2e46 6173 7441  >>> b = rt.FastA
-00020b30: 7272 6179 285b 4661 6c73 652c 2054 7275  rray([False, Tru
-00020b40: 652c 2054 7275 652c 2054 7275 655d 290d  e, True, True]).
-00020b50: 0a20 2020 2020 2020 203e 3e3e 2061 2e6e  .        >>> a.n
-00020b60: 616e 7374 6428 6669 6c74 6572 203d 2062  anstd(filter = b
-00020b70: 290d 0a20 2020 2020 2020 2030 2e37 3037  )..        0.707
-00020b80: 3130 3637 3831 3138 3635 3437 360d 0a20  1067811865476.. 
-00020b90: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00020ba0: 2020 2020 6b77 6172 6773 203d 2073 656c      kwargs = sel
-00020bb0: 662e 5f66 615f 6b65 7977 6f72 645f 7772  f._fa_keyword_wr
-00020bc0: 6170 7065 7228 6669 6c74 6572 3d66 696c  apper(filter=fil
-00020bd0: 7465 722c 2064 7479 7065 3d64 7479 7065  ter, dtype=dtype
-00020be0: 2c20 6178 6973 3d61 7869 732c 206b 6565  , axis=axis, kee
-00020bf0: 7064 696d 733d 6b65 6570 6469 6d73 2c20  pdims=keepdims, 
-00020c00: 6464 6f66 3d64 646f 662c 202a 2a6b 7761  ddof=ddof, **kwa
-00020c10: 7267 7329 0d0a 0d0a 2020 2020 2020 2020  rgs)....        
-00020c20: 6966 2066 696c 7465 7220 6973 206e 6f74  if filter is not
-00020c30: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00020c40: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00020c50: 5f66 615f 6669 6c74 6572 5f77 7261 7070  _fa_filter_wrapp
-00020c60: 6572 285f 666e 616e 7374 642c 2066 696c  er(_fnanstd, fil
-00020c70: 7465 723d 6669 6c74 6572 2c20 6474 7970  ter=filter, dtyp
-00020c80: 653d 6474 7970 6529 0d0a 0d0a 2020 2020  e=dtype)....    
-00020c90: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00020ca0: 5f72 6564 7563 655f 6368 6563 6b28 5245  _reduce_check(RE
-00020cb0: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00020cc0: 4544 5543 455f 4e41 4e53 5444 2c20 6e70  EDUCE_NANSTD, np
-00020cd0: 2e6e 616e 7374 642c 202a 2a6b 7761 7267  .nanstd, **kwarg
-00020ce0: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
-00020cf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020d00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020d10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020d30: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-00020d40: 206e 616e 6d69 6e28 7365 6c66 2c20 2a2a   nanmin(self, **
-00020d50: 6b77 6172 6773 2920 2d3e 206e 702e 6e75  kwargs) -> np.nu
-00020d60: 6d62 6572 3a0d 0a20 2020 2020 2020 2072  mber:..        r
-00020d70: 6574 7572 6e20 7365 6c66 2e5f 7265 6475  eturn self._redu
-00020d80: 6365 5f63 6865 636b 2852 4544 5543 455f  ce_check(REDUCE_
-00020d90: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-00020da0: 5f4e 414e 4d49 4e2c 206e 702e 6e61 6e6d  _NANMIN, np.nanm
-00020db0: 696e 2c20 2a2a 6b77 6172 6773 290d 0a0d  in, **kwargs)...
-00020dc0: 0a20 2020 2064 6566 206e 616e 6d61 7828  .    def nanmax(
-00020dd0: 7365 6c66 2c20 2a2a 6b77 6172 6773 2920  self, **kwargs) 
-00020de0: 2d3e 206e 702e 6e75 6d62 6572 3a0d 0a20  -> np.number:.. 
-00020df0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00020e00: 6c66 2e5f 7265 6475 6365 5f63 6865 636b  lf._reduce_check
-00020e10: 2852 4544 5543 455f 4655 4e43 5449 4f4e  (REDUCE_FUNCTION
-00020e20: 532e 5245 4455 4345 5f4e 414e 4d41 582c  S.REDUCE_NANMAX,
-00020e30: 206e 702e 6e61 6e6d 6178 2c20 2a2a 6b77   np.nanmax, **kw
-00020e40: 6172 6773 290d 0a0d 0a20 2020 2023 202d  args)....    # -
-00020e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020e90: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00020ea0: 6465 6620 6172 676d 696e 2873 656c 662c  def argmin(self,
-00020eb0: 202a 2a6b 7761 7267 7329 202d 3e20 696e   **kwargs) -> in
-00020ec0: 743a 0d0a 2020 2020 2020 2020 7265 7475  t:..        retu
-00020ed0: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
-00020ee0: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
-00020ef0: 4354 494f 4e53 2e52 4544 5543 455f 4152  CTIONS.REDUCE_AR
-00020f00: 474d 494e 2c20 6e70 2e61 7267 6d69 6e2c  GMIN, np.argmin,
-00020f10: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-00020f20: 2020 6465 6620 6172 676d 6178 2873 656c    def argmax(sel
-00020f30: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
-00020f40: 696e 743a 0d0a 2020 2020 2020 2020 7265  int:..        re
-00020f50: 7475 726e 2073 656c 662e 5f72 6564 7563  turn self._reduc
-00020f60: 655f 6368 6563 6b28 5245 4455 4345 5f46  e_check(REDUCE_F
-00020f70: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
-00020f80: 4152 474d 4158 2c20 6e70 2e61 7267 6d61  ARGMAX, np.argma
-00020f90: 782c 202a 2a6b 7761 7267 7329 0d0a 0d0a  x, **kwargs)....
-00020fa0: 2020 2020 6465 6620 6e61 6e61 7267 6d69      def nanargmi
-00020fb0: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
-00020fc0: 2920 2d3e 2069 6e74 3a0d 0a20 2020 2020  ) -> int:..     
-00020fd0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00020fe0: 7265 6475 6365 5f63 6865 636b 2852 4544  reduce_check(RED
-00020ff0: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
-00021000: 4455 4345 5f4e 414e 4152 474d 494e 2c20  DUCE_NANARGMIN, 
-00021010: 6e70 2e6e 616e 6172 676d 696e 2c20 2a2a  np.nanargmin, **
-00021020: 6b77 6172 6773 290d 0a0d 0a20 2020 2064  kwargs)....    d
-00021030: 6566 206e 616e 6172 676d 6178 2873 656c  ef nanargmax(sel
-00021040: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
-00021050: 696e 743a 0d0a 2020 2020 2020 2020 7265  int:..        re
-00021060: 7475 726e 2073 656c 662e 5f72 6564 7563  turn self._reduc
-00021070: 655f 6368 6563 6b28 5245 4455 4345 5f46  e_check(REDUCE_F
-00021080: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
-00021090: 4e41 4e41 5247 4d41 582c 206e 702e 6e61  NANARGMAX, np.na
-000210a0: 6e61 7267 6d61 782c 202a 2a6b 7761 7267  nargmax, **kwarg
-000210b0: 7329 0d0a 0d0a 2020 2020 2323 2323 2323  s)....    ######
-000210c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000210d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000210e0: 2323 2323 2323 230d 0a20 2020 2023 2053  #######..    # S
-000210f0: 7461 7473 2f4d 4c20 7365 6374 696f 6e0d  tats/ML section.
-00021100: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
-00021110: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00021120: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00021130: 2323 0d0a 2020 2020 6465 6620 6e6f 726d  ##..    def norm
-00021140: 616c 697a 655f 7a73 636f 7265 2873 656c  alize_zscore(sel
-00021150: 6629 202d 3e20 4661 7374 4172 7261 793a  f) -> FastArray:
-00021160: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00021170: 206e 6f72 6d61 6c69 7a65 5f7a 7363 6f72   normalize_zscor
-00021180: 6528 7365 6c66 290d 0a0d 0a20 2020 2064  e(self)....    d
-00021190: 6566 206e 6f72 6d61 6c69 7a65 5f6d 696e  ef normalize_min
-000211a0: 6d61 7828 7365 6c66 2920 2d3e 2046 6173  max(self) -> Fas
-000211b0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-000211c0: 2072 6574 7572 6e20 6e6f 726d 616c 697a   return normaliz
-000211d0: 655f 6d69 6e6d 6178 2873 656c 6629 0d0a  e_minmax(self)..
-000211e0: 0d0a 2020 2020 2323 2323 2323 2323 2323  ..    ##########
-000211f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00021200: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00021210: 2323 230d 0a20 2020 2023 2042 6173 6963  ###..    # Basic
-00021220: 4d61 7468 2073 6563 7469 6f6e 2028 746f  Math section (to
-00021230: 2062 6520 686f 6f6b 6564 2061 7420 4320   be hooked at C 
-00021240: 6c65 7665 6c20 6e6f 7729 0d0a 2020 2020  level now)..    
-00021250: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00021260: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00021270: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
-00021280: 2020 2023 2064 6566 205f 5f61 6464 5f5f     # def __add__
-00021290: 2873 656c 662c 2076 616c 7565 293a 2020  (self, value):  
-000212a0: 2072 6573 756c 743d 7263 2e42 6173 6963   result=rc.Basic
-000212b0: 4d61 7468 5477 6f49 6e70 7574 7328 2873  MathTwoInputs((s
-000212c0: 656c 662c 2076 616c 7565 292c 2031 2c20  elf, value), 1, 
-000212d0: 3029 3b20 7265 7375 6c74 3d20 7265 7375  0); result= resu
-000212e0: 6c74 2069 6620 7265 7375 6c74 2069 7320  lt if result is 
-000212f0: 6e6f 7420 4e6f 6e65 2065 6c73 6520 6e70  not None else np
-00021300: 2e61 6464 2873 656c 662c 7661 6c75 6529  .add(self,value)
-00021310: 3b20 7265 7475 726e 2072 6573 756c 740d  ; return result.
-00021320: 0a20 2020 2023 2064 6566 205f 5f61 6464  .    # def __add
-00021330: 5f5f 2873 656c 662c 2076 616c 7565 293a  __(self, value):
-00021340: 2020 2072 6574 7572 6e20 7263 2e42 6173     return rc.Bas
-00021350: 6963 4d61 7468 5477 6f49 6e70 7574 7328  icMathTwoInputs(
-00021360: 2873 656c 662c 2076 616c 7565 292c 2031  (self, value), 1
-00021370: 2c20 3029 0d0a 0d0a 2020 2020 4070 726f  , 0)....    @pro
-00021380: 7065 7274 790d 0a20 2020 2040 5f75 7365  perty..    @_use
-00021390: 5f61 7574 6f63 6f6d 706c 6574 655f 706c  _autocomplete_pl
-000213a0: 6163 6568 6f6c 6465 7228 3029 0d0a 2020  aceholder(0)..  
-000213b0: 2020 6465 6620 6372 6328 7365 6c66 2920    def crc(self) 
-000213c0: 2d3e 2069 6e74 3a0d 0a20 2020 2020 2020  -> int:..       
-000213d0: 2022 2222 0d0a 2020 2020 2020 2020 4361   """..        Ca
-000213e0: 6c63 756c 6174 6520 7468 6520 3332 2d62  lculate the 32-b
-000213f0: 6974 2043 5243 206f 6620 7468 6520 6461  it CRC of the da
-00021400: 7461 2069 6e20 7468 6973 2061 7272 6179  ta in this array
-00021410: 2075 7369 6e67 2074 6865 2043 6173 7461   using the Casta
-00021420: 676e 6f6c 6920 706f 6c79 6e6f 6d69 616c  gnoli polynomial
-00021430: 2028 4352 4333 3243 292e 0d0a 0d0a 2020   (CRC32C).....  
-00021440: 2020 2020 2020 5468 6973 2066 756e 6374        This funct
-00021450: 696f 6e20 646f 6573 206e 6f74 2063 6f6e  ion does not con
-00021460: 7369 6465 7220 7468 6520 6172 7261 7927  sider the array'
-00021470: 7320 7368 6170 6520 6f72 2073 7472 6964  s shape or strid
-00021480: 6573 2077 6865 6e20 6361 6c63 756c 6174  es when calculat
-00021490: 696e 6720 7468 6520 4352 432c 0d0a 2020  ing the CRC,..  
-000214a0: 2020 2020 2020 6974 2073 696d 706c 7920        it simply 
-000214b0: 6361 6c63 756c 6174 6573 2074 6865 2043  calculates the C
-000214c0: 5243 2076 616c 7565 206f 7665 7220 7468  RC value over th
-000214d0: 6520 656e 7469 7265 2062 7566 6665 7220  e entire buffer 
-000214e0: 6465 7363 7269 6265 6420 6279 2074 6865  described by the
-000214f0: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
-00021500: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
-00021510: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00021520: 2020 2020 2020 2063 616e 2062 6520 7573         can be us
-00021530: 6564 2074 6f20 636f 6d70 6172 6520 7477  ed to compare tw
-00021540: 6f20 6172 7261 7973 2066 6f72 2073 7472  o arrays for str
-00021550: 7563 7475 7261 6c20 6571 7561 6c69 7479  uctural equality
-00021560: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-00021570: 3d20 6172 616e 6765 2831 3030 290d 0a20  = arange(100).. 
-00021580: 2020 2020 2020 203e 3e3e 2062 203d 2061         >>> b = a
-00021590: 7261 6e67 6528 3130 302e 3029 0d0a 2020  range(100.0)..  
-000215a0: 2020 2020 2020 3e3e 3e20 612e 6372 6320        >>> a.crc 
-000215b0: 3d3d 2062 2e63 7263 0d0a 2020 2020 2020  == b.crc..      
-000215c0: 2020 4661 6c73 650d 0a20 2020 2020 2020    False..       
-000215d0: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
-000215e0: 7475 726e 2063 7263 3332 6328 7365 6c66  turn crc32c(self
-000215f0: 290d 0a0d 0a20 2020 2023 2074 6f64 6f3a  )....    # todo:
-00021600: 2072 616e 6765 2f6e 616e 7261 6e67 650d   range/nanrange.
-00021610: 0a20 2020 2023 2074 6f64 6f3a 2073 7461  .    # todo: sta
-00021620: 7473 2f6e 616e 7374 6174 730d 0a0d 0a20  ts/nanstats.... 
-00021630: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
-00021640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-00021670: 2020 6465 6620 756e 6971 7565 280d 0a20    def unique(.. 
-00021680: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
-00021690: 2020 2020 2020 7265 7475 726e 5f69 6e64        return_ind
-000216a0: 6578 3a20 626f 6f6c 203d 2046 616c 7365  ex: bool = False
-000216b0: 2c0d 0a20 2020 2020 2020 2072 6574 7572  ,..        retur
-000216c0: 6e5f 696e 7665 7273 653a 2062 6f6f 6c20  n_inverse: bool 
-000216d0: 3d20 4661 6c73 652c 0d0a 2020 2020 2020  = False,..      
-000216e0: 2020 7265 7475 726e 5f63 6f75 6e74 733a    return_counts:
-000216f0: 2062 6f6f 6c20 3d20 4661 6c73 652c 0d0a   bool = False,..
-00021700: 2020 2020 2020 2020 736f 7274 6564 3a20          sorted: 
-00021710: 626f 6f6c 203d 2054 7275 652c 0d0a 2020  bool = True,..  
-00021720: 2020 2020 2020 6c65 783a 2062 6f6f 6c20        lex: bool 
-00021730: 3d20 4661 6c73 652c 0d0a 2020 2020 2020  = False,..      
-00021740: 2020 6474 7970 653a 204f 7074 696f 6e61    dtype: Optiona
-00021750: 6c5b 556e 696f 6e5b 7374 722c 206e 702e  l[Union[str, np.
-00021760: 6474 7970 655d 5d20 3d20 4e6f 6e65 2c0d  dtype]] = None,.
-00021770: 0a20 2020 2020 2020 2066 696c 7465 723a  .        filter:
-00021780: 204f 7074 696f 6e61 6c5b 6e70 2e6e 6461   Optional[np.nda
-00021790: 7272 6179 5d20 3d20 4e6f 6e65 2c0d 0a20  rray] = None,.. 
-000217a0: 2020 2020 2020 202a 2a6b 7761 7267 732c         **kwargs,
-000217b0: 0d0a 2020 2020 2920 2d3e 2055 6e69 6f6e  ..    ) -> Union
-000217c0: 5b22 4661 7374 4172 7261 7922 2c20 5475  ["FastArray", Tu
-000217d0: 706c 655b 2246 6173 7441 7272 6179 222c  ple["FastArray",
-000217e0: 202e 2e2e 5d2c 204c 6973 745b 2246 6173   ...], List["Fas
-000217f0: 7441 7272 6179 225d 2c20 7475 706c 655d  tArray"], tuple]
-00021800: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00021810: 2020 2020 2020 2020 4669 6e64 2074 6865          Find the
-00021820: 2075 6e69 7175 6520 656c 656d 656e 7473   unique elements
-00021830: 206f 6620 616e 2061 7272 6179 206f 7220   of an array or 
-00021840: 7468 6520 756e 6971 7565 2063 6f6d 6269  the unique combi
-00021850: 6e61 7469 6f6e 7320 6f66 2065 6c65 6d65  nations of eleme
-00021860: 6e74 7320 7769 7468 0d0a 2020 2020 2020  nts with..      
-00021870: 2020 636f 7272 6573 706f 6e64 696e 6720    corresponding 
-00021880: 696e 6469 6365 7320 696e 206d 756c 7469  indices in multi
-00021890: 706c 6520 6172 7261 7973 2e0d 0a0d 0a20  ple arrays..... 
-000218a0: 2020 2020 2020 2053 6565 203a 6d65 7468         See :meth
-000218b0: 3a60 7269 7074 6162 6c65 2e75 6e69 7175  :`riptable.uniqu
-000218c0: 6560 2066 6f72 2066 756c 6c20 646f 6375  e` for full docu
-000218d0: 6d65 6e74 6174 696f 6e2e 0d0a 2020 2020  mentation...    
-000218e0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000218f0: 2072 6574 7572 6e20 756e 6971 7565 280d   return unique(.
-00021900: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00021910: 662c 0d0a 2020 2020 2020 2020 2020 2020  f,..            
-00021920: 7265 7475 726e 5f69 6e64 6578 3d72 6574  return_index=ret
-00021930: 7572 6e5f 696e 6465 782c 0d0a 2020 2020  urn_index,..    
-00021940: 2020 2020 2020 2020 7265 7475 726e 5f69          return_i
-00021950: 6e76 6572 7365 3d72 6574 7572 6e5f 696e  nverse=return_in
-00021960: 7665 7273 652c 0d0a 2020 2020 2020 2020  verse,..        
-00021970: 2020 2020 7265 7475 726e 5f63 6f75 6e74      return_count
-00021980: 733d 7265 7475 726e 5f63 6f75 6e74 732c  s=return_counts,
-00021990: 0d0a 2020 2020 2020 2020 2020 2020 736f  ..            so
-000219a0: 7274 6564 3d73 6f72 7465 642c 0d0a 2020  rted=sorted,..  
-000219b0: 2020 2020 2020 2020 2020 6c65 783d 6c65            lex=le
-000219c0: 782c 0d0a 2020 2020 2020 2020 2020 2020  x,..            
-000219d0: 6474 7970 653d 6474 7970 652c 0d0a 2020  dtype=dtype,..  
-000219e0: 2020 2020 2020 2020 2020 6669 6c74 6572            filter
-000219f0: 3d66 696c 7465 722c 0d0a 2020 2020 2020  =filter,..      
-00021a00: 2020 2020 2020 2a2a 6b77 6172 6773 2c0d        **kwargs,.
-00021a10: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
-00021a20: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-00021a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-00021a60: 2064 6566 206e 756e 6971 7565 2873 656c   def nunique(sel
-00021a70: 6629 202d 3e20 696e 743a 0d0a 2020 2020  f) -> int:..    
-00021a80: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00021a90: 2052 6574 7572 6e20 7468 6520 6e75 6d62   Return the numb
-00021aa0: 6572 206f 6620 756e 6971 7565 2076 616c  er of unique val
-00021ab0: 7565 7320 696e 2074 6865 2069 6e70 7574  ues in the input
-00021ac0: 2060 4661 7374 4172 7261 7960 2e20 446f   `FastArray`. Do
-00021ad0: 6573 206e 6f74 2069 6e63 6c75 6465 204e  es not include N
-00021ae0: 614e 206f 7220 7365 6e74 696e 656c 2076  aN or sentinel v
-00021af0: 616c 7565 732e 0d0a 0d0a 2020 2020 2020  alues.....      
-00021b00: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-00021b10: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-00021b20: 2020 2020 696e 740d 0a20 2020 2020 2020      int..       
-00021b30: 2020 2020 204e 756d 6265 7220 6f66 2075       Number of u
-00021b40: 6e69 7175 6520 7661 6c75 6573 2069 6e20  nique values in 
-00021b50: 7468 6520 696e 7075 7420 6046 6173 7441  the input `FastA
-00021b60: 7272 6179 602e 2044 6f65 7320 6e6f 7420  rray`. Does not 
-00021b70: 696e 636c 7564 6520 4e61 4e20 6f72 2073  include NaN or s
-00021b80: 656e 7469 6e65 6c20 7661 6c75 6573 2e0d  entinel values..
-00021b90: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
-00021ba0: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
-00021bb0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
-00021bc0: 6173 7441 7272 6179 2e64 7570 6c69 6361  astArray.duplica
-00021bd0: 7465 6420 3a20 5265 7475 726e 7320 6120  ted : Returns a 
-00021be0: 626f 6f6c 6561 6e20 6046 6173 7441 7272  boolean `FastArr
-00021bf0: 6179 6020 696e 6469 6361 7469 6e67 2064  ay` indicating d
-00021c00: 7570 6c69 6361 7465 2076 616c 7565 732e  uplicate values.
-00021c10: 0d0a 2020 2020 2020 2020 2e43 6174 6567  ..        .Categ
-00021c20: 6f72 6963 616c 2e6e 756e 6971 7565 203a  orical.nunique :
-00021c30: 2052 6574 7572 6e73 2074 6865 206e 756d   Returns the num
-00021c40: 6265 7220 6f66 2075 6e69 7175 6520 7661  ber of unique va
-00021c50: 6c75 6573 2074 6861 7420 6f63 6375 7220  lues that occur 
-00021c60: 696e 2074 6865 2060 2e43 6174 6567 6f72  in the `.Categor
-00021c70: 6963 616c 602e 0d0a 0d0a 2020 2020 2020  ical`.....      
-00021c80: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-00021c90: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-00021ca0: 2020 2020 2020 5265 7472 6965 7665 2074        Retrieve t
-00021cb0: 6865 206e 756d 6265 7220 6f66 2075 6e69  he number of uni
-00021cc0: 7175 6520 7661 6c75 6573 2069 6e20 6120  que values in a 
-00021cd0: 666c 6f61 7469 6e67 2070 6f69 6e74 2060  floating point `
-00021ce0: 4661 7374 4172 7261 7960 3a0d 0a0d 0a20  FastArray`:.... 
-00021cf0: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
-00021d00: 742e 4661 7374 4172 7261 7928 5b31 2e2c  t.FastArray([1.,
-00021d10: 2032 2e2c 2033 2e2c 2031 2e2c 2032 2e2c   2., 3., 1., 2.,
-00021d20: 2033 2e5d 290d 0a20 2020 2020 2020 203e   3.])..        >
-00021d30: 3e3e 2061 0d0a 2020 2020 2020 2020 4661  >> a..        Fa
-00021d40: 7374 4172 7261 7928 5b31 2e2c 2032 2e2c  stArray([1., 2.,
-00021d50: 2033 2e2c 2031 2e2c 2032 2e2c 2033 2e5d   3., 1., 2., 3.]
-00021d60: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-00021d70: 2e6e 756e 6971 7565 2829 0d0a 2020 2020  .nunique()..    
-00021d80: 2020 2020 330d 0a0d 0a20 2020 2020 2020      3....       
-00021d90: 2052 6574 7269 6576 6520 7468 6520 6e75   Retrieve the nu
-00021da0: 6d62 6572 206f 6620 756e 6971 7565 2076  mber of unique v
-00021db0: 616c 7565 7320 696e 2061 2066 6c6f 6174  alues in a float
-00021dc0: 696e 6720 706f 696e 7420 6046 6173 7441  ing point `FastA
-00021dd0: 7272 6179 6020 7769 7468 2061 204e 614e  rray` with a NaN
-00021de0: 2076 616c 7565 3a0d 0a0d 0a20 2020 2020   value:....     
-00021df0: 2020 203e 3e3e 2061 3220 3d20 7274 2e46     >>> a2 = rt.F
-00021e00: 6173 7441 7272 6179 285b 312e 2c20 322e  astArray([1., 2.
-00021e10: 2c20 332e 2c20 312e 2c20 322e 2c20 332e  , 3., 1., 2., 3.
-00021e20: 2c20 7274 2e6e 616e 5d29 0d0a 2020 2020  , rt.nan])..    
-00021e30: 2020 2020 3e3e 3e20 6132 0d0a 2020 2020      >>> a2..    
-00021e40: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
-00021e50: 312e 2c20 2032 2e2c 2020 332e 2c20 2031  1.,  2.,  3.,  1
-00021e60: 2e2c 2020 322e 2c20 2033 2e2c 206e 616e  .,  2.,  3., nan
-00021e70: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-00021e80: 6132 2e6e 756e 6971 7565 2829 2020 2320  a2.nunique()  # 
-00021e90: 5468 6520 4e61 4e20 7661 6c75 6520 6973  The NaN value is
-00021ea0: 206e 6f74 2069 6e63 6c75 6465 642e 0d0a   not included...
-00021eb0: 2020 2020 2020 2020 330d 0a0d 0a20 2020          3....   
-00021ec0: 2020 2020 2052 6574 7269 6576 6520 7468       Retrieve th
-00021ed0: 6520 6e75 6d62 6572 206f 6620 756e 6971  e number of uniq
-00021ee0: 7565 2076 616c 7565 7320 696e 2061 6e20  ue values in an 
-00021ef0: 756e 7369 676e 6564 2069 6e74 6567 6572  unsigned integer
-00021f00: 2060 4661 7374 4172 7261 7960 2077 6974   `FastArray` wit
-00021f10: 6820 6120 7365 6e74 696e 656c 2076 616c  h a sentinel val
-00021f20: 7565 3a0d 0a0d 0a20 2020 2020 2020 203e  ue:....        >
-00021f30: 3e3e 2061 3320 3d20 7274 2e46 6173 7441  >> a3 = rt.FastA
-00021f40: 7272 6179 285b 3235 352c 2032 2c20 332c  rray([255, 2, 3,
-00021f50: 2032 2c20 335d 2c20 6474 7970 653d 2275   2, 3], dtype="u
-00021f60: 696e 7438 2229 0d0a 2020 2020 2020 2020  int8")..        
-00021f70: 3e3e 3e20 6133 0d0a 2020 2020 2020 2020  >>> a3..        
-00021f80: 4661 7374 4172 7261 7928 5b32 3535 2c20  FastArray([255, 
-00021f90: 2020 322c 2020 2033 2c20 2020 322c 2020    2,   3,   2,  
-00021fa0: 2033 5d2c 2064 7479 7065 3d75 696e 7438   3], dtype=uint8
-00021fb0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-00021fc0: 332e 6e75 6e69 7175 6528 2920 2023 2054  3.nunique()  # T
-00021fd0: 6865 2073 656e 7469 6e65 6c20 7661 6c75  he sentinel valu
-00021fe0: 6520 6973 206e 6f74 2069 6e63 6c75 6465  e is not include
-00021ff0: 642e 0d0a 2020 2020 2020 2020 320d 0a20  d...        2.. 
-00022000: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00022010: 2020 2020 756e 203d 2075 6e69 7175 6528      un = unique(
-00022020: 7365 6c66 290d 0a20 2020 2020 2020 2063  self)..        c
-00022030: 6f75 6e74 203d 206c 656e 2875 6e29 0d0a  ount = len(un)..
-00022040: 2020 2020 2020 2020 6966 2063 6f75 6e74          if count
-00022050: 203e 2030 3a0d 0a20 2020 2020 2020 2020   > 0:..         
-00022060: 2020 2023 2075 6e69 7175 6520 6973 2073     # unique is s
-00022070: 6f72 7465 642c 2073 6f20 6368 6563 6b20  orted, so check 
-00022080: 666f 7220 7365 6e74 696e 656c 2062 6173  for sentinel bas
-00022090: 6564 206f 6e20 6474 7970 650d 0a20 2020  ed on dtype..   
-000220a0: 2020 2020 2020 2020 2069 6e76 203d 2049           inv = I
-000220b0: 4e56 414c 4944 5f44 4943 545b 7365 6c66  NVALID_DICT[self
-000220c0: 2e64 7479 7065 2e6e 756d 5d0d 0a20 2020  .dtype.num]..   
-000220d0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-000220e0: 2e64 7479 7065 2e63 6861 7220 696e 204e  .dtype.char in N
-000220f0: 756d 7079 4368 6172 5479 7065 732e 416c  umpyCharTypes.Al
-00022100: 6c46 6c6f 6174 3a0d 0a20 2020 2020 2020  lFloat:..       
-00022110: 2020 2020 2020 2020 2023 2063 6865 636b           # check
-00022120: 2069 6620 6c61 7374 2069 7465 6d20 6973   if last item is
-00022130: 206e 616e 0d0a 2020 2020 2020 2020 2020   nan..          
-00022140: 2020 2020 2020 6966 2075 6e5b 636f 756e        if un[coun
-00022150: 7420 2d20 315d 2021 3d20 756e 5b63 6f75  t - 1] != un[cou
-00022160: 6e74 202d 2031 5d3a 0d0a 2020 2020 2020  nt - 1]:..      
-00022170: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00022180: 756e 7420 2d3d 2031 0d0a 2020 2020 2020  unt -= 1..      
-00022190: 2020 2020 2020 2320 756e 7369 676e 6564        # unsigned
-000221a0: 2069 6e74 2075 7365 7320 6869 6768 206e   int uses high n
-000221b0: 756d 6265 7220 6173 2073 656e 7469 6e65  umber as sentine
-000221c0: 6c0d 0a20 2020 2020 2020 2020 2020 2065  l..            e
-000221d0: 6c69 6620 7365 6c66 2e64 7479 7065 2e63  lif self.dtype.c
-000221e0: 6861 7220 696e 204e 756d 7079 4368 6172  har in NumpyChar
-000221f0: 5479 7065 732e 556e 7369 676e 6564 496e  Types.UnsignedIn
-00022200: 7465 6765 723a 0d0a 2020 2020 2020 2020  teger:..        
-00022210: 2020 2020 2020 2020 6966 2075 6e5b 636f          if un[co
-00022220: 756e 7420 2d20 315d 203d 3d20 696e 763a  unt - 1] == inv:
-00022230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00022240: 2020 2020 2020 636f 756e 7420 2d3d 2031        count -= 1
-00022250: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00022260: 616c 6c20 6f74 6865 7220 7365 6e74 696e  all other sentin
-00022270: 656c 7320 6172 6520 6c6f 7765 7374 206e  els are lowest n
-00022280: 756d 6265 720d 0a20 2020 2020 2020 2020  umber..         
-00022290: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-000222a0: 2020 2020 2020 2020 2020 6966 2075 6e5b            if un[
-000222b0: 305d 203d 3d20 696e 763a 0d0a 2020 2020  0] == inv:..    
-000222c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000222d0: 636f 756e 7420 2d3d 2031 0d0a 2020 2020  count -= 1..    
-000222e0: 2020 2020 7265 7475 726e 2063 6f75 6e74      return count
-000222f0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-00022300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022330: 2d0d 0a20 2020 2064 6566 2073 6561 7263  -..    def searc
-00022340: 6873 6f72 7465 6428 7365 6c66 2c20 762c  hsorted(self, v,
-00022350: 2073 6964 653d 226c 6566 7422 2c20 736f   side="left", so
-00022360: 7274 6572 3d4e 6f6e 6529 202d 3e20 6e70  rter=None) -> np
-00022370: 2e6e 756d 6265 723a 0d0a 2020 2020 2020  .number:..      
-00022380: 2020 7265 7475 726e 205f 7365 6172 6368    return _search
-00022390: 736f 7274 6564 2873 656c 662c 2076 2c20  sorted(self, v, 
-000223a0: 7369 6465 3d73 6964 652c 2073 6f72 7465  side=side, sorte
-000223b0: 723d 736f 7274 6572 290d 0a0d 0a20 2020  r=sorter)....   
-000223c0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-000223d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000223e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000223f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-00022410: 2020 2020 6465 6620 6d61 705f 6f6c 6428      def map_old(
-00022420: 7365 6c66 2c20 6e70 6469 6374 3a20 6469  self, npdict: di
-00022430: 6374 293a 0d0a 2020 2020 2020 2020 2222  ct):..        ""
-00022440: 220d 0a20 2020 2020 2020 2045 7861 6d70  "..        Examp
-00022450: 6c65 0d0a 2020 2020 2020 2020 2d2d 2d2d  le..        ----
-00022460: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
-00022470: 2064 203d 207b 313a 3130 2c20 323a 3230   d = {1:10, 2:20
-00022480: 7d0d 0a20 2020 2020 2020 203e 3e3e 2064  }..        >>> d
-00022490: 6174 5b27 6327 5d20 3d20 6461 742e 612e  at['c'] = dat.a.
-000224a0: 6d61 7028 6429 0d0a 2020 2020 2020 2020  map(d)..        
-000224b0: 3e3e 3e20 7072 696e 7428 6461 7429 0d0a  >>> print(dat)..
-000224c0: 2020 2020 2020 2020 2020 2061 2020 6220             a  b 
-000224d0: 2020 6362 2020 2063 0d0a 2020 2020 2020    cb   c..      
-000224e0: 2020 3020 2031 2020 3020 2030 2e30 2020    0  1  0  0.0  
-000224f0: 3130 0d0a 2020 2020 2020 2020 3120 2031  10..        1  1
-00022500: 2020 3120 2031 2e30 2020 3130 0d0a 2020    1  1.0  10..  
-00022510: 2020 2020 2020 3220 2031 2020 3220 2033        2  1  2  3
-00022520: 2e30 2020 3130 0d0a 2020 2020 2020 2020  .0  10..        
-00022530: 3320 2032 2020 3320 2035 2e30 2020 3230  3  2  3  5.0  20
-00022540: 0d0a 2020 2020 2020 2020 3420 2032 2020  ..        4  2  
-00022550: 3420 2037 2e30 2020 3230 0d0a 2020 2020  4  7.0  20..    
-00022560: 2020 2020 3520 2032 2020 3520 2039 2e30      5  2  5  9.0
-00022570: 2020 3230 0d0a 2020 2020 2020 2020 2222    20..        ""
-00022580: 220d 0a20 2020 2020 2020 206f 7574 4172  "..        outAr
-00022590: 7261 7920 3d20 7365 6c66 2e63 6f70 7928  ray = self.copy(
-000225a0: 290d 0a20 2020 2020 2020 2066 6f72 206b  )..        for k
-000225b0: 2c20 7620 696e 206e 7064 6963 742e 6974  , v in npdict.it
-000225c0: 656d 7328 293a 0d0a 2020 2020 2020 2020  ems():..        
-000225d0: 2020 2020 6f75 7441 7272 6179 5b73 656c      outArray[sel
-000225e0: 6620 3d3d 206b 5d20 3d20 760d 0a20 2020  f == k] = v..   
-000225f0: 2020 2020 2072 6574 7572 6e20 6f75 7441       return outA
-00022600: 7272 6179 0d0a 0d0a 2020 2020 6465 6620  rray....    def 
-00022610: 6d61 7028 7365 6c66 2c20 6e70 6469 6374  map(self, npdict
-00022620: 3a20 6469 6374 2920 2d3e 2046 6173 7441  : dict) -> FastA
-00022630: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
-00022640: 2222 0d0a 2020 2020 2020 2020 4e6f 7465  ""..        Note
-00022650: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00022660: 0d0a 2020 2020 2020 2020 5573 6573 2069  ..        Uses i
-00022670: 736d 656d 6265 7220 616e 6420 6361 6e20  smember and can 
-00022680: 6861 6e64 6c65 206c 6172 6765 2064 6963  handle large dic
-00022690: 7469 6f6e 6172 6965 730d 0a0d 0a20 2020  tionaries....   
-000226a0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-000226b0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-000226c0: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
-000226d0: 7261 6e67 6528 3329 0d0a 2020 2020 2020  range(3)..      
-000226e0: 2020 3e3e 3e20 612e 6d61 7028 7b31 3a20    >>> a.map({1: 
-000226f0: 2761 272c 2032 3a27 6227 2c20 333a 2763  'a', 2:'b', 3:'c
-00022700: 277d 290d 0a20 2020 2020 2020 2046 6173  '})..        Fas
-00022710: 7441 7272 6179 285b 2727 2c20 2761 272c  tArray(['', 'a',
-00022720: 2027 6227 5d2c 2064 7479 7065 3d27 3c55   'b'], dtype='<U
-00022730: 3127 290d 0a20 2020 2020 2020 203e 3e3e  1')..        >>>
-00022740: 2061 3d61 7261 6e67 6528 3329 2b31 0d0a   a=arange(3)+1..
-00022750: 2020 2020 2020 2020 3e3e 3e20 612e 6d61          >>> a.ma
-00022760: 7028 7b31 3a20 2761 272c 2032 3a27 6227  p({1: 'a', 2:'b'
-00022770: 2c20 333a 2763 277d 290d 0a20 2020 2020  , 3:'c'})..     
-00022780: 2020 2046 6173 7441 7272 6179 285b 2761     FastArray(['a
-00022790: 272c 2027 6227 2c20 2763 275d 2c20 6474  ', 'b', 'c'], dt
-000227a0: 7970 653d 273c 5531 2729 0d0a 2020 2020  ype='<U1')..    
-000227b0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000227c0: 206f 7269 6720 3d20 4661 7374 4172 7261   orig = FastArra
-000227d0: 7928 5b2a 6e70 6469 6374 5d2c 2075 6e69  y([*npdict], uni
-000227e0: 636f 6465 3d54 7275 6529 0d0a 2020 2020  code=True)..    
-000227f0: 2020 2020 7265 706c 6163 6520 3d20 4661      replace = Fa
-00022800: 7374 4172 7261 7928 5b2a 6e70 6469 6374  stArray([*npdict
-00022810: 2e76 616c 7565 7328 295d 2c20 756e 6963  .values()], unic
-00022820: 6f64 653d 5472 7565 290d 0a20 2020 2020  ode=True)..     
-00022830: 2020 206f 7574 4172 7261 7920 3d20 7365     outArray = se
-00022840: 6c66 2e66 696c 6c5f 696e 7661 6c69 6428  lf.fill_invalid(
-00022850: 7365 6c66 2e73 6861 7065 2c20 6474 7970  self.shape, dtyp
-00022860: 653d 7265 706c 6163 652e 6474 7970 652c  e=replace.dtype,
-00022870: 2069 6e70 6c61 6365 3d46 616c 7365 290d   inplace=False).
-00022880: 0a20 2020 2020 2020 2066 6f75 6e64 2c20  .        found, 
-00022890: 6964 7820 3d20 6973 6d65 6d62 6572 2873  idx = ismember(s
-000228a0: 656c 662c 206f 7269 6729 0d0a 2020 2020  elf, orig)..    
-000228b0: 2020 2020 6f75 7441 7272 6179 5b66 6f75      outArray[fou
-000228c0: 6e64 5d20 3d20 7265 706c 6163 655b 6964  nd] = replace[id
-000228d0: 785b 666f 756e 645d 5d0d 0a20 2020 2020  x[found]]..     
-000228e0: 2020 2072 6574 7572 6e20 6f75 7441 7272     return outArr
-000228f0: 6179 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  ay....    # ----
-00022900: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001cb20: 7465 2074 6865 2061 7269 7468 6d65 7469  te the arithmeti
+0001cb30: 6320 6d65 616e 206f 6620 7468 6520 7661  c mean of the va
+0001cb40: 6c75 6573 2069 6e20 7468 6520 6669 7273  lues in the firs
+0001cb50: 7420 6172 6775 6d65 6e74 2c20 6967 6e6f  t argument, igno
+0001cb60: 7269 6e67 204e 614e 732e 0d0a 0d0a 2020  ring NaNs.....  
+0001cb70: 2020 2020 2020 4966 2061 6c6c 2076 616c        If all val
+0001cb80: 7565 7320 696e 2074 6865 2066 6972 7374  ues in the first
+0001cb90: 2061 7267 756d 656e 7420 6172 6520 4e61   argument are Na
+0001cba0: 4e73 2c20 6060 302e 3060 6020 6973 2072  Ns, ``0.0`` is r
+0001cbb0: 6574 7572 6e65 642e 0d0a 0d0a 2020 2020  eturned.....    
+0001cbc0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+0001cbd0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0001cbe0: 2d2d 0d0a 2020 2020 2020 2020 6669 6c74  --..        filt
+0001cbf0: 6572 203a 2061 7272 6179 206f 6620 626f  er : array of bo
+0001cc00: 6f6c 2c20 6465 6661 756c 7420 4e6f 6e65  ol, default None
+0001cc10: 0d0a 2020 2020 2020 2020 2020 2020 5370  ..            Sp
+0001cc20: 6563 6966 6965 7320 7768 6963 6820 656c  ecifies which el
+0001cc30: 656d 656e 7473 2074 6f20 696e 636c 7564  ements to includ
+0001cc40: 6520 696e 2074 6865 206d 6561 6e20 6361  e in the mean ca
+0001cc50: 6c63 756c 6174 696f 6e2e 2049 6620 7468  lculation. If th
+0001cc60: 6520 6669 6c74 6572 0d0a 2020 2020 2020  e filter..      
+0001cc70: 2020 2020 2020 6973 2075 6e69 666f 726d        is uniform
+0001cc80: 6c79 2060 6046 616c 7365 6060 2c20 606e  ly ``False``, `n
+0001cc90: 616e 6d65 616e 6020 7265 7475 726e 7320  anmean` returns 
+0001cca0: 6120 605a 6572 6f44 6976 6973 696f 6e45  a `ZeroDivisionE
+0001ccb0: 7272 6f72 602e 0d0a 2020 2020 2020 2020  rror`...        
+0001ccc0: 6474 7970 6520 3a20 7274 2e64 7479 7065  dtype : rt.dtype
+0001ccd0: 206f 7220 6e75 6d70 792e 6474 7970 652c   or numpy.dtype,
+0001cce0: 2064 6566 6175 6c74 2066 6c6f 6174 3634   default float64
+0001ccf0: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
+0001cd00: 6520 6461 7461 2074 7970 6520 6f66 2074  e data type of t
+0001cd10: 6865 2072 6573 756c 742e 2046 6f72 2061  he result. For a
+0001cd20: 2060 4661 7374 4172 7261 7960 2060 6078   `FastArray` ``x
+0001cd30: 6060 2c0d 0a20 2020 2020 2020 2020 2020  ``,..           
+0001cd40: 2060 6078 2e6e 616e 6d65 616e 2864 7479   ``x.nanmean(dty
+0001cd50: 7065 203d 206d 795f 7479 7065 2960 6020  pe = my_type)`` 
+0001cd60: 6973 2065 7175 6976 616c 656e 7420 746f  is equivalent to
+0001cd70: 2060 606d 795f 7479 7065 2878 2e6e 616e   ``my_type(x.nan
+0001cd80: 6d65 616e 2829 2960 602e 0d0a 0d0a 2020  mean())``.....  
+0001cd90: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+0001cda0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+0001cdb0: 2020 2020 2020 2020 7363 616c 6172 0d0a          scalar..
+0001cdc0: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+0001cdd0: 6d65 616e 206f 6620 7468 6520 7661 6c75  mean of the valu
+0001cde0: 6573 2e0d 0a0d 0a20 2020 2020 2020 2053  es.....        S
+0001cdf0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
+0001ce00: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+0001ce10: 2020 206e 756d 7079 2e6e 616e 6d65 616e     numpy.nanmean
+0001ce20: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+0001ce30: 7261 792e 6d65 616e 203a 2043 6f6d 7075  ray.mean : Compu
+0001ce40: 7465 7320 7468 6520 6d65 616e 206f 6620  tes the mean of 
+0001ce50: 6046 6173 7441 7272 6179 6020 7661 6c75  `FastArray` valu
+0001ce60: 6573 2e0d 0a20 2020 2020 2020 2044 6174  es...        Dat
+0001ce70: 6173 6574 2e6e 616e 6d65 616e 203a 2043  aset.nanmean : C
+0001ce80: 6f6d 7075 7465 7320 7468 6520 6d65 616e  omputes the mean
+0001ce90: 206f 6620 6e75 6d65 7269 6361 6c20 6044   of numerical `D
+0001cea0: 6174 6173 6574 6020 636f 6c75 6d6e 732c  ataset` columns,
+0001ceb0: 2069 676e 6f72 696e 670d 0a20 2020 2020   ignoring..     
+0001cec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ced0: 2020 2020 204e 614e 732e 0d0a 2020 2020       NaNs...    
+0001cee0: 2020 2020 4772 6f75 7042 794f 7073 2e6e      GroupByOps.n
+0001cef0: 616e 6d65 616e 203a 2043 6f6d 7075 7465  anmean : Compute
+0001cf00: 7320 7468 6520 6d65 616e 206f 6620 6561  s the mean of ea
+0001cf10: 6368 2067 726f 7570 2c20 6967 6e6f 7269  ch group, ignori
+0001cf20: 6e67 204e 614e 732e 2055 7365 6420 6279  ng NaNs. Used by
+0001cf30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001cf40: 2020 2020 2020 2020 2020 2020 2020 2060                 `
+0001cf50: 4361 7465 676f 7269 6361 6c60 206f 626a  Categorical` obj
+0001cf60: 6563 7473 2e0d 0a0d 0a20 2020 2020 2020  ects.....       
+0001cf70: 204e 6f74 6573 0d0a 2020 2020 2020 2020   Notes..        
+0001cf80: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2054  -----..        T
+0001cf90: 6865 2060 6474 7970 6560 206b 6579 776f  he `dtype` keywo
+0001cfa0: 7264 2066 6f72 2060 4661 7374 4172 7261  rd for `FastArra
+0001cfb0: 792e 6e61 6e6d 6561 6e60 2073 7065 6369  y.nanmean` speci
+0001cfc0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+0001cfd0: 7065 206f 6620 7468 650d 0a20 2020 2020  pe of the..     
+0001cfe0: 2020 2072 6573 756c 742e 2054 6869 7320     result. This 
+0001cff0: 6469 6666 6572 7320 6672 6f6d 2060 6e75  differs from `nu
+0001d000: 6d70 792e 6e61 6e6d 6561 6e60 2c20 7768  mpy.nanmean`, wh
+0001d010: 6572 6520 6974 2073 7065 6369 6669 6573  ere it specifies
+0001d020: 2074 6865 2064 6174 6120 7479 7065 2075   the data type u
+0001d030: 7365 640d 0a20 2020 2020 2020 2074 6f20  sed..        to 
+0001d040: 636f 6d70 7574 6520 7468 6520 6d65 616e  compute the mean
+0001d050: 2e0d 0a0d 0a20 2020 2020 2020 202a 2a4e  .....        **N
+0001d060: 6f74 6573 206f 6e20 5573 696e 6720 4e75  otes on Using Nu
+0001d070: 6d50 7920 5061 7261 6d65 7465 7273 2a2a  mPy Parameters**
+0001d080: 0d0a 0d0a 2020 2020 2020 2020 5573 696e  ....        Usin
+0001d090: 6720 6569 7468 6572 206f 6620 7468 6520  g either of the 
+0001d0a0: 666f 6c6c 6f77 696e 6720 4e75 6d50 7920  following NumPy 
+0001d0b0: 7061 7261 6d65 7465 7273 2077 696c 6c20  parameters will 
+0001d0c0: 6361 7573 6520 5269 7074 6162 6c65 2074  cause Riptable t
+0001d0d0: 6f20 7377 6974 6368 2074 6f0d 0a20 2020  o switch to..   
+0001d0e0: 2020 2020 2074 6865 204e 756d 5079 2069       the NumPy i
+0001d0f0: 6d70 6c65 6d65 6e74 6174 696f 6e20 6f66  mplementation of
+0001d100: 2074 6869 7320 6d65 7468 6f64 2028 606e   this method (`n
+0001d110: 756d 7079 2e6e 616e 6d65 616e 6029 2e20  umpy.nanmean`). 
+0001d120: 486f 7765 7665 722c 2075 6e74 696c 2061  However, until a
+0001d130: 0d0a 2020 2020 2020 2020 7265 706f 7274  ..        report
+0001d140: 6564 2062 7567 2069 7320 6669 7865 642c  ed bug is fixed,
+0001d150: 2069 6620 796f 7520 616c 736f 2069 6e63   if you also inc
+0001d160: 6c75 6465 2074 6865 2060 6474 7970 6560  lude the `dtype`
+0001d170: 2070 6172 616d 6574 6572 2069 7420 7769   parameter it wi
+0001d180: 6c6c 2062 650d 0a20 2020 2020 2020 2061  ll be..        a
+0001d190: 7070 6c69 6564 2074 6f20 7468 6520 7265  pplied to the re
+0001d1a0: 7375 6c74 2c20 6e6f 7420 7573 6564 2074  sult, not used t
+0001d1b0: 6f20 636f 6d70 7574 6520 7468 6520 6d65  o compute the me
+0001d1c0: 616e 2061 7320 6974 2069 7320 696e 2060  an as it is in `
+0001d1d0: 6e75 6d70 792e 6e61 6e6d 6561 6e60 2e0d  numpy.nanmean`..
+0001d1e0: 0a0d 0a20 2020 2020 2020 2041 6c73 6f20  ...        Also 
+0001d1f0: 6e6f 7465 2074 6861 7420 6966 2079 6f75  note that if you
+0001d200: 2075 7365 2065 6974 6865 7220 6f66 2074   use either of t
+0001d210: 6865 2066 6f6c 6c6f 7769 6e67 204e 756d  he following Num
+0001d220: 5079 2070 6172 616d 6574 6572 7320 616e  Py parameters an
+0001d230: 6420 616c 736f 0d0a 2020 2020 2020 2020  d also..        
+0001d240: 696e 636c 7564 6520 6120 6066 696c 7465  include a `filte
+0001d250: 7260 206b 6579 776f 7264 2061 7267 756d  r` keyword argum
+0001d260: 656e 7420 2877 6869 6368 2060 6e75 6d70  ent (which `nump
+0001d270: 792e 6e61 6e6d 6561 6e60 2064 6f65 7320  y.nanmean` does 
+0001d280: 6e6f 7420 6163 6365 7074 292c 0d0a 2020  not accept),..  
+0001d290: 2020 2020 2020 5269 7074 6162 6c65 2773        Riptable's
+0001d2a0: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
+0001d2b0: 6f66 2060 6e61 6e6d 6561 6e60 2077 696c  of `nanmean` wil
+0001d2c0: 6c20 6265 2075 7365 6420 7769 7468 2074  l be used with t
+0001d2d0: 6865 2066 696c 7465 7220 6172 6775 6d65  he filter argume
+0001d2e0: 6e74 0d0a 2020 2020 2020 2020 616e 6420  nt..        and 
+0001d2f0: 7468 6520 4e75 6d50 7920 7061 7261 6d65  the NumPy parame
+0001d300: 7465 7273 2077 696c 6c20 6265 2069 676e  ters will be ign
+0001d310: 6f72 6564 2e0d 0a0d 0a20 2020 2020 2020  ored.....       
+0001d320: 2061 7869 7320 3a20 7b69 6e74 2c20 7475   axis : {int, tu
+0001d330: 706c 6520 6f66 2069 6e74 2c20 4e6f 6e65  ple of int, None
+0001d340: 7d2c 206f 7074 696f 6e61 6c0d 0a20 2020  }, optional..   
+0001d350: 2020 2020 2020 2020 2041 7869 7320 6f72           Axis or
+0001d360: 2061 7865 7320 616c 6f6e 6720 7768 6963   axes along whic
+0001d370: 6820 7468 6520 6d65 616e 7320 6172 6520  h the means are 
+0001d380: 636f 6d70 7574 6564 2e20 5468 6520 6465  computed. The de
+0001d390: 6661 756c 7420 6973 2074 6f20 636f 6d70  fault is to comp
+0001d3a0: 7574 650d 0a20 2020 2020 2020 2020 2020  ute..           
+0001d3b0: 2074 6865 206d 6561 6e20 6f66 2074 6865   the mean of the
+0001d3c0: 2066 6c61 7474 656e 6564 2061 7272 6179   flattened array
+0001d3d0: 2e0d 0a0d 0a20 2020 2020 2020 206b 6565  .....        kee
+0001d3e0: 7064 696d 7320 3a20 626f 6f6c 2c20 6f70  pdims : bool, op
+0001d3f0: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
+0001d400: 2020 2020 4966 2074 6869 7320 6973 2073      If this is s
+0001d410: 6574 2074 6f20 5472 7565 2c20 7468 6520  et to True, the 
+0001d420: 6178 6573 2077 6869 6368 2061 7265 2072  axes which are r
+0001d430: 6564 7563 6564 2061 7265 206c 6566 7420  educed are left 
+0001d440: 696e 2074 6865 2072 6573 756c 7420 6173  in the result as
+0001d450: 0d0a 2020 2020 2020 2020 2020 2020 6469  ..            di
+0001d460: 6d65 6e73 696f 6e73 2077 6974 6820 7369  mensions with si
+0001d470: 7a65 206f 6e65 2e20 5769 7468 2074 6869  ze one. With thi
+0001d480: 7320 6f70 7469 6f6e 2c20 7468 6520 7265  s option, the re
+0001d490: 7375 6c74 2077 696c 6c20 6272 6f61 6463  sult will broadc
+0001d4a0: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
+0001d4b0: 2063 6f72 7265 6374 6c79 2061 6761 696e   correctly again
+0001d4c0: 7374 2074 6865 206f 7269 6769 6e61 6c20  st the original 
+0001d4d0: 696e 7075 7420 6172 7261 792e 0d0a 0d0a  input array.....
+0001d4e0: 2020 2020 2020 2020 2020 2020 4966 2074              If t
+0001d4f0: 6865 2076 616c 7565 2069 7320 616e 7974  he value is anyt
+0001d500: 6869 6e67 2062 7574 2074 6865 2064 6566  hing but the def
+0001d510: 6175 6c74 2c20 7468 656e 2060 6b65 6570  ault, then `keep
+0001d520: 6469 6d73 6020 7769 6c6c 2062 6520 7061  dims` will be pa
+0001d530: 7373 6564 0d0a 2020 2020 2020 2020 2020  ssed..          
+0001d540: 2020 7468 726f 7567 6820 746f 2074 6865    through to the
+0001d550: 2060 6d65 616e 6020 6f72 2060 7375 6d60   `mean` or `sum`
+0001d560: 206d 6574 686f 6473 206f 6620 7375 622d   methods of sub-
+0001d570: 636c 6173 7365 7320 6f66 2060 6e64 6172  classes of `ndar
+0001d580: 7261 7960 2e20 4966 2074 6865 0d0a 2020  ray`. If the..  
+0001d590: 2020 2020 2020 2020 2020 7375 622d 636c            sub-cl
+0001d5a0: 6173 7365 7327 206d 6574 686f 6473 2064  asses' methods d
+0001d5b0: 6f20 6e6f 7420 696d 706c 656d 656e 7420  o not implement 
+0001d5c0: 606b 6565 7064 696d 7360 2c20 616e 7920  `keepdims`, any 
+0001d5d0: 6578 6365 7074 696f 6e73 2077 696c 6c20  exceptions will 
+0001d5e0: 6265 0d0a 2020 2020 2020 2020 2020 2020  be..            
+0001d5f0: 7261 6973 6564 2e0d 0a0d 0a20 2020 2020  raised.....     
+0001d600: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
+0001d610: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+0001d620: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
+0001d630: 742e 4661 7374 4172 7261 7928 5b31 2c20  t.FastArray([1, 
+0001d640: 332c 2035 2c20 7274 2e6e 616e 5d29 0d0a  3, 5, rt.nan])..
+0001d650: 2020 2020 2020 2020 3e3e 3e20 612e 6e61          >>> a.na
+0001d660: 6e6d 6561 6e28 290d 0a20 2020 2020 2020  nmean()..       
+0001d670: 2033 2e30 0d0a 0d0a 2020 2020 2020 2020   3.0....        
+0001d680: 5769 7468 2061 2060 6474 7970 6560 2073  With a `dtype` s
+0001d690: 7065 6369 6669 6564 3a0d 0a0d 0a20 2020  pecified:....   
+0001d6a0: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
+0001d6b0: 4661 7374 4172 7261 7928 5b31 2c20 332c  FastArray([1, 3,
+0001d6c0: 2035 2c20 7274 2e6e 616e 5d29 0d0a 2020   5, rt.nan])..  
+0001d6d0: 2020 2020 2020 3e3e 3e20 612e 6e61 6e6d        >>> a.nanm
+0001d6e0: 6561 6e28 6474 7970 6520 3d20 7274 2e69  ean(dtype = rt.i
+0001d6f0: 6e74 3332 290d 0a20 2020 2020 2020 2033  nt32)..        3
+0001d700: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+0001d710: 2061 2066 696c 7465 723a 0d0a 0d0a 2020   a filter:....  
+0001d720: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+0001d730: 2e46 6173 7441 7272 6179 285b 312c 2033  .FastArray([1, 3
+0001d740: 2c20 352c 2072 742e 6e61 6e5d 290d 0a20  , 5, rt.nan]).. 
+0001d750: 2020 2020 2020 203e 3e3e 2062 203d 2072         >>> b = r
+0001d760: 742e 4661 7374 4172 7261 7928 5b46 616c  t.FastArray([Fal
+0001d770: 7365 2c20 5472 7565 2c20 5472 7565 2c20  se, True, True, 
+0001d780: 5472 7565 5d29 0d0a 2020 2020 2020 2020  True])..        
+0001d790: 3e3e 3e20 612e 6e61 6e6d 6561 6e28 6669  >>> a.nanmean(fi
+0001d7a0: 6c74 6572 203d 2062 290d 0a20 2020 2020  lter = b)..     
+0001d7b0: 2020 2034 2e30 0d0a 2020 2020 2020 2020     4.0..        
+0001d7c0: 2222 220d 0a0d 0a20 2020 2020 2020 206b  """....        k
+0001d7d0: 7761 7267 7320 3d20 7365 6c66 2e5f 6661  wargs = self._fa
+0001d7e0: 5f6b 6579 776f 7264 5f77 7261 7070 6572  _keyword_wrapper
+0001d7f0: 2866 696c 7465 723d 6669 6c74 6572 2c20  (filter=filter, 
+0001d800: 6474 7970 653d 6474 7970 652c 2061 7869  dtype=dtype, axi
+0001d810: 733d 6178 6973 2c20 6b65 6570 6469 6d73  s=axis, keepdims
+0001d820: 3d6b 6565 7064 696d 732c 2064 646f 663d  =keepdims, ddof=
+0001d830: 4e6f 6e65 2c20 2a2a 6b77 6172 6773 290d  None, **kwargs).
+0001d840: 0a0d 0a20 2020 2020 2020 2069 6620 6669  ...        if fi
+0001d850: 6c74 6572 2069 7320 6e6f 7420 4e6f 6e65  lter is not None
+0001d860: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+0001d870: 6574 7572 6e20 7365 6c66 2e5f 6661 5f66  eturn self._fa_f
+0001d880: 696c 7465 725f 7772 6170 7065 7228 5f66  ilter_wrapper(_f
+0001d890: 6e61 6e6d 6561 6e2c 2066 696c 7465 723d  nanmean, filter=
+0001d8a0: 6669 6c74 6572 2c20 6474 7970 653d 6474  filter, dtype=dt
+0001d8b0: 7970 6529 0d0a 0d0a 2020 2020 2020 2020  ype)....        
+0001d8c0: 7265 7475 726e 2073 656c 662e 5f72 6564  return self._red
+0001d8d0: 7563 655f 6368 6563 6b28 5245 4455 4345  uce_check(REDUCE
+0001d8e0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+0001d8f0: 455f 4e41 4e4d 4541 4e2c 206e 702e 6e61  E_NANMEAN, np.na
+0001d900: 6e6d 6561 6e2c 202a 2a6b 7761 7267 7329  nmean, **kwargs)
+0001d910: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+0001d920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001d930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001d940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001d950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001d960: 2d2d 2d2d 2d0d 0a20 2020 2023 2074 6865  -----..    # the
+0001d970: 7365 2066 756e 6374 696f 6e20 7461 6b65  se function take
+0001d980: 2061 2064 646f 6620 6b77 6172 670d 0a20   a ddof kwarg.. 
+0001d990: 2020 2064 6566 2076 6172 2873 656c 662c     def var(self,
+0001d9a0: 2066 696c 7465 723d 4e6f 6e65 2c20 6474   filter=None, dt
+0001d9b0: 7970 653d 4e6f 6e65 2c20 6178 6973 3d4e  ype=None, axis=N
+0001d9c0: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
+0001d9d0: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 202a  ne, ddof=None, *
+0001d9e0: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
+0001d9f0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0001da00: 436f 6d70 7574 6520 7468 6520 7661 7269  Compute the vari
+0001da10: 616e 6365 206f 6620 7468 6520 7661 6c75  ance of the valu
+0001da20: 6573 2069 6e20 7468 6520 6669 7273 7420  es in the first 
+0001da30: 6172 6775 6d65 6e74 2e0d 0a0d 0a20 2020  argument.....   
+0001da40: 2020 2020 2052 6970 7461 626c 6520 7573       Riptable us
+0001da50: 6573 2074 6865 2063 6f6e 7665 6e74 696f  es the conventio
+0001da60: 6e20 7468 6174 2060 6064 646f 6620 3d20  n that ``ddof = 
+0001da70: 3160 602c 206d 6561 6e69 6e67 2074 6865  1``, meaning the
+0001da80: 2076 6172 6961 6e63 6520 6f66 0d0a 2020   variance of..  
+0001da90: 2020 2020 2020 6060 5b78 5f31 2c20 2e2e        ``[x_1, ..
+0001daa0: 2e2c 2078 5f6e 5d60 6020 6973 2064 6566  ., x_n]`` is def
+0001dab0: 696e 6564 2062 7920 6060 7661 7220 3d20  ined by ``var = 
+0001dac0: 312f 286e 202d 2031 2920 2a20 7375 6d28  1/(n - 1) * sum(
+0001dad0: 785f 6920 2d20 6d65 616e 2029 2a2a 3260  x_i - mean )**2`
+0001dae0: 600d 0a20 2020 2020 2020 2028 6e6f 7465  `..        (note
+0001daf0: 2074 6865 2060 606e 202d 2031 6060 2069   the ``n - 1`` i
+0001db00: 6e73 7465 6164 206f 6620 6060 6e60 6029  nstead of ``n``)
+0001db10: 2e20 5468 6973 2064 6966 6665 7273 2066  . This differs f
+0001db20: 726f 6d20 4e75 6d50 792c 2077 6869 6368  rom NumPy, which
+0001db30: 2075 7365 730d 0a20 2020 2020 2020 2060   uses..        `
+0001db40: 6064 646f 6620 3d20 3060 6020 6279 2064  `ddof = 0`` by d
+0001db50: 6566 6175 6c74 2e0d 0a0d 0a20 2020 2020  efault.....     
+0001db60: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+0001db70: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+0001db80: 2d0d 0a20 2020 2020 2020 2066 696c 7465  -..        filte
+0001db90: 7220 3a20 6172 7261 7920 6f66 2062 6f6f  r : array of boo
+0001dba0: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
+0001dbb0: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
+0001dbc0: 6369 6669 6573 2077 6869 6368 2065 6c65  cifies which ele
+0001dbd0: 6d65 6e74 7320 746f 2069 6e63 6c75 6465  ments to include
+0001dbe0: 2069 6e20 7468 6520 7661 7269 616e 6365   in the variance
+0001dbf0: 2063 616c 6375 6c61 7469 6f6e 2e20 4966   calculation. If
+0001dc00: 2074 6865 0d0a 2020 2020 2020 2020 2020   the..          
+0001dc10: 2020 6669 6c74 6572 2069 7320 756e 6966    filter is unif
+0001dc20: 6f72 6d6c 7920 6060 4661 6c73 6560 602c  ormly ``False``,
+0001dc30: 2060 7661 7260 2072 6574 7572 6e73 2061   `var` returns a
+0001dc40: 2060 5a65 726f 4469 7669 7369 6f6e 4572   `ZeroDivisionEr
+0001dc50: 726f 7260 2e0d 0a0d 0a20 2020 2020 2020  ror`.....       
+0001dc60: 2064 7479 7065 203a 2072 742e 6474 7970   dtype : rt.dtyp
+0001dc70: 6520 6f72 206e 756d 7079 2e64 7479 7065  e or numpy.dtype
+0001dc80: 2c20 6465 6661 756c 7420 666c 6f61 7436  , default float6
+0001dc90: 340d 0a20 2020 2020 2020 2020 2020 2054  4..            T
+0001dca0: 6865 2064 6174 6120 7479 7065 206f 6620  he data type of 
+0001dcb0: 7468 6520 7265 7375 6c74 2e20 466f 7220  the result. For 
+0001dcc0: 6120 6046 6173 7441 7272 6179 6020 6060  a `FastArray` ``
+0001dcd0: 7860 602c 0d0a 2020 2020 2020 2020 2020  x``,..          
+0001dce0: 2020 6060 782e 7661 7228 6474 7970 6520    ``x.var(dtype 
+0001dcf0: 3d20 6d79 5f74 7970 6529 6060 2069 7320  = my_type)`` is 
+0001dd00: 6571 7569 7661 6c65 6e74 2074 6f20 6060  equivalent to ``
+0001dd10: 6d79 5f74 7970 6528 782e 7661 7228 2929  my_type(x.var())
+0001dd20: 6060 2e0d 0a0d 0a20 2020 2020 2020 2052  ``.....        R
+0001dd30: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+0001dd40: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0001dd50: 2073 6361 6c61 720d 0a20 2020 2020 2020   scalar..       
+0001dd60: 2020 2020 2054 6865 2076 6172 6961 6e63       The varianc
+0001dd70: 6520 6f66 2074 6865 2076 616c 7565 732e  e of the values.
+0001dd80: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+0001dd90: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
+0001dda0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0001ddb0: 6e75 6d70 792e 7661 720d 0a20 2020 2020  numpy.var..     
+0001ddc0: 2020 2046 6173 7441 7272 6179 2e6e 616e     FastArray.nan
+0001ddd0: 7661 7220 3a20 436f 6d70 7574 6573 2074  var : Computes t
+0001dde0: 6865 2076 6172 6961 6e63 6520 6f66 2060  he variance of `
+0001ddf0: 4661 7374 4172 7261 7960 2076 616c 7565  FastArray` value
+0001de00: 732c 2069 676e 6f72 696e 6720 4e61 4e73  s, ignoring NaNs
+0001de10: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
+0001de20: 6574 2e76 6172 203a 2043 6f6d 7075 7465  et.var : Compute
+0001de30: 7320 7468 6520 7661 7269 616e 6365 206f  s the variance o
+0001de40: 6620 6e75 6d65 7269 6361 6c20 6044 6174  f numerical `Dat
+0001de50: 6173 6574 6020 636f 6c75 6d6e 732e 0d0a  aset` columns...
+0001de60: 2020 2020 2020 2020 4772 6f75 7042 794f          GroupByO
+0001de70: 7073 2e76 6172 203a 2043 6f6d 7075 7465  ps.var : Compute
+0001de80: 7320 7468 6520 7661 7269 616e 6365 206f  s the variance o
+0001de90: 6620 6561 6368 2067 726f 7570 2e20 5573  f each group. Us
+0001dea0: 6564 2062 7920 6043 6174 6567 6f72 6963  ed by `Categoric
+0001deb0: 616c 600d 0a20 2020 2020 2020 2020 2020  al`..           
+0001dec0: 2020 2020 2020 2020 2020 2020 2020 6f62                ob
+0001ded0: 6a65 6374 732e 0d0a 0d0a 2020 2020 2020  jects.....      
+0001dee0: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
+0001def0: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
+0001df00: 5468 6520 6064 7479 7065 6020 6b65 7977  The `dtype` keyw
+0001df10: 6f72 6420 666f 7220 6046 6173 7441 7272  ord for `FastArr
+0001df20: 6179 2e76 6172 6020 7370 6563 6966 6965  ay.var` specifie
+0001df30: 7320 7468 6520 6461 7461 2074 7970 6520  s the data type 
+0001df40: 6f66 2074 6865 2072 6573 756c 742e 0d0a  of the result...
+0001df50: 2020 2020 2020 2020 5468 6973 2064 6966          This dif
+0001df60: 6665 7273 2066 726f 6d20 606e 756d 7079  fers from `numpy
+0001df70: 2e76 6172 602c 2077 6865 7265 2069 7420  .var`, where it 
+0001df80: 7370 6563 6966 6965 7320 7468 6520 6461  specifies the da
+0001df90: 7461 2074 7970 6520 7573 6564 2074 6f20  ta type used to 
+0001dfa0: 636f 6d70 7574 650d 0a20 2020 2020 2020  compute..       
+0001dfb0: 2074 6865 2076 6172 6961 6e63 652e 0d0a   the variance...
+0001dfc0: 0d0a 2020 2020 2020 2020 2a2a 4e6f 7465  ..        **Note
+0001dfd0: 7320 6f6e 2055 7369 6e67 204e 756d 5079  s on Using NumPy
+0001dfe0: 2050 6172 616d 6574 6572 732a 2a0d 0a0d   Parameters**...
+0001dff0: 0a20 2020 2020 2020 2055 7369 6e67 2061  .        Using a
+0001e000: 6e79 206f 6620 7468 6520 666f 6c6c 6f77  ny of the follow
+0001e010: 696e 6720 4e75 6d50 7920 7061 7261 6d65  ing NumPy parame
+0001e020: 7465 7273 2077 696c 6c20 6361 7573 6520  ters will cause 
+0001e030: 5269 7074 6162 6c65 2074 6f20 7377 6974  Riptable to swit
+0001e040: 6368 2074 6f0d 0a20 2020 2020 2020 2074  ch to..        t
+0001e050: 6865 204e 756d 5079 2069 6d70 6c65 6d65  he NumPy impleme
+0001e060: 6e74 6174 696f 6e20 6f66 2074 6869 7320  ntation of this 
+0001e070: 6d65 7468 6f64 2028 606e 756d 7079 2e76  method (`numpy.v
+0001e080: 6172 6029 2e20 486f 7765 7665 722c 2075  ar`). However, u
+0001e090: 6e74 696c 2061 0d0a 2020 2020 2020 2020  ntil a..        
+0001e0a0: 7265 706f 7274 6564 2062 7567 2069 7320  reported bug is 
+0001e0b0: 6669 7865 642c 2069 6620 796f 7520 616c  fixed, if you al
+0001e0c0: 736f 2069 6e63 6c75 6465 2074 6865 2060  so include the `
+0001e0d0: 6474 7970 6560 2070 6172 616d 6574 6572  dtype` parameter
+0001e0e0: 2069 7420 7769 6c6c 2062 650d 0a20 2020   it will be..   
+0001e0f0: 2020 2020 2061 7070 6c69 6564 2074 6f20       applied to 
+0001e100: 7468 6520 7265 7375 6c74 2c20 6e6f 7420  the result, not 
+0001e110: 7573 6564 2074 6f20 636f 6d70 7574 6520  used to compute 
+0001e120: 7468 6520 7661 7269 616e 6365 2061 7320  the variance as 
+0001e130: 6974 2069 7320 696e 2060 6e75 6d70 792e  it is in `numpy.
+0001e140: 7661 7260 2e0d 0a0d 0a20 2020 2020 2020  var`.....       
+0001e150: 2041 6c73 6f20 6e6f 7465 2074 6861 7420   Also note that 
+0001e160: 6966 2079 6f75 2075 7365 2061 6e79 206f  if you use any o
+0001e170: 6620 7468 6520 666f 6c6c 6f77 696e 6720  f the following 
+0001e180: 4e75 6d50 7920 7061 7261 6d65 7465 7273  NumPy parameters
+0001e190: 2061 6e64 2061 6c73 6f0d 0a20 2020 2020   and also..     
+0001e1a0: 2020 2069 6e63 6c75 6465 2061 2060 6669     include a `fi
+0001e1b0: 6c74 6572 6020 6b65 7977 6f72 6420 6172  lter` keyword ar
+0001e1c0: 6775 6d65 6e74 2028 7768 6963 6820 606e  gument (which `n
+0001e1d0: 756d 7079 2e76 6172 6020 646f 6573 206e  umpy.var` does n
+0001e1e0: 6f74 2061 6363 6570 7429 2c0d 0a20 2020  ot accept),..   
+0001e1f0: 2020 2020 2052 6970 7461 626c 6527 7320       Riptable's 
+0001e200: 696d 706c 656d 656e 7461 7469 6f6e 206f  implementation o
+0001e210: 6620 6076 6172 6020 7769 6c6c 2062 6520  f `var` will be 
+0001e220: 7573 6564 2077 6974 6820 7468 6520 6669  used with the fi
+0001e230: 6c74 6572 2061 7267 756d 656e 740d 0a20  lter argument.. 
+0001e240: 2020 2020 2020 2061 6e64 2074 6865 204e         and the N
+0001e250: 756d 5079 2070 6172 616d 6574 6572 7320  umPy parameters 
+0001e260: 7769 6c6c 2062 6520 6967 6e6f 7265 642e  will be ignored.
+0001e270: 0d0a 0d0a 2020 2020 2020 2020 6178 6973  ....        axis
+0001e280: 203a 204e 6f6e 6520 6f72 2069 6e74 206f   : None or int o
+0001e290: 7220 7475 706c 6520 6f66 2069 6e74 732c  r tuple of ints,
+0001e2a0: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
+0001e2b0: 2020 2020 2020 2041 7869 7320 6f72 2061         Axis or a
+0001e2c0: 7865 7320 616c 6f6e 6720 7768 6963 6820  xes along which 
+0001e2d0: 7468 6520 7661 7269 616e 6365 2069 7320  the variance is 
+0001e2e0: 636f 6d70 7574 6564 2e20 5468 6520 6465  computed. The de
+0001e2f0: 6661 756c 7420 6973 2074 6f0d 0a20 2020  fault is to..   
+0001e300: 2020 2020 2020 2020 2063 6f6d 7075 7465           compute
+0001e310: 2074 6865 2076 6172 6961 6e63 6520 6f66   the variance of
+0001e320: 2074 6865 2066 6c61 7474 656e 6564 2061   the flattened a
+0001e330: 7272 6179 2e0d 0a0d 0a20 2020 2020 2020  rray.....       
+0001e340: 206b 6565 7064 696d 7320 3a20 626f 6f6c   keepdims : bool
+0001e350: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
+0001e360: 2020 2020 2020 2020 4966 2074 6869 7320          If this 
+0001e370: 6973 2073 6574 2074 6f20 5472 7565 2c20  is set to True, 
+0001e380: 7468 6520 6178 6573 2077 6869 6368 2061  the axes which a
+0001e390: 7265 2072 6564 7563 6564 2061 7265 206c  re reduced are l
+0001e3a0: 6566 7420 696e 2074 6865 2072 6573 756c  eft in the resul
+0001e3b0: 7420 6173 0d0a 2020 2020 2020 2020 2020  t as..          
+0001e3c0: 2020 6469 6d65 6e73 696f 6e73 2077 6974    dimensions wit
+0001e3d0: 6820 7369 7a65 206f 6e65 2e20 5769 7468  h size one. With
+0001e3e0: 2074 6869 7320 6f70 7469 6f6e 2c20 7468   this option, th
+0001e3f0: 6520 7265 7375 6c74 2077 696c 6c20 6272  e result will br
+0001e400: 6f61 6463 6173 740d 0a20 2020 2020 2020  oadcast..       
+0001e410: 2020 2020 2063 6f72 7265 6374 6c79 2061       correctly a
+0001e420: 6761 696e 7374 2074 6865 2069 6e70 7574  gainst the input
+0001e430: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
+0001e440: 2020 2020 2020 2049 6620 7468 6520 6465         If the de
+0001e450: 6661 756c 7420 7661 6c75 6520 6973 2070  fault value is p
+0001e460: 6173 7365 642c 2074 6865 6e20 606b 6565  assed, then `kee
+0001e470: 7064 696d 7360 2077 696c 6c20 6e6f 7420  pdims` will not 
+0001e480: 6265 2070 6173 7365 6420 7468 726f 7567  be passed throug
+0001e490: 680d 0a20 2020 2020 2020 2020 2020 2074  h..            t
+0001e4a0: 6f20 7468 6520 6076 6172 6020 6d65 7468  o the `var` meth
+0001e4b0: 6f64 206f 6620 7375 622d 636c 6173 7365  od of sub-classe
+0001e4c0: 7320 6f66 2060 6e64 6172 7261 7960 2c20  s of `ndarray`, 
+0001e4d0: 686f 7765 7665 7220 616e 7920 6e6f 6e2d  however any non-
+0001e4e0: 6465 6661 756c 740d 0a20 2020 2020 2020  default..       
+0001e4f0: 2020 2020 2076 616c 7565 2077 696c 6c20       value will 
+0001e500: 6265 2e20 4966 2074 6865 2073 7562 2d63  be. If the sub-c
+0001e510: 6c61 7373 6573 2720 6d65 7468 6f64 2064  lasses' method d
+0001e520: 6f65 7320 6e6f 7420 696d 706c 656d 656e  oes not implemen
+0001e530: 7420 606b 6565 7064 696d 7360 2c20 616e  t `keepdims`, an
+0001e540: 790d 0a20 2020 2020 2020 2020 2020 2065  y..            e
+0001e550: 7863 6570 7469 6f6e 7320 7769 6c6c 2062  xceptions will b
+0001e560: 6520 7261 6973 6564 2e0d 0a0d 0a20 2020  e raised.....   
+0001e570: 2020 2020 2064 646f 6620 3a20 696e 742c       ddof : int,
+0001e580: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
+0001e590: 2020 2020 2020 2022 4465 6c74 6120 4465         "Delta De
+0001e5a0: 6772 6565 7320 6f66 2046 7265 6564 6f6d  grees of Freedom
+0001e5b0: 223a 2074 6865 2064 6976 6973 6f72 2075  ": the divisor u
+0001e5c0: 7365 6420 696e 2074 6865 2063 616c 6375  sed in the calcu
+0001e5d0: 6c61 7469 6f6e 2069 730d 0a20 2020 2020  lation is..     
+0001e5e0: 2020 2020 2020 2060 604e 202d 2064 646f         ``N - ddo
+0001e5f0: 6660 602c 2077 6865 7265 2060 604e 6060  f``, where ``N``
+0001e600: 2072 6570 7265 7365 6e74 7320 7468 6520   represents the 
+0001e610: 6e75 6d62 6572 206f 6620 656c 656d 656e  number of elemen
+0001e620: 7473 2e20 4279 2064 6566 6175 6c74 0d0a  ts. By default..
+0001e630: 2020 2020 2020 2020 2020 2020 6064 646f              `ddo
+0001e640: 6660 2069 7320 7a65 726f 2066 6f72 2074  f` is zero for t
+0001e650: 6865 204e 756d 5079 2069 6d70 6c65 6d65  he NumPy impleme
+0001e660: 6e74 6174 696f 6e2c 2076 6572 7375 7320  ntation, versus 
+0001e670: 6f6e 6520 666f 7220 7468 6520 5269 7074  one for the Ript
+0001e680: 6162 6c65 0d0a 2020 2020 2020 2020 2020  able..          
+0001e690: 2020 696d 706c 656d 656e 7461 7469 6f6e    implementation
+0001e6a0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
+0001e6b0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
+0001e6c0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0001e6d0: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001e6e0: 4172 7261 7928 5b31 2c20 322c 2033 5d29  Array([1, 2, 3])
+0001e6f0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+0001e700: 7661 7228 290d 0a20 2020 2020 2020 2031  var()..        1
+0001e710: 2e30 0d0a 0d0a 2020 2020 2020 2020 5769  .0....        Wi
+0001e720: 7468 2061 2060 6474 7970 6560 2073 7065  th a `dtype` spe
+0001e730: 6369 6669 6564 3a0d 0a0d 0a20 2020 2020  cified:....     
+0001e740: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
+0001e750: 7374 4172 7261 7928 5b31 2c20 322c 2033  stArray([1, 2, 3
+0001e760: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+0001e770: 612e 7661 7228 6474 7970 6520 3d20 7274  a.var(dtype = rt
+0001e780: 2e69 6e74 3332 290d 0a20 2020 2020 2020  .int32)..       
+0001e790: 2031 0d0a 0d0a 2020 2020 2020 2020 5769   1....        Wi
+0001e7a0: 7468 2061 2066 696c 7465 723a 0d0a 0d0a  th a filter:....
+0001e7b0: 2020 2020 2020 2020 3e3e 3e20 6120 3d20          >>> a = 
+0001e7c0: 7274 2e46 6173 7441 7272 6179 285b 312c  rt.FastArray([1,
+0001e7d0: 2032 2c20 335d 290d 0a20 2020 2020 2020   2, 3])..       
+0001e7e0: 203e 3e3e 2062 203d 2072 742e 4661 7374   >>> b = rt.Fast
+0001e7f0: 4172 7261 7928 5b46 616c 7365 2c20 5472  Array([False, Tr
+0001e800: 7565 2c20 5472 7565 5d29 0d0a 2020 2020  ue, True])..    
+0001e810: 2020 2020 3e3e 3e20 612e 7661 7228 6669      >>> a.var(fi
+0001e820: 6c74 6572 203d 2062 290d 0a20 2020 2020  lter = b)..     
+0001e830: 2020 2030 2e35 0d0a 2020 2020 2020 2020     0.5..        
+0001e840: 2222 220d 0a0d 0a20 2020 2020 2020 206b  """....        k
+0001e850: 7761 7267 7320 3d20 7365 6c66 2e5f 6661  wargs = self._fa
+0001e860: 5f6b 6579 776f 7264 5f77 7261 7070 6572  _keyword_wrapper
+0001e870: 2866 696c 7465 723d 6669 6c74 6572 2c20  (filter=filter, 
+0001e880: 6474 7970 653d 6474 7970 652c 2061 7869  dtype=dtype, axi
+0001e890: 733d 6178 6973 2c20 6b65 6570 6469 6d73  s=axis, keepdims
+0001e8a0: 3d6b 6565 7064 696d 732c 2064 646f 663d  =keepdims, ddof=
+0001e8b0: 6464 6f66 2c20 2a2a 6b77 6172 6773 290d  ddof, **kwargs).
+0001e8c0: 0a0d 0a20 2020 2020 2020 2069 6620 6669  ...        if fi
+0001e8d0: 6c74 6572 2069 7320 6e6f 7420 4e6f 6e65  lter is not None
+0001e8e0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+0001e8f0: 6574 7572 6e20 7365 6c66 2e5f 6661 5f66  eturn self._fa_f
+0001e900: 696c 7465 725f 7772 6170 7065 7228 5f66  ilter_wrapper(_f
+0001e910: 7661 722c 2066 696c 7465 723d 6669 6c74  var, filter=filt
+0001e920: 6572 2c20 6474 7970 653d 6474 7970 6529  er, dtype=dtype)
+0001e930: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
+0001e940: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
+0001e950: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
+0001e960: 4354 494f 4e53 2e52 4544 5543 455f 5641  CTIONS.REDUCE_VA
+0001e970: 522c 206e 702e 7661 722c 202a 2a6b 7761  R, np.var, **kwa
+0001e980: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
+0001e990: 6e61 6e76 6172 2873 656c 662c 2066 696c  nanvar(self, fil
+0001e9a0: 7465 723d 4e6f 6e65 2c20 6474 7970 653d  ter=None, dtype=
+0001e9b0: 4e6f 6e65 2c20 6178 6973 3d4e 6f6e 652c  None, axis=None,
+0001e9c0: 206b 6565 7064 696d 733d 4e6f 6e65 2c20   keepdims=None, 
+0001e9d0: 6464 6f66 3d4e 6f6e 652c 202a 2a6b 7761  ddof=None, **kwa
+0001e9e0: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
+0001e9f0: 723a 0d0a 2020 2020 2020 2020 2222 220d  r:..        """.
+0001ea00: 0a20 2020 2020 2020 2043 6f6d 7075 7465  .        Compute
+0001ea10: 2074 6865 2076 6172 6961 6e63 6520 6f66   the variance of
+0001ea20: 2074 6865 2076 616c 7565 7320 696e 2074   the values in t
+0001ea30: 6865 2066 6972 7374 2061 7267 756d 656e  he first argumen
+0001ea40: 742c 2069 676e 6f72 696e 6720 4e61 4e73  t, ignoring NaNs
+0001ea50: 2e0d 0a0d 0a20 2020 2020 2020 2049 6620  .....        If 
+0001ea60: 616c 6c20 7661 6c75 6573 2069 6e20 7468  all values in th
+0001ea70: 6520 6669 7273 7420 6172 6775 6d65 6e74  e first argument
+0001ea80: 2061 7265 204e 614e 732c 2060 604e 614e   are NaNs, ``NaN
+0001ea90: 6060 2069 7320 7265 7475 726e 6564 2e0d  `` is returned..
+0001eaa0: 0a0d 0a20 2020 2020 2020 2052 6970 7461  ...        Ripta
+0001eab0: 626c 6520 7573 6573 2074 6865 2063 6f6e  ble uses the con
+0001eac0: 7665 6e74 696f 6e20 7468 6174 2060 6064  vention that ``d
+0001ead0: 646f 6620 3d20 3160 602c 206d 6561 6e69  dof = 1``, meani
+0001eae0: 6e67 2074 6865 2076 6172 6961 6e63 6520  ng the variance 
+0001eaf0: 6f66 0d0a 2020 2020 2020 2020 6060 5b78  of..        ``[x
+0001eb00: 5f31 2c20 2e2e 2e2c 2078 5f6e 5d60 6020  _1, ..., x_n]`` 
+0001eb10: 6973 2064 6566 696e 6564 2062 7920 6060  is defined by ``
+0001eb20: 7661 7220 3d20 312f 286e 202d 2031 2920  var = 1/(n - 1) 
+0001eb30: 2a20 7375 6d28 785f 6920 2d20 6d65 616e  * sum(x_i - mean
+0001eb40: 2029 2a2a 3260 6020 286e 6f74 650d 0a20   )**2`` (note.. 
+0001eb50: 2020 2020 2020 2074 6865 2060 606e 202d         the ``n -
+0001eb60: 2031 6060 2069 6e73 7465 6164 206f 6620   1`` instead of 
+0001eb70: 6060 6e60 6029 2e20 5468 6973 2064 6966  ``n``). This dif
+0001eb80: 6665 7273 2066 726f 6d20 4e75 6d50 792c  fers from NumPy,
+0001eb90: 2077 6869 6368 2075 7365 7320 6060 6464   which uses ``dd
+0001eba0: 6f66 203d 2030 6060 2062 790d 0a20 2020  of = 0`` by..   
+0001ebb0: 2020 2020 2064 6566 6175 6c74 2e0d 0a0d       default....
+0001ebc0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+0001ebd0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+0001ebe0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0001ebf0: 2066 696c 7465 7220 3a20 6172 7261 7920   filter : array 
+0001ec00: 6f66 2062 6f6f 6c2c 2064 6566 6175 6c74  of bool, default
+0001ec10: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
+0001ec20: 2020 2053 7065 6369 6669 6573 2077 6869     Specifies whi
+0001ec30: 6368 2065 6c65 6d65 6e74 7320 746f 2069  ch elements to i
+0001ec40: 6e63 6c75 6465 2069 6e20 7468 6520 7661  nclude in the va
+0001ec50: 7269 616e 6365 2063 616c 6375 6c61 7469  riance calculati
+0001ec60: 6f6e 2e20 4966 2074 6865 2066 696c 7465  on. If the filte
+0001ec70: 720d 0a20 2020 2020 2020 2020 2020 2069  r..            i
+0001ec80: 7320 756e 6966 6f72 6d6c 7920 6060 4661  s uniformly ``Fa
+0001ec90: 6c73 6560 602c 2060 6e61 6e76 6172 6020  lse``, `nanvar` 
+0001eca0: 7265 7475 726e 7320 6120 605a 6572 6f44  returns a `ZeroD
+0001ecb0: 6976 6973 696f 6e45 7272 6f72 602e 0d0a  ivisionError`...
+0001ecc0: 0d0a 2020 2020 2020 2020 6474 7970 6520  ..        dtype 
+0001ecd0: 3a20 7274 2e64 7479 7065 206f 7220 6e75  : rt.dtype or nu
+0001ece0: 6d70 792e 6474 7970 652c 2064 6566 6175  mpy.dtype, defau
+0001ecf0: 6c74 2066 6c6f 6174 3634 0d0a 2020 2020  lt float64..    
+0001ed00: 2020 2020 2020 2020 5468 6520 6461 7461          The data
+0001ed10: 2074 7970 6520 6f66 2074 6865 2072 6573   type of the res
+0001ed20: 756c 742e 2046 6f72 2061 2060 4661 7374  ult. For a `Fast
+0001ed30: 4172 7261 7960 2060 6078 6060 2c0d 0a20  Array` ``x``,.. 
+0001ed40: 2020 2020 2020 2020 2020 2060 6078 2e6e             ``x.n
+0001ed50: 616e 7661 7228 6474 7970 6520 3d20 6d79  anvar(dtype = my
+0001ed60: 5f74 7970 6529 6060 2069 7320 6571 7569  _type)`` is equi
+0001ed70: 7661 6c65 6e74 2074 6f20 6060 6d79 5f74  valent to ``my_t
+0001ed80: 7970 6528 782e 6e61 6e76 6172 2829 2960  ype(x.nanvar())`
+0001ed90: 602e 0d0a 0d0a 2020 2020 2020 2020 5265  `.....        Re
+0001eda0: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+0001edb0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0001edc0: 7363 616c 6172 0d0a 2020 2020 2020 2020  scalar..        
+0001edd0: 2020 2020 5468 6520 7661 7269 616e 6365      The variance
+0001ede0: 206f 6620 7468 6520 7661 6c75 6573 2e0d   of the values..
+0001edf0: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
+0001ee00: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
+0001ee10: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 206e  -----..        n
+0001ee20: 756d 7079 2e6e 616e 7661 720d 0a20 2020  umpy.nanvar..   
+0001ee30: 2020 2020 2046 6173 7441 7272 6179 2e76       FastArray.v
+0001ee40: 6172 203a 2043 6f6d 7075 7465 7320 7468  ar : Computes th
+0001ee50: 6520 7661 7269 616e 6365 206f 6620 6046  e variance of `F
+0001ee60: 6173 7441 7272 6179 6020 7661 6c75 6573  astArray` values
+0001ee70: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
+0001ee80: 6574 2e6e 616e 7661 7220 3a20 436f 6d70  et.nanvar : Comp
+0001ee90: 7574 6573 2074 6865 2076 6172 6961 6e63  utes the varianc
+0001eea0: 6520 6f66 206e 756d 6572 6963 616c 2060  e of numerical `
+0001eeb0: 4461 7461 7365 7460 2063 6f6c 756d 6e73  Dataset` columns
+0001eec0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001eed0: 2020 2020 2020 2020 2020 2020 6967 6e6f              igno
+0001eee0: 7269 6e67 204e 614e 732e 0d0a 2020 2020  ring NaNs...    
+0001eef0: 2020 2020 4772 6f75 7042 794f 7073 2e6e      GroupByOps.n
+0001ef00: 616e 7661 7220 3a20 436f 6d70 7574 6573  anvar : Computes
+0001ef10: 2074 6865 2076 6172 6961 6e63 6520 6f66   the variance of
+0001ef20: 2065 6163 6820 6772 6f75 702c 2069 676e   each group, ign
+0001ef30: 6f72 696e 6720 4e61 4e73 2e20 5573 6564  oring NaNs. Used
+0001ef40: 2062 790d 0a20 2020 2020 2020 2020 2020   by..           
+0001ef50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ef60: 2060 4361 7465 676f 7269 6361 6c60 206f   `Categorical` o
+0001ef70: 626a 6563 7473 2e0d 0a0d 0a20 2020 2020  bjects.....     
+0001ef80: 2020 204e 6f74 6573 0d0a 2020 2020 2020     Notes..      
+0001ef90: 2020 2d2d 2d2d 2d0d 0a20 2020 2020 2020    -----..       
+0001efa0: 2054 6865 2060 6474 7970 6560 206b 6579   The `dtype` key
+0001efb0: 776f 7264 2066 6f72 2060 4661 7374 4172  word for `FastAr
+0001efc0: 7261 792e 6e61 6e76 6172 6020 7370 6563  ray.nanvar` spec
+0001efd0: 6966 6965 7320 7468 6520 6461 7461 2074  ifies the data t
+0001efe0: 7970 6520 6f66 2074 6865 0d0a 2020 2020  ype of the..    
+0001eff0: 2020 2020 7265 7375 6c74 2e20 5468 6973      result. This
+0001f000: 2064 6966 6665 7273 2066 726f 6d20 606e   differs from `n
+0001f010: 756d 7079 2e6e 616e 7661 7260 2c20 7768  umpy.nanvar`, wh
+0001f020: 6572 6520 6974 2073 7065 6369 6669 6573  ere it specifies
+0001f030: 2074 6865 2064 6174 6120 7479 7065 2075   the data type u
+0001f040: 7365 640d 0a20 2020 2020 2020 2074 6f20  sed..        to 
+0001f050: 636f 6d70 7574 6520 7468 6520 7661 7269  compute the vari
+0001f060: 616e 6365 2e0d 0a0d 0a20 2020 2020 2020  ance.....       
+0001f070: 202a 2a4e 6f74 6573 206f 6e20 5573 696e   **Notes on Usin
+0001f080: 6720 4e75 6d50 7920 5061 7261 6d65 7465  g NumPy Paramete
+0001f090: 7273 2a2a 0d0a 0d0a 2020 2020 2020 2020  rs**....        
+0001f0a0: 5573 696e 6720 616e 7920 6f66 2074 6865  Using any of the
+0001f0b0: 2066 6f6c 6c6f 7769 6e67 204e 756d 5079   following NumPy
+0001f0c0: 2070 6172 616d 6574 6572 7320 7769 6c6c   parameters will
+0001f0d0: 2063 6175 7365 2052 6970 7461 626c 6520   cause Riptable 
+0001f0e0: 746f 2073 7769 7463 6820 746f 0d0a 2020  to switch to..  
+0001f0f0: 2020 2020 2020 7468 6520 4e75 6d50 7920        the NumPy 
+0001f100: 696d 706c 656d 656e 7461 7469 6f6e 206f  implementation o
+0001f110: 6620 7468 6973 206d 6574 686f 6420 2860  f this method (`
+0001f120: 6e75 6d70 792e 6e61 6e76 6172 6029 2e20  numpy.nanvar`). 
+0001f130: 486f 7765 7665 722c 2075 6e74 696c 2061  However, until a
+0001f140: 0d0a 2020 2020 2020 2020 7265 706f 7274  ..        report
+0001f150: 6564 2062 7567 2069 7320 6669 7865 642c  ed bug is fixed,
+0001f160: 2069 6620 796f 7520 616c 736f 2069 6e63   if you also inc
+0001f170: 6c75 6465 2074 6865 2060 6474 7970 6560  lude the `dtype`
+0001f180: 2070 6172 616d 6574 6572 2069 7420 7769   parameter it wi
+0001f190: 6c6c 2062 650d 0a20 2020 2020 2020 2061  ll be..        a
+0001f1a0: 7070 6c69 6564 2074 6f20 7468 6520 7265  pplied to the re
+0001f1b0: 7375 6c74 2c20 6e6f 7420 7573 6564 2074  sult, not used t
+0001f1c0: 6f20 636f 6d70 7574 6520 7468 6520 7661  o compute the va
+0001f1d0: 7269 616e 6365 2061 7320 6974 2069 7320  riance as it is 
+0001f1e0: 696e 0d0a 2020 2020 2020 2020 606e 756d  in..        `num
+0001f1f0: 7079 2e6e 616e 7661 7260 2e0d 0a0d 0a20  py.nanvar`..... 
+0001f200: 2020 2020 2020 2041 6c73 6f20 6e6f 7465         Also note
+0001f210: 2074 6861 7420 6966 2079 6f75 2075 7365   that if you use
+0001f220: 2061 6e79 206f 6620 7468 6520 666f 6c6c   any of the foll
+0001f230: 6f77 696e 6720 4e75 6d50 7920 7061 7261  owing NumPy para
+0001f240: 6d65 7465 7273 2061 6e64 2061 6c73 6f0d  meters and also.
+0001f250: 0a20 2020 2020 2020 2069 6e63 6c75 6465  .        include
+0001f260: 2061 2060 6669 6c74 6572 6020 6b65 7977   a `filter` keyw
+0001f270: 6f72 6420 6172 6775 6d65 6e74 2028 7768  ord argument (wh
+0001f280: 6963 6820 606e 756d 7079 2e6e 616e 7661  ich `numpy.nanva
+0001f290: 7260 2064 6f65 7320 6e6f 7420 6163 6365  r` does not acce
+0001f2a0: 7074 292c 0d0a 2020 2020 2020 2020 5269  pt),..        Ri
+0001f2b0: 7074 6162 6c65 2773 2069 6d70 6c65 6d65  ptable's impleme
+0001f2c0: 6e74 6174 696f 6e20 6f66 2060 6e61 6e76  ntation of `nanv
+0001f2d0: 6172 6020 7769 6c6c 2062 6520 7573 6564  ar` will be used
+0001f2e0: 2077 6974 6820 7468 6520 6669 6c74 6572   with the filter
+0001f2f0: 2061 7267 756d 656e 740d 0a20 2020 2020   argument..     
+0001f300: 2020 2061 6e64 2074 6865 204e 756d 5079     and the NumPy
+0001f310: 2070 6172 616d 6574 6572 7320 7769 6c6c   parameters will
+0001f320: 2062 6520 6967 6e6f 7265 642e 0d0a 0d0a   be ignored.....
+0001f330: 2020 2020 2020 2020 6178 6973 203a 207b          axis : {
+0001f340: 696e 742c 2074 7570 6c65 206f 6620 696e  int, tuple of in
+0001f350: 742c 204e 6f6e 657d 2c20 6f70 7469 6f6e  t, None}, option
+0001f360: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
+0001f370: 4178 6973 206f 7220 6178 6573 2061 6c6f  Axis or axes alo
+0001f380: 6e67 2077 6869 6368 2074 6865 2076 6172  ng which the var
+0001f390: 6961 6e63 6520 6973 2063 6f6d 7075 7465  iance is compute
+0001f3a0: 642e 2054 6865 2064 6566 6175 6c74 2069  d. The default i
+0001f3b0: 7320 746f 0d0a 2020 2020 2020 2020 2020  s to..          
+0001f3c0: 2020 636f 6d70 7574 6520 7468 6520 7661    compute the va
+0001f3d0: 7269 616e 6365 206f 6620 7468 6520 666c  riance of the fl
+0001f3e0: 6174 7465 6e65 6420 6172 7261 792e 0d0a  attened array...
+0001f3f0: 0d0a 2020 2020 2020 2020 6b65 6570 6469  ..        keepdi
+0001f400: 6d73 203a 2062 6f6f 6c2c 206f 7074 696f  ms : bool, optio
+0001f410: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
+0001f420: 2049 6620 7468 6973 2069 7320 7365 7420   If this is set 
+0001f430: 746f 2054 7275 652c 2074 6865 2061 7865  to True, the axe
+0001f440: 7320 7768 6963 6820 6172 6520 7265 6475  s which are redu
+0001f450: 6365 6420 6172 6520 6c65 6674 2069 6e20  ced are left in 
+0001f460: 7468 6520 7265 7375 6c74 2061 730d 0a20  the result as.. 
+0001f470: 2020 2020 2020 2020 2020 2064 696d 656e             dimen
+0001f480: 7369 6f6e 7320 7769 7468 2073 697a 6520  sions with size 
+0001f490: 6f6e 652e 2057 6974 6820 7468 6973 206f  one. With this o
+0001f4a0: 7074 696f 6e2c 2074 6865 2072 6573 756c  ption, the resul
+0001f4b0: 7420 7769 6c6c 2062 726f 6164 6361 7374  t will broadcast
+0001f4c0: 0d0a 2020 2020 2020 2020 2020 2020 636f  ..            co
+0001f4d0: 7272 6563 746c 7920 6167 6169 6e73 7420  rrectly against 
+0001f4e0: 7468 6520 6f72 6967 696e 616c 2069 6e70  the original inp
+0001f4f0: 7574 2061 7272 6179 2e0d 0a0d 0a20 2020  ut array.....   
+0001f500: 2020 2020 2064 646f 6620 3a20 696e 742c       ddof : int,
+0001f510: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
+0001f520: 2020 2020 2020 2022 4465 6c74 6120 4465         "Delta De
+0001f530: 6772 6565 7320 6f66 2046 7265 6564 6f6d  grees of Freedom
+0001f540: 223a 2074 6865 2064 6976 6973 6f72 2075  ": the divisor u
+0001f550: 7365 6420 696e 2074 6865 2063 616c 6375  sed in the calcu
+0001f560: 6c61 7469 6f6e 2069 730d 0a20 2020 2020  lation is..     
+0001f570: 2020 2020 2020 2060 604e 202d 2064 646f         ``N - ddo
+0001f580: 6660 602c 2077 6865 7265 2060 604e 6060  f``, where ``N``
+0001f590: 2072 6570 7265 7365 6e74 7320 7468 6520   represents the 
+0001f5a0: 6e75 6d62 6572 206f 6620 6e6f 6e2d 4e61  number of non-Na
+0001f5b0: 4e20 656c 656d 656e 7473 2e20 4279 0d0a  N elements. By..
+0001f5c0: 2020 2020 2020 2020 2020 2020 6465 6661              defa
+0001f5d0: 756c 7420 6064 646f 6660 2069 7320 7a65  ult `ddof` is ze
+0001f5e0: 726f 2066 6f72 2074 6865 204e 756d 5079  ro for the NumPy
+0001f5f0: 2069 6d70 6c65 6d65 6e74 6174 696f 6e2c   implementation,
+0001f600: 2076 6572 7375 7320 6f6e 6520 666f 7220   versus one for 
+0001f610: 7468 650d 0a20 2020 2020 2020 2020 2020  the..           
+0001f620: 2052 6970 7461 626c 6520 696d 706c 656d   Riptable implem
+0001f630: 656e 7461 7469 6f6e 2e0d 0a0d 0a20 2020  entation.....   
+0001f640: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+0001f650: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+0001f660: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+0001f670: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
+0001f680: 2c20 322c 2033 2c20 7274 2e6e 616e 5d29  , 2, 3, rt.nan])
+0001f690: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+0001f6a0: 6e61 6e76 6172 2829 0d0a 2020 2020 2020  nanvar()..      
+0001f6b0: 2020 312e 300d 0a0d 0a20 2020 2020 2020    1.0....       
+0001f6c0: 2057 6974 6820 6120 6064 7479 7065 6020   With a `dtype` 
+0001f6d0: 7370 6563 6966 6965 643a 0d0a 0d0a 2020  specified:....  
+0001f6e0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+0001f6f0: 2e46 6173 7441 7272 6179 285b 312c 2032  .FastArray([1, 2
+0001f700: 2c20 332c 2072 742e 6e61 6e5d 290d 0a20  , 3, rt.nan]).. 
+0001f710: 2020 2020 2020 203e 3e3e 2061 2e6e 616e         >>> a.nan
+0001f720: 7661 7228 6474 7970 6520 3d20 7274 2e69  var(dtype = rt.i
+0001f730: 6e74 3332 290d 0a20 2020 2020 2020 2031  nt32)..        1
+0001f740: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+0001f750: 2061 2066 696c 7465 723a 0d0a 0d0a 2020   a filter:....  
+0001f760: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+0001f770: 2e46 6173 7441 7272 6179 285b 312c 2032  .FastArray([1, 2
+0001f780: 2c20 332c 2072 742e 6e61 6e5d 290d 0a20  , 3, rt.nan]).. 
+0001f790: 2020 2020 2020 203e 3e3e 2062 203d 2072         >>> b = r
+0001f7a0: 742e 4661 7374 4172 7261 7928 5b46 616c  t.FastArray([Fal
+0001f7b0: 7365 2c20 5472 7565 2c20 5472 7565 2c20  se, True, True, 
+0001f7c0: 5472 7565 5d29 0d0a 2020 2020 2020 2020  True])..        
+0001f7d0: 3e3e 3e20 612e 6e61 6e76 6172 2866 696c  >>> a.nanvar(fil
+0001f7e0: 7465 7220 3d20 6229 0d0a 2020 2020 2020  ter = b)..      
+0001f7f0: 2020 302e 350d 0a20 2020 2020 2020 2022    0.5..        "
+0001f800: 2222 0d0a 0d0a 2020 2020 2020 2020 6b77  ""....        kw
+0001f810: 6172 6773 203d 2073 656c 662e 5f66 615f  args = self._fa_
+0001f820: 6b65 7977 6f72 645f 7772 6170 7065 7228  keyword_wrapper(
+0001f830: 6669 6c74 6572 3d66 696c 7465 722c 2064  filter=filter, d
+0001f840: 7479 7065 3d64 7479 7065 2c20 6178 6973  type=dtype, axis
+0001f850: 3d61 7869 732c 206b 6565 7064 696d 733d  =axis, keepdims=
+0001f860: 6b65 6570 6469 6d73 2c20 6464 6f66 3d64  keepdims, ddof=d
+0001f870: 646f 662c 202a 2a6b 7761 7267 7329 0d0a  dof, **kwargs)..
+0001f880: 0d0a 2020 2020 2020 2020 6966 2066 696c  ..        if fil
+0001f890: 7465 7220 6973 206e 6f74 204e 6f6e 653a  ter is not None:
+0001f8a0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0001f8b0: 7475 726e 2073 656c 662e 5f66 615f 6669  turn self._fa_fi
+0001f8c0: 6c74 6572 5f77 7261 7070 6572 285f 666e  lter_wrapper(_fn
+0001f8d0: 616e 7661 722c 2066 696c 7465 723d 6669  anvar, filter=fi
+0001f8e0: 6c74 6572 2c20 6474 7970 653d 6474 7970  lter, dtype=dtyp
+0001f8f0: 6529 0d0a 0d0a 2020 2020 2020 2020 7265  e)....        re
+0001f900: 7475 726e 2073 656c 662e 5f72 6564 7563  turn self._reduc
+0001f910: 655f 6368 6563 6b28 5245 4455 4345 5f46  e_check(REDUCE_F
+0001f920: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+0001f930: 4e41 4e56 4152 2c20 6e70 2e6e 616e 7661  NANVAR, np.nanva
+0001f940: 722c 202a 2a6b 7761 7267 7329 0d0a 0d0a  r, **kwargs)....
+0001f950: 2020 2020 6465 6620 7374 6428 7365 6c66      def std(self
+0001f960: 2c20 6669 6c74 6572 3d4e 6f6e 652c 2064  , filter=None, d
+0001f970: 7479 7065 3d4e 6f6e 652c 2061 7869 733d  type=None, axis=
+0001f980: 4e6f 6e65 2c20 6b65 6570 6469 6d73 3d4e  None, keepdims=N
+0001f990: 6f6e 652c 2064 646f 663d 4e6f 6e65 2c20  one, ddof=None, 
+0001f9a0: 2a2a 6b77 6172 6773 2920 2d3e 206e 702e  **kwargs) -> np.
+0001f9b0: 6e75 6d62 6572 3a0d 0a20 2020 2020 2020  number:..       
+0001f9c0: 2022 2222 0d0a 2020 2020 2020 2020 436f   """..        Co
+0001f9d0: 6d70 7574 6520 7468 6520 7374 616e 6461  mpute the standa
+0001f9e0: 7264 2064 6576 6961 7469 6f6e 206f 6620  rd deviation of 
+0001f9f0: 7468 6520 7661 6c75 6573 2069 6e20 7468  the values in th
+0001fa00: 6520 6669 7273 7420 6172 6775 6d65 6e74  e first argument
+0001fa10: 2e0d 0a0d 0a20 2020 2020 2020 2052 6970  .....        Rip
+0001fa20: 7461 626c 6520 7573 6573 2074 6865 2063  table uses the c
+0001fa30: 6f6e 7665 6e74 696f 6e20 7468 6174 2060  onvention that `
+0001fa40: 6064 646f 6620 3d20 3160 602c 206d 6561  `ddof = 1``, mea
+0001fa50: 6e69 6e67 2074 6865 2073 7461 6e64 6172  ning the standar
+0001fa60: 6420 6465 7669 6174 696f 6e20 6f66 0d0a  d deviation of..
+0001fa70: 2020 2020 2020 2020 6060 5b78 5f31 2c20          ``[x_1, 
+0001fa80: 2e2e 2e2c 2078 5f6e 5d60 6020 6973 2064  ..., x_n]`` is d
+0001fa90: 6566 696e 6564 2062 7920 6060 7374 6420  efined by ``std 
+0001faa0: 3d20 312f 286e 202d 2031 2920 2a20 7375  = 1/(n - 1) * su
+0001fab0: 6d28 785f 6920 2d20 6d65 616e 2029 2a2a  m(x_i - mean )**
+0001fac0: 3260 6020 286e 6f74 650d 0a20 2020 2020  2`` (note..     
+0001fad0: 2020 2074 6865 2060 606e 202d 2031 6060     the ``n - 1``
+0001fae0: 2069 6e73 7465 6164 206f 6620 6060 6e60   instead of ``n`
+0001faf0: 6029 2e20 5468 6973 2064 6966 6665 7273  `). This differs
+0001fb00: 2066 726f 6d20 4e75 6d50 792c 2077 6869   from NumPy, whi
+0001fb10: 6368 2075 7365 7320 6060 6464 6f66 203d  ch uses ``ddof =
+0001fb20: 2030 6060 2062 790d 0a20 2020 2020 2020   0`` by..       
+0001fb30: 2064 6566 6175 6c74 2e0d 0a0d 0a20 2020   default.....   
+0001fb40: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
+0001fb50: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0001fb60: 2d2d 2d0d 0a20 2020 2020 2020 2066 696c  ---..        fil
+0001fb70: 7465 7220 3a20 6172 7261 7920 6f66 2062  ter : array of b
+0001fb80: 6f6f 6c2c 2064 6566 6175 6c74 204e 6f6e  ool, default Non
+0001fb90: 650d 0a20 2020 2020 2020 2020 2020 2053  e..            S
+0001fba0: 7065 6369 6669 6573 2077 6869 6368 2065  pecifies which e
+0001fbb0: 6c65 6d65 6e74 7320 746f 2069 6e63 6c75  lements to inclu
+0001fbc0: 6465 2069 6e20 7468 6520 7374 616e 6461  de in the standa
+0001fbd0: 7264 2064 6576 6961 7469 6f6e 2063 616c  rd deviation cal
+0001fbe0: 6375 6c61 7469 6f6e 2e20 4966 0d0a 2020  culation. If..  
+0001fbf0: 2020 2020 2020 2020 2020 7468 6520 6669            the fi
+0001fc00: 6c74 6572 2069 7320 756e 6966 6f72 6d6c  lter is uniforml
+0001fc10: 7920 6060 4661 6c73 6560 602c 2060 7374  y ``False``, `st
+0001fc20: 6460 2072 6574 7572 6e73 2061 2060 5a65  d` returns a `Ze
+0001fc30: 726f 4469 7669 7369 6f6e 4572 726f 7260  roDivisionError`
+0001fc40: 2e0d 0a0d 0a20 2020 2020 2020 2064 7479  .....        dty
+0001fc50: 7065 203a 2072 742e 6474 7970 6520 6f72  pe : rt.dtype or
+0001fc60: 206e 756d 7079 2e64 7479 7065 2c20 6465   numpy.dtype, de
+0001fc70: 6661 756c 7420 666c 6f61 7436 340d 0a20  fault float64.. 
+0001fc80: 2020 2020 2020 2020 2020 2054 6865 2064             The d
+0001fc90: 6174 6120 7479 7065 206f 6620 7468 6520  ata type of the 
+0001fca0: 7265 7375 6c74 2e20 466f 7220 6120 6046  result. For a `F
+0001fcb0: 6173 7441 7272 6179 6020 6060 7860 602c  astArray` ``x``,
+0001fcc0: 0d0a 2020 2020 2020 2020 2020 2020 6060  ..            ``
+0001fcd0: 782e 7374 6428 6474 7970 6520 3d20 6d79  x.std(dtype = my
+0001fce0: 5f74 7970 6529 6060 2069 7320 6571 7569  _type)`` is equi
+0001fcf0: 7661 6c65 6e74 2074 6f20 6060 6d79 5f74  valent to ``my_t
+0001fd00: 7970 6528 782e 7374 6428 2929 6060 2e0d  ype(x.std())``..
+0001fd10: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+0001fd20: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+0001fd30: 2d2d 2d0d 0a20 2020 2020 2020 2073 6361  ---..        sca
+0001fd40: 6c61 720d 0a20 2020 2020 2020 2020 2020  lar..           
+0001fd50: 2054 6865 2073 7461 6e64 6172 6420 6465   The standard de
+0001fd60: 7669 6174 696f 6e20 6f66 2074 6865 2076  viation of the v
+0001fd70: 616c 7565 732e 0d0a 0d0a 2020 2020 2020  alues.....      
+0001fd80: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
+0001fd90: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+0001fda0: 2020 2020 2020 6e75 6d70 792e 7374 640d        numpy.std.
+0001fdb0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+0001fdc0: 6179 2e6e 616e 7374 6420 3a20 436f 6d70  ay.nanstd : Comp
+0001fdd0: 7574 6573 2074 6865 2073 7461 6e64 6172  utes the standar
+0001fde0: 6420 6465 7669 6174 696f 6e20 6f66 2060  d deviation of `
+0001fdf0: 4661 7374 4172 7261 7960 2076 616c 7565  FastArray` value
+0001fe00: 732c 2069 676e 6f72 696e 670d 0a20 2020  s, ignoring..   
+0001fe10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe20: 2020 2020 2020 2020 4e61 4e73 2e0d 0a20          NaNs... 
+0001fe30: 2020 2020 2020 2044 6174 6173 6574 2e73         Dataset.s
+0001fe40: 7464 203a 2043 6f6d 7075 7465 7320 7468  td : Computes th
+0001fe50: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
+0001fe60: 7469 6f6e 206f 6620 6e75 6d65 7269 6361  tion of numerica
+0001fe70: 6c20 6044 6174 6173 6574 6020 636f 6c75  l `Dataset` colu
+0001fe80: 6d6e 732e 0d0a 2020 2020 2020 2020 4772  mns...        Gr
+0001fe90: 6f75 7042 794f 7073 2e73 7464 203a 2043  oupByOps.std : C
+0001fea0: 6f6d 7075 7465 7320 7468 6520 7374 616e  omputes the stan
+0001feb0: 6461 7264 2064 6576 6961 7469 6f6e 206f  dard deviation o
+0001fec0: 6620 6561 6368 2067 726f 7570 2e20 5573  f each group. Us
+0001fed0: 6564 2062 790d 0a20 2020 2020 2020 2020  ed by..         
+0001fee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fef0: 6043 6174 6567 6f72 6963 616c 6020 6f62  `Categorical` ob
+0001ff00: 6a65 6374 732e 0d0a 0d0a 2020 2020 2020  jects.....      
+0001ff10: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
+0001ff20: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
+0001ff30: 5468 6520 6064 7479 7065 6020 6b65 7977  The `dtype` keyw
+0001ff40: 6f72 6420 666f 7220 6046 6173 7441 7272  ord for `FastArr
+0001ff50: 6179 2e73 7464 6020 7370 6563 6966 6965  ay.std` specifie
+0001ff60: 7320 7468 6520 6461 7461 2074 7970 6520  s the data type 
+0001ff70: 6f66 2074 6865 2072 6573 756c 742e 0d0a  of the result...
+0001ff80: 2020 2020 2020 2020 5468 6973 2064 6966          This dif
+0001ff90: 6665 7273 2066 726f 6d20 606e 756d 7079  fers from `numpy
+0001ffa0: 2e73 7464 602c 2077 6865 7265 2069 7420  .std`, where it 
+0001ffb0: 7370 6563 6966 6965 7320 7468 6520 6461  specifies the da
+0001ffc0: 7461 2074 7970 6520 7573 6564 2074 6f20  ta type used to 
+0001ffd0: 636f 6d70 7574 650d 0a20 2020 2020 2020  compute..       
+0001ffe0: 2074 6865 2073 7461 6e64 6172 6420 6465   the standard de
+0001fff0: 7669 6174 696f 6e2e 0d0a 0d0a 2020 2020  viation.....    
+00020000: 2020 2020 2a2a 4e6f 7465 7320 6f6e 2055      **Notes on U
+00020010: 7369 6e67 204e 756d 5079 2050 6172 616d  sing NumPy Param
+00020020: 6574 6572 732a 2a0d 0a0d 0a20 2020 2020  eters**....     
+00020030: 2020 2055 7369 6e67 2061 6e79 206f 6620     Using any of 
+00020040: 7468 6520 666f 6c6c 6f77 696e 6720 4e75  the following Nu
+00020050: 6d50 7920 7061 7261 6d65 7465 7273 2077  mPy parameters w
+00020060: 696c 6c20 6361 7573 6520 5269 7074 6162  ill cause Riptab
+00020070: 6c65 2074 6f20 7377 6974 6368 2074 6f0d  le to switch to.
+00020080: 0a20 2020 2020 2020 2074 6865 204e 756d  .        the Num
+00020090: 5079 2069 6d70 6c65 6d65 6e74 6174 696f  Py implementatio
+000200a0: 6e20 6f66 2074 6869 7320 6d65 7468 6f64  n of this method
+000200b0: 2028 606e 756d 7079 2e73 7464 6029 2e20   (`numpy.std`). 
+000200c0: 486f 7765 7665 722c 2075 6e74 696c 2061  However, until a
+000200d0: 0d0a 2020 2020 2020 2020 7265 706f 7274  ..        report
+000200e0: 6564 2062 7567 2069 7320 6669 7865 642c  ed bug is fixed,
+000200f0: 2069 6620 796f 7520 616c 736f 2069 6e63   if you also inc
+00020100: 6c75 6465 2074 6865 2060 6474 7970 6560  lude the `dtype`
+00020110: 2070 6172 616d 6574 6572 2069 7420 7769   parameter it wi
+00020120: 6c6c 2062 650d 0a20 2020 2020 2020 2061  ll be..        a
+00020130: 7070 6c69 6564 2074 6f20 7468 6520 7265  pplied to the re
+00020140: 7375 6c74 2c20 6e6f 7420 7573 6564 2074  sult, not used t
+00020150: 6f20 636f 6d70 7574 6520 7468 6520 7661  o compute the va
+00020160: 7269 616e 6365 2061 7320 6974 2069 7320  riance as it is 
+00020170: 696e 0d0a 2020 2020 2020 2020 606e 756d  in..        `num
+00020180: 7079 2e73 7464 602e 0d0a 0d0a 2020 2020  py.std`.....    
+00020190: 2020 2020 416c 736f 206e 6f74 6520 7468      Also note th
+000201a0: 6174 2069 6620 796f 7520 7573 6520 616e  at if you use an
+000201b0: 7920 6f66 2074 6865 2066 6f6c 6c6f 7769  y of the followi
+000201c0: 6e67 204e 756d 5079 2070 6172 616d 6574  ng NumPy paramet
+000201d0: 6572 7320 616e 6420 616c 736f 0d0a 2020  ers and also..  
+000201e0: 2020 2020 2020 696e 636c 7564 6520 6120        include a 
+000201f0: 6066 696c 7465 7260 206b 6579 776f 7264  `filter` keyword
+00020200: 2061 7267 756d 656e 7420 2877 6869 6368   argument (which
+00020210: 2060 6e75 6d70 792e 7374 6460 2064 6f65   `numpy.std` doe
+00020220: 7320 6e6f 7420 6163 6365 7074 292c 0d0a  s not accept),..
+00020230: 2020 2020 2020 2020 5269 7074 6162 6c65          Riptable
+00020240: 2773 2069 6d70 6c65 6d65 6e74 6174 696f  's implementatio
+00020250: 6e20 6f66 2060 7374 6460 2077 696c 6c20  n of `std` will 
+00020260: 6265 2075 7365 6420 7769 7468 2074 6865  be used with the
+00020270: 2066 696c 7465 7220 6172 6775 6d65 6e74   filter argument
+00020280: 0d0a 2020 2020 2020 2020 616e 6420 7468  ..        and th
+00020290: 6520 4e75 6d50 7920 7061 7261 6d65 7465  e NumPy paramete
+000202a0: 7273 2077 696c 6c20 6265 2069 676e 6f72  rs will be ignor
+000202b0: 6564 2e0d 0a0d 0a20 2020 2020 2020 2061  ed.....        a
+000202c0: 7869 7320 3a20 4e6f 6e65 206f 7220 696e  xis : None or in
+000202d0: 7420 6f72 2074 7570 6c65 206f 6620 696e  t or tuple of in
+000202e0: 7473 2c20 6f70 7469 6f6e 616c 0d0a 2020  ts, optional..  
+000202f0: 2020 2020 2020 2020 2020 4178 6973 206f            Axis o
+00020300: 7220 6178 6573 2061 6c6f 6e67 2077 6869  r axes along whi
+00020310: 6368 2074 6865 2073 7461 6e64 6172 6420  ch the standard 
+00020320: 6465 7669 6174 696f 6e20 6973 2063 6f6d  deviation is com
+00020330: 7075 7465 642e 2054 6865 0d0a 2020 2020  puted. The..    
+00020340: 2020 2020 2020 2020 6465 6661 756c 7420          default 
+00020350: 6973 2074 6f20 636f 6d70 7574 6520 7468  is to compute th
+00020360: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
+00020370: 7469 6f6e 206f 6620 7468 6520 666c 6174  tion of the flat
+00020380: 7465 6e65 6420 6172 7261 792e 0d0a 0d0a  tened array.....
+00020390: 2020 2020 2020 2020 2020 2020 2e2e 2076              .. v
+000203a0: 6572 7369 6f6e 6164 6465 643a 3a20 312e  ersionadded:: 1.
+000203b0: 372e 300d 0a0d 0a20 2020 2020 2020 2020  7.0....         
+000203c0: 2020 2049 6620 7468 6973 2069 7320 6120     If this is a 
+000203d0: 7475 706c 6520 6f66 2069 6e74 732c 2061  tuple of ints, a
+000203e0: 2073 7461 6e64 6172 6420 6465 7669 6174   standard deviat
+000203f0: 696f 6e20 6973 2070 6572 666f 726d 6564  ion is performed
+00020400: 206f 7665 7220 6d75 6c74 6970 6c65 0d0a   over multiple..
+00020410: 2020 2020 2020 2020 2020 2020 6178 6573              axes
+00020420: 2c20 696e 7374 6561 6420 6f66 2061 2073  , instead of a s
+00020430: 696e 676c 6520 6178 6973 206f 7220 616c  ingle axis or al
+00020440: 6c20 7468 6520 6178 6573 2061 7320 6265  l the axes as be
+00020450: 666f 7265 2e0d 0a0d 0a20 2020 2020 2020  fore.....       
+00020460: 206b 6565 7064 696d 7320 3a20 626f 6f6c   keepdims : bool
+00020470: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
+00020480: 2020 2020 2020 2020 4966 2074 6869 7320          If this 
+00020490: 6973 2073 6574 2074 6f20 5472 7565 2c20  is set to True, 
+000204a0: 7468 6520 6178 6573 2077 6869 6368 2061  the axes which a
+000204b0: 7265 2072 6564 7563 6564 2061 7265 206c  re reduced are l
+000204c0: 6566 7420 696e 2074 6865 2072 6573 756c  eft in the resul
+000204d0: 7420 6173 0d0a 2020 2020 2020 2020 2020  t as..          
+000204e0: 2020 6469 6d65 6e73 696f 6e73 2077 6974    dimensions wit
+000204f0: 6820 7369 7a65 206f 6e65 2e20 5769 7468  h size one. With
+00020500: 2074 6869 7320 6f70 7469 6f6e 2c20 7468   this option, th
+00020510: 6520 7265 7375 6c74 2077 696c 6c20 6272  e result will br
+00020520: 6f61 6463 6173 740d 0a20 2020 2020 2020  oadcast..       
+00020530: 2020 2020 2063 6f72 7265 6374 6c79 2061       correctly a
+00020540: 6761 696e 7374 2074 6865 2069 6e70 7574  gainst the input
+00020550: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
+00020560: 2020 2020 2020 2049 6620 7468 6520 6465         If the de
+00020570: 6661 756c 7420 7661 6c75 6520 6973 2070  fault value is p
+00020580: 6173 7365 642c 2074 6865 6e20 606b 6565  assed, then `kee
+00020590: 7064 696d 7360 2077 696c 6c20 6e6f 7420  pdims` will not 
+000205a0: 6265 2070 6173 7365 6420 7468 726f 7567  be passed throug
+000205b0: 680d 0a20 2020 2020 2020 2020 2020 2074  h..            t
+000205c0: 6f20 7468 6520 6073 7464 6020 6d65 7468  o the `std` meth
+000205d0: 6f64 206f 6620 7375 622d 636c 6173 7365  od of sub-classe
+000205e0: 7320 6f66 2060 6e64 6172 7261 7960 2c20  s of `ndarray`, 
+000205f0: 686f 7765 7665 7220 616e 7920 6e6f 6e2d  however any non-
+00020600: 6465 6661 756c 740d 0a20 2020 2020 2020  default..       
+00020610: 2020 2020 2076 616c 7565 2077 696c 6c20       value will 
+00020620: 6265 2e20 4966 2074 6865 2073 7562 2d63  be. If the sub-c
+00020630: 6c61 7373 2720 6d65 7468 6f64 2064 6f65  lass' method doe
+00020640: 7320 6e6f 7420 696d 706c 656d 656e 7420  s not implement 
+00020650: 606b 6565 7064 696d 7360 2c0d 0a20 2020  `keepdims`,..   
+00020660: 2020 2020 2020 2020 2061 6e79 2065 7863           any exc
+00020670: 6570 7469 6f6e 7320 7769 6c6c 2062 6520  eptions will be 
+00020680: 7261 6973 6564 2e0d 0a0d 0a20 2020 2020  raised.....     
+00020690: 2020 2064 646f 6620 3a20 696e 742c 206f     ddof : int, o
+000206a0: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
+000206b0: 2020 2020 2022 4465 6c74 6120 4465 6772       "Delta Degr
+000206c0: 6565 7320 6f66 2046 7265 6564 6f6d 223a  ees of Freedom":
+000206d0: 2074 6865 2064 6976 6973 6f72 2075 7365   the divisor use
+000206e0: 6420 696e 2074 6865 2063 616c 6375 6c61  d in the calcula
+000206f0: 7469 6f6e 2069 730d 0a20 2020 2020 2020  tion is..       
+00020700: 2020 2020 2060 604e 202d 2064 646f 6660       ``N - ddof`
+00020710: 602c 2077 6865 7265 2060 604e 6060 2072  `, where ``N`` r
+00020720: 6570 7265 7365 6e74 7320 7468 6520 6e75  epresents the nu
+00020730: 6d62 6572 206f 6620 656c 656d 656e 7473  mber of elements
+00020740: 2e20 4279 2064 6566 6175 6c74 0d0a 2020  . By default..  
+00020750: 2020 2020 2020 2020 2020 6064 646f 6660            `ddof`
+00020760: 2069 7320 7a65 726f 2066 6f72 2074 6865   is zero for the
+00020770: 204e 756d 5079 2069 6d70 6c65 6d65 6e74   NumPy implement
+00020780: 6174 696f 6e2c 2076 6572 7375 7320 6f6e  ation, versus on
+00020790: 6520 666f 7220 7468 650d 0a20 2020 2020  e for the..     
+000207a0: 2020 2020 2020 2052 6970 7461 626c 6520         Riptable 
+000207b0: 696d 706c 656d 656e 7461 7469 6f6e 2e0d  implementation..
+000207c0: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+000207d0: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
+000207e0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
+000207f0: 3e3e 2061 203d 2072 742e 4661 7374 4172  >> a = rt.FastAr
+00020800: 7261 7928 5b31 2c20 322c 2033 5d29 0d0a  ray([1, 2, 3])..
+00020810: 2020 2020 2020 2020 3e3e 3e20 612e 7374          >>> a.st
+00020820: 6428 290d 0a20 2020 2020 2020 2031 2e30  d()..        1.0
+00020830: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+00020840: 2061 2060 6474 7970 6560 2073 7065 6369   a `dtype` speci
+00020850: 6669 6564 3a0d 0a0d 0a20 2020 2020 2020  fied:....       
+00020860: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+00020870: 4172 7261 7928 5b31 2c20 322c 2033 5d29  Array([1, 2, 3])
+00020880: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00020890: 7374 6428 6474 7970 6520 3d20 7274 2e69  std(dtype = rt.i
+000208a0: 6e74 3332 290d 0a20 2020 2020 2020 2031  nt32)..        1
+000208b0: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+000208c0: 2061 2066 696c 7465 723a 0d0a 0d0a 2020   a filter:....  
+000208d0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+000208e0: 2e46 6173 7441 7272 6179 285b 312c 2032  .FastArray([1, 2
+000208f0: 2c20 335d 290d 0a20 2020 2020 2020 203e  , 3])..        >
+00020900: 3e3e 2062 203d 2072 742e 4641 285b 4661  >> b = rt.FA([Fa
+00020910: 6c73 652c 2054 7275 652c 2054 7275 655d  lse, True, True]
+00020920: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+00020930: 2e73 7464 2866 696c 7465 7220 3d20 6229  .std(filter = b)
+00020940: 0d0a 2020 2020 2020 2020 302e 3730 3731  ..        0.7071
+00020950: 3036 3738 3131 3836 3534 3736 0d0a 2020  067811865476..  
+00020960: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
+00020970: 2020 2020 206b 7761 7267 7320 3d20 7365       kwargs = se
+00020980: 6c66 2e5f 6661 5f6b 6579 776f 7264 5f77  lf._fa_keyword_w
+00020990: 7261 7070 6572 2866 696c 7465 723d 6669  rapper(filter=fi
+000209a0: 6c74 6572 2c20 6474 7970 653d 6474 7970  lter, dtype=dtyp
+000209b0: 652c 2061 7869 733d 6178 6973 2c20 6b65  e, axis=axis, ke
+000209c0: 6570 6469 6d73 3d6b 6565 7064 696d 732c  epdims=keepdims,
+000209d0: 2064 646f 663d 6464 6f66 2c20 2a2a 6b77   ddof=ddof, **kw
+000209e0: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
+000209f0: 2069 6620 6669 6c74 6572 2069 7320 6e6f   if filter is no
+00020a00: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00020a10: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00020a20: 2e5f 6661 5f66 696c 7465 725f 7772 6170  ._fa_filter_wrap
+00020a30: 7065 7228 5f66 7374 642c 2066 696c 7465  per(_fstd, filte
+00020a40: 723d 6669 6c74 6572 2c20 6474 7970 653d  r=filter, dtype=
+00020a50: 6474 7970 6529 0d0a 0d0a 2020 2020 2020  dtype)....      
+00020a60: 2020 7265 7475 726e 2073 656c 662e 5f72    return self._r
+00020a70: 6564 7563 655f 6368 6563 6b28 5245 4455  educe_check(REDU
+00020a80: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
+00020a90: 5543 455f 5354 442c 206e 702e 7374 642c  UCE_STD, np.std,
+00020aa0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+00020ab0: 2020 6465 6620 6e61 6e73 7464 2873 656c    def nanstd(sel
+00020ac0: 662c 2066 696c 7465 723d 4e6f 6e65 2c20  f, filter=None, 
+00020ad0: 6474 7970 653d 4e6f 6e65 2c20 6178 6973  dtype=None, axis
+00020ae0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
+00020af0: 4e6f 6e65 2c20 6464 6f66 3d4e 6f6e 652c  None, ddof=None,
+00020b00: 202a 2a6b 7761 7267 7329 202d 3e20 6e70   **kwargs) -> np
+00020b10: 2e6e 756d 6265 723a 0d0a 2020 2020 2020  .number:..      
+00020b20: 2020 2222 220d 0a20 2020 2020 2020 2043    """..        C
+00020b30: 6f6d 7075 7465 2074 6865 2073 7461 6e64  ompute the stand
+00020b40: 6172 6420 6465 7669 6174 696f 6e20 6f66  ard deviation of
+00020b50: 2074 6865 2076 616c 7565 7320 696e 2074   the values in t
+00020b60: 6865 2066 6972 7374 2061 7267 756d 656e  he first argumen
+00020b70: 742c 2069 676e 6f72 696e 6720 4e61 4e73  t, ignoring NaNs
+00020b80: 2e0d 0a0d 0a20 2020 2020 2020 2049 6620  .....        If 
+00020b90: 616c 6c20 7661 6c75 6573 2069 6e20 7468  all values in th
+00020ba0: 6520 6669 7273 7420 6172 6775 6d65 6e74  e first argument
+00020bb0: 2061 7265 204e 614e 732c 2060 604e 614e   are NaNs, ``NaN
+00020bc0: 6060 2069 7320 7265 7475 726e 6564 2e0d  `` is returned..
+00020bd0: 0a0d 0a20 2020 2020 2020 2052 6970 7461  ...        Ripta
+00020be0: 626c 6520 7573 6573 2074 6865 2063 6f6e  ble uses the con
+00020bf0: 7665 6e74 696f 6e20 7468 6174 2060 6064  vention that ``d
+00020c00: 646f 6620 3d20 3160 602c 206d 6561 6e69  dof = 1``, meani
+00020c10: 6e67 2074 6865 2073 7461 6e64 6172 6420  ng the standard 
+00020c20: 6465 7669 6174 696f 6e20 6f66 0d0a 2020  deviation of..  
+00020c30: 2020 2020 2020 6060 5b78 5f31 2c20 2e2e        ``[x_1, ..
+00020c40: 2e2c 2078 5f6e 5d60 6020 6973 2064 6566  ., x_n]`` is def
+00020c50: 696e 6564 2062 7920 6060 7374 6420 3d20  ined by ``std = 
+00020c60: 312f 286e 202d 2031 2920 2a20 7375 6d28  1/(n - 1) * sum(
+00020c70: 785f 6920 2d20 6d65 616e 2029 2a2a 3260  x_i - mean )**2`
+00020c80: 6020 286e 6f74 650d 0a20 2020 2020 2020  ` (note..       
+00020c90: 2074 6865 2060 606e 202d 2031 6060 2069   the ``n - 1`` i
+00020ca0: 6e73 7465 6164 206f 6620 6060 6e60 6029  nstead of ``n``)
+00020cb0: 2e20 5468 6973 2064 6966 6665 7273 2066  . This differs f
+00020cc0: 726f 6d20 4e75 6d50 792c 2077 6869 6368  rom NumPy, which
+00020cd0: 2075 7365 7320 6060 6464 6f66 203d 2030   uses ``ddof = 0
+00020ce0: 6060 2062 790d 0a20 2020 2020 2020 2064  `` by..        d
+00020cf0: 6566 6175 6c74 2e0d 0a0d 0a20 2020 2020  efault.....     
+00020d00: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+00020d10: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00020d20: 2d0d 0a20 2020 2020 2020 2066 696c 7465  -..        filte
+00020d30: 7220 3a20 6172 7261 7920 6f66 2062 6f6f  r : array of boo
+00020d40: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
+00020d50: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
+00020d60: 6369 6669 6573 2077 6869 6368 2065 6c65  cifies which ele
+00020d70: 6d65 6e74 7320 746f 2069 6e63 6c75 6465  ments to include
+00020d80: 2069 6e20 7468 6520 7374 616e 6461 7264   in the standard
+00020d90: 2064 6576 6961 7469 6f6e 2063 616c 6375   deviation calcu
+00020da0: 6c61 7469 6f6e 2e20 4966 0d0a 2020 2020  lation. If..    
+00020db0: 2020 2020 2020 2020 7468 6520 6669 6c74          the filt
+00020dc0: 6572 2069 7320 756e 6966 6f72 6d6c 7920  er is uniformly 
+00020dd0: 6060 4661 6c73 6560 602c 2060 6e61 6e73  ``False``, `nans
+00020de0: 7464 6020 7265 7475 726e 7320 6120 605a  td` returns a `Z
+00020df0: 6572 6f44 6976 6973 696f 6e45 7272 6f72  eroDivisionError
+00020e00: 602e 0d0a 0d0a 2020 2020 2020 2020 6474  `.....        dt
+00020e10: 7970 6520 3a20 7274 2e64 7479 7065 206f  ype : rt.dtype o
+00020e20: 7220 6e75 6d70 792e 6474 7970 652c 2064  r numpy.dtype, d
+00020e30: 6566 6175 6c74 2066 6c6f 6174 3634 0d0a  efault float64..
+00020e40: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+00020e50: 6461 7461 2074 7970 6520 6f66 2074 6865  data type of the
+00020e60: 2072 6573 756c 742e 2046 6f72 2061 2060   result. For a `
+00020e70: 4661 7374 4172 7261 7960 2060 6078 6060  FastArray` ``x``
+00020e80: 2c0d 0a20 2020 2020 2020 2020 2020 2060  ,..            `
+00020e90: 6078 2e6e 616e 7374 6428 6474 7970 6520  `x.nanstd(dtype 
+00020ea0: 3d20 6d79 5f74 7970 6529 6060 2069 7320  = my_type)`` is 
+00020eb0: 6571 7569 7661 6c65 6e74 2074 6f20 6060  equivalent to ``
+00020ec0: 6d79 5f74 7970 6528 782e 6e61 6e73 7464  my_type(x.nanstd
+00020ed0: 2829 2960 602e 0d0a 0d0a 2020 2020 2020  ())``.....      
+00020ee0: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
+00020ef0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
+00020f00: 2020 2020 7363 616c 6172 0d0a 2020 2020      scalar..    
+00020f10: 2020 2020 2020 2020 5468 6520 7374 616e          The stan
+00020f20: 6461 7264 2064 6576 6961 7469 6f6e 206f  dard deviation o
+00020f30: 6620 7468 6520 7661 6c75 6573 2e0d 0a0d  f the values....
+00020f40: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
+00020f50: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
+00020f60: 2d2d 2d0d 0a20 2020 2020 2020 206e 756d  ---..        num
+00020f70: 7079 2e6e 616e 7374 640d 0a20 2020 2020  py.nanstd..     
+00020f80: 2020 2046 6173 7441 7272 6179 2e73 7464     FastArray.std
+00020f90: 203a 2043 6f6d 7075 7465 7320 7468 6520   : Computes the 
+00020fa0: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
+00020fb0: 6f6e 206f 6620 6046 6173 7441 7272 6179  on of `FastArray
+00020fc0: 6020 7661 6c75 6573 2e0d 0a20 2020 2020  ` values...     
+00020fd0: 2020 2044 6174 6173 6574 2e6e 616e 7374     Dataset.nanst
+00020fe0: 6420 3a20 436f 6d70 7574 6573 2074 6865  d : Computes the
+00020ff0: 2073 7461 6e64 6172 6420 6465 7669 6174   standard deviat
+00021000: 696f 6e20 6f66 206e 756d 6572 6963 616c  ion of numerical
+00021010: 2060 4461 7461 7365 7460 2063 6f6c 756d   `Dataset` colum
+00021020: 6e73 2c0d 0a20 2020 2020 2020 2020 2020  ns,..           
+00021030: 2020 2020 2020 2020 2020 2020 2020 6967                ig
+00021040: 6e6f 7269 6e67 204e 614e 732e 0d0a 2020  noring NaNs...  
+00021050: 2020 2020 2020 4772 6f75 7042 794f 7073        GroupByOps
+00021060: 2e6e 616e 7374 6420 3a20 436f 6d70 7574  .nanstd : Comput
+00021070: 6573 2074 6865 2073 7461 6e64 6172 6420  es the standard 
+00021080: 6465 7669 6174 696f 6e20 6f66 2065 6163  deviation of eac
+00021090: 6820 6772 6f75 702c 2069 676e 6f72 696e  h group, ignorin
+000210a0: 6720 4e61 4e73 2e0d 0a20 2020 2020 2020  g NaNs...       
+000210b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000210c0: 2020 2020 2055 7365 6420 6279 2060 4361       Used by `Ca
+000210d0: 7465 676f 7269 6361 6c60 206f 626a 6563  tegorical` objec
+000210e0: 7473 2e0d 0a0d 0a20 2020 2020 2020 204e  ts.....        N
+000210f0: 6f74 6573 0d0a 2020 2020 2020 2020 2d2d  otes..        --
+00021100: 2d2d 2d0d 0a20 2020 2020 2020 2054 6865  ---..        The
+00021110: 2060 6474 7970 6560 206b 6579 776f 7264   `dtype` keyword
+00021120: 2066 6f72 2060 4661 7374 4172 7261 792e   for `FastArray.
+00021130: 6e61 6e73 7464 6020 7370 6563 6966 6965  nanstd` specifie
+00021140: 7320 7468 6520 6461 7461 2074 7970 6520  s the data type 
+00021150: 6f66 2074 6865 0d0a 2020 2020 2020 2020  of the..        
+00021160: 7265 7375 6c74 2e20 5468 6973 2064 6966  result. This dif
+00021170: 6665 7273 2066 726f 6d20 606e 756d 7079  fers from `numpy
+00021180: 2e6e 616e 7374 6460 2c20 7768 6572 6520  .nanstd`, where 
+00021190: 6974 2073 7065 6369 6669 6573 2074 6865  it specifies the
+000211a0: 2064 6174 6120 7479 7065 2075 7365 640d   data type used.
+000211b0: 0a20 2020 2020 2020 2074 6f20 636f 6d70  .        to comp
+000211c0: 7574 6520 7468 6520 7374 616e 6461 7264  ute the standard
+000211d0: 2064 6576 6961 7469 6f6e 2e0d 0a0d 0a20   deviation..... 
+000211e0: 2020 2020 2020 202a 2a4e 6f74 6573 206f         **Notes o
+000211f0: 6e20 5573 696e 6720 4e75 6d50 7920 5061  n Using NumPy Pa
+00021200: 7261 6d65 7465 7273 2a2a 0d0a 0d0a 2020  rameters**....  
+00021210: 2020 2020 2020 5573 696e 6720 616e 7920        Using any 
+00021220: 6f66 2074 6865 2066 6f6c 6c6f 7769 6e67  of the following
+00021230: 204e 756d 5079 2070 6172 616d 6574 6572   NumPy parameter
+00021240: 7320 7769 6c6c 2063 6175 7365 2052 6970  s will cause Rip
+00021250: 7461 626c 6520 746f 2073 7769 7463 6820  table to switch 
+00021260: 746f 0d0a 2020 2020 2020 2020 7468 6520  to..        the 
+00021270: 4e75 6d50 7920 696d 706c 656d 656e 7461  NumPy implementa
+00021280: 7469 6f6e 206f 6620 7468 6973 206d 6574  tion of this met
+00021290: 686f 6420 2860 6e75 6d70 792e 6e61 6e73  hod (`numpy.nans
+000212a0: 7464 6029 2e20 486f 7765 7665 722c 2075  td`). However, u
+000212b0: 6e74 696c 2061 0d0a 2020 2020 2020 2020  ntil a..        
+000212c0: 7265 706f 7274 6564 2062 7567 2069 7320  reported bug is 
+000212d0: 6669 7865 642c 2069 6620 796f 7520 616c  fixed, if you al
+000212e0: 736f 2069 6e63 6c75 6465 2074 6865 2060  so include the `
+000212f0: 6474 7970 6560 2070 6172 616d 6574 6572  dtype` parameter
+00021300: 2069 7420 7769 6c6c 2062 650d 0a20 2020   it will be..   
+00021310: 2020 2020 2061 7070 6c69 6564 2074 6f20       applied to 
+00021320: 7468 6520 7265 7375 6c74 2c20 6e6f 7420  the result, not 
+00021330: 7573 6564 2074 6f20 636f 6d70 7574 6520  used to compute 
+00021340: 7468 6520 7661 7269 616e 6365 2061 7320  the variance as 
+00021350: 6974 2069 7320 696e 0d0a 2020 2020 2020  it is in..      
+00021360: 2020 606e 756d 7079 2e6e 616e 7374 6460    `numpy.nanstd`
+00021370: 2e0d 0a0d 0a20 2020 2020 2020 2041 6c73  .....        Als
+00021380: 6f20 6e6f 7465 2074 6861 7420 6966 2079  o note that if y
+00021390: 6f75 2075 7365 2061 6e79 206f 6620 7468  ou use any of th
+000213a0: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
+000213b0: 7920 7061 7261 6d65 7465 7273 2061 6e64  y parameters and
+000213c0: 2061 6c73 6f0d 0a20 2020 2020 2020 2069   also..        i
+000213d0: 6e63 6c75 6465 2061 2060 6669 6c74 6572  nclude a `filter
+000213e0: 6020 6b65 7977 6f72 6420 6172 6775 6d65  ` keyword argume
+000213f0: 6e74 2028 7768 6963 6820 606e 756d 7079  nt (which `numpy
+00021400: 2e6e 616e 7374 6460 2064 6f65 7320 6e6f  .nanstd` does no
+00021410: 7420 6163 6365 7074 292c 0d0a 2020 2020  t accept),..    
+00021420: 2020 2020 5269 7074 6162 6c65 2773 2069      Riptable's i
+00021430: 6d70 6c65 6d65 6e74 6174 696f 6e20 6f66  mplementation of
+00021440: 2060 6e61 6e73 7464 6020 7769 6c6c 2062   `nanstd` will b
+00021450: 6520 7573 6564 2077 6974 6820 7468 6520  e used with the 
+00021460: 6669 6c74 6572 2061 7267 756d 656e 740d  filter argument.
+00021470: 0a20 2020 2020 2020 2061 6e64 2074 6865  .        and the
+00021480: 204e 756d 5079 2070 6172 616d 6574 6572   NumPy parameter
+00021490: 7320 7769 6c6c 2062 6520 6967 6e6f 7265  s will be ignore
+000214a0: 642e 0d0a 0d0a 2020 2020 2020 2020 6178  d.....        ax
+000214b0: 6973 203a 207b 696e 742c 2074 7570 6c65  is : {int, tuple
+000214c0: 206f 6620 696e 742c 204e 6f6e 657d 2c20   of int, None}, 
+000214d0: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
+000214e0: 2020 2020 2020 4178 6973 206f 7220 6178        Axis or ax
+000214f0: 6573 2061 6c6f 6e67 2077 6869 6368 2074  es along which t
+00021500: 6865 2073 7461 6e64 6172 6420 6465 7669  he standard devi
+00021510: 6174 696f 6e20 6973 2063 6f6d 7075 7465  ation is compute
+00021520: 642e 2054 6865 2064 6566 6175 6c74 2069  d. The default i
+00021530: 730d 0a20 2020 2020 2020 2020 2020 2074  s..            t
+00021540: 6f20 636f 6d70 7574 6520 7468 6520 7374  o compute the st
+00021550: 616e 6461 7264 2064 6576 6961 7469 6f6e  andard deviation
+00021560: 206f 6620 7468 6520 666c 6174 7465 6e65   of the flattene
+00021570: 6420 6172 7261 792e 0d0a 0d0a 2020 2020  d array.....    
+00021580: 2020 2020 6b65 6570 6469 6d73 203a 2062      keepdims : b
+00021590: 6f6f 6c2c 206f 7074 696f 6e61 6c0d 0a20  ool, optional.. 
+000215a0: 2020 2020 2020 2020 2020 2049 6620 7468             If th
+000215b0: 6973 2069 7320 7365 7420 746f 2054 7275  is is set to Tru
+000215c0: 652c 2074 6865 2061 7865 7320 7768 6963  e, the axes whic
+000215d0: 6820 6172 6520 7265 6475 6365 6420 6172  h are reduced ar
+000215e0: 6520 6c65 6674 2069 6e20 7468 6520 7265  e left in the re
+000215f0: 7375 6c74 2061 730d 0a20 2020 2020 2020  sult as..       
+00021600: 2020 2020 2064 696d 656e 7369 6f6e 7320       dimensions 
+00021610: 7769 7468 2073 697a 6520 6f6e 652e 2057  with size one. W
+00021620: 6974 6820 7468 6973 206f 7074 696f 6e2c  ith this option,
+00021630: 2074 6865 2072 6573 756c 7420 7769 6c6c   the result will
+00021640: 2062 726f 6164 6361 7374 0d0a 2020 2020   broadcast..    
+00021650: 2020 2020 2020 2020 636f 7272 6563 746c          correctl
+00021660: 7920 6167 6169 6e73 7420 7468 6520 6f72  y against the or
+00021670: 6967 696e 616c 2069 6e70 7574 2061 7272  iginal input arr
+00021680: 6179 2e0d 0a0d 0a20 2020 2020 2020 2020  ay.....         
+00021690: 2020 2049 6620 7468 6973 2076 616c 7565     If this value
+000216a0: 2069 7320 616e 7974 6869 6e67 2062 7574   is anything but
+000216b0: 2074 6865 2064 6566 6175 6c74 2069 7420   the default it 
+000216c0: 6973 2070 6173 7365 6420 7468 726f 7567  is passed throug
+000216d0: 6820 6173 2d69 7320 746f 2074 6865 0d0a  h as-is to the..
+000216e0: 2020 2020 2020 2020 2020 2020 7265 6c65              rele
+000216f0: 7661 6e74 2066 756e 6374 696f 6e73 206f  vant functions o
+00021700: 6620 7468 6520 7375 622d 636c 6173 7365  f the sub-classe
+00021710: 732e 2049 6620 7468 6573 6520 6675 6e63  s. If these func
+00021720: 7469 6f6e 7320 646f 206e 6f74 2068 6176  tions do not hav
+00021730: 6520 610d 0a20 2020 2020 2020 2020 2020  e a..           
+00021740: 2060 6b65 6570 6469 6d73 6020 6b77 6172   `keepdims` kwar
+00021750: 672c 2061 2052 756e 7469 6d65 4572 726f  g, a RuntimeErro
+00021760: 7220 7769 6c6c 2062 6520 7261 6973 6564  r will be raised
+00021770: 2e0d 0a0d 0a20 2020 2020 2020 2064 646f  .....        ddo
+00021780: 6620 3a20 696e 742c 206f 7074 696f 6e61  f : int, optiona
+00021790: 6c0d 0a20 2020 2020 2020 2020 2020 2022  l..            "
+000217a0: 4465 6c74 6120 4465 6772 6565 7320 6f66  Delta Degrees of
+000217b0: 2046 7265 6564 6f6d 223a 2074 6865 2064   Freedom": the d
+000217c0: 6976 6973 6f72 2075 7365 6420 696e 2074  ivisor used in t
+000217d0: 6865 2063 616c 6375 6c61 7469 6f6e 2069  he calculation i
+000217e0: 730d 0a20 2020 2020 2020 2020 2020 2060  s..            `
+000217f0: 604e 202d 2064 646f 6660 602c 2077 6865  `N - ddof``, whe
+00021800: 7265 2060 604e 6060 2072 6570 7265 7365  re ``N`` represe
+00021810: 6e74 7320 7468 6520 6e75 6d62 6572 206f  nts the number o
+00021820: 6620 656c 656d 656e 7473 2e20 4279 2064  f elements. By d
+00021830: 6566 6175 6c74 0d0a 2020 2020 2020 2020  efault..        
+00021840: 2020 2020 6064 646f 6660 2069 7320 7a65      `ddof` is ze
+00021850: 726f 2066 6f72 2074 6865 204e 756d 5079  ro for the NumPy
+00021860: 2069 6d70 6c65 6d65 6e74 6174 696f 6e2c   implementation,
+00021870: 2076 6572 7375 7320 6f6e 6520 666f 7220   versus one for 
+00021880: 7468 650d 0a20 2020 2020 2020 2020 2020  the..           
+00021890: 2052 6970 7461 626c 6520 696d 706c 656d   Riptable implem
+000218a0: 656e 7461 7469 6f6e 2e0d 0a0d 0a20 2020  entation.....   
+000218b0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+000218c0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+000218d0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+000218e0: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
+000218f0: 2c20 322c 2033 2c20 7274 2e6e 616e 5d29  , 2, 3, rt.nan])
+00021900: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00021910: 6e61 6e73 7464 2829 0d0a 2020 2020 2020  nanstd()..      
+00021920: 2020 312e 300d 0a0d 0a20 2020 2020 2020    1.0....       
+00021930: 2057 6974 6820 6120 6064 7479 7065 6020   With a `dtype` 
+00021940: 7370 6563 6966 6965 643a 0d0a 0d0a 2020  specified:....  
+00021950: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+00021960: 2e46 6173 7441 7272 6179 285b 312c 2032  .FastArray([1, 2
+00021970: 2c20 332c 2072 742e 6e61 6e5d 290d 0a20  , 3, rt.nan]).. 
+00021980: 2020 2020 2020 203e 3e3e 2061 2e6e 616e         >>> a.nan
+00021990: 7374 6428 6474 7970 6520 3d20 7274 2e69  std(dtype = rt.i
+000219a0: 6e74 3332 290d 0a20 2020 2020 2020 2031  nt32)..        1
+000219b0: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+000219c0: 2066 696c 7465 723a 0d0a 0d0a 2020 2020   filter:....    
+000219d0: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
+000219e0: 6173 7441 7272 6179 285b 312c 2032 2c20  astArray([1, 2, 
+000219f0: 332c 2072 742e 6e61 6e5d 290d 0a20 2020  3, rt.nan])..   
+00021a00: 2020 2020 203e 3e3e 2062 203d 2072 742e       >>> b = rt.
+00021a10: 4661 7374 4172 7261 7928 5b46 616c 7365  FastArray([False
+00021a20: 2c20 5472 7565 2c20 5472 7565 2c20 5472  , True, True, Tr
+00021a30: 7565 5d29 0d0a 2020 2020 2020 2020 3e3e  ue])..        >>
+00021a40: 3e20 612e 6e61 6e73 7464 2866 696c 7465  > a.nanstd(filte
+00021a50: 7220 3d20 6229 0d0a 2020 2020 2020 2020  r = b)..        
+00021a60: 302e 3730 3731 3036 3738 3131 3836 3534  0.70710678118654
+00021a70: 3736 0d0a 2020 2020 2020 2020 2222 220d  76..        """.
+00021a80: 0a20 2020 2020 2020 206b 7761 7267 7320  .        kwargs 
+00021a90: 3d20 7365 6c66 2e5f 6661 5f6b 6579 776f  = self._fa_keywo
+00021aa0: 7264 5f77 7261 7070 6572 2866 696c 7465  rd_wrapper(filte
+00021ab0: 723d 6669 6c74 6572 2c20 6474 7970 653d  r=filter, dtype=
+00021ac0: 6474 7970 652c 2061 7869 733d 6178 6973  dtype, axis=axis
+00021ad0: 2c20 6b65 6570 6469 6d73 3d6b 6565 7064  , keepdims=keepd
+00021ae0: 696d 732c 2064 646f 663d 6464 6f66 2c20  ims, ddof=ddof, 
+00021af0: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
+00021b00: 2020 2020 2069 6620 6669 6c74 6572 2069       if filter i
+00021b10: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00021b20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00021b30: 7365 6c66 2e5f 6661 5f66 696c 7465 725f  self._fa_filter_
+00021b40: 7772 6170 7065 7228 5f66 6e61 6e73 7464  wrapper(_fnanstd
+00021b50: 2c20 6669 6c74 6572 3d66 696c 7465 722c  , filter=filter,
+00021b60: 2064 7479 7065 3d64 7479 7065 290d 0a0d   dtype=dtype)...
+00021b70: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00021b80: 7365 6c66 2e5f 7265 6475 6365 5f63 6865  self._reduce_che
+00021b90: 636b 2852 4544 5543 455f 4655 4e43 5449  ck(REDUCE_FUNCTI
+00021ba0: 4f4e 532e 5245 4455 4345 5f4e 414e 5354  ONS.REDUCE_NANST
+00021bb0: 442c 206e 702e 6e61 6e73 7464 2c20 2a2a  D, np.nanstd, **
+00021bc0: 6b77 6172 6773 290d 0a0d 0a20 2020 2023  kwargs)....    #
+00021bd0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00021be0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021c00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
+00021c20: 2020 6465 6620 6e61 6e6d 696e 2873 656c    def nanmin(sel
+00021c30: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
+00021c40: 6e70 2e6e 756d 6265 723a 0d0a 2020 2020  np.number:..    
+00021c50: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00021c60: 5f72 6564 7563 655f 6368 6563 6b28 5245  _reduce_check(RE
+00021c70: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00021c80: 4544 5543 455f 4e41 4e4d 494e 2c20 6e70  EDUCE_NANMIN, np
+00021c90: 2e6e 616e 6d69 6e2c 202a 2a6b 7761 7267  .nanmin, **kwarg
+00021ca0: 7329 0d0a 0d0a 2020 2020 6465 6620 6e61  s)....    def na
+00021cb0: 6e6d 6178 2873 656c 662c 202a 2a6b 7761  nmax(self, **kwa
+00021cc0: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
+00021cd0: 723a 0d0a 2020 2020 2020 2020 7265 7475  r:..        retu
+00021ce0: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
+00021cf0: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
+00021d00: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
+00021d10: 4e4d 4158 2c20 6e70 2e6e 616e 6d61 782c  NMAX, np.nanmax,
+00021d20: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+00021d30: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00021d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021d60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00021d80: 0a20 2020 2064 6566 2061 7267 6d69 6e28  .    def argmin(
+00021d90: 7365 6c66 2c20 2a2a 6b77 6172 6773 2920  self, **kwargs) 
+00021da0: 2d3e 2069 6e74 3a0d 0a20 2020 2020 2020  -> int:..       
+00021db0: 2072 6574 7572 6e20 7365 6c66 2e5f 7265   return self._re
+00021dc0: 6475 6365 5f63 6865 636b 2852 4544 5543  duce_check(REDUC
+00021dd0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+00021de0: 4345 5f41 5247 4d49 4e2c 206e 702e 6172  CE_ARGMIN, np.ar
+00021df0: 676d 696e 2c20 2a2a 6b77 6172 6773 290d  gmin, **kwargs).
+00021e00: 0a0d 0a20 2020 2064 6566 2061 7267 6d61  ...    def argma
+00021e10: 7828 7365 6c66 2c20 2a2a 6b77 6172 6773  x(self, **kwargs
+00021e20: 2920 2d3e 2069 6e74 3a0d 0a20 2020 2020  ) -> int:..     
+00021e30: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00021e40: 7265 6475 6365 5f63 6865 636b 2852 4544  reduce_check(RED
+00021e50: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
+00021e60: 4455 4345 5f41 5247 4d41 582c 206e 702e  DUCE_ARGMAX, np.
+00021e70: 6172 676d 6178 2c20 2a2a 6b77 6172 6773  argmax, **kwargs
+00021e80: 290d 0a0d 0a20 2020 2064 6566 206e 616e  )....    def nan
+00021e90: 6172 676d 696e 2873 656c 662c 202a 2a6b  argmin(self, **k
+00021ea0: 7761 7267 7329 202d 3e20 696e 743a 0d0a  wargs) -> int:..
+00021eb0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00021ec0: 656c 662e 5f72 6564 7563 655f 6368 6563  elf._reduce_chec
+00021ed0: 6b28 5245 4455 4345 5f46 554e 4354 494f  k(REDUCE_FUNCTIO
+00021ee0: 4e53 2e52 4544 5543 455f 4e41 4e41 5247  NS.REDUCE_NANARG
+00021ef0: 4d49 4e2c 206e 702e 6e61 6e61 7267 6d69  MIN, np.nanargmi
+00021f00: 6e2c 202a 2a6b 7761 7267 7329 0d0a 0d0a  n, **kwargs)....
+00021f10: 2020 2020 6465 6620 6e61 6e61 7267 6d61      def nanargma
+00021f20: 7828 7365 6c66 2c20 2a2a 6b77 6172 6773  x(self, **kwargs
+00021f30: 2920 2d3e 2069 6e74 3a0d 0a20 2020 2020  ) -> int:..     
+00021f40: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00021f50: 7265 6475 6365 5f63 6865 636b 2852 4544  reduce_check(RED
+00021f60: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
+00021f70: 4455 4345 5f4e 414e 4152 474d 4158 2c20  DUCE_NANARGMAX, 
+00021f80: 6e70 2e6e 616e 6172 676d 6178 2c20 2a2a  np.nanargmax, **
+00021f90: 6b77 6172 6773 290d 0a0d 0a20 2020 2023  kwargs)....    #
+00021fa0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00021fb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00021fc0: 2323 2323 2323 2323 2323 2323 0d0a 2020  ############..  
+00021fd0: 2020 2320 5374 6174 732f 4d4c 2073 6563    # Stats/ML sec
+00021fe0: 7469 6f6e 0d0a 2020 2020 2323 2323 2323  tion..    ######
+00021ff0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00022000: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00022010: 2323 2323 2323 230d 0a20 2020 2064 6566  #######..    def
+00022020: 206e 6f72 6d61 6c69 7a65 5f7a 7363 6f72   normalize_zscor
+00022030: 6528 7365 6c66 2920 2d3e 2046 6173 7441  e(self) -> FastA
+00022040: 7272 6179 3a0d 0a20 2020 2020 2020 2072  rray:..        r
+00022050: 6574 7572 6e20 6e6f 726d 616c 697a 655f  eturn normalize_
+00022060: 7a73 636f 7265 2873 656c 6629 0d0a 0d0a  zscore(self)....
+00022070: 2020 2020 6465 6620 6e6f 726d 616c 697a      def normaliz
+00022080: 655f 6d69 6e6d 6178 2873 656c 6629 202d  e_minmax(self) -
+00022090: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
+000220a0: 2020 2020 2020 7265 7475 726e 206e 6f72        return nor
+000220b0: 6d61 6c69 7a65 5f6d 696e 6d61 7828 7365  malize_minmax(se
+000220c0: 6c66 290d 0a0d 0a20 2020 2023 2323 2323  lf)....    #####
+000220d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000220e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000220f0: 2323 2323 2323 2323 0d0a 2020 2020 2320  ########..    # 
+00022100: 4261 7369 634d 6174 6820 7365 6374 696f  BasicMath sectio
+00022110: 6e20 2874 6f20 6265 2068 6f6f 6b65 6420  n (to be hooked 
+00022120: 6174 2043 206c 6576 656c 206e 6f77 290d  at C level now).
+00022130: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
+00022140: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00022150: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00022160: 2323 0d0a 2020 2020 2320 6465 6620 5f5f  ##..    # def __
+00022170: 6164 645f 5f28 7365 6c66 2c20 7661 6c75  add__(self, valu
+00022180: 6529 3a20 2020 7265 7375 6c74 3d72 632e  e):   result=rc.
+00022190: 4261 7369 634d 6174 6854 776f 496e 7075  BasicMathTwoInpu
+000221a0: 7473 2828 7365 6c66 2c20 7661 6c75 6529  ts((self, value)
+000221b0: 2c20 312c 2030 293b 2072 6573 756c 743d  , 1, 0); result=
+000221c0: 2072 6573 756c 7420 6966 2072 6573 756c   result if resul
+000221d0: 7420 6973 206e 6f74 204e 6f6e 6520 656c  t is not None el
+000221e0: 7365 206e 702e 6164 6428 7365 6c66 2c76  se np.add(self,v
+000221f0: 616c 7565 293b 2072 6574 7572 6e20 7265  alue); return re
+00022200: 7375 6c74 0d0a 2020 2020 2320 6465 6620  sult..    # def 
+00022210: 5f5f 6164 645f 5f28 7365 6c66 2c20 7661  __add__(self, va
+00022220: 6c75 6529 3a20 2020 7265 7475 726e 2072  lue):   return r
+00022230: 632e 4261 7369 634d 6174 6854 776f 496e  c.BasicMathTwoIn
+00022240: 7075 7473 2828 7365 6c66 2c20 7661 6c75  puts((self, valu
+00022250: 6529 2c20 312c 2030 290d 0a0d 0a20 2020  e), 1, 0)....   
+00022260: 2040 7072 6f70 6572 7479 0d0a 2020 2020   @property..    
+00022270: 405f 7573 655f 6175 746f 636f 6d70 6c65  @_use_autocomple
+00022280: 7465 5f70 6c61 6365 686f 6c64 6572 2830  te_placeholder(0
+00022290: 290d 0a20 2020 2064 6566 2063 7263 2873  )..    def crc(s
+000222a0: 656c 6629 202d 3e20 696e 743a 0d0a 2020  elf) -> int:..  
+000222b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+000222c0: 2020 2043 616c 6375 6c61 7465 2074 6865     Calculate the
+000222d0: 2033 322d 6269 7420 4352 4320 6f66 2074   32-bit CRC of t
+000222e0: 6865 2064 6174 6120 696e 2074 6869 7320  he data in this 
+000222f0: 6172 7261 7920 7573 696e 6720 7468 6520  array using the 
+00022300: 4361 7374 6167 6e6f 6c69 2070 6f6c 796e  Castagnoli polyn
+00022310: 6f6d 6961 6c20 2843 5243 3332 4329 2e0d  omial (CRC32C)..
+00022320: 0a0d 0a20 2020 2020 2020 2054 6869 7320  ...        This 
+00022330: 6675 6e63 7469 6f6e 2064 6f65 7320 6e6f  function does no
+00022340: 7420 636f 6e73 6964 6572 2074 6865 2061  t consider the a
+00022350: 7272 6179 2773 2073 6861 7065 206f 7220  rray's shape or 
+00022360: 7374 7269 6465 7320 7768 656e 2063 616c  strides when cal
+00022370: 6375 6c61 7469 6e67 2074 6865 2043 5243  culating the CRC
+00022380: 2c0d 0a20 2020 2020 2020 2069 7420 7369  ,..        it si
+00022390: 6d70 6c79 2063 616c 6375 6c61 7465 7320  mply calculates 
+000223a0: 7468 6520 4352 4320 7661 6c75 6520 6f76  the CRC value ov
+000223b0: 6572 2074 6865 2065 6e74 6972 6520 6275  er the entire bu
+000223c0: 6666 6572 2064 6573 6372 6962 6564 2062  ffer described b
+000223d0: 7920 7468 6520 6172 7261 792e 0d0a 0d0a  y the array.....
+000223e0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+000223f0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00022400: 2d2d 0d0a 2020 2020 2020 2020 6361 6e20  --..        can 
+00022410: 6265 2075 7365 6420 746f 2063 6f6d 7061  be used to compa
+00022420: 7265 2074 776f 2061 7272 6179 7320 666f  re two arrays fo
+00022430: 7220 7374 7275 6374 7572 616c 2065 7175  r structural equ
+00022440: 616c 6974 790d 0a20 2020 2020 2020 203e  ality..        >
+00022450: 3e3e 2061 203d 2061 7261 6e67 6528 3130  >> a = arange(10
+00022460: 3029 0d0a 2020 2020 2020 2020 3e3e 3e20  0)..        >>> 
+00022470: 6220 3d20 6172 616e 6765 2831 3030 2e30  b = arange(100.0
+00022480: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+00022490: 2e63 7263 203d 3d20 622e 6372 630d 0a20  .crc == b.crc.. 
+000224a0: 2020 2020 2020 2046 616c 7365 0d0a 2020         False..  
+000224b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+000224c0: 2020 2072 6574 7572 6e20 6372 6333 3263     return crc32c
+000224d0: 2873 656c 6629 0d0a 0d0a 2020 2020 2320  (self)....    # 
+000224e0: 746f 646f 3a20 7261 6e67 652f 6e61 6e72  todo: range/nanr
+000224f0: 616e 6765 0d0a 2020 2020 2320 746f 646f  ange..    # todo
+00022500: 3a20 7374 6174 732f 6e61 6e73 7461 7473  : stats/nanstats
+00022510: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00022520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022550: 2d0d 0a20 2020 2064 6566 2075 6e69 7175  -..    def uniqu
+00022560: 6528 0d0a 2020 2020 2020 2020 7365 6c66  e(..        self
+00022570: 2c0d 0a20 2020 2020 2020 2072 6574 7572  ,..        retur
+00022580: 6e5f 696e 6465 783a 2062 6f6f 6c20 3d20  n_index: bool = 
+00022590: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
+000225a0: 7265 7475 726e 5f69 6e76 6572 7365 3a20  return_inverse: 
+000225b0: 626f 6f6c 203d 2046 616c 7365 2c0d 0a20  bool = False,.. 
+000225c0: 2020 2020 2020 2072 6574 7572 6e5f 636f         return_co
+000225d0: 756e 7473 3a20 626f 6f6c 203d 2046 616c  unts: bool = Fal
+000225e0: 7365 2c0d 0a20 2020 2020 2020 2073 6f72  se,..        sor
+000225f0: 7465 643a 2062 6f6f 6c20 3d20 5472 7565  ted: bool = True
+00022600: 2c0d 0a20 2020 2020 2020 206c 6578 3a20  ,..        lex: 
+00022610: 626f 6f6c 203d 2046 616c 7365 2c0d 0a20  bool = False,.. 
+00022620: 2020 2020 2020 2064 7479 7065 3a20 4f70         dtype: Op
+00022630: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
+00022640: 2c20 6e70 2e64 7479 7065 5d5d 203d 204e  , np.dtype]] = N
+00022650: 6f6e 652c 0d0a 2020 2020 2020 2020 6669  one,..        fi
+00022660: 6c74 6572 3a20 4f70 7469 6f6e 616c 5b6e  lter: Optional[n
+00022670: 702e 6e64 6172 7261 795d 203d 204e 6f6e  p.ndarray] = Non
+00022680: 652c 0d0a 2020 2020 2020 2020 2a2a 6b77  e,..        **kw
+00022690: 6172 6773 2c0d 0a20 2020 2029 202d 3e20  args,..    ) -> 
+000226a0: 556e 696f 6e5b 2246 6173 7441 7272 6179  Union["FastArray
+000226b0: 222c 2054 7570 6c65 5b22 4661 7374 4172  ", Tuple["FastAr
+000226c0: 7261 7922 2c20 2e2e 2e5d 2c20 4c69 7374  ray", ...], List
+000226d0: 5b22 4661 7374 4172 7261 7922 5d2c 2074  ["FastArray"], t
+000226e0: 7570 6c65 5d3a 0d0a 2020 2020 2020 2020  uple]:..        
+000226f0: 2222 220d 0a20 2020 2020 2020 2046 696e  """..        Fin
+00022700: 6420 7468 6520 756e 6971 7565 2065 6c65  d the unique ele
+00022710: 6d65 6e74 7320 6f66 2061 6e20 6172 7261  ments of an arra
+00022720: 7920 6f72 2074 6865 2075 6e69 7175 6520  y or the unique 
+00022730: 636f 6d62 696e 6174 696f 6e73 206f 6620  combinations of 
+00022740: 656c 656d 656e 7473 2077 6974 680d 0a20  elements with.. 
+00022750: 2020 2020 2020 2063 6f72 7265 7370 6f6e         correspon
+00022760: 6469 6e67 2069 6e64 6963 6573 2069 6e20  ding indices in 
+00022770: 6d75 6c74 6970 6c65 2061 7272 6179 732e  multiple arrays.
+00022780: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+00022790: 3a6d 6574 683a 6072 6970 7461 626c 652e  :meth:`riptable.
+000227a0: 756e 6971 7565 6020 666f 7220 6675 6c6c  unique` for full
+000227b0: 2064 6f63 756d 656e 7461 7469 6f6e 2e0d   documentation..
+000227c0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+000227d0: 2020 2020 2020 7265 7475 726e 2075 6e69        return uni
+000227e0: 7175 6528 0d0a 2020 2020 2020 2020 2020  que(..          
+000227f0: 2020 7365 6c66 2c0d 0a20 2020 2020 2020    self,..       
+00022800: 2020 2020 2072 6574 7572 6e5f 696e 6465       return_inde
+00022810: 783d 7265 7475 726e 5f69 6e64 6578 2c0d  x=return_index,.
+00022820: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00022830: 7572 6e5f 696e 7665 7273 653d 7265 7475  urn_inverse=retu
+00022840: 726e 5f69 6e76 6572 7365 2c0d 0a20 2020  rn_inverse,..   
+00022850: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
+00022860: 636f 756e 7473 3d72 6574 7572 6e5f 636f  counts=return_co
+00022870: 756e 7473 2c0d 0a20 2020 2020 2020 2020  unts,..         
+00022880: 2020 2073 6f72 7465 643d 736f 7274 6564     sorted=sorted
+00022890: 2c0d 0a20 2020 2020 2020 2020 2020 206c  ,..            l
+000228a0: 6578 3d6c 6578 2c0d 0a20 2020 2020 2020  ex=lex,..       
+000228b0: 2020 2020 2064 7479 7065 3d64 7479 7065       dtype=dtype
+000228c0: 2c0d 0a20 2020 2020 2020 2020 2020 2066  ,..            f
+000228d0: 696c 7465 723d 6669 6c74 6572 2c0d 0a20  ilter=filter,.. 
+000228e0: 2020 2020 2020 2020 2020 202a 2a6b 7761             **kwa
+000228f0: 7267 732c 0d0a 2020 2020 2020 2020 290d  rgs,..        ).
+00022900: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
 00022910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00022920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00022930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022940: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-00022950: 2073 6869 6674 2873 656c 662c 2070 6572   shift(self, per
-00022960: 696f 6473 3d31 2c20 696e 7661 6c69 643d  iods=1, invalid=
-00022970: 4e6f 6e65 2920 2d3e 2046 6173 7441 7272  None) -> FastArr
-00022980: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
-00022990: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-000229a0: 2061 2073 6869 6674 6564 2060 4661 7374   a shifted `Fast
-000229b0: 4172 7261 7960 2e20 5370 6163 6573 2061  Array`. Spaces a
-000229c0: 7420 6569 7468 6572 2065 6e64 2028 6672  t either end (fr
-000229d0: 6f6d 2073 6869 6674 696e 6729 2061 7265  om shifting) are
-000229e0: 2066 696c 6c65 6420 7769 7468 2069 6e76   filled with inv
-000229f0: 616c 6964 2076 616c 7565 7320 6261 7365  alid values base
-00022a00: 6420 6f6e 2074 6865 2069 6e70 7574 2061  d on the input a
-00022a10: 7272 6179 2773 2064 6174 6120 7479 7065  rray's data type
-00022a20: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00022a30: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00022a40: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00022a50: 2020 2020 2070 6572 696f 6473 3a20 696e       periods: in
-00022a60: 742c 2064 6566 6175 6c74 2031 0d0a 2020  t, default 1..  
-00022a70: 2020 2020 2020 2020 2020 4e75 6d62 6572            Number
-00022a80: 206f 6620 656c 656d 656e 7420 706f 7369   of element posi
-00022a90: 7469 6f6e 7320 746f 2073 6869 6674 2072  tions to shift r
-00022aa0: 6967 6874 2028 6966 2070 6f73 6974 6976  ight (if positiv
-00022ab0: 6529 206f 7220 6c65 6674 2028 6966 206e  e) or left (if n
-00022ac0: 6567 6174 6976 6529 2e0d 0a0d 0a20 2020  egative).....   
-00022ad0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00022ae0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00022af0: 2020 2020 2020 2041 2073 6869 6674 6564         A shifted
-00022b00: 2060 4661 7374 4172 7261 7960 2e20 5370   `FastArray`. Sp
-00022b10: 6163 6573 2061 7420 6569 7468 6572 2065  aces at either e
-00022b20: 6e64 2028 6672 6f6d 2073 6869 6674 696e  nd (from shiftin
-00022b30: 6729 2061 7265 2066 696c 6c65 6420 7769  g) are filled wi
-00022b40: 7468 2069 6e76 616c 6964 2076 616c 7565  th invalid value
-00022b50: 7320 6261 7365 6420 6f6e 2074 6865 2069  s based on the i
-00022b60: 6e70 7574 2061 7272 6179 2773 2064 6174  nput array's dat
-00022b70: 6120 7479 7065 2e0d 0a0d 0a20 2020 2020  a type.....     
-00022b80: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
-00022b90: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00022ba0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00022bb0: 2e64 6966 6620 3a20 5265 7475 726e 7320  .diff : Returns 
-00022bc0: 6120 6046 6173 7441 7272 6179 6020 636f  a `FastArray` co
-00022bd0: 6e74 6169 6e69 6e67 2074 6865 2064 6966  ntaining the dif
-00022be0: 6665 7265 6e63 6573 2062 6574 7765 656e  ferences between
-00022bf0: 2061 646a 6163 656e 7420 696e 7075 7420   adjacent input 
-00022c00: 6172 7261 7920 7661 6c75 6573 2e0d 0a20  array values... 
-00022c10: 2020 2020 2020 202e 4361 7465 676f 7269         .Categori
-00022c20: 6361 6c2e 7368 6966 7420 3a20 5368 6966  cal.shift : Shif
-00022c30: 7473 2076 616c 7565 7320 696e 2074 6865  ts values in the
-00022c40: 2060 2e43 6174 6567 6f72 6963 616c 6020   `.Categorical` 
-00022c50: 6279 2061 2073 7065 6369 6669 6564 206e  by a specified n
-00022c60: 756d 6265 7220 6f66 2070 6572 696f 6473  umber of periods
-00022c70: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
-00022c80: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
-00022c90: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00022ca0: 2053 6869 6674 2061 7272 6179 2065 6c65   Shift array ele
-00022cb0: 6d65 6e74 7320 6f6e 6520 706f 7369 7469  ments one positi
-00022cc0: 6f6e 2074 6f20 7468 6520 7269 6768 743a  on to the right:
-00022cd0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-00022ce0: 613d 7274 2e46 4128 5b30 2c20 322c 2034  a=rt.FA([0, 2, 4
-00022cf0: 2c20 382c 2031 362c 2033 325d 290d 0a20  , 8, 16, 32]).. 
-00022d00: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
-00022d10: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-00022d20: 5b20 302c 2020 322c 2020 342c 2020 382c  [ 0,  2,  4,  8,
-00022d30: 2031 362c 2033 325d 290d 0a20 2020 2020   16, 32])..     
-00022d40: 2020 203e 3e3e 2061 2e73 6869 6674 2829     >>> a.shift()
-00022d50: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00022d60: 7261 7928 5b2d 3231 3437 3438 3336 3438  ray([-2147483648
-00022d70: 2c20 2020 2020 2020 2020 2020 302c 2020  ,           0,  
-00022d80: 2020 2020 2020 2020 2032 2c20 2020 2020           2,     
-00022d90: 2020 2020 2020 342c 0d0a 2020 2020 2020        4,..      
-00022da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022db0: 2020 2020 2020 2038 2c20 2020 2020 2020         8,       
-00022dc0: 2020 2031 365d 290d 0a0d 0a20 2020 2020     16])....     
-00022dd0: 2020 2053 6869 6674 2061 7272 6179 2065     Shift array e
-00022de0: 6c65 6d65 6e74 7320 7477 6f20 706f 7369  lements two posi
-00022df0: 7469 6f6e 7320 746f 2074 6865 206c 6566  tions to the lef
-00022e00: 743a 0d0a 0d0a 2020 2020 2020 2020 3e3e  t:....        >>
-00022e10: 3e20 612e 7368 6966 7428 2d32 290d 0a20  > a.shift(-2).. 
-00022e20: 2020 2020 2020 203e 3e3e 2046 6173 7441         >>> FastA
-00022e30: 7272 6179 285b 2020 2020 2020 2020 2020  rray([          
-00022e40: 342c 2020 2020 2020 2020 2020 2038 2c20  4,           8, 
-00022e50: 2020 2020 2020 2020 2031 362c 2020 2020           16,    
-00022e60: 2020 2020 2020 3332 2c0d 0a20 2020 2020        32,..     
-00022e70: 2020 2020 2020 2020 2020 2020 2020 2d32                -2
-00022e80: 3134 3734 3833 3634 382c 202d 3231 3437  147483648, -2147
-00022e90: 3438 3336 3438 5d29 0d0a 0d0a 2020 2020  483648])....    
-00022ea0: 2020 2020 5370 6563 6966 7920 6120 7368      Specify a sh
-00022eb0: 6966 7420 7661 6c75 6520 6772 6561 7465  ift value greate
-00022ec0: 7220 7468 616e 2074 6865 2061 7272 6179  r than the array
-00022ed0: 206c 656e 6774 683a 0d0a 0d0a 2020 2020   length:....    
-00022ee0: 2020 2020 3e3e 3e20 612e 7368 6966 7428      >>> a.shift(
-00022ef0: 3130 290d 0a20 2020 2020 2020 2046 6173  10)..        Fas
-00022f00: 7441 7272 6179 285b 2d32 3134 3734 3833  tArray([-2147483
-00022f10: 3634 382c 202d 3231 3437 3438 3336 3438  648, -2147483648
-00022f20: 2c20 2d32 3134 3734 3833 3634 382c 202d  , -2147483648, -
-00022f30: 3231 3437 3438 3336 3438 2c0d 0a20 2020  2147483648,..   
-00022f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022f50: 2d32 3134 3734 3833 3634 382c 202d 3231  -2147483648, -21
-00022f60: 3437 3438 3336 3438 5d29 0d0a 2020 2020  47483648])..    
-00022f70: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-00022f80: 2020 2069 6620 7065 7269 6f64 7320 3d3d     if periods ==
-00022f90: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
-00022fa0: 2072 6574 7572 6e20 7365 6c66 0d0a 0d0a   return self....
-00022fb0: 2020 2020 2020 2020 6966 2069 6e76 616c          if inval
-00022fc0: 6964 2069 7320 4e6f 6e65 3a0d 0a20 2020  id is None:..   
-00022fd0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00022fe0: 7374 616e 6365 2873 656c 662c 2054 7970  stance(self, Typ
-00022ff0: 6552 6567 6973 7465 722e 4361 7465 676f  eRegister.Catego
-00023000: 7269 6361 6c29 3a0d 0a20 2020 2020 2020  rical):..       
-00023010: 2020 2020 2020 2020 2069 6e76 616c 6964           invalid
-00023020: 203d 2030 0d0a 2020 2020 2020 2020 2020   = 0..          
-00023030: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00023040: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+00022940: 0d0a 2020 2020 6465 6620 6e75 6e69 7175  ..    def nuniqu
+00022950: 6528 7365 6c66 2920 2d3e 2069 6e74 3a0d  e(self) -> int:.
+00022960: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00022970: 2020 2020 2020 5265 7475 726e 2074 6865        Return the
+00022980: 206e 756d 6265 7220 6f66 2075 6e69 7175   number of uniqu
+00022990: 6520 7661 6c75 6573 2069 6e20 7468 6520  e values in the 
+000229a0: 696e 7075 7420 6046 6173 7441 7272 6179  input `FastArray
+000229b0: 602e 2044 6f65 7320 6e6f 7420 696e 636c  `. Does not incl
+000229c0: 7564 6520 4e61 4e20 6f72 2073 656e 7469  ude NaN or senti
+000229d0: 6e65 6c20 7661 6c75 6573 2e0d 0a0d 0a20  nel values..... 
+000229e0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+000229f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00022a00: 0a20 2020 2020 2020 2069 6e74 0d0a 2020  .        int..  
+00022a10: 2020 2020 2020 2020 2020 4e75 6d62 6572            Number
+00022a20: 206f 6620 756e 6971 7565 2076 616c 7565   of unique value
+00022a30: 7320 696e 2074 6865 2069 6e70 7574 2060  s in the input `
+00022a40: 4661 7374 4172 7261 7960 2e20 446f 6573  FastArray`. Does
+00022a50: 206e 6f74 2069 6e63 6c75 6465 204e 614e   not include NaN
+00022a60: 206f 7220 7365 6e74 696e 656c 2076 616c   or sentinel val
+00022a70: 7565 732e 0d0a 0d0a 2020 2020 2020 2020  ues.....        
+00022a80: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
+00022a90: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+00022aa0: 2020 2020 4661 7374 4172 7261 792e 6475      FastArray.du
+00022ab0: 706c 6963 6174 6564 203a 2052 6574 7572  plicated : Retur
+00022ac0: 6e73 2061 2062 6f6f 6c65 616e 2060 4661  ns a boolean `Fa
+00022ad0: 7374 4172 7261 7960 2069 6e64 6963 6174  stArray` indicat
+00022ae0: 696e 6720 6475 706c 6963 6174 6520 7661  ing duplicate va
+00022af0: 6c75 6573 2e0d 0a20 2020 2020 2020 202e  lues...        .
+00022b00: 4361 7465 676f 7269 6361 6c2e 6e75 6e69  Categorical.nuni
+00022b10: 7175 6520 3a20 5265 7475 726e 7320 7468  que : Returns th
+00022b20: 6520 6e75 6d62 6572 206f 6620 756e 6971  e number of uniq
+00022b30: 7565 2076 616c 7565 7320 7468 6174 206f  ue values that o
+00022b40: 6363 7572 2069 6e20 7468 6520 602e 4361  ccur in the `.Ca
+00022b50: 7465 676f 7269 6361 6c60 2e0d 0a0d 0a20  tegorical`..... 
+00022b60: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+00022b70: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00022b80: 2d0d 0a20 2020 2020 2020 2052 6574 7269  -..        Retri
+00022b90: 6576 6520 7468 6520 6e75 6d62 6572 206f  eve the number o
+00022ba0: 6620 756e 6971 7565 2076 616c 7565 7320  f unique values 
+00022bb0: 696e 2061 2066 6c6f 6174 696e 6720 706f  in a floating po
+00022bc0: 696e 7420 6046 6173 7441 7272 6179 603a  int `FastArray`:
+00022bd0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+00022be0: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
+00022bf0: 285b 312e 2c20 322e 2c20 332e 2c20 312e  ([1., 2., 3., 1.
+00022c00: 2c20 322e 2c20 332e 5d29 0d0a 2020 2020  , 2., 3.])..    
+00022c10: 2020 2020 3e3e 3e20 610d 0a20 2020 2020      >>> a..     
+00022c20: 2020 2046 6173 7441 7272 6179 285b 312e     FastArray([1.
+00022c30: 2c20 322e 2c20 332e 2c20 312e 2c20 322e  , 2., 3., 1., 2.
+00022c40: 2c20 332e 5d29 0d0a 2020 2020 2020 2020  , 3.])..        
+00022c50: 3e3e 3e20 612e 6e75 6e69 7175 6528 290d  >>> a.nunique().
+00022c60: 0a20 2020 2020 2020 2033 0d0a 0d0a 2020  .        3....  
+00022c70: 2020 2020 2020 5265 7472 6965 7665 2074        Retrieve t
+00022c80: 6865 206e 756d 6265 7220 6f66 2075 6e69  he number of uni
+00022c90: 7175 6520 7661 6c75 6573 2069 6e20 6120  que values in a 
+00022ca0: 666c 6f61 7469 6e67 2070 6f69 6e74 2060  floating point `
+00022cb0: 4661 7374 4172 7261 7960 2077 6974 6820  FastArray` with 
+00022cc0: 6120 4e61 4e20 7661 6c75 653a 0d0a 0d0a  a NaN value:....
+00022cd0: 2020 2020 2020 2020 3e3e 3e20 6132 203d          >>> a2 =
+00022ce0: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
+00022cf0: 2e2c 2032 2e2c 2033 2e2c 2031 2e2c 2032  ., 2., 3., 1., 2
+00022d00: 2e2c 2033 2e2c 2072 742e 6e61 6e5d 290d  ., 3., rt.nan]).
+00022d10: 0a20 2020 2020 2020 203e 3e3e 2061 320d  .        >>> a2.
+00022d20: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00022d30: 6179 285b 2031 2e2c 2020 322e 2c20 2033  ay([ 1.,  2.,  3
+00022d40: 2e2c 2020 312e 2c20 2032 2e2c 2020 332e  .,  1.,  2.,  3.
+00022d50: 2c20 6e61 6e5d 290d 0a20 2020 2020 2020  , nan])..       
+00022d60: 203e 3e3e 2061 322e 6e75 6e69 7175 6528   >>> a2.nunique(
+00022d70: 2920 2023 2054 6865 204e 614e 2076 616c  )  # The NaN val
+00022d80: 7565 2069 7320 6e6f 7420 696e 636c 7564  ue is not includ
+00022d90: 6564 2e0d 0a20 2020 2020 2020 2033 0d0a  ed...        3..
+00022da0: 0d0a 2020 2020 2020 2020 5265 7472 6965  ..        Retrie
+00022db0: 7665 2074 6865 206e 756d 6265 7220 6f66  ve the number of
+00022dc0: 2075 6e69 7175 6520 7661 6c75 6573 2069   unique values i
+00022dd0: 6e20 616e 2075 6e73 6967 6e65 6420 696e  n an unsigned in
+00022de0: 7465 6765 7220 6046 6173 7441 7272 6179  teger `FastArray
+00022df0: 6020 7769 7468 2061 2073 656e 7469 6e65  ` with a sentine
+00022e00: 6c20 7661 6c75 653a 0d0a 0d0a 2020 2020  l value:....    
+00022e10: 2020 2020 3e3e 3e20 6133 203d 2072 742e      >>> a3 = rt.
+00022e20: 4661 7374 4172 7261 7928 5b32 3535 2c20  FastArray([255, 
+00022e30: 322c 2033 2c20 322c 2033 5d2c 2064 7479  2, 3, 2, 3], dty
+00022e40: 7065 3d22 7569 6e74 3822 290d 0a20 2020  pe="uint8")..   
+00022e50: 2020 2020 203e 3e3e 2061 330d 0a20 2020       >>> a3..   
+00022e60: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+00022e70: 3235 352c 2020 2032 2c20 2020 332c 2020  255,   2,   3,  
+00022e80: 2032 2c20 2020 335d 2c20 6474 7970 653d   2,   3], dtype=
+00022e90: 7569 6e74 3829 0d0a 2020 2020 2020 2020  uint8)..        
+00022ea0: 3e3e 3e20 6133 2e6e 756e 6971 7565 2829  >>> a3.nunique()
+00022eb0: 2020 2320 5468 6520 7365 6e74 696e 656c    # The sentinel
+00022ec0: 2076 616c 7565 2069 7320 6e6f 7420 696e   value is not in
+00022ed0: 636c 7564 6564 2e0d 0a20 2020 2020 2020  cluded...       
+00022ee0: 2032 0d0a 2020 2020 2020 2020 2222 220d   2..        """.
+00022ef0: 0a20 2020 2020 2020 2075 6e20 3d20 756e  .        un = un
+00022f00: 6971 7565 2873 656c 6629 0d0a 2020 2020  ique(self)..    
+00022f10: 2020 2020 636f 756e 7420 3d20 6c65 6e28      count = len(
+00022f20: 756e 290d 0a20 2020 2020 2020 2069 6620  un)..        if 
+00022f30: 636f 756e 7420 3e20 303a 0d0a 2020 2020  count > 0:..    
+00022f40: 2020 2020 2020 2020 2320 756e 6971 7565          # unique
+00022f50: 2069 7320 736f 7274 6564 2c20 736f 2063   is sorted, so c
+00022f60: 6865 636b 2066 6f72 2073 656e 7469 6e65  heck for sentine
+00022f70: 6c20 6261 7365 6420 6f6e 2064 7479 7065  l based on dtype
+00022f80: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+00022f90: 7620 3d20 494e 5641 4c49 445f 4449 4354  v = INVALID_DICT
+00022fa0: 5b73 656c 662e 6474 7970 652e 6e75 6d5d  [self.dtype.num]
+00022fb0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00022fc0: 2073 656c 662e 6474 7970 652e 6368 6172   self.dtype.char
+00022fd0: 2069 6e20 4e75 6d70 7943 6861 7254 7970   in NumpyCharTyp
+00022fe0: 6573 2e41 6c6c 466c 6f61 743a 0d0a 2020  es.AllFloat:..  
+00022ff0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00023000: 6368 6563 6b20 6966 206c 6173 7420 6974  check if last it
+00023010: 656d 2069 7320 6e61 6e0d 0a20 2020 2020  em is nan..     
+00023020: 2020 2020 2020 2020 2020 2069 6620 756e             if un
+00023030: 5b63 6f75 6e74 202d 2031 5d20 213d 2075  [count - 1] != u
+00023040: 6e5b 636f 756e 7420 2d20 315d 3a0d 0a20  n[count - 1]:.. 
 00023050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023060: 2020 2069 6e76 616c 6964 203d 2049 4e56     invalid = INV
-00023070: 414c 4944 5f44 4943 545b 7365 6c66 2e64  ALID_DICT[self.d
-00023080: 7479 7065 2e6e 756d 5d0d 0a20 2020 2020  type.num]..     
-00023090: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-000230a0: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
-000230b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000230c0: 2020 7261 6973 6520 5479 7065 4572 726f    raise TypeErro
-000230d0: 7228 6622 7368 6966 7420 646f 6573 206e  r(f"shift does n
-000230e0: 6f74 2073 7570 706f 7274 2074 6865 2064  ot support the d
-000230f0: 7479 7065 207b 7365 6c66 2e64 7479 7065  type {self.dtype
-00023100: 2e6e 616d 6521 727d 2229 0d0a 0d0a 2020  .name!r}")....  
-00023110: 2020 2020 2020 2320 7765 206b 6e6f 7720        # we know 
-00023120: 7468 6174 2074 6869 7320 6973 2061 2073  that this is a s
-00023130: 696d 706c 6520 7665 6374 6f72 3a20 7368  imple vector: sh
-00023140: 6170 6520 3d3d 2028 6c65 6e2c 2029 0d0a  ape == (len, )..
-00023150: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
-00023160: 6765 7420 7265 6379 636c 6564 0d0a 2020  get recycled..  
-00023170: 2020 2020 2020 7465 6d70 203d 2065 6d70        temp = emp
-00023180: 7479 5f6c 696b 6528 7365 6c66 290d 0a20  ty_like(self).. 
-00023190: 2020 2020 2020 2069 6620 6162 7328 7065         if abs(pe
-000231a0: 7269 6f64 7329 203e 3d20 6c65 6e28 7365  riods) >= len(se
-000231b0: 6c66 293a 0d0a 2020 2020 2020 2020 2020  lf):..          
-000231c0: 2020 7465 6d70 2e66 696c 6c28 696e 7661    temp.fill(inva
-000231d0: 6c69 6429 0d0a 2020 2020 2020 2020 656c  lid)..        el
-000231e0: 6966 2070 6572 696f 6473 203e 2030 3a0d  if periods > 0:.
-000231f0: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
-00023200: 705b 3a70 6572 696f 6473 5d20 3d20 696e  p[:periods] = in
-00023210: 7661 6c69 640d 0a20 2020 2020 2020 2020  valid..         
-00023220: 2020 2074 656d 705b 7065 7269 6f64 733a     temp[periods:
-00023230: 5d20 3d20 7365 6c66 5b3a 2d70 6572 696f  ] = self[:-perio
-00023240: 6473 5d0d 0a20 2020 2020 2020 2065 6c73  ds]..        els
-00023250: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00023260: 7465 6d70 5b3a 7065 7269 6f64 735d 203d  temp[:periods] =
-00023270: 2073 656c 665b 2d70 6572 696f 6473 3a5d   self[-periods:]
-00023280: 0d0a 2020 2020 2020 2020 2020 2020 7465  ..            te
-00023290: 6d70 5b70 6572 696f 6473 3a5d 203d 2069  mp[periods:] = i
-000232a0: 6e76 616c 6964 0d0a 0d0a 2020 2020 2020  nvalid....      
-000232b0: 2020 2320 746f 2072 6577 7261 7020 6361    # to rewrap ca
-000232c0: 7465 676f 7269 6361 6c73 206f 7220 6461  tegoricals or da
-000232d0: 7465 6c69 6b65 0d0a 2020 2020 2020 2020  telike..        
-000232e0: 6966 2068 6173 6174 7472 2873 656c 662c  if hasattr(self,
-000232f0: 2022 6e65 7763 6c61 7373 6672 6f6d 696e   "newclassfromin
-00023300: 7374 616e 6365 2229 3a0d 0a20 2020 2020  stance"):..     
-00023310: 2020 2020 2020 2074 656d 7020 3d20 7365         temp = se
-00023320: 6c66 2e6e 6577 636c 6173 7366 726f 6d69  lf.newclassfromi
-00023330: 6e73 7461 6e63 6528 7465 6d70 2c20 7365  nstance(temp, se
-00023340: 6c66 290d 0a0d 0a20 2020 2020 2020 2072  lf)....        r
-00023350: 6574 7572 6e20 7465 6d70 0d0a 0d0a 2020  eturn temp....  
-00023360: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-00023370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-000233a0: 2064 6566 205f 696e 7465 726e 616c 5f73   def _internal_s
-000233b0: 656c 665f 636f 6d70 6172 6528 7365 6c66  elf_compare(self
-000233c0: 2c20 6d61 7468 5f6f 702c 2070 6572 696f  , math_op, perio
-000233d0: 6473 3d31 2c20 6661 6e63 793d 4661 6c73  ds=1, fancy=Fals
-000233e0: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
-000233f0: 696e 7465 726e 616c 2072 6f75 7469 6e65  internal routine
-00023400: 2075 7365 6420 666f 7220 6469 6666 6572   used for differ
-00023410: 7320 616e 6420 7472 616e 7369 7469 6f6e  s and transition
-00023420: 7322 2222 0d0a 2020 2020 2020 2020 7265  s"""..        re
-00023430: 7375 6c74 203d 2065 6d70 7479 5f6c 696b  sult = empty_lik
-00023440: 6528 7365 6c66 2c20 6474 7970 653d 6e70  e(self, dtype=np
-00023450: 2e62 6f6f 6c5f 290d 0a0d 0a20 2020 2020  .bool_)....     
-00023460: 2020 2069 6620 7065 7269 6f64 7320 3d3d     if periods ==
-00023470: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
-00023480: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00023490: 7228 2270 6572 696f 6473 206f 6620 3020  r("periods of 0 
-000234a0: 6973 2069 6e76 616c 6964 2066 6f72 2074  is invalid for t
-000234b0: 7261 6e73 6974 696f 6e73 2229 0d0a 0d0a  ransitions")....
-000234c0: 2020 2020 2020 2020 6966 2070 6572 696f          if perio
-000234d0: 6473 203e 2030 3a0d 0a20 2020 2020 2020  ds > 0:..       
-000234e0: 2020 2020 2054 7970 6552 6567 6973 7465       TypeRegiste
-000234f0: 722e 4d61 7468 4c65 6467 6572 2e5f 4241  r.MathLedger._BA
-00023500: 5349 434d 4154 485f 5457 4f5f 494e 5055  SICMATH_TWO_INPU
-00023510: 5453 280d 0a20 2020 2020 2020 2020 2020  TS(..           
-00023520: 2020 2020 2028 7365 6c66 5b70 6572 696f       (self[perio
-00023530: 6473 3a5d 2c20 7365 6c66 5b3a 2d70 6572  ds:], self[:-per
-00023540: 696f 6473 5d2c 2072 6573 756c 745b 7065  iods], result[pe
-00023550: 7269 6f64 733a 5d29 2c20 6d61 7468 5f6f  riods:]), math_o
-00023560: 702c 2030 0d0a 2020 2020 2020 2020 2020  p, 0..          
-00023570: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00023580: 2023 2066 696c 6c20 7570 6672 6f6e 7420   # fill upfront 
-00023590: 7769 7468 2069 6e76 616c 6964 730d 0a20  with invalids.. 
-000235a0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-000235b0: 745b 3a70 6572 696f 6473 5d20 3d20 4661  t[:periods] = Fa
-000235c0: 6c73 650d 0a20 2020 2020 2020 2065 6c73  lse..        els
-000235d0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000235e0: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
-000235f0: 684c 6564 6765 722e 5f42 4153 4943 4d41  hLedger._BASICMA
-00023600: 5448 5f54 574f 5f49 4e50 5554 5328 0d0a  TH_TWO_INPUTS(..
-00023610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023620: 2873 656c 665b 3a70 6572 696f 6473 5d2c  (self[:periods],
-00023630: 2073 656c 665b 2d70 6572 696f 6473 3a5d   self[-periods:]
-00023640: 2c20 7265 7375 6c74 5b3a 7065 7269 6f64  , result[:period
-00023650: 735d 292c 206d 6174 685f 6f70 2c20 300d  s]), math_op, 0.
-00023660: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-00023670: 2020 2020 2020 2020 2020 2020 2320 6669              # fi
-00023680: 6c6c 2062 6163 6b20 7769 7468 2069 6e76  ll back with inv
-00023690: 616c 6964 7320 2870 6572 696f 6473 2069  alids (periods i
-000236a0: 7320 6e65 6761 7469 7665 290d 0a20 2020  s negative)..   
-000236b0: 2020 2020 2020 2020 2072 6573 756c 745b           result[
-000236c0: 7065 7269 6f64 733a 5d20 3d20 4661 6c73  periods:] = Fals
-000236d0: 650d 0a0d 0a20 2020 2020 2020 2069 6620  e....        if 
-000236e0: 6661 6e63 793a 0d0a 2020 2020 2020 2020  fancy:..        
-000236f0: 2020 2020 7265 7475 726e 2062 6f6f 6c5f      return bool_
-00023700: 746f 5f66 616e 6379 2872 6573 756c 7429  to_fancy(result)
-00023710: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00023720: 2072 6573 756c 740d 0a0d 0a20 2020 2023   result....    #
-00023730: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-00023740: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023760: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
-00023770: 6620 6469 6666 6572 7328 7365 6c66 2c20  f differs(self, 
-00023780: 7065 7269 6f64 733d 312c 2066 616e 6379  periods=1, fancy
-00023790: 3d46 616c 7365 2920 2d3e 2046 6173 7441  =False) -> FastA
-000237a0: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
-000237b0: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
-000237c0: 726e 7320 6120 626f 6f6c 6561 6e20 6172  rns a boolean ar
-000237d0: 7261 792e 0d0a 2020 2020 2020 2020 5468  ray...        Th
-000237e0: 6520 626f 6f6c 6561 6e20 6172 7261 7920  e boolean array 
-000237f0: 6973 2073 6574 2074 6f20 5472 7565 2077  is set to True w
-00023800: 6865 6e20 7468 6520 7072 6576 696f 7573  hen the previous
-00023810: 2069 7465 6d20 696e 2074 6865 2061 7272   item in the arr
-00023820: 6179 2065 7175 616c 7320 7468 6520 6375  ay equals the cu
-00023830: 7272 656e 742e 0d0a 2020 2020 2020 2020  rrent...        
-00023840: 5573 6520 2d31 2069 6e73 7465 6164 206f  Use -1 instead o
-00023850: 6620 3120 6966 2079 6f75 2077 616e 7420  f 1 if you want 
-00023860: 5472 7565 2073 6574 2077 6865 6e20 7468  True set when th
-00023870: 6520 6e65 7874 2069 7465 6d20 696e 2074  e next item in t
-00023880: 6865 2061 7272 6179 2065 7175 616c 7320  he array equals 
-00023890: 7468 6520 7072 6576 696f 7573 2e0d 0a20  the previous... 
-000238a0: 2020 2020 2020 2053 6565 2061 6c73 6f3a         See also:
-000238b0: 2060 6074 7261 6e73 6974 696f 6e73 6060   ``transitions``
-000238c0: 0d0a 0d0a 2020 2020 2020 2020 3a3a 7061  ....        ::pa
-000238d0: 7261 6d20 7065 7269 6f64 733a 2054 6865  ram periods: The
-000238e0: 206e 756d 6265 7220 6f66 2065 6c65 6d65   number of eleme
-000238f0: 6e74 7320 746f 206c 6f6f 6b20 6168 6561  nts to look ahea
-00023900: 6420 286f 7220 6265 6869 6e64 292c 2064  d (or behind), d
-00023910: 6566 6175 6c74 7320 746f 2031 0d0a 2020  efaults to 1..  
-00023920: 2020 2020 2020 3a74 7970 6520 7065 7269        :type peri
-00023930: 6f64 733a 2069 6e74 0d0a 2020 2020 2020  ods: int..      
-00023940: 2020 3a70 6172 616d 2066 616e 6379 3a20    :param fancy: 
-00023950: 496e 6469 6361 7465 7320 7768 6574 6865  Indicates whethe
-00023960: 7220 746f 2072 6574 7572 6e20 6120 6661  r to return a fa
-00023970: 6e63 795f 696e 6465 7820 696e 7374 6561  ncy_index instea
-00023980: 6420 6f66 2061 2062 6f6f 6c65 616e 2061  d of a boolean a
-00023990: 7272 6179 2c20 6465 6661 756c 7473 2074  rray, defaults t
-000239a0: 6f20 4661 6c73 652e 0d0a 2020 2020 2020  o False...      
-000239b0: 2020 3a74 7970 6520 6661 6e63 793a 2062    :type fancy: b
-000239c0: 6f6f 6c0d 0a20 2020 2020 2020 203a 7265  ool..        :re
-000239d0: 7475 726e 3a20 626f 6f6c 6561 6e20 6060  turn: boolean ``
-000239e0: 4661 7374 4172 7261 7960 602c 206f 7220  FastArray``, or 
-000239f0: 6661 6e63 7949 6e64 6578 2028 7365 653a  fancyIndex (see:
-00023a00: 2060 6661 6e63 7960 206b 7761 7267 290d   `fancy` kwarg).
-00023a10: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00023a20: 2020 2020 2020 6966 2073 656c 662e 6474        if self.dt
-00023a30: 7970 652e 6e75 6d20 3e20 3133 3a0d 0a20  ype.num > 13:.. 
-00023a40: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00023a50: 7420 3d20 7365 6c66 2021 3d20 7365 6c66  t = self != self
-00023a60: 2e73 6869 6674 2870 6572 696f 6473 290d  .shift(periods).
-00023a70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00023a80: 6661 6e63 793a 0d0a 2020 2020 2020 2020  fancy:..        
-00023a90: 2020 2020 2020 2020 7265 7475 726e 2062          return b
-00023aa0: 6f6f 6c5f 746f 5f66 616e 6379 2872 6573  ool_to_fancy(res
-00023ab0: 756c 7429 0d0a 2020 2020 2020 2020 2020  ult)..          
-00023ac0: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
-00023ad0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00023ae0: 7365 6c66 2e5f 696e 7465 726e 616c 5f73  self._internal_s
-00023af0: 656c 665f 636f 6d70 6172 6528 4d41 5448  elf_compare(MATH
-00023b00: 5f4f 5045 5241 5449 4f4e 2e43 4d50 5f45  _OPERATION.CMP_E
-00023b10: 512c 2070 6572 696f 6473 3d70 6572 696f  Q, periods=perio
-00023b20: 6473 2c20 6661 6e63 793d 6661 6e63 7929  ds, fancy=fancy)
-00023b30: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-00023b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023b80: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2074  -----..    def t
-00023b90: 7261 6e73 6974 696f 6e73 2873 656c 662c  ransitions(self,
-00023ba0: 2070 6572 696f 6473 3d31 2c20 6661 6e63   periods=1, fanc
-00023bb0: 793d 4661 6c73 6529 202d 3e20 4661 7374  y=False) -> Fast
-00023bc0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00023bd0: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
-00023be0: 7572 6e73 2061 2062 6f6f 6c65 616e 2061  urns a boolean a
-00023bf0: 7272 6179 2e0d 0a20 2020 2020 2020 2054  rray...        T
-00023c00: 6865 2062 6f6f 6c65 616e 2061 7272 6179  he boolean array
-00023c10: 2069 7320 7365 7420 746f 2054 7275 6520   is set to True 
-00023c20: 7768 656e 2074 6865 2070 7265 7669 6f75  when the previou
-00023c30: 7320 6974 656d 2069 6e20 7468 6520 6172  s item in the ar
-00023c40: 7261 7920 646f 6573 206e 6f74 2065 7175  ray does not equ
-00023c50: 616c 2074 6865 2063 7572 7265 6e74 2e0d  al the current..
-00023c60: 0a20 2020 2020 2020 2055 7365 202d 3120  .        Use -1 
-00023c70: 696e 7374 6561 6420 6f66 2031 2069 6620  instead of 1 if 
-00023c80: 796f 7520 7761 6e74 2054 7275 6520 7365  you want True se
-00023c90: 7420 7768 656e 2074 6865 206e 6578 7420  t when the next 
-00023ca0: 6974 656d 2069 6e20 7468 6520 6172 7261  item in the arra
-00023cb0: 7920 646f 6573 206e 6f74 2065 7175 616c  y does not equal
-00023cc0: 2074 6865 2070 7265 7669 6f75 732e 0d0a   the previous...
-00023cd0: 2020 2020 2020 2020 5365 6520 616c 736f          See also
-00023ce0: 3a20 6060 6469 6666 6572 7360 600d 0a0d  : ``differs``...
-00023cf0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00023d00: 7065 7269 6f64 733a 2054 6865 206e 756d  periods: The num
-00023d10: 6265 7220 6f66 2065 6c65 6d65 6e74 7320  ber of elements 
-00023d20: 746f 206c 6f6f 6b20 6168 6561 6420 286f  to look ahead (o
-00023d30: 7220 6265 6869 6e64 292c 2064 6566 6175  r behind), defau
-00023d40: 6c74 7320 746f 2031 0d0a 2020 2020 2020  lts to 1..      
-00023d50: 2020 3a74 7970 6520 7065 7269 6f64 733a    :type periods:
-00023d60: 2069 6e74 0d0a 2020 2020 2020 2020 3a70   int..        :p
-00023d70: 6172 616d 2066 616e 6379 3a20 496e 6469  aram fancy: Indi
-00023d80: 6361 7465 7320 7768 6574 6865 7220 746f  cates whether to
-00023d90: 2072 6574 7572 6e20 6120 6661 6e63 795f   return a fancy_
-00023da0: 696e 6465 7820 696e 7374 6561 6420 6f66  index instead of
-00023db0: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
-00023dc0: 2c20 6465 6661 756c 7473 2074 6f20 4661  , defaults to Fa
-00023dd0: 6c73 652e 0d0a 2020 2020 2020 2020 3a74  lse...        :t
-00023de0: 7970 6520 6661 6e63 793a 2062 6f6f 6c0d  ype fancy: bool.
-00023df0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00023e00: 3a20 626f 6f6c 6561 6e20 6060 4661 7374  : boolean ``Fast
-00023e10: 4172 7261 7960 602c 206f 7220 6661 6e63  Array``, or fanc
-00023e20: 7949 6e64 6578 2028 7365 653a 2060 6661  yIndex (see: `fa
-00023e30: 6e63 7960 206b 7761 7267 290d 0a0d 0a20  ncy` kwarg).... 
-00023e40: 2020 2020 2020 203e 3e3e 2061 203d 2046         >>> a = F
-00023e50: 6173 7441 7272 6179 285b 302c 312c 322c  astArray([0,1,2,
-00023e60: 332c 332c 332c 345d 290d 0a20 2020 2020  3,3,3,4])..     
-00023e70: 2020 203e 3e3e 2061 2e74 7261 6e73 6974     >>> a.transit
-00023e80: 696f 6e73 2870 6572 696f 6473 3d31 290d  ions(periods=1).
-00023e90: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00023ea0: 6179 285b 4661 6c73 652c 2054 7275 652c  ay([False, True,
-00023eb0: 2054 7275 652c 2054 7275 652c 2046 616c   True, True, Fal
-00023ec0: 7365 2c20 4661 6c73 652c 2054 7275 655d  se, False, True]
-00023ed0: 290d 0a0d 0a20 2020 2020 2020 203e 3e3e  )....        >>>
-00023ee0: 2061 2e74 7261 6e73 6974 696f 6e73 2870   a.transitions(p
-00023ef0: 6572 696f 6473 3d32 290d 0a20 2020 2020  eriods=2)..     
-00023f00: 2020 2046 6173 7441 7272 6179 285b 4661     FastArray([Fa
-00023f10: 6c73 652c 2046 616c 7365 2c20 5472 7565  lse, False, True
-00023f20: 2c20 5472 7565 2c20 5472 7565 2c20 4661  , True, True, Fa
-00023f30: 6c73 652c 2054 7275 655d 290d 0a0d 0a20  lse, True]).... 
-00023f40: 2020 2020 2020 203e 3e3e 2061 2e74 7261         >>> a.tra
-00023f50: 6e73 6974 696f 6e73 2870 6572 696f 6473  nsitions(periods
-00023f60: 3d2d 3129 0d0a 2020 2020 2020 2020 4661  =-1)..        Fa
-00023f70: 7374 4172 7261 7928 5b20 5472 7565 2c20  stArray([ True, 
-00023f80: 5472 7565 2c20 5472 7565 2c20 4661 6c73  True, True, Fals
-00023f90: 652c 2046 616c 7365 2c20 5472 7565 2c20  e, False, True, 
-00023fa0: 4661 6c73 655d 290d 0a20 2020 2020 2020  False])..       
-00023fb0: 2022 2222 0d0a 2020 2020 2020 2020 6966   """..        if
-00023fc0: 2073 656c 662e 6474 7970 652e 6e75 6d20   self.dtype.num 
-00023fd0: 3e20 3133 3a0d 0a20 2020 2020 2020 2020  > 13:..         
-00023fe0: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-00023ff0: 2021 3d20 7365 6c66 2e73 6869 6674 2870   != self.shift(p
-00024000: 6572 696f 6473 290d 0a20 2020 2020 2020  eriods)..       
-00024010: 2020 2020 2069 6620 6661 6e63 793a 0d0a       if fancy:..
-00024020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024030: 7265 7475 726e 2062 6f6f 6c5f 746f 5f66  return bool_to_f
-00024040: 616e 6379 2872 6573 756c 7429 0d0a 2020  ancy(result)..  
-00024050: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00024060: 2072 6573 756c 740d 0a20 2020 2020 2020   result..       
-00024070: 2072 6574 7572 6e20 7365 6c66 2e5f 696e   return self._in
-00024080: 7465 726e 616c 5f73 656c 665f 636f 6d70  ternal_self_comp
-00024090: 6172 6528 4d41 5448 5f4f 5045 5241 5449  are(MATH_OPERATI
-000240a0: 4f4e 2e43 4d50 5f4e 452c 2070 6572 696f  ON.CMP_NE, perio
-000240b0: 6473 3d70 6572 696f 6473 2c20 6661 6e63  ds=periods, fanc
-000240c0: 793d 6661 6e63 7929 0d0a 0d0a 2020 2020  y=fancy)....    
-000240d0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
-000240e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000240f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024100: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-00024110: 6566 2064 6966 6628 7365 6c66 2c20 7065  ef diff(self, pe
-00024120: 7269 6f64 733d 3129 202d 3e20 4661 7374  riods=1) -> Fast
-00024130: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00024140: 2222 220d 0a20 2020 2020 2020 204f 6e6c  """..        Onl
-00024150: 7920 776f 726b 7320 666f 7220 696e 7465  y works for inte
-00024160: 6765 7273 2061 6e64 2066 6c6f 6174 732e  gers and floats.
-00024170: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
-00024180: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
-00024190: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-000241a0: 2020 2020 7065 7269 6f64 733a 2069 6e74      periods: int
-000241b0: 2c20 6465 6661 756c 7473 2074 6f20 312e  , defaults to 1.
-000241c0: 2020 486f 7720 6d61 6e79 2065 6c65 6d65    How many eleme
-000241d0: 6e74 7320 746f 2073 6869 6674 2074 6865  nts to shift the
-000241e0: 2064 6174 6120 6265 666f 7265 2073 7562   data before sub
-000241f0: 7472 6163 7469 6e67 2e0d 0a0d 0a20 2020  tracting.....   
-00024200: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00024210: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00024220: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00024230: 2073 616d 6520 6c65 6e67 7468 2061 7320   same length as 
-00024240: 6375 7272 656e 7420 6172 7261 792e 2020  current array.  
-00024250: 496e 7661 6c69 6473 2077 696c 6c20 6669  Invalids will fi
-00024260: 6c6c 2074 6865 2062 6567 696e 6e69 6e67  ll the beginning
-00024270: 2062 6173 6564 206f 6e20 7468 6520 7065   based on the pe
-00024280: 7269 6f64 732e 0d0a 0d0a 2020 2020 2020  riods.....      
-00024290: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-000242a0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-000242b0: 2020 2020 2020 3e3e 3e20 613d 7274 2e61        >>> a=rt.a
-000242c0: 7261 6e67 6528 332c 2064 7479 7065 3d72  range(3, dtype=r
-000242d0: 742e 696e 7433 3229 3b20 612e 6469 6666  t.int32); a.diff
-000242e0: 2829 0d0a 2020 2020 2020 2020 4661 7374  ()..        Fast
-000242f0: 4172 7261 7928 5b2d 3231 3437 3438 3336  Array([-21474836
-00024300: 3438 2c20 2020 2020 2020 2020 2020 312c  48,           1,
-00024310: 2020 2020 2020 2020 2020 2031 5d29 0d0a             1])..
-00024320: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00024330: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00024340: 2020 2020 2020 2020 2069 6e76 616c 6964           invalid
-00024350: 203d 2049 4e56 414c 4944 5f44 4943 545b   = INVALID_DICT[
-00024360: 7365 6c66 2e64 7479 7065 2e6e 756d 5d0d  self.dtype.num].
-00024370: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
-00024380: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-00024390: 6973 6520 5479 7065 4572 726f 7228 6622  ise TypeError(f"
-000243a0: 7368 6966 7420 646f 6573 206e 6f74 2073  shift does not s
-000243b0: 7570 706f 7274 2074 6865 2064 7479 7065  upport the dtype
-000243c0: 207b 7365 6c66 2e64 7479 7065 2e6e 616d   {self.dtype.nam
-000243d0: 6521 727d 2229 0d0a 0d0a 2020 2020 2020  e!r}")....      
-000243e0: 2020 7465 6d70 203d 2065 6d70 7479 2873    temp = empty(s
-000243f0: 656c 662e 7368 6170 652c 2064 7479 7065  elf.shape, dtype
-00024400: 3d73 656c 662e 6474 7970 6529 0d0a 2020  =self.dtype)..  
-00024410: 2020 2020 2020 6966 2061 6273 2870 6572        if abs(per
-00024420: 696f 6473 2920 3e3d 206c 656e 2873 656c  iods) >= len(sel
-00024430: 6629 3a0d 0a20 2020 2020 2020 2020 2020  f):..           
-00024440: 2074 656d 702e 6669 6c6c 2869 6e76 616c   temp.fill(inval
-00024450: 6964 290d 0a20 2020 2020 2020 2065 6c69  id)..        eli
-00024460: 6620 7065 7269 6f64 7320 3e20 303a 0d0a  f periods > 0:..
-00024470: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
-00024480: 5b3a 7065 7269 6f64 735d 203d 2069 6e76  [:periods] = inv
-00024490: 616c 6964 0d0a 0d0a 2020 2020 2020 2020  alid....        
-000244a0: 2020 2020 2320 6f75 7470 7574 2069 6e74      # output int
-000244b0: 6f20 7468 6520 656d 7074 7920 6172 7261  o the empty arra
-000244c0: 7920 7765 2063 7265 6174 6564 2c20 6e70  y we created, np
-000244d0: 2e73 7562 7472 6163 7420 7769 6c6c 2063  .subtract will c
-000244e0: 616c 6c20 4661 7374 4172 7261 7927 7320  all FastArray's 
-000244f0: 7375 6274 7261 6374 0d0a 2020 2020 2020  subtract..      
-00024500: 2020 2020 2020 6e70 2e73 7562 7472 6163        np.subtrac
-00024510: 7428 7365 6c66 5b70 6572 696f 6473 3a5d  t(self[periods:]
-00024520: 2c20 7365 6c66 5b3a 2d70 6572 696f 6473  , self[:-periods
-00024530: 5d2c 206f 7574 3d74 656d 705b 7065 7269  ], out=temp[peri
-00024540: 6f64 733a 5d29 0d0a 2020 2020 2020 2020  ods:])..        
-00024550: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00024560: 2020 2074 656d 705b 7065 7269 6f64 733a     temp[periods:
-00024570: 5d20 3d20 696e 7661 6c69 640d 0a20 2020  ] = invalid..   
-00024580: 2020 2020 2020 2020 206e 702e 7375 6274           np.subt
-00024590: 7261 6374 2873 656c 665b 3a70 6572 696f  ract(self[:perio
-000245a0: 6473 5d2c 2073 656c 665b 2d70 6572 696f  ds], self[-perio
-000245b0: 6473 3a5d 2c20 6f75 743d 7465 6d70 5b3a  ds:], out=temp[:
-000245c0: 7065 7269 6f64 735d 290d 0a20 2020 2020  periods])..     
-000245d0: 2020 2072 6574 7572 6e20 7465 6d70 0d0a     return temp..
-000245e0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-000245f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-00024620: 0a20 2020 2064 6566 2069 736e 6128 7365  .    def isna(se
-00024630: 6c66 2920 2d3e 2046 6173 7441 7272 6179  lf) -> FastArray
-00024640: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00024650: 2020 2020 2020 2020 6973 6e61 6e20 6973          isnan is
-00024660: 206d 6170 7065 6420 6469 7265 6374 6c79   mapped directly
-00024670: 2074 6f20 6973 6e61 6e28 290d 0a20 2020   to isnan()..   
-00024680: 2020 2020 2043 6174 6567 6f72 6963 616c       Categorical
-00024690: 7320 616e 6420 4461 7465 5469 6d65 2074  s and DateTime t
-000246a0: 616b 6520 6f76 6572 2069 736e 616e 2e0d  ake over isnan..
-000246b0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-000246c0: 6179 2068 616e 646c 6573 2073 656e 7469  ay handles senti
-000246d0: 6e65 6c73 2e0d 0a0d 0a20 2020 2020 2020  nels.....       
-000246e0: 203e 3e3e 2061 3d61 7261 6e67 6528 3130   >>> a=arange(10
-000246f0: 302e 3029 0d0a 2020 2020 2020 2020 3e3e  0.0)..        >>
-00024700: 3e20 615b 355d 3d6e 702e 6e61 6e0d 0a20  > a[5]=np.nan.. 
-00024710: 2020 2020 2020 203e 3e3e 2061 5b38 375d         >>> a[87]
-00024720: 3d6e 702e 6e61 6e0d 0a20 2020 2020 2020  =np.nan..       
-00024730: 203e 3e3e 2073 756d 2861 2e69 736e 6128   >>> sum(a.isna(
-00024740: 2929 0d0a 2020 2020 2020 2020 320d 0a20  ))..        2.. 
-00024750: 2020 2020 2020 203e 3e3e 2073 756d 2861         >>> sum(a
-00024760: 2e61 7374 7970 6528 6e70 2e69 6e74 3332  .astype(np.int32
-00024770: 292e 6973 6e61 2829 290d 0a20 2020 2020  ).isna())..     
-00024780: 2020 2032 0d0a 2020 2020 2020 2020 2222     2..        ""
-00024790: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-000247a0: 6e20 7365 6c66 2e69 736e 616e 2829 0d0a  n self.isnan()..
-000247b0: 0d0a 2020 2020 6465 6620 6e6f 746e 6128  ..    def notna(
-000247c0: 7365 6c66 2920 2d3e 2046 6173 7441 7272  self) -> FastArr
-000247d0: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
-000247e0: 0d0a 2020 2020 2020 2020 6e6f 746e 6120  ..        notna 
-000247f0: 6973 206d 6170 7065 6420 6469 7265 6374  is mapped direct
-00024800: 6c79 2074 6f20 6973 6e6f 746e 616e 2829  ly to isnotnan()
-00024810: 0d0a 2020 2020 2020 2020 4361 7465 676f  ..        Catego
-00024820: 7269 6361 6c73 2061 6e64 2044 6174 6554  ricals and DateT
-00024830: 696d 6520 7461 6b65 206f 7665 7220 6973  ime take over is
-00024840: 6e6f 746e 616e 2e0d 0a20 2020 2020 2020  notnan...       
-00024850: 2046 6173 7441 7272 6179 2068 616e 646c   FastArray handl
-00024860: 6573 2073 656e 7469 6e65 6c73 2e0d 0a0d  es sentinels....
-00024870: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
-00024880: 7261 6e67 6528 3130 302e 3029 0d0a 2020  range(100.0)..  
-00024890: 2020 2020 2020 3e3e 3e20 615b 355d 3d6e        >>> a[5]=n
-000248a0: 702e 6e61 6e0d 0a20 2020 2020 2020 203e  p.nan..        >
-000248b0: 3e3e 2061 5b38 375d 3d6e 702e 6e61 6e0d  >> a[87]=np.nan.
-000248c0: 0a20 2020 2020 2020 203e 3e3e 2073 756d  .        >>> sum
-000248d0: 2861 2e6e 6f74 6e61 2829 290d 0a20 2020  (a.notna())..   
-000248e0: 2020 2020 2039 380d 0a20 2020 2020 2020       98..       
-000248f0: 203e 3e3e 2073 756d 2861 2e61 7374 7970   >>> sum(a.astyp
-00024900: 6528 6e70 2e69 6e74 3332 292e 6e6f 746e  e(np.int32).notn
-00024910: 6128 2929 0d0a 2020 2020 2020 2020 3938  a())..        98
-00024920: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00024930: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00024940: 6c66 2e69 736e 6f74 6e61 6e28 290d 0a0d  lf.isnotnan()...
-00024950: 0a20 2020 2064 6566 2072 6570 6c61 6365  .    def replace
-00024960: 6e61 2873 656c 662c 2076 616c 7565 2c20  na(self, value, 
-00024970: 696e 706c 6163 653d 4661 6c73 6529 202d  inplace=False) -
-00024980: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-00024990: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-000249a0: 2020 2052 6574 7572 6e20 6120 6046 6173     Return a `Fas
-000249b0: 7441 7272 6179 6020 7769 7468 2061 6c6c  tArray` with all
-000249c0: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
-000249d0: 2076 616c 7565 7320 7365 7420 746f 2074   values set to t
-000249e0: 6865 2073 7065 6369 6669 6564 2076 616c  he specified val
-000249f0: 7565 2e0d 0a0d 0a20 2020 2020 2020 204f  ue.....        O
-00024a00: 7074 696f 6e61 6c6c 792c 2079 6f75 2063  ptionally, you c
-00024a10: 616e 206d 6f64 6966 7920 7468 6520 6f72  an modify the or
-00024a20: 6967 696e 616c 2060 4661 7374 4172 7261  iginal `FastArra
-00024a30: 7960 2069 6620 6974 2773 206e 6f74 206c  y` if it's not l
-00024a40: 6f63 6b65 642e 0d0a 0d0a 2020 2020 2020  ocked.....      
-00024a50: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00024a60: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00024a70: 0d0a 2020 2020 2020 2020 7661 6c75 6520  ..        value 
-00024a80: 3a20 7363 616c 6172 206f 7220 6172 7261  : scalar or arra
-00024a90: 790d 0a20 2020 2020 2020 2020 2020 2041  y..            A
-00024aa0: 2076 616c 7565 206f 7220 616e 2061 7272   value or an arr
-00024ab0: 6179 206f 6620 7661 6c75 6573 2074 6f20  ay of values to 
-00024ac0: 7265 706c 6163 6520 616c 6c20 4e61 4e20  replace all NaN 
-00024ad0: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
-00024ae0: 6573 2e20 4966 2061 6e0d 0a20 2020 2020  es. If an..     
-00024af0: 2020 2020 2020 2061 7272 6179 2c20 7468         array, th
-00024b00: 6520 6e75 6d62 6572 206f 6620 7661 6c75  e number of valu
-00024b10: 6573 206d 7573 7420 6571 7561 6c20 7468  es must equal th
-00024b20: 6520 6e75 6d62 6572 206f 6620 4e61 4e20  e number of NaN 
-00024b30: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
-00024b40: 6573 2e0d 0a20 2020 2020 2020 2069 6e70  es...        inp
-00024b50: 6c61 6365 203a 2062 6f6f 6c2c 2064 6566  lace : bool, def
-00024b60: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
-00024b70: 2020 2020 2020 2020 4966 2046 616c 7365          If False
-00024b80: 2c20 7265 7475 726e 2061 2063 6f70 7920  , return a copy 
-00024b90: 6f66 2074 6865 2060 4661 7374 4172 7261  of the `FastArra
-00024ba0: 7960 2e20 4966 2054 7275 652c 206d 6f64  y`. If True, mod
-00024bb0: 6966 7920 7468 6520 6f72 6967 696e 616c  ify the original
-00024bc0: 2e0d 0a20 2020 2020 2020 2020 2020 2054  ...            T
-00024bd0: 6869 7320 7769 6c6c 206d 6f64 6966 7920  his will modify 
-00024be0: 616e 7920 6f74 6865 7220 7669 6577 7320  any other views 
-00024bf0: 6f6e 2074 6869 7320 6f62 6a65 6374 2e20  on this object. 
-00024c00: 5468 6973 2066 6169 6c73 2069 6620 7468  This fails if th
-00024c10: 650d 0a20 2020 2020 2020 2020 2020 2060  e..            `
-00024c20: 4661 7374 4172 7261 7960 2069 7320 6c6f  FastArray` is lo
-00024c30: 636b 6564 2e0d 0a0d 0a20 2020 2020 2020  cked.....       
-00024c40: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-00024c50: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-00024c60: 2020 2060 4661 7374 4172 7261 7960 206f     `FastArray` o
-00024c70: 7220 4e6f 6e65 0d0a 2020 2020 2020 2020  r None..        
-00024c80: 2020 2020 5468 6520 6046 6173 7441 7272      The `FastArr
-00024c90: 6179 6020 7769 6c6c 2062 6520 7468 6520  ay` will be the 
-00024ca0: 7361 6d65 2073 697a 6520 616e 6420 6474  same size and dt
-00024cb0: 7970 6520 6173 2074 6865 206f 7269 6769  ype as the origi
-00024cc0: 6e61 6c20 6172 7261 792e 0d0a 2020 2020  nal array...    
-00024cd0: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
-00024ce0: 4e6f 6e65 2069 6620 6060 696e 706c 6163  None if ``inplac
-00024cf0: 6520 3d20 5472 7565 6060 2e0d 0a0d 0a20  e = True``..... 
-00024d00: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
-00024d10: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00024d20: 2d0d 0a20 2020 2020 2020 2046 6173 7441  -..        FastA
-00024d30: 7272 6179 2e66 696c 6c6e 6120 3a20 5265  rray.fillna : Re
-00024d40: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-00024d50: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-00024d60: 6820 6120 7370 6563 6966 6965 6420 7661  h a specified va
-00024d70: 6c75 6520 6f72 206e 6561 7262 7920 6461  lue or nearby da
-00024d80: 7461 2e0d 0a20 2020 2020 2020 2044 6174  ta...        Dat
-00024d90: 6173 6574 2e66 696c 6c6e 6120 3a20 5265  aset.fillna : Re
-00024da0: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-00024db0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-00024dc0: 6820 6120 7370 6563 6966 6965 6420 7661  h a specified va
-00024dd0: 6c75 6520 6f72 206e 6561 7262 7920 6461  lue or nearby da
-00024de0: 7461 2e0d 0a20 2020 2020 2020 2043 6174  ta...        Cat
-00024df0: 6567 6f72 6963 616c 2e66 696c 6c5f 666f  egorical.fill_fo
-00024e00: 7277 6172 6420 3a20 5265 706c 6163 6520  rward : Replace 
-00024e10: 4e61 4e20 616e 6420 696e 7661 6c69 6420  NaN and invalid 
-00024e20: 7661 6c75 6573 2077 6974 6820 7468 6520  values with the 
-00024e30: 6c61 7374 2076 616c 6964 2067 726f 7570  last valid group
-00024e40: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
-00024e50: 2043 6174 6567 6f72 6963 616c 2e66 696c   Categorical.fil
-00024e60: 6c5f 6261 636b 7761 7264 203a 2052 6570  l_backward : Rep
-00024e70: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
-00024e80: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
-00024e90: 2074 6865 206e 6578 7420 7661 6c69 6420   the next valid 
-00024ea0: 6772 6f75 7020 7661 6c75 652e 0d0a 2020  group value...  
-00024eb0: 2020 2020 2020 4772 6f75 7042 792e 6669        GroupBy.fi
-00024ec0: 6c6c 5f66 6f72 7761 7264 203a 2052 6570  ll_forward : Rep
-00024ed0: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
-00024ee0: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
-00024ef0: 2074 6865 206c 6173 7420 7661 6c69 6420   the last valid 
-00024f00: 6772 6f75 7020 7661 6c75 652e 0d0a 2020  group value...  
-00024f10: 2020 2020 2020 4772 6f75 7042 792e 6669        GroupBy.fi
-00024f20: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
-00024f30: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-00024f40: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-00024f50: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
-00024f60: 2067 726f 7570 2076 616c 7565 2e0d 0a0d   group value....
-00024f70: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-00024f80: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00024f90: 2d2d 2d0d 0a20 2020 2020 2020 2052 6570  ---..        Rep
-00024fa0: 6c61 6365 2061 6c6c 2069 6e73 7461 6e63  lace all instanc
-00024fb0: 6573 206f 6620 4e61 4e20 7769 7468 2061  es of NaN with a
-00024fc0: 2073 696e 676c 6520 7661 6c75 653a 0d0a   single value:..
-00024fd0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-00024fe0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-00024ff0: 7274 2e6e 616e 2c20 312e 302c 2072 742e  rt.nan, 1.0, rt.
-00025000: 6e61 6e2c 2033 2e30 5d29 0d0a 2020 2020  nan, 3.0])..    
-00025010: 2020 2020 3e3e 3e20 612e 7265 706c 6163      >>> a.replac
-00025020: 656e 6128 3029 0d0a 2020 2020 2020 2020  ena(0)..        
-00025030: 4661 7374 4172 7261 7928 5b30 2e2c 2031  FastArray([0., 1
-00025040: 2e2c 2030 2e2c 2033 2e5d 290d 0a0d 0a20  ., 0., 3.]).... 
-00025050: 2020 2020 2020 2052 6570 6c61 6365 2061         Replace a
-00025060: 6c6c 2069 6e76 616c 6964 2076 616c 7565  ll invalid value
-00025070: 7320 7769 7468 2030 733a 0d0a 0d0a 2020  s with 0s:....  
-00025080: 2020 2020 2020 3e3e 3e20 6220 3d20 7274        >>> b = rt
-00025090: 2e46 6173 7441 7272 6179 285b 302c 2031  .FastArray([0, 1
-000250a0: 2c20 322c 2033 2c20 342c 2035 5d29 0d0a  , 2, 3, 4, 5])..
-000250b0: 2020 2020 2020 2020 3e3e 3e20 625b 303a          >>> b[0:
-000250c0: 335d 203d 2062 2e69 6e76 0d0a 2020 2020  3] = b.inv..    
-000250d0: 2020 2020 3e3e 3e20 622e 7265 706c 6163      >>> b.replac
-000250e0: 656e 6128 3029 0d0a 2020 2020 2020 2020  ena(0)..        
-000250f0: 4661 7374 4172 7261 7928 5b30 2c20 302c  FastArray([0, 0,
-00025100: 2030 2c20 332c 2034 2c20 355d 290d 0a0d   0, 3, 4, 5])...
-00025110: 0a20 2020 2020 2020 2052 6570 6c61 6365  .        Replace
-00025120: 2065 6163 6820 696e 7374 616e 6365 206f   each instance o
-00025130: 6620 4e61 4e20 7769 7468 2061 2064 6966  f NaN with a dif
-00025140: 6665 7265 6e74 2076 616c 7565 3a0d 0a0d  ferent value:...
-00025150: 0a20 2020 2020 2020 203e 3e3e 2061 2e72  .        >>> a.r
-00025160: 6570 6c61 6365 6e61 285b 302c 2032 5d29  eplacena([0, 2])
-00025170: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00025180: 7261 7928 5b30 2e2c 2031 2e2c 2032 2e2c  ray([0., 1., 2.,
-00025190: 2033 2e5d 290d 0a20 2020 2020 2020 2022   3.])..        "
-000251a0: 2222 0d0a 2020 2020 2020 2020 696e 7374  ""..        inst
-000251b0: 203d 2073 656c 6620 6966 2069 6e70 6c61   = self if inpla
-000251c0: 6365 2065 6c73 6520 7365 6c66 2e63 6f70  ce else self.cop
-000251d0: 7928 290d 0a20 2020 2020 2020 2069 736e  y()..        isn
-000251e0: 6120 3d20 696e 7374 2e69 736e 6128 290d  a = inst.isna().
-000251f0: 0a20 2020 2020 2020 2069 6620 6973 6e61  .        if isna
-00025200: 2e61 6e79 2829 3a0d 0a20 2020 2020 2020  .any():..       
-00025210: 2020 2020 2069 6e73 745b 6973 6e61 5d20       inst[isna] 
-00025220: 3d20 7661 6c75 650d 0a20 2020 2020 2020  = value..       
-00025230: 2069 6620 696e 706c 6163 653a 0d0a 2020   if inplace:..  
-00025240: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00025250: 204e 6f6e 650d 0a20 2020 2020 2020 2072   None..        r
-00025260: 6574 7572 6e20 696e 7374 0d0a 0d0a 2020  eturn inst....  
-00025270: 2020 6465 6620 6669 6c6c 6e61 2873 656c    def fillna(sel
-00025280: 662c 2076 616c 7565 3d4e 6f6e 652c 206d  f, value=None, m
-00025290: 6574 686f 643d 4e6f 6e65 2c20 696e 706c  ethod=None, inpl
-000252a0: 6163 653d 4661 6c73 652c 206c 696d 6974  ace=False, limit
-000252b0: 3d4e 6f6e 6529 202d 3e20 4661 7374 4172  =None) -> FastAr
-000252c0: 7261 793a 0d0a 2020 2020 2020 2020 2222  ray:..        ""
-000252d0: 220d 0a20 2020 2020 2020 2052 6570 6c61  "..        Repla
-000252e0: 6365 204e 614e 2061 6e64 2069 6e76 616c  ce NaN and inval
-000252f0: 6964 2076 616c 7565 7320 7769 7468 2061  id values with a
-00025300: 2073 7065 6369 6669 6564 2076 616c 7565   specified value
-00025310: 206f 7220 6e65 6172 6279 2064 6174 612e   or nearby data.
-00025320: 0d0a 0d0a 2020 2020 2020 2020 4f70 7469  ....        Opti
-00025330: 6f6e 616c 6c79 2c20 796f 7520 6361 6e20  onally, you can 
-00025340: 6d6f 6469 6679 2074 6865 206f 7269 6769  modify the origi
-00025350: 6e61 6c20 6046 6173 7441 7272 6179 6020  nal `FastArray` 
-00025360: 6966 2069 7427 7320 6e6f 7420 6c6f 636b  if it's not lock
-00025370: 6564 2e0d 0a0d 0a20 2020 2020 2020 2050  ed.....        P
-00025380: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-00025390: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-000253a0: 2020 2020 2020 2076 616c 7565 203a 2073         value : s
-000253b0: 6361 6c61 7220 6f72 2061 7272 6179 2c20  calar or array, 
-000253c0: 6465 6661 756c 7420 4e6f 6e65 0d0a 2020  default None..  
-000253d0: 2020 2020 2020 2020 2020 4120 7661 6c75            A valu
-000253e0: 6520 6f72 2061 6e20 6172 7261 7920 6f66  e or an array of
-000253f0: 2076 616c 7565 7320 746f 2072 6570 6c61   values to repla
-00025400: 6365 2061 6c6c 204e 614e 2061 6e64 2069  ce all NaN and i
-00025410: 6e76 616c 6964 2076 616c 7565 732e 0d0a  nvalid values...
-00025420: 2020 2020 2020 2020 2020 2020 4120 6076              A `v
-00025430: 616c 7565 6020 6973 2072 6571 7569 7265  alue` is require
-00025440: 6420 6966 2060 606d 6574 686f 6420 3d20  d if ``method = 
-00025450: 4e6f 6e65 6060 2e20 416e 2061 7272 6179  None``. An array
-00025460: 2063 616e 2062 6520 7573 6564 206f 6e6c   can be used onl
-00025470: 7920 7768 656e 0d0a 2020 2020 2020 2020  y when..        
-00025480: 2020 2020 6060 6d65 7468 6f64 203d 204e      ``method = N
-00025490: 6f6e 6560 602e 2049 6620 616e 2061 7272  one``. If an arr
-000254a0: 6179 2069 7320 7573 6564 2c20 7468 6520  ay is used, the 
-000254b0: 6e75 6d62 6572 206f 6620 7661 6c75 6573  number of values
-000254c0: 2069 6e20 7468 6520 6172 7261 790d 0a20   in the array.. 
-000254d0: 2020 2020 2020 2020 2020 206d 7573 7420             must 
-000254e0: 6571 7561 6c20 7468 6520 6e75 6d62 6572  equal the number
-000254f0: 206f 6620 4e61 4e20 616e 6420 696e 7661   of NaN and inva
-00025500: 6c69 6420 7661 6c75 6573 2e0d 0a20 2020  lid values...   
-00025510: 2020 2020 206d 6574 686f 6420 3a20 7b4e       method : {N
-00025520: 6f6e 652c 2027 6261 636b 6669 6c6c 272c  one, 'backfill',
-00025530: 2027 6266 696c 6c27 2c20 2770 6164 272c   'bfill', 'pad',
-00025540: 2027 6666 696c 6c27 7d2c 2064 6566 6175   'ffill'}, defau
-00025550: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
-00025560: 2020 2020 204d 6574 686f 6420 746f 2075       Method to u
-00025570: 7365 2074 6f20 7072 6f70 6167 6174 6520  se to propagate 
-00025580: 7661 6c69 6420 7661 6c75 6573 2e0d 0a0d  valid values....
-00025590: 0a20 2020 2020 2020 2020 2020 202a 2062  .            * b
-000255a0: 6163 6b66 696c 6c2f 6266 696c 6c3a 2050  ackfill/bfill: P
-000255b0: 726f 7061 6761 7465 7320 7468 6520 6e65  ropagates the ne
-000255c0: 7874 2065 6e63 6f75 6e74 6572 6564 2076  xt encountered v
-000255d0: 616c 6964 2076 616c 7565 2062 6163 6b77  alid value backw
-000255e0: 6172 642e 0d0a 2020 2020 2020 2020 2020  ard...          
-000255f0: 2020 2020 4361 6c6c 7320 3a6d 6574 683a      Calls :meth:
-00025600: 6046 6173 7441 7272 6179 2e66 696c 6c5f  `FastArray.fill_
-00025610: 6261 636b 7761 7264 602e 0d0a 2020 2020  backward`...    
-00025620: 2020 2020 2020 2020 2a20 7061 642f 6666          * pad/ff
-00025630: 696c 6c3a 2050 726f 7061 6761 7465 7320  ill: Propagates 
-00025640: 7468 6520 6c61 7374 2065 6e63 6f75 6e74  the last encount
-00025650: 6572 6564 2076 616c 6964 2076 616c 7565  ered valid value
-00025660: 2066 6f72 7761 7264 2e20 4361 6c6c 730d   forward. Calls.
-00025670: 0a20 2020 2020 2020 2020 2020 2020 203a  .              :
-00025680: 6d65 7468 3a60 4661 7374 4172 7261 792e  meth:`FastArray.
-00025690: 6669 6c6c 5f66 6f72 7761 7264 602e 0d0a  fill_forward`...
-000256a0: 2020 2020 2020 2020 2020 2020 2a20 4e6f              * No
-000256b0: 6e65 3a20 4120 7265 706c 6163 656d 656e  ne: A replacemen
-000256c0: 7420 7661 6c75 6520 6973 2072 6571 7569  t value is requi
-000256d0: 7265 6420 6966 2060 606d 6574 686f 6420  red if ``method 
-000256e0: 3d20 4e6f 6e65 6060 2e20 4361 6c6c 730d  = None``. Calls.
-000256f0: 0a20 2020 2020 2020 2020 2020 2020 203a  .              :
-00025700: 6d65 7468 3a60 4661 7374 4172 7261 792e  meth:`FastArray.
-00025710: 7265 706c 6163 656e 6160 2e0d 0a20 2020  replacena`...   
-00025720: 2020 2020 2020 2020 2049 6620 7468 6572           If ther
-00025730: 6527 7320 6e6f 7420 6120 7661 6c69 6420  e's not a valid 
-00025740: 7661 6c75 6520 746f 2070 726f 7061 6761  value to propaga
-00025750: 7465 2066 6f72 7761 7264 206f 7220 6261  te forward or ba
-00025760: 636b 7761 7264 2c20 7468 6520 4e61 4e20  ckward, the NaN 
-00025770: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
-00025780: 696e 7661 6c69 6420 7661 6c75 6520 6973  invalid value is
-00025790: 206e 6f74 2072 6570 6c61 6365 6420 756e   not replaced un
-000257a0: 6c65 7373 2079 6f75 2061 6c73 6f20 7370  less you also sp
-000257b0: 6563 6966 7920 6120 6076 616c 7565 602e  ecify a `value`.
-000257c0: 0d0a 2020 2020 2020 2020 696e 706c 6163  ..        inplac
-000257d0: 6520 3a20 626f 6f6c 2c20 6465 6661 756c  e : bool, defaul
-000257e0: 7420 4661 6c73 650d 0a20 2020 2020 2020  t False..       
-000257f0: 2020 2020 2049 6620 4661 6c73 652c 2072       If False, r
-00025800: 6574 7572 6e20 6120 636f 7079 206f 6620  eturn a copy of 
-00025810: 7468 6520 6046 6173 7441 7272 6179 602e  the `FastArray`.
-00025820: 2049 6620 5472 7565 2c20 6d6f 6469 6679   If True, modify
-00025830: 206f 7269 6769 6e61 6c20 6461 7461 2e0d   original data..
-00025840: 0a20 2020 2020 2020 2020 2020 2054 6869  .            Thi
-00025850: 7320 7769 6c6c 206d 6f64 6966 7920 616e  s will modify an
-00025860: 7920 6f74 6865 7220 7669 6577 7320 6f6e  y other views on
-00025870: 2074 6869 7320 6f62 6a65 6374 2e20 5468   this object. Th
-00025880: 6973 2066 6169 6c73 2069 6620 7468 650d  is fails if the.
-00025890: 0a20 2020 2020 2020 2020 2020 2060 4661  .            `Fa
-000258a0: 7374 4172 7261 7960 2069 7320 6c6f 636b  stArray` is lock
-000258b0: 6564 2e0d 0a20 2020 2020 2020 206c 696d  ed...        lim
-000258c0: 6974 203a 2069 6e74 2c20 6465 6661 756c  it : int, defaul
-000258d0: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
-000258e0: 2020 2020 4966 2060 6d65 7468 6f64 6020      If `method` 
-000258f0: 6973 2073 7065 6369 6669 6564 2c20 7468  is specified, th
-00025900: 6973 2069 7320 7468 6520 6d61 7869 6d69  is is the maximi
-00025910: 756d 206e 756d 6265 7220 6f66 2063 6f6e  um number of con
-00025920: 7365 6375 7469 7665 204e 614e 206f 720d  secutive NaN or.
-00025930: 0a20 2020 2020 2020 2020 2020 2069 6e76  .            inv
-00025940: 616c 6964 2076 616c 7565 7320 746f 2066  alid values to f
-00025950: 696c 6c2e 2049 6620 7468 6572 6520 6973  ill. If there is
-00025960: 2061 2067 6170 2077 6974 6820 6d6f 7265   a gap with more
-00025970: 2074 6861 6e20 7468 6973 206e 756d 6265   than this numbe
-00025980: 7220 6f66 0d0a 2020 2020 2020 2020 2020  r of..          
-00025990: 2020 636f 6e73 6563 7574 6976 6520 4e61    consecutive Na
-000259a0: 4e20 6f72 2069 6e76 616c 6964 2076 616c  N or invalid val
-000259b0: 7565 732c 2074 6865 2067 6170 2077 696c  ues, the gap wil
-000259c0: 6c20 6265 206f 6e6c 7920 7061 7274 6961  l be only partia
-000259d0: 6c6c 7920 6669 6c6c 6564 2e0d 0a0d 0a20  lly filled..... 
-000259e0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-000259f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00025a00: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
-00025a10: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
-00025a20: 2020 5468 6520 6046 6173 7441 7272 6179    The `FastArray
-00025a30: 6020 7769 6c6c 2062 6520 7468 6520 7361  ` will be the sa
-00025a40: 6d65 2073 697a 6520 616e 6420 6474 7970  me size and dtyp
-00025a50: 6520 6173 2074 6865 206f 7269 6769 6e61  e as the origina
-00025a60: 6c20 6172 7261 792e 0d0a 0d0a 2020 2020  l array.....    
-00025a70: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
-00025a80: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-00025a90: 2020 2020 2020 2020 7269 7074 6162 6c65          riptable
-00025aa0: 2e72 745f 6661 7374 6172 7261 796e 756d  .rt_fastarraynum
-00025ab0: 6261 2e66 696c 6c5f 666f 7277 6172 6420  ba.fill_forward 
-00025ac0: 3a20 5265 706c 6163 6520 4e61 4e20 616e  : Replace NaN an
-00025ad0: 6420 696e 7661 6c69 6420 7661 6c75 6573  d invalid values
-00025ae0: 2077 6974 680d 0a20 2020 2020 2020 2020   with..         
-00025af0: 2020 2074 6865 206c 6173 7420 7661 6c69     the last vali
-00025b00: 6420 7661 6c75 652e 0d0a 2020 2020 2020  d value...      
-00025b10: 2020 7269 7074 6162 6c65 2e72 745f 6661    riptable.rt_fa
-00025b20: 7374 6172 7261 796e 756d 6261 2e66 696c  starraynumba.fil
-00025b30: 6c5f 6261 636b 7761 7264 203a 2052 6570  l_backward : Rep
-00025b40: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
-00025b50: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
-00025b60: 0d0a 2020 2020 2020 2020 2020 2020 7468  ..            th
-00025b70: 6520 6e65 7874 2076 616c 6964 2076 616c  e next valid val
-00025b80: 7565 2e0d 0a20 2020 2020 2020 2072 6970  ue...        rip
-00025b90: 7461 626c 652e 6669 6c6c 5f66 6f72 7761  table.fill_forwa
-00025ba0: 7264 203a 2052 6570 6c61 6365 204e 614e  rd : Replace NaN
-00025bb0: 2061 6e64 2069 6e76 616c 6964 2076 616c   and invalid val
-00025bc0: 7565 7320 7769 7468 2074 6865 206c 6173  ues with the las
-00025bd0: 7420 7661 6c69 640d 0a20 2020 2020 2020  t valid..       
-00025be0: 2020 2020 2076 616c 7565 2e0d 0a20 2020       value...   
-00025bf0: 2020 2020 2072 6970 7461 626c 652e 6669       riptable.fi
-00025c00: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
-00025c10: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-00025c20: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-00025c30: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
-00025c40: 0d0a 2020 2020 2020 2020 2020 2020 7661  ..            va
-00025c50: 6c75 652e 0d0a 2020 2020 2020 2020 4461  lue...        Da
-00025c60: 7461 7365 742e 6669 6c6c 6e61 203a 2052  taset.fillna : R
-00025c70: 6570 6c61 6365 204e 614e 2061 6e64 2069  eplace NaN and i
-00025c80: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
-00025c90: 7468 2061 2073 7065 6369 6669 6564 2076  th a specified v
-00025ca0: 616c 7565 206f 720d 0a20 2020 2020 2020  alue or..       
-00025cb0: 2020 2020 206e 6561 7262 7920 6461 7461       nearby data
-00025cc0: 2e0d 0a20 2020 2020 2020 2046 6173 7441  ...        FastA
-00025cd0: 7272 6179 2e72 6570 6c61 6365 6e61 203a  rray.replacena :
-00025ce0: 2052 6570 6c61 6365 204e 614e 2061 6e64   Replace NaN and
-00025cf0: 2069 6e76 616c 6964 2076 616c 7565 7320   invalid values 
-00025d00: 7769 7468 2061 2073 7065 6369 6669 6564  with a specified
-00025d10: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
-00025d20: 2043 6174 6567 6f72 6963 616c 2e66 696c   Categorical.fil
-00025d30: 6c5f 666f 7277 6172 6420 3a20 5265 706c  l_forward : Repl
-00025d40: 6163 6520 4e61 4e20 616e 6420 696e 7661  ace NaN and inva
-00025d50: 6c69 6420 7661 6c75 6573 2077 6974 6820  lid values with 
-00025d60: 7468 6520 6c61 7374 2076 616c 6964 0d0a  the last valid..
-00025d70: 2020 2020 2020 2020 2020 2020 6772 6f75              grou
-00025d80: 7020 7661 6c75 652e 0d0a 2020 2020 2020  p value...      
-00025d90: 2020 4361 7465 676f 7269 6361 6c2e 6669    Categorical.fi
-00025da0: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
-00025db0: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-00025dc0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-00025dd0: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
-00025de0: 0d0a 2020 2020 2020 2020 2020 2020 6772  ..            gr
-00025df0: 6f75 7020 7661 6c75 652e 0d0a 2020 2020  oup value...    
-00025e00: 2020 2020 4772 6f75 7042 792e 6669 6c6c      GroupBy.fill
-00025e10: 5f66 6f72 7761 7264 203a 2052 6570 6c61  _forward : Repla
-00025e20: 6365 204e 614e 2061 6e64 2069 6e76 616c  ce NaN and inval
-00025e30: 6964 2076 616c 7565 7320 7769 7468 2074  id values with t
-00025e40: 6865 206c 6173 7420 7661 6c69 640d 0a20  he last valid.. 
-00025e50: 2020 2020 2020 2020 2020 2067 726f 7570             group
-00025e60: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
-00025e70: 2047 726f 7570 4279 2e66 696c 6c5f 6261   GroupBy.fill_ba
-00025e80: 636b 7761 7264 203a 2052 6570 6c61 6365  ckward : Replace
-00025e90: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
-00025ea0: 2076 616c 7565 7320 7769 7468 2074 6865   values with the
-00025eb0: 206e 6578 7420 7661 6c69 640d 0a20 2020   next valid..   
-00025ec0: 2020 2020 2020 2020 2067 726f 7570 2076           group v
-00025ed0: 616c 7565 2e0d 0a0d 0a20 2020 2020 2020  alue.....       
-00025ee0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-00025ef0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00025f00: 2020 2020 2052 6570 6c61 6365 2061 6c6c       Replace all
-00025f10: 204e 614e 2076 616c 7565 7320 7769 7468   NaN values with
-00025f20: 2030 733a 0d0a 0d0a 2020 2020 2020 2020   0s:....        
-00025f30: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
-00025f40: 7272 6179 285b 7274 2e6e 616e 2c20 312e  rray([rt.nan, 1.
-00025f50: 302c 2072 742e 6e61 6e2c 2072 742e 6e61  0, rt.nan, rt.na
-00025f60: 6e2c 2072 742e 6e61 6e2c 2035 2e30 5d29  n, rt.nan, 5.0])
-00025f70: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00025f80: 6669 6c6c 6e61 2830 290d 0a20 2020 2020  fillna(0)..     
-00025f90: 2020 2046 6173 7441 7272 6179 285b 302e     FastArray([0.
-00025fa0: 2c20 312e 2c20 302e 2c20 302e 2c20 302e  , 1., 0., 0., 0.
-00025fb0: 2c20 352e 5d29 0d0a 0d0a 2020 2020 2020  , 5.])....      
-00025fc0: 2020 5265 706c 6163 6520 616c 6c20 696e    Replace all in
-00025fd0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-00025fe0: 6820 3073 3a0d 0a0d 0a20 2020 2020 2020  h 0s:....       
-00025ff0: 203e 3e3e 2062 203d 2072 742e 4661 7374   >>> b = rt.Fast
-00026000: 4172 7261 7928 5b30 2c20 312c 2032 2c20  Array([0, 1, 2, 
-00026010: 332c 2034 2c20 355d 290d 0a20 2020 2020  3, 4, 5])..     
-00026020: 2020 203e 3e3e 2062 5b30 3a33 5d20 3d20     >>> b[0:3] = 
-00026030: 622e 696e 760d 0a20 2020 2020 2020 203e  b.inv..        >
-00026040: 3e3e 2062 2e66 696c 6c6e 6128 3029 0d0a  >> b.fillna(0)..
-00026050: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00026060: 7928 5b30 2c20 302c 2030 2c20 332c 2034  y([0, 0, 0, 3, 4
-00026070: 2c20 355d 290d 0a0d 0a20 2020 2020 2020  , 5])....       
-00026080: 2052 6570 6c61 6365 2065 6163 6820 696e   Replace each in
-00026090: 7374 616e 6365 206f 6620 4e61 4e20 7769  stance of NaN wi
-000260a0: 7468 2061 2064 6966 6665 7265 6e74 2076  th a different v
-000260b0: 616c 7565 3a0d 0a0d 0a20 2020 2020 2020  alue:....       
-000260c0: 203e 3e3e 2061 2e66 696c 6c6e 6128 5b30   >>> a.fillna([0
-000260d0: 2c20 322c 2033 2c20 345d 290d 0a20 2020  , 2, 3, 4])..   
-000260e0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-000260f0: 302e 2c20 312e 2c20 322e 2c20 332e 2c20  0., 1., 2., 3., 
-00026100: 342e 2c20 352e 5d29 0d0a 0d0a 2020 2020  4., 5.])....    
-00026110: 2020 2020 5072 6f70 6167 6174 6520 7468      Propagate th
-00026120: 6520 6c61 7374 2065 6e63 6f75 6e74 6572  e last encounter
-00026130: 6564 2076 616c 6964 2076 616c 7565 2066  ed valid value f
-00026140: 6f72 7761 7264 2e20 4e6f 7465 2074 6861  orward. Note tha
-00026150: 7420 7768 6572 6520 7468 6572 6527 7320  t where there's 
-00026160: 6e6f 0d0a 2020 2020 2020 2020 7661 6c69  no..        vali
-00026170: 6420 7661 6c75 6520 746f 2070 726f 7061  d value to propa
-00026180: 6761 7465 2c20 7468 6520 4e61 4e20 6f72  gate, the NaN or
-00026190: 2069 6e76 616c 6964 2076 616c 7565 2069   invalid value i
-000261a0: 736e 2774 2072 6570 6c61 6365 642e 0d0a  sn't replaced...
-000261b0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-000261c0: 6669 6c6c 6e61 286d 6574 686f 6420 3d20  fillna(method = 
-000261d0: 2766 6669 6c6c 2729 0d0a 2020 2020 2020  'ffill')..      
-000261e0: 2020 4661 7374 4172 7261 7928 5b6e 616e    FastArray([nan
-000261f0: 2c20 2031 2e2c 2020 312e 2c20 2031 2e2c  ,  1.,  1.,  1.,
-00026200: 2020 312e 2c20 2035 2e5d 290d 0a0d 0a20    1.,  5.]).... 
-00026210: 2020 2020 2020 2059 6f75 2063 616e 2075         You can u
-00026220: 7365 2074 6865 2060 7661 6c75 6560 2070  se the `value` p
-00026230: 6172 616d 6574 6572 2074 6f20 7370 6563  arameter to spec
-00026240: 6966 7920 6120 7661 6c75 6520 746f 2075  ify a value to u
-00026250: 7365 2077 6865 7265 2074 6865 7265 2773  se where there's
-00026260: 206e 6f0d 0a20 2020 2020 2020 2076 616c   no..        val
-00026270: 6964 2076 616c 7565 2074 6f20 7072 6f70  id value to prop
-00026280: 6167 6174 652e 0d0a 0d0a 2020 2020 2020  agate.....      
-00026290: 2020 3e3e 3e20 612e 6669 6c6c 6e61 2876    >>> a.fillna(v
-000262a0: 616c 7565 203d 2030 2c20 6d65 7468 6f64  alue = 0, method
-000262b0: 203d 2027 6666 696c 6c27 290d 0a20 2020   = 'ffill')..   
-000262c0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-000262d0: 302e 2c20 312e 2c20 312e 2c20 312e 2c20  0., 1., 1., 1., 
-000262e0: 312e 2c20 352e 5d29 0d0a 0d0a 2020 2020  1., 5.])....    
-000262f0: 2020 2020 5265 706c 6163 6520 6f6e 6c79      Replace only
-00026300: 2074 6865 2066 6972 7374 204e 614e 206f   the first NaN o
-00026310: 7220 696e 7661 6c69 6420 7661 6c75 6520  r invalid value 
-00026320: 696e 2061 6e79 2063 6f6e 7365 6375 7469  in any consecuti
-00026330: 7665 2073 6572 6965 7320 6f66 204e 614e  ve series of NaN
-00026340: 206f 720d 0a20 2020 2020 2020 2069 6e76   or..        inv
-00026350: 616c 6964 2076 616c 7565 732e 0d0a 0d0a  alid values.....
-00026360: 2020 2020 2020 2020 3e3e 3e20 612e 6669          >>> a.fi
-00026370: 6c6c 6e61 286d 6574 686f 6420 3d20 2762  llna(method = 'b
-00026380: 6669 6c6c 272c 206c 696d 6974 203d 2031  fill', limit = 1
-00026390: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-000263a0: 7272 6179 285b 2031 2e2c 2020 312e 2c20  rray([ 1.,  1., 
-000263b0: 6e61 6e2c 206e 616e 2c20 2035 2e2c 2020  nan, nan,  5.,  
-000263c0: 352e 5d29 0d0a 2020 2020 2020 2020 2222  5.])..        ""
-000263d0: 220d 0a20 2020 2020 2020 2069 6620 6d65  "..        if me
-000263e0: 7468 6f64 2069 7320 6e6f 7420 4e6f 6e65  thod is not None
-000263f0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-00026400: 6620 6d65 7468 6f64 2069 6e20 5b22 6261  f method in ["ba
-00026410: 636b 6669 6c6c 222c 2022 6266 696c 6c22  ckfill", "bfill"
-00026420: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-00026430: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00026440: 6669 6c6c 5f62 6163 6b77 6172 6428 7661  fill_backward(va
-00026450: 6c75 652c 2069 6e70 6c61 6365 3d69 6e70  lue, inplace=inp
-00026460: 6c61 6365 2c20 6c69 6d69 743d 6c69 6d69  lace, limit=limi
-00026470: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-00026480: 6966 206d 6574 686f 6420 696e 205b 2270  if method in ["p
-00026490: 6164 222c 2022 6666 696c 6c22 5d3a 0d0a  ad", "ffill"]:..
-000264a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000264b0: 7265 7475 726e 2073 656c 662e 6669 6c6c  return self.fill
-000264c0: 5f66 6f72 7761 7264 2876 616c 7565 2c20  _forward(value, 
-000264d0: 696e 706c 6163 653d 696e 706c 6163 652c  inplace=inplace,
-000264e0: 206c 696d 6974 3d6c 696d 6974 290d 0a20   limit=limit).. 
-000264f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00026500: 204b 6579 4572 726f 7228 6622 6669 6c6c   KeyError(f"fill
-00026510: 6e61 3a20 5468 6520 6d65 7468 6f64 207b  na: The method {
-00026520: 6d65 7468 6f64 2172 7d20 6d75 7374 2062  method!r} must b
-00026530: 6520 2762 6163 6b66 696c 6c27 2c20 2762  e 'backfill', 'b
-00026540: 6669 6c6c 272c 2027 7061 6427 2c20 2766  fill', 'pad', 'f
-00026550: 6669 6c6c 2722 290d 0a0d 0a20 2020 2020  fill'")....     
-00026560: 2020 2069 6620 7661 6c75 6520 6973 204e     if value is N
-00026570: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00026580: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00026590: 6f72 2866 2266 696c 6c6e 613a 204d 7573  or(f"fillna: Mus
-000265a0: 7420 7370 6563 6966 7920 6569 7468 6572  t specify either
-000265b0: 2061 2027 7661 6c75 6527 2074 6861 7420   a 'value' that 
-000265c0: 6973 206e 6f74 204e 6f6e 6520 6f72 2061  is not None or a
-000265d0: 2027 6d65 7468 6f64 2720 7468 6174 2069   'method' that i
-000265e0: 7320 6e6f 7420 4e6f 6e65 2e22 290d 0a0d  s not None.")...
-000265f0: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
-00026600: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
-00026610: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00026620: 6520 4b65 7945 7272 6f72 2866 2266 696c  e KeyError(f"fil
-00026630: 6c6e 613a 2054 6865 7265 2069 7320 6e6f  lna: There is no
-00026640: 206c 696d 6974 2077 6865 6e20 6d65 7468   limit when meth
-00026650: 6f64 2069 7320 4e6f 6e65 2229 0d0a 0d0a  od is None")....
-00026660: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00026670: 656c 662e 7265 706c 6163 656e 6128 7661  elf.replacena(va
-00026680: 6c75 652c 2069 6e70 6c61 6365 3d69 6e70  lue, inplace=inp
-00026690: 6c61 6365 290d 0a0d 0a20 2020 2064 6566  lace)....    def
-000266a0: 2073 7461 7478 2873 656c 6629 202d 3e20   statx(self) -> 
-000266b0: 4461 7461 7365 743a 0d0a 2020 2020 2020  Dataset:..      
-000266c0: 2020 7265 7475 726e 2073 7461 7478 2873    return statx(s
-000266d0: 656c 6629 0d0a 0d0a 2020 2020 2320 2d2d  elf)....    # --
-000266e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000266f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026720: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-00026730: 6566 205f 6973 5f6e 6f74 5f73 7570 706f  ef _is_not_suppo
-00026740: 7274 6564 2873 656c 662c 2061 7272 293a  rted(self, arr):
-00026750: 0d0a 2020 2020 2020 2020 2222 2272 6574  ..        """ret
-00026760: 7572 6e73 2054 7275 6520 6966 2061 206e  urns True if a n
-00026770: 756d 7079 2061 7272 6179 2069 7320 6e6f  umpy array is no
-00026780: 7420 4661 7374 4172 7261 7920 696e 7465  t FastArray inte
-00026790: 726e 616c 6c79 2073 7570 706f 7274 6564  rnally supported
-000267a0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
-000267b0: 6e6f 7420 2861 7272 2e66 6c61 6773 2e63  not (arr.flags.c
-000267c0: 5f63 6f6e 7469 6775 6f75 7320 6f72 2061  _contiguous or a
-000267d0: 7272 2e66 6c61 6773 2e66 5f63 6f6e 7469  rr.flags.f_conti
-000267e0: 6775 6f75 7329 3a0d 0a20 2020 2020 2020  guous):..       
-000267f0: 2020 2020 2023 2054 4f44 4f20 656e 6162       # TODO enab
-00026800: 6c65 2074 6869 7320 7761 726e 696e 6720  le this warning 
-00026810: 696e 2061 2066 7574 7572 6520 6d69 6e6f  in a future mino
-00026820: 7220 7265 6c65 6173 650d 0a20 2020 2020  r release..     
-00026830: 2020 2020 2020 2023 2046 6173 7441 7272         # FastArr
-00026840: 6179 2e5f 706f 7373 6962 6c79 5f77 6172  ay._possibly_war
-00026850: 6e28 6627 5f69 735f 6e6f 745f 7375 7070  n(f'_is_not_supp
-00026860: 6f72 7465 643a 2075 6e73 7570 706f 7274  orted: unsupport
-00026870: 6564 2061 7272 6179 2066 6c61 6773 207b  ed array flags {
-00026880: 6172 722e 666c 6167 737d 2729 0d0a 2020  arr.flags}')..  
-00026890: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000268a0: 2054 7275 650d 0a20 2020 2020 2020 2069   True..        i
-000268b0: 6620 6172 722e 6474 7970 652e 6368 6172  f arr.dtype.char
-000268c0: 206e 6f74 2069 6e20 4e75 6d70 7943 6861   not in NumpyCha
-000268d0: 7254 7970 6573 2e53 7570 706f 7274 6564  rTypes.Supported
-000268e0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-000268f0: 2054 4f44 4f20 656e 6162 6c65 2074 6869   TODO enable thi
-00026900: 7320 7761 726e 696e 6720 696e 2061 2066  s warning in a f
-00026910: 7574 7572 6520 6d69 6e6f 7220 7265 6c65  uture minor rele
-00026920: 6173 650d 0a20 2020 2020 2020 2020 2020  ase..           
-00026930: 2023 2046 6173 7441 7272 6179 2e5f 706f   # FastArray._po
-00026940: 7373 6962 6c79 5f77 6172 6e28 6627 5f69  ssibly_warn(f'_i
-00026950: 735f 6e6f 745f 7375 7070 6f72 7465 643a  s_not_supported:
-00026960: 2075 6e73 7570 706f 7274 6564 2061 7272   unsupported arr
-00026970: 6179 2064 7479 7065 207b 6172 722e 6474  ay dtype {arr.dt
-00026980: 7970 657d 5c6e 5375 7070 6f72 7465 6420  ype}\nSupported 
-00026990: 6474 7970 6573 207b 4e75 6d70 7943 6861  dtypes {NumpyCha
-000269a0: 7254 7970 6573 2e53 7570 706f 7274 6564  rTypes.Supported
-000269b0: 7d27 290d 0a20 2020 2020 2020 2020 2020  }')..           
-000269c0: 2072 6574 7572 6e20 5472 7565 0d0a 2020   return True..  
-000269d0: 2020 2020 2020 6966 206c 656e 2861 7272        if len(arr
-000269e0: 2e73 7472 6964 6573 2920 3d3d 2030 3a0d  .strides) == 0:.
-000269f0: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00026a00: 4f44 4f20 656e 6162 6c65 2074 6869 7320  ODO enable this 
-00026a10: 7761 726e 696e 6720 696e 2061 2066 7574  warning in a fut
-00026a20: 7572 6520 6d69 6e6f 7220 7265 6c65 6173  ure minor releas
-00026a30: 650d 0a20 2020 2020 2020 2020 2020 2023  e..            #
-00026a40: 2046 6173 7441 7272 6179 2e5f 706f 7373   FastArray._poss
-00026a50: 6962 6c79 5f77 6172 6e28 6627 5f69 735f  ibly_warn(f'_is_
-00026a60: 6e6f 745f 7375 7070 6f72 7465 643a 2075  not_supported: u
-00026a70: 6e73 7570 706f 7274 6564 2061 7272 6179  nsupported array
-00026a80: 2073 7472 6964 6573 207b 6172 722e 7374   strides {arr.st
-00026a90: 7269 6465 737d 2729 0d0a 2020 2020 2020  rides}')..      
-00026aa0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00026ab0: 650d 0a20 2020 2020 2020 2072 6574 7572  e..        retur
-00026ac0: 6e20 4661 6c73 650d 0a0d 0a20 2020 2023  n False....    #
-00026ad0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-00026ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-00026b20: 2020 6465 6620 5f5f 6172 7261 795f 6675    def __array_fu
-00026b30: 6e63 7469 6f6e 5f5f 2873 656c 662c 2066  nction__(self, f
-00026b40: 756e 632c 2074 7970 6573 2c20 6172 6773  unc, types, args
-00026b50: 2c20 6b77 6172 6773 293a 0d0a 2020 2020  , kwargs):..    
-00026b60: 2020 2020 6966 2073 656c 662e 4e45 575f      if self.NEW_
-00026b70: 4152 5241 595f 4655 4e43 5449 4f4e 5f45  ARRAY_FUNCTION_E
-00026b80: 4e41 424c 4544 3a0d 0a20 2020 2020 2020  NABLED:..       
-00026b90: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00026ba0: 2e5f 6e65 775f 6172 7261 795f 6675 6e63  ._new_array_func
-00026bb0: 7469 6f6e 2866 756e 632c 2074 7970 6573  tion(func, types
-00026bc0: 2c20 6172 6773 2c20 6b77 6172 6773 290d  , args, kwargs).
-00026bd0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00026be0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00026bf0: 726e 2073 656c 662e 5f6c 6567 6163 795f  rn self._legacy_
-00026c00: 6172 7261 795f 6675 6e63 7469 6f6e 2866  array_function(f
-00026c10: 756e 632c 2074 7970 6573 2c20 6172 6773  unc, types, args
-00026c20: 2c20 6b77 6172 6773 290d 0a0d 0a20 2020  , kwargs)....   
-00026c30: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-00026c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-00026c80: 2020 2020 6465 6620 5f6c 6567 6163 795f      def _legacy_
-00026c90: 6172 7261 795f 6675 6e63 7469 6f6e 2873  array_function(s
-00026ca0: 656c 662c 2066 756e 632c 2074 7970 6573  elf, func, types
-00026cb0: 2c20 6172 6773 2c20 6b77 6172 6773 293a  , args, kwargs):
-00026cc0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00026cd0: 2020 2020 2020 2043 616c 6c65 6420 6265         Called be
-00026ce0: 666f 7265 2061 7272 6179 5f75 6675 6e63  fore array_ufunc
-00026cf0: 2e0d 0a20 2020 2020 2020 2044 6f65 7320  ...        Does 
-00026d00: 6e6f 7420 6765 7420 6361 6c6c 6564 2066  not get called f
-00026d10: 6f72 2065 7665 7279 2066 756e 6374 696f  or every functio
-00026d20: 6e20 6e70 2e69 736e 616e 2f74 7275 6e63  n np.isnan/trunc
-00026d30: 2f74 7275 655f 6469 7669 6465 2066 6f72  /true_divide for
-00026d40: 2069 6e73 7461 6e63 652e 0d0a 2020 2020   instance...    
-00026d50: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00026d60: 2072 6564 7563 6546 756e 6320 3d20 4e55   reduceFunc = NU
-00026d70: 4d50 595f 434f 4e56 4552 5349 4f4e 5f54  MPY_CONVERSION_T
-00026d80: 4142 4c45 2e67 6574 2866 756e 632c 204e  ABLE.get(func, N
-00026d90: 6f6e 6529 0d0a 0d0a 2020 2020 2020 2020  one)....        
-00026da0: 2320 544f 444f 3a0d 0a20 2020 2020 2020  # TODO:..       
-00026db0: 2023 206b 7761 7267 7320 6f66 2027 6178   # kwargs of 'ax
-00026dc0: 6973 273a 204e 6f6e 6520 2027 6f75 7427  is': None  'out'
-00026dd0: 3a20 4e6f 6e65 2073 686f 756c 6420 6265  : None should be
-00026de0: 2061 6363 6570 7465 640d 0a0d 0a20 2020   accepted....   
-00026df0: 2020 2020 2069 6620 7265 6475 6365 4675       if reduceFu
-00026e00: 6e63 2069 7320 6e6f 7420 4e6f 6e65 2061  nc is not None a
-00026e10: 6e64 206c 656e 286b 7761 7267 7329 203d  nd len(kwargs) =
-00026e20: 3d20 303a 0d0a 2020 2020 2020 2020 2020  = 0:..          
-00026e30: 2020 2320 7370 6565 6420 7061 7468 2028    # speed path (
-00026e40: 746f 646f 2061 6464 2063 616c 6c20 746f  todo add call to
-00026e50: 206c 6564 6765 7229 0d0a 2020 2020 2020   ledger)..      
-00026e60: 2020 2020 2020 2320 6465 6661 756c 7420        # default 
-00026e70: 746f 2064 646f 663d 3020 7768 656e 206e  to ddof=0 when n
-00026e80: 6f20 6b77 6172 6773 2070 6173 7365 640d  o kwargs passed.
-00026e90: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00026ea0: 756c 7420 3d20 7263 2e52 6564 7563 6528  ult = rc.Reduce(
-00026eb0: 6172 6773 5b30 5d2c 2072 6564 7563 6546  args[0], reduceF
-00026ec0: 756e 632c 2030 290d 0a0d 0a20 2020 2020  unc, 0)....     
-00026ed0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-00026ee0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00026ef0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00026f00: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
-00026f10: 7468 4c65 6467 6572 2e5f 5245 4455 4345  thLedger._REDUCE
-00026f20: 2861 7267 735b 305d 2c20 6e65 7766 756e  (args[0], newfun
-00026f30: 6329 0d0a 0d0a 2020 2020 2020 2020 2020  c)....          
-00026f40: 2020 2020 2020 6474 7970 6520 3d20 6b77        dtype = kw
-00026f50: 6172 6773 2e67 6574 2822 6474 7970 6522  args.get("dtype"
-00026f60: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-00026f70: 2020 2020 2020 2020 2069 6620 6474 7970           if dtyp
-00026f80: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
-00026f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026fa0: 2020 2020 2320 7573 6572 2066 6f72 6365      # user force
-00026fb0: 6420 6474 7970 6520 7265 7475 726e 2076  d dtype return v
-00026fc0: 616c 7565 0d0a 2020 2020 2020 2020 2020  alue..          
-00026fd0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00026fe0: 2064 7479 7065 2872 6573 756c 7429 0d0a   dtype(result)..
-00026ff0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00027000: 2020 2320 7072 6573 6572 7665 2074 7970    # preserve typ
-00027010: 6520 666f 7220 6d69 6e2f 6d61 782f 6e61  e for min/max/na
-00027020: 6e6d 696e 2f6e 616e 6d61 780d 0a20 2020  nmin/nanmax..   
-00027030: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00027040: 7265 6475 6365 4675 6e63 2069 6e20 5b0d  reduceFunc in [.
-00027050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027060: 2020 2020 2052 4544 5543 455f 4655 4e43       REDUCE_FUNC
-00027070: 5449 4f4e 532e 5245 4455 4345 5f4d 494e  TIONS.REDUCE_MIN
-00027080: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00027090: 2020 2020 2020 2052 4544 5543 455f 4655         REDUCE_FU
-000270a0: 4e43 5449 4f4e 532e 5245 4455 4345 5f4e  NCTIONS.REDUCE_N
-000270b0: 414e 4d49 4e2c 0d0a 2020 2020 2020 2020  ANMIN,..        
-000270c0: 2020 2020 2020 2020 2020 2020 5245 4455              REDU
-000270d0: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
-000270e0: 5543 455f 4d41 582c 0d0a 2020 2020 2020  UCE_MAX,..      
-000270f0: 2020 2020 2020 2020 2020 2020 2020 5245                RE
-00027100: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00027110: 4544 5543 455f 4e41 4e4d 4158 2c0d 0a20  EDUCE_NANMAX,.. 
-00027120: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-00027130: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00027140: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00027150: 6c66 2e64 7479 7065 2e74 7970 6528 7265  lf.dtype.type(re
-00027160: 7375 6c74 290d 0a0d 0a20 2020 2020 2020  sult)....       
-00027170: 2020 2020 2020 2020 2023 2069 6e74 6572           # inter
-00027180: 6e61 6c6c 7920 6e75 6d70 7920 6578 7065  nally numpy expe
-00027190: 6374 7320 6120 6474 7970 6520 7265 7475  cts a dtype retu
-000271a0: 726e 6564 2066 6f72 206e 616e 7374 6420  rned for nanstd 
-000271b0: 616e 6420 6f74 6865 7220 6361 6c63 756c  and other calcul
-000271c0: 6174 696f 6e73 0d0a 2020 2020 2020 2020  ations..        
-000271d0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-000271e0: 7461 6e63 6528 7265 7375 6c74 2c20 2869  tance(result, (i
-000271f0: 6e74 2c20 6e70 2e69 6e74 6567 6572 2929  nt, np.integer))
-00027200: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00027210: 2020 2020 2020 2023 2066 6f72 2075 696e         # for uin
-00027220: 7436 342c 2074 6865 2068 6967 6820 6269  t64, the high bi
-00027230: 7420 6d75 7374 2062 6520 7072 6573 6572  t must be preser
-00027240: 7665 640d 0a20 2020 2020 2020 2020 2020  ved..           
-00027250: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00027260: 2e64 7479 7065 2e63 6861 7220 696e 204e  .dtype.char in N
-00027270: 756d 7079 4368 6172 5479 7065 732e 556e  umpyCharTypes.Un
-00027280: 7369 676e 6564 496e 7465 6765 7236 343a  signedInteger64:
-00027290: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000272a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000272b0: 206e 702e 7569 6e74 3634 2872 6573 756c   np.uint64(resul
-000272c0: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-000272d0: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-000272e0: 702e 696e 7436 3428 7265 7375 6c74 290d  p.int64(result).
-000272f0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00027300: 2020 2072 6574 7572 6e20 6e70 2e66 6c6f     return np.flo
-00027310: 6174 3634 2872 6573 756c 7429 0d0a 2020  at64(result)..  
-00027320: 2020 2020 2020 2320 6361 6c6c 2074 6865        # call the
-00027330: 2076 6572 7369 6f6e 206e 756d 7079 2077   version numpy w
-00027340: 616e 7465 6420 7573 6520 746f 0d0a 2020  anted use to..  
-00027350: 2020 2020 2020 7265 7475 726e 2073 7570        return sup
-00027360: 6572 2846 6173 7441 7272 6179 2c20 7365  er(FastArray, se
-00027370: 6c66 292e 5f5f 6172 7261 795f 6675 6e63  lf).__array_func
-00027380: 7469 6f6e 5f5f 2866 756e 632c 2074 7970  tion__(func, typ
-00027390: 6573 2c20 6172 6773 2c20 6b77 6172 6773  es, args, kwargs
-000273a0: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
-000273b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000273c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000273d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000273e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000273f0: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-00027400: 5f6e 6577 5f61 7272 6179 5f66 756e 6374  _new_array_funct
-00027410: 696f 6e28 7365 6c66 2c20 6675 6e63 3a20  ion(self, func: 
-00027420: 4361 6c6c 6162 6c65 2c20 7479 7065 733a  Callable, types:
-00027430: 2074 7570 6c65 2c20 6172 6773 3a20 7475   tuple, args: tu
-00027440: 706c 652c 206b 7761 7267 733a 2064 6963  ple, kwargs: dic
-00027450: 7429 3a0d 0a20 2020 2020 2020 2022 2222  t):..        """
-00027460: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00027470: 7261 7920 696d 706c 656d 656e 7461 7469  ray implementati
-00027480: 6f6e 206f 6620 7468 6520 6172 7261 7920  on of the array 
-00027490: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
-000274a0: 6c2e 0d0a 0d0a 2020 2020 2020 2020 5061  l.....        Pa
-000274b0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-000274c0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-000274d0: 2020 2020 2020 6675 6e63 3a20 6361 6c6c        func: call
-000274e0: 6162 6c65 0d0a 2020 2020 2020 2020 2020  able..          
-000274f0: 2020 416e 2063 616c 6c61 626c 6520 6578    An callable ex
-00027500: 706f 7365 6420 6279 204e 756d 5079 e280  posed by NumPy..
-00027510: 9973 2070 7562 6c69 6320 4150 492c 2077  .s public API, w
-00027520: 6869 6368 2077 6173 2063 616c 6c65 6420  hich was called 
-00027530: 696e 2074 6865 2066 6f72 6d20 6060 6675  in the form ``fu
-00027540: 6e63 282a 6172 6773 2c20 2a2a 6b77 6172  nc(*args, **kwar
-00027550: 6773 2960 602e 0d0a 2020 2020 2020 2020  gs)``...        
-00027560: 7479 7065 733a 2074 7570 6c65 0d0a 2020  types: tuple..  
-00027570: 2020 2020 2020 2020 2020 4120 7475 706c            A tupl
-00027580: 6520 6f66 2075 6e69 7175 6520 6172 6775  e of unique argu
-00027590: 6d65 6e74 2074 7970 6573 2066 726f 6d20  ment types from 
-000275a0: 7468 6520 6f72 6967 696e 616c 204e 756d  the original Num
-000275b0: 5079 2066 756e 6374 696f 6e20 6361 6c6c  Py function call
-000275c0: 2074 6861 7420 696d 706c 656d 656e 7420   that implement 
-000275d0: 6060 5f5f 6172 7261 795f 6675 6e63 7469  ``__array_functi
-000275e0: 6f6e 5f5f 6060 2e0d 0a20 2020 2020 2020  on__``...       
-000275f0: 2061 7267 733a 2074 7570 6c65 0d0a 2020   args: tuple..  
-00027600: 2020 2020 2020 2020 2020 5468 6520 7475            The tu
-00027610: 706c 6520 6f66 2061 7267 756d 656e 7473  ple of arguments
-00027620: 2074 6861 7420 7769 6c6c 2062 6520 7061   that will be pa
-00027630: 7373 6564 2074 6f20 6066 756e 6360 2e0d  ssed to `func`..
-00027640: 0a20 2020 2020 2020 206b 7761 7267 733a  .        kwargs:
-00027650: 2064 6963 740d 0a20 2020 2020 2020 2020   dict..         
-00027660: 2020 2054 6865 2064 6963 7469 6f6e 6172     The dictionar
-00027670: 7920 6f66 206b 6579 776f 7264 2061 7267  y of keyword arg
-00027680: 756d 656e 7473 2074 6861 7420 7769 6c6c  uments that will
-00027690: 2062 6520 7061 7373 6564 2074 6f20 6066   be passed to `f
-000276a0: 756e 6360 2e0d 0a0d 0a20 2020 2020 2020  unc`.....       
-000276b0: 2052 6169 7365 730d 0a20 2020 2020 2020   Raises..       
-000276c0: 202d 2d2d 2d2d 2d0d 0a20 2020 2020 2020   ------..       
-000276d0: 2054 7970 6545 7272 6f72 0d0a 2020 2020   TypeError..    
-000276e0: 2020 2020 2020 2020 4966 2060 6675 6e63          If `func
-000276f0: 6020 6973 206e 6f74 206f 7665 7272 6964  ` is not overrid
-00027700: 6465 6e20 6279 2061 2063 6f72 7265 7370  den by a corresp
-00027710: 6f6e 6469 6e67 2072 6970 7461 626c 6520  onding riptable 
-00027720: 6172 7261 7920 6675 6e63 7469 6f6e 2074  array function t
-00027730: 6865 6e20 6120 5479 7065 4572 726f 7220  hen a TypeError 
-00027740: 6973 2072 6169 7365 642e 0d0a 0d0a 2020  is raised.....  
-00027750: 2020 2020 2020 4e6f 7465 730d 0a20 2020        Notes..   
-00027760: 2020 2020 202d 2d2d 2d2d 0d0a 2020 2020       -----..    
-00027770: 2020 2020 5468 6973 2061 7272 6179 2066      This array f
-00027780: 756e 6374 696f 6e20 696d 706c 656d 656e  unction implemen
-00027790: 7461 7469 6f6e 2072 6571 7569 7265 7320  tation requires 
-000277a0: 6561 6368 2063 6c61 7373 2c20 7375 6368  each class, such
-000277b0: 2061 7320 4661 7374 4172 7261 7920 616e   as FastArray an
-000277c0: 6420 616e 7920 6f74 6865 7220 6465 7269  d any other deri
-000277d0: 7665 6420 636c 6173 732c 0d0a 2020 2020  ved class,..    
-000277e0: 2020 2020 746f 2069 6d70 6c65 6d65 6e74      to implement
-000277f0: 2074 6865 6972 206f 776e 2076 6572 7369   their own versi
-00027800: 6f6e 206f 6620 7468 6520 4e75 6d70 7920  on of the Numpy 
-00027810: 6172 7261 7920 6675 6e63 7469 6f6e 2041  array function A
-00027820: 5049 2e20 496e 2074 6865 2065 7665 6e74  PI. In the event
-00027830: 2074 6865 7365 2061 7272 6179 2066 756e   these array fun
-00027840: 6374 696f 6e73 2064 6566 6572 2074 6f20  ctions defer to 
-00027850: 7468 650d 0a20 2020 2020 2020 2069 6e68  the..        inh
-00027860: 6572 6974 696e 6720 636c 6173 7320 7468  eriting class th
-00027870: 6579 2077 696c 6c20 6e65 6564 2074 6f20  ey will need to 
-00027880: 6569 7468 6572 2072 652d 7772 6170 2074  either re-wrap t
-00027890: 6865 2072 6573 756c 7473 2069 6e20 7468  he results in th
-000278a0: 6520 636f 7272 6563 7420 7479 7065 206f  e correct type o
-000278b0: 7220 7261 6973 6520 6578 6365 7074 696f  r raise exceptio
-000278c0: 6e20 6966 2061 0d0a 2020 2020 2020 2020  n if a..        
-000278d0: 7061 7274 6963 756c 6172 206f 7065 7261  particular opera
-000278e0: 7469 6f6e 2069 7320 6e6f 7420 7765 6c6c  tion is not well
-000278f0: 2d64 6566 696e 6564 206e 6f72 206d 6561  -defined nor mea
-00027900: 6e69 6e67 6675 6c20 666f 7220 7468 6520  ningful for the 
-00027910: 6465 7269 7665 6420 636c 6173 732e 0d0a  derived class...
-00027920: 2020 2020 2020 2020 4966 2061 6e20 6172          If an ar
-00027930: 7261 7920 6675 6e63 7469 6f6e 2c20 7768  ray function, wh
-00027940: 6963 6820 6973 2061 6c73 6f20 6120 756e  ich is also a un
-00027950: 6976 6572 7361 6c20 6675 6e63 7469 6f6e  iversal function
-00027960: 2c20 6973 206e 6f74 206f 7665 7272 6964  , is not overrid
-00027970: 6465 6e20 6173 2061 6e20 6172 7261 7920  den as an array 
-00027980: 6675 6e63 7469 6f6e 2c20 6275 7420 6465  function, but de
-00027990: 6669 6e65 640d 0a20 2020 2020 2020 2061  fined..        a
-000279a0: 7320 6120 7566 756e 6320 7468 656e 2069  s a ufunc then i
-000279b0: 7420 7769 6c6c 206e 6f74 2062 6520 6361  t will not be ca
-000279c0: 6c6c 6564 2075 6e6c 6573 7320 6974 2069  lled unless it i
-000279d0: 7320 7265 6769 7374 6572 6564 2077 6974  s registered wit
-000279e0: 6820 7468 6520 6172 7261 7920 6675 6e63  h the array func
-000279f0: 7469 6f6e 2068 656c 7065 7220 7369 6e63  tion helper sinc
-00027a00: 6520 6172 7261 7920 6675 6e63 7469 6f6e  e array function
-00027a10: 0d0a 2020 2020 2020 2020 7072 6f74 6f63  ..        protoc
-00027a20: 6f6c 2074 616b 6573 2070 7269 6f72 6974  ol takes priorit
-00027a30: 7920 6f76 6572 2074 6865 2075 6e69 7665  y over the unive
-00027a40: 7273 616c 2066 756e 6374 696f 6e20 7072  rsal function pr
-00027a50: 6f74 6f63 6f6c 2e0d 0a0d 0a20 2020 2020  otocol.....     
-00027a60: 2020 2052 6566 6572 656e 6365 3a20 604e     Reference: `N
-00027a70: 4550 2031 3820 4172 7261 7920 4675 6e63  EP 18 Array Func
-00027a80: 7469 6f6e 2050 726f 746f 636f 6c20 3c68  tion Protocol <h
-00027a90: 7474 7073 3a2f 2f6e 756d 7079 2e6f 7267  ttps://numpy.org
-00027aa0: 2f6e 6570 732f 6e65 702d 3030 3138 2d61  /neps/nep-0018-a
-00027ab0: 7272 6179 2d66 756e 6374 696f 6e2d 7072  rray-function-pr
-00027ac0: 6f74 6f63 6f6c 2e68 746d 6c3e 605f 0d0a  otocol.html>`_..
-00027ad0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00027ae0: 2020 2020 2069 6620 6c6f 6767 6572 2e69       if logger.i
-00027af0: 7345 6e61 626c 6564 466f 7228 6c6f 6767  sEnabledFor(logg
-00027b00: 696e 672e 4445 4255 4729 3a0d 0a20 2020  ing.DEBUG):..   
-00027b10: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
-00027b20: 6465 6275 6728 0d0a 2020 2020 2020 2020  debug(..        
-00027b30: 2020 2020 2020 2020 6622 7b46 6173 7441          f"{FastA
-00027b40: 7272 6179 2e5f 5f6e 616d 655f 5f7d 2e5f  rray.__name__}._
-00027b50: 6e65 775f 6172 7261 795f 6675 6e63 7469  new_array_functi
-00027b60: 6f6e 2866 756e 3d7b 6675 6e63 7d2c 2074  on(fun={func}, t
-00027b70: 7970 6573 3d7b 7479 7065 737d 2c20 6172  ypes={types}, ar
-00027b80: 6773 3d7b 6172 6773 7d2c 206b 7761 7267  gs={args}, kwarg
-00027b90: 733d 7b6b 7761 7267 737d 2922 0d0a 2020  s={kwargs})"..  
-00027ba0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00027bb0: 2020 2020 2023 2068 616e 646c 6520 6066       # handle `f
-00027bc0: 756e 6360 2061 7267 756d 656e 740d 0a20  unc` argument.. 
-00027bd0: 2020 2020 2020 2061 7272 6179 5f66 756e         array_fun
-00027be0: 633a 2043 616c 6c61 626c 6520 3d20 4661  c: Callable = Fa
-00027bf0: 7374 4172 7261 792e 5f41 7272 6179 4675  stArray._ArrayFu
-00027c00: 6e63 7469 6f6e 4865 6c70 6572 2e67 6574  nctionHelper.get
-00027c10: 5f61 7272 6179 5f66 756e 6374 696f 6e28  _array_function(
-00027c20: 6675 6e63 290d 0a20 2020 2020 2020 2069  func)..        i
-00027c30: 6620 6172 7261 795f 6675 6e63 2069 7320  f array_func is 
-00027c40: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00027c50: 2020 2023 2066 616c 6c62 6163 6b20 746f     # fallback to
-00027c60: 206e 756d 7079 2066 6f72 2075 6e68 616e   numpy for unhan
-00027c70: 646c 6564 2061 7272 6179 2066 756e 6374  dled array funct
-00027c80: 696f 6e73 2061 6e64 2061 7474 656d 7074  ions and attempt
-00027c90: 2074 6f20 6361 7374 2062 6163 6b20 746f   to cast back to
-00027ca0: 2046 6173 7441 7272 6179 0d0a 2020 2020   FastArray..    
-00027cb0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00027cc0: 2073 7570 6572 2829 2e5f 5f61 7272 6179   super().__array
-00027cd0: 5f66 756e 6374 696f 6e5f 5f28 6675 6e63  _function__(func
-00027ce0: 2c20 7479 7065 732c 2061 7267 732c 206b  , types, args, k
-00027cf0: 7761 7267 7329 0d0a 2020 2020 2020 2020  wargs)..        
-00027d00: 2020 2020 6966 2072 6573 756c 7420 6973      if result is
-00027d10: 204e 6f74 496d 706c 656d 656e 7465 643a   NotImplemented:
-00027d20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00027d30: 2020 7265 7475 726e 204e 6f74 496d 706c    return NotImpl
-00027d40: 656d 656e 7465 640d 0a20 2020 2020 2020  emented..       
-00027d50: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
-00027d60: 616e 6365 2872 6573 756c 742c 206e 702e  ance(result, np.
-00027d70: 6e64 6172 7261 7929 3a0d 0a20 2020 2020  ndarray):..     
-00027d80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00027d90: 6e20 7265 7375 6c74 2e76 6965 7728 4661  n result.view(Fa
-00027da0: 7374 4172 7261 7929 0d0a 2020 2020 2020  stArray)..      
-00027db0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-00027dc0: 7461 6e63 6528 7265 7375 6c74 2c20 6c69  tance(result, li
-00027dd0: 7374 293a 0d0a 2020 2020 2020 2020 2020  st):..          
-00027de0: 2020 2020 2020 7265 7475 726e 205b 2878        return [(x
-00027df0: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
-00027e00: 2069 6620 6973 696e 7374 616e 6365 2878   if isinstance(x
-00027e10: 2c20 6e70 2e6e 6461 7272 6179 2920 656c  , np.ndarray) el
-00027e20: 7365 2078 2920 666f 7220 7820 696e 2072  se x) for x in r
-00027e30: 6573 756c 745d 0d0a 2020 2020 2020 2020  esult]..        
-00027e40: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00027e50: 6e63 6528 7265 7375 6c74 2c20 7475 706c  nce(result, tupl
-00027e60: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-00027e70: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
-00027e80: 6528 5b28 782e 7669 6577 2846 6173 7441  e([(x.view(FastA
-00027e90: 7272 6179 2920 6966 2069 7369 6e73 7461  rray) if isinsta
-00027ea0: 6e63 6528 782c 206e 702e 6e64 6172 7261  nce(x, np.ndarra
-00027eb0: 7929 2065 6c73 6520 7829 2066 6f72 2078  y) else x) for x
-00027ec0: 2069 6e20 7265 7375 6c74 5d29 0d0a 2020   in result])..  
-00027ed0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00027ee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027ef0: 2023 2055 6e6b 6e6f 776e 2072 6573 756c   # Unknown resul
-00027f00: 7420 7479 7065 2e0d 0a20 2020 2020 2020  t type...       
-00027f10: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
-00027f20: 7970 6545 7272 6f72 2866 2255 6e6b 6e6f  ypeError(f"Unkno
-00027f30: 776e 2072 6573 756c 7420 7479 7065 2027  wn result type '
-00027f40: 7b74 7970 6528 7265 7375 6c74 297d 2720  {type(result)}' 
-00027f50: 7265 7475 726e 6564 2062 7920 6e64 6172  returned by ndar
-00027f60: 7261 792e 7b66 756e 637d 2e22 290d 0a0d  ray.{func}.")...
-00027f70: 0a20 2020 2020 2020 2023 2068 616e 646c  .        # handl
-00027f80: 6520 6074 7970 6573 6020 6172 6775 6d65  e `types` argume
-00027f90: 6e74 0d0a 2020 2020 2020 2020 6172 7261  nt..        arra
-00027fa0: 795f 6675 6e63 5f74 7970 655f 6368 6563  y_func_type_chec
-00027fb0: 6b3a 2043 616c 6c61 626c 6520 3d20 4661  k: Callable = Fa
-00027fc0: 7374 4172 7261 792e 5f41 7272 6179 4675  stArray._ArrayFu
-00027fd0: 6e63 7469 6f6e 4865 6c70 6572 2e67 6574  nctionHelper.get
-00027fe0: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
-00027ff0: 7479 7065 5f63 6f6d 7061 7469 6269 6c69  type_compatibili
-00028000: 7479 5f63 6865 636b 280d 0a20 2020 2020  ty_check(..     
-00028010: 2020 2020 2020 2066 756e 630d 0a20 2020         func..   
-00028020: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00028030: 6966 2061 7272 6179 5f66 756e 635f 7479  if array_func_ty
-00028040: 7065 5f63 6865 636b 2069 7320 4e6f 6e65  pe_check is None
-00028050: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00028060: 206e 6f20 6375 7374 6f6d 2074 7970 6520   no custom type 
-00028070: 636f 6d70 6174 6962 696c 6974 7920 6368  compatibility ch
-00028080: 6563 6b3b 2064 6566 6175 6c74 2074 7970  eck; default typ
-00028090: 6520 636f 6d70 6174 6962 696c 6974 7920  e compatibility 
-000280a0: 6368 6563 6b0d 0a20 2020 2020 2020 2020  check..         
-000280b0: 2020 2023 2074 6869 7320 616c 6c6f 7773     # this allows
-000280c0: 2073 7562 636c 6173 7365 7320 7468 6174   subclasses that
-000280d0: 2064 6f6e 2774 206f 7665 7272 6964 6520   don't override 
-000280e0: 5f5f 6172 7261 795f 6675 6e63 7469 6f6e  __array_function
-000280f0: 5f5f 2074 6f20 6861 6e64 6c65 2046 6173  __ to handle Fas
-00028100: 7441 7272 6179 206f 626a 6563 7473 0d0a  tArray objects..
-00028110: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00028120: 7479 7020 696e 2074 7970 6573 3a0d 0a20  typ in types:.. 
-00028130: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00028140: 6620 6e6f 7420 6973 7375 6263 6c61 7373  f not issubclass
-00028150: 2874 7970 2c20 4661 7374 4172 7261 7929  (typ, FastArray)
-00028160: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00028170: 2020 2020 2020 2069 6620 6c6f 6767 6572         if logger
-00028180: 2e69 7345 6e61 626c 6564 466f 7228 6c6f  .isEnabledFor(lo
-00028190: 6767 696e 672e 4445 4255 4729 3a0d 0a20  gging.DEBUG):.. 
-000281a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000281b0: 2020 2020 2020 206c 6f67 6765 722e 6465         logger.de
-000281c0: 6275 6728 6622 7b46 6173 7441 7272 6179  bug(f"{FastArray
-000281d0: 2e5f 5f6e 616d 655f 5f7d 2e5f 5f61 7272  .__name__}.__arr
-000281e0: 6179 5f66 756e 6374 696f 6e5f 5f3a 2075  ay_function__: u
-000281f0: 6e73 7570 706f 7274 6564 2074 7970 6520  nsupported type 
-00028200: 7b72 6570 7228 7479 7029 7d22 290d 0a20  {repr(typ)}").. 
-00028210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028220: 2020 2072 6574 7572 6e20 4e6f 7449 6d70     return NotImp
-00028230: 6c65 6d65 6e74 6564 0d0a 2020 2020 2020  lemented..      
-00028240: 2020 656c 7365 3a20 2023 2063 7573 746f    else:  # custo
-00028250: 6d20 7479 7065 2063 6f6d 7061 7469 6269  m type compatibi
-00028260: 6c69 7479 2063 6865 636b 0d0a 2020 2020  lity check..    
-00028270: 2020 2020 2020 2020 7661 6c69 643a 2062          valid: b
-00028280: 6f6f 6c20 3d20 6172 7261 795f 6675 6e63  ool = array_func
-00028290: 5f74 7970 655f 6368 6563 6b28 7479 7065  _type_check(type
-000282a0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-000282b0: 6966 206e 6f74 2076 616c 6964 3a0d 0a20  if not valid:.. 
-000282c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000282d0: 6620 6c6f 6767 6572 2e69 7345 6e61 626c  f logger.isEnabl
-000282e0: 6564 466f 7228 6c6f 6767 696e 672e 4445  edFor(logging.DE
-000282f0: 4255 4729 3a0d 0a20 2020 2020 2020 2020  BUG):..         
-00028300: 2020 2020 2020 2020 2020 206c 6f67 6765             logge
-00028310: 722e 6465 6275 6728 6622 7b46 6173 7441  r.debug(f"{FastA
-00028320: 7272 6179 2e5f 5f6e 616d 655f 5f7d 2e5f  rray.__name__}._
-00028330: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
-00028340: 5f3a 2075 6e73 7570 706f 7274 6564 2074  _: unsupported t
-00028350: 7970 6520 696e 207b 7265 7072 2874 7970  ype in {repr(typ
-00028360: 6573 297d 2229 0d0a 2020 2020 2020 2020  es)}")..        
-00028370: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00028380: 6f74 496d 706c 656d 656e 7465 640d 0a0d  otImplemented...
-00028390: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000283a0: 6172 7261 795f 6675 6e63 282a 6172 6773  array_func(*args
-000283b0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-000283c0: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
-000283d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000283e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000283f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00028400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00028410: 0d0a 2020 2020 6465 6620 5f5f 6172 7261  ..    def __arra
-00028420: 795f 7566 756e 635f 5f28 7365 6c66 2c20  y_ufunc__(self, 
-00028430: 7566 756e 633a 2043 616c 6c61 626c 652c  ufunc: Callable,
-00028440: 206d 6574 686f 643a 2073 7472 2c20 2a69   method: str, *i
-00028450: 6e70 7574 733a 2041 6e79 2c20 2a2a 6b77  nputs: Any, **kw
-00028460: 6172 6773 3a20 416e 7929 3a0d 0a20 2020  args: Any):..   
-00028470: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00028480: 2020 5468 6520 4661 7374 4172 7261 7920    The FastArray 
-00028490: 756e 6976 6572 7361 6c20 6675 6e63 7469  universal functi
-000284a0: 6f6e 2028 6f72 2075 6675 6e63 2920 6f76  on (or ufunc) ov
-000284b0: 6572 7269 6465 206f 6666 6572 7320 6d75  erride offers mu
-000284c0: 6c74 6974 6872 6561 6465 6420 432f 432b  ltithreaded C/C+
-000284d0: 2b20 696d 706c 656d 656e 7461 7469 6f6e  + implementation
-000284e0: 2061 7420 7468 6520 5269 7074 6964 6543   at the RiptideC
-000284f0: 5050 206c 6179 6572 2e0d 0a0d 0a20 2020  PP layer.....   
-00028500: 2020 2020 2057 6865 6e20 4661 7374 4172       When FastAr
-00028510: 7261 7920 7265 6365 6976 6573 2061 2060  ray receives a `
-00028520: 7566 756e 6360 2063 616c 6c61 626c 6520  ufunc` callable 
-00028530: 6974 2077 696c 6c20 6174 7465 6d70 7420  it will attempt 
-00028540: 746f 2068 616e 646c 6520 6974 2069 6e20  to handle it in 
-00028550: 7072 696f 7269 7479 206f 7264 6572 3a0d  priority order:.
-00028560: 0a20 2020 2020 2020 2020 2020 2031 2e20  .            1. 
-00028570: 636f 6e73 6964 6572 696e 6720 6060 4661  considering ``Fa
-00028580: 7374 4172 7261 7960 6020 6060 4661 7374  stArray`` ``Fast
-00028590: 4675 6e63 7469 6f6e 6060 2069 7320 656e  Function`` is en
-000285a0: 6162 6c65 642c 2075 6675 6e63 2069 7320  abled, ufunc is 
-000285b0: 6861 6e64 6c65 6420 6279 2061 6e20 6578  handled by an ex
-000285c0: 706c 6963 6974 2075 6675 6e63 206f 7665  plicit ufunc ove
-000285d0: 7272 6964 652c 206f 7468 6572 7769 7365  rride, otherwise
-000285e0: 0d0a 2020 2020 2020 2020 2020 2020 322e  ..            2.
-000285f0: 2075 6675 6e63 2069 7320 6861 6e64 6c65   ufunc is handle
-00028600: 6420 6174 2074 6865 2052 6970 7461 626c  d at the Riptabl
-00028610: 6520 2f20 4e75 6d70 7920 4150 4920 6f76  e / Numpy API ov
-00028620: 6572 7269 6465 7320 6c65 7665 6c2c 206f  errides level, o
-00028630: 7468 6572 7769 7365 0d0a 2020 2020 2020  therwise..      
-00028640: 2020 2020 2020 332e 2075 6675 6e63 2069        3. ufunc i
-00028650: 7320 6861 6e64 6c65 6420 6174 2074 6865  s handled at the
-00028660: 204e 756d 7079 2041 5049 206c 6576 656c   Numpy API level
-00028670: 2e0d 0a0d 0a20 2020 2020 2020 2047 6976  .....        Giv
-00028680: 656e 2061 2063 6f6d 6269 6e61 7469 6f6e  en a combination
-00028690: 206f 6620 6075 6675 6e63 602c 2060 696e   of `ufunc`, `in
-000286a0: 7075 7473 602c 2061 6e64 2060 6b77 6172  puts`, and `kwar
-000286b0: 6773 602c 2069 6620 6e65 6974 6865 7220  gs`, if neither 
-000286c0: 6f66 2074 6865 2061 666f 7265 6d65 6e74  of the aforement
-000286d0: 696f 6e65 6420 6361 7365 7320 7375 7070  ioned cases supp
-000286e0: 6f72 7420 7468 6973 0d0a 2020 2020 2020  ort this..      
-000286f0: 2020 7468 656e 2061 2077 6172 6e69 6e67    then a warning
-00028700: 2069 7320 656d 6974 7465 642e 0d0a 0d0a   is emitted.....
-00028710: 2020 2020 2020 2020 5468 6520 666f 6c6c          The foll
-00028720: 6f77 696e 6720 7265 6665 7265 6e63 6573  owing references
-00028730: 2074 6f20 7375 7070 6f72 7465 6420 7566   to supported uf
-00028740: 756e 6373 2061 7265 2067 726f 7570 6564  uncs are grouped
-00028750: 2062 7920 6d65 7468 6f64 2074 7970 652e   by method type.
-00028760: 0d0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
-00028770: 466f 7220 606d 6574 686f 6460 2074 7970  For `method` typ
-00028780: 6520 6060 7265 6475 6365 6060 2c20 7365  e ``reduce``, se
-00028790: 6520 6060 6752 6564 7563 6555 4675 6e63  e ``gReduceUFunc
-000287a0: 7360 602e 0d0a 2020 2020 2020 2020 2020  s``...          
-000287b0: 2020 2d20 466f 7220 606d 6574 686f 6460    - For `method`
-000287c0: 2074 7970 6520 6060 5f5f 6361 6c6c 5f5f   type ``__call__
-000287d0: 6060 2c20 7365 6520 6060 6742 696e 6172  ``, see ``gBinar
-000287e0: 7955 4675 6e63 7360 602c 2060 6067 4269  yUFuncs``, ``gBi
-000287f0: 6e61 7279 4c6f 6769 6361 6c55 4675 6e63  naryLogicalUFunc
-00028800: 7360 602c 2060 6067 4269 6e61 7279 4269  s``, ``gBinaryBi
-00028810: 7477 6973 6555 4675 6e63 7360 602c 2061  twiseUFuncs``, a
-00028820: 6e64 2060 6067 556e 6172 7955 4675 6e63  nd ``gUnaryUFunc
-00028830: 7360 602e 0d0a 2020 2020 2020 2020 2020  s``...          
-00028840: 2020 2d20 466f 7220 606d 6574 686f 6460    - For `method`
-00028850: 2074 7970 6520 6060 6174 6060 2072 6574   type ``at`` ret
-00028860: 7572 6e20 6060 4e6f 6e65 6060 2e0d 0a0d  urn ``None``....
-00028870: 0a20 2020 2020 2020 2049 6620 606f 7574  .        If `out
-00028880: 6020 6172 6775 6d65 6e74 2069 7320 7370  ` argument is sp
-00028890: 6563 6966 6965 642c 2074 6865 6e20 616e  ecified, then an
-000288a0: 2065 7874 7261 2061 7272 6179 2063 6f70   extra array cop
-000288b0: 7920 6973 2070 6572 666f 726d 6564 206f  y is performed o
-000288c0: 6e20 7468 6520 7265 7375 6c74 206f 6620  n the result of 
-000288d0: 7468 6520 7566 756e 6320 636f 6d70 7574  the ufunc comput
-000288e0: 6174 696f 6e2e 0d0a 0d0a 2020 2020 2020  ation.....      
-000288f0: 2020 4966 2061 2060 6474 7970 6560 206b    If a `dtype` k
-00028900: 6579 776f 7264 2069 7320 7370 6563 6966  eyword is specif
-00028910: 6965 642c 2061 6c6c 2065 6666 6f72 7473  ied, all efforts
-00028920: 2061 7265 206d 6164 6520 746f 2072 6573   are made to res
-00028930: 7065 6374 2074 6865 2060 6474 7970 6560  pect the `dtype`
-00028940: 206f 6e20 7468 6520 7265 7375 6c74 206f   on the result o
-00028950: 6620 7468 6520 636f 6d70 7574 6174 696f  f the computatio
-00028960: 6e2e 0d0a 0d0a 2020 2020 2020 2020 5061  n.....        Pa
-00028970: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-00028980: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-00028990: 2020 2020 2020 7566 756e 6320 3a20 6361        ufunc : ca
-000289a0: 6c6c 6162 6c65 0d0a 2020 2020 2020 2020  llable..        
-000289b0: 2020 2020 5468 6520 7566 756e 6320 6f62      The ufunc ob
-000289c0: 6a65 6374 2074 6861 7420 7761 7320 6361  ject that was ca
-000289d0: 6c6c 6564 2e0d 0a20 2020 2020 2020 206d  lled...        m
-000289e0: 6574 686f 6420 3a20 7374 720d 0a20 2020  ethod : str..   
-000289f0: 2020 2020 2020 2020 2041 2073 7472 696e           A strin
-00028a00: 6720 696e 6469 6361 7469 6e67 2077 6869  g indicating whi
-00028a10: 6368 2055 6675 6e63 206d 6574 686f 6420  ch Ufunc method 
-00028a20: 7761 7320 6361 6c6c 6564 2028 6f6e 6520  was called (one 
-00028a30: 6f66 2022 5f5f 6361 6c6c 5f5f 222c 2022  of "__call__", "
-00028a40: 7265 6475 6365 222c 2022 7265 6475 6365  reduce", "reduce
-00028a50: 6174 222c 2022 6163 6375 6d75 6c61 7465  at", "accumulate
-00028a60: 222c 2022 6f75 7465 7222 2c20 2269 6e6e  ", "outer", "inn
-00028a70: 6572 2229 2e0d 0a20 2020 2020 2020 2069  er")...        i
-00028a80: 6e70 7574 730d 0a20 2020 2020 2020 2020  nputs..         
-00028a90: 2020 2041 2074 7570 6c65 206f 6620 7468     A tuple of th
-00028aa0: 6520 696e 7075 7420 6172 6775 6d65 6e74  e input argument
-00028ab0: 7320 746f 2074 6865 2075 6675 6e63 2e0d  s to the ufunc..
-00028ac0: 0a20 2020 2020 2020 206b 7761 7267 730d  .        kwargs.
-00028ad0: 0a20 2020 2020 2020 2020 2020 2041 2064  .            A d
-00028ae0: 6963 7469 6f6e 6172 7920 636f 6e74 6169  ictionary contai
-00028af0: 6e69 6e67 2074 6865 206f 7074 696f 6e61  ning the optiona
-00028b00: 6c20 696e 7075 7420 6172 6775 6d65 6e74  l input argument
-00028b10: 7320 6f66 2074 6865 2075 6675 6e63 2e20  s of the ufunc. 
-00028b20: 4966 2067 6976 656e 2c20 616e 7920 6f75  If given, any ou
-00028b30: 7420 6172 6775 6d65 6e74 732c 2062 6f74  t arguments, bot
-00028b40: 6820 706f 7369 7469 6f6e 616c 2061 6e64  h positional and
-00028b50: 206b 6579 776f 7264 2c20 6172 6520 7061   keyword, are pa
-00028b60: 7373 6564 2061 7320 6120 7475 706c 6520  ssed as a tuple 
-00028b70: 696e 206b 7761 7267 732e 0d0a 0d0a 2020  in kwargs.....  
-00028b80: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-00028b90: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-00028ba0: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-00028bb0: 6d65 7468 6f64 2073 686f 756c 6420 7265  method should re
-00028bc0: 7475 726e 2065 6974 6865 7220 7468 6520  turn either the 
-00028bd0: 7265 7375 6c74 206f 6620 7468 6520 6f70  result of the op
-00028be0: 6572 6174 696f 6e2c 206f 7220 4e6f 7449  eration, or NotI
-00028bf0: 6d70 6c65 6d65 6e74 6564 2069 6620 7468  mplemented if th
-00028c00: 6520 6f70 6572 6174 696f 6e20 7265 7175  e operation requ
-00028c10: 6573 7465 6420 6973 206e 6f74 2069 6d70  ested is not imp
-00028c20: 6c65 6d65 6e74 6564 2e0d 0a0d 0a20 2020  lemented.....   
-00028c30: 2020 2020 204e 6f74 6573 0d0a 2020 2020       Notes..    
-00028c40: 2020 2020 2d2d 2d2d 2d0d 0a20 2020 2020      -----..     
-00028c50: 2020 2054 6865 2063 7572 7265 6e74 2069     The current i
-00028c60: 6d70 6c65 6d65 6e74 6174 696f 6e20 646f  mplementation do
-00028c70: 6573 206e 6f74 2073 7570 706f 7274 2074  es not support t
-00028c80: 6865 2066 6f6c 6c6f 7769 6e67 206b 6579  he following key
-00028c90: 776f 7264 2061 7267 756d 656e 7473 3a20  word arguments: 
-00028ca0: 6063 6173 7469 6e67 602c 2060 7369 6760  `casting`, `sig`
-00028cb0: 2c20 6073 6967 6e61 7475 7265 602c 2061  , `signature`, a
-00028cc0: 6e64 0d0a 2020 2020 2020 2020 6063 6f72  nd..        `cor
-00028cd0: 655f 7369 676e 6174 7572 6560 2e0d 0a0d  e_signature`....
-00028ce0: 0a20 2020 2020 2020 2049 7420 6861 7320  .        It has 
-00028cf0: 7061 7274 6961 6c20 7375 7070 6f72 7420  partial support 
-00028d00: 666f 7220 6b65 7977 6f72 6420 6172 6775  for keyword argu
-00028d10: 6d65 6e74 733a 2060 7768 6572 6560 2c20  ments: `where`, 
-00028d20: 6061 7869 7360 2c20 616e 6420 6061 7865  `axis`, and `axe
-00028d30: 7360 2c20 6966 2074 6865 7920 6d61 7463  s`, if they matc
-00028d40: 680d 0a20 2020 2020 2020 2074 6865 2064  h..        the d
-00028d50: 6566 6175 6c74 2076 616c 7565 732e 0d0a  efault values...
-00028d60: 0d0a 2020 2020 2020 2020 4966 2046 6173  ..        If Fas
-00028d70: 7441 7272 6179 2773 2060 6057 6172 6e69  tArray's ``Warni
-00028d80: 6e67 4c65 7665 6c60 6020 6973 2065 6e61  ngLevel`` is ena
-00028d90: 626c 6564 2c20 7468 656e 2077 6172 6e69  bled, then warni
-00028da0: 6e67 7320 7769 6c6c 2062 6520 656d 6974  ngs will be emit
-00028db0: 7465 6420 6966 2061 6e79 206f 6620 756e  ted if any of un
-00028dc0: 7375 7070 6f72 7465 6420 6f72 2070 6172  supported or par
-00028dd0: 7469 616c 6c79 0d0a 2020 2020 2020 2020  tially..        
-00028de0: 7375 7070 6f72 7465 6420 6b65 7977 6f72  supported keywor
-00028df0: 6420 6172 6775 6d65 6e74 7320 6172 6520  d arguments are 
-00028e00: 7061 7373 6564 2e0d 0a0d 0a20 2020 2020  passed.....     
-00028e10: 2020 2054 4f44 4f20 646f 6375 6d65 6e74     TODO document
-00028e20: 2063 7573 746f 6d20 7570 2063 6173 7469   custom up casti
-00028e30: 6e67 2072 756c 6573 2e0d 0a0d 0a20 2020  ng rules.....   
-00028e40: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-00028e50: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00028e60: 0a20 2020 2020 2020 2046 6f72 206d 6f72  .        For mor
-00028e70: 6520 696e 666f 726d 6174 696f 6e20 6f6e  e information on
-00028e80: 2075 6675 6e63 2073 6565 2074 6865 2066   ufunc see the f
-00028e90: 6f6c 6c6f 7769 6e67 206e 756d 7079 2064  ollowing numpy d
-00028ea0: 6f63 756d 656e 7473 3a0d 0a20 2020 2020  ocuments:..     
-00028eb0: 2020 2020 2020 202d 2068 7474 7073 3a2f         - https:/
-00028ec0: 2f6e 756d 7079 2e6f 7267 2f64 6f63 2f73  /numpy.org/doc/s
-00028ed0: 7461 626c 652f 7265 6665 7265 6e63 652f  table/reference/
-00028ee0: 6172 7261 7973 2e63 6c61 7373 6573 2e68  arrays.classes.h
-00028ef0: 746d 6c23 6e75 6d70 792e 636c 6173 732e  tml#numpy.class.
-00028f00: 5f5f 6172 7261 795f 7566 756e 635f 5f0d  __array_ufunc__.
-00028f10: 0a20 2020 2020 2020 2020 2020 202d 2068  .            - h
-00028f20: 7474 7073 3a2f 2f6e 756d 7079 2e6f 7267  ttps://numpy.org
-00028f30: 2f64 6f63 2f73 7461 626c 652f 7265 6665  /doc/stable/refe
-00028f40: 7265 6e63 652f 7566 756e 6373 2e68 746d  rence/ufuncs.htm
-00028f50: 6c0d 0a0d 0a20 2020 2020 2020 204e 6f74  l....        Not
-00028f60: 652c 2074 6865 2064 6f63 7374 7269 6e67  e, the docstring
-00028f70: 2050 6172 616d 6574 6572 7320 616e 6420   Parameters and 
-00028f80: 5265 7475 726e 2073 6563 7469 6f6e 2069  Return section i
-00028f90: 7320 7265 7065 6174 6564 2066 726f 6d20  s repeated from 
-00028fa0: 7468 6520 6e75 6d70 790d 0a20 2020 2020  the numpy..     
-00028fb0: 2020 2060 5f5f 6172 7261 795f 7566 756e     `__array_ufun
-00028fc0: 635f 5f60 2064 6f63 7374 7269 6e67 2073  c__` docstring s
-00028fd0: 696e 6365 2074 6869 7320 6973 206f 7665  ince this is ove
-00028fe0: 7272 6964 696e 6720 7468 6174 206d 6574  rriding that met
-00028ff0: 686f 642e 0d0a 2020 2020 2020 2020 2222  hod...        ""
-00029000: 220d 0a20 2020 2020 2020 2023 2054 4f44  "..        # TOD
-00029010: 4f20 636f 6e73 6964 6572 2075 7369 6e67  O consider using
-00029020: 2074 7970 6520 616e 6e6f 7461 7469 6f6e   type annotation
-00029030: 2074 7970 696e 672e 4669 6e61 6c20 666f   typing.Final fo
-00029040: 7220 7468 6573 6520 7265 6164 2d6f 6e6c  r these read-onl
-00029050: 7920 7661 7269 6162 6c65 7320 7768 656e  y variables when
-00029060: 206d 6f76 696e 6720 746f 2050 7974 686f   moving to Pytho
-00029070: 6e20 332e 380d 0a20 2020 2020 2020 2023  n 3.8..        #
-00029080: 2050 7974 686f 6e20 332e 3820 6164 6465   Python 3.8 adde
-00029090: 6420 7375 7070 6f72 7420 666f 7220 7479  d support for ty
-000290a0: 7069 6e67 2e46 696e 616c 2e20 4669 6e61  ping.Final. Fina
-000290b0: 6c20 7769 6c6c 2063 6174 6368 2075 6e69  l will catch uni
-000290c0: 6e74 656e 6465 6420 6173 7369 676e 6d65  ntended assignme
-000290d0: 6e74 7320 666f 7220 636f 6e73 7461 6e74  nts for constant
-000290e0: 7320 7768 656e 2072 756e 6e69 6e67 0d0a  s when running..
-000290f0: 2020 2020 2020 2020 2320 7374 6174 6963          # static
-00029100: 2074 7970 6520 6368 6563 6b65 7273 2073   type checkers s
-00029110: 7563 6820 6173 206d 7970 792e 0d0a 2020  uch as mypy...  
-00029120: 2020 2020 2020 5f55 4e53 5550 504f 5254        _UNSUPPORT
-00029130: 4544 5f4b 4559 574f 5244 533a 2054 7570  ED_KEYWORDS: Tup
-00029140: 6c65 5b73 7472 2c20 7374 722c 2073 7472  le[str, str, str
-00029150: 2c20 7374 725d 203d 2028 2263 6173 7469  , str] = ("casti
-00029160: 6e67 222c 2022 7369 6722 2c20 2273 6967  ng", "sig", "sig
-00029170: 6e61 7475 7265 222c 2022 636f 7265 5f73  nature", "core_s
-00029180: 6967 6e61 7475 7265 2229 0d0a 2020 2020  ignature")..    
-00029190: 2020 2020 5f50 4152 5449 414c 4c59 5f53      _PARTIALLY_S
-000291a0: 5550 504f 5254 4544 5f4b 4559 574f 5244  UPPORTED_KEYWORD
-000291b0: 535f 544f 5f44 4546 4155 4c54 533a 204d  S_TO_DEFAULTS: M
-000291c0: 6170 7069 6e67 5b73 7472 2c20 556e 696f  apping[str, Unio
-000291d0: 6e5b 4e6f 6e65 2c20 626f 6f6c 5d5d 203d  n[None, bool]] =
-000291e0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-000291f0: 2277 6865 7265 223a 2054 7275 652c 0d0a  "where": True,..
-00029200: 2020 2020 2020 2020 2020 2020 2261 7869              "axi
-00029210: 7322 3a20 4e6f 6e65 2c0d 0a20 2020 2020  s": None,..     
-00029220: 2020 2020 2020 2022 6178 6573 223a 204e         "axes": N
-00029230: 6f6e 652c 0d0a 2020 2020 2020 2020 7d0d  one,..        }.
-00029240: 0a20 2020 2020 2020 2074 6f70 6c65 7665  .        topleve
-00029250: 6c5f 6162 6f72 743a 2062 6f6f 6c20 3d20  l_abort: bool = 
-00029260: 4661 6c73 650d 0a0d 0a20 2020 2020 2020  False....       
-00029270: 2069 6620 4661 7374 4172 7261 792e 5665   if FastArray.Ve
-00029280: 7262 6f73 6520 3e20 323a 0d0a 2020 2020  rbose > 2:..    
-00029290: 2020 2020 2020 2020 7072 696e 7428 222a          print("*
-000292a0: 2a2a 2074 6f70 206c 6576 656c 2061 7272  ** top level arr
-000292b0: 6179 5f75 6675 6e63 222c 2075 6675 6e63  ay_ufunc", ufunc
-000292c0: 2c20 6d65 7468 6f64 2c20 2a69 6e70 7574  , method, *input
-000292d0: 732c 206b 7761 7267 7329 0d0a 0d0a 2020  s, kwargs)....  
-000292e0: 2020 2020 2020 2320 666c 6970 2061 6e79        # flip any
-000292f0: 2069 6e70 7574 7320 7468 6174 2061 7265   inputs that are
-00029300: 2066 6173 7461 7272 6179 7320 6261 636b   fastarrays back
-00029310: 2074 6f20 616e 206e 6461 7272 6179 2e2e   to an ndarray..
-00029320: 2e0d 0a20 2020 2020 2020 2061 7267 733a  ...        args:
-00029330: 204c 6973 745b 416e 795d 203d 205b 5d0d   List[Any] = [].
-00029340: 0a20 2020 2020 2020 2066 6f72 2069 6e70  .        for inp
-00029350: 7574 2069 6e20 696e 7075 7473 3a0d 0a20  ut in inputs:.. 
-00029360: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00029370: 696e 7374 616e 6365 2869 6e70 7574 2c20  instance(input, 
-00029380: 6e70 2e6e 6461 7272 6179 293a 0d0a 2020  np.ndarray):..  
-00029390: 2020 2020 2020 2020 2020 2020 2020 6973                is
-000293a0: 5f6e 6f74 5f73 7570 706f 7274 6564 203d  _not_supported =
-000293b0: 2073 656c 662e 5f69 735f 6e6f 745f 7375   self._is_not_su
-000293c0: 7070 6f72 7465 6428 696e 7075 7429 0d0a  pported(input)..
-000293d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000293e0: 6966 2069 735f 6e6f 745f 7375 7070 6f72  if is_not_suppor
-000293f0: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
-00029400: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
-00029410: 2065 6e61 626c 6520 7468 6973 2077 6172   enable this war
-00029420: 6e69 6e67 2069 6e20 6120 6675 7475 7265  ning in a future
-00029430: 206d 696e 6f72 2072 656c 6561 7365 0d0a   minor release..
-00029440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029450: 2020 2020 2320 4661 7374 4172 7261 792e      # FastArray.
-00029460: 5f70 6f73 7369 626c 795f 7761 726e 2866  _possibly_warn(f
-00029470: 275f 5f61 7272 6179 5f75 6675 6e63 5f5f  '__array_ufunc__
-00029480: 3a20 756e 7375 7070 6f72 7465 6420 696e  : unsupported in
-00029490: 7075 7420 227b 696e 7075 747d 2227 290d  put "{input}"').
-000294a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000294b0: 2020 2020 2074 6f70 6c65 7665 6c5f 6162       toplevel_ab
-000294c0: 6f72 7420 7c3d 2069 735f 6e6f 745f 7375  ort |= is_not_su
-000294d0: 7070 6f72 7465 640d 0a20 2020 2020 2020  pported..       
-000294e0: 2020 2020 2061 7267 732e 6170 7065 6e64       args.append
-000294f0: 2869 6e70 7574 290d 0a0d 0a20 2020 2020  (input)....     
-00029500: 2020 2023 2043 6865 636b 2066 6f72 206e     # Check for n
-00029510: 756d 7079 2072 756c 6573 2074 6861 7420  umpy rules that 
-00029520: 7765 2063 616e 6e6f 7420 6861 6e64 6c65  we cannot handle
-00029530: 2e0d 0a20 2020 2020 2020 2066 6f72 206b  ...        for k
-00029540: 7720 696e 205f 554e 5355 5050 4f52 5445  w in _UNSUPPORTE
-00029550: 445f 4b45 5957 4f52 4453 3a0d 0a20 2020  D_KEYWORDS:..   
-00029560: 2020 2020 2020 2020 2069 6620 6b77 2069           if kw i
-00029570: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
-00029580: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
-00029590: 4f20 656e 6162 6c65 2074 6869 7320 7761  O enable this wa
-000295a0: 726e 696e 6720 696e 2061 2066 7574 7572  rning in a futur
-000295b0: 6520 6d69 6e6f 7220 7265 6c65 6173 650d  e minor release.
-000295c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000295d0: 2023 2046 6173 7441 7272 6179 2e5f 706f   # FastArray._po
-000295e0: 7373 6962 6c79 5f77 6172 6e28 6627 5f5f  ssibly_warn(f'__
-000295f0: 6172 7261 795f 7566 756e 635f 5f3a 2075  array_ufunc__: u
-00029600: 6e73 7570 706f 7274 6564 206b 6579 776f  nsupported keywo
-00029610: 7264 2061 7267 756d 656e 7420 227b 6b77  rd argument "{kw
-00029620: 7d22 2729 0d0a 2020 2020 2020 2020 2020  }"')..          
-00029630: 2020 2020 2020 746f 706c 6576 656c 5f61        toplevel_a
-00029640: 626f 7274 207c 3d20 5472 7565 0d0a 0d0a  bort |= True....
-00029650: 2020 2020 2020 2020 2320 4368 6563 6b20          # Check 
-00029660: 666f 7220 6e75 6d70 7920 7275 6c65 7320  for numpy rules 
-00029670: 7468 6174 2077 6520 7061 7274 6961 6c6c  that we partiall
-00029680: 7920 7375 7070 6f72 743b 2074 6861 7420  y support; that 
-00029690: 6973 2c20 7768 6572 6520 7765 206f 6e6c  is, where we onl
-000296a0: 7920 7375 7070 6f72 740d 0a20 2020 2020  y support..     
-000296b0: 2020 2023 2074 6865 206b 6579 776f 7264     # the keyword
-000296c0: 2069 6620 7468 6520 7661 6c75 6520 6973   if the value is
-000296d0: 2073 6f6d 6520 6465 6661 756c 7420 7661   some default va
-000296e0: 6c75 6520 616e 6420 6f74 6865 7277 6973  lue and otherwis
-000296f0: 6520 7075 6e74 2074 6f20 6e75 6d70 792e  e punt to numpy.
-00029700: 0d0a 2020 2020 2020 2020 2320 5468 6520  ..        # The 
-00029710: 7661 6c75 6520 6173 736f 6369 6174 6564  value associated
-00029720: 2077 6974 6820 6561 6368 206b 6579 776f   with each keywo
-00029730: 7264 2069 6e20 7468 6520 6469 6374 696f  rd in the dictio
-00029740: 6e61 7279 2069 7320 7468 6520 6f6e 6c79  nary is the only
-00029750: 2076 616c 7565 2077 6527 6c6c 0d0a 2020   value we'll..  
-00029760: 2020 2020 2020 2320 7375 7070 6f72 7420        # support 
-00029770: 666f 7220 7468 6174 206b 6579 776f 7264  for that keyword
-00029780: 2e0d 0a20 2020 2020 2020 2023 2046 6f72  ...        # For
-00029790: 2065 7861 6d70 6c65 2c20 696e 206e 756d   example, in num
-000297a0: 7079 2031 2e31 3720 7468 6520 7375 6d28  py 1.17 the sum(
-000297b0: 2920 6675 6e63 7469 6f6e 2070 6173 7365  ) function passe
-000297c0: 7320 7768 6572 653d 5472 7565 2062 7920  s where=True by 
-000297d0: 6465 6661 756c 742e 0d0a 2020 2020 2020  default...      
-000297e0: 2020 666f 7220 6b77 2c20 6465 6661 756c    for kw, defaul
-000297f0: 745f 7661 6c20 696e 205f 5041 5254 4941  t_val in _PARTIA
-00029800: 4c4c 595f 5355 5050 4f52 5445 445f 4b45  LLY_SUPPORTED_KE
-00029810: 5957 4f52 4453 5f54 4f5f 4445 4641 554c  YWORDS_TO_DEFAUL
-00029820: 5453 2e69 7465 6d73 2829 3a0d 0a20 2020  TS.items():..   
-00029830: 2020 2020 2020 2020 2069 6620 6b77 2069           if kw i
-00029840: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
-00029850: 2020 2020 2020 2020 2020 2023 2055 7365             # Use
-00029860: 2061 2074 7970 6520 6368 6563 6b20 6265   a type check be
-00029870: 666f 7265 2065 7175 616c 6974 7920 6865  fore equality he
-00029880: 7265 2074 6f20 6176 6f69 6420 6572 726f  re to avoid erro
-00029890: 7273 2063 6175 7365 640d 0a20 2020 2020  rs caused..     
-000298a0: 2020 2020 2020 2020 2020 2023 2062 7920             # by 
-000298b0: 6368 6563 6b69 6e67 2065 7175 616c 6974  checking equalit
-000298c0: 7920 6265 7477 6565 6e20 626f 6f6c 7320  y between bools 
-000298d0: 616e 6420 6172 7261 7973 2e0d 0a20 2020  and arrays...   
-000298e0: 2020 2020 2020 2020 2020 2020 206b 7761               kwa
-000298f0: 7267 5f76 616c 203d 206b 7761 7267 735b  rg_val = kwargs[
-00029900: 6b77 5d0d 0a20 2020 2020 2020 2020 2020  kw]..           
-00029910: 2020 2020 2069 6620 7479 7065 2864 6566       if type(def
-00029920: 6175 6c74 5f76 616c 2920 213d 2074 7970  ault_val) != typ
-00029930: 6528 6b77 6172 675f 7661 6c29 206f 7220  e(kwarg_val) or 
-00029940: 6b77 6172 675f 7661 6c20 213d 2064 6566  kwarg_val != def
-00029950: 6175 6c74 5f76 616c 3a0d 0a20 2020 2020  ault_val:..     
-00029960: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00029970: 6f70 6c65 7665 6c5f 6162 6f72 7420 7c3d  oplevel_abort |=
-00029980: 2054 7275 650d 0a0d 0a20 2020 2020 2020   True....       
-00029990: 2064 7479 7065 3a20 4f70 7469 6f6e 616c   dtype: Optional
-000299a0: 5b6e 702e 6474 7970 655d 203d 206b 7761  [np.dtype] = kwa
-000299b0: 7267 732e 6765 7428 2264 7479 7065 222c  rgs.get("dtype",
-000299c0: 204e 6f6e 6529 0d0a 0d0a 2020 2020 2020   None)....      
-000299d0: 2020 6861 735f 6f75 7470 7574 733a 2062    has_outputs: b
-000299e0: 6f6f 6c20 3d20 4661 6c73 650d 0a20 2020  ool = False..   
-000299f0: 2020 2020 206f 7574 5f61 7267 733a 204c       out_args: L
-00029a00: 6973 745b 416e 795d 203d 205b 5d0d 0a0d  ist[Any] = []...
-00029a10: 0a20 2020 2020 2020 2023 2066 6c69 7020  .        # flip 
-00029a20: 616e 7920 6f75 7470 7574 7320 746f 206e  any outputs to n
-00029a30: 6461 7272 6179 2e2e 2e0d 0a20 2020 2020  darray.....     
-00029a40: 2020 206f 7574 7075 7473 203d 206b 7761     outputs = kwa
-00029a50: 7267 732e 706f 7028 226f 7574 222c 204e  rgs.pop("out", N
-00029a60: 6f6e 6529 0d0a 2020 2020 2020 2020 6966  one)..        if
-00029a70: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
-00029a80: 2020 2020 2020 2068 6173 5f6f 7574 7075         has_outpu
-00029a90: 7473 203d 2054 7275 650d 0a20 2020 2020  ts = True..     
-00029aa0: 2020 2020 2020 2066 6f72 206f 7574 7075         for outpu
-00029ab0: 7420 696e 206f 7574 7075 7473 3a0d 0a20  t in outputs:.. 
-00029ac0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00029ad0: 6620 6973 696e 7374 616e 6365 286f 7574  f isinstance(out
-00029ae0: 7075 742c 206e 702e 6e64 6172 7261 7929  put, np.ndarray)
-00029af0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00029b00: 2020 2020 2020 2069 735f 6e6f 745f 7375         is_not_su
-00029b10: 7070 6f72 7465 6420 3d20 7365 6c66 2e5f  pported = self._
-00029b20: 6973 5f6e 6f74 5f73 7570 706f 7274 6564  is_not_supported
-00029b30: 286f 7574 7075 7429 0d0a 2020 2020 2020  (output)..      
-00029b40: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00029b50: 2069 735f 6e6f 745f 7375 7070 6f72 7465   is_not_supporte
-00029b60: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
-00029b70: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
-00029b80: 444f 2065 6e61 626c 6520 7468 6973 2077  DO enable this w
-00029b90: 6172 6e69 6e67 2069 6e20 6120 6675 7475  arning in a futu
-00029ba0: 7265 206d 696e 6f72 2072 656c 6561 7365  re minor release
-00029bb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029bc0: 2020 2020 2020 2020 2020 2320 4661 7374            # Fast
-00029bd0: 4172 7261 792e 5f70 6f73 7369 626c 795f  Array._possibly_
-00029be0: 7761 726e 2866 275f 5f61 7272 6179 5f75  warn(f'__array_u
-00029bf0: 6675 6e63 5f5f 3a20 756e 7375 7070 6f72  func__: unsuppor
-00029c00: 7465 6420 6f75 7470 7574 2022 7b6f 7574  ted output "{out
-00029c10: 7075 747d 2227 290d 0a20 2020 2020 2020  put}"')..       
-00029c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029c30: 2074 6f70 6c65 7665 6c5f 6162 6f72 7420   toplevel_abort 
-00029c40: 7c3d 2069 735f 6e6f 745f 7375 7070 6f72  |= is_not_suppor
-00029c50: 7465 640d 0a20 2020 2020 2020 2020 2020  ted..           
-00029c60: 2020 2020 206f 7574 5f61 7267 732e 6170       out_args.ap
-00029c70: 7065 6e64 286f 7574 7075 7429 0d0a 2020  pend(output)..  
-00029c80: 2020 2020 2020 2020 2020 2320 7265 706c            # repl
-00029c90: 6163 6520 6f75 740d 0a20 2020 2020 2020  ace out..       
-00029ca0: 2020 2020 206b 7761 7267 735b 226f 7574       kwargs["out
-00029cb0: 225d 203d 2074 7570 6c65 286f 7574 5f61  "] = tuple(out_a
-00029cc0: 7267 7329 0d0a 2020 2020 2020 2020 656c  rgs)..        el
-00029cd0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00029ce0: 2023 2054 4a44 202d 2068 6572 6520 6f75   # TJD - here ou
-00029cf0: 7470 7574 7320 7761 7320 6e6f 7420 7370  tputs was not sp
-00029d00: 6563 6966 6965 640d 0a20 2020 2020 2020  ecified..       
-00029d10: 2020 2020 2023 206e 6f77 2069 6620 5546       # now if UF
-00029d20: 756e 632e 6e6f 7574 203d 3d31 2c20 7468  unc.nout ==1, th
-00029d30: 6973 2066 756e 6374 696f 6e20 7265 7175  is function requ
-00029d40: 6972 6573 2061 6e20 6f75 7470 7574 0d0a  ires an output..
-00029d50: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
-00029d60: 7574 7320 3d20 284e 6f6e 652c 2920 2a20  uts = (None,) * 
-00029d70: 7566 756e 632e 6e6f 7574 0d0a 0d0a 2020  ufunc.nout....  
-00029d80: 2020 2020 2020 2320 5365 6520 6874 7470        # See http
-00029d90: 733a 2f2f 646f 6373 2e70 7974 686f 6e2e  s://docs.python.
-00029da0: 6f72 672f 332f 632d 6170 692f 7479 7065  org/3/c-api/type
-00029db0: 6f62 6a2e 6874 6d6c 0d0a 2020 2020 2020  obj.html..      
-00029dc0: 2020 2320 5365 6520 4e75 6d62 6572 204f    # See Number O
-00029dd0: 626a 6563 7420 5374 7275 6374 7572 6573  bject Structures
-00029de0: 2061 6e64 204d 6170 7069 6e67 204f 626a   and Mapping Obj
-00029df0: 6563 7420 5374 7275 6374 7572 6520 666f  ect Structure fo
-00029e00: 7220 696e 6465 7869 6e67 0d0a 0d0a 2020  r indexing....  
-00029e10: 2020 2020 2020 2320 7566 756e 632e 6e69        # ufunc.ni
-00029e20: 6e09 2020 2020 5468 6520 6e75 6d62 6572  n.    The number
-00029e30: 206f 6620 696e 7075 7473 2e0d 0a20 2020   of inputs...   
-00029e40: 2020 2020 2023 2075 6675 6e63 2e6e 6f75       # ufunc.nou
-00029e50: 7409 2020 2020 5468 6520 6e75 6d62 6572  t.    The number
-00029e60: 206f 6620 6f75 7470 7574 732e 0d0a 2020   of outputs...  
-00029e70: 2020 2020 2020 2320 7566 756e 632e 6e61        # ufunc.na
-00029e80: 7267 7309 5468 6520 6e75 6d62 6572 206f  rgs.The number o
-00029e90: 6620 6172 6775 6d65 6e74 732e 0d0a 2020  f arguments...  
-00029ea0: 2020 2020 2020 2320 7566 756e 632e 6e74        # ufunc.nt
-00029eb0: 7970 6573 0954 6865 206e 756d 6265 7220  ypes.The number 
-00029ec0: 6f66 2074 7970 6573 2e0d 0a20 2020 2020  of types...     
-00029ed0: 2020 2023 2075 6675 6e63 2e74 7970 6573     # ufunc.types
-00029ee0: 0952 6574 7572 6e73 2061 206c 6973 7420  .Returns a list 
-00029ef0: 7769 7468 2074 7970 6573 2067 726f 7570  with types group
-00029f00: 6564 2069 6e70 7574 2d3e 6f75 7470 7574  ed input->output
-00029f10: 2e0d 0a20 2020 2020 2020 2023 2075 6675  ...        # ufu
-00029f20: 6e63 2e69 6465 6e74 6974 7909 5468 6520  nc.identity.The 
-00029f30: 6964 656e 7469 7479 2076 616c 7565 2e0d  identity value..
-00029f40: 0a0d 0a20 2020 2020 2020 2066 696e 616c  ...        final
-00029f50: 5f64 7479 7065 3a20 4f70 7469 6f6e 616c  _dtype: Optional
-00029f60: 5b6e 702e 6474 7970 655d 203d 204e 6f6e  [np.dtype] = Non
-00029f70: 650d 0a20 2020 2020 2020 2066 6173 745f  e..        fast_
-00029f80: 6675 6e63 7469 6f6e 3a20 4f70 7469 6f6e  function: Option
-00029f90: 616c 5b4d 4154 485f 4f50 4552 4154 494f  al[MATH_OPERATIO
-00029fa0: 4e5d 203d 204e 6f6e 650d 0a20 2020 2020  N] = None..     
-00029fb0: 2020 2072 6564 7563 655f 6675 6e63 3a20     reduce_func: 
-00029fc0: 4f70 7469 6f6e 616c 5b52 4544 5543 455f  Optional[REDUCE_
-00029fd0: 4655 4e43 5449 4f4e 535d 203d 204e 6f6e  FUNCTIONS] = Non
-00029fe0: 650d 0a0d 0a20 2020 2020 2020 2023 2048  e....        # H
-00029ff0: 616e 646c 6520 7265 6475 6365 2075 6675  andle reduce ufu
-0002a000: 6e63 206d 6574 686f 6473 2e0d 0a20 2020  nc methods...   
-0002a010: 2020 2020 2023 206e 6f74 653a 2077 6865       # note: whe
-0002a020: 6e20 6d65 7468 6f64 2069 7320 2761 7427  n method is 'at'
-0002a030: 2074 6869 7320 6973 2061 6e20 696e 706c   this is an inpl
-0002a040: 6163 6520 756e 6275 6666 6572 6564 206f  ace unbuffered o
-0002a050: 7065 7261 7469 6f6e 0d0a 2020 2020 2020  peration..      
-0002a060: 2020 2320 7468 6973 2063 616e 2073 7065    # this can spe
-0002a070: 6564 2075 7020 726f 7574 696e 6573 2074  ed up routines t
-0002a080: 6861 7420 7573 6520 6865 6176 7920 6d61  hat use heavy ma
-0002a090: 736b 6564 206f 7065 7261 7469 6f6e 730d  sked operations.
-0002a0a0: 0a20 2020 2020 2020 2069 6620 6d65 7468  .        if meth
-0002a0b0: 6f64 203d 3d20 2272 6564 7563 6522 2061  od == "reduce" a
-0002a0c0: 6e64 2046 6173 7441 7272 6179 2e46 6173  nd FastArray.Fas
-0002a0d0: 7465 7255 4675 6e63 2061 6e64 206e 6f74  terUFunc and not
-0002a0e0: 2074 6f70 6c65 7665 6c5f 6162 6f72 743a   toplevel_abort:
-0002a0f0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002a100: 612e 616e 7928 2920 616e 6420 612e 616c  a.any() and a.al
-0002a110: 6c28 2920 6172 6520 6c6f 6769 6361 6c20  l() are logical 
-0002a120: 7265 6475 6365 206f 7065 7261 7469 6f6e  reduce operation
-0002a130: 730d 0a20 2020 2020 2020 2020 2020 2023  s..            #
-0002a140: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-0002a150: 2020 2020 2020 2023 204c 6f6f 6b20 666f         # Look fo
-0002a160: 7220 6178 6973 3a4e 6f6e 6520 2d2d 206f  r axis:None -- o
-0002a170: 7468 6572 7769 7365 2041 424f 5254 0d0a  therwise ABORT..
-0002a180: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-0002a190: 656e 206c 6f6f 6b20 666f 7220 4b65 6570  en look for Keep
-0002a1a0: 6469 6d73 2077 6968 6368 206d 6561 6e73  dims wihch means
-0002a1b0: 2074 6f20 7772 6170 2072 6573 756c 7420   to wrap result 
-0002a1c0: 696e 206c 6973 742f 6172 7261 793f 0d0a  in list/array?..
-0002a1d0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-0002a1e0: 656e 2063 6865 636b 2064 7479 7065 2061  en check dtype a
-0002a1f0: 6c73 6f0d 0a20 2020 2020 2020 2020 2020  lso..           
-0002a200: 2023 0d0a 2020 2020 2020 2020 2020 2020   #..            
-0002a210: 2320 496e 205b 3232 5d3a 2074 3d46 4128  # In [22]: t=FA(
-0002a220: 5b5b 332c 342c 355d 2c5b 362c 372c 385d  [[3,4,5],[6,7,8]
-0002a230: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-0002a240: 2320 496e 205b 3233 5d3a 206e 702e 6164  # In [23]: np.ad
-0002a250: 642e 7265 6475 6365 2874 290d 0a20 2020  d.reduce(t)..   
-0002a260: 2020 2020 2020 2020 2023 2121 7265 6475           #!!redu
-0002a270: 6365 2020 7265 6475 6365 206e 696e 3a20  ce  reduce nin: 
-0002a280: 3220 3120 3c75 6675 6e63 2027 6164 6427  2 1 <ufunc 'add'
-0002a290: 3e20 5b61 7272 6179 285b 5b33 2c20 342c  > [array([[3, 4,
-0002a2a0: 2035 5d2c 0d0a 2020 2020 2020 2020 2020   5],..          
-0002a2b0: 2020 2320 2020 2020 2020 5b36 2c20 372c    #       [6, 7,
-0002a2c0: 2038 5d5d 295d 206f 7574 3a20 284e 6f6e   8]])] out: (Non
-0002a2d0: 652c 2920 6b77 6172 6773 3a20 7b7d 0d0a  e,) kwargs: {}..
-0002a2e0: 2020 2020 2020 2020 2020 2020 2320 7265              # re
-0002a2f0: 7375 6c74 7320 5b20 3920 3131 2031 335d  sults [ 9 11 13]
-0002a300: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002a310: 4f75 745b 3233 5d3a 2061 7272 6179 285b  Out[23]: array([
-0002a320: 2039 2c20 3131 2c20 3133 5d29 0d0a 2020   9, 11, 13])..  
-0002a330: 2020 2020 2020 2020 2020 2320 496e 205b            # In [
-0002a340: 3234 5d3a 206e 702e 6164 642e 7265 6475  24]: np.add.redu
-0002a350: 6365 2874 2c20 6178 6973 3d4e 6f6e 6529  ce(t, axis=None)
-0002a360: 0d0a 2020 2020 2020 2020 2020 2020 2321  ..            #!
-0002a370: 2172 6564 7563 6520 2072 6564 7563 6520  !reduce  reduce 
-0002a380: 6e69 6e3a 2032 2031 203c 7566 756e 6320  nin: 2 1 <ufunc 
-0002a390: 2761 6464 273e 205b 6172 7261 7928 5b5b  'add'> [array([[
-0002a3a0: 332c 2034 2c20 355d 2c0d 0a20 2020 2020  3, 4, 5],..     
-0002a3b0: 2020 2020 2020 2023 2020 2020 2020 205b         #       [
-0002a3c0: 362c 2037 2c20 385d 5d29 5d20 6f75 743a  6, 7, 8]])] out:
-0002a3d0: 2028 4e6f 6e65 2c29 206b 7761 7267 733a   (None,) kwargs:
-0002a3e0: 207b 2761 7869 7327 3a20 4e6f 6e65 7d0d   {'axis': None}.
-0002a3f0: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
-0002a400: 6573 756c 7473 2033 330d 0a20 2020 2020  esults 33..     
-0002a410: 2020 2020 2020 2023 204f 7574 5b32 345d         # Out[24]
-0002a420: 3a20 3333 0d0a 2020 2020 2020 2020 2020  : 33..          
-0002a430: 2020 2320 496e 205b 3235 5d3a 206e 702e    # In [25]: np.
-0002a440: 6164 642e 7265 6475 6365 2874 2c20 6178  add.reduce(t, ax
-0002a450: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
-0002a460: 733d 5472 7565 290d 0a20 2020 2020 2020  s=True)..       
-0002a470: 2020 2020 2023 2121 7265 6475 6365 2020       #!!reduce  
-0002a480: 7265 6475 6365 206e 696e 3a20 3220 3120  reduce nin: 2 1 
-0002a490: 3c75 6675 6e63 2027 6164 6427 3e20 5b61  <ufunc 'add'> [a
-0002a4a0: 7272 6179 285b 5b33 2c20 342c 2035 5d2c  rray([[3, 4, 5],
-0002a4b0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002a4c0: 2020 2020 2020 5b36 2c20 372c 2038 5d5d        [6, 7, 8]]
-0002a4d0: 295d 206f 7574 3a20 284e 6f6e 652c 2920  )] out: (None,) 
-0002a4e0: 6b77 6172 6773 3a20 7b27 6178 6973 273a  kwargs: {'axis':
-0002a4f0: 204e 6f6e 652c 2027 6b65 6570 6469 6d73   None, 'keepdims
-0002a500: 273a 2054 7275 657d 0d0a 2020 2020 2020  ': True}..      
-0002a510: 2020 2020 2020 2320 7265 7375 6c74 7320        # results 
-0002a520: 5b5b 3333 5d5d 0d0a 2020 2020 2020 2020  [[33]]..        
-0002a530: 2020 2020 2320 4f75 745b 3235 5d3a 2061      # Out[25]: a
-0002a540: 7272 6179 285b 5b33 335d 5d29 0d0a 2020  rray([[33]])..  
-0002a550: 2020 2020 2020 2020 2020 2320 496e 205b            # In [
-0002a560: 3236 5d3a 206e 702e 6164 642e 7265 6475  26]: np.add.redu
-0002a570: 6365 2874 2c20 6178 6973 3d4e 6f6e 652c  ce(t, axis=None,
-0002a580: 206b 6565 7064 696d 733d 5472 7565 2c20   keepdims=True, 
-0002a590: 6474 7970 653d 6e70 2e66 6c6f 6174 3332  dtype=np.float32
-0002a5a0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
-0002a5b0: 2121 7265 6475 6365 2020 7265 6475 6365  !!reduce  reduce
-0002a5c0: 206e 696e 3a20 3220 3120 3c75 6675 6e63   nin: 2 1 <ufunc
-0002a5d0: 2027 6164 6427 3e20 5b61 7272 6179 285b   'add'> [array([
-0002a5e0: 5b33 2c20 342c 2035 5d2c 0d0a 2020 2020  [3, 4, 5],..    
-0002a5f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002a600: 5b36 2c20 372c 2038 5d5d 295d 206f 7574  [6, 7, 8]])] out
-0002a610: 3a20 284e 6f6e 652c 2920 6b77 6172 6773  : (None,) kwargs
-0002a620: 3a20 7b27 6178 6973 273a 204e 6f6e 652c  : {'axis': None,
-0002a630: 2027 6b65 6570 6469 6d73 273a 2054 7275   'keepdims': Tru
-0002a640: 652c 2027 6474 7970 6527 3a20 3c63 6c61  e, 'dtype': <cla
-0002a650: 7373 2027 6e75 6d70 792e 666c 6f61 7433  ss 'numpy.float3
-0002a660: 3227 3e7d 0d0a 2020 2020 2020 2020 2020  2'>}..          
-0002a670: 2020 2320 7265 7375 6c74 7320 5b5b 3333    # results [[33
-0002a680: 2e5d 5d0d 0a20 2020 2020 2020 2020 2020  .]]..           
-0002a690: 2023 204f 7574 5b32 365d 3a20 6172 7261   # Out[26]: arra
-0002a6a0: 7928 5b5b 3333 2e5d 5d2c 2064 7479 7065  y([[33.]], dtype
-0002a6b0: 3d66 6c6f 6174 3332 290d 0a20 2020 2020  =float32)..     
-0002a6c0: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
-0002a6d0: 2121 7265 6475 6365 2022 2c20 6d65 7468  !!reduce ", meth
-0002a6e0: 6f64 2c20 276e 696e 3a27 2c20 7566 756e  od, 'nin:', ufun
-0002a6f0: 632e 6e69 6e2c 2075 6675 6e63 2e6e 6f75  c.nin, ufunc.nou
-0002a700: 742c 2075 6675 6e63 2c20 2061 7267 732c  t, ufunc,  args,
-0002a710: 2027 6f75 743a 272c 206f 7574 7075 7473   'out:', outputs
-0002a720: 2c20 2027 6b77 6172 6773 3a27 2c20 6b77  ,  'kwargs:', kw
-0002a730: 6172 6773 2c27 6e64 696d 272c 2061 7267  args,'ndim', arg
-0002a740: 735b 305d 2e6e 6469 6d29 0d0a 2020 2020  s[0].ndim)..    
-0002a750: 2020 2020 2020 2020 2320 7265 7375 6c74          # result
-0002a760: 4e20 3d20 7375 7065 7228 4661 7374 4172  N = super(FastAr
-0002a770: 7261 792c 2073 656c 6629 2e5f 5f61 7272  ray, self).__arr
-0002a780: 6179 5f75 6675 6e63 5f5f 2875 6675 6e63  ay_ufunc__(ufunc
-0002a790: 2c20 6d65 7468 6f64 2c2a 2a6b 7761 7267  , method,**kwarg
-0002a7a0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-0002a7b0: 2320 7072 696e 7428 2221 2172 6573 756c  # print("!!resul
-0002a7c0: 7420 6e75 6d70 7922 2c20 7265 7375 6c74  t numpy", result
-0002a7d0: 4e2c 2074 7970 6528 7265 7375 6c74 4e29  N, type(resultN)
-0002a7e0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
-0002a7f0: 204e 4f54 453a 0d0a 2020 2020 2020 2020   NOTE:..        
-0002a800: 2020 2020 2320 6c6f 6f6b 2066 6f72 2072      # look for r
-0002a810: 6564 7563 6520 6c6f 6769 6361 6c5f 6f72  educe logical_or
-0002a820: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002a830: 6c6f 6f6b 2066 6f72 2072 6564 7563 655f  look for reduce_
-0002a840: 6c6f 6769 6361 6c5f 616e 6420 2020 2875  logical_and   (u
-0002a850: 7365 6420 7769 7468 206e 702e 666d 696e  sed with np.fmin
-0002a860: 2066 6f72 2069 6e73 7461 6e63 6529 0d0a   for instance)..
-0002a870: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0002a880: 6475 6365 5f66 756e 6320 3d20 6752 6564  duce_func = gRed
-0002a890: 7563 6555 4675 6e63 732e 6765 7428 7566  uceUFuncs.get(uf
-0002a8a0: 756e 632c 204e 6f6e 6529 0d0a 0d0a 2020  unc, None)....  
-0002a8b0: 2020 2020 2020 2320 6368 6563 6b20 6966        # check if
-0002a8c0: 2077 6520 6361 6e20 7072 6f63 6565 6420   we can proceed 
-0002a8d0: 746f 2063 616c 6375 6c61 7465 2061 2066  to calculate a f
-0002a8e0: 6173 7465 7220 7761 790d 0a20 2020 2020  aster way..     
-0002a8f0: 2020 2069 6620 6d65 7468 6f64 203d 3d20     if method == 
-0002a900: 225f 5f63 616c 6c5f 5f22 2061 6e64 2046  "__call__" and F
-0002a910: 6173 7441 7272 6179 2e46 6173 7465 7255  astArray.FasterU
-0002a920: 4675 6e63 2061 6e64 206e 6f74 2074 6f70  Func and not top
-0002a930: 6c65 7665 6c5f 6162 6f72 743a 0d0a 2020  level_abort:..  
-0002a940: 2020 2020 2020 2020 2020 2320 6368 6563            # chec
-0002a950: 6b20 666f 7220 6269 6e61 7279 2075 6675  k for binary ufu
-0002a960: 6e63 0d0a 2020 2020 2020 2020 2020 2020  nc..            
-0002a970: 6966 206c 656e 2861 7267 7329 203d 3d20  if len(args) == 
-0002a980: 3220 616e 6420 7566 756e 632e 6e6f 7574  2 and ufunc.nout
-0002a990: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
-0002a9a0: 2020 2020 2020 2020 2323 2323 2323 2323          ########
-0002a9b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002a9c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002a9d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002a9e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002a9f0: 2323 230d 0a20 2020 2020 2020 2020 2020  ###..           
-0002aa00: 2020 2020 2023 2320 4249 4e41 5259 0d0a       ## BINARY..
-0002aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aa20: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002aa30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002aa40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002aa50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002aa60: 2323 2323 2323 2323 2323 230d 0a20 2020  ###########..   
-0002aa70: 2020 2020 2020 2020 2020 2020 2061 7272               arr
-0002aa80: 6179 5f74 7970 6573 3a20 4c69 7374 5b6e  ay_types: List[n
-0002aa90: 702e 6474 7970 655d 203d 205b 5d0d 0a20  p.dtype] = [].. 
-0002aaa0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0002aab0: 6361 6c61 725f 7479 7065 733a 204c 6973  calar_types: Lis
-0002aac0: 745b 5363 616c 6172 5479 7065 5d20 3d20  t[ScalarType] = 
-0002aad0: 5b5d 0d0a 0d0a 2020 2020 2020 2020 2020  []....          
-0002aae0: 2020 2020 2020 7363 616c 6172 733a 2069        scalars: i
-0002aaf0: 6e74 203d 2030 0d0a 2020 2020 2020 2020  nt = 0..        
-0002ab00: 2020 2020 2020 2020 6162 6f72 743a 2069          abort: i
-0002ab10: 6e74 203d 2030 0d0a 2020 2020 2020 2020  nt = 0..        
-0002ab20: 2020 2020 2020 2020 666f 7220 6172 7220          for arr 
-0002ab30: 696e 2061 7267 733a 0d0a 2020 2020 2020  in args:..      
-0002ab40: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-0002ab50: 7254 7970 6520 3d20 7479 7065 2861 7272  rType = type(arr
-0002ab60: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002ab70: 2020 2020 2020 2069 6620 6172 7254 7970         if arrTyp
-0002ab80: 6520 696e 2053 6361 6c61 7254 7970 653a  e in ScalarType:
-0002ab90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002aba0: 2020 2020 2020 2020 2020 7363 616c 6172            scalar
-0002abb0: 7320 2b3d 2031 0d0a 2020 2020 2020 2020  s += 1..        
-0002abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002abd0: 7363 616c 6172 5f74 7970 6573 2e61 7070  scalar_types.app
-0002abe0: 656e 6428 6172 7254 7970 6529 0d0a 2020  end(arrType)..  
-0002abf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ac00: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0002ac10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ac20: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-0002ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ac40: 2020 2061 7272 6179 5f74 7970 6573 2e61     array_types.a
-0002ac50: 7070 656e 6428 6172 722e 6474 7970 6529  ppend(arr.dtype)
-0002ac60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002ac70: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002ac80: 6368 6563 6b20 666f 7220 6e6f 6e20 636f  check for non co
-0002ac90: 6e74 696e 676f 7573 2061 7272 6179 730d  ntingous arrays.
-0002aca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002acb0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002acc0: 6172 722e 6974 656d 7369 7a65 2021 3d20  arr.itemsize != 
-0002acd0: 6172 722e 7374 7269 6465 735b 305d 3a0d  arr.strides[0]:.
-0002ace0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002acf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ad00: 2061 626f 7274 203d 2031 0d0a 2020 2020   abort = 1..    
-0002ad10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ad20: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-0002ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ad40: 2020 2020 2020 2020 2061 626f 7274 203d           abort =
-0002ad50: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
-0002ad60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ad70: 2320 6361 6e20 6861 7070 656e 2077 6865  # can happen whe
-0002ad80: 6e20 4e6f 6e65 206f 7220 6120 7079 7468  n None or a pyth
-0002ad90: 6f6e 206c 6973 7420 6973 2070 6173 7365  on list is passe
-0002ada0: 640d 0a20 2020 2020 2020 2020 2020 2020  d..             
-0002adb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002adc0: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
-0002add0: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
-0002ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002adf0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-0002ae00: 6622 2a2a 646f 6e74 206b 6e6f 7720 686f  f"**dont know ho
-0002ae10: 7720 746f 2068 616e 646c 6520 6172 7261  w to handle arra
-0002ae20: 7920 7b61 7272 7d20 6172 6773 3a20 7b61  y {arr} args: {a
-0002ae30: 7267 737d 2229 0d0a 0d0a 2020 2020 2020  rgs}")....      
-0002ae40: 2020 2020 2020 2020 2020 6966 2061 626f            if abo
-0002ae50: 7274 203d 3d20 303a 0d0a 2020 2020 2020  rt == 0:..      
-0002ae60: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002ae70: 2073 6361 6c61 7273 203c 2032 3a0d 0a20   scalars < 2:.. 
-0002ae80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ae90: 2020 2020 2020 2069 735f 6c6f 6769 6361         is_logica
-0002aea0: 6c20 3d20 300d 0a20 2020 2020 2020 2020  l = 0..         
-0002aeb0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002aec0: 2063 6865 636b 2066 6f72 2061 6464 2c20   check for add, 
-0002aed0: 7375 622c 206d 756c 2c20 6469 7669 6465  sub, mul, divide
-0002aee0: 2c20 706f 7765 720d 0a20 2020 2020 2020  , power..       
-0002aef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002af00: 2066 6173 745f 6675 6e63 7469 6f6e 203d   fast_function =
-0002af10: 2067 4269 6e61 7279 5546 756e 6373 2e67   gBinaryUFuncs.g
-0002af20: 6574 2875 6675 6e63 2c20 4e6f 6e65 290d  et(ufunc, None).
-0002af30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002af40: 2020 2020 2020 2020 2069 6620 6661 7374           if fast
-0002af50: 5f66 756e 6374 696f 6e20 6973 204e 6f6e  _function is Non
-0002af60: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002af80: 2320 6368 6563 6b20 666f 7220 636f 6d70  # check for comp
-0002af90: 6172 6973 6f6e 2061 6e64 206c 6f67 6963  arison and logic
-0002afa0: 616c 206f 722f 616e 6420 6675 6e63 7469  al or/and functi
-0002afb0: 6f6e 730d 0a20 2020 2020 2020 2020 2020  ons..           
-0002afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002afd0: 2066 6173 745f 6675 6e63 7469 6f6e 203d   fast_function =
-0002afe0: 2067 4269 6e61 7279 4c6f 6769 6361 6c55   gBinaryLogicalU
-0002aff0: 4675 6e63 732e 6765 7428 7566 756e 632c  Funcs.get(ufunc,
-0002b000: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-0002b010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b020: 2020 2020 6966 2066 6173 745f 6675 6e63      if fast_func
-0002b030: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-0002b040: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002b050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b060: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
-0002b070: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
-0002b080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b0a0: 2020 7072 696e 7428 6622 2a2a 6c6f 6769    print(f"**logi
-0002b0b0: 6361 6c20 6675 6e63 7469 6f6e 2063 616c  cal function cal
-0002b0c0: 6c65 6420 7b75 6675 6e63 7d20 6172 6773  led {ufunc} args
-0002b0d0: 3a20 7b61 7267 737d 2229 0d0a 2020 2020  : {args}")..    
-0002b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b0f0: 2020 2020 2020 2020 2020 2020 6973 5f6c              is_l
-0002b100: 6f67 6963 616c 203d 2031 0d0a 2020 2020  ogical = 1..    
-0002b110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b120: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-0002b130: 6c5f 6474 7970 6520 3d20 6e70 2e62 6f6f  l_dtype = np.boo
-0002b140: 6c5f 0d0a 0d0a 2020 2020 2020 2020 2020  l_....          
-0002b150: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002b160: 2066 6173 745f 6675 6e63 7469 6f6e 2069   fast_function i
-0002b170: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-0002b180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b190: 2020 2020 2023 2063 6865 636b 2066 6f72       # check for
-0002b1a0: 2062 6974 7769 7365 2066 756e 6374 696f   bitwise functio
-0002b1b0: 6e73 3f20 2874 6573 7420 7468 6973 290d  ns? (test this).
-0002b1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b1d0: 2020 2020 2020 2020 2020 2020 2066 6173               fas
-0002b1e0: 745f 6675 6e63 7469 6f6e 203d 2067 4269  t_function = gBi
-0002b1f0: 6e61 7279 4269 7477 6973 6555 4675 6e63  naryBitwiseUFunc
-0002b200: 732e 6765 7428 7566 756e 632c 204e 6f6e  s.get(ufunc, Non
-0002b210: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
-0002b220: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002b230: 2066 6173 745f 6675 6e63 7469 6f6e 2069   fast_function i
-0002b240: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-0002b250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b260: 2020 2020 2020 2020 2069 6620 6861 735f           if has_
-0002b270: 6f75 7470 7574 7320 616e 6420 6973 5f6c  outputs and is_l
-0002b280: 6f67 6963 616c 203d 3d20 303a 0d0a 2020  ogical == 0:..  
-0002b290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b2a0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002b2b0: 6861 7665 2074 6f20 636f 6e66 6f72 6d20  have to conform 
-0002b2c0: 746f 206f 7574 7075 740d 0a20 2020 2020  to output..     
-0002b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b2e0: 2020 2020 2020 2020 2020 2066 696e 616c             final
-0002b2f0: 5f64 7479 7065 203d 206f 7574 5f61 7267  _dtype = out_arg
-0002b300: 735b 305d 2e64 7479 7065 0d0a 2020 2020  s[0].dtype..    
-0002b310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b320: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0002b330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b340: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002b350: 6620 6973 5f6c 6f67 6963 616c 203d 3d20  f is_logical == 
-0002b360: 3120 616e 6420 7363 616c 6172 7320 3d3d  1 and scalars ==
-0002b370: 2031 3a0d 0a20 2020 2020 2020 2020 2020   1:..           
-0002b380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b390: 2020 2020 2020 2020 2023 204e 4f54 453a           # NOTE:
-0002b3a0: 2073 6361 6c61 7220 7570 6361 7374 2072   scalar upcast r
-0002b3b0: 756c 6573 202d 2d20 6a75 7374 2061 7070  ules -- just app
-0002b3c0: 6c79 2074 6f20 6c6f 6769 6361 6c73 2073  ly to logicals s
-0002b3d0: 6f20 7468 6174 2061 7272 203c 2035 2064  o that arr < 5 d
-0002b3e0: 6f65 7320 6e6f 7420 7570 6361 7374 3f0d  oes not upcast?.
-0002b3f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b410: 2020 2020 2023 2020 2020 2020 206f 7220       #       or 
-0002b420: 676c 6f62 616c 6c79 2061 7070 6c79 2074  globally apply t
-0002b430: 6869 7320 7275 6c65 2073 6f20 7468 6174  his rule so that
-0002b440: 2061 7272 203d 2061 7272 202b 2035 0d0a   arr = arr + 5..
-0002b450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b470: 2020 2020 2320 6966 2073 6361 6c61 7273      # if scalars
-0002b480: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
-0002b490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b4a0: 2020 2020 2020 2020 2020 2020 2320 7370              # sp
-0002b4b0: 6563 6961 6c20 6361 7365 2068 6176 6520  ecial case have 
-0002b4c0: 746f 2073 6565 2069 6620 7363 616c 6172  to see if scalar
-0002b4d0: 2069 7320 696e 2072 616e 6765 0d0a 2020   is in range..  
-0002b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b500: 2020 6966 2074 7970 6528 6172 6773 5b30    if type(args[0
-0002b510: 5d29 2069 6e20 5363 616c 6172 5479 7065  ]) in ScalarType
-0002b520: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b540: 2020 2020 2020 2020 2020 2073 6361 6c61             scala
-0002b550: 725f 7661 6c20 3d20 6172 6773 5b30 5d0d  r_val = args[0].
-0002b560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b580: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002b590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b5b0: 2020 2020 7363 616c 6172 5f76 616c 203d      scalar_val =
-0002b5c0: 2061 7267 735b 315d 0d0a 0d0a 2020 2020   args[1]....    
-0002b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b5f0: 6669 6e61 6c5f 6474 7970 6520 3d20 6c6f  final_dtype = lo
-0002b600: 6769 6361 6c5f 6669 6e64 5f63 6f6d 6d6f  gical_find_commo
-0002b610: 6e5f 7479 7065 2861 7272 6179 5f74 7970  n_type(array_typ
-0002b620: 6573 2c20 7363 616c 6172 5f74 7970 6573  es, scalar_types
-0002b630: 2c20 7363 616c 6172 5f76 616c 290d 0a0d  , scalar_val)...
-0002b640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b660: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0002b670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b680: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0002b690: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-0002b6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b6b0: 2020 2020 2020 2023 2054 4f44 4f3a 2063         # TODO: c
-0002b6c0: 6865 636b 2066 6f72 2062 7567 2077 6865  heck for bug whe
-0002b6d0: 7265 206e 702e 696e 7433 3220 7479 7065  re np.int32 type
-0002b6e0: 2037 2067 6574 7320 666c 6970 7065 6420   7 gets flipped 
-0002b6f0: 746f 206e 702e 696e 7433 3220 7479 7065  to np.int32 type
-0002b700: 2035 0d0a 2020 2020 2020 2020 2020 2020   5..            
-0002b710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b720: 2020 2020 2020 2020 6966 2073 6361 6c61          if scala
-0002b730: 7273 203d 3d20 3020 616e 6420 6c65 6e28  rs == 0 and len(
-0002b740: 6172 7261 795f 7479 7065 7329 203d 3d20  array_types) == 
-0002b750: 3220 616e 6420 2861 7272 6179 5f74 7970  2 and (array_typ
-0002b760: 6573 5b30 5d20 3d3d 2061 7272 6179 5f74  es[0] == array_t
-0002b770: 7970 6573 5b31 5d29 3a0d 0a20 2020 2020  ypes[1]):..     
-0002b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b7a0: 2020 2066 696e 616c 5f64 7479 7065 203d     final_dtype =
-0002b7b0: 2061 7272 6179 5f74 7970 6573 5b30 5d0d   array_types[0].
-0002b7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b7e0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002b7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b810: 2020 2020 2320 6368 6563 6b20 666f 7220      # check for 
-0002b820: 696e 7420 7363 616c 6172 2061 6761 696e  int scalar again
-0002b830: 7374 2069 6e74 0d0a 2020 2020 2020 2020  st int..        
-0002b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b860: 2320 6275 6720 7768 6572 6520 6e70 2e69  # bug where np.i
-0002b870: 6e74 3820 616e 6420 7468 656e 2061 6464  nt8 and then add
-0002b880: 202b 3139 3939 206f 7220 6c61 7267 6572   +1999 or larger
-0002b890: 206e 756d 6265 722e 2020 6e65 6564 2074   number.  need t
-0002b8a0: 6f20 7570 6361 7374 0d0a 2020 2020 2020  o upcast..      
-0002b8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b8d0: 2020 6966 2073 6361 6c61 7273 203d 3d20    if scalars == 
-0002b8e0: 3120 616e 6420 6172 7261 795f 7479 7065  1 and array_type
-0002b8f0: 735b 305d 2e6e 756d 203c 3d20 3130 3a0d  s[0].num <= 10:.
-0002b900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b920: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002b930: 7479 7065 2861 7267 735b 305d 2920 696e  type(args[0]) in
-0002b940: 2053 6361 6c61 7254 7970 653a 0d0a 2020   ScalarType:..  
-0002b950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b970: 2020 2020 2020 2020 2020 2020 2020 7363                sc
-0002b980: 616c 6172 5f76 616c 203d 2061 7267 735b  alar_val = args[
-0002b990: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
-0002b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b9c0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-0002b9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b9f0: 2020 2020 2020 2073 6361 6c61 725f 7661         scalar_va
-0002ba00: 6c20 3d20 6172 6773 5b31 5d0d 0a0d 0a20  l = args[1].... 
-0002ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba30: 2020 2020 2020 2020 2020 2066 696e 616c             final
-0002ba40: 5f64 7479 7065 203d 206c 6f67 6963 616c  _dtype = logical
-0002ba50: 5f66 696e 645f 636f 6d6d 6f6e 5f74 7970  _find_common_typ
-0002ba60: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-0002ba70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba90: 2020 2020 6172 7261 795f 7479 7065 732c      array_types,
-0002baa0: 2073 6361 6c61 725f 7479 7065 732c 2073   scalar_types, s
-0002bab0: 6361 6c61 725f 7661 6c0d 0a20 2020 2020  calar_val..     
-0002bac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bae0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0002baf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb10: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0002bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb40: 2020 2020 2066 696e 616c 5f64 7479 7065       final_dtype
-0002bb50: 203d 206e 702e 6669 6e64 5f63 6f6d 6d6f   = np.find_commo
-0002bb60: 6e5f 7479 7065 2861 7272 6179 5f74 7970  n_type(array_typ
-0002bb70: 6573 2c20 7363 616c 6172 5f74 7970 6573  es, scalar_types
-0002bb80: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0002bb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bba0: 2023 2069 6620 7765 2061 7265 2061 6464   # if we are add
-0002bbb0: 696e 6720 7477 6f20 7374 7269 6e67 7320  ing two strings 
-0002bbc0: 6f72 2075 6e69 636f 6465 2c20 7370 6563  or unicode, spec
-0002bbd0: 6961 6c20 6361 7365 0d0a 2020 2020 2020  ial case..      
-0002bbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bbf0: 2020 2020 2020 2320 6966 2077 6520 7468        # if we th
-0002bc00: 696e 6b20 7468 6520 6669 6e61 6c20 6474  ink the final dt
-0002bc10: 7970 6520 6973 2061 6e20 6f62 6a65 6374  ype is an object
-0002bc20: 2c20 6368 6563 6b20 6966 2074 6869 7320  , check if this 
-0002bc30: 6973 2072 6561 6c6c 7920 7477 6f20 7374  is really two st
-0002bc40: 7269 6e67 730d 0a20 2020 2020 2020 2020  rings..         
-0002bc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bc60: 2020 2069 6620 6661 7374 5f66 756e 6374     if fast_funct
-0002bc70: 696f 6e20 3d3d 204d 4154 485f 4f50 4552  ion == MATH_OPER
-0002bc80: 4154 494f 4e2e 4144 4420 616e 6420 280d  ATION.ADD and (.
-0002bc90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002bca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bcb0: 2061 7272 6179 5f74 7970 6573 5b30 5d2e   array_types[0].
-0002bcc0: 6e75 6d20 3d3d 2031 3820 6f72 2061 7272  num == 18 or arr
-0002bcd0: 6179 5f74 7970 6573 5b30 5d2e 6e75 6d20  ay_types[0].num 
-0002bce0: 3d3d 2031 390d 0a20 2020 2020 2020 2020  == 19..         
-0002bcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bd00: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
-0002bd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bd20: 2020 2020 2020 2023 2061 7373 756d 6520         # assume 
-0002bd30: 6164 6469 7469 6f6e 206f 6620 7477 6f20  addition of two 
-0002bd40: 7374 7269 6e67 730d 0a20 2020 2020 2020  strings..       
-0002bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bd60: 2020 2020 2020 2020 2066 696e 616c 5f64           final_d
-0002bd70: 7479 7065 203d 2061 7272 6179 5f74 7970  type = array_typ
-0002bd80: 6573 5b30 5d0d 0a20 2020 2020 2020 2020  es[0]..         
-0002bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bda0: 2020 2020 2020 2069 6620 7363 616c 6172         if scalar
-0002bdb0: 7320 213d 2030 3a0d 0a20 2020 2020 2020  s != 0:..       
-0002bdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bdd0: 2020 2020 2020 2020 2020 2020 2023 2077               # w
-0002bde0: 6520 6861 7665 2061 2073 6361 6c61 722e  e have a scalar.
-0002bdf0: 2e2e 206d 616b 6520 7375 7265 2077 6520  .. make sure we 
-0002be00: 636f 6e76 6572 7420 6974 0d0a 2020 2020  convert it..    
-0002be10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023060: 2020 2063 6f75 6e74 202d 3d20 310d 0a20     count -= 1.. 
+00023070: 2020 2020 2020 2020 2020 2023 2075 6e73             # uns
+00023080: 6967 6e65 6420 696e 7420 7573 6573 2068  igned int uses h
+00023090: 6967 6820 6e75 6d62 6572 2061 7320 7365  igh number as se
+000230a0: 6e74 696e 656c 0d0a 2020 2020 2020 2020  ntinel..        
+000230b0: 2020 2020 656c 6966 2073 656c 662e 6474      elif self.dt
+000230c0: 7970 652e 6368 6172 2069 6e20 4e75 6d70  ype.char in Nump
+000230d0: 7943 6861 7254 7970 6573 2e55 6e73 6967  yCharTypes.Unsig
+000230e0: 6e65 6449 6e74 6567 6572 3a0d 0a20 2020  nedInteger:..   
+000230f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00023100: 756e 5b63 6f75 6e74 202d 2031 5d20 3d3d  un[count - 1] ==
+00023110: 2069 6e76 3a0d 0a20 2020 2020 2020 2020   inv:..         
+00023120: 2020 2020 2020 2020 2020 2063 6f75 6e74             count
+00023130: 202d 3d20 310d 0a20 2020 2020 2020 2020   -= 1..         
+00023140: 2020 2023 2061 6c6c 206f 7468 6572 2073     # all other s
+00023150: 656e 7469 6e65 6c73 2061 7265 206c 6f77  entinels are low
+00023160: 6573 7420 6e75 6d62 6572 0d0a 2020 2020  est number..    
+00023170: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00023180: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00023190: 6620 756e 5b30 5d20 3d3d 2069 6e76 3a0d  f un[0] == inv:.
+000231a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000231b0: 2020 2020 2063 6f75 6e74 202d 3d20 310d       count -= 1.
+000231c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000231d0: 636f 756e 740d 0a0d 0a20 2020 2023 202d  count....    # -
+000231e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000231f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023210: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00023220: 7365 6172 6368 736f 7274 6564 2873 656c  searchsorted(sel
+00023230: 662c 2076 2c20 7369 6465 3d22 6c65 6674  f, v, side="left
+00023240: 222c 2073 6f72 7465 723d 4e6f 6e65 2920  ", sorter=None) 
+00023250: 2d3e 206e 702e 6e75 6d62 6572 3a0d 0a20  -> np.number:.. 
+00023260: 2020 2020 2020 2072 6574 7572 6e20 5f73         return _s
+00023270: 6561 7263 6873 6f72 7465 6428 7365 6c66  earchsorted(self
+00023280: 2c20 762c 2073 6964 653d 7369 6465 2c20  , v, side=side, 
+00023290: 736f 7274 6572 3d73 6f72 7465 7229 0d0a  sorter=sorter)..
+000232a0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+000232b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000232c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000232d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000232e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000232f0: 2d2d 2d0d 0a20 2020 2064 6566 206d 6170  ---..    def map
+00023300: 5f6f 6c64 2873 656c 662c 206e 7064 6963  _old(self, npdic
+00023310: 743a 2064 6963 7429 3a0d 0a20 2020 2020  t: dict):..     
+00023320: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00023330: 4578 616d 706c 650d 0a20 2020 2020 2020  Example..       
+00023340: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+00023350: 2020 3e3e 3e20 6420 3d20 7b31 3a31 302c    >>> d = {1:10,
+00023360: 2032 3a32 307d 0d0a 2020 2020 2020 2020   2:20}..        
+00023370: 3e3e 3e20 6461 745b 2763 275d 203d 2064  >>> dat['c'] = d
+00023380: 6174 2e61 2e6d 6170 2864 290d 0a20 2020  at.a.map(d)..   
+00023390: 2020 2020 203e 3e3e 2070 7269 6e74 2864       >>> print(d
+000233a0: 6174 290d 0a20 2020 2020 2020 2020 2020  at)..           
+000233b0: 6120 2062 2020 2063 6220 2020 630d 0a20  a  b   cb   c.. 
+000233c0: 2020 2020 2020 2030 2020 3120 2030 2020         0  1  0  
+000233d0: 302e 3020 2031 300d 0a20 2020 2020 2020  0.0  10..       
+000233e0: 2031 2020 3120 2031 2020 312e 3020 2031   1  1  1  1.0  1
+000233f0: 300d 0a20 2020 2020 2020 2032 2020 3120  0..        2  1 
+00023400: 2032 2020 332e 3020 2031 300d 0a20 2020   2  3.0  10..   
+00023410: 2020 2020 2033 2020 3220 2033 2020 352e       3  2  3  5.
+00023420: 3020 2032 300d 0a20 2020 2020 2020 2034  0  20..        4
+00023430: 2020 3220 2034 2020 372e 3020 2032 300d    2  4  7.0  20.
+00023440: 0a20 2020 2020 2020 2035 2020 3220 2035  .        5  2  5
+00023450: 2020 392e 3020 2032 300d 0a20 2020 2020    9.0  20..     
+00023460: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00023470: 6f75 7441 7272 6179 203d 2073 656c 662e  outArray = self.
+00023480: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+00023490: 666f 7220 6b2c 2076 2069 6e20 6e70 6469  for k, v in npdi
+000234a0: 6374 2e69 7465 6d73 2829 3a0d 0a20 2020  ct.items():..   
+000234b0: 2020 2020 2020 2020 206f 7574 4172 7261           outArra
+000234c0: 795b 7365 6c66 203d 3d20 6b5d 203d 2076  y[self == k] = v
+000234d0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000234e0: 206f 7574 4172 7261 790d 0a0d 0a20 2020   outArray....   
+000234f0: 2064 6566 206d 6170 2873 656c 662c 206e   def map(self, n
+00023500: 7064 6963 743a 2064 6963 7429 202d 3e20  pdict: dict) -> 
+00023510: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
+00023520: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00023530: 204e 6f74 6573 0d0a 2020 2020 2020 2020   Notes..        
+00023540: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2055  -----..        U
+00023550: 7365 7320 6973 6d65 6d62 6572 2061 6e64  ses ismember and
+00023560: 2063 616e 2068 616e 646c 6520 6c61 7267   can handle larg
+00023570: 6520 6469 6374 696f 6e61 7269 6573 0d0a  e dictionaries..
+00023580: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00023590: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+000235a0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+000235b0: 3e20 613d 6172 616e 6765 2833 290d 0a20  > a=arange(3).. 
+000235c0: 2020 2020 2020 203e 3e3e 2061 2e6d 6170         >>> a.map
+000235d0: 287b 313a 2027 6127 2c20 323a 2762 272c  ({1: 'a', 2:'b',
+000235e0: 2033 3a27 6327 7d29 0d0a 2020 2020 2020   3:'c'})..      
+000235f0: 2020 4661 7374 4172 7261 7928 5b27 272c    FastArray(['',
+00023600: 2027 6127 2c20 2762 275d 2c20 6474 7970   'a', 'b'], dtyp
+00023610: 653d 273c 5531 2729 0d0a 2020 2020 2020  e='<U1')..      
+00023620: 2020 3e3e 3e20 613d 6172 616e 6765 2833    >>> a=arange(3
+00023630: 292b 310d 0a20 2020 2020 2020 203e 3e3e  )+1..        >>>
+00023640: 2061 2e6d 6170 287b 313a 2027 6127 2c20   a.map({1: 'a', 
+00023650: 323a 2762 272c 2033 3a27 6327 7d29 0d0a  2:'b', 3:'c'})..
+00023660: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00023670: 7928 5b27 6127 2c20 2762 272c 2027 6327  y(['a', 'b', 'c'
+00023680: 5d2c 2064 7479 7065 3d27 3c55 3127 290d  ], dtype='<U1').
+00023690: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+000236a0: 2020 2020 2020 6f72 6967 203d 2046 6173        orig = Fas
+000236b0: 7441 7272 6179 285b 2a6e 7064 6963 745d  tArray([*npdict]
+000236c0: 2c20 756e 6963 6f64 653d 5472 7565 290d  , unicode=True).
+000236d0: 0a20 2020 2020 2020 2072 6570 6c61 6365  .        replace
+000236e0: 203d 2046 6173 7441 7272 6179 285b 2a6e   = FastArray([*n
+000236f0: 7064 6963 742e 7661 6c75 6573 2829 5d2c  pdict.values()],
+00023700: 2075 6e69 636f 6465 3d54 7275 6529 0d0a   unicode=True)..
+00023710: 2020 2020 2020 2020 6f75 7441 7272 6179          outArray
+00023720: 203d 2073 656c 662e 6669 6c6c 5f69 6e76   = self.fill_inv
+00023730: 616c 6964 2873 656c 662e 7368 6170 652c  alid(self.shape,
+00023740: 2064 7479 7065 3d72 6570 6c61 6365 2e64   dtype=replace.d
+00023750: 7479 7065 2c20 696e 706c 6163 653d 4661  type, inplace=Fa
+00023760: 6c73 6529 0d0a 2020 2020 2020 2020 666f  lse)..        fo
+00023770: 756e 642c 2069 6478 203d 2069 736d 656d  und, idx = ismem
+00023780: 6265 7228 7365 6c66 2c20 6f72 6967 290d  ber(self, orig).
+00023790: 0a20 2020 2020 2020 206f 7574 4172 7261  .        outArra
+000237a0: 795b 666f 756e 645d 203d 2072 6570 6c61  y[found] = repla
+000237b0: 6365 5b69 6478 5b66 6f75 6e64 5d5d 0d0a  ce[idx[found]]..
+000237c0: 2020 2020 2020 2020 7265 7475 726e 206f          return o
+000237d0: 7574 4172 7261 790d 0a0d 0a20 2020 2023  utArray....    #
+000237e0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+000237f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
+00023830: 2020 6465 6620 7368 6966 7428 7365 6c66    def shift(self
+00023840: 2c20 7065 7269 6f64 733d 312c 2069 6e76  , periods=1, inv
+00023850: 616c 6964 3d4e 6f6e 6529 202d 3e20 4661  alid=None) -> Fa
+00023860: 7374 4172 7261 793a 0d0a 2020 2020 2020  stArray:..      
+00023870: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
+00023880: 6574 7572 6e20 6120 7368 6966 7465 6420  eturn a shifted 
+00023890: 6046 6173 7441 7272 6179 602e 2053 7061  `FastArray`. Spa
+000238a0: 6365 7320 6174 2065 6974 6865 7220 656e  ces at either en
+000238b0: 6420 2866 726f 6d20 7368 6966 7469 6e67  d (from shifting
+000238c0: 2920 6172 6520 6669 6c6c 6564 2077 6974  ) are filled wit
+000238d0: 6820 696e 7661 6c69 6420 7661 6c75 6573  h invalid values
+000238e0: 2062 6173 6564 206f 6e20 7468 6520 696e   based on the in
+000238f0: 7075 7420 6172 7261 7927 7320 6461 7461  put array's data
+00023900: 2074 7970 652e 0d0a 0d0a 2020 2020 2020   type.....      
+00023910: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00023920: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00023930: 0d0a 2020 2020 2020 2020 7065 7269 6f64  ..        period
+00023940: 733a 2069 6e74 2c20 6465 6661 756c 7420  s: int, default 
+00023950: 310d 0a20 2020 2020 2020 2020 2020 204e  1..            N
+00023960: 756d 6265 7220 6f66 2065 6c65 6d65 6e74  umber of element
+00023970: 2070 6f73 6974 696f 6e73 2074 6f20 7368   positions to sh
+00023980: 6966 7420 7269 6768 7420 2869 6620 706f  ift right (if po
+00023990: 7369 7469 7665 2920 6f72 206c 6566 7420  sitive) or left 
+000239a0: 2869 6620 6e65 6761 7469 7665 292e 0d0a  (if negative)...
+000239b0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+000239c0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+000239d0: 2d2d 0d0a 2020 2020 2020 2020 4120 7368  --..        A sh
+000239e0: 6966 7465 6420 6046 6173 7441 7272 6179  ifted `FastArray
+000239f0: 602e 2053 7061 6365 7320 6174 2065 6974  `. Spaces at eit
+00023a00: 6865 7220 656e 6420 2866 726f 6d20 7368  her end (from sh
+00023a10: 6966 7469 6e67 2920 6172 6520 6669 6c6c  ifting) are fill
+00023a20: 6564 2077 6974 6820 696e 7661 6c69 6420  ed with invalid 
+00023a30: 7661 6c75 6573 2062 6173 6564 206f 6e20  values based on 
+00023a40: 7468 6520 696e 7075 7420 6172 7261 7927  the input array'
+00023a50: 7320 6461 7461 2074 7970 652e 0d0a 0d0a  s data type.....
+00023a60: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
+00023a70: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00023a80: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
+00023a90: 4172 7261 792e 6469 6666 203a 2052 6574  Array.diff : Ret
+00023aa0: 7572 6e73 2061 2060 4661 7374 4172 7261  urns a `FastArra
+00023ab0: 7960 2063 6f6e 7461 696e 696e 6720 7468  y` containing th
+00023ac0: 6520 6469 6666 6572 656e 6365 7320 6265  e differences be
+00023ad0: 7477 6565 6e20 6164 6a61 6365 6e74 2069  tween adjacent i
+00023ae0: 6e70 7574 2061 7272 6179 2076 616c 7565  nput array value
+00023af0: 732e 0d0a 2020 2020 2020 2020 2e43 6174  s...        .Cat
+00023b00: 6567 6f72 6963 616c 2e73 6869 6674 203a  egorical.shift :
+00023b10: 2053 6869 6674 7320 7661 6c75 6573 2069   Shifts values i
+00023b20: 6e20 7468 6520 602e 4361 7465 676f 7269  n the `.Categori
+00023b30: 6361 6c60 2062 7920 6120 7370 6563 6966  cal` by a specif
+00023b40: 6965 6420 6e75 6d62 6572 206f 6620 7065  ied number of pe
+00023b50: 7269 6f64 732e 0d0a 0d0a 2020 2020 2020  riods.....      
+00023b60: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
+00023b70: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+00023b80: 2020 2020 2020 5368 6966 7420 6172 7261        Shift arra
+00023b90: 7920 656c 656d 656e 7473 206f 6e65 2070  y elements one p
+00023ba0: 6f73 6974 696f 6e20 746f 2074 6865 2072  osition to the r
+00023bb0: 6967 6874 3a0d 0a0d 0a20 2020 2020 2020  ight:....       
+00023bc0: 203e 3e3e 2061 3d72 742e 4641 285b 302c   >>> a=rt.FA([0,
+00023bd0: 2032 2c20 342c 2038 2c20 3136 2c20 3332   2, 4, 8, 16, 32
+00023be0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+00023bf0: 610d 0a20 2020 2020 2020 2046 6173 7441  a..        FastA
+00023c00: 7272 6179 285b 2030 2c20 2032 2c20 2034  rray([ 0,  2,  4
+00023c10: 2c20 2038 2c20 3136 2c20 3332 5d29 0d0a  ,  8, 16, 32])..
+00023c20: 2020 2020 2020 2020 3e3e 3e20 612e 7368          >>> a.sh
+00023c30: 6966 7428 290d 0a20 2020 2020 2020 2046  ift()..        F
+00023c40: 6173 7441 7272 6179 285b 2d32 3134 3734  astArray([-21474
+00023c50: 3833 3634 382c 2020 2020 2020 2020 2020  83648,          
+00023c60: 2030 2c20 2020 2020 2020 2020 2020 322c   0,           2,
+00023c70: 2020 2020 2020 2020 2020 2034 2c0d 0a20             4,.. 
+00023c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023c90: 2020 2020 2020 2020 2020 2020 382c 2020              8,  
+00023ca0: 2020 2020 2020 2020 3136 5d29 0d0a 0d0a          16])....
+00023cb0: 2020 2020 2020 2020 5368 6966 7420 6172          Shift ar
+00023cc0: 7261 7920 656c 656d 656e 7473 2074 776f  ray elements two
+00023cd0: 2070 6f73 6974 696f 6e73 2074 6f20 7468   positions to th
+00023ce0: 6520 6c65 6674 3a0d 0a0d 0a20 2020 2020  e left:....     
+00023cf0: 2020 203e 3e3e 2061 2e73 6869 6674 282d     >>> a.shift(-
+00023d00: 3229 0d0a 2020 2020 2020 2020 3e3e 3e20  2)..        >>> 
+00023d10: 4661 7374 4172 7261 7928 5b20 2020 2020  FastArray([     
+00023d20: 2020 2020 2034 2c20 2020 2020 2020 2020       4,         
+00023d30: 2020 382c 2020 2020 2020 2020 2020 3136    8,          16
+00023d40: 2c20 2020 2020 2020 2020 2033 322c 0d0a  ,          32,..
+00023d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023d60: 2020 202d 3231 3437 3438 3336 3438 2c20     -2147483648, 
+00023d70: 2d32 3134 3734 3833 3634 385d 290d 0a0d  -2147483648])...
+00023d80: 0a20 2020 2020 2020 2053 7065 6369 6679  .        Specify
+00023d90: 2061 2073 6869 6674 2076 616c 7565 2067   a shift value g
+00023da0: 7265 6174 6572 2074 6861 6e20 7468 6520  reater than the 
+00023db0: 6172 7261 7920 6c65 6e67 7468 3a0d 0a0d  array length:...
+00023dc0: 0a20 2020 2020 2020 203e 3e3e 2061 2e73  .        >>> a.s
+00023dd0: 6869 6674 2831 3029 0d0a 2020 2020 2020  hift(10)..      
+00023de0: 2020 4661 7374 4172 7261 7928 5b2d 3231    FastArray([-21
+00023df0: 3437 3438 3336 3438 2c20 2d32 3134 3734  47483648, -21474
+00023e00: 3833 3634 382c 202d 3231 3437 3438 3336  83648, -21474836
+00023e10: 3438 2c20 2d32 3134 3734 3833 3634 382c  48, -2147483648,
+00023e20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00023e30: 2020 2020 202d 3231 3437 3438 3336 3438       -2147483648
+00023e40: 2c20 2d32 3134 3734 3833 3634 385d 290d  , -2147483648]).
+00023e50: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
+00023e60: 2020 2020 2020 2020 6966 2070 6572 696f          if perio
+00023e70: 6473 203d 3d20 303a 0d0a 2020 2020 2020  ds == 0:..      
+00023e80: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00023e90: 660d 0a0d 0a20 2020 2020 2020 2069 6620  f....        if 
+00023ea0: 696e 7661 6c69 6420 6973 204e 6f6e 653a  invalid is None:
+00023eb0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00023ec0: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
+00023ed0: 2c20 5479 7065 5265 6769 7374 6572 2e43  , TypeRegister.C
+00023ee0: 6174 6567 6f72 6963 616c 293a 0d0a 2020  ategorical):..  
+00023ef0: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00023f00: 7661 6c69 6420 3d20 300d 0a20 2020 2020  valid = 0..     
+00023f10: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00023f20: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00023f30: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00023f40: 2020 2020 2020 2020 696e 7661 6c69 6420          invalid 
+00023f50: 3d20 494e 5641 4c49 445f 4449 4354 5b73  = INVALID_DICT[s
+00023f60: 656c 662e 6474 7970 652e 6e75 6d5d 0d0a  elf.dtype.num]..
+00023f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023f80: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+00023f90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00023fa0: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
+00023fb0: 6545 7272 6f72 2866 2273 6869 6674 2064  eError(f"shift d
+00023fc0: 6f65 7320 6e6f 7420 7375 7070 6f72 7420  oes not support 
+00023fd0: 7468 6520 6474 7970 6520 7b73 656c 662e  the dtype {self.
+00023fe0: 6474 7970 652e 6e61 6d65 2172 7d22 290d  dtype.name!r}").
+00023ff0: 0a0d 0a20 2020 2020 2020 2023 2077 6520  ...        # we 
+00024000: 6b6e 6f77 2074 6861 7420 7468 6973 2069  know that this i
+00024010: 7320 6120 7369 6d70 6c65 2076 6563 746f  s a simple vecto
+00024020: 723a 2073 6861 7065 203d 3d20 286c 656e  r: shape == (len
+00024030: 2c20 290d 0a20 2020 2020 2020 2023 2054  , )..        # T
+00024040: 4f44 4f3a 2067 6574 2072 6563 7963 6c65  ODO: get recycle
+00024050: 640d 0a20 2020 2020 2020 2074 656d 7020  d..        temp 
+00024060: 3d20 656d 7074 795f 6c69 6b65 2873 656c  = empty_like(sel
+00024070: 6629 0d0a 2020 2020 2020 2020 6966 2061  f)..        if a
+00024080: 6273 2870 6572 696f 6473 2920 3e3d 206c  bs(periods) >= l
+00024090: 656e 2873 656c 6629 3a0d 0a20 2020 2020  en(self):..     
+000240a0: 2020 2020 2020 2074 656d 702e 6669 6c6c         temp.fill
+000240b0: 2869 6e76 616c 6964 290d 0a20 2020 2020  (invalid)..     
+000240c0: 2020 2065 6c69 6620 7065 7269 6f64 7320     elif periods 
+000240d0: 3e20 303a 0d0a 2020 2020 2020 2020 2020  > 0:..          
+000240e0: 2020 7465 6d70 5b3a 7065 7269 6f64 735d    temp[:periods]
+000240f0: 203d 2069 6e76 616c 6964 0d0a 2020 2020   = invalid..    
+00024100: 2020 2020 2020 2020 7465 6d70 5b70 6572          temp[per
+00024110: 696f 6473 3a5d 203d 2073 656c 665b 3a2d  iods:] = self[:-
+00024120: 7065 7269 6f64 735d 0d0a 2020 2020 2020  periods]..      
+00024130: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00024140: 2020 2020 2074 656d 705b 3a70 6572 696f       temp[:perio
+00024150: 6473 5d20 3d20 7365 6c66 5b2d 7065 7269  ds] = self[-peri
+00024160: 6f64 733a 5d0d 0a20 2020 2020 2020 2020  ods:]..         
+00024170: 2020 2074 656d 705b 7065 7269 6f64 733a     temp[periods:
+00024180: 5d20 3d20 696e 7661 6c69 640d 0a0d 0a20  ] = invalid.... 
+00024190: 2020 2020 2020 2023 2074 6f20 7265 7772         # to rewr
+000241a0: 6170 2063 6174 6567 6f72 6963 616c 7320  ap categoricals 
+000241b0: 6f72 2064 6174 656c 696b 650d 0a20 2020  or datelike..   
+000241c0: 2020 2020 2069 6620 6861 7361 7474 7228       if hasattr(
+000241d0: 7365 6c66 2c20 226e 6577 636c 6173 7366  self, "newclassf
+000241e0: 726f 6d69 6e73 7461 6e63 6522 293a 0d0a  rominstance"):..
+000241f0: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
+00024200: 203d 2073 656c 662e 6e65 7763 6c61 7373   = self.newclass
+00024210: 6672 6f6d 696e 7374 616e 6365 2874 656d  frominstance(tem
+00024220: 702c 2073 656c 6629 0d0a 0d0a 2020 2020  p, self)....    
+00024230: 2020 2020 7265 7475 726e 2074 656d 700d      return temp.
+00024240: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+00024250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024280: 0d0a 2020 2020 6465 6620 5f69 6e74 6572  ..    def _inter
+00024290: 6e61 6c5f 7365 6c66 5f63 6f6d 7061 7265  nal_self_compare
+000242a0: 2873 656c 662c 206d 6174 685f 6f70 2c20  (self, math_op, 
+000242b0: 7065 7269 6f64 733d 312c 2066 616e 6379  periods=1, fancy
+000242c0: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
+000242d0: 2020 2222 2269 6e74 6572 6e61 6c20 726f    """internal ro
+000242e0: 7574 696e 6520 7573 6564 2066 6f72 2064  utine used for d
+000242f0: 6966 6665 7273 2061 6e64 2074 7261 6e73  iffers and trans
+00024300: 6974 696f 6e73 2222 220d 0a20 2020 2020  itions"""..     
+00024310: 2020 2072 6573 756c 7420 3d20 656d 7074     result = empt
+00024320: 795f 6c69 6b65 2873 656c 662c 2064 7479  y_like(self, dty
+00024330: 7065 3d6e 702e 626f 6f6c 5f29 0d0a 0d0a  pe=np.bool_)....
+00024340: 2020 2020 2020 2020 6966 2070 6572 696f          if perio
+00024350: 6473 203d 3d20 303a 0d0a 2020 2020 2020  ds == 0:..      
+00024360: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00024370: 6545 7272 6f72 2822 7065 7269 6f64 7320  eError("periods 
+00024380: 6f66 2030 2069 7320 696e 7661 6c69 6420  of 0 is invalid 
+00024390: 666f 7220 7472 616e 7369 7469 6f6e 7322  for transitions"
+000243a0: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
+000243b0: 7065 7269 6f64 7320 3e20 303a 0d0a 2020  periods > 0:..  
+000243c0: 2020 2020 2020 2020 2020 5479 7065 5265            TypeRe
+000243d0: 6769 7374 6572 2e4d 6174 684c 6564 6765  gister.MathLedge
+000243e0: 722e 5f42 4153 4943 4d41 5448 5f54 574f  r._BASICMATH_TWO
+000243f0: 5f49 4e50 5554 5328 0d0a 2020 2020 2020  _INPUTS(..      
+00024400: 2020 2020 2020 2020 2020 2873 656c 665b            (self[
+00024410: 7065 7269 6f64 733a 5d2c 2073 656c 665b  periods:], self[
+00024420: 3a2d 7065 7269 6f64 735d 2c20 7265 7375  :-periods], resu
+00024430: 6c74 5b70 6572 696f 6473 3a5d 292c 206d  lt[periods:]), m
+00024440: 6174 685f 6f70 2c20 300d 0a20 2020 2020  ath_op, 0..     
+00024450: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00024460: 2020 2020 2020 2320 6669 6c6c 2075 7066        # fill upf
+00024470: 726f 6e74 2077 6974 6820 696e 7661 6c69  ront with invali
+00024480: 6473 0d0a 2020 2020 2020 2020 2020 2020  ds..            
+00024490: 7265 7375 6c74 5b3a 7065 7269 6f64 735d  result[:periods]
+000244a0: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
+000244b0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+000244c0: 2020 2020 2054 7970 6552 6567 6973 7465       TypeRegiste
+000244d0: 722e 4d61 7468 4c65 6467 6572 2e5f 4241  r.MathLedger._BA
+000244e0: 5349 434d 4154 485f 5457 4f5f 494e 5055  SICMATH_TWO_INPU
+000244f0: 5453 280d 0a20 2020 2020 2020 2020 2020  TS(..           
+00024500: 2020 2020 2028 7365 6c66 5b3a 7065 7269       (self[:peri
+00024510: 6f64 735d 2c20 7365 6c66 5b2d 7065 7269  ods], self[-peri
+00024520: 6f64 733a 5d2c 2072 6573 756c 745b 3a70  ods:], result[:p
+00024530: 6572 696f 6473 5d29 2c20 6d61 7468 5f6f  eriods]), math_o
+00024540: 702c 2030 0d0a 2020 2020 2020 2020 2020  p, 0..          
+00024550: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+00024560: 2023 2066 696c 6c20 6261 636b 2077 6974   # fill back wit
+00024570: 6820 696e 7661 6c69 6473 2028 7065 7269  h invalids (peri
+00024580: 6f64 7320 6973 206e 6567 6174 6976 6529  ods is negative)
+00024590: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000245a0: 7375 6c74 5b70 6572 696f 6473 3a5d 203d  sult[periods:] =
+000245b0: 2046 616c 7365 0d0a 0d0a 2020 2020 2020   False....      
+000245c0: 2020 6966 2066 616e 6379 3a0d 0a20 2020    if fancy:..   
+000245d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000245e0: 626f 6f6c 5f74 6f5f 6661 6e63 7928 7265  bool_to_fancy(re
+000245f0: 7375 6c74 290d 0a20 2020 2020 2020 2072  sult)..        r
+00024600: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
+00024610: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00024620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+00024650: 2020 2064 6566 2064 6966 6665 7273 2873     def differs(s
+00024660: 656c 662c 2070 6572 696f 6473 3d31 2c20  elf, periods=1, 
+00024670: 6661 6e63 793d 4661 6c73 6529 202d 3e20  fancy=False) -> 
+00024680: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
+00024690: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000246a0: 2049 6465 6e74 6966 7920 6172 7261 7920   Identify array 
+000246b0: 7661 6c75 6573 2074 6861 7420 6172 6520  values that are 
+000246c0: 7468 6520 7361 6d65 2061 7320 6164 6a61  the same as adja
+000246d0: 6365 6e74 2076 616c 7565 732e 0d0a 0d0a  cent values.....
+000246e0: 2020 2020 2020 2020 4f75 7470 7574 2061          Output a
+000246f0: 7272 6179 2076 616c 7565 7320 6172 6520  rray values are 
+00024700: 7365 7420 746f 2060 5472 7565 6020 666f  set to `True` fo
+00024710: 7220 6571 7569 7661 6c65 6e74 2076 616c  r equivalent val
+00024720: 7565 732e 2052 6574 7572 6e73 2061 2062  ues. Returns a b
+00024730: 6f6f 6c65 616e 2060 4661 7374 4172 7261  oolean `FastArra
+00024740: 7960 206f 7220 6120 6661 6e63 7920 696e  y` or a fancy in
+00024750: 6465 782e 0d0a 0d0a 2020 2020 2020 2020  dex.....        
+00024760: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+00024770: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+00024780: 2020 2020 2020 2020 7065 7269 6f64 733a          periods:
+00024790: 2069 6e74 2c20 6465 6661 756c 7420 310d   int, default 1.
+000247a0: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+000247b0: 206e 756d 6265 7220 6f66 2061 7272 6179   number of array
+000247c0: 2065 6c65 6d65 6e74 2070 6f73 6974 696f   element positio
+000247d0: 6e73 2074 6f20 6c6f 6f6b 2062 6568 696e  ns to look behin
+000247e0: 6420 2870 6f73 6974 6976 6520 6e75 6d62  d (positive numb
+000247f0: 6572 2920 6f72 206c 6f6f 6b20 6168 6561  er) or look ahea
+00024800: 6420 286e 6567 6174 6976 6520 6e75 6d62  d (negative numb
+00024810: 6572 2920 666f 7220 636f 6d70 6172 6973  er) for comparis
+00024820: 6f6e 2e0d 0a20 2020 2020 2020 2066 616e  on...        fan
+00024830: 6379 3a20 626f 6f6c 2c20 6465 6661 756c  cy: bool, defaul
+00024840: 7420 4661 6c73 650d 0a20 2020 2020 2020  t False..       
+00024850: 2020 2020 2060 4661 6c73 6560 2072 6574       `False` ret
+00024860: 7572 6e73 2061 2062 6f6f 6c65 616e 2061  urns a boolean a
+00024870: 7272 6179 2061 6e64 2060 5472 7565 6020  rray and `True` 
+00024880: 7265 7475 726e 7320 6120 6661 6e63 7920  returns a fancy 
+00024890: 696e 6465 782e 0d0a 0d0a 2020 2020 2020  index.....      
+000248a0: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
+000248b0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
+000248c0: 2020 2020 4661 7374 4172 7261 790d 0a20      FastArray.. 
+000248d0: 2020 2020 2020 2020 2020 2041 2062 6f6f             A boo
+000248e0: 6c65 616e 2060 4661 7374 4172 7261 7960  lean `FastArray`
+000248f0: 206f 7220 6120 6661 6e63 7920 696e 6465   or a fancy inde
+00024900: 7820 7468 6174 2069 6465 6e74 6966 6965  x that identifie
+00024910: 7320 6571 7569 7661 6c65 6e74 2065 6c65  s equivalent ele
+00024920: 6d65 6e74 7320 696e 2074 6865 2069 6e70  ments in the inp
+00024930: 7574 2061 7272 6179 2e0d 0a0d 0a20 2020  ut array.....   
+00024940: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+00024950: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00024960: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00024970: 6179 2e74 7261 6e73 6974 696f 6e73 203a  ay.transitions :
+00024980: 2049 6465 6e74 6966 7920 6e6f 6e65 7175   Identify nonequ
+00024990: 6976 616c 656e 7420 6974 656d 7320 696e  ivalent items in
+000249a0: 2074 6865 2069 6e70 7574 2061 7272 6179   the input array
+000249b0: 2061 6e64 2072 6574 7572 6e20 6120 626f   and return a bo
+000249c0: 6f6c 6561 6e20 6046 6173 7441 7272 6179  olean `FastArray
+000249d0: 6020 6f72 2061 2066 616e 6379 2069 6e64  ` or a fancy ind
+000249e0: 6578 2e0d 0a0d 0a20 2020 2020 2020 2045  ex.....        E
+000249f0: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+00024a00: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00024a10: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
+00024a20: 6561 6e20 6172 7261 7920 7573 696e 6720  ean array using 
+00024a30: 7468 6520 6060 7065 7269 6f64 733d 3160  the ``periods=1`
+00024a40: 6020 6465 6661 756c 7420 7661 6c75 6520  ` default value 
+00024a50: 286c 6f6f 6b20 6265 6869 6e64 206f 6e65  (look behind one
+00024a60: 2065 6c65 6d65 6e74 2070 6f73 6974 696f   element positio
+00024a70: 6e20 666f 7220 636f 6d70 6172 6973 6f6e  n for comparison
+00024a80: 7329 3a0d 0a0d 0a20 2020 2020 2020 203e  s):....        >
+00024a90: 3e3e 2061 203d 2072 742e 4641 285b 312c  >> a = rt.FA([1,
+00024aa0: 2032 2c20 322c 2033 2c20 322c 2034 2c20   2, 2, 3, 2, 4, 
+00024ab0: 352c 2036 2c20 322c 2032 2c20 355d 290d  5, 6, 2, 2, 5]).
+00024ac0: 0a20 2020 2020 2020 203e 3e3e 2061 0d0a  .        >>> a..
+00024ad0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00024ae0: 7928 5b31 2c20 322c 2032 2c20 332c 2032  y([1, 2, 2, 3, 2
+00024af0: 2c20 342c 2035 2c20 362c 2032 2c20 322c  , 4, 5, 6, 2, 2,
+00024b00: 2035 5d29 0d0a 2020 2020 2020 2020 3e3e   5])..        >>
+00024b10: 3e20 612e 6469 6666 6572 7328 290d 0a20  > a.differs().. 
+00024b20: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00024b30: 285b 4661 6c73 652c 2046 616c 7365 2c20  ([False, False, 
+00024b40: 2054 7275 652c 2046 616c 7365 2c20 4661   True, False, Fa
+00024b50: 6c73 652c 2046 616c 7365 2c20 4661 6c73  lse, False, Fals
+00024b60: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
+00024b70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00024b80: 2020 2020 2020 5472 7565 2c20 4661 6c73        True, Fals
+00024b90: 655d 290d 0a0d 0a20 2020 2020 2020 2052  e])....        R
+00024ba0: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
+00024bb0: 6172 7261 7920 616e 6420 6c6f 6f6b 2061  array and look a
+00024bc0: 6865 6164 2074 6872 6565 2065 6c65 6d65  head three eleme
+00024bd0: 6e74 2070 6f73 6974 696f 6e73 2066 6f72  nt positions for
+00024be0: 2063 6f6d 7061 7269 736f 6e73 3a0d 0a0d   comparisons:...
+00024bf0: 0a20 2020 2020 2020 203e 3e3e 2061 2e64  .        >>> a.d
+00024c00: 6966 6665 7273 2870 6572 696f 6473 3d2d  iffers(periods=-
+00024c10: 3329 0d0a 2020 2020 2020 2020 4661 7374  3)..        Fast
+00024c20: 4172 7261 7928 5b46 616c 7365 2c20 2054  Array([False,  T
+00024c30: 7275 652c 2046 616c 7365 2c20 4661 6c73  rue, False, Fals
+00024c40: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
+00024c50: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
+00024c60: 616c 7365 2c0d 0a20 2020 2020 2020 2020  alse,..         
+00024c70: 2020 2020 2020 2020 2020 4661 6c73 652c            False,
+00024c80: 2046 616c 7365 5d29 0d0a 0d0a 2020 2020   False])....    
+00024c90: 2020 2020 5265 7475 726e 2061 2066 616e      Return a fan
+00024ca0: 6379 2069 6e64 6578 2075 7369 6e67 2074  cy index using t
+00024cb0: 6865 2060 6070 6572 696f 6473 3d31 6060  he ``periods=1``
+00024cc0: 2064 6566 6175 6c74 2076 616c 7565 2028   default value (
+00024cd0: 6c6f 6f6b 2062 6568 696e 6420 6f6e 6520  look behind one 
+00024ce0: 656c 656d 656e 7420 706f 7369 7469 6f6e  element position
+00024cf0: 2066 6f72 2063 6f6d 7061 7269 736f 6e73   for comparisons
+00024d00: 293a 0d0a 0d0a 2020 2020 2020 2020 3e3e  ):....        >>
+00024d10: 3e20 612e 6469 6666 6572 7328 6661 6e63  > a.differs(fanc
+00024d20: 793d 5472 7565 290d 0a20 2020 2020 2020  y=True)..       
+00024d30: 2046 6173 7441 7272 6179 285b 322c 2039   FastArray([2, 9
+00024d40: 5d29 0d0a 0d0a 2020 2020 2020 2020 5365  ])....        Se
+00024d50: 7420 6070 6572 696f 6473 6020 746f 2061  t `periods` to a
+00024d60: 206e 756d 6265 7220 6c61 7267 6572 2074   number larger t
+00024d70: 6861 6e20 7468 6520 696e 7075 7420 6172  han the input ar
+00024d80: 7261 793a 0d0a 0d0a 2020 2020 2020 2020  ray:....        
+00024d90: 3e3e 3e20 612e 6469 6666 6572 7328 7065  >>> a.differs(pe
+00024da0: 7269 6f64 733d 3135 290d 0a20 2020 2020  riods=15)..     
+00024db0: 2020 2046 6173 7441 7272 6179 285b 4661     FastArray([Fa
+00024dc0: 6c73 652c 2046 616c 7365 2c20 4661 6c73  lse, False, Fals
+00024dd0: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
+00024de0: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
+00024df0: 616c 7365 2c20 4661 6c73 652c 0d0a 2020  alse, False,..  
+00024e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024e10: 2046 616c 7365 2c20 4661 6c73 655d 290d   False, False]).
+00024e20: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00024e30: 2020 2020 2020 6966 2073 656c 662e 6474        if self.dt
+00024e40: 7970 652e 6e75 6d20 3e20 3133 3a0d 0a20  ype.num > 13:.. 
+00024e50: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00024e60: 7420 3d20 7365 6c66 2021 3d20 7365 6c66  t = self != self
+00024e70: 2e73 6869 6674 2870 6572 696f 6473 290d  .shift(periods).
+00024e80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00024e90: 6661 6e63 793a 0d0a 2020 2020 2020 2020  fancy:..        
+00024ea0: 2020 2020 2020 2020 7265 7475 726e 2062          return b
+00024eb0: 6f6f 6c5f 746f 5f66 616e 6379 2872 6573  ool_to_fancy(res
+00024ec0: 756c 7429 0d0a 2020 2020 2020 2020 2020  ult)..          
+00024ed0: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
+00024ee0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00024ef0: 7365 6c66 2e5f 696e 7465 726e 616c 5f73  self._internal_s
+00024f00: 656c 665f 636f 6d70 6172 6528 4d41 5448  elf_compare(MATH
+00024f10: 5f4f 5045 5241 5449 4f4e 2e43 4d50 5f45  _OPERATION.CMP_E
+00024f20: 512c 2070 6572 696f 6473 3d70 6572 696f  Q, periods=perio
+00024f30: 6473 2c20 6661 6e63 793d 6661 6e63 7929  ds, fancy=fancy)
+00024f40: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00024f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024f70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024f80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024f90: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2074  -----..    def t
+00024fa0: 7261 6e73 6974 696f 6e73 2873 656c 662c  ransitions(self,
+00024fb0: 2070 6572 696f 6473 3d31 2c20 6661 6e63   periods=1, fanc
+00024fc0: 793d 4661 6c73 6529 202d 3e20 4661 7374  y=False) -> Fast
+00024fd0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00024fe0: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
+00024ff0: 7572 6e73 2061 2062 6f6f 6c65 616e 2061  urns a boolean a
+00025000: 7272 6179 2e0d 0a20 2020 2020 2020 2054  rray...        T
+00025010: 6865 2062 6f6f 6c65 616e 2061 7272 6179  he boolean array
+00025020: 2069 7320 7365 7420 746f 2054 7275 6520   is set to True 
+00025030: 7768 656e 2074 6865 2070 7265 7669 6f75  when the previou
+00025040: 7320 6974 656d 2069 6e20 7468 6520 6172  s item in the ar
+00025050: 7261 7920 646f 6573 206e 6f74 2065 7175  ray does not equ
+00025060: 616c 2074 6865 2063 7572 7265 6e74 2e0d  al the current..
+00025070: 0a20 2020 2020 2020 2055 7365 202d 3120  .        Use -1 
+00025080: 696e 7374 6561 6420 6f66 2031 2069 6620  instead of 1 if 
+00025090: 796f 7520 7761 6e74 2054 7275 6520 7365  you want True se
+000250a0: 7420 7768 656e 2074 6865 206e 6578 7420  t when the next 
+000250b0: 6974 656d 2069 6e20 7468 6520 6172 7261  item in the arra
+000250c0: 7920 646f 6573 206e 6f74 2065 7175 616c  y does not equal
+000250d0: 2074 6865 2070 7265 7669 6f75 732e 0d0a   the previous...
+000250e0: 2020 2020 2020 2020 5365 6520 616c 736f          See also
+000250f0: 3a20 6060 6469 6666 6572 7360 600d 0a0d  : ``differs``...
+00025100: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00025110: 7065 7269 6f64 733a 2054 6865 206e 756d  periods: The num
+00025120: 6265 7220 6f66 2065 6c65 6d65 6e74 7320  ber of elements 
+00025130: 746f 206c 6f6f 6b20 6168 6561 6420 286f  to look ahead (o
+00025140: 7220 6265 6869 6e64 292c 2064 6566 6175  r behind), defau
+00025150: 6c74 7320 746f 2031 0d0a 2020 2020 2020  lts to 1..      
+00025160: 2020 3a74 7970 6520 7065 7269 6f64 733a    :type periods:
+00025170: 2069 6e74 0d0a 2020 2020 2020 2020 3a70   int..        :p
+00025180: 6172 616d 2066 616e 6379 3a20 496e 6469  aram fancy: Indi
+00025190: 6361 7465 7320 7768 6574 6865 7220 746f  cates whether to
+000251a0: 2072 6574 7572 6e20 6120 6661 6e63 795f   return a fancy_
+000251b0: 696e 6465 7820 696e 7374 6561 6420 6f66  index instead of
+000251c0: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
+000251d0: 2c20 6465 6661 756c 7473 2074 6f20 4661  , defaults to Fa
+000251e0: 6c73 652e 0d0a 2020 2020 2020 2020 3a74  lse...        :t
+000251f0: 7970 6520 6661 6e63 793a 2062 6f6f 6c0d  ype fancy: bool.
+00025200: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00025210: 3a20 626f 6f6c 6561 6e20 6060 4661 7374  : boolean ``Fast
+00025220: 4172 7261 7960 602c 206f 7220 6661 6e63  Array``, or fanc
+00025230: 7949 6e64 6578 2028 7365 653a 2060 6661  yIndex (see: `fa
+00025240: 6e63 7960 206b 7761 7267 290d 0a0d 0a20  ncy` kwarg).... 
+00025250: 2020 2020 2020 203e 3e3e 2061 203d 2046         >>> a = F
+00025260: 6173 7441 7272 6179 285b 302c 312c 322c  astArray([0,1,2,
+00025270: 332c 332c 332c 345d 290d 0a20 2020 2020  3,3,3,4])..     
+00025280: 2020 203e 3e3e 2061 2e74 7261 6e73 6974     >>> a.transit
+00025290: 696f 6e73 2870 6572 696f 6473 3d31 290d  ions(periods=1).
+000252a0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+000252b0: 6179 285b 4661 6c73 652c 2054 7275 652c  ay([False, True,
+000252c0: 2054 7275 652c 2054 7275 652c 2046 616c   True, True, Fal
+000252d0: 7365 2c20 4661 6c73 652c 2054 7275 655d  se, False, True]
+000252e0: 290d 0a0d 0a20 2020 2020 2020 203e 3e3e  )....        >>>
+000252f0: 2061 2e74 7261 6e73 6974 696f 6e73 2870   a.transitions(p
+00025300: 6572 696f 6473 3d32 290d 0a20 2020 2020  eriods=2)..     
+00025310: 2020 2046 6173 7441 7272 6179 285b 4661     FastArray([Fa
+00025320: 6c73 652c 2046 616c 7365 2c20 5472 7565  lse, False, True
+00025330: 2c20 5472 7565 2c20 5472 7565 2c20 4661  , True, True, Fa
+00025340: 6c73 652c 2054 7275 655d 290d 0a0d 0a20  lse, True]).... 
+00025350: 2020 2020 2020 203e 3e3e 2061 2e74 7261         >>> a.tra
+00025360: 6e73 6974 696f 6e73 2870 6572 696f 6473  nsitions(periods
+00025370: 3d2d 3129 0d0a 2020 2020 2020 2020 4661  =-1)..        Fa
+00025380: 7374 4172 7261 7928 5b20 5472 7565 2c20  stArray([ True, 
+00025390: 5472 7565 2c20 5472 7565 2c20 4661 6c73  True, True, Fals
+000253a0: 652c 2046 616c 7365 2c20 5472 7565 2c20  e, False, True, 
+000253b0: 4661 6c73 655d 290d 0a20 2020 2020 2020  False])..       
+000253c0: 2022 2222 0d0a 2020 2020 2020 2020 6966   """..        if
+000253d0: 2073 656c 662e 6474 7970 652e 6e75 6d20   self.dtype.num 
+000253e0: 3e20 3133 3a0d 0a20 2020 2020 2020 2020  > 13:..         
+000253f0: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
+00025400: 2021 3d20 7365 6c66 2e73 6869 6674 2870   != self.shift(p
+00025410: 6572 696f 6473 290d 0a20 2020 2020 2020  eriods)..       
+00025420: 2020 2020 2069 6620 6661 6e63 793a 0d0a       if fancy:..
+00025430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025440: 7265 7475 726e 2062 6f6f 6c5f 746f 5f66  return bool_to_f
+00025450: 616e 6379 2872 6573 756c 7429 0d0a 2020  ancy(result)..  
+00025460: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00025470: 2072 6573 756c 740d 0a20 2020 2020 2020   result..       
+00025480: 2072 6574 7572 6e20 7365 6c66 2e5f 696e   return self._in
+00025490: 7465 726e 616c 5f73 656c 665f 636f 6d70  ternal_self_comp
+000254a0: 6172 6528 4d41 5448 5f4f 5045 5241 5449  are(MATH_OPERATI
+000254b0: 4f4e 2e43 4d50 5f4e 452c 2070 6572 696f  ON.CMP_NE, perio
+000254c0: 6473 3d70 6572 696f 6473 2c20 6661 6e63  ds=periods, fanc
+000254d0: 793d 6661 6e63 7929 0d0a 0d0a 2020 2020  y=fancy)....    
+000254e0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+000254f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00025500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00025510: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+00025520: 6566 2064 6966 6628 7365 6c66 2c20 7065  ef diff(self, pe
+00025530: 7269 6f64 733d 3129 202d 3e20 4661 7374  riods=1) -> Fast
+00025540: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00025550: 2222 220d 0a20 2020 2020 2020 204f 6e6c  """..        Onl
+00025560: 7920 776f 726b 7320 666f 7220 696e 7465  y works for inte
+00025570: 6765 7273 2061 6e64 2066 6c6f 6174 732e  gers and floats.
+00025580: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
+00025590: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
+000255a0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+000255b0: 2020 2020 7065 7269 6f64 733a 2069 6e74      periods: int
+000255c0: 2c20 6465 6661 756c 7473 2074 6f20 312e  , defaults to 1.
+000255d0: 2020 486f 7720 6d61 6e79 2065 6c65 6d65    How many eleme
+000255e0: 6e74 7320 746f 2073 6869 6674 2074 6865  nts to shift the
+000255f0: 2064 6174 6120 6265 666f 7265 2073 7562   data before sub
+00025600: 7472 6163 7469 6e67 2e0d 0a0d 0a20 2020  tracting.....   
+00025610: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00025620: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00025630: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00025640: 2073 616d 6520 6c65 6e67 7468 2061 7320   same length as 
+00025650: 6375 7272 656e 7420 6172 7261 792e 2020  current array.  
+00025660: 496e 7661 6c69 6473 2077 696c 6c20 6669  Invalids will fi
+00025670: 6c6c 2074 6865 2062 6567 696e 6e69 6e67  ll the beginning
+00025680: 2062 6173 6564 206f 6e20 7468 6520 7065   based on the pe
+00025690: 7269 6f64 732e 0d0a 0d0a 2020 2020 2020  riods.....      
+000256a0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
+000256b0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+000256c0: 2020 2020 2020 3e3e 3e20 613d 7274 2e61        >>> a=rt.a
+000256d0: 7261 6e67 6528 332c 2064 7479 7065 3d72  range(3, dtype=r
+000256e0: 742e 696e 7433 3229 3b20 612e 6469 6666  t.int32); a.diff
+000256f0: 2829 0d0a 2020 2020 2020 2020 4661 7374  ()..        Fast
+00025700: 4172 7261 7928 5b2d 3231 3437 3438 3336  Array([-21474836
+00025710: 3438 2c20 2020 2020 2020 2020 2020 312c  48,           1,
+00025720: 2020 2020 2020 2020 2020 2031 5d29 0d0a             1])..
+00025730: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00025740: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+00025750: 2020 2020 2020 2020 2069 6e76 616c 6964           invalid
+00025760: 203d 2049 4e56 414c 4944 5f44 4943 545b   = INVALID_DICT[
+00025770: 7365 6c66 2e64 7479 7065 2e6e 756d 5d0d  self.dtype.num].
+00025780: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+00025790: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+000257a0: 6973 6520 5479 7065 4572 726f 7228 6622  ise TypeError(f"
+000257b0: 7368 6966 7420 646f 6573 206e 6f74 2073  shift does not s
+000257c0: 7570 706f 7274 2074 6865 2064 7479 7065  upport the dtype
+000257d0: 207b 7365 6c66 2e64 7479 7065 2e6e 616d   {self.dtype.nam
+000257e0: 6521 727d 2229 0d0a 0d0a 2020 2020 2020  e!r}")....      
+000257f0: 2020 7465 6d70 203d 2065 6d70 7479 2873    temp = empty(s
+00025800: 656c 662e 7368 6170 652c 2064 7479 7065  elf.shape, dtype
+00025810: 3d73 656c 662e 6474 7970 6529 0d0a 2020  =self.dtype)..  
+00025820: 2020 2020 2020 6966 2061 6273 2870 6572        if abs(per
+00025830: 696f 6473 2920 3e3d 206c 656e 2873 656c  iods) >= len(sel
+00025840: 6629 3a0d 0a20 2020 2020 2020 2020 2020  f):..           
+00025850: 2074 656d 702e 6669 6c6c 2869 6e76 616c   temp.fill(inval
+00025860: 6964 290d 0a20 2020 2020 2020 2065 6c69  id)..        eli
+00025870: 6620 7065 7269 6f64 7320 3e20 303a 0d0a  f periods > 0:..
+00025880: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
+00025890: 5b3a 7065 7269 6f64 735d 203d 2069 6e76  [:periods] = inv
+000258a0: 616c 6964 0d0a 0d0a 2020 2020 2020 2020  alid....        
+000258b0: 2020 2020 2320 6f75 7470 7574 2069 6e74      # output int
+000258c0: 6f20 7468 6520 656d 7074 7920 6172 7261  o the empty arra
+000258d0: 7920 7765 2063 7265 6174 6564 2c20 6e70  y we created, np
+000258e0: 2e73 7562 7472 6163 7420 7769 6c6c 2063  .subtract will c
+000258f0: 616c 6c20 4661 7374 4172 7261 7927 7320  all FastArray's 
+00025900: 7375 6274 7261 6374 0d0a 2020 2020 2020  subtract..      
+00025910: 2020 2020 2020 6e70 2e73 7562 7472 6163        np.subtrac
+00025920: 7428 7365 6c66 5b70 6572 696f 6473 3a5d  t(self[periods:]
+00025930: 2c20 7365 6c66 5b3a 2d70 6572 696f 6473  , self[:-periods
+00025940: 5d2c 206f 7574 3d74 656d 705b 7065 7269  ], out=temp[peri
+00025950: 6f64 733a 5d29 0d0a 2020 2020 2020 2020  ods:])..        
+00025960: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00025970: 2020 2074 656d 705b 7065 7269 6f64 733a     temp[periods:
+00025980: 5d20 3d20 696e 7661 6c69 640d 0a20 2020  ] = invalid..   
+00025990: 2020 2020 2020 2020 206e 702e 7375 6274           np.subt
+000259a0: 7261 6374 2873 656c 665b 3a70 6572 696f  ract(self[:perio
+000259b0: 6473 5d2c 2073 656c 665b 2d70 6572 696f  ds], self[-perio
+000259c0: 6473 3a5d 2c20 6f75 743d 7465 6d70 5b3a  ds:], out=temp[:
+000259d0: 7065 7269 6f64 735d 290d 0a20 2020 2020  periods])..     
+000259e0: 2020 2072 6574 7572 6e20 7465 6d70 0d0a     return temp..
+000259f0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00025a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00025a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00025a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00025a30: 0a20 2020 2064 6566 2069 736e 6128 7365  .    def isna(se
+00025a40: 6c66 2920 2d3e 2046 6173 7441 7272 6179  lf) -> FastArray
+00025a50: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00025a60: 2020 2020 2020 2020 6973 6e61 6e20 6973          isnan is
+00025a70: 206d 6170 7065 6420 6469 7265 6374 6c79   mapped directly
+00025a80: 2074 6f20 6973 6e61 6e28 290d 0a20 2020   to isnan()..   
+00025a90: 2020 2020 2043 6174 6567 6f72 6963 616c       Categorical
+00025aa0: 7320 616e 6420 4461 7465 5469 6d65 2074  s and DateTime t
+00025ab0: 616b 6520 6f76 6572 2069 736e 616e 2e0d  ake over isnan..
+00025ac0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00025ad0: 6179 2068 616e 646c 6573 2073 656e 7469  ay handles senti
+00025ae0: 6e65 6c73 2e0d 0a0d 0a20 2020 2020 2020  nels.....       
+00025af0: 203e 3e3e 2061 3d61 7261 6e67 6528 3130   >>> a=arange(10
+00025b00: 302e 3029 0d0a 2020 2020 2020 2020 3e3e  0.0)..        >>
+00025b10: 3e20 615b 355d 3d6e 702e 6e61 6e0d 0a20  > a[5]=np.nan.. 
+00025b20: 2020 2020 2020 203e 3e3e 2061 5b38 375d         >>> a[87]
+00025b30: 3d6e 702e 6e61 6e0d 0a20 2020 2020 2020  =np.nan..       
+00025b40: 203e 3e3e 2073 756d 2861 2e69 736e 6128   >>> sum(a.isna(
+00025b50: 2929 0d0a 2020 2020 2020 2020 320d 0a20  ))..        2.. 
+00025b60: 2020 2020 2020 203e 3e3e 2073 756d 2861         >>> sum(a
+00025b70: 2e61 7374 7970 6528 6e70 2e69 6e74 3332  .astype(np.int32
+00025b80: 292e 6973 6e61 2829 290d 0a20 2020 2020  ).isna())..     
+00025b90: 2020 2032 0d0a 2020 2020 2020 2020 2222     2..        ""
+00025ba0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+00025bb0: 6e20 7365 6c66 2e69 736e 616e 2829 0d0a  n self.isnan()..
+00025bc0: 0d0a 2020 2020 6465 6620 6e6f 746e 6128  ..    def notna(
+00025bd0: 7365 6c66 2920 2d3e 2046 6173 7441 7272  self) -> FastArr
+00025be0: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
+00025bf0: 0d0a 2020 2020 2020 2020 6e6f 746e 6120  ..        notna 
+00025c00: 6973 206d 6170 7065 6420 6469 7265 6374  is mapped direct
+00025c10: 6c79 2074 6f20 6973 6e6f 746e 616e 2829  ly to isnotnan()
+00025c20: 0d0a 2020 2020 2020 2020 4361 7465 676f  ..        Catego
+00025c30: 7269 6361 6c73 2061 6e64 2044 6174 6554  ricals and DateT
+00025c40: 696d 6520 7461 6b65 206f 7665 7220 6973  ime take over is
+00025c50: 6e6f 746e 616e 2e0d 0a20 2020 2020 2020  notnan...       
+00025c60: 2046 6173 7441 7272 6179 2068 616e 646c   FastArray handl
+00025c70: 6573 2073 656e 7469 6e65 6c73 2e0d 0a0d  es sentinels....
+00025c80: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
+00025c90: 7261 6e67 6528 3130 302e 3029 0d0a 2020  range(100.0)..  
+00025ca0: 2020 2020 2020 3e3e 3e20 615b 355d 3d6e        >>> a[5]=n
+00025cb0: 702e 6e61 6e0d 0a20 2020 2020 2020 203e  p.nan..        >
+00025cc0: 3e3e 2061 5b38 375d 3d6e 702e 6e61 6e0d  >> a[87]=np.nan.
+00025cd0: 0a20 2020 2020 2020 203e 3e3e 2073 756d  .        >>> sum
+00025ce0: 2861 2e6e 6f74 6e61 2829 290d 0a20 2020  (a.notna())..   
+00025cf0: 2020 2020 2039 380d 0a20 2020 2020 2020       98..       
+00025d00: 203e 3e3e 2073 756d 2861 2e61 7374 7970   >>> sum(a.astyp
+00025d10: 6528 6e70 2e69 6e74 3332 292e 6e6f 746e  e(np.int32).notn
+00025d20: 6128 2929 0d0a 2020 2020 2020 2020 3938  a())..        98
+00025d30: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00025d40: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00025d50: 6c66 2e69 736e 6f74 6e61 6e28 290d 0a0d  lf.isnotnan()...
+00025d60: 0a20 2020 2064 6566 2072 6570 6c61 6365  .    def replace
+00025d70: 6e61 2873 656c 662c 2076 616c 7565 2c20  na(self, value, 
+00025d80: 696e 706c 6163 653d 4661 6c73 6529 202d  inplace=False) -
+00025d90: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
+00025da0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00025db0: 2020 2052 6574 7572 6e20 6120 6046 6173     Return a `Fas
+00025dc0: 7441 7272 6179 6020 7769 7468 2061 6c6c  tArray` with all
+00025dd0: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
+00025de0: 2076 616c 7565 7320 7365 7420 746f 2074   values set to t
+00025df0: 6865 2073 7065 6369 6669 6564 2076 616c  he specified val
+00025e00: 7565 2e0d 0a0d 0a20 2020 2020 2020 204f  ue.....        O
+00025e10: 7074 696f 6e61 6c6c 792c 2079 6f75 2063  ptionally, you c
+00025e20: 616e 206d 6f64 6966 7920 7468 6520 6f72  an modify the or
+00025e30: 6967 696e 616c 2060 4661 7374 4172 7261  iginal `FastArra
+00025e40: 7960 2069 6620 6974 2773 206e 6f74 206c  y` if it's not l
+00025e50: 6f63 6b65 642e 0d0a 0d0a 2020 2020 2020  ocked.....      
+00025e60: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00025e70: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00025e80: 0d0a 2020 2020 2020 2020 7661 6c75 6520  ..        value 
+00025e90: 3a20 7363 616c 6172 206f 7220 6172 7261  : scalar or arra
+00025ea0: 790d 0a20 2020 2020 2020 2020 2020 2041  y..            A
+00025eb0: 2076 616c 7565 206f 7220 616e 2061 7272   value or an arr
+00025ec0: 6179 206f 6620 7661 6c75 6573 2074 6f20  ay of values to 
+00025ed0: 7265 706c 6163 6520 616c 6c20 4e61 4e20  replace all NaN 
+00025ee0: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
+00025ef0: 6573 2e20 4966 2061 6e0d 0a20 2020 2020  es. If an..     
+00025f00: 2020 2020 2020 2061 7272 6179 2c20 7468         array, th
+00025f10: 6520 6e75 6d62 6572 206f 6620 7661 6c75  e number of valu
+00025f20: 6573 206d 7573 7420 6571 7561 6c20 7468  es must equal th
+00025f30: 6520 6e75 6d62 6572 206f 6620 4e61 4e20  e number of NaN 
+00025f40: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
+00025f50: 6573 2e0d 0a20 2020 2020 2020 2069 6e70  es...        inp
+00025f60: 6c61 6365 203a 2062 6f6f 6c2c 2064 6566  lace : bool, def
+00025f70: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
+00025f80: 2020 2020 2020 2020 4966 2046 616c 7365          If False
+00025f90: 2c20 7265 7475 726e 2061 2063 6f70 7920  , return a copy 
+00025fa0: 6f66 2074 6865 2060 4661 7374 4172 7261  of the `FastArra
+00025fb0: 7960 2e20 4966 2054 7275 652c 206d 6f64  y`. If True, mod
+00025fc0: 6966 7920 7468 6520 6f72 6967 696e 616c  ify the original
+00025fd0: 2e0d 0a20 2020 2020 2020 2020 2020 2054  ...            T
+00025fe0: 6869 7320 7769 6c6c 206d 6f64 6966 7920  his will modify 
+00025ff0: 616e 7920 6f74 6865 7220 7669 6577 7320  any other views 
+00026000: 6f6e 2074 6869 7320 6f62 6a65 6374 2e20  on this object. 
+00026010: 5468 6973 2066 6169 6c73 2069 6620 7468  This fails if th
+00026020: 650d 0a20 2020 2020 2020 2020 2020 2060  e..            `
+00026030: 4661 7374 4172 7261 7960 2069 7320 6c6f  FastArray` is lo
+00026040: 636b 6564 2e0d 0a0d 0a20 2020 2020 2020  cked.....       
+00026050: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+00026060: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+00026070: 2020 2060 4661 7374 4172 7261 7960 206f     `FastArray` o
+00026080: 7220 4e6f 6e65 0d0a 2020 2020 2020 2020  r None..        
+00026090: 2020 2020 5468 6520 6046 6173 7441 7272      The `FastArr
+000260a0: 6179 6020 7769 6c6c 2062 6520 7468 6520  ay` will be the 
+000260b0: 7361 6d65 2073 697a 6520 616e 6420 6474  same size and dt
+000260c0: 7970 6520 6173 2074 6865 206f 7269 6769  ype as the origi
+000260d0: 6e61 6c20 6172 7261 792e 0d0a 2020 2020  nal array...    
+000260e0: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
+000260f0: 4e6f 6e65 2069 6620 6060 696e 706c 6163  None if ``inplac
+00026100: 6520 3d20 5472 7565 6060 2e0d 0a0d 0a20  e = True``..... 
+00026110: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
+00026120: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00026130: 2d0d 0a20 2020 2020 2020 2046 6173 7441  -..        FastA
+00026140: 7272 6179 2e66 696c 6c6e 6120 3a20 5265  rray.fillna : Re
+00026150: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00026160: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00026170: 6820 6120 7370 6563 6966 6965 6420 7661  h a specified va
+00026180: 6c75 6520 6f72 206e 6561 7262 7920 6461  lue or nearby da
+00026190: 7461 2e0d 0a20 2020 2020 2020 2044 6174  ta...        Dat
+000261a0: 6173 6574 2e66 696c 6c6e 6120 3a20 5265  aset.fillna : Re
+000261b0: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+000261c0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+000261d0: 6820 6120 7370 6563 6966 6965 6420 7661  h a specified va
+000261e0: 6c75 6520 6f72 206e 6561 7262 7920 6461  lue or nearby da
+000261f0: 7461 2e0d 0a20 2020 2020 2020 2043 6174  ta...        Cat
+00026200: 6567 6f72 6963 616c 2e66 696c 6c5f 666f  egorical.fill_fo
+00026210: 7277 6172 6420 3a20 5265 706c 6163 6520  rward : Replace 
+00026220: 4e61 4e20 616e 6420 696e 7661 6c69 6420  NaN and invalid 
+00026230: 7661 6c75 6573 2077 6974 6820 7468 6520  values with the 
+00026240: 6c61 7374 2076 616c 6964 2067 726f 7570  last valid group
+00026250: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
+00026260: 2043 6174 6567 6f72 6963 616c 2e66 696c   Categorical.fil
+00026270: 6c5f 6261 636b 7761 7264 203a 2052 6570  l_backward : Rep
+00026280: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
+00026290: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
+000262a0: 2074 6865 206e 6578 7420 7661 6c69 6420   the next valid 
+000262b0: 6772 6f75 7020 7661 6c75 652e 0d0a 2020  group value...  
+000262c0: 2020 2020 2020 4772 6f75 7042 792e 6669        GroupBy.fi
+000262d0: 6c6c 5f66 6f72 7761 7264 203a 2052 6570  ll_forward : Rep
+000262e0: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
+000262f0: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
+00026300: 2074 6865 206c 6173 7420 7661 6c69 6420   the last valid 
+00026310: 6772 6f75 7020 7661 6c75 652e 0d0a 2020  group value...  
+00026320: 2020 2020 2020 4772 6f75 7042 792e 6669        GroupBy.fi
+00026330: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
+00026340: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00026350: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00026360: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
+00026370: 2067 726f 7570 2076 616c 7565 2e0d 0a0d   group value....
+00026380: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+00026390: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+000263a0: 2d2d 2d0d 0a20 2020 2020 2020 2052 6570  ---..        Rep
+000263b0: 6c61 6365 2061 6c6c 2069 6e73 7461 6e63  lace all instanc
+000263c0: 6573 206f 6620 4e61 4e20 7769 7468 2061  es of NaN with a
+000263d0: 2073 696e 676c 6520 7661 6c75 653a 0d0a   single value:..
+000263e0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+000263f0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+00026400: 7274 2e6e 616e 2c20 312e 302c 2072 742e  rt.nan, 1.0, rt.
+00026410: 6e61 6e2c 2033 2e30 5d29 0d0a 2020 2020  nan, 3.0])..    
+00026420: 2020 2020 3e3e 3e20 612e 7265 706c 6163      >>> a.replac
+00026430: 656e 6128 3029 0d0a 2020 2020 2020 2020  ena(0)..        
+00026440: 4661 7374 4172 7261 7928 5b30 2e2c 2031  FastArray([0., 1
+00026450: 2e2c 2030 2e2c 2033 2e5d 290d 0a0d 0a20  ., 0., 3.]).... 
+00026460: 2020 2020 2020 2052 6570 6c61 6365 2061         Replace a
+00026470: 6c6c 2069 6e76 616c 6964 2076 616c 7565  ll invalid value
+00026480: 7320 7769 7468 2030 733a 0d0a 0d0a 2020  s with 0s:....  
+00026490: 2020 2020 2020 3e3e 3e20 6220 3d20 7274        >>> b = rt
+000264a0: 2e46 6173 7441 7272 6179 285b 302c 2031  .FastArray([0, 1
+000264b0: 2c20 322c 2033 2c20 342c 2035 5d29 0d0a  , 2, 3, 4, 5])..
+000264c0: 2020 2020 2020 2020 3e3e 3e20 625b 303a          >>> b[0:
+000264d0: 335d 203d 2062 2e69 6e76 0d0a 2020 2020  3] = b.inv..    
+000264e0: 2020 2020 3e3e 3e20 622e 7265 706c 6163      >>> b.replac
+000264f0: 656e 6128 3029 0d0a 2020 2020 2020 2020  ena(0)..        
+00026500: 4661 7374 4172 7261 7928 5b30 2c20 302c  FastArray([0, 0,
+00026510: 2030 2c20 332c 2034 2c20 355d 290d 0a0d   0, 3, 4, 5])...
+00026520: 0a20 2020 2020 2020 2052 6570 6c61 6365  .        Replace
+00026530: 2065 6163 6820 696e 7374 616e 6365 206f   each instance o
+00026540: 6620 4e61 4e20 7769 7468 2061 2064 6966  f NaN with a dif
+00026550: 6665 7265 6e74 2076 616c 7565 3a0d 0a0d  ferent value:...
+00026560: 0a20 2020 2020 2020 203e 3e3e 2061 2e72  .        >>> a.r
+00026570: 6570 6c61 6365 6e61 285b 302c 2032 5d29  eplacena([0, 2])
+00026580: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00026590: 7261 7928 5b30 2e2c 2031 2e2c 2032 2e2c  ray([0., 1., 2.,
+000265a0: 2033 2e5d 290d 0a20 2020 2020 2020 2022   3.])..        "
+000265b0: 2222 0d0a 2020 2020 2020 2020 696e 7374  ""..        inst
+000265c0: 203d 2073 656c 6620 6966 2069 6e70 6c61   = self if inpla
+000265d0: 6365 2065 6c73 6520 7365 6c66 2e63 6f70  ce else self.cop
+000265e0: 7928 290d 0a20 2020 2020 2020 2069 736e  y()..        isn
+000265f0: 6120 3d20 696e 7374 2e69 736e 6128 290d  a = inst.isna().
+00026600: 0a20 2020 2020 2020 2069 6620 6973 6e61  .        if isna
+00026610: 2e61 6e79 2829 3a0d 0a20 2020 2020 2020  .any():..       
+00026620: 2020 2020 2069 6e73 745b 6973 6e61 5d20       inst[isna] 
+00026630: 3d20 7661 6c75 650d 0a20 2020 2020 2020  = value..       
+00026640: 2069 6620 696e 706c 6163 653a 0d0a 2020   if inplace:..  
+00026650: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00026660: 204e 6f6e 650d 0a20 2020 2020 2020 2072   None..        r
+00026670: 6574 7572 6e20 696e 7374 0d0a 0d0a 2020  eturn inst....  
+00026680: 2020 6465 6620 6669 6c6c 6e61 2873 656c    def fillna(sel
+00026690: 662c 2076 616c 7565 3d4e 6f6e 652c 206d  f, value=None, m
+000266a0: 6574 686f 643d 4e6f 6e65 2c20 696e 706c  ethod=None, inpl
+000266b0: 6163 653d 4661 6c73 652c 206c 696d 6974  ace=False, limit
+000266c0: 3d4e 6f6e 6529 202d 3e20 4661 7374 4172  =None) -> FastAr
+000266d0: 7261 793a 0d0a 2020 2020 2020 2020 2222  ray:..        ""
+000266e0: 220d 0a20 2020 2020 2020 2052 6570 6c61  "..        Repla
+000266f0: 6365 204e 614e 2061 6e64 2069 6e76 616c  ce NaN and inval
+00026700: 6964 2076 616c 7565 7320 7769 7468 2061  id values with a
+00026710: 2073 7065 6369 6669 6564 2076 616c 7565   specified value
+00026720: 206f 7220 6e65 6172 6279 2064 6174 612e   or nearby data.
+00026730: 0d0a 0d0a 2020 2020 2020 2020 4f70 7469  ....        Opti
+00026740: 6f6e 616c 6c79 2c20 796f 7520 6361 6e20  onally, you can 
+00026750: 6d6f 6469 6679 2074 6865 206f 7269 6769  modify the origi
+00026760: 6e61 6c20 6046 6173 7441 7272 6179 6020  nal `FastArray` 
+00026770: 6966 2069 7427 7320 6e6f 7420 6c6f 636b  if it's not lock
+00026780: 6564 2e0d 0a0d 0a20 2020 2020 2020 2050  ed.....        P
+00026790: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+000267a0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+000267b0: 2020 2020 2020 2076 616c 7565 203a 2073         value : s
+000267c0: 6361 6c61 7220 6f72 2061 7272 6179 2c20  calar or array, 
+000267d0: 6465 6661 756c 7420 4e6f 6e65 0d0a 2020  default None..  
+000267e0: 2020 2020 2020 2020 2020 4120 7661 6c75            A valu
+000267f0: 6520 6f72 2061 6e20 6172 7261 7920 6f66  e or an array of
+00026800: 2076 616c 7565 7320 746f 2072 6570 6c61   values to repla
+00026810: 6365 2061 6c6c 204e 614e 2061 6e64 2069  ce all NaN and i
+00026820: 6e76 616c 6964 2076 616c 7565 732e 0d0a  nvalid values...
+00026830: 2020 2020 2020 2020 2020 2020 4120 6076              A `v
+00026840: 616c 7565 6020 6973 2072 6571 7569 7265  alue` is require
+00026850: 6420 6966 2060 606d 6574 686f 6420 3d20  d if ``method = 
+00026860: 4e6f 6e65 6060 2e20 416e 2061 7272 6179  None``. An array
+00026870: 2063 616e 2062 6520 7573 6564 206f 6e6c   can be used onl
+00026880: 7920 7768 656e 0d0a 2020 2020 2020 2020  y when..        
+00026890: 2020 2020 6060 6d65 7468 6f64 203d 204e      ``method = N
+000268a0: 6f6e 6560 602e 2049 6620 616e 2061 7272  one``. If an arr
+000268b0: 6179 2069 7320 7573 6564 2c20 7468 6520  ay is used, the 
+000268c0: 6e75 6d62 6572 206f 6620 7661 6c75 6573  number of values
+000268d0: 2069 6e20 7468 6520 6172 7261 790d 0a20   in the array.. 
+000268e0: 2020 2020 2020 2020 2020 206d 7573 7420             must 
+000268f0: 6571 7561 6c20 7468 6520 6e75 6d62 6572  equal the number
+00026900: 206f 6620 4e61 4e20 616e 6420 696e 7661   of NaN and inva
+00026910: 6c69 6420 7661 6c75 6573 2e0d 0a20 2020  lid values...   
+00026920: 2020 2020 206d 6574 686f 6420 3a20 7b4e       method : {N
+00026930: 6f6e 652c 2027 6261 636b 6669 6c6c 272c  one, 'backfill',
+00026940: 2027 6266 696c 6c27 2c20 2770 6164 272c   'bfill', 'pad',
+00026950: 2027 6666 696c 6c27 7d2c 2064 6566 6175   'ffill'}, defau
+00026960: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
+00026970: 2020 2020 204d 6574 686f 6420 746f 2075       Method to u
+00026980: 7365 2074 6f20 7072 6f70 6167 6174 6520  se to propagate 
+00026990: 7661 6c69 6420 7661 6c75 6573 2e0d 0a0d  valid values....
+000269a0: 0a20 2020 2020 2020 2020 2020 202a 2062  .            * b
+000269b0: 6163 6b66 696c 6c2f 6266 696c 6c3a 2050  ackfill/bfill: P
+000269c0: 726f 7061 6761 7465 7320 7468 6520 6e65  ropagates the ne
+000269d0: 7874 2065 6e63 6f75 6e74 6572 6564 2076  xt encountered v
+000269e0: 616c 6964 2076 616c 7565 2062 6163 6b77  alid value backw
+000269f0: 6172 642e 0d0a 2020 2020 2020 2020 2020  ard...          
+00026a00: 2020 2020 4361 6c6c 7320 3a6d 6574 683a      Calls :meth:
+00026a10: 6046 6173 7441 7272 6179 2e66 696c 6c5f  `FastArray.fill_
+00026a20: 6261 636b 7761 7264 602e 0d0a 2020 2020  backward`...    
+00026a30: 2020 2020 2020 2020 2a20 7061 642f 6666          * pad/ff
+00026a40: 696c 6c3a 2050 726f 7061 6761 7465 7320  ill: Propagates 
+00026a50: 7468 6520 6c61 7374 2065 6e63 6f75 6e74  the last encount
+00026a60: 6572 6564 2076 616c 6964 2076 616c 7565  ered valid value
+00026a70: 2066 6f72 7761 7264 2e20 4361 6c6c 730d   forward. Calls.
+00026a80: 0a20 2020 2020 2020 2020 2020 2020 203a  .              :
+00026a90: 6d65 7468 3a60 4661 7374 4172 7261 792e  meth:`FastArray.
+00026aa0: 6669 6c6c 5f66 6f72 7761 7264 602e 0d0a  fill_forward`...
+00026ab0: 2020 2020 2020 2020 2020 2020 2a20 4e6f              * No
+00026ac0: 6e65 3a20 4120 7265 706c 6163 656d 656e  ne: A replacemen
+00026ad0: 7420 7661 6c75 6520 6973 2072 6571 7569  t value is requi
+00026ae0: 7265 6420 6966 2060 606d 6574 686f 6420  red if ``method 
+00026af0: 3d20 4e6f 6e65 6060 2e20 4361 6c6c 730d  = None``. Calls.
+00026b00: 0a20 2020 2020 2020 2020 2020 2020 203a  .              :
+00026b10: 6d65 7468 3a60 4661 7374 4172 7261 792e  meth:`FastArray.
+00026b20: 7265 706c 6163 656e 6160 2e0d 0a20 2020  replacena`...   
+00026b30: 2020 2020 2020 2020 2049 6620 7468 6572           If ther
+00026b40: 6527 7320 6e6f 7420 6120 7661 6c69 6420  e's not a valid 
+00026b50: 7661 6c75 6520 746f 2070 726f 7061 6761  value to propaga
+00026b60: 7465 2066 6f72 7761 7264 206f 7220 6261  te forward or ba
+00026b70: 636b 7761 7264 2c20 7468 6520 4e61 4e20  ckward, the NaN 
+00026b80: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
+00026b90: 696e 7661 6c69 6420 7661 6c75 6520 6973  invalid value is
+00026ba0: 206e 6f74 2072 6570 6c61 6365 6420 756e   not replaced un
+00026bb0: 6c65 7373 2079 6f75 2061 6c73 6f20 7370  less you also sp
+00026bc0: 6563 6966 7920 6120 6076 616c 7565 602e  ecify a `value`.
+00026bd0: 0d0a 2020 2020 2020 2020 696e 706c 6163  ..        inplac
+00026be0: 6520 3a20 626f 6f6c 2c20 6465 6661 756c  e : bool, defaul
+00026bf0: 7420 4661 6c73 650d 0a20 2020 2020 2020  t False..       
+00026c00: 2020 2020 2049 6620 4661 6c73 652c 2072       If False, r
+00026c10: 6574 7572 6e20 6120 636f 7079 206f 6620  eturn a copy of 
+00026c20: 7468 6520 6046 6173 7441 7272 6179 602e  the `FastArray`.
+00026c30: 2049 6620 5472 7565 2c20 6d6f 6469 6679   If True, modify
+00026c40: 206f 7269 6769 6e61 6c20 6461 7461 2e0d   original data..
+00026c50: 0a20 2020 2020 2020 2020 2020 2054 6869  .            Thi
+00026c60: 7320 7769 6c6c 206d 6f64 6966 7920 616e  s will modify an
+00026c70: 7920 6f74 6865 7220 7669 6577 7320 6f6e  y other views on
+00026c80: 2074 6869 7320 6f62 6a65 6374 2e20 5468   this object. Th
+00026c90: 6973 2066 6169 6c73 2069 6620 7468 650d  is fails if the.
+00026ca0: 0a20 2020 2020 2020 2020 2020 2060 4661  .            `Fa
+00026cb0: 7374 4172 7261 7960 2069 7320 6c6f 636b  stArray` is lock
+00026cc0: 6564 2e0d 0a20 2020 2020 2020 206c 696d  ed...        lim
+00026cd0: 6974 203a 2069 6e74 2c20 6465 6661 756c  it : int, defaul
+00026ce0: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
+00026cf0: 2020 2020 4966 2060 6d65 7468 6f64 6020      If `method` 
+00026d00: 6973 2073 7065 6369 6669 6564 2c20 7468  is specified, th
+00026d10: 6973 2069 7320 7468 6520 6d61 7869 6d69  is is the maximi
+00026d20: 756d 206e 756d 6265 7220 6f66 2063 6f6e  um number of con
+00026d30: 7365 6375 7469 7665 204e 614e 206f 720d  secutive NaN or.
+00026d40: 0a20 2020 2020 2020 2020 2020 2069 6e76  .            inv
+00026d50: 616c 6964 2076 616c 7565 7320 746f 2066  alid values to f
+00026d60: 696c 6c2e 2049 6620 7468 6572 6520 6973  ill. If there is
+00026d70: 2061 2067 6170 2077 6974 6820 6d6f 7265   a gap with more
+00026d80: 2074 6861 6e20 7468 6973 206e 756d 6265   than this numbe
+00026d90: 7220 6f66 0d0a 2020 2020 2020 2020 2020  r of..          
+00026da0: 2020 636f 6e73 6563 7574 6976 6520 4e61    consecutive Na
+00026db0: 4e20 6f72 2069 6e76 616c 6964 2076 616c  N or invalid val
+00026dc0: 7565 732c 2074 6865 2067 6170 2077 696c  ues, the gap wil
+00026dd0: 6c20 6265 206f 6e6c 7920 7061 7274 6961  l be only partia
+00026de0: 6c6c 7920 6669 6c6c 6564 2e0d 0a0d 0a20  lly filled..... 
+00026df0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00026e00: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00026e10: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
+00026e20: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
+00026e30: 2020 5468 6520 6046 6173 7441 7272 6179    The `FastArray
+00026e40: 6020 7769 6c6c 2062 6520 7468 6520 7361  ` will be the sa
+00026e50: 6d65 2073 697a 6520 616e 6420 6474 7970  me size and dtyp
+00026e60: 6520 6173 2074 6865 206f 7269 6769 6e61  e as the origina
+00026e70: 6c20 6172 7261 792e 0d0a 0d0a 2020 2020  l array.....    
+00026e80: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+00026e90: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+00026ea0: 2020 2020 2020 2020 7269 7074 6162 6c65          riptable
+00026eb0: 2e72 745f 6661 7374 6172 7261 796e 756d  .rt_fastarraynum
+00026ec0: 6261 2e66 696c 6c5f 666f 7277 6172 6420  ba.fill_forward 
+00026ed0: 3a20 5265 706c 6163 6520 4e61 4e20 616e  : Replace NaN an
+00026ee0: 6420 696e 7661 6c69 6420 7661 6c75 6573  d invalid values
+00026ef0: 2077 6974 680d 0a20 2020 2020 2020 2020   with..         
+00026f00: 2020 2074 6865 206c 6173 7420 7661 6c69     the last vali
+00026f10: 6420 7661 6c75 652e 0d0a 2020 2020 2020  d value...      
+00026f20: 2020 7269 7074 6162 6c65 2e72 745f 6661    riptable.rt_fa
+00026f30: 7374 6172 7261 796e 756d 6261 2e66 696c  starraynumba.fil
+00026f40: 6c5f 6261 636b 7761 7264 203a 2052 6570  l_backward : Rep
+00026f50: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
+00026f60: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
+00026f70: 0d0a 2020 2020 2020 2020 2020 2020 7468  ..            th
+00026f80: 6520 6e65 7874 2076 616c 6964 2076 616c  e next valid val
+00026f90: 7565 2e0d 0a20 2020 2020 2020 2072 6970  ue...        rip
+00026fa0: 7461 626c 652e 6669 6c6c 5f66 6f72 7761  table.fill_forwa
+00026fb0: 7264 203a 2052 6570 6c61 6365 204e 614e  rd : Replace NaN
+00026fc0: 2061 6e64 2069 6e76 616c 6964 2076 616c   and invalid val
+00026fd0: 7565 7320 7769 7468 2074 6865 206c 6173  ues with the las
+00026fe0: 7420 7661 6c69 640d 0a20 2020 2020 2020  t valid..       
+00026ff0: 2020 2020 2076 616c 7565 2e0d 0a20 2020       value...   
+00027000: 2020 2020 2072 6970 7461 626c 652e 6669       riptable.fi
+00027010: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
+00027020: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00027030: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00027040: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
+00027050: 0d0a 2020 2020 2020 2020 2020 2020 7661  ..            va
+00027060: 6c75 652e 0d0a 2020 2020 2020 2020 4461  lue...        Da
+00027070: 7461 7365 742e 6669 6c6c 6e61 203a 2052  taset.fillna : R
+00027080: 6570 6c61 6365 204e 614e 2061 6e64 2069  eplace NaN and i
+00027090: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
+000270a0: 7468 2061 2073 7065 6369 6669 6564 2076  th a specified v
+000270b0: 616c 7565 206f 720d 0a20 2020 2020 2020  alue or..       
+000270c0: 2020 2020 206e 6561 7262 7920 6461 7461       nearby data
+000270d0: 2e0d 0a20 2020 2020 2020 2046 6173 7441  ...        FastA
+000270e0: 7272 6179 2e72 6570 6c61 6365 6e61 203a  rray.replacena :
+000270f0: 2052 6570 6c61 6365 204e 614e 2061 6e64   Replace NaN and
+00027100: 2069 6e76 616c 6964 2076 616c 7565 7320   invalid values 
+00027110: 7769 7468 2061 2073 7065 6369 6669 6564  with a specified
+00027120: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
+00027130: 2043 6174 6567 6f72 6963 616c 2e66 696c   Categorical.fil
+00027140: 6c5f 666f 7277 6172 6420 3a20 5265 706c  l_forward : Repl
+00027150: 6163 6520 4e61 4e20 616e 6420 696e 7661  ace NaN and inva
+00027160: 6c69 6420 7661 6c75 6573 2077 6974 6820  lid values with 
+00027170: 7468 6520 6c61 7374 2076 616c 6964 0d0a  the last valid..
+00027180: 2020 2020 2020 2020 2020 2020 6772 6f75              grou
+00027190: 7020 7661 6c75 652e 0d0a 2020 2020 2020  p value...      
+000271a0: 2020 4361 7465 676f 7269 6361 6c2e 6669    Categorical.fi
+000271b0: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
+000271c0: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+000271d0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+000271e0: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
+000271f0: 0d0a 2020 2020 2020 2020 2020 2020 6772  ..            gr
+00027200: 6f75 7020 7661 6c75 652e 0d0a 2020 2020  oup value...    
+00027210: 2020 2020 4772 6f75 7042 792e 6669 6c6c      GroupBy.fill
+00027220: 5f66 6f72 7761 7264 203a 2052 6570 6c61  _forward : Repla
+00027230: 6365 204e 614e 2061 6e64 2069 6e76 616c  ce NaN and inval
+00027240: 6964 2076 616c 7565 7320 7769 7468 2074  id values with t
+00027250: 6865 206c 6173 7420 7661 6c69 640d 0a20  he last valid.. 
+00027260: 2020 2020 2020 2020 2020 2067 726f 7570             group
+00027270: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
+00027280: 2047 726f 7570 4279 2e66 696c 6c5f 6261   GroupBy.fill_ba
+00027290: 636b 7761 7264 203a 2052 6570 6c61 6365  ckward : Replace
+000272a0: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
+000272b0: 2076 616c 7565 7320 7769 7468 2074 6865   values with the
+000272c0: 206e 6578 7420 7661 6c69 640d 0a20 2020   next valid..   
+000272d0: 2020 2020 2020 2020 2067 726f 7570 2076           group v
+000272e0: 616c 7565 2e0d 0a0d 0a20 2020 2020 2020  alue.....       
+000272f0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+00027300: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00027310: 2020 2020 2052 6570 6c61 6365 2061 6c6c       Replace all
+00027320: 204e 614e 2076 616c 7565 7320 7769 7468   NaN values with
+00027330: 2030 733a 0d0a 0d0a 2020 2020 2020 2020   0s:....        
+00027340: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
+00027350: 7272 6179 285b 7274 2e6e 616e 2c20 312e  rray([rt.nan, 1.
+00027360: 302c 2072 742e 6e61 6e2c 2072 742e 6e61  0, rt.nan, rt.na
+00027370: 6e2c 2072 742e 6e61 6e2c 2035 2e30 5d29  n, rt.nan, 5.0])
+00027380: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00027390: 6669 6c6c 6e61 2830 290d 0a20 2020 2020  fillna(0)..     
+000273a0: 2020 2046 6173 7441 7272 6179 285b 302e     FastArray([0.
+000273b0: 2c20 312e 2c20 302e 2c20 302e 2c20 302e  , 1., 0., 0., 0.
+000273c0: 2c20 352e 5d29 0d0a 0d0a 2020 2020 2020  , 5.])....      
+000273d0: 2020 5265 706c 6163 6520 616c 6c20 696e    Replace all in
+000273e0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+000273f0: 6820 3073 3a0d 0a0d 0a20 2020 2020 2020  h 0s:....       
+00027400: 203e 3e3e 2062 203d 2072 742e 4661 7374   >>> b = rt.Fast
+00027410: 4172 7261 7928 5b30 2c20 312c 2032 2c20  Array([0, 1, 2, 
+00027420: 332c 2034 2c20 355d 290d 0a20 2020 2020  3, 4, 5])..     
+00027430: 2020 203e 3e3e 2062 5b30 3a33 5d20 3d20     >>> b[0:3] = 
+00027440: 622e 696e 760d 0a20 2020 2020 2020 203e  b.inv..        >
+00027450: 3e3e 2062 2e66 696c 6c6e 6128 3029 0d0a  >> b.fillna(0)..
+00027460: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00027470: 7928 5b30 2c20 302c 2030 2c20 332c 2034  y([0, 0, 0, 3, 4
+00027480: 2c20 355d 290d 0a0d 0a20 2020 2020 2020  , 5])....       
+00027490: 2052 6570 6c61 6365 2065 6163 6820 696e   Replace each in
+000274a0: 7374 616e 6365 206f 6620 4e61 4e20 7769  stance of NaN wi
+000274b0: 7468 2061 2064 6966 6665 7265 6e74 2076  th a different v
+000274c0: 616c 7565 3a0d 0a0d 0a20 2020 2020 2020  alue:....       
+000274d0: 203e 3e3e 2061 2e66 696c 6c6e 6128 5b30   >>> a.fillna([0
+000274e0: 2c20 322c 2033 2c20 345d 290d 0a20 2020  , 2, 3, 4])..   
+000274f0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+00027500: 302e 2c20 312e 2c20 322e 2c20 332e 2c20  0., 1., 2., 3., 
+00027510: 342e 2c20 352e 5d29 0d0a 0d0a 2020 2020  4., 5.])....    
+00027520: 2020 2020 5072 6f70 6167 6174 6520 7468      Propagate th
+00027530: 6520 6c61 7374 2065 6e63 6f75 6e74 6572  e last encounter
+00027540: 6564 2076 616c 6964 2076 616c 7565 2066  ed valid value f
+00027550: 6f72 7761 7264 2e20 4e6f 7465 2074 6861  orward. Note tha
+00027560: 7420 7768 6572 6520 7468 6572 6527 7320  t where there's 
+00027570: 6e6f 0d0a 2020 2020 2020 2020 7661 6c69  no..        vali
+00027580: 6420 7661 6c75 6520 746f 2070 726f 7061  d value to propa
+00027590: 6761 7465 2c20 7468 6520 4e61 4e20 6f72  gate, the NaN or
+000275a0: 2069 6e76 616c 6964 2076 616c 7565 2069   invalid value i
+000275b0: 736e 2774 2072 6570 6c61 6365 642e 0d0a  sn't replaced...
+000275c0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+000275d0: 6669 6c6c 6e61 286d 6574 686f 6420 3d20  fillna(method = 
+000275e0: 2766 6669 6c6c 2729 0d0a 2020 2020 2020  'ffill')..      
+000275f0: 2020 4661 7374 4172 7261 7928 5b6e 616e    FastArray([nan
+00027600: 2c20 2031 2e2c 2020 312e 2c20 2031 2e2c  ,  1.,  1.,  1.,
+00027610: 2020 312e 2c20 2035 2e5d 290d 0a0d 0a20    1.,  5.]).... 
+00027620: 2020 2020 2020 2059 6f75 2063 616e 2075         You can u
+00027630: 7365 2074 6865 2060 7661 6c75 6560 2070  se the `value` p
+00027640: 6172 616d 6574 6572 2074 6f20 7370 6563  arameter to spec
+00027650: 6966 7920 6120 7661 6c75 6520 746f 2075  ify a value to u
+00027660: 7365 2077 6865 7265 2074 6865 7265 2773  se where there's
+00027670: 206e 6f0d 0a20 2020 2020 2020 2076 616c   no..        val
+00027680: 6964 2076 616c 7565 2074 6f20 7072 6f70  id value to prop
+00027690: 6167 6174 652e 0d0a 0d0a 2020 2020 2020  agate.....      
+000276a0: 2020 3e3e 3e20 612e 6669 6c6c 6e61 2876    >>> a.fillna(v
+000276b0: 616c 7565 203d 2030 2c20 6d65 7468 6f64  alue = 0, method
+000276c0: 203d 2027 6666 696c 6c27 290d 0a20 2020   = 'ffill')..   
+000276d0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+000276e0: 302e 2c20 312e 2c20 312e 2c20 312e 2c20  0., 1., 1., 1., 
+000276f0: 312e 2c20 352e 5d29 0d0a 0d0a 2020 2020  1., 5.])....    
+00027700: 2020 2020 5265 706c 6163 6520 6f6e 6c79      Replace only
+00027710: 2074 6865 2066 6972 7374 204e 614e 206f   the first NaN o
+00027720: 7220 696e 7661 6c69 6420 7661 6c75 6520  r invalid value 
+00027730: 696e 2061 6e79 2063 6f6e 7365 6375 7469  in any consecuti
+00027740: 7665 2073 6572 6965 7320 6f66 204e 614e  ve series of NaN
+00027750: 206f 720d 0a20 2020 2020 2020 2069 6e76   or..        inv
+00027760: 616c 6964 2076 616c 7565 732e 0d0a 0d0a  alid values.....
+00027770: 2020 2020 2020 2020 3e3e 3e20 612e 6669          >>> a.fi
+00027780: 6c6c 6e61 286d 6574 686f 6420 3d20 2762  llna(method = 'b
+00027790: 6669 6c6c 272c 206c 696d 6974 203d 2031  fill', limit = 1
+000277a0: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
+000277b0: 7272 6179 285b 2031 2e2c 2020 312e 2c20  rray([ 1.,  1., 
+000277c0: 6e61 6e2c 206e 616e 2c20 2035 2e2c 2020  nan, nan,  5.,  
+000277d0: 352e 5d29 0d0a 2020 2020 2020 2020 2222  5.])..        ""
+000277e0: 220d 0a20 2020 2020 2020 2069 6620 6d65  "..        if me
+000277f0: 7468 6f64 2069 7320 6e6f 7420 4e6f 6e65  thod is not None
+00027800: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+00027810: 6620 6d65 7468 6f64 2069 6e20 5b22 6261  f method in ["ba
+00027820: 636b 6669 6c6c 222c 2022 6266 696c 6c22  ckfill", "bfill"
+00027830: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+00027840: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00027850: 6669 6c6c 5f62 6163 6b77 6172 6428 7661  fill_backward(va
+00027860: 6c75 652c 2069 6e70 6c61 6365 3d69 6e70  lue, inplace=inp
+00027870: 6c61 6365 2c20 6c69 6d69 743d 6c69 6d69  lace, limit=limi
+00027880: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+00027890: 6966 206d 6574 686f 6420 696e 205b 2270  if method in ["p
+000278a0: 6164 222c 2022 6666 696c 6c22 5d3a 0d0a  ad", "ffill"]:..
+000278b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000278c0: 7265 7475 726e 2073 656c 662e 6669 6c6c  return self.fill
+000278d0: 5f66 6f72 7761 7264 2876 616c 7565 2c20  _forward(value, 
+000278e0: 696e 706c 6163 653d 696e 706c 6163 652c  inplace=inplace,
+000278f0: 206c 696d 6974 3d6c 696d 6974 290d 0a20   limit=limit).. 
+00027900: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00027910: 204b 6579 4572 726f 7228 6622 6669 6c6c   KeyError(f"fill
+00027920: 6e61 3a20 5468 6520 6d65 7468 6f64 207b  na: The method {
+00027930: 6d65 7468 6f64 2172 7d20 6d75 7374 2062  method!r} must b
+00027940: 6520 2762 6163 6b66 696c 6c27 2c20 2762  e 'backfill', 'b
+00027950: 6669 6c6c 272c 2027 7061 6427 2c20 2766  fill', 'pad', 'f
+00027960: 6669 6c6c 2722 290d 0a0d 0a20 2020 2020  fill'")....     
+00027970: 2020 2069 6620 7661 6c75 6520 6973 204e     if value is N
+00027980: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00027990: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+000279a0: 6f72 2866 2266 696c 6c6e 613a 204d 7573  or(f"fillna: Mus
+000279b0: 7420 7370 6563 6966 7920 6569 7468 6572  t specify either
+000279c0: 2061 2027 7661 6c75 6527 2074 6861 7420   a 'value' that 
+000279d0: 6973 206e 6f74 204e 6f6e 6520 6f72 2061  is not None or a
+000279e0: 2027 6d65 7468 6f64 2720 7468 6174 2069   'method' that i
+000279f0: 7320 6e6f 7420 4e6f 6e65 2e22 290d 0a0d  s not None.")...
+00027a00: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
+00027a10: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
+00027a20: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00027a30: 6520 4b65 7945 7272 6f72 2866 2266 696c  e KeyError(f"fil
+00027a40: 6c6e 613a 2054 6865 7265 2069 7320 6e6f  lna: There is no
+00027a50: 206c 696d 6974 2077 6865 6e20 6d65 7468   limit when meth
+00027a60: 6f64 2069 7320 4e6f 6e65 2229 0d0a 0d0a  od is None")....
+00027a70: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00027a80: 656c 662e 7265 706c 6163 656e 6128 7661  elf.replacena(va
+00027a90: 6c75 652c 2069 6e70 6c61 6365 3d69 6e70  lue, inplace=inp
+00027aa0: 6c61 6365 290d 0a0d 0a20 2020 2064 6566  lace)....    def
+00027ab0: 2073 7461 7478 2873 656c 6629 202d 3e20   statx(self) -> 
+00027ac0: 4461 7461 7365 743a 0d0a 2020 2020 2020  Dataset:..      
+00027ad0: 2020 7265 7475 726e 2073 7461 7478 2873    return statx(s
+00027ae0: 656c 6629 0d0a 0d0a 2020 2020 2320 2d2d  elf)....    # --
+00027af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00027b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00027b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00027b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00027b30: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+00027b40: 6566 205f 6973 5f6e 6f74 5f73 7570 706f  ef _is_not_suppo
+00027b50: 7274 6564 2873 656c 662c 2061 7272 293a  rted(self, arr):
+00027b60: 0d0a 2020 2020 2020 2020 2222 2272 6574  ..        """ret
+00027b70: 7572 6e73 2054 7275 6520 6966 2061 206e  urns True if a n
+00027b80: 756d 7079 2061 7272 6179 2069 7320 6e6f  umpy array is no
+00027b90: 7420 4661 7374 4172 7261 7920 696e 7465  t FastArray inte
+00027ba0: 726e 616c 6c79 2073 7570 706f 7274 6564  rnally supported
+00027bb0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
+00027bc0: 6e6f 7420 2861 7272 2e66 6c61 6773 2e63  not (arr.flags.c
+00027bd0: 5f63 6f6e 7469 6775 6f75 7320 6f72 2061  _contiguous or a
+00027be0: 7272 2e66 6c61 6773 2e66 5f63 6f6e 7469  rr.flags.f_conti
+00027bf0: 6775 6f75 7329 3a0d 0a20 2020 2020 2020  guous):..       
+00027c00: 2020 2020 2023 2054 4f44 4f20 656e 6162       # TODO enab
+00027c10: 6c65 2074 6869 7320 7761 726e 696e 6720  le this warning 
+00027c20: 696e 2061 2066 7574 7572 6520 6d69 6e6f  in a future mino
+00027c30: 7220 7265 6c65 6173 650d 0a20 2020 2020  r release..     
+00027c40: 2020 2020 2020 2023 2046 6173 7441 7272         # FastArr
+00027c50: 6179 2e5f 706f 7373 6962 6c79 5f77 6172  ay._possibly_war
+00027c60: 6e28 6627 5f69 735f 6e6f 745f 7375 7070  n(f'_is_not_supp
+00027c70: 6f72 7465 643a 2075 6e73 7570 706f 7274  orted: unsupport
+00027c80: 6564 2061 7272 6179 2066 6c61 6773 207b  ed array flags {
+00027c90: 6172 722e 666c 6167 737d 2729 0d0a 2020  arr.flags}')..  
+00027ca0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00027cb0: 2054 7275 650d 0a20 2020 2020 2020 2069   True..        i
+00027cc0: 6620 6172 722e 6474 7970 652e 6368 6172  f arr.dtype.char
+00027cd0: 206e 6f74 2069 6e20 4e75 6d70 7943 6861   not in NumpyCha
+00027ce0: 7254 7970 6573 2e53 7570 706f 7274 6564  rTypes.Supported
+00027cf0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00027d00: 2054 4f44 4f20 656e 6162 6c65 2074 6869   TODO enable thi
+00027d10: 7320 7761 726e 696e 6720 696e 2061 2066  s warning in a f
+00027d20: 7574 7572 6520 6d69 6e6f 7220 7265 6c65  uture minor rele
+00027d30: 6173 650d 0a20 2020 2020 2020 2020 2020  ase..           
+00027d40: 2023 2046 6173 7441 7272 6179 2e5f 706f   # FastArray._po
+00027d50: 7373 6962 6c79 5f77 6172 6e28 6627 5f69  ssibly_warn(f'_i
+00027d60: 735f 6e6f 745f 7375 7070 6f72 7465 643a  s_not_supported:
+00027d70: 2075 6e73 7570 706f 7274 6564 2061 7272   unsupported arr
+00027d80: 6179 2064 7479 7065 207b 6172 722e 6474  ay dtype {arr.dt
+00027d90: 7970 657d 5c6e 5375 7070 6f72 7465 6420  ype}\nSupported 
+00027da0: 6474 7970 6573 207b 4e75 6d70 7943 6861  dtypes {NumpyCha
+00027db0: 7254 7970 6573 2e53 7570 706f 7274 6564  rTypes.Supported
+00027dc0: 7d27 290d 0a20 2020 2020 2020 2020 2020  }')..           
+00027dd0: 2072 6574 7572 6e20 5472 7565 0d0a 2020   return True..  
+00027de0: 2020 2020 2020 6966 206c 656e 2861 7272        if len(arr
+00027df0: 2e73 7472 6964 6573 2920 3d3d 2030 3a0d  .strides) == 0:.
+00027e00: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+00027e10: 4f44 4f20 656e 6162 6c65 2074 6869 7320  ODO enable this 
+00027e20: 7761 726e 696e 6720 696e 2061 2066 7574  warning in a fut
+00027e30: 7572 6520 6d69 6e6f 7220 7265 6c65 6173  ure minor releas
+00027e40: 650d 0a20 2020 2020 2020 2020 2020 2023  e..            #
+00027e50: 2046 6173 7441 7272 6179 2e5f 706f 7373   FastArray._poss
+00027e60: 6962 6c79 5f77 6172 6e28 6627 5f69 735f  ibly_warn(f'_is_
+00027e70: 6e6f 745f 7375 7070 6f72 7465 643a 2075  not_supported: u
+00027e80: 6e73 7570 706f 7274 6564 2061 7272 6179  nsupported array
+00027e90: 2073 7472 6964 6573 207b 6172 722e 7374   strides {arr.st
+00027ea0: 7269 6465 737d 2729 0d0a 2020 2020 2020  rides}')..      
+00027eb0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+00027ec0: 650d 0a20 2020 2020 2020 2072 6574 7572  e..        retur
+00027ed0: 6e20 4661 6c73 650d 0a0d 0a20 2020 2023  n False....    #
+00027ee0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00027ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00027f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00027f10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00027f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
+00027f30: 2020 6465 6620 5f5f 6172 7261 795f 6675    def __array_fu
+00027f40: 6e63 7469 6f6e 5f5f 2873 656c 662c 2066  nction__(self, f
+00027f50: 756e 632c 2074 7970 6573 2c20 6172 6773  unc, types, args
+00027f60: 2c20 6b77 6172 6773 293a 0d0a 2020 2020  , kwargs):..    
+00027f70: 2020 2020 6966 2073 656c 662e 4e45 575f      if self.NEW_
+00027f80: 4152 5241 595f 4655 4e43 5449 4f4e 5f45  ARRAY_FUNCTION_E
+00027f90: 4e41 424c 4544 3a0d 0a20 2020 2020 2020  NABLED:..       
+00027fa0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00027fb0: 2e5f 6e65 775f 6172 7261 795f 6675 6e63  ._new_array_func
+00027fc0: 7469 6f6e 2866 756e 632c 2074 7970 6573  tion(func, types
+00027fd0: 2c20 6172 6773 2c20 6b77 6172 6773 290d  , args, kwargs).
+00027fe0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00027ff0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00028000: 726e 2073 656c 662e 5f6c 6567 6163 795f  rn self._legacy_
+00028010: 6172 7261 795f 6675 6e63 7469 6f6e 2866  array_function(f
+00028020: 756e 632c 2074 7970 6573 2c20 6172 6773  unc, types, args
+00028030: 2c20 6b77 6172 6773 290d 0a0d 0a20 2020  , kwargs)....   
+00028040: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+00028050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00028090: 2020 2020 6465 6620 5f6c 6567 6163 795f      def _legacy_
+000280a0: 6172 7261 795f 6675 6e63 7469 6f6e 2873  array_function(s
+000280b0: 656c 662c 2066 756e 632c 2074 7970 6573  elf, func, types
+000280c0: 2c20 6172 6773 2c20 6b77 6172 6773 293a  , args, kwargs):
+000280d0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+000280e0: 2020 2020 2020 2043 616c 6c65 6420 6265         Called be
+000280f0: 666f 7265 2061 7272 6179 5f75 6675 6e63  fore array_ufunc
+00028100: 2e0d 0a20 2020 2020 2020 2044 6f65 7320  ...        Does 
+00028110: 6e6f 7420 6765 7420 6361 6c6c 6564 2066  not get called f
+00028120: 6f72 2065 7665 7279 2066 756e 6374 696f  or every functio
+00028130: 6e20 6e70 2e69 736e 616e 2f74 7275 6e63  n np.isnan/trunc
+00028140: 2f74 7275 655f 6469 7669 6465 2066 6f72  /true_divide for
+00028150: 2069 6e73 7461 6e63 652e 0d0a 2020 2020   instance...    
+00028160: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00028170: 2072 6564 7563 6546 756e 6320 3d20 4e55   reduceFunc = NU
+00028180: 4d50 595f 434f 4e56 4552 5349 4f4e 5f54  MPY_CONVERSION_T
+00028190: 4142 4c45 2e67 6574 2866 756e 632c 204e  ABLE.get(func, N
+000281a0: 6f6e 6529 0d0a 0d0a 2020 2020 2020 2020  one)....        
+000281b0: 2320 544f 444f 3a0d 0a20 2020 2020 2020  # TODO:..       
+000281c0: 2023 206b 7761 7267 7320 6f66 2027 6178   # kwargs of 'ax
+000281d0: 6973 273a 204e 6f6e 6520 2027 6f75 7427  is': None  'out'
+000281e0: 3a20 4e6f 6e65 2073 686f 756c 6420 6265  : None should be
+000281f0: 2061 6363 6570 7465 640d 0a0d 0a20 2020   accepted....   
+00028200: 2020 2020 2069 6620 7265 6475 6365 4675       if reduceFu
+00028210: 6e63 2069 7320 6e6f 7420 4e6f 6e65 2061  nc is not None a
+00028220: 6e64 206c 656e 286b 7761 7267 7329 203d  nd len(kwargs) =
+00028230: 3d20 303a 0d0a 2020 2020 2020 2020 2020  = 0:..          
+00028240: 2020 2320 7370 6565 6420 7061 7468 2028    # speed path (
+00028250: 746f 646f 2061 6464 2063 616c 6c20 746f  todo add call to
+00028260: 206c 6564 6765 7229 0d0a 2020 2020 2020   ledger)..      
+00028270: 2020 2020 2020 2320 6465 6661 756c 7420        # default 
+00028280: 746f 2064 646f 663d 3020 7768 656e 206e  to ddof=0 when n
+00028290: 6f20 6b77 6172 6773 2070 6173 7365 640d  o kwargs passed.
+000282a0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+000282b0: 756c 7420 3d20 7263 2e52 6564 7563 6528  ult = rc.Reduce(
+000282c0: 6172 6773 5b30 5d2c 2072 6564 7563 6546  args[0], reduceF
+000282d0: 756e 632c 2030 290d 0a0d 0a20 2020 2020  unc, 0)....     
+000282e0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+000282f0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00028300: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00028310: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
+00028320: 7468 4c65 6467 6572 2e5f 5245 4455 4345  thLedger._REDUCE
+00028330: 2861 7267 735b 305d 2c20 6e65 7766 756e  (args[0], newfun
+00028340: 6329 0d0a 0d0a 2020 2020 2020 2020 2020  c)....          
+00028350: 2020 2020 2020 6474 7970 6520 3d20 6b77        dtype = kw
+00028360: 6172 6773 2e67 6574 2822 6474 7970 6522  args.get("dtype"
+00028370: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+00028380: 2020 2020 2020 2020 2069 6620 6474 7970           if dtyp
+00028390: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
+000283a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000283b0: 2020 2020 2320 7573 6572 2066 6f72 6365      # user force
+000283c0: 6420 6474 7970 6520 7265 7475 726e 2076  d dtype return v
+000283d0: 616c 7565 0d0a 2020 2020 2020 2020 2020  alue..          
+000283e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000283f0: 2064 7479 7065 2872 6573 756c 7429 0d0a   dtype(result)..
+00028400: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028410: 2020 2320 7072 6573 6572 7665 2074 7970    # preserve typ
+00028420: 6520 666f 7220 6d69 6e2f 6d61 782f 6e61  e for min/max/na
+00028430: 6e6d 696e 2f6e 616e 6d61 780d 0a20 2020  nmin/nanmax..   
+00028440: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00028450: 7265 6475 6365 4675 6e63 2069 6e20 5b0d  reduceFunc in [.
+00028460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028470: 2020 2020 2052 4544 5543 455f 4655 4e43       REDUCE_FUNC
+00028480: 5449 4f4e 532e 5245 4455 4345 5f4d 494e  TIONS.REDUCE_MIN
+00028490: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000284a0: 2020 2020 2020 2052 4544 5543 455f 4655         REDUCE_FU
+000284b0: 4e43 5449 4f4e 532e 5245 4455 4345 5f4e  NCTIONS.REDUCE_N
+000284c0: 414e 4d49 4e2c 0d0a 2020 2020 2020 2020  ANMIN,..        
+000284d0: 2020 2020 2020 2020 2020 2020 5245 4455              REDU
+000284e0: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
+000284f0: 5543 455f 4d41 582c 0d0a 2020 2020 2020  UCE_MAX,..      
+00028500: 2020 2020 2020 2020 2020 2020 2020 5245                RE
+00028510: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00028520: 4544 5543 455f 4e41 4e4d 4158 2c0d 0a20  EDUCE_NANMAX,.. 
+00028530: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00028540: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00028550: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00028560: 6c66 2e64 7479 7065 2e74 7970 6528 7265  lf.dtype.type(re
+00028570: 7375 6c74 290d 0a0d 0a20 2020 2020 2020  sult)....       
+00028580: 2020 2020 2020 2020 2023 2069 6e74 6572           # inter
+00028590: 6e61 6c6c 7920 6e75 6d70 7920 6578 7065  nally numpy expe
+000285a0: 6374 7320 6120 6474 7970 6520 7265 7475  cts a dtype retu
+000285b0: 726e 6564 2066 6f72 206e 616e 7374 6420  rned for nanstd 
+000285c0: 616e 6420 6f74 6865 7220 6361 6c63 756c  and other calcul
+000285d0: 6174 696f 6e73 0d0a 2020 2020 2020 2020  ations..        
+000285e0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+000285f0: 7461 6e63 6528 7265 7375 6c74 2c20 2869  tance(result, (i
+00028600: 6e74 2c20 6e70 2e69 6e74 6567 6572 2929  nt, np.integer))
+00028610: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00028620: 2020 2020 2020 2023 2066 6f72 2075 696e         # for uin
+00028630: 7436 342c 2074 6865 2068 6967 6820 6269  t64, the high bi
+00028640: 7420 6d75 7374 2062 6520 7072 6573 6572  t must be preser
+00028650: 7665 640d 0a20 2020 2020 2020 2020 2020  ved..           
+00028660: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00028670: 2e64 7479 7065 2e63 6861 7220 696e 204e  .dtype.char in N
+00028680: 756d 7079 4368 6172 5479 7065 732e 556e  umpyCharTypes.Un
+00028690: 7369 676e 6564 496e 7465 6765 7236 343a  signedInteger64:
+000286a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000286b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000286c0: 206e 702e 7569 6e74 3634 2872 6573 756c   np.uint64(resul
+000286d0: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+000286e0: 2020 2020 2020 2020 7265 7475 726e 206e          return n
+000286f0: 702e 696e 7436 3428 7265 7375 6c74 290d  p.int64(result).
+00028700: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00028710: 2020 2072 6574 7572 6e20 6e70 2e66 6c6f     return np.flo
+00028720: 6174 3634 2872 6573 756c 7429 0d0a 2020  at64(result)..  
+00028730: 2020 2020 2020 2320 6361 6c6c 2074 6865        # call the
+00028740: 2076 6572 7369 6f6e 206e 756d 7079 2077   version numpy w
+00028750: 616e 7465 6420 7573 6520 746f 0d0a 2020  anted use to..  
+00028760: 2020 2020 2020 7265 7475 726e 2073 7570        return sup
+00028770: 6572 2846 6173 7441 7272 6179 2c20 7365  er(FastArray, se
+00028780: 6c66 292e 5f5f 6172 7261 795f 6675 6e63  lf).__array_func
+00028790: 7469 6f6e 5f5f 2866 756e 632c 2074 7970  tion__(func, typ
+000287a0: 6573 2c20 6172 6773 2c20 6b77 6172 6773  es, args, kwargs
+000287b0: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+000287c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000287d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000287e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000287f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028800: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00028810: 5f6e 6577 5f61 7272 6179 5f66 756e 6374  _new_array_funct
+00028820: 696f 6e28 7365 6c66 2c20 6675 6e63 3a20  ion(self, func: 
+00028830: 4361 6c6c 6162 6c65 2c20 7479 7065 733a  Callable, types:
+00028840: 2074 7570 6c65 2c20 6172 6773 3a20 7475   tuple, args: tu
+00028850: 706c 652c 206b 7761 7267 733a 2064 6963  ple, kwargs: dic
+00028860: 7429 3a0d 0a20 2020 2020 2020 2022 2222  t):..        """
+00028870: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00028880: 7261 7920 696d 706c 656d 656e 7461 7469  ray implementati
+00028890: 6f6e 206f 6620 7468 6520 6172 7261 7920  on of the array 
+000288a0: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
+000288b0: 6c2e 0d0a 0d0a 2020 2020 2020 2020 5061  l.....        Pa
+000288c0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+000288d0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+000288e0: 2020 2020 2020 6675 6e63 3a20 6361 6c6c        func: call
+000288f0: 6162 6c65 0d0a 2020 2020 2020 2020 2020  able..          
+00028900: 2020 416e 2063 616c 6c61 626c 6520 6578    An callable ex
+00028910: 706f 7365 6420 6279 204e 756d 5079 e280  posed by NumPy..
+00028920: 9973 2070 7562 6c69 6320 4150 492c 2077  .s public API, w
+00028930: 6869 6368 2077 6173 2063 616c 6c65 6420  hich was called 
+00028940: 696e 2074 6865 2066 6f72 6d20 6060 6675  in the form ``fu
+00028950: 6e63 282a 6172 6773 2c20 2a2a 6b77 6172  nc(*args, **kwar
+00028960: 6773 2960 602e 0d0a 2020 2020 2020 2020  gs)``...        
+00028970: 7479 7065 733a 2074 7570 6c65 0d0a 2020  types: tuple..  
+00028980: 2020 2020 2020 2020 2020 4120 7475 706c            A tupl
+00028990: 6520 6f66 2075 6e69 7175 6520 6172 6775  e of unique argu
+000289a0: 6d65 6e74 2074 7970 6573 2066 726f 6d20  ment types from 
+000289b0: 7468 6520 6f72 6967 696e 616c 204e 756d  the original Num
+000289c0: 5079 2066 756e 6374 696f 6e20 6361 6c6c  Py function call
+000289d0: 2074 6861 7420 696d 706c 656d 656e 7420   that implement 
+000289e0: 6060 5f5f 6172 7261 795f 6675 6e63 7469  ``__array_functi
+000289f0: 6f6e 5f5f 6060 2e0d 0a20 2020 2020 2020  on__``...       
+00028a00: 2061 7267 733a 2074 7570 6c65 0d0a 2020   args: tuple..  
+00028a10: 2020 2020 2020 2020 2020 5468 6520 7475            The tu
+00028a20: 706c 6520 6f66 2061 7267 756d 656e 7473  ple of arguments
+00028a30: 2074 6861 7420 7769 6c6c 2062 6520 7061   that will be pa
+00028a40: 7373 6564 2074 6f20 6066 756e 6360 2e0d  ssed to `func`..
+00028a50: 0a20 2020 2020 2020 206b 7761 7267 733a  .        kwargs:
+00028a60: 2064 6963 740d 0a20 2020 2020 2020 2020   dict..         
+00028a70: 2020 2054 6865 2064 6963 7469 6f6e 6172     The dictionar
+00028a80: 7920 6f66 206b 6579 776f 7264 2061 7267  y of keyword arg
+00028a90: 756d 656e 7473 2074 6861 7420 7769 6c6c  uments that will
+00028aa0: 2062 6520 7061 7373 6564 2074 6f20 6066   be passed to `f
+00028ab0: 756e 6360 2e0d 0a0d 0a20 2020 2020 2020  unc`.....       
+00028ac0: 2052 6169 7365 730d 0a20 2020 2020 2020   Raises..       
+00028ad0: 202d 2d2d 2d2d 2d0d 0a20 2020 2020 2020   ------..       
+00028ae0: 2054 7970 6545 7272 6f72 0d0a 2020 2020   TypeError..    
+00028af0: 2020 2020 2020 2020 4966 2060 6675 6e63          If `func
+00028b00: 6020 6973 206e 6f74 206f 7665 7272 6964  ` is not overrid
+00028b10: 6465 6e20 6279 2061 2063 6f72 7265 7370  den by a corresp
+00028b20: 6f6e 6469 6e67 2072 6970 7461 626c 6520  onding riptable 
+00028b30: 6172 7261 7920 6675 6e63 7469 6f6e 2074  array function t
+00028b40: 6865 6e20 6120 5479 7065 4572 726f 7220  hen a TypeError 
+00028b50: 6973 2072 6169 7365 642e 0d0a 0d0a 2020  is raised.....  
+00028b60: 2020 2020 2020 4e6f 7465 730d 0a20 2020        Notes..   
+00028b70: 2020 2020 202d 2d2d 2d2d 0d0a 2020 2020       -----..    
+00028b80: 2020 2020 5468 6973 2061 7272 6179 2066      This array f
+00028b90: 756e 6374 696f 6e20 696d 706c 656d 656e  unction implemen
+00028ba0: 7461 7469 6f6e 2072 6571 7569 7265 7320  tation requires 
+00028bb0: 6561 6368 2063 6c61 7373 2c20 7375 6368  each class, such
+00028bc0: 2061 7320 4661 7374 4172 7261 7920 616e   as FastArray an
+00028bd0: 6420 616e 7920 6f74 6865 7220 6465 7269  d any other deri
+00028be0: 7665 6420 636c 6173 732c 0d0a 2020 2020  ved class,..    
+00028bf0: 2020 2020 746f 2069 6d70 6c65 6d65 6e74      to implement
+00028c00: 2074 6865 6972 206f 776e 2076 6572 7369   their own versi
+00028c10: 6f6e 206f 6620 7468 6520 4e75 6d70 7920  on of the Numpy 
+00028c20: 6172 7261 7920 6675 6e63 7469 6f6e 2041  array function A
+00028c30: 5049 2e20 496e 2074 6865 2065 7665 6e74  PI. In the event
+00028c40: 2074 6865 7365 2061 7272 6179 2066 756e   these array fun
+00028c50: 6374 696f 6e73 2064 6566 6572 2074 6f20  ctions defer to 
+00028c60: 7468 650d 0a20 2020 2020 2020 2069 6e68  the..        inh
+00028c70: 6572 6974 696e 6720 636c 6173 7320 7468  eriting class th
+00028c80: 6579 2077 696c 6c20 6e65 6564 2074 6f20  ey will need to 
+00028c90: 6569 7468 6572 2072 652d 7772 6170 2074  either re-wrap t
+00028ca0: 6865 2072 6573 756c 7473 2069 6e20 7468  he results in th
+00028cb0: 6520 636f 7272 6563 7420 7479 7065 206f  e correct type o
+00028cc0: 7220 7261 6973 6520 6578 6365 7074 696f  r raise exceptio
+00028cd0: 6e20 6966 2061 0d0a 2020 2020 2020 2020  n if a..        
+00028ce0: 7061 7274 6963 756c 6172 206f 7065 7261  particular opera
+00028cf0: 7469 6f6e 2069 7320 6e6f 7420 7765 6c6c  tion is not well
+00028d00: 2d64 6566 696e 6564 206e 6f72 206d 6561  -defined nor mea
+00028d10: 6e69 6e67 6675 6c20 666f 7220 7468 6520  ningful for the 
+00028d20: 6465 7269 7665 6420 636c 6173 732e 0d0a  derived class...
+00028d30: 2020 2020 2020 2020 4966 2061 6e20 6172          If an ar
+00028d40: 7261 7920 6675 6e63 7469 6f6e 2c20 7768  ray function, wh
+00028d50: 6963 6820 6973 2061 6c73 6f20 6120 756e  ich is also a un
+00028d60: 6976 6572 7361 6c20 6675 6e63 7469 6f6e  iversal function
+00028d70: 2c20 6973 206e 6f74 206f 7665 7272 6964  , is not overrid
+00028d80: 6465 6e20 6173 2061 6e20 6172 7261 7920  den as an array 
+00028d90: 6675 6e63 7469 6f6e 2c20 6275 7420 6465  function, but de
+00028da0: 6669 6e65 640d 0a20 2020 2020 2020 2061  fined..        a
+00028db0: 7320 6120 7566 756e 6320 7468 656e 2069  s a ufunc then i
+00028dc0: 7420 7769 6c6c 206e 6f74 2062 6520 6361  t will not be ca
+00028dd0: 6c6c 6564 2075 6e6c 6573 7320 6974 2069  lled unless it i
+00028de0: 7320 7265 6769 7374 6572 6564 2077 6974  s registered wit
+00028df0: 6820 7468 6520 6172 7261 7920 6675 6e63  h the array func
+00028e00: 7469 6f6e 2068 656c 7065 7220 7369 6e63  tion helper sinc
+00028e10: 6520 6172 7261 7920 6675 6e63 7469 6f6e  e array function
+00028e20: 0d0a 2020 2020 2020 2020 7072 6f74 6f63  ..        protoc
+00028e30: 6f6c 2074 616b 6573 2070 7269 6f72 6974  ol takes priorit
+00028e40: 7920 6f76 6572 2074 6865 2075 6e69 7665  y over the unive
+00028e50: 7273 616c 2066 756e 6374 696f 6e20 7072  rsal function pr
+00028e60: 6f74 6f63 6f6c 2e0d 0a0d 0a20 2020 2020  otocol.....     
+00028e70: 2020 2052 6566 6572 656e 6365 3a20 604e     Reference: `N
+00028e80: 4550 2031 3820 4172 7261 7920 4675 6e63  EP 18 Array Func
+00028e90: 7469 6f6e 2050 726f 746f 636f 6c20 3c68  tion Protocol <h
+00028ea0: 7474 7073 3a2f 2f6e 756d 7079 2e6f 7267  ttps://numpy.org
+00028eb0: 2f6e 6570 732f 6e65 702d 3030 3138 2d61  /neps/nep-0018-a
+00028ec0: 7272 6179 2d66 756e 6374 696f 6e2d 7072  rray-function-pr
+00028ed0: 6f74 6f63 6f6c 2e68 746d 6c3e 605f 0d0a  otocol.html>`_..
+00028ee0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00028ef0: 2020 2020 2069 6620 6c6f 6767 6572 2e69       if logger.i
+00028f00: 7345 6e61 626c 6564 466f 7228 6c6f 6767  sEnabledFor(logg
+00028f10: 696e 672e 4445 4255 4729 3a0d 0a20 2020  ing.DEBUG):..   
+00028f20: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
+00028f30: 6465 6275 6728 0d0a 2020 2020 2020 2020  debug(..        
+00028f40: 2020 2020 2020 2020 6622 7b46 6173 7441          f"{FastA
+00028f50: 7272 6179 2e5f 5f6e 616d 655f 5f7d 2e5f  rray.__name__}._
+00028f60: 6e65 775f 6172 7261 795f 6675 6e63 7469  new_array_functi
+00028f70: 6f6e 2866 756e 3d7b 6675 6e63 7d2c 2074  on(fun={func}, t
+00028f80: 7970 6573 3d7b 7479 7065 737d 2c20 6172  ypes={types}, ar
+00028f90: 6773 3d7b 6172 6773 7d2c 206b 7761 7267  gs={args}, kwarg
+00028fa0: 733d 7b6b 7761 7267 737d 2922 0d0a 2020  s={kwargs})"..  
+00028fb0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00028fc0: 2020 2020 2023 2068 616e 646c 6520 6066       # handle `f
+00028fd0: 756e 6360 2061 7267 756d 656e 740d 0a20  unc` argument.. 
+00028fe0: 2020 2020 2020 2061 7272 6179 5f66 756e         array_fun
+00028ff0: 633a 2043 616c 6c61 626c 6520 3d20 4661  c: Callable = Fa
+00029000: 7374 4172 7261 792e 5f41 7272 6179 4675  stArray._ArrayFu
+00029010: 6e63 7469 6f6e 4865 6c70 6572 2e67 6574  nctionHelper.get
+00029020: 5f61 7272 6179 5f66 756e 6374 696f 6e28  _array_function(
+00029030: 6675 6e63 290d 0a20 2020 2020 2020 2069  func)..        i
+00029040: 6620 6172 7261 795f 6675 6e63 2069 7320  f array_func is 
+00029050: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00029060: 2020 2023 2066 616c 6c62 6163 6b20 746f     # fallback to
+00029070: 206e 756d 7079 2066 6f72 2075 6e68 616e   numpy for unhan
+00029080: 646c 6564 2061 7272 6179 2066 756e 6374  dled array funct
+00029090: 696f 6e73 2061 6e64 2061 7474 656d 7074  ions and attempt
+000290a0: 2074 6f20 6361 7374 2062 6163 6b20 746f   to cast back to
+000290b0: 2046 6173 7441 7272 6179 0d0a 2020 2020   FastArray..    
+000290c0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+000290d0: 2073 7570 6572 2829 2e5f 5f61 7272 6179   super().__array
+000290e0: 5f66 756e 6374 696f 6e5f 5f28 6675 6e63  _function__(func
+000290f0: 2c20 7479 7065 732c 2061 7267 732c 206b  , types, args, k
+00029100: 7761 7267 7329 0d0a 2020 2020 2020 2020  wargs)..        
+00029110: 2020 2020 6966 2072 6573 756c 7420 6973      if result is
+00029120: 204e 6f74 496d 706c 656d 656e 7465 643a   NotImplemented:
+00029130: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029140: 2020 7265 7475 726e 204e 6f74 496d 706c    return NotImpl
+00029150: 656d 656e 7465 640d 0a20 2020 2020 2020  emented..       
+00029160: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
+00029170: 616e 6365 2872 6573 756c 742c 206e 702e  ance(result, np.
+00029180: 6e64 6172 7261 7929 3a0d 0a20 2020 2020  ndarray):..     
+00029190: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000291a0: 6e20 7265 7375 6c74 2e76 6965 7728 4661  n result.view(Fa
+000291b0: 7374 4172 7261 7929 0d0a 2020 2020 2020  stArray)..      
+000291c0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+000291d0: 7461 6e63 6528 7265 7375 6c74 2c20 6c69  tance(result, li
+000291e0: 7374 293a 0d0a 2020 2020 2020 2020 2020  st):..          
+000291f0: 2020 2020 2020 7265 7475 726e 205b 2878        return [(x
+00029200: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
+00029210: 2069 6620 6973 696e 7374 616e 6365 2878   if isinstance(x
+00029220: 2c20 6e70 2e6e 6461 7272 6179 2920 656c  , np.ndarray) el
+00029230: 7365 2078 2920 666f 7220 7820 696e 2072  se x) for x in r
+00029240: 6573 756c 745d 0d0a 2020 2020 2020 2020  esult]..        
+00029250: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+00029260: 6e63 6528 7265 7375 6c74 2c20 7475 706c  nce(result, tupl
+00029270: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
+00029280: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
+00029290: 6528 5b28 782e 7669 6577 2846 6173 7441  e([(x.view(FastA
+000292a0: 7272 6179 2920 6966 2069 7369 6e73 7461  rray) if isinsta
+000292b0: 6e63 6528 782c 206e 702e 6e64 6172 7261  nce(x, np.ndarra
+000292c0: 7929 2065 6c73 6520 7829 2066 6f72 2078  y) else x) for x
+000292d0: 2069 6e20 7265 7375 6c74 5d29 0d0a 2020   in result])..  
+000292e0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+000292f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00029300: 2023 2055 6e6b 6e6f 776e 2072 6573 756c   # Unknown resul
+00029310: 7420 7479 7065 2e0d 0a20 2020 2020 2020  t type...       
+00029320: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
+00029330: 7970 6545 7272 6f72 2866 2255 6e6b 6e6f  ypeError(f"Unkno
+00029340: 776e 2072 6573 756c 7420 7479 7065 2027  wn result type '
+00029350: 7b74 7970 6528 7265 7375 6c74 297d 2720  {type(result)}' 
+00029360: 7265 7475 726e 6564 2062 7920 6e64 6172  returned by ndar
+00029370: 7261 792e 7b66 756e 637d 2e22 290d 0a0d  ray.{func}.")...
+00029380: 0a20 2020 2020 2020 2023 2068 616e 646c  .        # handl
+00029390: 6520 6074 7970 6573 6020 6172 6775 6d65  e `types` argume
+000293a0: 6e74 0d0a 2020 2020 2020 2020 6172 7261  nt..        arra
+000293b0: 795f 6675 6e63 5f74 7970 655f 6368 6563  y_func_type_chec
+000293c0: 6b3a 2043 616c 6c61 626c 6520 3d20 4661  k: Callable = Fa
+000293d0: 7374 4172 7261 792e 5f41 7272 6179 4675  stArray._ArrayFu
+000293e0: 6e63 7469 6f6e 4865 6c70 6572 2e67 6574  nctionHelper.get
+000293f0: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
+00029400: 7479 7065 5f63 6f6d 7061 7469 6269 6c69  type_compatibili
+00029410: 7479 5f63 6865 636b 280d 0a20 2020 2020  ty_check(..     
+00029420: 2020 2020 2020 2066 756e 630d 0a20 2020         func..   
+00029430: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00029440: 6966 2061 7272 6179 5f66 756e 635f 7479  if array_func_ty
+00029450: 7065 5f63 6865 636b 2069 7320 4e6f 6e65  pe_check is None
+00029460: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00029470: 206e 6f20 6375 7374 6f6d 2074 7970 6520   no custom type 
+00029480: 636f 6d70 6174 6962 696c 6974 7920 6368  compatibility ch
+00029490: 6563 6b3b 2064 6566 6175 6c74 2074 7970  eck; default typ
+000294a0: 6520 636f 6d70 6174 6962 696c 6974 7920  e compatibility 
+000294b0: 6368 6563 6b0d 0a20 2020 2020 2020 2020  check..         
+000294c0: 2020 2023 2074 6869 7320 616c 6c6f 7773     # this allows
+000294d0: 2073 7562 636c 6173 7365 7320 7468 6174   subclasses that
+000294e0: 2064 6f6e 2774 206f 7665 7272 6964 6520   don't override 
+000294f0: 5f5f 6172 7261 795f 6675 6e63 7469 6f6e  __array_function
+00029500: 5f5f 2074 6f20 6861 6e64 6c65 2046 6173  __ to handle Fas
+00029510: 7441 7272 6179 206f 626a 6563 7473 0d0a  tArray objects..
+00029520: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00029530: 7479 7020 696e 2074 7970 6573 3a0d 0a20  typ in types:.. 
+00029540: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00029550: 6620 6e6f 7420 6973 7375 6263 6c61 7373  f not issubclass
+00029560: 2874 7970 2c20 4661 7374 4172 7261 7929  (typ, FastArray)
+00029570: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00029580: 2020 2020 2020 2069 6620 6c6f 6767 6572         if logger
+00029590: 2e69 7345 6e61 626c 6564 466f 7228 6c6f  .isEnabledFor(lo
+000295a0: 6767 696e 672e 4445 4255 4729 3a0d 0a20  gging.DEBUG):.. 
+000295b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000295c0: 2020 2020 2020 206c 6f67 6765 722e 6465         logger.de
+000295d0: 6275 6728 6622 7b46 6173 7441 7272 6179  bug(f"{FastArray
+000295e0: 2e5f 5f6e 616d 655f 5f7d 2e5f 5f61 7272  .__name__}.__arr
+000295f0: 6179 5f66 756e 6374 696f 6e5f 5f3a 2075  ay_function__: u
+00029600: 6e73 7570 706f 7274 6564 2074 7970 6520  nsupported type 
+00029610: 7b72 6570 7228 7479 7029 7d22 290d 0a20  {repr(typ)}").. 
+00029620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029630: 2020 2072 6574 7572 6e20 4e6f 7449 6d70     return NotImp
+00029640: 6c65 6d65 6e74 6564 0d0a 2020 2020 2020  lemented..      
+00029650: 2020 656c 7365 3a20 2023 2063 7573 746f    else:  # custo
+00029660: 6d20 7479 7065 2063 6f6d 7061 7469 6269  m type compatibi
+00029670: 6c69 7479 2063 6865 636b 0d0a 2020 2020  lity check..    
+00029680: 2020 2020 2020 2020 7661 6c69 643a 2062          valid: b
+00029690: 6f6f 6c20 3d20 6172 7261 795f 6675 6e63  ool = array_func
+000296a0: 5f74 7970 655f 6368 6563 6b28 7479 7065  _type_check(type
+000296b0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+000296c0: 6966 206e 6f74 2076 616c 6964 3a0d 0a20  if not valid:.. 
+000296d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000296e0: 6620 6c6f 6767 6572 2e69 7345 6e61 626c  f logger.isEnabl
+000296f0: 6564 466f 7228 6c6f 6767 696e 672e 4445  edFor(logging.DE
+00029700: 4255 4729 3a0d 0a20 2020 2020 2020 2020  BUG):..         
+00029710: 2020 2020 2020 2020 2020 206c 6f67 6765             logge
+00029720: 722e 6465 6275 6728 6622 7b46 6173 7441  r.debug(f"{FastA
+00029730: 7272 6179 2e5f 5f6e 616d 655f 5f7d 2e5f  rray.__name__}._
+00029740: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
+00029750: 5f3a 2075 6e73 7570 706f 7274 6564 2074  _: unsupported t
+00029760: 7970 6520 696e 207b 7265 7072 2874 7970  ype in {repr(typ
+00029770: 6573 297d 2229 0d0a 2020 2020 2020 2020  es)}")..        
+00029780: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+00029790: 6f74 496d 706c 656d 656e 7465 640d 0a0d  otImplemented...
+000297a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000297b0: 6172 7261 795f 6675 6e63 282a 6172 6773  array_func(*args
+000297c0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+000297d0: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+000297e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000297f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00029800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00029810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00029820: 0d0a 2020 2020 6465 6620 5f5f 6172 7261  ..    def __arra
+00029830: 795f 7566 756e 635f 5f28 7365 6c66 2c20  y_ufunc__(self, 
+00029840: 7566 756e 633a 2043 616c 6c61 626c 652c  ufunc: Callable,
+00029850: 206d 6574 686f 643a 2073 7472 2c20 2a69   method: str, *i
+00029860: 6e70 7574 733a 2041 6e79 2c20 2a2a 6b77  nputs: Any, **kw
+00029870: 6172 6773 3a20 416e 7929 3a0d 0a20 2020  args: Any):..   
+00029880: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00029890: 2020 5468 6520 4661 7374 4172 7261 7920    The FastArray 
+000298a0: 756e 6976 6572 7361 6c20 6675 6e63 7469  universal functi
+000298b0: 6f6e 2028 6f72 2075 6675 6e63 2920 6f76  on (or ufunc) ov
+000298c0: 6572 7269 6465 206f 6666 6572 7320 6d75  erride offers mu
+000298d0: 6c74 6974 6872 6561 6465 6420 432f 432b  ltithreaded C/C+
+000298e0: 2b20 696d 706c 656d 656e 7461 7469 6f6e  + implementation
+000298f0: 2061 7420 7468 6520 5269 7074 6964 6543   at the RiptideC
+00029900: 5050 206c 6179 6572 2e0d 0a0d 0a20 2020  PP layer.....   
+00029910: 2020 2020 2057 6865 6e20 4661 7374 4172       When FastAr
+00029920: 7261 7920 7265 6365 6976 6573 2061 2060  ray receives a `
+00029930: 7566 756e 6360 2063 616c 6c61 626c 6520  ufunc` callable 
+00029940: 6974 2077 696c 6c20 6174 7465 6d70 7420  it will attempt 
+00029950: 746f 2068 616e 646c 6520 6974 2069 6e20  to handle it in 
+00029960: 7072 696f 7269 7479 206f 7264 6572 3a0d  priority order:.
+00029970: 0a20 2020 2020 2020 2020 2020 2031 2e20  .            1. 
+00029980: 636f 6e73 6964 6572 696e 6720 6060 4661  considering ``Fa
+00029990: 7374 4172 7261 7960 6020 6060 4661 7374  stArray`` ``Fast
+000299a0: 4675 6e63 7469 6f6e 6060 2069 7320 656e  Function`` is en
+000299b0: 6162 6c65 642c 2075 6675 6e63 2069 7320  abled, ufunc is 
+000299c0: 6861 6e64 6c65 6420 6279 2061 6e20 6578  handled by an ex
+000299d0: 706c 6963 6974 2075 6675 6e63 206f 7665  plicit ufunc ove
+000299e0: 7272 6964 652c 206f 7468 6572 7769 7365  rride, otherwise
+000299f0: 0d0a 2020 2020 2020 2020 2020 2020 322e  ..            2.
+00029a00: 2075 6675 6e63 2069 7320 6861 6e64 6c65   ufunc is handle
+00029a10: 6420 6174 2074 6865 2052 6970 7461 626c  d at the Riptabl
+00029a20: 6520 2f20 4e75 6d70 7920 4150 4920 6f76  e / Numpy API ov
+00029a30: 6572 7269 6465 7320 6c65 7665 6c2c 206f  errides level, o
+00029a40: 7468 6572 7769 7365 0d0a 2020 2020 2020  therwise..      
+00029a50: 2020 2020 2020 332e 2075 6675 6e63 2069        3. ufunc i
+00029a60: 7320 6861 6e64 6c65 6420 6174 2074 6865  s handled at the
+00029a70: 204e 756d 7079 2041 5049 206c 6576 656c   Numpy API level
+00029a80: 2e0d 0a0d 0a20 2020 2020 2020 2047 6976  .....        Giv
+00029a90: 656e 2061 2063 6f6d 6269 6e61 7469 6f6e  en a combination
+00029aa0: 206f 6620 6075 6675 6e63 602c 2060 696e   of `ufunc`, `in
+00029ab0: 7075 7473 602c 2061 6e64 2060 6b77 6172  puts`, and `kwar
+00029ac0: 6773 602c 2069 6620 6e65 6974 6865 7220  gs`, if neither 
+00029ad0: 6f66 2074 6865 2061 666f 7265 6d65 6e74  of the aforement
+00029ae0: 696f 6e65 6420 6361 7365 7320 7375 7070  ioned cases supp
+00029af0: 6f72 7420 7468 6973 0d0a 2020 2020 2020  ort this..      
+00029b00: 2020 7468 656e 2061 2077 6172 6e69 6e67    then a warning
+00029b10: 2069 7320 656d 6974 7465 642e 0d0a 0d0a   is emitted.....
+00029b20: 2020 2020 2020 2020 5468 6520 666f 6c6c          The foll
+00029b30: 6f77 696e 6720 7265 6665 7265 6e63 6573  owing references
+00029b40: 2074 6f20 7375 7070 6f72 7465 6420 7566   to supported uf
+00029b50: 756e 6373 2061 7265 2067 726f 7570 6564  uncs are grouped
+00029b60: 2062 7920 6d65 7468 6f64 2074 7970 652e   by method type.
+00029b70: 0d0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
+00029b80: 466f 7220 606d 6574 686f 6460 2074 7970  For `method` typ
+00029b90: 6520 6060 7265 6475 6365 6060 2c20 7365  e ``reduce``, se
+00029ba0: 6520 6060 6752 6564 7563 6555 4675 6e63  e ``gReduceUFunc
+00029bb0: 7360 602e 0d0a 2020 2020 2020 2020 2020  s``...          
+00029bc0: 2020 2d20 466f 7220 606d 6574 686f 6460    - For `method`
+00029bd0: 2074 7970 6520 6060 5f5f 6361 6c6c 5f5f   type ``__call__
+00029be0: 6060 2c20 7365 6520 6060 6742 696e 6172  ``, see ``gBinar
+00029bf0: 7955 4675 6e63 7360 602c 2060 6067 4269  yUFuncs``, ``gBi
+00029c00: 6e61 7279 4c6f 6769 6361 6c55 4675 6e63  naryLogicalUFunc
+00029c10: 7360 602c 2060 6067 4269 6e61 7279 4269  s``, ``gBinaryBi
+00029c20: 7477 6973 6555 4675 6e63 7360 602c 2061  twiseUFuncs``, a
+00029c30: 6e64 2060 6067 556e 6172 7955 4675 6e63  nd ``gUnaryUFunc
+00029c40: 7360 602e 0d0a 2020 2020 2020 2020 2020  s``...          
+00029c50: 2020 2d20 466f 7220 606d 6574 686f 6460    - For `method`
+00029c60: 2074 7970 6520 6060 6174 6060 2072 6574   type ``at`` ret
+00029c70: 7572 6e20 6060 4e6f 6e65 6060 2e0d 0a0d  urn ``None``....
+00029c80: 0a20 2020 2020 2020 2049 6620 606f 7574  .        If `out
+00029c90: 6020 6172 6775 6d65 6e74 2069 7320 7370  ` argument is sp
+00029ca0: 6563 6966 6965 642c 2074 6865 6e20 616e  ecified, then an
+00029cb0: 2065 7874 7261 2061 7272 6179 2063 6f70   extra array cop
+00029cc0: 7920 6973 2070 6572 666f 726d 6564 206f  y is performed o
+00029cd0: 6e20 7468 6520 7265 7375 6c74 206f 6620  n the result of 
+00029ce0: 7468 6520 7566 756e 6320 636f 6d70 7574  the ufunc comput
+00029cf0: 6174 696f 6e2e 0d0a 0d0a 2020 2020 2020  ation.....      
+00029d00: 2020 4966 2061 2060 6474 7970 6560 206b    If a `dtype` k
+00029d10: 6579 776f 7264 2069 7320 7370 6563 6966  eyword is specif
+00029d20: 6965 642c 2061 6c6c 2065 6666 6f72 7473  ied, all efforts
+00029d30: 2061 7265 206d 6164 6520 746f 2072 6573   are made to res
+00029d40: 7065 6374 2074 6865 2060 6474 7970 6560  pect the `dtype`
+00029d50: 206f 6e20 7468 6520 7265 7375 6c74 206f   on the result o
+00029d60: 6620 7468 6520 636f 6d70 7574 6174 696f  f the computatio
+00029d70: 6e2e 0d0a 0d0a 2020 2020 2020 2020 5061  n.....        Pa
+00029d80: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+00029d90: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+00029da0: 2020 2020 2020 7566 756e 6320 3a20 6361        ufunc : ca
+00029db0: 6c6c 6162 6c65 0d0a 2020 2020 2020 2020  llable..        
+00029dc0: 2020 2020 5468 6520 7566 756e 6320 6f62      The ufunc ob
+00029dd0: 6a65 6374 2074 6861 7420 7761 7320 6361  ject that was ca
+00029de0: 6c6c 6564 2e0d 0a20 2020 2020 2020 206d  lled...        m
+00029df0: 6574 686f 6420 3a20 7374 720d 0a20 2020  ethod : str..   
+00029e00: 2020 2020 2020 2020 2041 2073 7472 696e           A strin
+00029e10: 6720 696e 6469 6361 7469 6e67 2077 6869  g indicating whi
+00029e20: 6368 2055 6675 6e63 206d 6574 686f 6420  ch Ufunc method 
+00029e30: 7761 7320 6361 6c6c 6564 2028 6f6e 6520  was called (one 
+00029e40: 6f66 2022 5f5f 6361 6c6c 5f5f 222c 2022  of "__call__", "
+00029e50: 7265 6475 6365 222c 2022 7265 6475 6365  reduce", "reduce
+00029e60: 6174 222c 2022 6163 6375 6d75 6c61 7465  at", "accumulate
+00029e70: 222c 2022 6f75 7465 7222 2c20 2269 6e6e  ", "outer", "inn
+00029e80: 6572 2229 2e0d 0a20 2020 2020 2020 2069  er")...        i
+00029e90: 6e70 7574 730d 0a20 2020 2020 2020 2020  nputs..         
+00029ea0: 2020 2041 2074 7570 6c65 206f 6620 7468     A tuple of th
+00029eb0: 6520 696e 7075 7420 6172 6775 6d65 6e74  e input argument
+00029ec0: 7320 746f 2074 6865 2075 6675 6e63 2e0d  s to the ufunc..
+00029ed0: 0a20 2020 2020 2020 206b 7761 7267 730d  .        kwargs.
+00029ee0: 0a20 2020 2020 2020 2020 2020 2041 2064  .            A d
+00029ef0: 6963 7469 6f6e 6172 7920 636f 6e74 6169  ictionary contai
+00029f00: 6e69 6e67 2074 6865 206f 7074 696f 6e61  ning the optiona
+00029f10: 6c20 696e 7075 7420 6172 6775 6d65 6e74  l input argument
+00029f20: 7320 6f66 2074 6865 2075 6675 6e63 2e20  s of the ufunc. 
+00029f30: 4966 2067 6976 656e 2c20 616e 7920 6f75  If given, any ou
+00029f40: 7420 6172 6775 6d65 6e74 732c 2062 6f74  t arguments, bot
+00029f50: 6820 706f 7369 7469 6f6e 616c 2061 6e64  h positional and
+00029f60: 206b 6579 776f 7264 2c20 6172 6520 7061   keyword, are pa
+00029f70: 7373 6564 2061 7320 6120 7475 706c 6520  ssed as a tuple 
+00029f80: 696e 206b 7761 7267 732e 0d0a 0d0a 2020  in kwargs.....  
+00029f90: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+00029fa0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+00029fb0: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+00029fc0: 6d65 7468 6f64 2073 686f 756c 6420 7265  method should re
+00029fd0: 7475 726e 2065 6974 6865 7220 7468 6520  turn either the 
+00029fe0: 7265 7375 6c74 206f 6620 7468 6520 6f70  result of the op
+00029ff0: 6572 6174 696f 6e2c 206f 7220 4e6f 7449  eration, or NotI
+0002a000: 6d70 6c65 6d65 6e74 6564 2069 6620 7468  mplemented if th
+0002a010: 6520 6f70 6572 6174 696f 6e20 7265 7175  e operation requ
+0002a020: 6573 7465 6420 6973 206e 6f74 2069 6d70  ested is not imp
+0002a030: 6c65 6d65 6e74 6564 2e0d 0a0d 0a20 2020  lemented.....   
+0002a040: 2020 2020 204e 6f74 6573 0d0a 2020 2020       Notes..    
+0002a050: 2020 2020 2d2d 2d2d 2d0d 0a20 2020 2020      -----..     
+0002a060: 2020 2054 6865 2063 7572 7265 6e74 2069     The current i
+0002a070: 6d70 6c65 6d65 6e74 6174 696f 6e20 646f  mplementation do
+0002a080: 6573 206e 6f74 2073 7570 706f 7274 2074  es not support t
+0002a090: 6865 2066 6f6c 6c6f 7769 6e67 206b 6579  he following key
+0002a0a0: 776f 7264 2061 7267 756d 656e 7473 3a20  word arguments: 
+0002a0b0: 6063 6173 7469 6e67 602c 2060 7369 6760  `casting`, `sig`
+0002a0c0: 2c20 6073 6967 6e61 7475 7265 602c 2061  , `signature`, a
+0002a0d0: 6e64 0d0a 2020 2020 2020 2020 6063 6f72  nd..        `cor
+0002a0e0: 655f 7369 676e 6174 7572 6560 2e0d 0a0d  e_signature`....
+0002a0f0: 0a20 2020 2020 2020 2049 7420 6861 7320  .        It has 
+0002a100: 7061 7274 6961 6c20 7375 7070 6f72 7420  partial support 
+0002a110: 666f 7220 6b65 7977 6f72 6420 6172 6775  for keyword argu
+0002a120: 6d65 6e74 733a 2060 7768 6572 6560 2c20  ments: `where`, 
+0002a130: 6061 7869 7360 2c20 616e 6420 6061 7865  `axis`, and `axe
+0002a140: 7360 2c20 6966 2074 6865 7920 6d61 7463  s`, if they matc
+0002a150: 680d 0a20 2020 2020 2020 2074 6865 2064  h..        the d
+0002a160: 6566 6175 6c74 2076 616c 7565 732e 0d0a  efault values...
+0002a170: 0d0a 2020 2020 2020 2020 4966 2046 6173  ..        If Fas
+0002a180: 7441 7272 6179 2773 2060 6057 6172 6e69  tArray's ``Warni
+0002a190: 6e67 4c65 7665 6c60 6020 6973 2065 6e61  ngLevel`` is ena
+0002a1a0: 626c 6564 2c20 7468 656e 2077 6172 6e69  bled, then warni
+0002a1b0: 6e67 7320 7769 6c6c 2062 6520 656d 6974  ngs will be emit
+0002a1c0: 7465 6420 6966 2061 6e79 206f 6620 756e  ted if any of un
+0002a1d0: 7375 7070 6f72 7465 6420 6f72 2070 6172  supported or par
+0002a1e0: 7469 616c 6c79 0d0a 2020 2020 2020 2020  tially..        
+0002a1f0: 7375 7070 6f72 7465 6420 6b65 7977 6f72  supported keywor
+0002a200: 6420 6172 6775 6d65 6e74 7320 6172 6520  d arguments are 
+0002a210: 7061 7373 6564 2e0d 0a0d 0a20 2020 2020  passed.....     
+0002a220: 2020 2054 4f44 4f20 646f 6375 6d65 6e74     TODO document
+0002a230: 2063 7573 746f 6d20 7570 2063 6173 7469   custom up casti
+0002a240: 6e67 2072 756c 6573 2e0d 0a0d 0a20 2020  ng rules.....   
+0002a250: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+0002a260: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+0002a270: 0a20 2020 2020 2020 2046 6f72 206d 6f72  .        For mor
+0002a280: 6520 696e 666f 726d 6174 696f 6e20 6f6e  e information on
+0002a290: 2075 6675 6e63 2073 6565 2074 6865 2066   ufunc see the f
+0002a2a0: 6f6c 6c6f 7769 6e67 206e 756d 7079 2064  ollowing numpy d
+0002a2b0: 6f63 756d 656e 7473 3a0d 0a20 2020 2020  ocuments:..     
+0002a2c0: 2020 2020 2020 202d 2068 7474 7073 3a2f         - https:/
+0002a2d0: 2f6e 756d 7079 2e6f 7267 2f64 6f63 2f73  /numpy.org/doc/s
+0002a2e0: 7461 626c 652f 7265 6665 7265 6e63 652f  table/reference/
+0002a2f0: 6172 7261 7973 2e63 6c61 7373 6573 2e68  arrays.classes.h
+0002a300: 746d 6c23 6e75 6d70 792e 636c 6173 732e  tml#numpy.class.
+0002a310: 5f5f 6172 7261 795f 7566 756e 635f 5f0d  __array_ufunc__.
+0002a320: 0a20 2020 2020 2020 2020 2020 202d 2068  .            - h
+0002a330: 7474 7073 3a2f 2f6e 756d 7079 2e6f 7267  ttps://numpy.org
+0002a340: 2f64 6f63 2f73 7461 626c 652f 7265 6665  /doc/stable/refe
+0002a350: 7265 6e63 652f 7566 756e 6373 2e68 746d  rence/ufuncs.htm
+0002a360: 6c0d 0a0d 0a20 2020 2020 2020 204e 6f74  l....        Not
+0002a370: 652c 2074 6865 2064 6f63 7374 7269 6e67  e, the docstring
+0002a380: 2050 6172 616d 6574 6572 7320 616e 6420   Parameters and 
+0002a390: 5265 7475 726e 2073 6563 7469 6f6e 2069  Return section i
+0002a3a0: 7320 7265 7065 6174 6564 2066 726f 6d20  s repeated from 
+0002a3b0: 7468 6520 6e75 6d70 790d 0a20 2020 2020  the numpy..     
+0002a3c0: 2020 2060 5f5f 6172 7261 795f 7566 756e     `__array_ufun
+0002a3d0: 635f 5f60 2064 6f63 7374 7269 6e67 2073  c__` docstring s
+0002a3e0: 696e 6365 2074 6869 7320 6973 206f 7665  ince this is ove
+0002a3f0: 7272 6964 696e 6720 7468 6174 206d 6574  rriding that met
+0002a400: 686f 642e 0d0a 2020 2020 2020 2020 2222  hod...        ""
+0002a410: 220d 0a20 2020 2020 2020 2023 2054 4f44  "..        # TOD
+0002a420: 4f20 636f 6e73 6964 6572 2075 7369 6e67  O consider using
+0002a430: 2074 7970 6520 616e 6e6f 7461 7469 6f6e   type annotation
+0002a440: 2074 7970 696e 672e 4669 6e61 6c20 666f   typing.Final fo
+0002a450: 7220 7468 6573 6520 7265 6164 2d6f 6e6c  r these read-onl
+0002a460: 7920 7661 7269 6162 6c65 7320 7768 656e  y variables when
+0002a470: 206d 6f76 696e 6720 746f 2050 7974 686f   moving to Pytho
+0002a480: 6e20 332e 380d 0a20 2020 2020 2020 2023  n 3.8..        #
+0002a490: 2050 7974 686f 6e20 332e 3820 6164 6465   Python 3.8 adde
+0002a4a0: 6420 7375 7070 6f72 7420 666f 7220 7479  d support for ty
+0002a4b0: 7069 6e67 2e46 696e 616c 2e20 4669 6e61  ping.Final. Fina
+0002a4c0: 6c20 7769 6c6c 2063 6174 6368 2075 6e69  l will catch uni
+0002a4d0: 6e74 656e 6465 6420 6173 7369 676e 6d65  ntended assignme
+0002a4e0: 6e74 7320 666f 7220 636f 6e73 7461 6e74  nts for constant
+0002a4f0: 7320 7768 656e 2072 756e 6e69 6e67 0d0a  s when running..
+0002a500: 2020 2020 2020 2020 2320 7374 6174 6963          # static
+0002a510: 2074 7970 6520 6368 6563 6b65 7273 2073   type checkers s
+0002a520: 7563 6820 6173 206d 7970 792e 0d0a 2020  uch as mypy...  
+0002a530: 2020 2020 2020 5f55 4e53 5550 504f 5254        _UNSUPPORT
+0002a540: 4544 5f4b 4559 574f 5244 533a 2054 7570  ED_KEYWORDS: Tup
+0002a550: 6c65 5b73 7472 2c20 7374 722c 2073 7472  le[str, str, str
+0002a560: 2c20 7374 725d 203d 2028 2263 6173 7469  , str] = ("casti
+0002a570: 6e67 222c 2022 7369 6722 2c20 2273 6967  ng", "sig", "sig
+0002a580: 6e61 7475 7265 222c 2022 636f 7265 5f73  nature", "core_s
+0002a590: 6967 6e61 7475 7265 2229 0d0a 2020 2020  ignature")..    
+0002a5a0: 2020 2020 5f50 4152 5449 414c 4c59 5f53      _PARTIALLY_S
+0002a5b0: 5550 504f 5254 4544 5f4b 4559 574f 5244  UPPORTED_KEYWORD
+0002a5c0: 535f 544f 5f44 4546 4155 4c54 533a 204d  S_TO_DEFAULTS: M
+0002a5d0: 6170 7069 6e67 5b73 7472 2c20 556e 696f  apping[str, Unio
+0002a5e0: 6e5b 4e6f 6e65 2c20 626f 6f6c 5d5d 203d  n[None, bool]] =
+0002a5f0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
+0002a600: 2277 6865 7265 223a 2054 7275 652c 0d0a  "where": True,..
+0002a610: 2020 2020 2020 2020 2020 2020 2261 7869              "axi
+0002a620: 7322 3a20 4e6f 6e65 2c0d 0a20 2020 2020  s": None,..     
+0002a630: 2020 2020 2020 2022 6178 6573 223a 204e         "axes": N
+0002a640: 6f6e 652c 0d0a 2020 2020 2020 2020 7d0d  one,..        }.
+0002a650: 0a20 2020 2020 2020 2074 6f70 6c65 7665  .        topleve
+0002a660: 6c5f 6162 6f72 743a 2062 6f6f 6c20 3d20  l_abort: bool = 
+0002a670: 4661 6c73 650d 0a0d 0a20 2020 2020 2020  False....       
+0002a680: 2069 6620 4661 7374 4172 7261 792e 5665   if FastArray.Ve
+0002a690: 7262 6f73 6520 3e20 323a 0d0a 2020 2020  rbose > 2:..    
+0002a6a0: 2020 2020 2020 2020 7072 696e 7428 222a          print("*
+0002a6b0: 2a2a 2074 6f70 206c 6576 656c 2061 7272  ** top level arr
+0002a6c0: 6179 5f75 6675 6e63 222c 2075 6675 6e63  ay_ufunc", ufunc
+0002a6d0: 2c20 6d65 7468 6f64 2c20 2a69 6e70 7574  , method, *input
+0002a6e0: 732c 206b 7761 7267 7329 0d0a 0d0a 2020  s, kwargs)....  
+0002a6f0: 2020 2020 2020 2320 666c 6970 2061 6e79        # flip any
+0002a700: 2069 6e70 7574 7320 7468 6174 2061 7265   inputs that are
+0002a710: 2066 6173 7461 7272 6179 7320 6261 636b   fastarrays back
+0002a720: 2074 6f20 616e 206e 6461 7272 6179 2e2e   to an ndarray..
+0002a730: 2e0d 0a20 2020 2020 2020 2061 7267 733a  ...        args:
+0002a740: 204c 6973 745b 416e 795d 203d 205b 5d0d   List[Any] = [].
+0002a750: 0a20 2020 2020 2020 2066 6f72 2069 6e70  .        for inp
+0002a760: 7574 2069 6e20 696e 7075 7473 3a0d 0a20  ut in inputs:.. 
+0002a770: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+0002a780: 696e 7374 616e 6365 2869 6e70 7574 2c20  instance(input, 
+0002a790: 6e70 2e6e 6461 7272 6179 293a 0d0a 2020  np.ndarray):..  
+0002a7a0: 2020 2020 2020 2020 2020 2020 2020 6973                is
+0002a7b0: 5f6e 6f74 5f73 7570 706f 7274 6564 203d  _not_supported =
+0002a7c0: 2073 656c 662e 5f69 735f 6e6f 745f 7375   self._is_not_su
+0002a7d0: 7070 6f72 7465 6428 696e 7075 7429 0d0a  pported(input)..
+0002a7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a7f0: 6966 2069 735f 6e6f 745f 7375 7070 6f72  if is_not_suppor
+0002a800: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
+0002a810: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
+0002a820: 2065 6e61 626c 6520 7468 6973 2077 6172   enable this war
+0002a830: 6e69 6e67 2069 6e20 6120 6675 7475 7265  ning in a future
+0002a840: 206d 696e 6f72 2072 656c 6561 7365 0d0a   minor release..
+0002a850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a860: 2020 2020 2320 4661 7374 4172 7261 792e      # FastArray.
+0002a870: 5f70 6f73 7369 626c 795f 7761 726e 2866  _possibly_warn(f
+0002a880: 275f 5f61 7272 6179 5f75 6675 6e63 5f5f  '__array_ufunc__
+0002a890: 3a20 756e 7375 7070 6f72 7465 6420 696e  : unsupported in
+0002a8a0: 7075 7420 227b 696e 7075 747d 2227 290d  put "{input}"').
+0002a8b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a8c0: 2020 2020 2074 6f70 6c65 7665 6c5f 6162       toplevel_ab
+0002a8d0: 6f72 7420 7c3d 2069 735f 6e6f 745f 7375  ort |= is_not_su
+0002a8e0: 7070 6f72 7465 640d 0a20 2020 2020 2020  pported..       
+0002a8f0: 2020 2020 2061 7267 732e 6170 7065 6e64       args.append
+0002a900: 2869 6e70 7574 290d 0a0d 0a20 2020 2020  (input)....     
+0002a910: 2020 2023 2043 6865 636b 2066 6f72 206e     # Check for n
+0002a920: 756d 7079 2072 756c 6573 2074 6861 7420  umpy rules that 
+0002a930: 7765 2063 616e 6e6f 7420 6861 6e64 6c65  we cannot handle
+0002a940: 2e0d 0a20 2020 2020 2020 2066 6f72 206b  ...        for k
+0002a950: 7720 696e 205f 554e 5355 5050 4f52 5445  w in _UNSUPPORTE
+0002a960: 445f 4b45 5957 4f52 4453 3a0d 0a20 2020  D_KEYWORDS:..   
+0002a970: 2020 2020 2020 2020 2069 6620 6b77 2069           if kw i
+0002a980: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
+0002a990: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
+0002a9a0: 4f20 656e 6162 6c65 2074 6869 7320 7761  O enable this wa
+0002a9b0: 726e 696e 6720 696e 2061 2066 7574 7572  rning in a futur
+0002a9c0: 6520 6d69 6e6f 7220 7265 6c65 6173 650d  e minor release.
+0002a9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a9e0: 2023 2046 6173 7441 7272 6179 2e5f 706f   # FastArray._po
+0002a9f0: 7373 6962 6c79 5f77 6172 6e28 6627 5f5f  ssibly_warn(f'__
+0002aa00: 6172 7261 795f 7566 756e 635f 5f3a 2075  array_ufunc__: u
+0002aa10: 6e73 7570 706f 7274 6564 206b 6579 776f  nsupported keywo
+0002aa20: 7264 2061 7267 756d 656e 7420 227b 6b77  rd argument "{kw
+0002aa30: 7d22 2729 0d0a 2020 2020 2020 2020 2020  }"')..          
+0002aa40: 2020 2020 2020 746f 706c 6576 656c 5f61        toplevel_a
+0002aa50: 626f 7274 207c 3d20 5472 7565 0d0a 0d0a  bort |= True....
+0002aa60: 2020 2020 2020 2020 2320 4368 6563 6b20          # Check 
+0002aa70: 666f 7220 6e75 6d70 7920 7275 6c65 7320  for numpy rules 
+0002aa80: 7468 6174 2077 6520 7061 7274 6961 6c6c  that we partiall
+0002aa90: 7920 7375 7070 6f72 743b 2074 6861 7420  y support; that 
+0002aaa0: 6973 2c20 7768 6572 6520 7765 206f 6e6c  is, where we onl
+0002aab0: 7920 7375 7070 6f72 740d 0a20 2020 2020  y support..     
+0002aac0: 2020 2023 2074 6865 206b 6579 776f 7264     # the keyword
+0002aad0: 2069 6620 7468 6520 7661 6c75 6520 6973   if the value is
+0002aae0: 2073 6f6d 6520 6465 6661 756c 7420 7661   some default va
+0002aaf0: 6c75 6520 616e 6420 6f74 6865 7277 6973  lue and otherwis
+0002ab00: 6520 7075 6e74 2074 6f20 6e75 6d70 792e  e punt to numpy.
+0002ab10: 0d0a 2020 2020 2020 2020 2320 5468 6520  ..        # The 
+0002ab20: 7661 6c75 6520 6173 736f 6369 6174 6564  value associated
+0002ab30: 2077 6974 6820 6561 6368 206b 6579 776f   with each keywo
+0002ab40: 7264 2069 6e20 7468 6520 6469 6374 696f  rd in the dictio
+0002ab50: 6e61 7279 2069 7320 7468 6520 6f6e 6c79  nary is the only
+0002ab60: 2076 616c 7565 2077 6527 6c6c 0d0a 2020   value we'll..  
+0002ab70: 2020 2020 2020 2320 7375 7070 6f72 7420        # support 
+0002ab80: 666f 7220 7468 6174 206b 6579 776f 7264  for that keyword
+0002ab90: 2e0d 0a20 2020 2020 2020 2023 2046 6f72  ...        # For
+0002aba0: 2065 7861 6d70 6c65 2c20 696e 206e 756d   example, in num
+0002abb0: 7079 2031 2e31 3720 7468 6520 7375 6d28  py 1.17 the sum(
+0002abc0: 2920 6675 6e63 7469 6f6e 2070 6173 7365  ) function passe
+0002abd0: 7320 7768 6572 653d 5472 7565 2062 7920  s where=True by 
+0002abe0: 6465 6661 756c 742e 0d0a 2020 2020 2020  default...      
+0002abf0: 2020 666f 7220 6b77 2c20 6465 6661 756c    for kw, defaul
+0002ac00: 745f 7661 6c20 696e 205f 5041 5254 4941  t_val in _PARTIA
+0002ac10: 4c4c 595f 5355 5050 4f52 5445 445f 4b45  LLY_SUPPORTED_KE
+0002ac20: 5957 4f52 4453 5f54 4f5f 4445 4641 554c  YWORDS_TO_DEFAUL
+0002ac30: 5453 2e69 7465 6d73 2829 3a0d 0a20 2020  TS.items():..   
+0002ac40: 2020 2020 2020 2020 2069 6620 6b77 2069           if kw i
+0002ac50: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
+0002ac60: 2020 2020 2020 2020 2020 2023 2055 7365             # Use
+0002ac70: 2061 2074 7970 6520 6368 6563 6b20 6265   a type check be
+0002ac80: 666f 7265 2065 7175 616c 6974 7920 6865  fore equality he
+0002ac90: 7265 2074 6f20 6176 6f69 6420 6572 726f  re to avoid erro
+0002aca0: 7273 2063 6175 7365 640d 0a20 2020 2020  rs caused..     
+0002acb0: 2020 2020 2020 2020 2020 2023 2062 7920             # by 
+0002acc0: 6368 6563 6b69 6e67 2065 7175 616c 6974  checking equalit
+0002acd0: 7920 6265 7477 6565 6e20 626f 6f6c 7320  y between bools 
+0002ace0: 616e 6420 6172 7261 7973 2e0d 0a20 2020  and arrays...   
+0002acf0: 2020 2020 2020 2020 2020 2020 206b 7761               kwa
+0002ad00: 7267 5f76 616c 203d 206b 7761 7267 735b  rg_val = kwargs[
+0002ad10: 6b77 5d0d 0a20 2020 2020 2020 2020 2020  kw]..           
+0002ad20: 2020 2020 2069 6620 7479 7065 2864 6566       if type(def
+0002ad30: 6175 6c74 5f76 616c 2920 213d 2074 7970  ault_val) != typ
+0002ad40: 6528 6b77 6172 675f 7661 6c29 206f 7220  e(kwarg_val) or 
+0002ad50: 6b77 6172 675f 7661 6c20 213d 2064 6566  kwarg_val != def
+0002ad60: 6175 6c74 5f76 616c 3a0d 0a20 2020 2020  ault_val:..     
+0002ad70: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0002ad80: 6f70 6c65 7665 6c5f 6162 6f72 7420 7c3d  oplevel_abort |=
+0002ad90: 2054 7275 650d 0a0d 0a20 2020 2020 2020   True....       
+0002ada0: 2064 7479 7065 3a20 4f70 7469 6f6e 616c   dtype: Optional
+0002adb0: 5b6e 702e 6474 7970 655d 203d 206b 7761  [np.dtype] = kwa
+0002adc0: 7267 732e 6765 7428 2264 7479 7065 222c  rgs.get("dtype",
+0002add0: 204e 6f6e 6529 0d0a 0d0a 2020 2020 2020   None)....      
+0002ade0: 2020 6861 735f 6f75 7470 7574 733a 2062    has_outputs: b
+0002adf0: 6f6f 6c20 3d20 4661 6c73 650d 0a20 2020  ool = False..   
+0002ae00: 2020 2020 206f 7574 5f61 7267 733a 204c       out_args: L
+0002ae10: 6973 745b 416e 795d 203d 205b 5d0d 0a0d  ist[Any] = []...
+0002ae20: 0a20 2020 2020 2020 2023 2066 6c69 7020  .        # flip 
+0002ae30: 616e 7920 6f75 7470 7574 7320 746f 206e  any outputs to n
+0002ae40: 6461 7272 6179 2e2e 2e0d 0a20 2020 2020  darray.....     
+0002ae50: 2020 206f 7574 7075 7473 203d 206b 7761     outputs = kwa
+0002ae60: 7267 732e 706f 7028 226f 7574 222c 204e  rgs.pop("out", N
+0002ae70: 6f6e 6529 0d0a 2020 2020 2020 2020 6966  one)..        if
+0002ae80: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
+0002ae90: 2020 2020 2020 2068 6173 5f6f 7574 7075         has_outpu
+0002aea0: 7473 203d 2054 7275 650d 0a20 2020 2020  ts = True..     
+0002aeb0: 2020 2020 2020 2066 6f72 206f 7574 7075         for outpu
+0002aec0: 7420 696e 206f 7574 7075 7473 3a0d 0a20  t in outputs:.. 
+0002aed0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002aee0: 6620 6973 696e 7374 616e 6365 286f 7574  f isinstance(out
+0002aef0: 7075 742c 206e 702e 6e64 6172 7261 7929  put, np.ndarray)
+0002af00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002af10: 2020 2020 2020 2069 735f 6e6f 745f 7375         is_not_su
+0002af20: 7070 6f72 7465 6420 3d20 7365 6c66 2e5f  pported = self._
+0002af30: 6973 5f6e 6f74 5f73 7570 706f 7274 6564  is_not_supported
+0002af40: 286f 7574 7075 7429 0d0a 2020 2020 2020  (output)..      
+0002af50: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002af60: 2069 735f 6e6f 745f 7375 7070 6f72 7465   is_not_supporte
+0002af70: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
+0002af80: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
+0002af90: 444f 2065 6e61 626c 6520 7468 6973 2077  DO enable this w
+0002afa0: 6172 6e69 6e67 2069 6e20 6120 6675 7475  arning in a futu
+0002afb0: 7265 206d 696e 6f72 2072 656c 6561 7365  re minor release
+0002afc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002afd0: 2020 2020 2020 2020 2020 2320 4661 7374            # Fast
+0002afe0: 4172 7261 792e 5f70 6f73 7369 626c 795f  Array._possibly_
+0002aff0: 7761 726e 2866 275f 5f61 7272 6179 5f75  warn(f'__array_u
+0002b000: 6675 6e63 5f5f 3a20 756e 7375 7070 6f72  func__: unsuppor
+0002b010: 7465 6420 6f75 7470 7574 2022 7b6f 7574  ted output "{out
+0002b020: 7075 747d 2227 290d 0a20 2020 2020 2020  put}"')..       
+0002b030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b040: 2074 6f70 6c65 7665 6c5f 6162 6f72 7420   toplevel_abort 
+0002b050: 7c3d 2069 735f 6e6f 745f 7375 7070 6f72  |= is_not_suppor
+0002b060: 7465 640d 0a20 2020 2020 2020 2020 2020  ted..           
+0002b070: 2020 2020 206f 7574 5f61 7267 732e 6170       out_args.ap
+0002b080: 7065 6e64 286f 7574 7075 7429 0d0a 2020  pend(output)..  
+0002b090: 2020 2020 2020 2020 2020 2320 7265 706c            # repl
+0002b0a0: 6163 6520 6f75 740d 0a20 2020 2020 2020  ace out..       
+0002b0b0: 2020 2020 206b 7761 7267 735b 226f 7574       kwargs["out
+0002b0c0: 225d 203d 2074 7570 6c65 286f 7574 5f61  "] = tuple(out_a
+0002b0d0: 7267 7329 0d0a 2020 2020 2020 2020 656c  rgs)..        el
+0002b0e0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+0002b0f0: 2023 2054 4a44 202d 2068 6572 6520 6f75   # TJD - here ou
+0002b100: 7470 7574 7320 7761 7320 6e6f 7420 7370  tputs was not sp
+0002b110: 6563 6966 6965 640d 0a20 2020 2020 2020  ecified..       
+0002b120: 2020 2020 2023 206e 6f77 2069 6620 5546       # now if UF
+0002b130: 756e 632e 6e6f 7574 203d 3d31 2c20 7468  unc.nout ==1, th
+0002b140: 6973 2066 756e 6374 696f 6e20 7265 7175  is function requ
+0002b150: 6972 6573 2061 6e20 6f75 7470 7574 0d0a  ires an output..
+0002b160: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
+0002b170: 7574 7320 3d20 284e 6f6e 652c 2920 2a20  uts = (None,) * 
+0002b180: 7566 756e 632e 6e6f 7574 0d0a 0d0a 2020  ufunc.nout....  
+0002b190: 2020 2020 2020 2320 5365 6520 6874 7470        # See http
+0002b1a0: 733a 2f2f 646f 6373 2e70 7974 686f 6e2e  s://docs.python.
+0002b1b0: 6f72 672f 332f 632d 6170 692f 7479 7065  org/3/c-api/type
+0002b1c0: 6f62 6a2e 6874 6d6c 0d0a 2020 2020 2020  obj.html..      
+0002b1d0: 2020 2320 5365 6520 4e75 6d62 6572 204f    # See Number O
+0002b1e0: 626a 6563 7420 5374 7275 6374 7572 6573  bject Structures
+0002b1f0: 2061 6e64 204d 6170 7069 6e67 204f 626a   and Mapping Obj
+0002b200: 6563 7420 5374 7275 6374 7572 6520 666f  ect Structure fo
+0002b210: 7220 696e 6465 7869 6e67 0d0a 0d0a 2020  r indexing....  
+0002b220: 2020 2020 2020 2320 7566 756e 632e 6e69        # ufunc.ni
+0002b230: 6e09 2020 2020 5468 6520 6e75 6d62 6572  n.    The number
+0002b240: 206f 6620 696e 7075 7473 2e0d 0a20 2020   of inputs...   
+0002b250: 2020 2020 2023 2075 6675 6e63 2e6e 6f75       # ufunc.nou
+0002b260: 7409 2020 2020 5468 6520 6e75 6d62 6572  t.    The number
+0002b270: 206f 6620 6f75 7470 7574 732e 0d0a 2020   of outputs...  
+0002b280: 2020 2020 2020 2320 7566 756e 632e 6e61        # ufunc.na
+0002b290: 7267 7309 5468 6520 6e75 6d62 6572 206f  rgs.The number o
+0002b2a0: 6620 6172 6775 6d65 6e74 732e 0d0a 2020  f arguments...  
+0002b2b0: 2020 2020 2020 2320 7566 756e 632e 6e74        # ufunc.nt
+0002b2c0: 7970 6573 0954 6865 206e 756d 6265 7220  ypes.The number 
+0002b2d0: 6f66 2074 7970 6573 2e0d 0a20 2020 2020  of types...     
+0002b2e0: 2020 2023 2075 6675 6e63 2e74 7970 6573     # ufunc.types
+0002b2f0: 0952 6574 7572 6e73 2061 206c 6973 7420  .Returns a list 
+0002b300: 7769 7468 2074 7970 6573 2067 726f 7570  with types group
+0002b310: 6564 2069 6e70 7574 2d3e 6f75 7470 7574  ed input->output
+0002b320: 2e0d 0a20 2020 2020 2020 2023 2075 6675  ...        # ufu
+0002b330: 6e63 2e69 6465 6e74 6974 7909 5468 6520  nc.identity.The 
+0002b340: 6964 656e 7469 7479 2076 616c 7565 2e0d  identity value..
+0002b350: 0a0d 0a20 2020 2020 2020 2066 696e 616c  ...        final
+0002b360: 5f64 7479 7065 3a20 4f70 7469 6f6e 616c  _dtype: Optional
+0002b370: 5b6e 702e 6474 7970 655d 203d 204e 6f6e  [np.dtype] = Non
+0002b380: 650d 0a20 2020 2020 2020 2066 6173 745f  e..        fast_
+0002b390: 6675 6e63 7469 6f6e 3a20 4f70 7469 6f6e  function: Option
+0002b3a0: 616c 5b4d 4154 485f 4f50 4552 4154 494f  al[MATH_OPERATIO
+0002b3b0: 4e5d 203d 204e 6f6e 650d 0a20 2020 2020  N] = None..     
+0002b3c0: 2020 2072 6564 7563 655f 6675 6e63 3a20     reduce_func: 
+0002b3d0: 4f70 7469 6f6e 616c 5b52 4544 5543 455f  Optional[REDUCE_
+0002b3e0: 4655 4e43 5449 4f4e 535d 203d 204e 6f6e  FUNCTIONS] = Non
+0002b3f0: 650d 0a0d 0a20 2020 2020 2020 2023 2048  e....        # H
+0002b400: 616e 646c 6520 7265 6475 6365 2075 6675  andle reduce ufu
+0002b410: 6e63 206d 6574 686f 6473 2e0d 0a20 2020  nc methods...   
+0002b420: 2020 2020 2023 206e 6f74 653a 2077 6865       # note: whe
+0002b430: 6e20 6d65 7468 6f64 2069 7320 2761 7427  n method is 'at'
+0002b440: 2074 6869 7320 6973 2061 6e20 696e 706c   this is an inpl
+0002b450: 6163 6520 756e 6275 6666 6572 6564 206f  ace unbuffered o
+0002b460: 7065 7261 7469 6f6e 0d0a 2020 2020 2020  peration..      
+0002b470: 2020 2320 7468 6973 2063 616e 2073 7065    # this can spe
+0002b480: 6564 2075 7020 726f 7574 696e 6573 2074  ed up routines t
+0002b490: 6861 7420 7573 6520 6865 6176 7920 6d61  hat use heavy ma
+0002b4a0: 736b 6564 206f 7065 7261 7469 6f6e 730d  sked operations.
+0002b4b0: 0a20 2020 2020 2020 2069 6620 6d65 7468  .        if meth
+0002b4c0: 6f64 203d 3d20 2272 6564 7563 6522 2061  od == "reduce" a
+0002b4d0: 6e64 2046 6173 7441 7272 6179 2e46 6173  nd FastArray.Fas
+0002b4e0: 7465 7255 4675 6e63 2061 6e64 206e 6f74  terUFunc and not
+0002b4f0: 2074 6f70 6c65 7665 6c5f 6162 6f72 743a   toplevel_abort:
+0002b500: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002b510: 612e 616e 7928 2920 616e 6420 612e 616c  a.any() and a.al
+0002b520: 6c28 2920 6172 6520 6c6f 6769 6361 6c20  l() are logical 
+0002b530: 7265 6475 6365 206f 7065 7261 7469 6f6e  reduce operation
+0002b540: 730d 0a20 2020 2020 2020 2020 2020 2023  s..            #
+0002b550: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+0002b560: 2020 2020 2020 2023 204c 6f6f 6b20 666f         # Look fo
+0002b570: 7220 6178 6973 3a4e 6f6e 6520 2d2d 206f  r axis:None -- o
+0002b580: 7468 6572 7769 7365 2041 424f 5254 0d0a  therwise ABORT..
+0002b590: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+0002b5a0: 656e 206c 6f6f 6b20 666f 7220 4b65 6570  en look for Keep
+0002b5b0: 6469 6d73 2077 6968 6368 206d 6561 6e73  dims wihch means
+0002b5c0: 2074 6f20 7772 6170 2072 6573 756c 7420   to wrap result 
+0002b5d0: 696e 206c 6973 742f 6172 7261 793f 0d0a  in list/array?..
+0002b5e0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+0002b5f0: 656e 2063 6865 636b 2064 7479 7065 2061  en check dtype a
+0002b600: 6c73 6f0d 0a20 2020 2020 2020 2020 2020  lso..           
+0002b610: 2023 0d0a 2020 2020 2020 2020 2020 2020   #..            
+0002b620: 2320 496e 205b 3232 5d3a 2074 3d46 4128  # In [22]: t=FA(
+0002b630: 5b5b 332c 342c 355d 2c5b 362c 372c 385d  [[3,4,5],[6,7,8]
+0002b640: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+0002b650: 2320 496e 205b 3233 5d3a 206e 702e 6164  # In [23]: np.ad
+0002b660: 642e 7265 6475 6365 2874 290d 0a20 2020  d.reduce(t)..   
+0002b670: 2020 2020 2020 2020 2023 2121 7265 6475           #!!redu
+0002b680: 6365 2020 7265 6475 6365 206e 696e 3a20  ce  reduce nin: 
+0002b690: 3220 3120 3c75 6675 6e63 2027 6164 6427  2 1 <ufunc 'add'
+0002b6a0: 3e20 5b61 7272 6179 285b 5b33 2c20 342c  > [array([[3, 4,
+0002b6b0: 2035 5d2c 0d0a 2020 2020 2020 2020 2020   5],..          
+0002b6c0: 2020 2320 2020 2020 2020 5b36 2c20 372c    #       [6, 7,
+0002b6d0: 2038 5d5d 295d 206f 7574 3a20 284e 6f6e   8]])] out: (Non
+0002b6e0: 652c 2920 6b77 6172 6773 3a20 7b7d 0d0a  e,) kwargs: {}..
+0002b6f0: 2020 2020 2020 2020 2020 2020 2320 7265              # re
+0002b700: 7375 6c74 7320 5b20 3920 3131 2031 335d  sults [ 9 11 13]
+0002b710: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002b720: 4f75 745b 3233 5d3a 2061 7272 6179 285b  Out[23]: array([
+0002b730: 2039 2c20 3131 2c20 3133 5d29 0d0a 2020   9, 11, 13])..  
+0002b740: 2020 2020 2020 2020 2020 2320 496e 205b            # In [
+0002b750: 3234 5d3a 206e 702e 6164 642e 7265 6475  24]: np.add.redu
+0002b760: 6365 2874 2c20 6178 6973 3d4e 6f6e 6529  ce(t, axis=None)
+0002b770: 0d0a 2020 2020 2020 2020 2020 2020 2321  ..            #!
+0002b780: 2172 6564 7563 6520 2072 6564 7563 6520  !reduce  reduce 
+0002b790: 6e69 6e3a 2032 2031 203c 7566 756e 6320  nin: 2 1 <ufunc 
+0002b7a0: 2761 6464 273e 205b 6172 7261 7928 5b5b  'add'> [array([[
+0002b7b0: 332c 2034 2c20 355d 2c0d 0a20 2020 2020  3, 4, 5],..     
+0002b7c0: 2020 2020 2020 2023 2020 2020 2020 205b         #       [
+0002b7d0: 362c 2037 2c20 385d 5d29 5d20 6f75 743a  6, 7, 8]])] out:
+0002b7e0: 2028 4e6f 6e65 2c29 206b 7761 7267 733a   (None,) kwargs:
+0002b7f0: 207b 2761 7869 7327 3a20 4e6f 6e65 7d0d   {'axis': None}.
+0002b800: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
+0002b810: 6573 756c 7473 2033 330d 0a20 2020 2020  esults 33..     
+0002b820: 2020 2020 2020 2023 204f 7574 5b32 345d         # Out[24]
+0002b830: 3a20 3333 0d0a 2020 2020 2020 2020 2020  : 33..          
+0002b840: 2020 2320 496e 205b 3235 5d3a 206e 702e    # In [25]: np.
+0002b850: 6164 642e 7265 6475 6365 2874 2c20 6178  add.reduce(t, ax
+0002b860: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
+0002b870: 733d 5472 7565 290d 0a20 2020 2020 2020  s=True)..       
+0002b880: 2020 2020 2023 2121 7265 6475 6365 2020       #!!reduce  
+0002b890: 7265 6475 6365 206e 696e 3a20 3220 3120  reduce nin: 2 1 
+0002b8a0: 3c75 6675 6e63 2027 6164 6427 3e20 5b61  <ufunc 'add'> [a
+0002b8b0: 7272 6179 285b 5b33 2c20 342c 2035 5d2c  rray([[3, 4, 5],
+0002b8c0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002b8d0: 2020 2020 2020 5b36 2c20 372c 2038 5d5d        [6, 7, 8]]
+0002b8e0: 295d 206f 7574 3a20 284e 6f6e 652c 2920  )] out: (None,) 
+0002b8f0: 6b77 6172 6773 3a20 7b27 6178 6973 273a  kwargs: {'axis':
+0002b900: 204e 6f6e 652c 2027 6b65 6570 6469 6d73   None, 'keepdims
+0002b910: 273a 2054 7275 657d 0d0a 2020 2020 2020  ': True}..      
+0002b920: 2020 2020 2020 2320 7265 7375 6c74 7320        # results 
+0002b930: 5b5b 3333 5d5d 0d0a 2020 2020 2020 2020  [[33]]..        
+0002b940: 2020 2020 2320 4f75 745b 3235 5d3a 2061      # Out[25]: a
+0002b950: 7272 6179 285b 5b33 335d 5d29 0d0a 2020  rray([[33]])..  
+0002b960: 2020 2020 2020 2020 2020 2320 496e 205b            # In [
+0002b970: 3236 5d3a 206e 702e 6164 642e 7265 6475  26]: np.add.redu
+0002b980: 6365 2874 2c20 6178 6973 3d4e 6f6e 652c  ce(t, axis=None,
+0002b990: 206b 6565 7064 696d 733d 5472 7565 2c20   keepdims=True, 
+0002b9a0: 6474 7970 653d 6e70 2e66 6c6f 6174 3332  dtype=np.float32
+0002b9b0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+0002b9c0: 2121 7265 6475 6365 2020 7265 6475 6365  !!reduce  reduce
+0002b9d0: 206e 696e 3a20 3220 3120 3c75 6675 6e63   nin: 2 1 <ufunc
+0002b9e0: 2027 6164 6427 3e20 5b61 7272 6179 285b   'add'> [array([
+0002b9f0: 5b33 2c20 342c 2035 5d2c 0d0a 2020 2020  [3, 4, 5],..    
+0002ba00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002ba10: 5b36 2c20 372c 2038 5d5d 295d 206f 7574  [6, 7, 8]])] out
+0002ba20: 3a20 284e 6f6e 652c 2920 6b77 6172 6773  : (None,) kwargs
+0002ba30: 3a20 7b27 6178 6973 273a 204e 6f6e 652c  : {'axis': None,
+0002ba40: 2027 6b65 6570 6469 6d73 273a 2054 7275   'keepdims': Tru
+0002ba50: 652c 2027 6474 7970 6527 3a20 3c63 6c61  e, 'dtype': <cla
+0002ba60: 7373 2027 6e75 6d70 792e 666c 6f61 7433  ss 'numpy.float3
+0002ba70: 3227 3e7d 0d0a 2020 2020 2020 2020 2020  2'>}..          
+0002ba80: 2020 2320 7265 7375 6c74 7320 5b5b 3333    # results [[33
+0002ba90: 2e5d 5d0d 0a20 2020 2020 2020 2020 2020  .]]..           
+0002baa0: 2023 204f 7574 5b32 365d 3a20 6172 7261   # Out[26]: arra
+0002bab0: 7928 5b5b 3333 2e5d 5d2c 2064 7479 7065  y([[33.]], dtype
+0002bac0: 3d66 6c6f 6174 3332 290d 0a20 2020 2020  =float32)..     
+0002bad0: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
+0002bae0: 2121 7265 6475 6365 2022 2c20 6d65 7468  !!reduce ", meth
+0002baf0: 6f64 2c20 276e 696e 3a27 2c20 7566 756e  od, 'nin:', ufun
+0002bb00: 632e 6e69 6e2c 2075 6675 6e63 2e6e 6f75  c.nin, ufunc.nou
+0002bb10: 742c 2075 6675 6e63 2c20 2061 7267 732c  t, ufunc,  args,
+0002bb20: 2027 6f75 743a 272c 206f 7574 7075 7473   'out:', outputs
+0002bb30: 2c20 2027 6b77 6172 6773 3a27 2c20 6b77  ,  'kwargs:', kw
+0002bb40: 6172 6773 2c27 6e64 696d 272c 2061 7267  args,'ndim', arg
+0002bb50: 735b 305d 2e6e 6469 6d29 0d0a 2020 2020  s[0].ndim)..    
+0002bb60: 2020 2020 2020 2020 2320 7265 7375 6c74          # result
+0002bb70: 4e20 3d20 7375 7065 7228 4661 7374 4172  N = super(FastAr
+0002bb80: 7261 792c 2073 656c 6629 2e5f 5f61 7272  ray, self).__arr
+0002bb90: 6179 5f75 6675 6e63 5f5f 2875 6675 6e63  ay_ufunc__(ufunc
+0002bba0: 2c20 6d65 7468 6f64 2c2a 2a6b 7761 7267  , method,**kwarg
+0002bbb0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+0002bbc0: 2320 7072 696e 7428 2221 2172 6573 756c  # print("!!resul
+0002bbd0: 7420 6e75 6d70 7922 2c20 7265 7375 6c74  t numpy", result
+0002bbe0: 4e2c 2074 7970 6528 7265 7375 6c74 4e29  N, type(resultN)
+0002bbf0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+0002bc00: 204e 4f54 453a 0d0a 2020 2020 2020 2020   NOTE:..        
+0002bc10: 2020 2020 2320 6c6f 6f6b 2066 6f72 2072      # look for r
+0002bc20: 6564 7563 6520 6c6f 6769 6361 6c5f 6f72  educe logical_or
+0002bc30: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002bc40: 6c6f 6f6b 2066 6f72 2072 6564 7563 655f  look for reduce_
+0002bc50: 6c6f 6769 6361 6c5f 616e 6420 2020 2875  logical_and   (u
+0002bc60: 7365 6420 7769 7468 206e 702e 666d 696e  sed with np.fmin
+0002bc70: 2066 6f72 2069 6e73 7461 6e63 6529 0d0a   for instance)..
+0002bc80: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0002bc90: 6475 6365 5f66 756e 6320 3d20 6752 6564  duce_func = gRed
+0002bca0: 7563 6555 4675 6e63 732e 6765 7428 7566  uceUFuncs.get(uf
+0002bcb0: 756e 632c 204e 6f6e 6529 0d0a 0d0a 2020  unc, None)....  
+0002bcc0: 2020 2020 2020 2320 6368 6563 6b20 6966        # check if
+0002bcd0: 2077 6520 6361 6e20 7072 6f63 6565 6420   we can proceed 
+0002bce0: 746f 2063 616c 6375 6c61 7465 2061 2066  to calculate a f
+0002bcf0: 6173 7465 7220 7761 790d 0a20 2020 2020  aster way..     
+0002bd00: 2020 2069 6620 6d65 7468 6f64 203d 3d20     if method == 
+0002bd10: 225f 5f63 616c 6c5f 5f22 2061 6e64 2046  "__call__" and F
+0002bd20: 6173 7441 7272 6179 2e46 6173 7465 7255  astArray.FasterU
+0002bd30: 4675 6e63 2061 6e64 206e 6f74 2074 6f70  Func and not top
+0002bd40: 6c65 7665 6c5f 6162 6f72 743a 0d0a 2020  level_abort:..  
+0002bd50: 2020 2020 2020 2020 2020 2320 6368 6563            # chec
+0002bd60: 6b20 666f 7220 6269 6e61 7279 2075 6675  k for binary ufu
+0002bd70: 6e63 0d0a 2020 2020 2020 2020 2020 2020  nc..            
+0002bd80: 6966 206c 656e 2861 7267 7329 203d 3d20  if len(args) == 
+0002bd90: 3220 616e 6420 7566 756e 632e 6e6f 7574  2 and ufunc.nout
+0002bda0: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
+0002bdb0: 2020 2020 2020 2020 2323 2323 2323 2323          ########
+0002bdc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002bdd0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002bde0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002bdf0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002be00: 2323 230d 0a20 2020 2020 2020 2020 2020  ###..           
+0002be10: 2020 2020 2023 2320 4249 4e41 5259 0d0a       ## BINARY..
 0002be20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be30: 6966 2074 7970 6528 6172 6773 5b30 5d29  if type(args[0])
-0002be40: 2069 6e20 5363 616c 6172 5479 7065 3a0d   in ScalarType:.
-0002be50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002be60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be70: 2020 2020 2020 2020 2023 2066 6978 2073           # fix s
-0002be80: 6361 6c61 7220 7479 7065 206d 616b 6520  calar type make 
-0002be90: 7375 7265 2073 7472 696e 6720 6f72 2075  sure string or u
-0002bea0: 6e69 636f 6465 0d0a 2020 2020 2020 2020  nicode..        
-0002beb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bed0: 6966 2061 7272 6179 5f74 7970 6573 5b30  if array_types[0
-0002bee0: 5d2e 6e75 6d20 3d3d 2031 383a 0d0a 2020  ].num == 18:..  
-0002bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf10: 2020 2020 2020 2020 2020 6172 6773 5b30            args[0
-0002bf20: 5d20 3d20 7374 722e 656e 636f 6465 2873  ] = str.encode(s
-0002bf30: 7472 2861 7267 735b 305d 2929 0d0a 2020  tr(args[0]))..  
-0002bf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf60: 2020 2020 2020 6966 2061 7272 6179 5f74        if array_t
-0002bf70: 7970 6573 5b30 5d2e 6e75 6d20 3d3d 2031  ypes[0].num == 1
-0002bf80: 393a 0d0a 2020 2020 2020 2020 2020 2020  9:..            
-0002bf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bfb0: 6172 6773 5b30 5d20 3d20 7374 7228 6172  args[0] = str(ar
-0002bfc0: 6773 5b30 5d29 0d0a 2020 2020 2020 2020  gs[0])..        
+0002be30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002be40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002be50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002be60: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002be70: 2323 2323 2323 2323 2323 230d 0a20 2020  ###########..   
+0002be80: 2020 2020 2020 2020 2020 2020 2061 7272               arr
+0002be90: 6179 5f74 7970 6573 3a20 4c69 7374 5b6e  ay_types: List[n
+0002bea0: 702e 6474 7970 655d 203d 205b 5d0d 0a20  p.dtype] = [].. 
+0002beb0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0002bec0: 6361 6c61 725f 7479 7065 733a 204c 6973  calar_types: Lis
+0002bed0: 745b 5363 616c 6172 5479 7065 5d20 3d20  t[ScalarType] = 
+0002bee0: 5b5d 0d0a 0d0a 2020 2020 2020 2020 2020  []....          
+0002bef0: 2020 2020 2020 7363 616c 6172 733a 2069        scalars: i
+0002bf00: 6e74 203d 2030 0d0a 2020 2020 2020 2020  nt = 0..        
+0002bf10: 2020 2020 2020 2020 6162 6f72 743a 2069          abort: i
+0002bf20: 6e74 203d 2030 0d0a 2020 2020 2020 2020  nt = 0..        
+0002bf30: 2020 2020 2020 2020 666f 7220 6172 7220          for arr 
+0002bf40: 696e 2061 7267 733a 0d0a 2020 2020 2020  in args:..      
+0002bf50: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+0002bf60: 7254 7970 6520 3d20 7479 7065 2861 7272  rType = type(arr
+0002bf70: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002bf80: 2020 2020 2020 2069 6620 6172 7254 7970         if arrTyp
+0002bf90: 6520 696e 2053 6361 6c61 7254 7970 653a  e in ScalarType:
+0002bfa0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002bfb0: 2020 2020 2020 2020 2020 7363 616c 6172            scalar
+0002bfc0: 7320 2b3d 2031 0d0a 2020 2020 2020 2020  s += 1..        
 0002bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bfe0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002bff0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002bfe0: 7363 616c 6172 5f74 7970 6573 2e61 7070  scalar_types.app
+0002bff0: 656e 6428 6172 7254 7970 6529 0d0a 2020  end(arrType)..  
 0002c000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c010: 2020 2020 2020 2020 2020 2069 6620 6172             if ar
-0002c020: 7261 795f 7479 7065 735b 305d 2e6e 756d  ray_types[0].num
-0002c030: 203d 3d20 3138 3a0d 0a20 2020 2020 2020   == 18:..       
+0002c010: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0002c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c030: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
 0002c040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c060: 2020 2020 2061 7267 735b 315d 203d 2073       args[1] = s
-0002c070: 7472 2e65 6e63 6f64 6528 7374 7228 6172  tr.encode(str(ar
-0002c080: 6773 5b31 5d29 290d 0a20 2020 2020 2020  gs[1]))..       
-0002c090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c0b0: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
-0002c0c0: 305d 2e6e 756d 203d 3d20 3139 3a0d 0a20  0].num == 19:.. 
-0002c0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c0f0: 2020 2020 2020 2020 2020 2061 7267 735b             args[
-0002c100: 315d 203d 2073 7472 2861 7267 735b 315d  1] = str(args[1]
-0002c110: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002c050: 2020 2061 7272 6179 5f74 7970 6573 2e61     array_types.a
+0002c060: 7070 656e 6428 6172 722e 6474 7970 6529  ppend(arr.dtype)
+0002c070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002c080: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002c090: 6368 6563 6b20 666f 7220 6e6f 6e20 636f  check for non co
+0002c0a0: 6e74 696e 676f 7573 2061 7272 6179 730d  ntingous arrays.
+0002c0b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c0c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002c0d0: 6172 722e 6974 656d 7369 7a65 2021 3d20  arr.itemsize != 
+0002c0e0: 6172 722e 7374 7269 6465 735b 305d 3a0d  arr.strides[0]:.
+0002c0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c110: 2061 626f 7274 203d 2031 0d0a 2020 2020   abort = 1..    
 0002c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c130: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0002c130: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
 0002c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c150: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002c160: 7765 2068 6176 6520 7477 6f20 6172 7261  we have two arra
-0002c170: 7973 2c20 6966 206f 6e65 2061 7272 6179  ys, if one array
-0002c180: 2069 7320 6e6f 7420 7072 6f70 6572 2073   is not proper s
-0002c190: 7472 696e 6720 7479 7065 2c20 636f 6e76  tring type, conv
-0002c1a0: 6572 7420 6974 0d0a 2020 2020 2020 2020  ert it..        
-0002c1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c1c0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0002c1d0: 7272 6179 5f74 7970 6573 5b31 5d20 213d  rray_types[1] !=
-0002c1e0: 2066 696e 616c 5f64 7479 7065 3a0d 0a20   final_dtype:.. 
+0002c150: 2020 2020 2020 2020 2061 626f 7274 203d           abort =
+0002c160: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
+0002c170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c180: 2320 6361 6e20 6861 7070 656e 2077 6865  # can happen whe
+0002c190: 6e20 4e6f 6e65 206f 7220 6120 7079 7468  n None or a pyth
+0002c1a0: 6f6e 206c 6973 7420 6973 2070 6173 7365  on list is passe
+0002c1b0: 640d 0a20 2020 2020 2020 2020 2020 2020  d..             
+0002c1c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002c1d0: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
+0002c1e0: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
 0002c1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c210: 2020 2020 2020 2069 6620 6172 7261 795f         if array_
-0002c220: 7479 7065 735b 305d 2e6e 756d 203d 3d20  types[0].num == 
-0002c230: 3138 3a0d 0a20 2020 2020 2020 2020 2020  18:..           
-0002c240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c260: 2061 7267 735b 315d 203d 2061 7267 735b   args[1] = args[
-0002c270: 315d 2e61 7374 7970 6528 2253 2229 0d0a  1].astype("S")..
-0002c280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c200: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+0002c210: 6622 2a2a 646f 6e74 206b 6e6f 7720 686f  f"**dont know ho
+0002c220: 7720 746f 2068 616e 646c 6520 6172 7261  w to handle arra
+0002c230: 7920 7b61 7272 7d20 6172 6773 3a20 7b61  y {arr} args: {a
+0002c240: 7267 737d 2229 0d0a 0d0a 2020 2020 2020  rgs}")....      
+0002c250: 2020 2020 2020 2020 2020 6966 2061 626f            if abo
+0002c260: 7274 203d 3d20 303a 0d0a 2020 2020 2020  rt == 0:..      
+0002c270: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002c280: 2073 6361 6c61 7273 203c 2032 3a0d 0a20   scalars < 2:.. 
 0002c290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c2a0: 2020 2020 2020 2020 6966 2061 7272 6179          if array
-0002c2b0: 5f74 7970 6573 5b30 5d2e 6e75 6d20 3d3d  _types[0].num ==
-0002c2c0: 2031 393a 0d0a 2020 2020 2020 2020 2020   19:..          
-0002c2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c2f0: 2020 6172 6773 5b31 5d20 3d20 6172 6773    args[1] = args
-0002c300: 5b31 5d2e 6173 7479 7065 2822 5522 290d  [1].astype("U").
-0002c310: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002c320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c330: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
-0002c340: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
-0002c350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c370: 2020 7072 696e 7428 2241 4444 2073 7472    print("ADD str
-0002c380: 696e 6720 6f70 6572 6174 696f 6e22 2c20  ing operation", 
-0002c390: 6172 7261 795f 7479 7065 732c 2073 6361  array_types, sca
-0002c3a0: 6c61 725f 7479 7065 7329 0d0a 0d0a 2020  lar_types)....  
-0002c3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c3c0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
-0002c3d0: 6361 6c61 7273 203d 3d20 303a 0d0a 2020  calars == 0:..  
-0002c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c3f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002c400: 2061 7272 6179 5f74 7970 6573 5b30 5d20   array_types[0] 
-0002c410: 213d 2061 7272 6179 5f74 7970 6573 5b31  != array_types[1
-0002c420: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-0002c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c440: 2020 2020 2020 2020 2320 5550 4341 5354          # UPCAST
-0002c450: 2052 554c 4553 0d0a 2020 2020 2020 2020   RULES..        
+0002c2a0: 2020 2020 2020 2069 735f 6c6f 6769 6361         is_logica
+0002c2b0: 6c20 3d20 300d 0a20 2020 2020 2020 2020  l = 0..         
+0002c2c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002c2d0: 2063 6865 636b 2066 6f72 2061 6464 2c20   check for add, 
+0002c2e0: 7375 622c 206d 756c 2c20 6469 7669 6465  sub, mul, divide
+0002c2f0: 2c20 706f 7765 720d 0a20 2020 2020 2020  , power..       
+0002c300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c310: 2066 6173 745f 6675 6e63 7469 6f6e 203d   fast_function =
+0002c320: 2067 4269 6e61 7279 5546 756e 6373 2e67   gBinaryUFuncs.g
+0002c330: 6574 2875 6675 6e63 2c20 4e6f 6e65 290d  et(ufunc, None).
+0002c340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c350: 2020 2020 2020 2020 2069 6620 6661 7374           if fast
+0002c360: 5f66 756e 6374 696f 6e20 6973 204e 6f6e  _function is Non
+0002c370: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c390: 2320 6368 6563 6b20 666f 7220 636f 6d70  # check for comp
+0002c3a0: 6172 6973 6f6e 2061 6e64 206c 6f67 6963  arison and logic
+0002c3b0: 616c 206f 722f 616e 6420 6675 6e63 7469  al or/and functi
+0002c3c0: 6f6e 730d 0a20 2020 2020 2020 2020 2020  ons..           
+0002c3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c3e0: 2066 6173 745f 6675 6e63 7469 6f6e 203d   fast_function =
+0002c3f0: 2067 4269 6e61 7279 4c6f 6769 6361 6c55   gBinaryLogicalU
+0002c400: 4675 6e63 732e 6765 7428 7566 756e 632c  Funcs.get(ufunc,
+0002c410: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+0002c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c430: 2020 2020 6966 2066 6173 745f 6675 6e63      if fast_func
+0002c440: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+0002c450: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
 0002c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c470: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0002c480: 7272 6179 5f74 7970 6573 5b30 5d20 3d3d  rray_types[0] ==
-0002c490: 2066 696e 616c 5f64 7479 7065 2061 6e64   final_dtype and
-0002c4a0: 2061 7272 6179 5f74 7970 6573 5b31 5d20   array_types[1] 
-0002c4b0: 213d 2066 696e 616c 5f64 7479 7065 3a0d  != final_dtype:.
-0002c4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c4e0: 2020 2020 2020 2020 2023 2070 7269 6e74           # print
-0002c4f0: 2822 2121 2175 7063 6173 7420 7275 6c65  ("!!!upcast rule
-0002c500: 7320 7365 636f 6e64 222c 2061 7272 6179  s second", array
-0002c510: 5f74 7970 6573 5b30 5d2c 2061 7272 6179  _types[0], array
-0002c520: 5f74 7970 6573 5b31 5d2c 2066 696e 616c  _types[1], final
-0002c530: 5f64 7479 7065 290d 0a20 2020 2020 2020  _dtype)..       
-0002c540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c560: 2023 2063 6f6e 7665 7274 2074 6f20 7468   # convert to th
-0002c570: 6520 7072 6f70 6572 2074 7970 6520 6265  e proper type be
-0002c580: 666f 7220 6361 6c63 756c 6174 696f 6e0d  for calculation.
-0002c590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c5b0: 2020 2020 2020 2020 2061 7267 735b 315d           args[1]
-0002c5c0: 203d 205f 4153 5459 5045 2861 7267 735b   = _ASTYPE(args[
-0002c5d0: 315d 2c20 6669 6e61 6c5f 6474 7970 6529  1], final_dtype)
-0002c5e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002c5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c600: 2020 2020 2020 2020 656c 6966 2061 7272          elif arr
-0002c610: 6179 5f74 7970 6573 5b30 5d20 213d 2066  ay_types[0] != f
-0002c620: 696e 616c 5f64 7479 7065 2061 6e64 2061  inal_dtype and a
-0002c630: 7272 6179 5f74 7970 6573 5b31 5d20 3d3d  rray_types[1] ==
-0002c640: 2066 696e 616c 5f64 7479 7065 3a0d 0a20   final_dtype:.. 
-0002c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c470: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
+0002c480: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
+0002c490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c4b0: 2020 7072 696e 7428 6622 2a2a 6c6f 6769    print(f"**logi
+0002c4c0: 6361 6c20 6675 6e63 7469 6f6e 2063 616c  cal function cal
+0002c4d0: 6c65 6420 7b75 6675 6e63 7d20 6172 6773  led {ufunc} args
+0002c4e0: 3a20 7b61 7267 737d 2229 0d0a 2020 2020  : {args}")..    
+0002c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c500: 2020 2020 2020 2020 2020 2020 6973 5f6c              is_l
+0002c510: 6f67 6963 616c 203d 2031 0d0a 2020 2020  ogical = 1..    
+0002c520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c530: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
+0002c540: 6c5f 6474 7970 6520 3d20 6e70 2e62 6f6f  l_dtype = np.boo
+0002c550: 6c5f 0d0a 0d0a 2020 2020 2020 2020 2020  l_....          
+0002c560: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002c570: 2066 6173 745f 6675 6e63 7469 6f6e 2069   fast_function i
+0002c580: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+0002c590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c5a0: 2020 2020 2023 2063 6865 636b 2066 6f72       # check for
+0002c5b0: 2062 6974 7769 7365 2066 756e 6374 696f   bitwise functio
+0002c5c0: 6e73 3f20 2874 6573 7420 7468 6973 290d  ns? (test this).
+0002c5d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c5e0: 2020 2020 2020 2020 2020 2020 2066 6173               fas
+0002c5f0: 745f 6675 6e63 7469 6f6e 203d 2067 4269  t_function = gBi
+0002c600: 6e61 7279 4269 7477 6973 6555 4675 6e63  naryBitwiseUFunc
+0002c610: 732e 6765 7428 7566 756e 632c 204e 6f6e  s.get(ufunc, Non
+0002c620: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
+0002c630: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002c640: 2066 6173 745f 6675 6e63 7469 6f6e 2069   fast_function i
+0002c650: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
 0002c660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c670: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
-0002c680: 2121 2175 7063 6173 7420 7275 6c65 7320  !!!upcast rules 
-0002c690: 6669 7273 7422 2c20 6172 7261 795f 7479  first", array_ty
-0002c6a0: 7065 735b 305d 2c20 6172 7261 795f 7479  pes[0], array_ty
-0002c6b0: 7065 735b 315d 2c20 6669 6e61 6c5f 6474  pes[1], final_dt
-0002c6c0: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
-0002c6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c6e0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002c6f0: 636f 6e76 6572 7420 746f 2074 6865 2070  convert to the p
-0002c700: 726f 7065 7220 7479 7065 2062 6566 6f72  roper type befor
-0002c710: 2063 616c 6375 6c61 7469 6f6e 0d0a 2020   calculation..  
+0002c670: 2020 2020 2020 2020 2069 6620 6861 735f           if has_
+0002c680: 6f75 7470 7574 7320 616e 6420 6973 5f6c  outputs and is_l
+0002c690: 6f67 6963 616c 203d 3d20 303a 0d0a 2020  ogical == 0:..  
+0002c6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c6b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002c6c0: 6861 7665 2074 6f20 636f 6e66 6f72 6d20  have to conform 
+0002c6d0: 746f 206f 7574 7075 740d 0a20 2020 2020  to output..     
+0002c6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c6f0: 2020 2020 2020 2020 2020 2066 696e 616c             final
+0002c700: 5f64 7479 7065 203d 206f 7574 5f61 7267  _dtype = out_arg
+0002c710: 735b 305d 2e64 7479 7065 0d0a 2020 2020  s[0].dtype..    
 0002c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c740: 2020 2020 2020 6172 6773 5b30 5d20 3d20        args[0] = 
-0002c750: 5f41 5354 5950 4528 6172 6773 5b30 5d2c  _ASTYPE(args[0],
-0002c760: 2066 696e 616c 5f64 7479 7065 290d 0a20   final_dtype).. 
-0002c770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c790: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0002c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7c0: 2020 2320 736f 6d65 7469 6d65 7320 626f    # sometimes bo
-0002c7d0: 7468 206f 6620 7468 656d 206d 7573 7420  th of them must 
-0002c7e0: 6265 2075 7063 6173 742e 2e2e 0d0a 2020  be upcast.....  
-0002c7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c810: 2020 2020 2020 2320 636f 6e73 6964 6572        # consider
-0002c820: 2020 696e 7438 202a 2075 696e 7438 203d    int8 * uint8 =
-0002c830: 3d3e 2077 696c 6c20 7570 6361 7374 2074  => will upcast t
-0002c840: 6f20 696e 7431 360d 0a20 2020 2020 2020  o int16..       
-0002c850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c730: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0002c740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c750: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002c760: 6620 6973 5f6c 6f67 6963 616c 203d 3d20  f is_logical == 
+0002c770: 3120 616e 6420 7363 616c 6172 7320 3d3d  1 and scalars ==
+0002c780: 2031 3a0d 0a20 2020 2020 2020 2020 2020   1:..           
+0002c790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c7a0: 2020 2020 2020 2020 2023 204e 4f54 453a           # NOTE:
+0002c7b0: 2073 6361 6c61 7220 7570 6361 7374 2072   scalar upcast r
+0002c7c0: 756c 6573 202d 2d20 6a75 7374 2061 7070  ules -- just app
+0002c7d0: 6c79 2074 6f20 6c6f 6769 6361 6c73 2073  ly to logicals s
+0002c7e0: 6f20 7468 6174 2061 7272 203c 2035 2064  o that arr < 5 d
+0002c7f0: 6f65 7320 6e6f 7420 7570 6361 7374 3f0d  oes not upcast?.
+0002c800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c820: 2020 2020 2023 2020 2020 2020 206f 7220       #       or 
+0002c830: 676c 6f62 616c 6c79 2061 7070 6c79 2074  globally apply t
+0002c840: 6869 7320 7275 6c65 2073 6f20 7468 6174  his rule so that
+0002c850: 2061 7272 203d 2061 7272 202b 2035 0d0a   arr = arr + 5..
 0002c860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c870: 2023 2070 7269 6e74 2822 2121 2163 616e   # print("!!!can
-0002c880: 6e6f 7420 756e 6465 7273 7461 6e64 2075  not understand u
-0002c890: 7063 6173 7420 7275 6c65 7322 2c20 6172  pcast rules", ar
-0002c8a0: 7261 7974 7970 6573 5b30 5d2c 2061 7272  raytypes[0], arr
-0002c8b0: 6179 7479 7065 735b 315d 2c20 6669 6e61  aytypes[1], fina
-0002c8c0: 6c5f 6474 7970 6529 0d0a 2020 2020 2020  l_dtype)..      
-0002c8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c8f0: 2020 6172 6773 5b30 5d20 3d20 5f41 5354    args[0] = _AST
-0002c900: 5950 4528 6172 6773 5b30 5d2c 2066 696e  YPE(args[0], fin
-0002c910: 616c 5f64 7479 7065 290d 0a20 2020 2020  al_dtype)..     
-0002c920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c940: 2020 2061 7267 735b 315d 203d 205f 4153     args[1] = _AS
-0002c950: 5459 5045 2861 7267 735b 315d 2c20 6669  TYPE(args[1], fi
-0002c960: 6e61 6c5f 6474 7970 6529 0d0a 2020 2020  nal_dtype)..    
-0002c970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c880: 2020 2020 2320 6966 2073 6361 6c61 7273      # if scalars
+0002c890: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
+0002c8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c8b0: 2020 2020 2020 2020 2020 2020 2320 7370              # sp
+0002c8c0: 6563 6961 6c20 6361 7365 2068 6176 6520  ecial case have 
+0002c8d0: 746f 2073 6565 2069 6620 7363 616c 6172  to see if scalar
+0002c8e0: 2069 7320 696e 2072 616e 6765 0d0a 2020   is in range..  
+0002c8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c910: 2020 6966 2074 7970 6528 6172 6773 5b30    if type(args[0
+0002c920: 5d29 2069 6e20 5363 616c 6172 5479 7065  ]) in ScalarType
+0002c930: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002c940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c950: 2020 2020 2020 2020 2020 2073 6361 6c61             scala
+0002c960: 725f 7661 6c20 3d20 6172 6773 5b30 5d0d  r_val = args[0].
+0002c970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0002c980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c990: 2020 2020 2320 544a 4420 6368 6563 6b20      # TJD check 
-0002c9a0: 6c6f 6769 6320 6865 7265 2e2e 2e20 7768  logic here... wh
-0002c9b0: 6174 2064 6f65 7320 6e75 6d70 7920 7768  at does numpy wh
-0002c9c0: 656e 2069 6e74 2a20 2a20 7569 6e74 3820  en int* * uint8 
-0002c9d0: 3f20 7370 6565 6420 7465 7374 0d0a 2020  ? speed test..  
+0002c990: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c9c0: 2020 2020 7363 616c 6172 5f76 616c 203d      scalar_val =
+0002c9d0: 2061 7267 735b 315d 0d0a 0d0a 2020 2020   args[1]....    
 0002c9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002c9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca00: 2020 2020 2020 2323 5573 654e 756d 7079        ##UseNumpy
-0002ca10: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
-0002ca20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca30: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002ca40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca50: 2020 2020 2020 2020 2020 2020 2320 5550              # UP
-0002ca60: 4341 5354 2052 554c 4553 2077 6865 6e20  CAST RULES when 
-0002ca70: 6f6e 6520 6973 2061 2073 6361 6c61 720d  one is a scalar.
-0002ca80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002ca90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002caa0: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
-0002cab0: 305d 2021 3d20 6669 6e61 6c5f 6474 7970  0] != final_dtyp
-0002cac0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002cad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cae0: 2020 2020 2020 2020 2320 7768 6963 6820          # which 
-0002caf0: 6172 6775 6d65 6e74 2069 7320 7468 6520  argument is the 
-0002cb00: 7363 616c 6172 3f20 2063 6f6e 7665 7274  scalar?  convert
-0002cb10: 2074 6865 206f 7468 6572 206f 6e65 0d0a   the other one..
+0002ca00: 6669 6e61 6c5f 6474 7970 6520 3d20 6c6f  final_dtype = lo
+0002ca10: 6769 6361 6c5f 6669 6e64 5f63 6f6d 6d6f  gical_find_commo
+0002ca20: 6e5f 7479 7065 2861 7272 6179 5f74 7970  n_type(array_typ
+0002ca30: 6573 2c20 7363 616c 6172 5f74 7970 6573  es, scalar_types
+0002ca40: 2c20 7363 616c 6172 5f76 616c 290d 0a0d  , scalar_val)...
+0002ca50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ca60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca70: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+0002ca80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca90: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0002caa0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+0002cab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cac0: 2020 2020 2020 2023 2054 4f44 4f3a 2063         # TODO: c
+0002cad0: 6865 636b 2066 6f72 2062 7567 2077 6865  heck for bug whe
+0002cae0: 7265 206e 702e 696e 7433 3220 7479 7065  re np.int32 type
+0002caf0: 2037 2067 6574 7320 666c 6970 7065 6420   7 gets flipped 
+0002cb00: 746f 206e 702e 696e 7433 3220 7479 7065  to np.int32 type
+0002cb10: 2035 0d0a 2020 2020 2020 2020 2020 2020   5..            
 0002cb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cb40: 2020 2020 6966 2074 7970 6528 6172 6773      if type(args
-0002cb50: 5b30 5d29 2069 6e20 5363 616c 6172 5479  [0]) in ScalarTy
-0002cb60: 7065 3a0d 0a20 2020 2020 2020 2020 2020  pe:..           
-0002cb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cb80: 2020 2020 2020 2020 2020 2020 2023 2070               # p
-0002cb90: 7269 6e74 2822 636f 6e76 6572 7469 6e67  rint("converting
-0002cba0: 2061 7267 3220 6672 6f6d 222c 2061 7267   arg2 from", arg
-0002cbb0: 735b 315d 2c20 6669 6e61 6c5f 6474 7970  s[1], final_dtyp
-0002cbc0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-0002cbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cbe0: 2020 2020 2020 2020 2020 2020 6172 6773              args
-0002cbf0: 5b31 5d20 3d20 5f41 5354 5950 4528 6172  [1] = _ASTYPE(ar
-0002cc00: 6773 5b31 5d2c 2066 696e 616c 5f64 7479  gs[1], final_dty
-0002cc10: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
-0002cc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc30: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-0002cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb30: 2020 2020 2020 2020 6966 2073 6361 6c61          if scala
+0002cb40: 7273 203d 3d20 3020 616e 6420 6c65 6e28  rs == 0 and len(
+0002cb50: 6172 7261 795f 7479 7065 7329 203d 3d20  array_types) == 
+0002cb60: 3220 616e 6420 2861 7272 6179 5f74 7970  2 and (array_typ
+0002cb70: 6573 5b30 5d20 3d3d 2061 7272 6179 5f74  es[0] == array_t
+0002cb80: 7970 6573 5b31 5d29 3a0d 0a20 2020 2020  ypes[1]):..     
+0002cb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cbb0: 2020 2066 696e 616c 5f64 7479 7065 203d     final_dtype =
+0002cbc0: 2061 7272 6179 5f74 7970 6573 5b30 5d0d   array_types[0].
+0002cbd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cbf0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002cc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc20: 2020 2020 2320 6368 6563 6b20 666f 7220      # check for 
+0002cc30: 696e 7420 7363 616c 6172 2061 6761 696e  int scalar again
+0002cc40: 7374 2069 6e74 0d0a 2020 2020 2020 2020  st int..        
 0002cc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc60: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
-0002cc70: 2263 6f6e 7665 7274 696e 6720 6172 6731  "converting arg1
-0002cc80: 2066 726f 6d20 222c 2061 7267 735b 305d   from ", args[0]
-0002cc90: 2c20 6669 6e61 6c5f 6474 7970 6529 0d0a  , final_dtype)..
-0002cca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ccb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ccc0: 2020 2020 2020 2020 6172 6773 5b30 5d20          args[0] 
-0002ccd0: 3d20 5f41 5354 5950 4528 6172 6773 5b30  = _ASTYPE(args[0
-0002cce0: 5d2c 2066 696e 616c 5f64 7479 7065 290d  ], final_dtype).
-0002ccf0: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-0002cd00: 206e 6f74 2061 2062 696e 6172 7920 7566   not a binary uf
-0002cd10: 756e 632c 2063 6865 636b 2066 6f72 2075  unc, check for u
-0002cd20: 6e61 7279 2075 6675 6e63 0d0a 2020 2020  nary ufunc..    
-0002cd30: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
-0002cd40: 666f 7220 6a75 7374 2031 2069 6e70 7574  for just 1 input
-0002cd50: 2028 756e 6172 7929 0d0a 0d0a 2020 2020   (unary)....    
-0002cd60: 2020 2020 2020 2020 656c 6966 2028 7566          elif (uf
-0002cd70: 756e 632e 6e69 6e20 3d3d 2031 2920 616e  unc.nin == 1) an
-0002cd80: 6420 2875 6675 6e63 2e6e 6f75 7420 3d3d  d (ufunc.nout ==
-0002cd90: 2031 293a 0d0a 2020 2020 2020 2020 2020   1):..          
-0002cda0: 2020 2020 2020 2323 2323 2323 2323 2323        ##########
-0002cdb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002cdc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002cdd0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002cde0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002cdf0: 230d 0a20 2020 2020 2020 2020 2020 2020  #..             
-0002ce00: 2020 2023 2320 554e 4152 590d 0a20 2020     ## UNARY..   
-0002ce10: 2020 2020 2020 2020 2020 2020 2023 2323               ###
-0002ce20: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002ce30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002ce40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002ce50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002ce60: 2323 2323 2323 2323 0d0a 2020 2020 2020  ########..      
-0002ce70: 2020 2020 2020 2020 2020 6661 7374 5f66            fast_f
-0002ce80: 756e 6374 696f 6e20 3d20 6755 6e61 7279  unction = gUnary
-0002ce90: 5546 756e 6373 2e67 6574 2875 6675 6e63  UFuncs.get(ufunc
-0002cea0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-0002ceb0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002cec0: 2020 2020 2020 2020 2020 2020 6966 2046              if F
-0002ced0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-0002cee0: 203e 2031 3a0d 0a20 2020 2020 2020 2020   > 1:..         
-0002cef0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-0002cf00: 2822 2a2a 2a75 6e6b 6e6f 776e 2075 6675  ("***unknown ufu
-0002cf10: 6e63 2061 7267 2073 7479 6c65 3a20 222c  nc arg style: ",
-0002cf20: 2075 6675 6e63 2e6e 696e 2c20 7566 756e   ufunc.nin, ufun
-0002cf30: 632e 6e6f 7574 2c20 7566 756e 632c 2061  c.nout, ufunc, a
-0002cf40: 7267 732c 206b 7761 7267 7329 0d0a 0d0a  rgs, kwargs)....
-0002cf50: 2020 2020 2020 2020 2320 2d2d 2d2d 2d2d          # ------
-0002cf60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002cf70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002cf80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002cf90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002cfa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002cfb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002cfc0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0002cfd0: 2069 6620 6e6f 7420 4661 7374 4172 7261   if not FastArra
-0002cfe0: 792e 4661 7374 6572 5546 756e 633a 0d0a  y.FasterUFunc:..
-0002cff0: 2020 2020 2020 2020 2020 2020 6661 7374              fast
-0002d000: 5f66 756e 6374 696f 6e20 3d20 4e6f 6e65  _function = None
-0002d010: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0002d020: 6475 6365 5f66 756e 6320 3d20 4e6f 6e65  duce_func = None
-0002d030: 0d0a 0d0a 2020 2020 2020 2020 2320 6368  ....        # ch
-0002d040: 6563 6b20 666f 7220 6120 7265 6475 6365  eck for a reduce
-0002d050: 2066 756e 6320 6c69 6b65 2073 756d 206f   func like sum o
-0002d060: 7220 6d69 6e0d 0a20 2020 2020 2020 2069  r min..        i
-0002d070: 6620 7265 6475 6365 5f66 756e 6320 6973  f reduce_func is
-0002d080: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-0002d090: 2020 2020 2020 2020 6b65 6570 6469 6d73          keepdims
-0002d0a0: 3a20 626f 6f6c 203d 206b 7761 7267 732e  : bool = kwargs.
-0002d0b0: 6765 7428 226b 6565 7064 696d 7322 2c20  get("keepdims", 
-0002d0c0: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-0002d0d0: 2020 2020 6966 2064 7479 7065 2069 7320      if dtype is 
-0002d0e0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-0002d0f0: 2020 2020 2020 2064 7479 7065 203d 2061         dtype = a
-0002d100: 7267 735b 305d 2e64 7479 7065 0d0a 0d0a  rgs[0].dtype....
-0002d110: 2020 2020 2020 2020 2020 2020 2320 4d61              # Ma
-0002d120: 7468 4c65 6467 6572 0d0a 2020 2020 2020  thLedger..      
-0002d130: 2020 2020 2020 7265 7375 6c74 203d 2054        result = T
-0002d140: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-0002d150: 4c65 6467 6572 2e5f 5245 4455 4345 2861  Ledger._REDUCE(a
-0002d160: 7267 735b 305d 2c20 7265 6475 6365 5f66  rgs[0], reduce_f
-0002d170: 756e 6329 0d0a 2020 2020 2020 2020 2020  unc)..          
-0002d180: 2020 6368 6172 203d 206e 702e 6474 7970    char = np.dtyp
-0002d190: 6528 6474 7970 6529 2e63 6861 720d 0a20  e(dtype).char.. 
-0002d1a0: 2020 2020 2020 2020 2020 2069 6620 4661             if Fa
-0002d1b0: 7374 4172 7261 792e 5665 7262 6f73 6520  stArray.Verbose 
-0002d1c0: 3e20 313a 0d0a 2020 2020 2020 2020 2020  > 1:..          
-0002d1d0: 2020 2020 2020 7072 696e 7428 222a 2a2a        print("***
-0002d1e0: 7265 7375 6c74 2066 726f 6d20 7265 6475  result from redu
-0002d1f0: 6365 222c 2072 6573 756c 742c 2074 7970  ce", result, typ
-0002d200: 6528 7265 7375 6c74 292c 2064 7479 7065  e(result), dtype
-0002d210: 2c20 6368 6172 290d 0a0d 0a20 2020 2020  , char)....     
-0002d220: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-0002d230: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-0002d240: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002d250: 2070 7269 6e74 2822 7265 6475 6365 2063   print("reduce c
-0002d260: 616c 6c65 6422 2c20 7566 756e 632c 206b  alled", ufunc, k
-0002d270: 6565 7064 696d 732c 2064 7479 7065 290d  eepdims, dtype).
-0002d280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d290: 2069 6620 7265 6475 6365 5f66 756e 6320   if reduce_func 
-0002d2a0: 696e 205b 5245 4455 4345 5f46 554e 4354  in [REDUCE_FUNCT
-0002d2b0: 494f 4e53 2e52 4544 5543 455f 5355 4d2c  IONS.REDUCE_SUM,
-0002d2c0: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
-0002d2d0: 532e 5245 4455 4345 5f4e 414e 5355 4d5d  S.REDUCE_NANSUM]
-0002d2e0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-0002d2f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002d300: 2020 2020 2020 7265 7375 6c74 2c20 666c        result, fl
-0002d310: 6f61 740d 0a20 2020 2020 2020 2020 2020  oat..           
-0002d320: 2020 2020 2029 3a0d 0a20 2020 2020 2020       ):..       
-0002d330: 2020 2020 2020 2020 2020 2020 2072 6573               res
-0002d340: 756c 7420 3d20 6e70 2e66 6c6f 6174 3634  ult = np.float64
-0002d350: 2872 6573 756c 7429 0d0a 2020 2020 2020  (result)..      
-0002d360: 2020 2020 2020 2020 2020 656c 6966 2064            elif d
-0002d370: 7479 7065 2021 3d20 6e70 2e66 6c6f 6174  type != np.float
-0002d380: 3332 2061 6e64 2064 7479 7065 2021 3d20  32 and dtype != 
-0002d390: 6e70 2e66 6c6f 6174 3634 3a0d 0a20 2020  np.float64:..   
+0002cc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc70: 2320 6275 6720 7768 6572 6520 6e70 2e69  # bug where np.i
+0002cc80: 6e74 3820 616e 6420 7468 656e 2061 6464  nt8 and then add
+0002cc90: 202b 3139 3939 206f 7220 6c61 7267 6572   +1999 or larger
+0002cca0: 206e 756d 6265 722e 2020 6e65 6564 2074   number.  need t
+0002ccb0: 6f20 7570 6361 7374 0d0a 2020 2020 2020  o upcast..      
+0002ccc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ccd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cce0: 2020 6966 2073 6361 6c61 7273 203d 3d20    if scalars == 
+0002ccf0: 3120 616e 6420 6172 7261 795f 7479 7065  1 and array_type
+0002cd00: 735b 305d 2e6e 756d 203c 3d20 3130 3a0d  s[0].num <= 10:.
+0002cd10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002cd40: 7479 7065 2861 7267 735b 305d 2920 696e  type(args[0]) in
+0002cd50: 2053 6361 6c61 7254 7970 653a 0d0a 2020   ScalarType:..  
+0002cd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd80: 2020 2020 2020 2020 2020 2020 2020 7363                sc
+0002cd90: 616c 6172 5f76 616c 203d 2061 7267 735b  alar_val = args[
+0002cda0: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
+0002cdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cdd0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0002cde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ce00: 2020 2020 2020 2073 6361 6c61 725f 7661         scalar_va
+0002ce10: 6c20 3d20 6172 6773 5b31 5d0d 0a0d 0a20  l = args[1].... 
+0002ce20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ce30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ce40: 2020 2020 2020 2020 2020 2066 696e 616c             final
+0002ce50: 5f64 7479 7065 203d 206c 6f67 6963 616c  _dtype = logical
+0002ce60: 5f66 696e 645f 636f 6d6d 6f6e 5f74 7970  _find_common_typ
+0002ce70: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+0002ce80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ce90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cea0: 2020 2020 6172 7261 795f 7479 7065 732c      array_types,
+0002ceb0: 2073 6361 6c61 725f 7479 7065 732c 2073   scalar_types, s
+0002cec0: 6361 6c61 725f 7661 6c0d 0a20 2020 2020  calar_val..     
+0002ced0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cef0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+0002cf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf20: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0002cf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf50: 2020 2020 2066 696e 616c 5f64 7479 7065       final_dtype
+0002cf60: 203d 206e 702e 6669 6e64 5f63 6f6d 6d6f   = np.find_commo
+0002cf70: 6e5f 7479 7065 2861 7272 6179 5f74 7970  n_type(array_typ
+0002cf80: 6573 2c20 7363 616c 6172 5f74 7970 6573  es, scalar_types
+0002cf90: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0002cfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cfb0: 2023 2069 6620 7765 2061 7265 2061 6464   # if we are add
+0002cfc0: 696e 6720 7477 6f20 7374 7269 6e67 7320  ing two strings 
+0002cfd0: 6f72 2075 6e69 636f 6465 2c20 7370 6563  or unicode, spec
+0002cfe0: 6961 6c20 6361 7365 0d0a 2020 2020 2020  ial case..      
+0002cff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d000: 2020 2020 2020 2320 6966 2077 6520 7468        # if we th
+0002d010: 696e 6b20 7468 6520 6669 6e61 6c20 6474  ink the final dt
+0002d020: 7970 6520 6973 2061 6e20 6f62 6a65 6374  ype is an object
+0002d030: 2c20 6368 6563 6b20 6966 2074 6869 7320  , check if this 
+0002d040: 6973 2072 6561 6c6c 7920 7477 6f20 7374  is really two st
+0002d050: 7269 6e67 730d 0a20 2020 2020 2020 2020  rings..         
+0002d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d070: 2020 2069 6620 6661 7374 5f66 756e 6374     if fast_funct
+0002d080: 696f 6e20 3d3d 204d 4154 485f 4f50 4552  ion == MATH_OPER
+0002d090: 4154 494f 4e2e 4144 4420 616e 6420 280d  ATION.ADD and (.
+0002d0a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d0c0: 2061 7272 6179 5f74 7970 6573 5b30 5d2e   array_types[0].
+0002d0d0: 6e75 6d20 3d3d 2031 3820 6f72 2061 7272  num == 18 or arr
+0002d0e0: 6179 5f74 7970 6573 5b30 5d2e 6e75 6d20  ay_types[0].num 
+0002d0f0: 3d3d 2031 390d 0a20 2020 2020 2020 2020  == 19..         
+0002d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d110: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
+0002d120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d130: 2020 2020 2020 2023 2061 7373 756d 6520         # assume 
+0002d140: 6164 6469 7469 6f6e 206f 6620 7477 6f20  addition of two 
+0002d150: 7374 7269 6e67 730d 0a20 2020 2020 2020  strings..       
+0002d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d170: 2020 2020 2020 2020 2066 696e 616c 5f64           final_d
+0002d180: 7479 7065 203d 2061 7272 6179 5f74 7970  type = array_typ
+0002d190: 6573 5b30 5d0d 0a20 2020 2020 2020 2020  es[0]..         
+0002d1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d1b0: 2020 2020 2020 2069 6620 7363 616c 6172         if scalar
+0002d1c0: 7320 213d 2030 3a0d 0a20 2020 2020 2020  s != 0:..       
+0002d1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d1e0: 2020 2020 2020 2020 2020 2020 2023 2077               # w
+0002d1f0: 6520 6861 7665 2061 2073 6361 6c61 722e  e have a scalar.
+0002d200: 2e2e 206d 616b 6520 7375 7265 2077 6520  .. make sure we 
+0002d210: 636f 6e76 6572 7420 6974 0d0a 2020 2020  convert it..    
+0002d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d240: 6966 2074 7970 6528 6172 6773 5b30 5d29  if type(args[0])
+0002d250: 2069 6e20 5363 616c 6172 5479 7065 3a0d   in ScalarType:.
+0002d260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d280: 2020 2020 2020 2020 2023 2066 6978 2073           # fix s
+0002d290: 6361 6c61 7220 7479 7065 206d 616b 6520  calar type make 
+0002d2a0: 7375 7265 2073 7472 696e 6720 6f72 2075  sure string or u
+0002d2b0: 6e69 636f 6465 0d0a 2020 2020 2020 2020  nicode..        
+0002d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d2e0: 6966 2061 7272 6179 5f74 7970 6573 5b30  if array_types[0
+0002d2f0: 5d2e 6e75 6d20 3d3d 2031 383a 0d0a 2020  ].num == 18:..  
+0002d300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d320: 2020 2020 2020 2020 2020 6172 6773 5b30            args[0
+0002d330: 5d20 3d20 7374 722e 656e 636f 6465 2873  ] = str.encode(s
+0002d340: 7472 2861 7267 735b 305d 2929 0d0a 2020  tr(args[0]))..  
+0002d350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d370: 2020 2020 2020 6966 2061 7272 6179 5f74        if array_t
+0002d380: 7970 6573 5b30 5d2e 6e75 6d20 3d3d 2031  ypes[0].num == 1
+0002d390: 393a 0d0a 2020 2020 2020 2020 2020 2020  9:..            
 0002d3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3b0: 2023 2070 7265 7365 7276 6520 696e 7465   # preserve inte
-0002d3c0: 6765 7273 0d0a 2020 2020 2020 2020 2020  gers..          
-0002d3d0: 2020 2020 2020 2020 2020 6966 2063 6861            if cha
-0002d3e0: 7220 696e 204e 756d 7079 4368 6172 5479  r in NumpyCharTy
-0002d3f0: 7065 732e 556e 7369 676e 6564 496e 7465  pes.UnsignedInte
-0002d400: 6765 7236 343a 0d0a 2020 2020 2020 2020  ger64:..        
+0002d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d3c0: 6172 6773 5b30 5d20 3d20 7374 7228 6172  args[0] = str(ar
+0002d3d0: 6773 5b30 5d29 0d0a 2020 2020 2020 2020  gs[0])..        
+0002d3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d3f0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0002d400: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
 0002d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d420: 2320 7072 6573 6572 7665 2068 6967 6820  # preserve high 
-0002d430: 6269 740d 0a20 2020 2020 2020 2020 2020  bit..           
-0002d440: 2020 2020 2020 2020 2020 2020 2072 6573               res
-0002d450: 756c 7420 3d20 6e70 2e75 696e 7436 3428  ult = np.uint64(
-0002d460: 7265 7375 6c74 290d 0a20 2020 2020 2020  result)..       
-0002d470: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0002d480: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002d490: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0002d4a0: 6c74 203d 206e 702e 696e 7436 3428 7265  lt = np.int64(re
-0002d4b0: 7375 6c74 290d 0a20 2020 2020 2020 2020  sult)..         
-0002d4c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0002d4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d4e0: 2020 7265 7375 6c74 203d 206e 702e 666c    result = np.fl
-0002d4f0: 6f61 7436 3428 7265 7375 6c74 290d 0a0d  oat64(result)...
-0002d500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d510: 2023 204d 494e 2f4d 4158 206e 6565 6420   # MIN/MAX need 
-0002d520: 746f 2072 6574 7572 6e20 7361 6d65 2074  to return same t
-0002d530: 7970 650d 0a20 2020 2020 2020 2020 2020  ype..           
-0002d540: 2020 2020 2069 6620 7265 6475 6365 5f66       if reduce_f
-0002d550: 756e 6320 3e3d 2052 4544 5543 455f 4655  unc >= REDUCE_FU
-0002d560: 4e43 5449 4f4e 532e 5245 4455 4345 5f4d  NCTIONS.REDUCE_M
-0002d570: 494e 3a0d 0a20 2020 2020 2020 2020 2020  IN:..           
-0002d580: 2020 2020 2020 2020 2023 206d 696e 206d           # min m
-0002d590: 6178 206e 6f74 2061 6c6c 6f77 6564 206f  ax not allowed o
-0002d5a0: 6e20 656d 7074 7920 6172 7261 7920 7065  n empty array pe
-0002d5b0: 7220 756e 6974 2074 6573 740d 0a20 2020  r unit test..   
+0002d420: 2020 2020 2020 2020 2020 2069 6620 6172             if ar
+0002d430: 7261 795f 7479 7065 735b 305d 2e6e 756d  ray_types[0].num
+0002d440: 203d 3d20 3138 3a0d 0a20 2020 2020 2020   == 18:..       
+0002d450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d470: 2020 2020 2061 7267 735b 315d 203d 2073       args[1] = s
+0002d480: 7472 2e65 6e63 6f64 6528 7374 7228 6172  tr.encode(str(ar
+0002d490: 6773 5b31 5d29 290d 0a20 2020 2020 2020  gs[1]))..       
+0002d4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4c0: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
+0002d4d0: 305d 2e6e 756d 203d 3d20 3139 3a0d 0a20  0].num == 19:.. 
+0002d4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d500: 2020 2020 2020 2020 2020 2061 7267 735b             args[
+0002d510: 315d 203d 2073 7472 2861 7267 735b 315d  1] = str(args[1]
+0002d520: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002d530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d540: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0002d550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d560: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002d570: 7765 2068 6176 6520 7477 6f20 6172 7261  we have two arra
+0002d580: 7973 2c20 6966 206f 6e65 2061 7272 6179  ys, if one array
+0002d590: 2069 7320 6e6f 7420 7072 6f70 6572 2073   is not proper s
+0002d5a0: 7472 696e 6720 7479 7065 2c20 636f 6e76  tring type, conv
+0002d5b0: 6572 7420 6974 0d0a 2020 2020 2020 2020  ert it..        
 0002d5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5d0: 2069 6620 6c65 6e28 6172 6773 5b30 5d29   if len(args[0])
-0002d5e0: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
-0002d5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d600: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
-0002d610: 2822 6d69 6e2f 6d61 7820 6172 6720 6973  ("min/max arg is
-0002d620: 2061 6e20 656d 7074 7920 7365 7175 656e   an empty sequen
-0002d630: 6365 2e22 290d 0a0d 0a20 2020 2020 2020  ce.")....       
-0002d640: 2020 2020 2020 2020 2020 2020 2023 206d               # m
-0002d650: 696e 2f6d 6178 2f6e 616e 6d69 6e2f 6e61  in/max/nanmin/na
-0002d660: 6e6d 6178 202d 2d20 7361 6d65 2072 6573  nmax -- same res
-0002d670: 756c 740d 0a20 2020 2020 2020 2020 2020  ult..           
-0002d680: 2020 2020 2020 2020 2069 6620 6474 7970           if dtyp
-0002d690: 6520 3d3d 206e 702e 626f 6f6c 5f3a 0d0a  e == np.bool_:..
+0002d5d0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+0002d5e0: 7272 6179 5f74 7970 6573 5b31 5d20 213d  rray_types[1] !=
+0002d5f0: 2066 696e 616c 5f64 7479 7065 3a0d 0a20   final_dtype:.. 
+0002d600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d620: 2020 2020 2020 2069 6620 6172 7261 795f         if array_
+0002d630: 7479 7065 735b 305d 2e6e 756d 203d 3d20  types[0].num == 
+0002d640: 3138 3a0d 0a20 2020 2020 2020 2020 2020  18:..           
+0002d650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d670: 2061 7267 735b 315d 203d 2061 7267 735b   args[1] = args[
+0002d680: 315d 2e61 7374 7970 6528 2253 2229 0d0a  1].astype("S")..
+0002d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d6b0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-0002d6c0: 206e 702e 626f 6f6c 2872 6573 756c 7429   np.bool(result)
-0002d6d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002d6e0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002d6b0: 2020 2020 2020 2020 6966 2061 7272 6179          if array
+0002d6c0: 5f74 7970 6573 5b30 5d2e 6e75 6d20 3d3d  _types[0].num ==
+0002d6d0: 2031 393a 0d0a 2020 2020 2020 2020 2020   19:..          
+0002d6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d700: 2020 2020 2072 6573 756c 7420 3d20 6474       result = dt
-0002d710: 7970 652e 7479 7065 2872 6573 756c 7429  ype.type(result)
-0002d720: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002d730: 2020 2020 2020 2020 6966 206b 6565 7064          if keepd
-0002d740: 696d 733a 0d0a 2020 2020 2020 2020 2020  ims:..          
-0002d750: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002d760: 7375 6c74 203d 2046 6173 7441 7272 6179  sult = FastArray
-0002d770: 285b 7265 7375 6c74 5d29 2e61 7374 7970  ([result]).astyp
-0002d780: 6528 6474 7970 6529 0d0a 2020 2020 2020  e(dtype)..      
-0002d790: 2020 2020 2020 2020 2020 656c 6966 206b            elif k
-0002d7a0: 6565 7064 696d 733a 0d0a 2020 2020 2020  eepdims:..      
-0002d7b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002d7c0: 666f 7263 6520 6261 636b 2069 6e74 6f20  force back into 
-0002d7d0: 616e 2061 7272 6179 2066 726f 6d20 7363  an array from sc
-0002d7e0: 616c 6172 0d0a 2020 2020 2020 2020 2020  alar..          
-0002d7f0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-0002d800: 203d 2046 6173 7441 7272 6179 285b 7265   = FastArray([re
-0002d810: 7375 6c74 5d29 0d0a 0d0a 2020 2020 2020  sult])....      
-0002d820: 2020 2020 2020 2020 2020 2320 7765 2064            # we d
-0002d830: 6964 2074 6865 2072 6564 7563 652c 206e  id the reduce, n
-0002d840: 6f77 2072 6574 7572 6e20 7468 6520 7265  ow return the re
-0002d850: 7375 6c74 0d0a 2020 2020 2020 2020 2020  sult..          
-0002d860: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-0002d870: 756c 740d 0a0d 0a20 2020 2020 2020 2023  ult....        #
-0002d880: 2063 6865 636b 2066 6f72 206e 6f72 6d61   check for norma
-0002d890: 6c20 6361 6c6c 2066 756e 6374 696f 6e0d  l call function.
-0002d8a0: 0a20 2020 2020 2020 2065 6c69 6620 6661  .        elif fa
-0002d8b0: 7374 5f66 756e 6374 696f 6e20 6973 206e  st_function is n
-0002d8c0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-0002d8d0: 2020 2020 2020 2320 4361 6c6c 2074 6865        # Call the
-0002d8e0: 2046 6173 7441 7272 6179 2041 5049 7320   FastArray APIs 
-0002d8f0: 696e 7374 6561 6420 6f66 206e 756d 7079  instead of numpy
-0002d900: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002d910: 6361 6c6c 6d6f 6465 203d 2027 6627 0d0a  callmode = 'f'..
-0002d920: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0002d930: 6c74 7320 3d20 4e6f 6e65 0d0a 2020 2020  lts = None..    
-0002d940: 2020 2020 2020 2020 6966 2075 6675 6e63          if ufunc
-0002d950: 2e6e 696e 203d 3d20 323a 0d0a 2020 2020  .nin == 2:..    
-0002d960: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-0002d970: 6c5f 6e75 6d20 3d20 2d31 0d0a 2020 2020  l_num = -1..    
-0002d980: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-0002d990: 696e 616c 5f64 7479 7065 2069 7320 6e6f  inal_dtype is no
-0002d9a0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-0002d9b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002d9c0: 6669 6e61 6c5f 6474 7970 6520 3d3d 206e  final_dtype == n
-0002d9d0: 702e 626f 6f6c 5f3a 0d0a 2020 2020 2020  p.bool_:..      
-0002d9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d9f0: 2020 6669 6e61 6c5f 6e75 6d20 3d20 300d    final_num = 0.
-0002da00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002da10: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002da20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002da30: 2020 2020 6669 6e61 6c5f 6e75 6d20 3d20      final_num = 
-0002da40: 6669 6e61 6c5f 6474 7970 652e 6e75 6d0d  final_dtype.num.
-0002da50: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002da60: 2020 2023 2062 6563 6175 7365 2073 6361     # because sca
-0002da70: 6c61 7273 2063 616e 2062 6520 7061 7373  lars can be pass
-0002da80: 6564 2061 7320 6e70 2e69 6e74 3634 2838  ed as np.int64(8
-0002da90: 3634 3030 3029 0d0a 2020 2020 2020 2020  64000)..        
-0002daa0: 2020 2020 2020 2020 6966 2074 7970 6528          if type(
-0002dab0: 6172 6773 5b30 5d29 2069 6e20 674e 756d  args[0]) in gNum
-0002dac0: 7079 5363 616c 6172 5479 7065 3a0d 0a20  pyScalarType:.. 
-0002dad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dae0: 2020 2023 2070 7269 6e74 2827 636f 6e76     # print('conv
-0002daf0: 6572 7469 6e67 2061 7267 3127 2c20 6172  erting arg1', ar
-0002db00: 6773 5b30 5d29 0d0a 2020 2020 2020 2020  gs[0])..        
-0002db10: 2020 2020 2020 2020 2020 2020 6172 6773              args
-0002db20: 5b30 5d20 3d20 6e70 2e61 7361 7272 6179  [0] = np.asarray
-0002db30: 2861 7267 735b 305d 290d 0a0d 0a20 2020  (args[0])....   
-0002db40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002db50: 7479 7065 2861 7267 735b 315d 2920 696e  type(args[1]) in
-0002db60: 2067 4e75 6d70 7953 6361 6c61 7254 7970   gNumpyScalarTyp
-0002db70: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002db80: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
-0002db90: 2763 6f6e 7665 7274 696e 6720 6172 6732  'converting arg2
-0002dba0: 272c 2061 7267 735b 315d 290d 0a20 2020  ', args[1])..   
+0002d700: 2020 6172 6773 5b31 5d20 3d20 6172 6773    args[1] = args
+0002d710: 5b31 5d2e 6173 7479 7065 2822 5522 290d  [1].astype("U").
+0002d720: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d740: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
+0002d750: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
+0002d760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d780: 2020 7072 696e 7428 2241 4444 2073 7472    print("ADD str
+0002d790: 696e 6720 6f70 6572 6174 696f 6e22 2c20  ing operation", 
+0002d7a0: 6172 7261 795f 7479 7065 732c 2073 6361  array_types, sca
+0002d7b0: 6c61 725f 7479 7065 7329 0d0a 0d0a 2020  lar_types)....  
+0002d7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d7d0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
+0002d7e0: 6361 6c61 7273 203d 3d20 303a 0d0a 2020  calars == 0:..  
+0002d7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d800: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002d810: 2061 7272 6179 5f74 7970 6573 5b30 5d20   array_types[0] 
+0002d820: 213d 2061 7272 6179 5f74 7970 6573 5b31  != array_types[1
+0002d830: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+0002d840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d850: 2020 2020 2020 2020 2320 5550 4341 5354          # UPCAST
+0002d860: 2052 554c 4553 0d0a 2020 2020 2020 2020   RULES..        
+0002d870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d880: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+0002d890: 7272 6179 5f74 7970 6573 5b30 5d20 3d3d  rray_types[0] ==
+0002d8a0: 2066 696e 616c 5f64 7479 7065 2061 6e64   final_dtype and
+0002d8b0: 2061 7272 6179 5f74 7970 6573 5b31 5d20   array_types[1] 
+0002d8c0: 213d 2066 696e 616c 5f64 7479 7065 3a0d  != final_dtype:.
+0002d8d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d8f0: 2020 2020 2020 2020 2023 2070 7269 6e74           # print
+0002d900: 2822 2121 2175 7063 6173 7420 7275 6c65  ("!!!upcast rule
+0002d910: 7320 7365 636f 6e64 222c 2061 7272 6179  s second", array
+0002d920: 5f74 7970 6573 5b30 5d2c 2061 7272 6179  _types[0], array
+0002d930: 5f74 7970 6573 5b31 5d2c 2066 696e 616c  _types[1], final
+0002d940: 5f64 7479 7065 290d 0a20 2020 2020 2020  _dtype)..       
+0002d950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d970: 2023 2063 6f6e 7665 7274 2074 6f20 7468   # convert to th
+0002d980: 6520 7072 6f70 6572 2074 7970 6520 6265  e proper type be
+0002d990: 666f 7220 6361 6c63 756c 6174 696f 6e0d  for calculation.
+0002d9a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d9c0: 2020 2020 2020 2020 2061 7267 735b 315d           args[1]
+0002d9d0: 203d 205f 4153 5459 5045 2861 7267 735b   = _ASTYPE(args[
+0002d9e0: 315d 2c20 6669 6e61 6c5f 6474 7970 6529  1], final_dtype)
+0002d9f0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da10: 2020 2020 2020 2020 656c 6966 2061 7272          elif arr
+0002da20: 6179 5f74 7970 6573 5b30 5d20 213d 2066  ay_types[0] != f
+0002da30: 696e 616c 5f64 7479 7065 2061 6e64 2061  inal_dtype and a
+0002da40: 7272 6179 5f74 7970 6573 5b31 5d20 3d3d  rray_types[1] ==
+0002da50: 2066 696e 616c 5f64 7479 7065 3a0d 0a20   final_dtype:.. 
+0002da60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da80: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
+0002da90: 2121 2175 7063 6173 7420 7275 6c65 7320  !!!upcast rules 
+0002daa0: 6669 7273 7422 2c20 6172 7261 795f 7479  first", array_ty
+0002dab0: 7065 735b 305d 2c20 6172 7261 795f 7479  pes[0], array_ty
+0002dac0: 7065 735b 315d 2c20 6669 6e61 6c5f 6474  pes[1], final_dt
+0002dad0: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
+0002dae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002daf0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002db00: 636f 6e76 6572 7420 746f 2074 6865 2070  convert to the p
+0002db10: 726f 7065 7220 7479 7065 2062 6566 6f72  roper type befor
+0002db20: 2063 616c 6375 6c61 7469 6f6e 0d0a 2020   calculation..  
+0002db30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002db40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002db50: 2020 2020 2020 6172 6773 5b30 5d20 3d20        args[0] = 
+0002db60: 5f41 5354 5950 4528 6172 6773 5b30 5d2c  _ASTYPE(args[0],
+0002db70: 2066 696e 616c 5f64 7479 7065 290d 0a20   final_dtype).. 
+0002db80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002db90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dba0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
 0002dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dbc0: 2061 7267 735b 315d 203d 206e 702e 6173   args[1] = np.as
-0002dbd0: 6172 7261 7928 6172 6773 5b31 5d29 0d0a  array(args[1])..
-0002dbe0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002dbf0: 2020 6966 2046 6173 7441 7272 6179 2e56    if FastArray.V
-0002dc00: 6572 626f 7365 203e 2032 3a0d 0a20 2020  erbose > 2:..   
+0002dbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dbd0: 2020 2320 736f 6d65 7469 6d65 7320 626f    # sometimes bo
+0002dbe0: 7468 206f 6620 7468 656d 206d 7573 7420  th of them must 
+0002dbf0: 6265 2075 7063 6173 742e 2e2e 0d0a 2020  be upcast.....  
+0002dc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002dc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc20: 2070 7269 6e74 280d 0a20 2020 2020 2020   print(..       
-0002dc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc40: 2022 2a2a 2a20 6269 6e61 7279 2074 6869   "*** binary thi
-0002dc50: 6e6b 2077 6520 6361 6e20 6361 6c6c 222c  nk we can call",
-0002dc60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002dc70: 2020 2020 2020 2020 2020 6661 7374 5f66            fast_f
-0002dc80: 756e 6374 696f 6e2c 0d0a 2020 2020 2020  unction,..      
-0002dc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dca0: 2020 7566 756e 632e 6e69 6e2c 0d0a 2020    ufunc.nin,..  
-0002dcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dcc0: 2020 2020 2020 7566 756e 632e 6e6f 7574        ufunc.nout
-0002dcd0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002dce0: 2020 2020 2020 2020 2020 2022 6172 6731             "arg1
-0002dcf0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-0002dd00: 2020 2020 2020 2020 2020 2020 6172 6773              args
-0002dd10: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-0002dd20: 2020 2020 2020 2020 2020 2020 2020 2261                "a
-0002dd30: 7267 3222 2c0d 0a20 2020 2020 2020 2020  rg2",..         
-0002dd40: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0002dd50: 7267 735b 315d 2c0d 0a20 2020 2020 2020  rgs[1],..       
-0002dd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd70: 2022 6f75 7422 2c0d 0a20 2020 2020 2020   "out",..       
+0002dc20: 2020 2020 2020 2320 636f 6e73 6964 6572        # consider
+0002dc30: 2020 696e 7438 202a 2075 696e 7438 203d    int8 * uint8 =
+0002dc40: 3d3e 2077 696c 6c20 7570 6361 7374 2074  => will upcast t
+0002dc50: 6f20 696e 7431 360d 0a20 2020 2020 2020  o int16..       
+0002dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc80: 2023 2070 7269 6e74 2822 2121 2163 616e   # print("!!!can
+0002dc90: 6e6f 7420 756e 6465 7273 7461 6e64 2075  not understand u
+0002dca0: 7063 6173 7420 7275 6c65 7322 2c20 6172  pcast rules", ar
+0002dcb0: 7261 7974 7970 6573 5b30 5d2c 2061 7272  raytypes[0], arr
+0002dcc0: 6179 7479 7065 735b 315d 2c20 6669 6e61  aytypes[1], fina
+0002dcd0: 6c5f 6474 7970 6529 0d0a 2020 2020 2020  l_dtype)..      
+0002dce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd00: 2020 6172 6773 5b30 5d20 3d20 5f41 5354    args[0] = _AST
+0002dd10: 5950 4528 6172 6773 5b30 5d2c 2066 696e  YPE(args[0], fin
+0002dd20: 616c 5f64 7479 7065 290d 0a20 2020 2020  al_dtype)..     
+0002dd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd50: 2020 2061 7267 735b 315d 203d 205f 4153     args[1] = _AS
+0002dd60: 5459 5045 2861 7267 735b 315d 2c20 6669  TYPE(args[1], fi
+0002dd70: 6e61 6c5f 6474 7970 6529 0d0a 2020 2020  nal_dtype)..    
 0002dd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd90: 206f 7574 5f61 7267 732c 0d0a 2020 2020   out_args,..    
-0002dda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ddb0: 2020 2020 2266 696e 616c 222c 0d0a 2020      "final",..  
-0002ddc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ddd0: 2020 2020 2020 6669 6e61 6c5f 6e75 6d2c        final_num,
-0002dde0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002ddf0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0002de00: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-0002de10: 6f75 745f 6172 6773 2920 3d3d 2031 3a0d  out_args) == 1:.
-0002de20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002de30: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
-0002de40: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-0002de50: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
-0002de60: 485f 5457 4f5f 494e 5055 5453 280d 0a20  H_TWO_INPUTS(.. 
-0002de70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de80: 2020 2020 2020 2028 6172 6773 5b30 5d2c         (args[0],
-0002de90: 2061 7267 735b 315d 2c20 6f75 745f 6172   args[1], out_ar
-0002dea0: 6773 5b30 5d29 2c20 6661 7374 5f66 756e  gs[0]), fast_fun
-0002deb0: 6374 696f 6e2c 2066 696e 616c 5f6e 756d  ction, final_num
-0002dec0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002ded0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0002dee0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-0002def0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002df00: 2020 2020 7265 7375 6c74 7320 3d20 5479      results = Ty
-0002df10: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
-0002df20: 6564 6765 722e 5f42 4153 4943 4d41 5448  edger._BASICMATH
-0002df30: 5f54 574f 5f49 4e50 5554 5328 0d0a 2020  _TWO_INPUTS(..  
+0002dd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dda0: 2020 2020 2320 544a 4420 6368 6563 6b20      # TJD check 
+0002ddb0: 6c6f 6769 6320 6865 7265 2e2e 2e20 7768  logic here... wh
+0002ddc0: 6174 2064 6f65 7320 6e75 6d70 7920 7768  at does numpy wh
+0002ddd0: 656e 2069 6e74 2a20 2a20 7569 6e74 3820  en int* * uint8 
+0002dde0: 3f20 7370 6565 6420 7465 7374 0d0a 2020  ? speed test..  
+0002ddf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de10: 2020 2020 2020 2323 5573 654e 756d 7079        ##UseNumpy
+0002de20: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
+0002de30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de40: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002de50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de60: 2020 2020 2020 2020 2020 2020 2320 5550              # UP
+0002de70: 4341 5354 2052 554c 4553 2077 6865 6e20  CAST RULES when 
+0002de80: 6f6e 6520 6973 2061 2073 6361 6c61 720d  one is a scalar.
+0002de90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002dea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002deb0: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
+0002dec0: 305d 2021 3d20 6669 6e61 6c5f 6474 7970  0] != final_dtyp
+0002ded0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002dee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002def0: 2020 2020 2020 2020 2320 7768 6963 6820          # which 
+0002df00: 6172 6775 6d65 6e74 2069 7320 7468 6520  argument is the 
+0002df10: 7363 616c 6172 3f20 2063 6f6e 7665 7274  scalar?  convert
+0002df20: 2074 6865 206f 7468 6572 206f 6e65 0d0a   the other one..
+0002df30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002df50: 2020 2020 2020 2861 7267 735b 305d 2c20        (args[0], 
-0002df60: 6172 6773 5b31 5d29 2c20 6661 7374 5f66  args[1]), fast_f
-0002df70: 756e 6374 696f 6e2c 2066 696e 616c 5f6e  unction, final_n
-0002df80: 756d 0d0a 2020 2020 2020 2020 2020 2020  um..            
-0002df90: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-0002dfa0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0002dfb0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002dfc0: 666f 7220 636f 6e76 6572 7369 6f6e 2066  for conversion f
-0002dfd0: 756e 6374 696f 6e73 0d0a 2020 2020 2020  unctions..      
-0002dfe0: 2020 2020 2020 2020 2020 2320 6474 7970            # dtyp
-0002dff0: 653d 6b77 6172 6773 2e67 6574 2827 6474  e=kwargs.get('dt
-0002e000: 7970 6527 2c4e 6f6e 6529 0d0a 2020 2020  ype',None)..    
-0002e010: 2020 2020 2020 2020 2020 2020 6966 2046              if F
-0002e020: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-0002e030: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
-0002e040: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-0002e050: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0002e060: 2020 2020 2020 2020 2020 2022 2a2a 2a20             "*** 
-0002e070: 756e 6172 7920 7468 696e 6b20 7765 2063  unary think we c
-0002e080: 616e 2063 616c 6c22 2c0d 0a20 2020 2020  an call",..     
-0002e090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e0a0: 2020 2066 6173 745f 6675 6e63 7469 6f6e     fast_function
-0002e0b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002e0c0: 2020 2020 2020 2020 2020 2075 6675 6e63             ufunc
-0002e0d0: 2e6e 696e 2c0d 0a20 2020 2020 2020 2020  .nin,..         
-0002e0e0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
-0002e0f0: 6675 6e63 2e6e 6f75 742c 0d0a 2020 2020  func.nout,..    
-0002e100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e110: 2020 2020 2261 7267 3122 2c0d 0a20 2020      "arg1",..   
-0002e120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e130: 2020 2020 2061 7267 735b 305d 2c0d 0a20       args[0],.. 
-0002e140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e150: 2020 2020 2020 2022 6f75 7422 2c0d 0a20         "out",.. 
-0002e160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e170: 2020 2020 2020 206f 7574 5f61 7267 732c         out_args,
-0002e180: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e190: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-0002e1a0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-0002e1b0: 6e28 6f75 745f 6172 6773 2920 3d3d 2031  n(out_args) == 1
-0002e1c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002e1d0: 2020 2020 2020 2072 6573 756c 7473 203d         results =
-0002e1e0: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
-0002e1f0: 7468 4c65 6467 6572 2e5f 4241 5349 434d  thLedger._BASICM
-0002e200: 4154 485f 4f4e 455f 494e 5055 5428 2861  ATH_ONE_INPUT((a
-0002e210: 7267 735b 305d 2c20 6f75 745f 6172 6773  rgs[0], out_args
-0002e220: 5b30 5d29 2c20 6661 7374 5f66 756e 6374  [0]), fast_funct
-0002e230: 696f 6e2c 2030 290d 0a20 2020 2020 2020  ion, 0)..       
-0002e240: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-0002e250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e260: 2020 2020 7265 7375 6c74 7320 3d20 5479      results = Ty
-0002e270: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
-0002e280: 6564 6765 722e 5f42 4153 4943 4d41 5448  edger._BASICMATH
-0002e290: 5f4f 4e45 5f49 4e50 5554 2828 6172 6773  _ONE_INPUT((args
-0002e2a0: 5b30 5d29 2c20 6661 7374 5f66 756e 6374  [0]), fast_funct
-0002e2b0: 696f 6e2c 2030 290d 0a0d 0a20 2020 2020  ion, 0)....     
-0002e2c0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-0002e2d0: 7320 6973 206e 6f74 204e 6f6e 6520 616e  s is not None an
-0002e2e0: 6420 6c65 6e28 6f75 745f 6172 6773 2920  d len(out_args) 
-0002e2f0: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
-0002e300: 2020 2020 2020 2023 2077 6865 6e20 7468         # when th
-0002e310: 6520 6f75 7470 7574 2061 7267 756d 656e  e output argumen
-0002e320: 7420 6973 2066 6f72 6365 6420 6275 7420  t is forced but 
-0002e330: 7765 2063 616c 6375 6c61 7465 2069 7420  we calculate it 
-0002e340: 696e 746f 2061 6e6f 7468 6572 2061 7272  into another arr
-0002e350: 6179 2077 6520 6e65 6564 2074 6f20 636f  ay we need to co
-0002e360: 7079 2074 6865 2072 6573 756c 7420 696e  py the result in
-0002e370: 746f 2074 6865 206f 7574 7075 740d 0a20  to the output.. 
-0002e380: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002e390: 6620 6e6f 7420 7263 2e43 6f6d 7061 7265  f not rc.Compare
-0002e3a0: 4e75 6d70 794d 656d 4164 6472 6573 7328  NumpyMemAddress(
-0002e3b0: 6f75 745f 6172 6773 5b30 5d2c 2072 6573  out_args[0], res
-0002e3c0: 756c 7473 293a 0d0a 2020 2020 2020 2020  ults):..        
-0002e3d0: 2020 2020 2020 2020 2020 2020 6966 2046              if F
-0002e3e0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-0002e3f0: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
-0002e400: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0002e410: 7269 6e74 280d 0a20 2020 2020 2020 2020  rint(..         
-0002e420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e430: 2020 2022 2a2a 2a20 7065 7266 6f72 6d69     "*** performi
-0002e440: 6e67 2061 6e20 6578 7472 6120 636f 7079  ng an extra copy
-0002e450: 2074 6f20 6d61 7463 6820 6f75 7470 7574   to match output
-0002e460: 2072 6571 7565 7374 222c 0d0a 2020 2020   request",..    
-0002e470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e480: 2020 2020 2020 2020 6964 286f 7574 5f61          id(out_a
-0002e490: 7267 735b 305d 292c 0d0a 2020 2020 2020  rgs[0]),..      
-0002e4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e4b0: 2020 2020 2020 6964 2872 6573 756c 7473        id(results
-0002e4c0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-0002e4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e4e0: 6f75 745f 6172 6773 5b30 5d2c 0d0a 2020  out_args[0],..  
-0002e4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e500: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-0002e510: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0002e520: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0002e530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e540: 2020 206f 7574 5f61 7267 735b 305d 5b2e     out_args[0][.
-0002e550: 2e2e 5d20 3d20 7265 7375 6c74 730d 0a20  ..] = results.. 
-0002e560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e570: 2020 2072 6573 756c 7473 203d 206f 7574     results = out
-0002e580: 5f61 7267 735b 305d 0d0a 0d0a 2020 2020  _args[0]....    
-0002e590: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
-0002e5a0: 7473 2069 7320 4e6f 6e65 3a0d 0a20 2020  ts is None:..   
-0002e5b0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
-0002e5c0: 756e 7465 640d 0a20 2020 2020 2020 2020  unted..         
-0002e5d0: 2020 2020 2020 2023 2063 616c 6c6d 6f64         # callmod
-0002e5e0: 653d 2770 270d 0a20 2020 2020 2020 2020  e='p'..         
-0002e5f0: 2020 2020 2020 2069 6620 4661 7374 4172         if FastAr
-0002e600: 7261 792e 5665 7262 6f73 6520 3e20 313a  ray.Verbose > 1:
-0002e610: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e620: 2020 2020 2020 7072 696e 7428 222a 2a2a        print("***
-0002e630: 7075 6e74 6564 2075 6675 6e63 3a20 222c  punted ufunc: ",
-0002e640: 2075 6675 6e63 2e6e 696e 2c20 7566 756e   ufunc.nin, ufun
-0002e650: 632e 6e6f 7574 2c20 7566 756e 632c 2061  c.nout, ufunc, a
-0002e660: 7267 732c 206b 7761 7267 7329 0d0a 2020  rgs, kwargs)..  
-0002e670: 2020 2020 2020 2020 2020 2020 2020 6661                fa
-0002e680: 7374 5f66 756e 6374 696f 6e20 3d20 4e6f  st_function = No
-0002e690: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
-0002e6a0: 2020 2020 2320 6661 6c6c 2074 6f20 2269      # fall to "i
-0002e6b0: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
-0002e6c0: 6973 204e 6f6e 6522 2061 6e64 2072 756e  is None" and run
-0002e6d0: 2074 6872 6f75 6768 206e 756d 7079 2e2e   through numpy..
-0002e6e0: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-0002e6f0: 2023 2072 6573 7065 6374 2064 7479 7065   # respect dtype
-0002e700: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-0002e710: 6966 2064 7479 7065 2069 7320 6e6f 7420  if dtype is not 
-0002e720: 4e6f 6e65 2061 6e64 2069 7369 6e73 7461  None and isinsta
-0002e730: 6e63 6528 7265 7375 6c74 732c 206e 702e  nce(results, np.
-0002e740: 6e64 6172 7261 7929 3a0d 0a20 2020 2020  ndarray):..     
-0002e750: 2020 2020 2020 2020 2020 2069 6620 6474             if dt
-0002e760: 7970 6520 6973 206e 6f74 2072 6573 756c  ype is not resul
-0002e770: 7473 2e64 7479 7065 3a0d 0a20 2020 2020  ts.dtype:..     
-0002e780: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002e790: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
-0002e7a0: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
+0002df50: 2020 2020 6966 2074 7970 6528 6172 6773      if type(args
+0002df60: 5b30 5d29 2069 6e20 5363 616c 6172 5479  [0]) in ScalarTy
+0002df70: 7065 3a0d 0a20 2020 2020 2020 2020 2020  pe:..           
+0002df80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002df90: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+0002dfa0: 7269 6e74 2822 636f 6e76 6572 7469 6e67  rint("converting
+0002dfb0: 2061 7267 3220 6672 6f6d 222c 2061 7267   arg2 from", arg
+0002dfc0: 735b 315d 2c20 6669 6e61 6c5f 6474 7970  s[1], final_dtyp
+0002dfd0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+0002dfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dff0: 2020 2020 2020 2020 2020 2020 6172 6773              args
+0002e000: 5b31 5d20 3d20 5f41 5354 5950 4528 6172  [1] = _ASTYPE(ar
+0002e010: 6773 5b31 5d2c 2066 696e 616c 5f64 7479  gs[1], final_dty
+0002e020: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
+0002e030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e040: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0002e050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e070: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
+0002e080: 2263 6f6e 7665 7274 696e 6720 6172 6731  "converting arg1
+0002e090: 2066 726f 6d20 222c 2061 7267 735b 305d   from ", args[0]
+0002e0a0: 2c20 6669 6e61 6c5f 6474 7970 6529 0d0a  , final_dtype)..
+0002e0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e0d0: 2020 2020 2020 2020 6172 6773 5b30 5d20          args[0] 
+0002e0e0: 3d20 5f41 5354 5950 4528 6172 6773 5b30  = _ASTYPE(args[0
+0002e0f0: 5d2c 2066 696e 616c 5f64 7479 7065 290d  ], final_dtype).
+0002e100: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+0002e110: 206e 6f74 2061 2062 696e 6172 7920 7566   not a binary uf
+0002e120: 756e 632c 2063 6865 636b 2066 6f72 2075  unc, check for u
+0002e130: 6e61 7279 2075 6675 6e63 0d0a 2020 2020  nary ufunc..    
+0002e140: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
+0002e150: 666f 7220 6a75 7374 2031 2069 6e70 7574  for just 1 input
+0002e160: 2028 756e 6172 7929 0d0a 0d0a 2020 2020   (unary)....    
+0002e170: 2020 2020 2020 2020 656c 6966 2028 7566          elif (uf
+0002e180: 756e 632e 6e69 6e20 3d3d 2031 2920 616e  unc.nin == 1) an
+0002e190: 6420 2875 6675 6e63 2e6e 6f75 7420 3d3d  d (ufunc.nout ==
+0002e1a0: 2031 293a 0d0a 2020 2020 2020 2020 2020   1):..          
+0002e1b0: 2020 2020 2020 2323 2323 2323 2323 2323        ##########
+0002e1c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e1d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e1e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e1f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e200: 230d 0a20 2020 2020 2020 2020 2020 2020  #..             
+0002e210: 2020 2023 2320 554e 4152 590d 0a20 2020     ## UNARY..   
+0002e220: 2020 2020 2020 2020 2020 2020 2023 2323               ###
+0002e230: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e240: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e250: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e260: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e270: 2323 2323 2323 2323 0d0a 2020 2020 2020  ########..      
+0002e280: 2020 2020 2020 2020 2020 6661 7374 5f66            fast_f
+0002e290: 756e 6374 696f 6e20 3d20 6755 6e61 7279  unction = gUnary
+0002e2a0: 5546 756e 6373 2e67 6574 2875 6675 6e63  UFuncs.get(ufunc
+0002e2b0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+0002e2c0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002e2d0: 2020 2020 2020 2020 2020 2020 6966 2046              if F
+0002e2e0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
+0002e2f0: 203e 2031 3a0d 0a20 2020 2020 2020 2020   > 1:..         
+0002e300: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0002e310: 2822 2a2a 2a75 6e6b 6e6f 776e 2075 6675  ("***unknown ufu
+0002e320: 6e63 2061 7267 2073 7479 6c65 3a20 222c  nc arg style: ",
+0002e330: 2075 6675 6e63 2e6e 696e 2c20 7566 756e   ufunc.nin, ufun
+0002e340: 632e 6e6f 7574 2c20 7566 756e 632c 2061  c.nout, ufunc, a
+0002e350: 7267 732c 206b 7761 7267 7329 0d0a 0d0a  rgs, kwargs)....
+0002e360: 2020 2020 2020 2020 2320 2d2d 2d2d 2d2d          # ------
+0002e370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e3a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e3b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e3c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e3d0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0002e3e0: 2069 6620 6e6f 7420 4661 7374 4172 7261   if not FastArra
+0002e3f0: 792e 4661 7374 6572 5546 756e 633a 0d0a  y.FasterUFunc:..
+0002e400: 2020 2020 2020 2020 2020 2020 6661 7374              fast
+0002e410: 5f66 756e 6374 696f 6e20 3d20 4e6f 6e65  _function = None
+0002e420: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0002e430: 6475 6365 5f66 756e 6320 3d20 4e6f 6e65  duce_func = None
+0002e440: 0d0a 0d0a 2020 2020 2020 2020 2320 6368  ....        # ch
+0002e450: 6563 6b20 666f 7220 6120 7265 6475 6365  eck for a reduce
+0002e460: 2066 756e 6320 6c69 6b65 2073 756d 206f   func like sum o
+0002e470: 7220 6d69 6e0d 0a20 2020 2020 2020 2069  r min..        i
+0002e480: 6620 7265 6475 6365 5f66 756e 6320 6973  f reduce_func is
+0002e490: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0002e4a0: 2020 2020 2020 2020 6b65 6570 6469 6d73          keepdims
+0002e4b0: 3a20 626f 6f6c 203d 206b 7761 7267 732e  : bool = kwargs.
+0002e4c0: 6765 7428 226b 6565 7064 696d 7322 2c20  get("keepdims", 
+0002e4d0: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+0002e4e0: 2020 2020 6966 2064 7479 7065 2069 7320      if dtype is 
+0002e4f0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0002e500: 2020 2020 2020 2064 7479 7065 203d 2061         dtype = a
+0002e510: 7267 735b 305d 2e64 7479 7065 0d0a 0d0a  rgs[0].dtype....
+0002e520: 2020 2020 2020 2020 2020 2020 2320 4d61              # Ma
+0002e530: 7468 4c65 6467 6572 0d0a 2020 2020 2020  thLedger..      
+0002e540: 2020 2020 2020 7265 7375 6c74 203d 2054        result = T
+0002e550: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+0002e560: 4c65 6467 6572 2e5f 5245 4455 4345 2861  Ledger._REDUCE(a
+0002e570: 7267 735b 305d 2c20 7265 6475 6365 5f66  rgs[0], reduce_f
+0002e580: 756e 6329 0d0a 2020 2020 2020 2020 2020  unc)..          
+0002e590: 2020 6368 6172 203d 206e 702e 6474 7970    char = np.dtyp
+0002e5a0: 6528 6474 7970 6529 2e63 6861 720d 0a20  e(dtype).char.. 
+0002e5b0: 2020 2020 2020 2020 2020 2069 6620 4661             if Fa
+0002e5c0: 7374 4172 7261 792e 5665 7262 6f73 6520  stArray.Verbose 
+0002e5d0: 3e20 313a 0d0a 2020 2020 2020 2020 2020  > 1:..          
+0002e5e0: 2020 2020 2020 7072 696e 7428 222a 2a2a        print("***
+0002e5f0: 7265 7375 6c74 2066 726f 6d20 7265 6475  result from redu
+0002e600: 6365 222c 2072 6573 756c 742c 2074 7970  ce", result, typ
+0002e610: 6528 7265 7375 6c74 292c 2064 7479 7065  e(result), dtype
+0002e620: 2c20 6368 6172 290d 0a0d 0a20 2020 2020  , char)....     
+0002e630: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+0002e640: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0002e650: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002e660: 2070 7269 6e74 2822 7265 6475 6365 2063   print("reduce c
+0002e670: 616c 6c65 6422 2c20 7566 756e 632c 206b  alled", ufunc, k
+0002e680: 6565 7064 696d 732c 2064 7479 7065 290d  eepdims, dtype).
+0002e690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e6a0: 2069 6620 7265 6475 6365 5f66 756e 6320   if reduce_func 
+0002e6b0: 696e 205b 5245 4455 4345 5f46 554e 4354  in [REDUCE_FUNCT
+0002e6c0: 494f 4e53 2e52 4544 5543 455f 5355 4d2c  IONS.REDUCE_SUM,
+0002e6d0: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
+0002e6e0: 532e 5245 4455 4345 5f4e 414e 5355 4d5d  S.REDUCE_NANSUM]
+0002e6f0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
+0002e700: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e710: 2020 2020 2020 7265 7375 6c74 2c20 666c        result, fl
+0002e720: 6f61 740d 0a20 2020 2020 2020 2020 2020  oat..           
+0002e730: 2020 2020 2029 3a0d 0a20 2020 2020 2020       ):..       
+0002e740: 2020 2020 2020 2020 2020 2020 2072 6573               res
+0002e750: 756c 7420 3d20 6e70 2e66 6c6f 6174 3634  ult = np.float64
+0002e760: 2872 6573 756c 7429 0d0a 2020 2020 2020  (result)..      
+0002e770: 2020 2020 2020 2020 2020 656c 6966 2064            elif d
+0002e780: 7479 7065 2021 3d20 6e70 2e66 6c6f 6174  type != np.float
+0002e790: 3332 2061 6e64 2064 7479 7065 2021 3d20  32 and dtype != 
+0002e7a0: 6e70 2e66 6c6f 6174 3634 3a0d 0a20 2020  np.float64:..   
 0002e7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e7c0: 2020 7072 696e 7428 222a 2a2a 7265 7375    print("***resu
-0002e7d0: 6c74 2066 726f 6d20 7265 6475 6365 222c  lt from reduce",
-0002e7e0: 2072 6573 756c 7473 2c20 7265 7375 6c74   results, result
-0002e7f0: 732e 6474 7970 652c 2064 7479 7065 290d  s.dtype, dtype).
-0002e800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e810: 2020 2020 2023 2063 6f6e 7665 7274 0d0a       # convert..
+0002e7c0: 2023 2070 7265 7365 7276 6520 696e 7465   # preserve inte
+0002e7d0: 6765 7273 0d0a 2020 2020 2020 2020 2020  gers..          
+0002e7e0: 2020 2020 2020 2020 2020 6966 2063 6861            if cha
+0002e7f0: 7220 696e 204e 756d 7079 4368 6172 5479  r in NumpyCharTy
+0002e800: 7065 732e 556e 7369 676e 6564 496e 7465  pes.UnsignedInte
+0002e810: 6765 7236 343a 0d0a 2020 2020 2020 2020  ger64:..        
 0002e820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e830: 2020 2020 7265 7375 6c74 7320 3d20 7265      results = re
-0002e840: 7375 6c74 732e 6173 7479 7065 2864 7479  sults.astype(dty
-0002e850: 7065 290d 0a0d 0a20 2020 2020 2020 2069  pe)....        i
-0002e860: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
-0002e870: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-0002e880: 2020 2020 2020 2320 4361 6c6c 2074 6865        # Call the
-0002e890: 206e 756d 7079 2041 5049 730d 0a20 2020   numpy APIs..   
-0002e8a0: 2020 2020 2020 2020 2023 2043 6865 636b           # Check
-0002e8b0: 2069 6620 7765 2063 616e 2075 7365 2074   if we can use t
-0002e8c0: 6865 2072 6563 7963 6c65 6420 6172 7261  he recycled arra
-0002e8d0: 7973 2074 6f20 6176 6f69 6420 616e 2061  ys to avoid an a
-0002e8e0: 6c6c 6f63 6174 696f 6e20 666f 7220 7468  llocation for th
-0002e8f0: 6520 6f75 7470 7574 2061 7272 6179 0d0a  e output array..
-0002e900: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0002e910: 2046 6173 7441 7272 6179 2e56 6572 626f   FastArray.Verbo
-0002e920: 7365 203e 2031 3a0d 0a20 2020 2020 2020  se > 1:..       
-0002e930: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-0002e940: 2a2a 7075 6e74 6564 206f 6e20 6e75 6d70  **punted on nump
-0002e950: 7921 222c 2075 6675 6e63 290d 0a0d 0a20  y!", ufunc).... 
-0002e960: 2020 2020 2020 2020 2020 2023 204e 4f54             # NOT
-0002e970: 453a 2057 6520 6172 6520 676f 696e 6720  E: We are going 
-0002e980: 746f 206c 6574 206e 756d 7079 2070 726f  to let numpy pro
-0002e990: 6365 7373 2069 740d 0a20 2020 2020 2020  cess it..       
-0002e9a0: 2020 2020 2023 2057 6520 6d75 7374 2063       # We must c
-0002e9b0: 6861 6e67 6520 616c 6c20 4661 7374 4172  hange all FastAr
-0002e9c0: 7261 7973 2074 6f20 6e6f 726d 616c 206e  rays to normal n
-0002e9d0: 756d 7079 2061 7272 6179 730d 0a20 2020  umpy arrays..   
-0002e9e0: 2020 2020 2020 2020 2061 7267 7320 3d20           args = 
-0002e9f0: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
-0002ea00: 666f 7220 696e 7075 7420 696e 2069 6e70  for input in inp
-0002ea10: 7574 733a 0d0a 2020 2020 2020 2020 2020  uts:..          
-0002ea20: 2020 2020 2020 2320 666c 6970 2062 6163        # flip bac
-0002ea30: 6b20 746f 206e 756d 7079 2074 6f20 6176  k to numpy to av
-0002ea40: 6f69 6420 6572 726f 7273 2077 6865 6e20  oid errors when 
-0002ea50: 6e75 6d70 7920 6361 6c63 756c 6174 6573  numpy calculates
-0002ea60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002ea70: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0002ea80: 696e 7075 742c 2046 6173 7441 7272 6179  input, FastArray
-0002ea90: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0002eaa0: 2020 2020 2020 2020 6172 6773 2e61 7070          args.app
-0002eab0: 656e 6428 696e 7075 742e 7669 6577 286e  end(input.view(n
-0002eac0: 702e 6e64 6172 7261 7929 290d 0a20 2020  p.ndarray))..   
-0002ead0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0002eae0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002eaf0: 2020 2020 2020 2020 6172 6773 2e61 7070          args.app
-0002eb00: 656e 6428 696e 7075 7429 0d0a 0d0a 2020  end(input)....  
-0002eb10: 2020 2020 2020 2020 2020 6966 2068 6173            if has
-0002eb20: 5f6f 7574 7075 7473 3a0d 0a20 2020 2020  _outputs:..     
-0002eb30: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
-0002eb40: 7473 203d 206b 7761 7267 732e 706f 7028  ts = kwargs.pop(
-0002eb50: 226f 7574 222c 204e 6f6e 6529 0d0a 2020  "out", None)..  
-0002eb60: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002eb70: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
-0002eb80: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-0002eb90: 7574 5f61 7267 7320 3d20 5b5d 0d0a 2020  ut_args = []..  
-0002eba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ebb0: 2020 666f 7220 6f75 7470 7574 2069 6e20    for output in 
-0002ebc0: 6f75 7470 7574 733a 0d0a 2020 2020 2020  outputs:..      
-0002ebd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ebe0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0002ebf0: 6f75 7470 7574 2c20 4661 7374 4172 7261  output, FastArra
-0002ec00: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
-0002ec10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ec20: 206f 7574 5f61 7267 732e 6170 7065 6e64   out_args.append
-0002ec30: 286f 7574 7075 742e 7669 6577 286e 702e  (output.view(np.
-0002ec40: 6e64 6172 7261 7929 290d 0a20 2020 2020  ndarray))..     
-0002ec50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ec60: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0002ec70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ec80: 2020 2020 2020 6f75 745f 6172 6773 2e61        out_args.a
-0002ec90: 7070 656e 6428 6f75 7470 7574 290d 0a20  ppend(output).. 
-0002eca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ecb0: 2020 2023 2072 6570 6c61 6365 206f 7574     # replace out
-0002ecc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002ecd0: 2020 2020 2020 6b77 6172 6773 5b22 6f75        kwargs["ou
-0002ece0: 7422 5d20 3d20 7475 706c 6528 6f75 745f  t"] = tuple(out_
-0002ecf0: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
-0002ed00: 2020 2020 2023 204e 4f54 453a 2049 6620       # NOTE: If 
-0002ed10: 7468 6520 7370 6563 6966 6965 6420 7566  the specified uf
-0002ed20: 756e 6320 2b20 696e 7075 7473 2063 6f6d  unc + inputs com
-0002ed30: 6269 6e61 7469 6f6e 2069 736e 2774 2073  bination isn't s
-0002ed40: 7570 706f 7274 6564 2062 7920 6e75 6d70  upported by nump
-0002ed50: 7920 6569 7468 6572 2c0d 0a20 2020 2020  y either,..     
-0002ed60: 2020 2020 2020 2023 2020 2020 2020 2061         #       a
-0002ed70: 7320 6f66 206e 756d 7079 2031 2e31 372e  s of numpy 1.17.
-0002ed80: 7820 7468 6973 2063 616c 6c20 7769 6c6c  x this call will
-0002ed90: 2065 6e64 2075 7020 7261 6973 696e 6720   end up raising 
-0002eda0: 6120 5546 756e 6354 7970 6545 7272 6f72  a UFuncTypeError
-0002edb0: 2073 6f20 7468 6520 7265 7374 0d0a 2020   so the rest..  
-0002edc0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0002edd0: 2020 6f66 2074 6865 2046 6173 7441 7272    of the FastArr
-0002ede0: 6179 2e5f 5f61 7272 6179 5f75 6675 6e63  ay.__array_ufunc
-0002edf0: 5f5f 2062 6f64 7920 2862 656c 6f77 2920  __ body (below) 
-0002ee00: 776f 6e27 7420 656e 6420 7570 2065 7865  won't end up exe
-0002ee10: 6375 7469 6e67 2e0d 0a20 2020 2020 2020  cuting...       
-0002ee20: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
-0002ee30: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-0002ee40: 4c65 6467 6572 2e5f 4152 5241 595f 5546  Ledger._ARRAY_UF
-0002ee50: 554e 4328 7375 7065 7228 4661 7374 4172  UNC(super(FastAr
-0002ee60: 7261 792c 2073 656c 6629 2c20 7566 756e  ray, self), ufun
-0002ee70: 632c 206d 6574 686f 642c 202a 6172 6773  c, method, *args
-0002ee80: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-0002ee90: 2020 2020 2020 2023 2049 6620 7269 7074         # If ript
-0002eea0: 6162 6c65 2068 6173 206e 6f74 2069 6d70  able has not imp
-0002eeb0: 6c65 6d65 6e74 6564 2061 2063 6572 7461  lemented a certa
-0002eec0: 696e 2075 6675 6e63 2028 6f72 2064 6f65  in ufunc (or doe
-0002eed0: 736e 2774 2073 7570 706f 7274 2069 7420  sn't support it 
-0002eee0: 666f 7220 7468 6520 6769 7665 6e20 6172  for the given ar
-0002eef0: 6775 6d65 6e74 7329 2c0d 0a20 2020 2020  guments),..     
-0002ef00: 2020 2023 2065 6d69 7420 6120 7761 726e     # emit a warn
-0002ef10: 696e 6720 6162 6f75 7420 6974 2074 6f20  ing about it to 
-0002ef20: 6c65 7420 7468 6520 7573 6572 206b 6e6f  let the user kno
-0002ef30: 772e 0d0a 2020 2020 2020 2020 2320 5768  w...        # Wh
-0002ef40: 656e 206e 756d 7079 2064 6f65 7320 6e6f  en numpy does no
-0002ef50: 7420 7375 7070 6f72 7420 7468 6520 7566  t support the uf
-0002ef60: 756e 632b 696e 7075 7473 2065 6974 6865  unc+inputs eithe
-0002ef70: 722c 2077 6520 776f 6e27 7420 7265 6163  r, we won't reac
-0002ef80: 6820 7468 6973 2070 6f69 6e74 2028 6173  h this point (as
-0002ef90: 206f 6620 6e75 6d70 7920 312e 3137 2e78   of numpy 1.17.x
-0002efa0: 292c 0d0a 2020 2020 2020 2020 2320 7369  ),..        # si
-0002efb0: 6e63 6520 6e75 6d70 7920 7769 6c6c 2072  nce numpy will r
-0002efc0: 6169 7365 2061 2055 4675 6e63 5479 7065  aise a UFuncType
-0002efd0: 4572 726f 7220 6561 726c 6965 7220 2862  Error earlier (b
-0002efe0: 6566 6f72 6520 7468 6973 2070 6f69 6e74  efore this point
-0002eff0: 2920 7261 7468 6572 2074 6861 6e20 6166  ) rather than af
-0002f000: 7465 7220 7765 2072 6574 7572 6e20 4e6f  ter we return No
-0002f010: 7449 6d70 6c65 6d65 6e74 6564 2e0d 0a20  tImplemented... 
-0002f020: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-0002f030: 7320 6973 204e 6f74 496d 706c 656d 656e  s is NotImplemen
-0002f040: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
-0002f050: 2020 7761 726e 696e 6773 2e77 6172 6e28    warnings.warn(
-0002f060: 6622 2a2a 2a75 6675 6e63 207b 7566 756e  f"***ufunc {ufun
-0002f070: 637d 207b 6172 6773 7d20 7b6b 7761 7267  c} {args} {kwarg
-0002f080: 737d 2069 7320 6e6f 7420 696d 706c 656d  s} is not implem
-0002f090: 656e 7465 6422 290d 0a20 2020 2020 2020  ented")..       
-0002f0a0: 2020 2020 2072 6574 7572 6e20 4e6f 7449       return NotI
-0002f0b0: 6d70 6c65 6d65 6e74 6564 0d0a 0d0a 2020  mplemented....  
-0002f0c0: 2020 2020 2020 2320 5566 756e 6373 2061        # Ufuncs a
-0002f0d0: 6c73 6f20 6861 7665 2061 2066 6966 7468  lso have a fifth
-0002f0e0: 206d 6574 686f 6420 7468 6174 2061 6c6c   method that all
-0002f0f0: 6f77 7320 696e 2070 6c61 6365 206f 7065  ows in place ope
-0002f100: 7261 7469 6f6e 7320 746f 2062 6520 7065  rations to be pe
-0002f110: 7266 6f72 6d65 6420 7573 696e 6720 6661  rformed using fa
-0002f120: 6e63 7920 696e 6465 7869 6e67 2e0d 0a20  ncy indexing... 
-0002f130: 2020 2020 2020 2023 204e 6f20 6275 6666         # No buff
-0002f140: 6572 696e 6720 6973 2075 7365 6420 6f6e  ering is used on
-0002f150: 2074 6865 2064 696d 656e 7369 6f6e 7320   the dimensions 
-0002f160: 7768 6572 6520 6661 6e63 7920 696e 6465  where fancy inde
-0002f170: 7869 6e67 2069 7320 7573 6564 2c20 736f  xing is used, so
-0002f180: 2074 6865 2066 616e 6379 2069 6e64 6578   the fancy index
-0002f190: 2063 616e 206c 6973 7420 616e 2069 7465   can list an ite
-0002f1a0: 6d20 6d6f 7265 2074 6861 6e20 6f6e 6365  m more than once
-0002f1b0: 0d0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
-0002f1c0: 616e 6420 7468 6520 6f70 6572 6174 696f  and the operatio
-0002f1d0: 6e20 7769 6c6c 2062 6520 7065 7266 6f72  n will be perfor
-0002f1e0: 6d65 6420 6f6e 2074 6865 2072 6573 756c  med on the resul
-0002f1f0: 7420 6f66 2074 6865 2070 7265 7669 6f75  t of the previou
-0002f200: 7320 6f70 6572 6174 696f 6e20 666f 7220  s operation for 
-0002f210: 7468 6174 2069 7465 6d2e 0d0a 2020 2020  that item...    
-0002f220: 2020 2020 2320 7566 756e 632e 7265 6475      # ufunc.redu
-0002f230: 6365 2861 5b2c 2061 7869 732c 2064 7479  ce(a[, axis, dty
-0002f240: 7065 2c20 6f75 742c 206b 6565 7064 696d  pe, out, keepdim
-0002f250: 735d 2909 5265 6475 6365 7320 6127 7320  s]).Reduces a's 
-0002f260: 6469 6d65 6e73 696f 6e20 6279 206f 6e65  dimension by one
-0002f270: 2c20 6279 2061 7070 6c79 696e 6720 7566  , by applying uf
-0002f280: 756e 6320 616c 6f6e 6720 6f6e 6520 6178  unc along one ax
-0002f290: 6973 2e0d 0a20 2020 2020 2020 2023 2075  is...        # u
-0002f2a0: 6675 6e63 2e61 6363 756d 756c 6174 6528  func.accumulate(
-0002f2b0: 6172 7261 795b 2c20 6178 6973 2c20 6474  array[, axis, dt
-0002f2c0: 7970 652c 206f 7574 5d29 0941 6363 756d  ype, out]).Accum
-0002f2d0: 756c 6174 6520 7468 6520 7265 7375 6c74  ulate the result
-0002f2e0: 206f 6620 6170 706c 7969 6e67 2074 6865   of applying the
-0002f2f0: 206f 7065 7261 746f 7220 746f 2061 6c6c   operator to all
-0002f300: 2065 6c65 6d65 6e74 732e 0d0a 2020 2020   elements...    
-0002f310: 2020 2020 2320 7566 756e 632e 7265 6475      # ufunc.redu
-0002f320: 6365 6174 2861 2c20 696e 6469 6365 735b  ceat(a, indices[
-0002f330: 2c20 6178 6973 2c20 6474 7970 652c 206f  , axis, dtype, o
-0002f340: 7574 5d29 0950 6572 666f 726d 7320 6120  ut]).Performs a 
-0002f350: 286c 6f63 616c 2920 7265 6475 6365 2077  (local) reduce w
-0002f360: 6974 6820 7370 6563 6966 6965 6420 736c  ith specified sl
-0002f370: 6963 6573 206f 7665 7220 6120 7369 6e67  ices over a sing
-0002f380: 6c65 2061 7869 732e 0d0a 2020 2020 2020  le axis...      
-0002f390: 2020 2320 7566 756e 632e 6f75 7465 7228    # ufunc.outer(
-0002f3a0: 412c 2042 2909 4170 706c 7920 7468 6520  A, B).Apply the 
-0002f3b0: 7566 756e 6320 6f70 2074 6f20 616c 6c20  ufunc op to all 
-0002f3c0: 7061 6972 7320 2861 2c20 6229 2077 6974  pairs (a, b) wit
-0002f3d0: 6820 6120 696e 2041 2061 6e64 2062 2069  h a in A and b i
-0002f3e0: 6e20 422e 0d0a 2020 2020 2020 2020 2320  n B...        # 
-0002f3f0: 7566 756e 632e 6174 2861 2c20 696e 6469  ufunc.at(a, indi
-0002f400: 6365 735b 2c20 625d 2909 5065 7266 6f72  ces[, b]).Perfor
-0002f410: 6d73 2075 6e62 7566 6665 7265 6420 696e  ms unbuffered in
-0002f420: 2070 6c61 6365 206f 7065 7261 7469 6f6e   place operation
-0002f430: 206f 6e20 6f70 6572 616e 6420 2761 2720   on operand 'a' 
-0002f440: 666f 7220 656c 656d 656e 7473 2073 7065  for elements spe
-0002f450: 6369 6669 6564 2062 7920 2769 6e64 6963  cified by 'indic
-0002f460: 6573 272e 0d0a 0d0a 2020 2020 2020 2020  es'.....        
-0002f470: 6966 206d 6574 686f 6420 3d3d 2022 6174  if method == "at
-0002f480: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-0002f490: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
-0002f4a0: 2020 6966 2075 6675 6e63 2e6e 6f75 7420    if ufunc.nout 
-0002f4b0: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
-0002f4c0: 2020 2023 2063 6865 636b 2069 6620 7765     # check if we
-0002f4d0: 2075 7365 6420 6f75 7220 6f77 6e20 6f75   used our own ou
-0002f4e0: 7470 7574 0d0a 0d0a 2020 2020 2020 2020  tput....        
-0002f4f0: 2020 2020 2320 6966 2069 7369 6e73 7461      # if isinsta
-0002f500: 6e63 6528 6f75 7441 7272 6179 2c20 6e70  nce(outArray, np
-0002f510: 2e6e 6461 7272 6179 293a 0d0a 2020 2020  .ndarray):..    
-0002f520: 2020 2020 2020 2020 2320 2020 2072 6574          #    ret
-0002f530: 7572 6e20 6f75 7441 7272 6179 2e76 6965  urn outArray.vie
-0002f540: 7728 4661 7374 4172 7261 7929 0d0a 0d0a  w(FastArray)....
-0002f550: 2020 2020 2020 2020 2020 2020 2320 6966              # if
-0002f560: 2028 6669 6e61 6c5f 6474 7970 6520 213d   (final_dtype !=
-0002f570: 204e 6f6e 6520 616e 6420 6669 6e61 6c5f   None and final_
-0002f580: 6474 7970 6520 213d 2072 6573 756c 7473  dtype != results
-0002f590: 2e64 7479 7065 293a 0d0a 2020 2020 2020  .dtype):..      
-0002f5a0: 2020 2020 2020 2320 2020 2070 7269 6e74        #    print
-0002f5b0: 2822 2a2a 2a2a 2a2a 206d 6973 7072 6564  ("****** mispred
-0002f5c0: 6963 7465 6420 6669 6e61 6c22 2c20 6669  icted final", fi
-0002f5d0: 6e61 6c5f 6474 7970 652c 2072 6573 756c  nal_dtype, resul
-0002f5e0: 7473 2e64 7479 7065 2c20 7566 756e 632c  ts.dtype, ufunc,
-0002f5f0: 2073 6361 6c61 7274 7970 6573 2c20 6172   scalartypes, ar
-0002f600: 6773 2c20 6f75 7470 7574 732c 206b 7761  gs, outputs, kwa
-0002f610: 7267 7329 3b0d 0a20 2020 2020 2020 2020  rgs);..         
-0002f620: 2020 2023 2072 6573 756c 7473 203d 2028     # results = (
-0002f630: 7265 7375 6c74 732c 290d 0a0d 0a20 2020  results,)....   
-0002f640: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0002f650: 6973 696e 7374 616e 6365 2872 6573 756c  isinstance(resul
-0002f660: 7473 2c20 4661 7374 4172 7261 7929 2061  ts, FastArray) a
-0002f670: 6e64 2069 7369 6e73 7461 6e63 6528 7265  nd isinstance(re
-0002f680: 7375 6c74 732c 206e 702e 6e64 6172 7261  sults, np.ndarra
-0002f690: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
-0002f6a0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-0002f6b0: 6c74 732e 7669 6577 2846 6173 7441 7272  lts.view(FastArr
-0002f6c0: 6179 290d 0a0d 0a20 2020 2020 2020 2020  ay)....         
-0002f6d0: 2020 2023 2074 6869 6e6b 2068 6974 2068     # think hit h
-0002f6e0: 6572 6520 666f 7220 7375 6d20 7769 6863  ere for sum wihc
-0002f6f0: 6820 646f 6573 206e 6f74 2072 6574 7572  h does not retur
-0002f700: 6e20 616e 2061 7272 6179 2c20 6a75 7374  n an array, just
-0002f710: 2061 206e 756d 6265 720d 0a20 2020 2020   a number..     
-0002f720: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0002f730: 7375 6c74 730d 0a0d 0a20 2020 2020 2020  sults....       
-0002f740: 2023 206d 6f72 6520 7468 616e 206f 6e65   # more than one
-0002f750: 2069 7465 6d2c 2073 6f20 7765 2061 7265   item, so we are
-0002f760: 206d 616b 696e 6720 6120 7475 706c 650d   making a tuple.
-0002f770: 0a20 2020 2020 2020 2023 2063 616e 2072  .        # can r
-0002f780: 6573 756c 7420 696e 205f 5f61 7272 6179  esult in __array
-0002f790: 5f66 696e 616c 697a 655f 5f20 6265 696e  _finalize__ bein
-0002f7a0: 6720 6361 6c6c 6564 0d0a 2020 2020 2020  g called..      
-0002f7b0: 2020 7265 7375 6c74 7320 3d20 7475 706c    results = tupl
-0002f7c0: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-0002f7d0: 286e 702e 6173 6172 7261 7928 7265 7375  (np.asarray(resu
-0002f7e0: 6c74 292e 7669 6577 2846 6173 7441 7272  lt).view(FastArr
-0002f7f0: 6179 2920 6966 206f 7574 7075 7420 6973  ay) if output is
-0002f800: 204e 6f6e 6520 656c 7365 206f 7574 7075   None else outpu
-0002f810: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-0002f820: 666f 7220 7265 7375 6c74 2c20 6f75 7470  for result, outp
-0002f830: 7574 2069 6e20 7a69 7028 7265 7375 6c74  ut in zip(result
-0002f840: 732c 206f 7574 7075 7473 290d 0a20 2020  s, outputs)..   
-0002f850: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-0002f860: 2020 2320 6368 6563 6b20 6966 2077 6520    # check if we 
-0002f870: 6861 7665 2061 2074 7570 6c65 206f 6620  have a tuple of 
-0002f880: 6f6e 6520 6974 656d 2c20 6966 2073 6f20  one item, if so 
-0002f890: 6a75 7374 2072 6574 7572 6e20 7468 6520  just return the 
-0002f8a0: 6f6e 6520 6974 656d 0d0a 2020 2020 2020  one item..      
-0002f8b0: 2020 6966 206c 656e 2872 6573 756c 7473    if len(results
-0002f8c0: 2920 3d3d 2031 3a0d 0a20 2020 2020 2020  ) == 1:..       
-0002f8d0: 2020 2020 2072 6573 756c 7473 203d 2072       results = r
-0002f8e0: 6573 756c 7473 5b30 5d0d 0a20 2020 2020  esults[0]..     
-0002f8f0: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-0002f900: 730d 0a0d 0a20 2020 2040 7072 6f70 6572  s....    @proper
-0002f910: 7479 0d0a 2020 2020 6465 6620 6e75 6d62  ty..    def numb
-0002f920: 6173 7472 696e 6728 7365 6c66 293a 0d0a  astring(self):..
-0002f930: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0002f940: 2020 2020 2063 6f6e 7665 7274 7320 6279       converts by
-0002f950: 7465 2073 7472 696e 6720 616e 6420 756e  te string and un
-0002f960: 6963 6f64 6520 7374 7269 6e67 7320 746f  icode strings to
-0002f970: 2061 2032 6469 6d65 6e73 696f 6e61 6c20   a 2dimensional 
-0002f980: 6172 7261 790d 0a20 2020 2020 2020 2073  array..        s
-0002f990: 6f20 7468 6174 206e 756d 6261 2063 616e  o that numba can
-0002f9a0: 2070 726f 6365 7373 2069 7420 636f 7272   process it corr
-0002f9b0: 6563 746c 790d 0a0d 0a20 2020 2020 2020  ectly....       
-0002f9c0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-0002f9d0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-0002f9e0: 2020 2020 203e 3e3e 2040 6e75 6d62 612e       >>> @numba.
-0002f9f0: 6a69 7428 6e6f 7079 7468 6f6e 3d54 7275  jit(nopython=Tru
-0002fa00: 6529 0d0a 2020 2020 2020 2020 2e2e 2e20  e)..        ... 
-0002fa10: 6465 6620 6e75 6d62 615f 7374 7228 7478  def numba_str(tx
-0002fa20: 7429 3a0d 0a20 2020 2020 2020 202e 2e2e  t):..        ...
-0002fa30: 2020 2020 2078 3d30 0d0a 2020 2020 2020       x=0..      
-0002fa40: 2020 2e2e 2e20 2020 2020 666f 7220 6920    ...     for i 
-0002fa50: 696e 2072 616e 6765 2874 7874 2e73 6861  in range(txt.sha
-0002fa60: 7065 5b30 5d29 3a0d 0a20 2020 2020 2020  pe[0]):..       
-0002fa70: 202e 2e2e 2020 2020 2020 2020 2069 6620   ...         if 
-0002fa80: 2874 7874 5b69 2c30 5d3d 3d31 3136 2061  (txt[i,0]==116 a
-0002fa90: 6e64 2020 2320 2774 270d 0a20 2020 2020  nd  # 't'..     
-0002faa0: 2020 202e 2e2e 2020 2020 2020 2020 2020     ...          
-0002fab0: 2020 2074 7874 5b69 2c31 5d3d 3d31 3031     txt[i,1]==101
-0002fac0: 2061 6e64 2020 2320 2765 270d 0a20 2020   and  # 'e'..   
-0002fad0: 2020 2020 202e 2e2e 2020 2020 2020 2020       ...        
-0002fae0: 2020 2020 2074 7874 5b69 2c32 5d3d 3d31       txt[i,2]==1
-0002faf0: 3230 2061 6e64 2020 2320 2778 270d 0a20  20 and  # 'x'.. 
-0002fb00: 2020 2020 2020 202e 2e2e 2020 2020 2020         ...      
-0002fb10: 2020 2020 2020 2074 7874 5b69 2c33 5d3d         txt[i,3]=
-0002fb20: 3d31 3136 293a 2020 2020 2320 2774 270d  =116):    # 't'.
-0002fb30: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-0002fb40: 2020 2020 2020 2020 2078 202b 3d20 310d           x += 1.
-0002fb50: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-0002fb60: 2072 6574 7572 6e20 780d 0a20 2020 2020   return x..     
-0002fb70: 2020 203e 3e3e 0d0a 2020 2020 2020 2020     >>>..        
-0002fb80: 3e3e 3e20 783d 4661 7374 4172 7261 7928  >>> x=FastArray(
-0002fb90: 5b27 736f 6d65 272c 2774 6578 7427 2c27  ['some','text','
-0002fba0: 7468 6973 272c 2769 7327 5d29 0d0a 2020  this','is'])..  
-0002fbb0: 2020 2020 2020 3e3e 3e20 6e75 6d62 615f        >>> numba_
-0002fbc0: 7374 7228 782e 7669 6577 286e 702e 7569  str(x.view(np.ui
-0002fbd0: 6e74 3829 2e72 6573 6861 7065 2828 6c65  nt8).reshape((le
-0002fbe0: 6e28 7829 2c20 782e 6974 656d 7369 7a65  n(x), x.itemsize
-0002fbf0: 2929 290d 0a20 2020 2020 2020 203e 3e3e  )))..        >>>
-0002fc00: 206e 756d 6261 5f73 7472 2878 2e6e 756d   numba_str(x.num
-0002fc10: 6261 7374 7269 6e67 290d 0a20 2020 2020  bastring)..     
-0002fc20: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
-0002fc30: 2020 696e 7479 7065 203d 2073 656c 662e    intype = self.
-0002fc40: 6474 7970 652e 5f5f 7374 725f 5f28 290d  dtype.__str__().
-0002fc50: 0a20 2020 2020 2020 2069 6620 696e 7479  .        if inty
-0002fc60: 7065 5b30 5d20 3d3d 2022 7c22 206f 7220  pe[0] == "|" or 
-0002fc70: 696e 7479 7065 5b30 5d20 3d3d 2022 3c22  intype[0] == "<"
-0002fc80: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-0002fc90: 6620 696e 7479 7065 5b31 5d20 3d3d 2022  f intype[1] == "
-0002fca0: 5322 3a0d 0a20 2020 2020 2020 2020 2020  S":..           
-0002fcb0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0002fcc0: 2e76 6965 7728 6e70 2e75 696e 7438 292e  .view(np.uint8).
-0002fcd0: 7265 7368 6170 6528 286c 656e 2873 656c  reshape((len(sel
-0002fce0: 6629 2c20 7365 6c66 2e69 7465 6d73 697a  f), self.itemsiz
-0002fcf0: 6529 290d 0a20 2020 2020 2020 2020 2020  e))..           
-0002fd00: 2069 6620 696e 7479 7065 5b31 5d20 3d3d   if intype[1] ==
-0002fd10: 2022 5522 3a0d 0a20 2020 2020 2020 2020   "U":..         
-0002fd20: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0002fd30: 6c66 2e76 6965 7728 6e70 2e75 696e 7433  lf.view(np.uint3
-0002fd40: 3229 2e72 6573 6861 7065 2828 6c65 6e28  2).reshape((len(
-0002fd50: 7365 6c66 292c 2073 656c 662e 6974 656d  self), self.item
-0002fd60: 7369 7a65 202f 2f20 3429 290d 0a20 2020  size // 4))..   
-0002fd70: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0002fd80: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-0002fd90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002fda0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002fdb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002fdc0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2061  -----..    def a
-0002fdd0: 7070 6c79 5f6e 756d 6261 2873 656c 662c  pply_numba(self,
-0002fde0: 202a 6172 6773 2c20 6f74 7970 653d 4e6f   *args, otype=No
-0002fdf0: 6e65 2c20 6d79 6675 6e63 3d22 6d79 6675  ne, myfunc="myfu
-0002fe00: 6e63 222c 206e 616d 653d 4e6f 6e65 293a  nc", name=None):
-0002fe10: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0002fe20: 2020 2020 2020 2050 7269 6e74 2074 6f20         Print to 
-0002fe30: 7363 7265 656e 2061 6e20 6578 616d 706c  screen an exampl
-0002fe40: 6520 6e75 6d62 6120 7369 676e 6174 7572  e numba signatur
-0002fe50: 6520 666f 7220 7468 6520 6172 7261 792e  e for the array.
-0002fe60: 0d0a 0d0a 2020 2020 2020 2020 596f 7520  ....        You 
-0002fe70: 6361 6e20 7468 656e 2063 6f70 7920 7468  can then copy th
-0002fe80: 6973 2065 7861 6d70 6c65 2074 6f20 6275  is example to bu
-0002fe90: 696c 6420 796f 7572 206f 776e 206e 756d  ild your own num
-0002fea0: 6261 2066 756e 6374 696f 6e2e 0d0a 0d0a  ba function.....
-0002feb0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-0002fec0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-0002fed0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0002fee0: 2a61 7267 733a 0d0a 2020 2020 2020 2020  *args:..        
-0002fef0: 2020 2020 5465 7374 2061 7267 756d 656e      Test argumen
-0002ff00: 7473 0d0a 0d0a 2020 2020 2020 2020 6f74  ts....        ot
-0002ff10: 7970 653a 2073 7472 2c20 6465 6661 756c  ype: str, defaul
-0002ff20: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
-0002ff30: 2020 2020 4120 6469 6666 6572 656e 7420      A different 
-0002ff40: 6f75 7470 7574 2064 6174 6120 7479 7065  output data type
-0002ff50: 0d0a 0d0a 2020 2020 2020 2020 6d79 6675  ....        myfu
-0002ff60: 6e63 3a20 7374 722c 2064 6566 6175 6c74  nc: str, default
-0002ff70: 2027 6d79 6675 6e63 270d 0a20 2020 2020   'myfunc'..     
-0002ff80: 2020 2020 2020 2041 2073 7472 696e 6720         A string 
-0002ff90: 746f 2063 616c 6c20 7468 6520 6675 6e63  to call the func
-0002ffa0: 7469 6f6e 0d0a 0d0a 2020 2020 2020 2020  tion....        
-0002ffb0: 6e61 6d65 3a20 7374 722c 2064 6566 6175  name: str, defau
-0002ffc0: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
-0002ffd0: 2020 2020 2041 2073 7472 696e 6720 746f       A string to
-0002ffe0: 206e 616d 6520 7468 6520 6172 7261 790d   name the array.
-0002fff0: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-00030000: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-00030010: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
-00030020: 3e3e 2069 6d70 6f72 7420 6e75 6d62 610d  >> import numba.
-00030030: 0a20 2020 2020 2020 203e 3e3e 2040 6e75  .        >>> @nu
-00030040: 6d62 612e 6775 7665 6374 6f72 697a 6528  mba.guvectorize(
-00030050: 5b27 766f 6964 2869 6e74 3634 5b3a 5d2c  ['void(int64[:],
-00030060: 2069 6e74 3634 5b3a 5d29 275d 2c20 2728   int64[:])'], '(
-00030070: 6e29 2d3e 286e 2927 290d 0a20 2020 2020  n)->(n)')..     
-00030080: 2020 202e 2e2e 2064 6566 2073 7175 6172     ... def squar
-00030090: 6576 2878 2c6f 7574 293a 0d0a 2020 2020  ev(x,out):..    
-000300a0: 2020 2020 2e2e 2e20 2020 2020 666f 7220      ...     for 
-000300b0: 6920 696e 2072 616e 6765 286c 656e 2878  i in range(len(x
-000300c0: 2929 3a0d 0a20 2020 2020 2020 202e 2e2e  )):..        ...
-000300d0: 2020 2020 2020 2020 206f 7574 5b69 5d3d           out[i]=
-000300e0: 785b 695d 2a2a 320d 0a20 2020 2020 2020  x[i]**2..       
-000300f0: 202e 2e2e 0d0a 2020 2020 2020 2020 3e3e   .....        >>
-00030100: 3e20 613d 6172 616e 6765 2831 5f30 3030  > a=arange(1_000
-00030110: 5f30 3030 292e 6173 7479 7065 286e 702e  _000).astype(np.
-00030120: 696e 7436 3429 0d0a 2020 2020 2020 2020  int64)..        
-00030130: 3e3e 3e20 7371 7561 7265 7628 6129 0d0a  >>> squarev(a)..
-00030140: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00030150: 7928 5b20 2020 2020 2020 2020 2020 302c  y([           0,
-00030160: 2020 2020 2020 2020 2020 2020 312c 2020              1,  
-00030170: 2020 2020 2020 2020 2020 342c 202e 2e2e            4, ...
-00030180: 2c20 3939 3939 3934 3030 3030 3039 2c0d  , 999994000009,.
-00030190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000301a0: 2020 2020 3939 3939 3936 3030 3030 3034      999996000004
-000301b0: 2c20 3939 3939 3938 3030 3030 3031 5d2c  , 999998000001],
-000301c0: 2064 7479 7065 3d69 6e74 3634 290d 0a20   dtype=int64).. 
-000301d0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000301e0: 2020 2020 6966 206e 616d 6520 6973 204e      if name is N
-000301f0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00030200: 2020 2320 7472 7920 6669 7273 7420 746f    # try first to
-00030210: 2067 6574 2074 6865 206e 616d 650d 0a20   get the name.. 
-00030220: 2020 2020 2020 2020 2020 206e 616d 6520             name 
-00030230: 3d20 7365 6c66 2e67 6574 5f6e 616d 6528  = self.get_name(
-00030240: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00030250: 2069 6620 6e61 6d65 2069 7320 4e6f 6e65   if name is None
-00030260: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00030270: 2020 206e 616d 6520 3d20 2261 220d 0a0d     name = "a"...
-00030280: 0a20 2020 2020 2020 2069 6e74 7970 6520  .        intype 
-00030290: 3d20 7365 6c66 2e64 7479 7065 2e5f 5f73  = self.dtype.__s
-000302a0: 7472 5f5f 2829 0d0a 0d0a 2020 2020 2020  tr__()....      
-000302b0: 2020 6966 206f 7479 7065 2069 7320 4e6f    if otype is No
-000302c0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-000302d0: 206f 7574 7479 7065 203d 2073 656c 662e   outtype = self.
-000302e0: 6474 7970 652e 5f5f 7374 725f 5f28 290d  dtype.__str__().
-000302f0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00030300: 2020 2020 2020 2020 2020 2020 6f75 7474              outt
-00030310: 7970 6520 3d20 6e70 2e64 7479 7065 286f  ype = np.dtype(o
-00030320: 7479 7065 292e 5f5f 7374 725f 5f28 290d  type).__str__().
-00030330: 0a0d 0a20 2020 2020 2020 2023 2054 4f44  ...        # TOD
-00030340: 4f3a 2077 6861 7420 6966 2075 6e69 636f  O: what if unico
-00030350: 6465 206f 7220 7374 7269 6e67 3f20 202e  de or string?  .
-00030360: 6672 6f6d 6275 6666 6572 2f2e 7669 6577  frombuffer/.view
-00030370: 286e 702e 7569 6e74 3829 0d0a 0d0a 2020  (np.uint8)....  
-00030380: 2020 2020 2020 7072 6561 6d62 6c65 203d        preamble =
-00030390: 2022 696d 706f 7274 206e 756d 6261 5c6e   "import numba\n
-000303a0: 406e 756d 6261 2e67 7576 6563 746f 7269  @numba.guvectori
-000303b0: 7a65 285b 5c6e 220d 0a0d 0a20 2020 2020  ze([\n"....     
-000303c0: 2020 206d 6964 646c 6520 3d20 6622 2776     middle = f"'v
-000303d0: 6f69 6428 7b69 6e74 7970 657d 5b3a 5d2c  oid({intype}[:],
-000303e0: 207b 6f75 7474 7970 657d 5b3a 5d29 272c   {outtype}[:])',
-000303f0: 2020 2020 2020 2023 203c 2d2d 2063 616e         # <-- can
-00030400: 2073 7461 636b 206d 756c 7469 706c 6520   stack multiple 
-00030410: 6469 6666 6572 656e 7420 6474 7970 6573  different dtypes
-00030420: 2020 782e 7669 6577 286e 702e 7569 6e74    x.view(np.uint
-00030430: 3829 2e72 6573 6861 7065 282d 312c 2078  8).reshape(-1, x
-00030440: 2e69 7465 6d73 697a 6529 5c6e 220d 0a0d  .itemsize)\n"...
-00030450: 0a20 2020 2020 2020 2070 6f73 7461 6d62  .        postamb
-00030460: 6c65 203d 2022 2020 2020 5d2c 2027 286e  le = "    ], '(n
-00030470: 292d 3e28 6e29 272c 2074 6172 6765 743d  )->(n)', target=
-00030480: 2763 7075 2729 5c6e 220d 0a20 2020 2020  'cpu')\n"..     
-00030490: 2020 2063 6f64 6520 3d20 6622 6465 6620     code = f"def 
-000304a0: 7b6d 7966 756e 637d 2864 6174 615f 696e  {myfunc}(data_in
-000304b0: 2c20 6461 7461 5f6f 7574 293a 5c6e 2020  , data_out):\n  
-000304c0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-000304d0: 286c 656e 2864 6174 615f 696e 2929 3a5c  (len(data_in)):\
-000304e0: 6e20 2020 2020 2020 2064 6174 615f 6f75  n        data_ou
-000304f0: 745b 695d 3d64 6174 615f 696e 5b69 5d20  t[i]=data_in[i] 
-00030500: 2020 233c 2d2d 2070 7574 2079 6f75 7220    #<-- put your 
-00030510: 636f 6465 2068 6572 655c 6e22 0d0a 2020  code here\n"..  
-00030520: 2020 2020 2020 6578 6563 203d 2070 7265        exec = pre
-00030530: 616d 626c 6520 2b20 6d69 6464 6c65 202b  amble + middle +
-00030540: 2070 6f73 7461 6d62 6c65 202b 2063 6f64   postamble + cod
-00030550: 650d 0a0d 0a20 2020 2020 2020 2070 7269  e....        pri
-00030560: 6e74 2822 436f 7079 2074 6865 2063 6f64  nt("Copy the cod
-00030570: 6520 736e 6970 7065 7420 6265 6c6f 7720  e snippet below 
-00030580: 616e 6420 7265 6e61 6d65 206d 7966 756e  and rename myfun
-00030590: 6322 290d 0a20 2020 2020 2020 2070 7269  c")..        pri
-000305a0: 6e74 2822 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  nt("------------
-000305b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000305c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000305d0: 2d22 290d 0a20 2020 2020 2020 2070 7269  -")..        pri
-000305e0: 6e74 2865 7865 6329 0d0a 2020 2020 2020  nt(exec)..      
-000305f0: 2020 7072 696e 7428 222d 2d2d 2d2d 2d2d    print("-------
-00030600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00030610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00030620: 2d2d 2d2d 2d2d 2229 0d0a 2020 2020 2020  ------")..      
-00030630: 2020 6966 2069 6e74 7970 655b 305d 203d    if intype[0] =
-00030640: 3d20 227c 2220 6f72 2069 6e74 7970 655b  = "|" or intype[
-00030650: 305d 203d 3d20 223c 223a 0d0a 2020 2020  0] == "<":..    
-00030660: 2020 2020 2020 2020 6966 2069 6e74 7970          if intyp
-00030670: 655b 315d 203d 3d20 2253 223a 0d0a 2020  e[1] == "S":..  
-00030680: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00030690: 696e 7428 0d0a 2020 2020 2020 2020 2020  int(..          
-000306a0: 2020 2020 2020 2020 2020 6622 5468 656e            f"Then
-000306b0: 2063 616c 6c20 7b6d 7966 756e 637d 287b   call {myfunc}({
-000306c0: 6e61 6d65 7d2e 6e75 6d62 6173 7472 696e  name}.numbastrin
-000306d0: 672c 656d 7074 795f 6c69 6b65 287b 6e61  g,empty_like({na
-000306e0: 6d65 7d29 2e6e 756d 6261 7374 7269 6e67  me}).numbastring
-000306f0: 2920 7768 6572 6520 7b6e 616d 657d 2069  ) where {name} i
-00030700: 7320 7468 6520 696e 7075 7420 6172 7261  s the input arra
-00030710: 7922 0d0a 2020 2020 2020 2020 2020 2020  y"..            
-00030720: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-00030730: 2020 2065 6c69 6620 696e 7479 7065 5b31     elif intype[1
-00030740: 5d20 3d3d 2022 5522 3a0d 0a20 2020 2020  ] == "U":..     
-00030750: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00030760: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00030770: 2020 2020 2020 2066 2254 6865 6e20 6361         f"Then ca
-00030780: 6c6c 207b 6d79 6675 6e63 7d28 7b6e 616d  ll {myfunc}({nam
-00030790: 657d 2e6e 756d 6261 7374 7269 6e67 2c65  e}.numbastring,e
-000307a0: 6d70 7479 5f6c 696b 6528 7b6e 616d 657d  mpty_like({name}
-000307b0: 292e 6e75 6d62 6173 7472 696e 6729 2077  ).numbastring) w
-000307c0: 6865 7265 207b 6e61 6d65 7d20 6973 2074  here {name} is t
-000307d0: 6865 2069 6e70 7574 2061 7272 6179 220d  he input array".
-000307e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000307f0: 2029 0d0a 2020 2020 2020 2020 656c 7365   )..        else
-00030800: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-00030810: 7269 6e74 2866 2254 6865 6e20 6361 6c6c  rint(f"Then call
-00030820: 207b 6d79 6675 6e63 7d28 7b6e 616d 657d   {myfunc}({name}
-00030830: 2c65 6d70 7479 5f6c 696b 6528 7b6e 616d  ,empty_like({nam
-00030840: 657d 2929 2077 6865 7265 207b 6e61 6d65  e})) where {name
-00030850: 7d20 6973 2074 6865 2069 6e70 7574 2061  } is the input a
-00030860: 7272 6179 2229 0d0a 2020 2020 2020 2020  rray")..        
-00030870: 2320 7265 7475 726e 2065 7865 630d 0a0d  # return exec...
-00030880: 0a20 2020 2064 6566 2061 7070 6c79 2873  .    def apply(s
-00030890: 656c 662c 2070 7966 756e 632c 202a 6172  elf, pyfunc, *ar
-000308a0: 6773 2c20 6f74 7970 6573 3d4e 6f6e 652c  gs, otypes=None,
-000308b0: 2064 6f63 3d4e 6f6e 652c 2065 7863 6c75   doc=None, exclu
-000308c0: 6465 643d 4e6f 6e65 2c20 6361 6368 653d  ded=None, cache=
-000308d0: 4661 6c73 652c 2073 6967 6e61 7475 7265  False, signature
-000308e0: 3d4e 6f6e 6529 3a0d 0a20 2020 2020 2020  =None):..       
-000308f0: 2022 2222 0d0a 2020 2020 2020 2020 4765   """..        Ge
-00030900: 6e65 7261 6c69 7a65 6420 6675 6e63 7469  neralized functi
-00030910: 6f6e 2063 6c61 7373 2e20 2073 6565 3a20  on class.  see: 
-00030920: 6e70 2e76 6563 746f 7269 7a65 0d0a 0d0a  np.vectorize....
-00030930: 2020 2020 2020 2020 4372 6561 7465 7320          Creates 
-00030940: 616e 6420 7468 656e 2061 7070 6c69 6573  and then applies
-00030950: 2061 2076 6563 746f 7269 7a65 6420 6675   a vectorized fu
-00030960: 6e63 7469 6f6e 2077 6869 6368 2074 616b  nction which tak
-00030970: 6573 2061 206e 6573 7465 6420 7365 7175  es a nested sequ
-00030980: 656e 6365 206f 6620 6f62 6a65 6374 7320  ence of objects 
-00030990: 6f72 0d0a 2020 2020 2020 2020 6e75 6d70  or..        nump
-000309a0: 7920 6172 7261 7973 2061 7320 696e 7075  y arrays as inpu
-000309b0: 7473 2061 6e64 2072 6574 7572 6e73 2061  ts and returns a
-000309c0: 6e20 7369 6e67 6c65 206f 7220 7475 706c  n single or tupl
-000309d0: 6520 6f66 206e 756d 7079 2061 7272 6179  e of numpy array
-000309e0: 2061 730d 0a20 2020 2020 2020 206f 7574   as..        out
-000309f0: 7075 742e 2054 6865 2076 6563 746f 7269  put. The vectori
-00030a00: 7a65 6420 6675 6e63 7469 6f6e 2065 7661  zed function eva
-00030a10: 6c75 6174 6573 2060 7079 6675 6e63 6020  luates `pyfunc` 
-00030a20: 6f76 6572 2073 7563 6365 7373 6976 6520  over successive 
-00030a30: 7475 706c 6573 0d0a 2020 2020 2020 2020  tuples..        
-00030a40: 6f66 2074 6865 2069 6e70 7574 2061 7272  of the input arr
-00030a50: 6179 7320 6c69 6b65 2074 6865 2070 7974  ays like the pyt
-00030a60: 686f 6e20 6d61 7020 6675 6e63 7469 6f6e  hon map function
-00030a70: 2c20 6578 6365 7074 2069 7420 7573 6573  , except it uses
-00030a80: 2074 6865 0d0a 2020 2020 2020 2020 6272   the..        br
-00030a90: 6f61 6463 6173 7469 6e67 2072 756c 6573  oadcasting rules
-00030aa0: 206f 6620 6e75 6d70 792e 0d0a 0d0a 2020   of numpy.....  
-00030ab0: 2020 2020 2020 5468 6520 6461 7461 2074        The data t
-00030ac0: 7970 6520 6f66 2074 6865 206f 7574 7075  ype of the outpu
-00030ad0: 7420 6f66 2060 7665 6374 6f72 697a 6564  t of `vectorized
-00030ae0: 6020 6973 2064 6574 6572 6d69 6e65 6420  ` is determined 
-00030af0: 6279 2063 616c 6c69 6e67 0d0a 2020 2020  by calling..    
-00030b00: 2020 2020 7468 6520 6675 6e63 7469 6f6e      the function
-00030b10: 2077 6974 6820 7468 6520 6669 7273 7420   with the first 
-00030b20: 656c 656d 656e 7420 6f66 2074 6865 2069  element of the i
-00030b30: 6e70 7574 2e20 2054 6869 7320 6361 6e20  nput.  This can 
-00030b40: 6265 2061 766f 6964 6564 0d0a 2020 2020  be avoided..    
-00030b50: 2020 2020 6279 2073 7065 6369 6679 696e      by specifyin
-00030b60: 6720 7468 6520 606f 7479 7065 7360 2061  g the `otypes` a
-00030b70: 7267 756d 656e 742e 0d0a 0d0a 2020 2020  rgument.....    
-00030b80: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
-00030b90: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00030ba0: 2d2d 0d0a 2020 2020 2020 2020 7079 6675  --..        pyfu
-00030bb0: 6e63 203a 2063 616c 6c61 626c 650d 0a20  nc : callable.. 
-00030bc0: 2020 2020 2020 2020 2020 2041 2070 7974             A pyt
-00030bd0: 686f 6e20 6675 6e63 7469 6f6e 206f 7220  hon function or 
-00030be0: 6d65 7468 6f64 2e0d 0a20 2020 2020 2020  method...       
-00030bf0: 206f 7479 7065 7320 3a20 7374 7220 6f72   otypes : str or
-00030c00: 206c 6973 7420 6f66 2064 7479 7065 732c   list of dtypes,
-00030c10: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
-00030c20: 2020 2020 2020 2054 6865 206f 7574 7075         The outpu
-00030c30: 7420 6461 7461 2074 7970 652e 2049 7420  t data type. It 
-00030c40: 6d75 7374 2062 6520 7370 6563 6966 6965  must be specifie
-00030c50: 6420 6173 2065 6974 6865 7220 6120 7374  d as either a st
-00030c60: 7269 6e67 206f 660d 0a20 2020 2020 2020  ring of..       
-00030c70: 2020 2020 2074 7970 6563 6f64 6520 6368       typecode ch
-00030c80: 6172 6163 7465 7273 206f 7220 6120 6c69  aracters or a li
-00030c90: 7374 206f 6620 6461 7461 2074 7970 6520  st of data type 
-00030ca0: 7370 6563 6966 6965 7273 2e20 5468 6572  specifiers. Ther
-00030cb0: 6520 7368 6f75 6c64 0d0a 2020 2020 2020  e should..      
-00030cc0: 2020 2020 2020 6265 206f 6e65 2064 6174        be one dat
-00030cd0: 6120 7479 7065 2073 7065 6369 6669 6572  a type specifier
-00030ce0: 2066 6f72 2065 6163 6820 6f75 7470 7574   for each output
-00030cf0: 2e0d 0a20 2020 2020 2020 2064 6f63 203a  ...        doc :
-00030d00: 2073 7472 2c20 6f70 7469 6f6e 616c 0d0a   str, optional..
-00030d10: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-00030d20: 646f 6373 7472 696e 6720 666f 7220 7468  docstring for th
-00030d30: 6520 6675 6e63 7469 6f6e 2e20 4966 2060  e function. If `
-00030d40: 4e6f 6e65 602c 2074 6865 2064 6f63 7374  None`, the docst
-00030d50: 7269 6e67 2077 696c 6c20 6265 2074 6865  ring will be the
-00030d60: 0d0a 2020 2020 2020 2020 2020 2020 6060  ..            ``
-00030d70: 7079 6675 6e63 2e5f 5f64 6f63 5f5f 6060  pyfunc.__doc__``
-00030d80: 2e0d 0a20 2020 2020 2020 2065 7863 6c75  ...        exclu
-00030d90: 6465 6420 3a20 7365 742c 206f 7074 696f  ded : set, optio
-00030da0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
-00030db0: 2053 6574 206f 6620 7374 7269 6e67 7320   Set of strings 
-00030dc0: 6f72 2069 6e74 6567 6572 7320 7265 7072  or integers repr
-00030dd0: 6573 656e 7469 6e67 2074 6865 2070 6f73  esenting the pos
-00030de0: 6974 696f 6e61 6c20 6f72 206b 6579 776f  itional or keywo
-00030df0: 7264 0d0a 2020 2020 2020 2020 2020 2020  rd..            
-00030e00: 6172 6775 6d65 6e74 7320 666f 7220 7768  arguments for wh
-00030e10: 6963 6820 7468 6520 6675 6e63 7469 6f6e  ich the function
-00030e20: 2077 696c 6c20 6e6f 7420 6265 2076 6563   will not be vec
-00030e30: 746f 7269 7a65 642e 2020 5468 6573 6520  torized.  These 
-00030e40: 7769 6c6c 2062 650d 0a20 2020 2020 2020  will be..       
-00030e50: 2020 2020 2070 6173 7365 6420 6469 7265       passed dire
-00030e60: 6374 6c79 2074 6f20 6070 7966 756e 6360  ctly to `pyfunc`
-00030e70: 2075 6e6d 6f64 6966 6965 642e 0d0a 0d0a   unmodified.....
-00030e80: 2020 2020 2020 2020 2020 2020 2e2e 2076              .. v
-00030e90: 6572 7369 6f6e 6164 6465 643a 3a20 312e  ersionadded:: 1.
-00030ea0: 372e 300d 0a0d 0a20 2020 2020 2020 2063  7.0....        c
-00030eb0: 6163 6865 203a 2062 6f6f 6c2c 206f 7074  ache : bool, opt
-00030ec0: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
-00030ed0: 2020 4966 2060 5472 7565 602c 2074 6865    If `True`, the
-00030ee0: 6e20 6361 6368 6520 7468 6520 6669 7273  n cache the firs
-00030ef0: 7420 6675 6e63 7469 6f6e 2063 616c 6c20  t function call 
-00030f00: 7468 6174 2064 6574 6572 6d69 6e65 7320  that determines 
-00030f10: 7468 6520 6e75 6d62 6572 0d0a 2020 2020  the number..    
-00030f20: 2020 2020 2020 206f 6620 6f75 7470 7574         of output
-00030f30: 7320 6966 2060 6f74 7970 6573 6020 6973  s if `otypes` is
-00030f40: 206e 6f74 2070 726f 7669 6465 642e 0d0a   not provided...
-00030f50: 0d0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
-00030f60: 2076 6572 7369 6f6e 6164 6465 643a 3a20   versionadded:: 
-00030f70: 312e 372e 300d 0a0d 0a20 2020 2020 2020  1.7.0....       
-00030f80: 2073 6967 6e61 7475 7265 203a 2073 7472   signature : str
-00030f90: 696e 672c 206f 7074 696f 6e61 6c0d 0a20  ing, optional.. 
-00030fa0: 2020 2020 2020 2020 2020 2047 656e 6572             Gener
-00030fb0: 616c 697a 6564 2075 6e69 7665 7273 616c  alized universal
-00030fc0: 2066 756e 6374 696f 6e20 7369 676e 6174   function signat
-00030fd0: 7572 652c 2065 2e67 2e2c 2060 6028 6d2c  ure, e.g., ``(m,
-00030fe0: 6e29 2c28 6e29 2d3e 286d 2960 6020 666f  n),(n)->(m)`` fo
-00030ff0: 720d 0a20 2020 2020 2020 2020 2020 2076  r..            v
-00031000: 6563 746f 7269 7a65 6420 6d61 7472 6978  ectorized matrix
-00031010: 2d76 6563 746f 7220 6d75 6c74 6970 6c69  -vector multipli
-00031020: 6361 7469 6f6e 2e20 4966 2070 726f 7669  cation. If provi
-00031030: 6465 642c 2060 6070 7966 756e 6360 6020  ded, ``pyfunc`` 
-00031040: 7769 6c6c 0d0a 2020 2020 2020 2020 2020  will..          
-00031050: 2020 6265 2063 616c 6c65 6420 7769 7468    be called with
-00031060: 2028 616e 6420 6578 7065 6374 6564 2074   (and expected t
-00031070: 6f20 7265 7475 726e 2920 6172 7261 7973  o return) arrays
-00031080: 2077 6974 6820 7368 6170 6573 2067 6976   with shapes giv
-00031090: 656e 2062 7920 7468 650d 0a20 2020 2020  en by the..     
-000310a0: 2020 2020 2020 2073 697a 6520 6f66 2063         size of c
-000310b0: 6f72 7265 7370 6f6e 6469 6e67 2063 6f72  orresponding cor
-000310c0: 6520 6469 6d65 6e73 696f 6e73 2e20 4279  e dimensions. By
-000310d0: 2064 6566 6175 6c74 2c20 6060 7079 6675   default, ``pyfu
-000310e0: 6e63 6060 2069 730d 0a20 2020 2020 2020  nc`` is..       
-000310f0: 2020 2020 2061 7373 756d 6564 2074 6f20       assumed to 
-00031100: 7461 6b65 2073 6361 6c61 7273 2061 7320  take scalars as 
-00031110: 696e 7075 7420 616e 6420 6f75 7470 7574  input and output
-00031120: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-00031130: 202e 2e20 7665 7273 696f 6e61 6464 6564   .. versionadded
-00031140: 3a3a 2031 2e31 322e 300d 0a0d 0a20 2020  :: 1.12.0....   
-00031150: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00031160: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00031170: 2020 2020 2020 2076 6563 746f 7269 7a65         vectorize
-00031180: 6420 3a20 6361 6c6c 6162 6c65 0d0a 2020  d : callable..  
-00031190: 2020 2020 2020 2020 2020 5665 6374 6f72            Vector
-000311a0: 697a 6564 2066 756e 6374 696f 6e2e 0d0a  ized function...
-000311b0: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
-000311c0: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-000311d0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4661  ----..        Fa
-000311e0: 7374 4172 7261 792e 6170 706c 795f 6e75  stArray.apply_nu
-000311f0: 6d62 610d 0a20 2020 2020 2020 2046 6173  mba..        Fas
-00031200: 7441 7272 6179 2e61 7070 6c79 5f70 616e  tArray.apply_pan
-00031210: 6461 730d 0a0d 0a20 2020 2020 2020 2045  das....        E
-00031220: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-00031230: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-00031240: 2020 203e 3e3e 2064 6566 206d 7966 756e     >>> def myfun
-00031250: 6328 612c 2062 293a 0d0a 2020 2020 2020  c(a, b):..      
-00031260: 2020 2e2e 2e20 2020 2020 2252 6574 7572    ...     "Retur
-00031270: 6e20 612d 6220 6966 2061 3e62 2c20 6f74  n a-b if a>b, ot
-00031280: 6865 7277 6973 6520 7265 7475 726e 2061  herwise return a
-00031290: 2b62 220d 0a20 2020 2020 2020 202e 2e2e  +b"..        ...
-000312a0: 2020 2020 2069 6620 6120 3e20 623a 0d0a       if a > b:..
-000312b0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-000312c0: 2020 2020 7265 7475 726e 2061 202d 2062      return a - b
-000312d0: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
-000312e0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000312f0: 202e 2e2e 2020 2020 2020 2020 2072 6574   ...         ret
-00031300: 7572 6e20 6120 2b20 620d 0a20 2020 2020  urn a + b..     
-00031310: 2020 203e 3e3e 0d0a 2020 2020 2020 2020     >>>..        
-00031320: 3e3e 3e20 613d 6172 616e 6765 2831 3029  >>> a=arange(10)
-00031330: 0d0a 2020 2020 2020 2020 3e3e 3e20 623d  ..        >>> b=
-00031340: 6172 616e 6765 2831 3029 2b31 0d0a 2020  arange(10)+1..  
-00031350: 2020 2020 2020 3e3e 3e20 612e 6170 706c        >>> a.appl
-00031360: 7928 6d79 6675 6e63 2c62 290d 0a20 2020  y(myfunc,b)..   
-00031370: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00031380: 2031 2c20 2033 2c20 2035 2c20 2037 2c20   1,  3,  5,  7, 
-00031390: 2039 2c20 3131 2c20 3133 2c20 3135 2c20   9, 11, 13, 15, 
-000313a0: 3137 2c20 3139 5d29 0d0a 0d0a 2020 2020  17, 19])....    
-000313b0: 2020 2020 4578 616d 706c 6520 7769 7468      Example with
-000313c0: 206f 6e65 2069 6e70 7574 2061 7272 6179   one input array
-000313d0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-000313e0: 6465 6620 7371 7561 7265 2878 293a 0d0a  def square(x):..
-000313f0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-00031400: 7265 7475 726e 2078 2a2a 320d 0a20 2020  return x**2..   
-00031410: 2020 2020 203e 3e3e 0d0a 2020 2020 2020       >>>..      
-00031420: 2020 3e3e 3e20 613d 6172 616e 6765 2831    >>> a=arange(1
-00031430: 3029 0d0a 2020 2020 2020 2020 3e3e 3e20  0)..        >>> 
-00031440: 612e 6170 706c 7928 7371 7561 7265 290d  a.apply(square).
-00031450: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00031460: 6179 285b 2030 2c20 2031 2c20 2034 2c20  ay([ 0,  1,  4, 
-00031470: 2039 2c20 3136 2c20 3235 2c20 3336 2c20   9, 16, 25, 36, 
-00031480: 3439 2c20 3634 2c20 3831 5d29 0d0a 0d0a  49, 64, 81])....
-00031490: 2020 2020 2020 2020 4578 616d 706c 6520          Example 
-000314a0: 7769 7468 206c 616d 6264 610d 0a0d 0a20  with lambda.... 
-000314b0: 2020 2020 2020 203e 3e3e 2061 3d61 7261         >>> a=ara
-000314c0: 6e67 6528 3130 290d 0a20 2020 2020 2020  nge(10)..       
-000314d0: 203e 3e3e 2061 2e61 7070 6c79 286c 616d   >>> a.apply(lam
-000314e0: 6264 6120 783a 2078 2a2a 3229 0d0a 2020  bda x: x**2)..  
-000314f0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-00031500: 5b20 302c 2020 312c 2020 342c 2020 392c  [ 0,  1,  4,  9,
-00031510: 2031 362c 2032 352c 2033 362c 2034 392c   16, 25, 36, 49,
-00031520: 2036 342c 2038 315d 290d 0a0d 0a20 2020   64, 81])....   
-00031530: 2020 2020 2045 7861 6d70 6c65 2077 6974       Example wit
-00031540: 6820 6e75 6d62 610d 0a0d 0a20 2020 2020  h numba....     
-00031550: 2020 203e 3e3e 2066 726f 6d20 6e75 6d62     >>> from numb
-00031560: 6120 696d 706f 7274 206a 6974 0d0a 2020  a import jit..  
-00031570: 2020 2020 2020 3e3e 3e20 406a 6974 0d0a        >>> @jit..
-00031580: 2020 2020 2020 2020 2e2e 2e20 6465 6620          ... def 
-00031590: 7371 7561 7265 6974 2878 293a 0d0a 2020  squareit(x):..  
-000315a0: 2020 2020 2020 2e2e 2e20 2020 2020 7265        ...     re
-000315b0: 7475 726e 2078 2a2a 320d 0a20 2020 2020  turn x**2..     
-000315c0: 2020 203e 3e3e 2061 2e61 7070 6c79 2873     >>> a.apply(s
-000315d0: 7175 6172 6569 7429 0d0a 2020 2020 2020  quareit)..      
-000315e0: 2020 4661 7374 4172 7261 7928 5b20 302c    FastArray([ 0,
-000315f0: 2020 312c 2020 342c 2020 392c 2031 362c    1,  4,  9, 16,
-00031600: 2032 352c 2033 362c 2034 392c 2036 342c   25, 36, 49, 64,
-00031610: 2038 315d 290d 0a0d 0a20 2020 2020 2020   81])....       
-00031620: 2045 7861 6d70 6c65 7320 746f 2075 7365   Examples to use
-00031630: 2065 7869 7374 696e 6720 6275 696c 7469   existing builti
-00031640: 6e20 6f63 7420 6675 6e63 7469 6f6e 2062  n oct function b
-00031650: 7574 2063 6861 6e67 6520 7468 6520 6f75  ut change the ou
-00031660: 7470 7574 2066 726f 6d20 7374 7269 6e67  tput from string
-00031670: 2c20 746f 2075 6e69 636f 6465 2c20 746f  , to unicode, to
-00031680: 206f 626a 6563 740d 0a0d 0a20 2020 2020   object....     
-00031690: 2020 203e 3e3e 2061 3d61 7261 6e67 6528     >>> a=arange(
-000316a0: 3130 290d 0a20 2020 2020 2020 203e 3e3e  10)..        >>>
-000316b0: 2061 2e61 7070 6c79 286f 6374 2c20 6f74   a.apply(oct, ot
-000316c0: 7970 6573 3d5b 2753 275d 290d 0a20 2020  ypes=['S'])..   
-000316d0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-000316e0: 6227 306f 3027 2c20 6227 306f 3127 2c20  b'0o0', b'0o1', 
-000316f0: 6227 306f 3227 2c20 6227 306f 3327 2c20  b'0o2', b'0o3', 
-00031700: 6227 306f 3427 2c20 6227 306f 3527 2c20  b'0o4', b'0o5', 
-00031710: 6227 306f 3627 2c20 6227 306f 3727 2c20  b'0o6', b'0o7', 
-00031720: 6227 306f 3130 272c 2062 2730 6f31 3127  b'0o10', b'0o11'
-00031730: 5d2c 2064 7479 7065 3d27 7c53 3427 290d  ], dtype='|S4').
-00031740: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
-00031750: 3d61 7261 6e67 6528 3130 290d 0a20 2020  =arange(10)..   
-00031760: 2020 2020 203e 3e3e 2061 2e61 7070 6c79       >>> a.apply
-00031770: 286f 6374 2c20 6f74 7970 6573 3d5b 2755  (oct, otypes=['U
-00031780: 275d 290d 0a20 2020 2020 2020 2046 6173  '])..        Fas
-00031790: 7441 7272 6179 285b 2730 6f30 272c 2027  tArray(['0o0', '
-000317a0: 306f 3127 2c20 2730 6f32 272c 2027 306f  0o1', '0o2', '0o
-000317b0: 3327 2c20 2730 6f34 272c 2027 306f 3527  3', '0o4', '0o5'
-000317c0: 2c20 2730 6f36 272c 2027 306f 3727 2c20  , '0o6', '0o7', 
-000317d0: 2730 6f31 3027 2c20 2730 6f31 3127 5d2c  '0o10', '0o11'],
-000317e0: 2064 7479 7065 3d27 3c55 3427 290d 0a0d   dtype='<U4')...
-000317f0: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
-00031800: 7261 6e67 6528 3130 290d 0a20 2020 2020  range(10)..     
-00031810: 2020 203e 3e3e 2061 2e61 7070 6c79 286f     >>> a.apply(o
-00031820: 6374 2c20 6f74 7970 6573 3d5b 274f 275d  ct, otypes=['O']
-00031830: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-00031840: 7272 6179 285b 2730 6f30 272c 2027 306f  rray(['0o0', '0o
-00031850: 3127 2c20 2730 6f32 272c 2027 306f 3327  1', '0o2', '0o3'
-00031860: 2c20 2730 6f34 272c 2027 306f 3527 2c20  , '0o4', '0o5', 
-00031870: 2730 6f36 272c 2027 306f 3727 2c20 2730  '0o6', '0o7', '0
-00031880: 6f31 3027 2c20 2730 6f31 3127 5d2c 2064  o10', '0o11'], d
-00031890: 7479 7065 3d6f 626a 6563 7429 0d0a 0d0a  type=object)....
-000318a0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
-000318b0: 2020 2020 2020 2076 6675 6e63 203d 206e         vfunc = n
-000318c0: 702e 7665 6374 6f72 697a 6528 7079 6675  p.vectorize(pyfu
-000318d0: 6e63 2c20 6f74 7970 6573 3d6f 7479 7065  nc, otypes=otype
-000318e0: 732c 2064 6f63 3d64 6f63 2c20 6578 636c  s, doc=doc, excl
-000318f0: 7564 6564 3d65 7863 6c75 6465 642c 2063  uded=excluded, c
-00031900: 6163 6865 3d63 6163 6865 2c20 7369 676e  ache=cache, sign
-00031910: 6174 7572 653d 7369 676e 6174 7572 6529  ature=signature)
-00031920: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
-00031930: 203d 2076 6675 6e63 2873 656c 662c 202a   = vfunc(self, *
-00031940: 6172 6773 290d 0a20 2020 2020 2020 2072  args)..        r
-00031950: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
-00031960: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-00031970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00031980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00031990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000319a0: 2d0d 0a20 2020 2064 6566 2061 7070 6c79  -..    def apply
-000319b0: 5f70 616e 6461 7328 7365 6c66 2c20 6675  _pandas(self, fu
-000319c0: 6e63 2c20 636f 6e76 6572 745f 6474 7970  nc, convert_dtyp
-000319d0: 653d 5472 7565 2c20 6172 6773 3d28 292c  e=True, args=(),
-000319e0: 202a 2a6b 7764 7329 3a0d 0a20 2020 2020   **kwds):..     
-000319f0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00031a00: 496e 766f 6b65 2066 756e 6374 696f 6e20  Invoke function 
-00031a10: 6f6e 2076 616c 7565 7320 6f66 2046 6173  on values of Fas
-00031a20: 7441 7272 6179 2e20 4361 6e20 6265 2075  tArray. Can be u
-00031a30: 6675 6e63 2028 6120 4e75 6d50 7920 6675  func (a NumPy fu
-00031a40: 6e63 7469 6f6e 0d0a 2020 2020 2020 2020  nction..        
-00031a50: 7468 6174 2061 7070 6c69 6573 2074 6f20  that applies to 
-00031a60: 7468 6520 656e 7469 7265 2046 6173 7441  the entire FastA
-00031a70: 7272 6179 2920 6f72 2061 2050 7974 686f  rray) or a Pytho
-00031a80: 6e20 6675 6e63 7469 6f6e 2074 6861 7420  n function that 
-00031a90: 6f6e 6c79 2077 6f72 6b73 0d0a 2020 2020  only works..    
-00031aa0: 2020 2020 6f6e 2073 696e 676c 6520 7661      on single va
-00031ab0: 6c75 6573 0d0a 0d0a 2020 2020 2020 2020  lues....        
-00031ac0: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-00031ad0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-00031ae0: 2020 2020 2020 2020 6675 6e63 203a 2066          func : f
-00031af0: 756e 6374 696f 6e0d 0a20 2020 2020 2020  unction..       
-00031b00: 2063 6f6e 7665 7274 5f64 7479 7065 203a   convert_dtype :
-00031b10: 2062 6f6f 6c65 616e 2c20 6465 6661 756c   boolean, defaul
-00031b20: 7420 5472 7565 0d0a 2020 2020 2020 2020  t True..        
-00031b30: 2020 2020 5472 7920 746f 2066 696e 6420      Try to find 
-00031b40: 6265 7474 6572 2064 7479 7065 2066 6f72  better dtype for
-00031b50: 2065 6c65 6d65 6e74 7769 7365 2066 756e   elementwise fun
-00031b60: 6374 696f 6e20 7265 7375 6c74 732e 2049  ction results. I
-00031b70: 660d 0a20 2020 2020 2020 2020 2020 2046  f..            F
-00031b80: 616c 7365 2c20 6c65 6176 6520 6173 2064  alse, leave as d
-00031b90: 7479 7065 3d6f 626a 6563 740d 0a20 2020  type=object..   
-00031ba0: 2020 2020 2061 7267 7320 3a20 7475 706c       args : tupl
-00031bb0: 650d 0a20 2020 2020 2020 2020 2020 2050  e..            P
-00031bc0: 6f73 6974 696f 6e61 6c20 6172 6775 6d65  ositional argume
-00031bd0: 6e74 7320 746f 2070 6173 7320 746f 2066  nts to pass to f
-00031be0: 756e 6374 696f 6e20 696e 2061 6464 6974  unction in addit
-00031bf0: 696f 6e20 746f 2074 6865 2076 616c 7565  ion to the value
-00031c00: 0d0a 2020 2020 2020 2020 4164 6469 7469  ..        Additi
-00031c10: 6f6e 616c 206b 6579 776f 7264 2061 7267  onal keyword arg
-00031c20: 756d 656e 7473 2077 696c 6c20 6265 2070  uments will be p
-00031c30: 6173 7365 6420 6173 206b 6579 776f 7264  assed as keyword
-00031c40: 7320 746f 2074 6865 2066 756e 6374 696f  s to the functio
-00031c50: 6e0d 0a0d 0a20 2020 2020 2020 2052 6574  n....        Ret
-00031c60: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-00031c70: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2079  -----..        y
-00031c80: 203a 2046 6173 7441 7272 6179 206f 7220   : FastArray or 
-00031c90: 4461 7461 7365 7420 6966 2066 756e 6320  Dataset if func 
-00031ca0: 7265 7475 726e 7320 6120 4661 7374 4172  returns a FastAr
-00031cb0: 7261 790d 0a0d 0a20 2020 2020 2020 2053  ray....        S
-00031cc0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
-00031cd0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-00031ce0: 2020 2046 6173 7441 7272 6179 2e6d 6170     FastArray.map
-00031cf0: 3a20 466f 7220 656c 656d 656e 742d 7769  : For element-wi
-00031d00: 7365 206f 7065 7261 7469 6f6e 730d 0a20  se operations.. 
-00031d10: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00031d20: 2e61 6767 3a20 6f6e 6c79 2070 6572 666f  .agg: only perfo
-00031d30: 726d 2061 6767 7265 6761 7469 6e67 2074  rm aggregating t
-00031d40: 7970 6520 6f70 6572 6174 696f 6e73 0d0a  ype operations..
-00031d50: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00031d60: 792e 7472 616e 7366 6f72 6d3a 206f 6e6c  y.transform: onl
-00031d70: 7920 7065 7266 6f72 6d20 7472 616e 7366  y perform transf
-00031d80: 6f72 6d69 6e67 2074 7970 6520 6f70 6572  orming type oper
-00031d90: 6174 696f 6e73 0d0a 0d0a 2020 2020 2020  ations....      
-00031da0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-00031db0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-00031dc0: 2020 2020 2020 4372 6561 7465 2061 2046        Create a F
-00031dd0: 6173 7441 7272 6179 2077 6974 6820 7479  astArray with ty
-00031de0: 7069 6361 6c20 7375 6d6d 6572 2074 656d  pical summer tem
-00031df0: 7065 7261 7475 7265 7320 666f 7220 6561  peratures for ea
-00031e00: 6368 2063 6974 792e 0d0a 0d0a 2020 2020  ch city.....    
-00031e10: 2020 2020 3e3e 3e20 6661 203d 2072 742e      >>> fa = rt.
-00031e20: 4661 7374 4172 7261 7928 5b32 302c 2032  FastArray([20, 2
-00031e30: 312c 2031 325d 2c20 696e 6465 783d 5b27  1, 12], index=['
-00031e40: 4c6f 6e64 6f6e 272c 2027 4e65 7720 596f  London', 'New Yo
-00031e50: 726b 272c 2748 656c 7369 6e6b 6927 5d29  rk','Helsinki'])
-00031e60: 0d0a 2020 2020 2020 2020 3e3e 3e20 6661  ..        >>> fa
-00031e70: 0d0a 2020 2020 2020 2020 4c6f 6e64 6f6e  ..        London
-00031e80: 2020 2020 2020 3230 0d0a 2020 2020 2020        20..      
-00031e90: 2020 4e65 7720 596f 726b 2020 2020 3231    New York    21
-00031ea0: 0d0a 2020 2020 2020 2020 4865 6c73 696e  ..        Helsin
-00031eb0: 6b69 2020 2020 3132 0d0a 2020 2020 2020  ki    12..      
-00031ec0: 2020 6474 7970 653a 2069 6e74 3634 0d0a    dtype: int64..
-00031ed0: 0d0a 2020 2020 2020 2020 5371 7561 7265  ..        Square
-00031ee0: 2074 6865 2076 616c 7565 7320 6279 2064   the values by d
-00031ef0: 6566 696e 696e 6720 6120 6675 6e63 7469  efining a functi
-00031f00: 6f6e 2061 6e64 2070 6173 7369 6e67 2069  on and passing i
-00031f10: 7420 6173 2061 6e0d 0a20 2020 2020 2020  t as an..       
-00031f20: 2061 7267 756d 656e 7420 746f 2060 6061   argument to ``a
-00031f30: 7070 6c79 2829 6060 2e0d 0a0d 0a20 2020  pply()``.....   
-00031f40: 2020 2020 203e 3e3e 2064 6566 2073 7175       >>> def squ
-00031f50: 6172 6528 7829 3a0d 0a20 2020 2020 2020  are(x):..       
-00031f60: 202e 2e2e 2020 2020 2072 6574 7572 6e20   ...     return 
-00031f70: 782a 2a32 0d0a 2020 2020 2020 2020 3e3e  x**2..        >>
-00031f80: 3e20 6661 2e61 7070 6c79 2873 7175 6172  > fa.apply(squar
-00031f90: 6529 0d0a 2020 2020 2020 2020 4c6f 6e64  e)..        Lond
-00031fa0: 6f6e 2020 2020 2020 3430 300d 0a20 2020  on      400..   
-00031fb0: 2020 2020 204e 6577 2059 6f72 6b20 2020       New York   
-00031fc0: 2034 3431 0d0a 2020 2020 2020 2020 4865   441..        He
-00031fd0: 6c73 696e 6b69 2020 2020 3134 340d 0a20  lsinki    144.. 
-00031fe0: 2020 2020 2020 2064 7479 7065 3a20 696e         dtype: in
-00031ff0: 7436 340d 0a0d 0a20 2020 2020 2020 2053  t64....        S
-00032000: 7175 6172 6520 7468 6520 7661 6c75 6573  quare the values
-00032010: 2062 7920 7061 7373 696e 6720 616e 2061   by passing an a
-00032020: 6e6f 6e79 6d6f 7573 2066 756e 6374 696f  nonymous functio
-00032030: 6e20 6173 2061 6e0d 0a20 2020 2020 2020  n as an..       
-00032040: 2061 7267 756d 656e 7420 746f 2060 6061   argument to ``a
-00032050: 7070 6c79 2829 6060 2e0d 0a0d 0a20 2020  pply()``.....   
-00032060: 2020 2020 203e 3e3e 2066 612e 6170 706c       >>> fa.appl
-00032070: 7928 6c61 6d62 6461 2078 3a20 782a 2a32  y(lambda x: x**2
-00032080: 290d 0a20 2020 2020 2020 204c 6f6e 646f  )..        Londo
-00032090: 6e20 2020 2020 2034 3030 0d0a 2020 2020  n      400..    
-000320a0: 2020 2020 4e65 7720 596f 726b 2020 2020      New York    
-000320b0: 3434 310d 0a20 2020 2020 2020 2048 656c  441..        Hel
-000320c0: 7369 6e6b 6920 2020 2031 3434 0d0a 2020  sinki    144..  
-000320d0: 2020 2020 2020 6474 7970 653a 2069 6e74        dtype: int
-000320e0: 3634 0d0a 0d0a 2020 2020 2020 2020 4465  64....        De
-000320f0: 6669 6e65 2061 2063 7573 746f 6d20 6675  fine a custom fu
-00032100: 6e63 7469 6f6e 2074 6861 7420 6e65 6564  nction that need
-00032110: 7320 6164 6469 7469 6f6e 616c 2070 6f73  s additional pos
-00032120: 6974 696f 6e61 6c0d 0a20 2020 2020 2020  itional..       
-00032130: 2061 7267 756d 656e 7473 2061 6e64 2070   arguments and p
-00032140: 6173 7320 7468 6573 6520 6164 6469 7469  ass these additi
-00032150: 6f6e 616c 2061 7267 756d 656e 7473 2075  onal arguments u
-00032160: 7369 6e67 2074 6865 0d0a 2020 2020 2020  sing the..      
-00032170: 2020 6060 6172 6773 6060 206b 6579 776f    ``args`` keywo
-00032180: 7264 2e0d 0a0d 0a20 2020 2020 2020 203e  rd.....        >
-00032190: 3e3e 2064 6566 2073 7562 7472 6163 745f  >> def subtract_
-000321a0: 6375 7374 6f6d 5f76 616c 7565 2878 2c20  custom_value(x, 
-000321b0: 6375 7374 6f6d 5f76 616c 7565 293a 0d0a  custom_value):..
-000321c0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-000321d0: 7265 7475 726e 2078 2d63 7573 746f 6d5f  return x-custom_
-000321e0: 7661 6c75 650d 0a20 2020 2020 2020 203e  value..        >
-000321f0: 3e3e 2066 612e 6170 706c 7928 7375 6274  >> fa.apply(subt
-00032200: 7261 6374 5f63 7573 746f 6d5f 7661 6c75  ract_custom_valu
-00032210: 652c 2061 7267 733d 2835 2c29 290d 0a20  e, args=(5,)).. 
-00032220: 2020 2020 2020 204c 6f6e 646f 6e20 2020         London   
-00032230: 2020 2031 350d 0a20 2020 2020 2020 204e     15..        N
-00032240: 6577 2059 6f72 6b20 2020 2031 360d 0a20  ew York    16.. 
-00032250: 2020 2020 2020 2048 656c 7369 6e6b 6920         Helsinki 
-00032260: 2020 2020 370d 0a20 2020 2020 2020 2064      7..        d
-00032270: 7479 7065 3a20 696e 7436 340d 0a0d 0a20  type: int64.... 
-00032280: 2020 2020 2020 2044 6566 696e 6520 6120         Define a 
-00032290: 6375 7374 6f6d 2066 756e 6374 696f 6e20  custom function 
-000322a0: 7468 6174 2074 616b 6573 206b 6579 776f  that takes keywo
-000322b0: 7264 2061 7267 756d 656e 7473 0d0a 2020  rd arguments..  
-000322c0: 2020 2020 2020 616e 6420 7061 7373 2074        and pass t
-000322d0: 6865 7365 2061 7267 756d 656e 7473 2074  hese arguments t
-000322e0: 6f20 6060 6170 706c 7960 602e 0d0a 0d0a  o ``apply``.....
-000322f0: 2020 2020 2020 2020 3e3e 3e20 6465 6620          >>> def 
-00032300: 6164 645f 6375 7374 6f6d 5f76 616c 7565  add_custom_value
-00032310: 7328 782c 202a 2a6b 7761 7267 7329 3a0d  s(x, **kwargs):.
-00032320: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-00032330: 2066 6f72 206d 6f6e 7468 2069 6e20 6b77   for month in kw
-00032340: 6172 6773 3a0d 0a20 2020 2020 2020 202e  args:..        .
-00032350: 2e2e 2020 2020 2020 2020 2078 2b3d 6b77  ..         x+=kw
-00032360: 6172 6773 5b6d 6f6e 7468 5d0d 0a20 2020  args[month]..   
-00032370: 2020 2020 202e 2e2e 2020 2020 2072 6574       ...     ret
-00032380: 7572 6e20 780d 0a20 2020 2020 2020 203e  urn x..        >
-00032390: 3e3e 2066 612e 6170 706c 7928 6164 645f  >> fa.apply(add_
-000323a0: 6375 7374 6f6d 5f76 616c 7565 732c 206a  custom_values, j
-000323b0: 756e 653d 3330 2c20 6a75 6c79 3d32 302c  une=30, july=20,
-000323c0: 2061 7567 7573 743d 3235 290d 0a20 2020   august=25)..   
-000323d0: 2020 2020 204c 6f6e 646f 6e20 2020 2020       London     
-000323e0: 2039 350d 0a20 2020 2020 2020 204e 6577   95..        New
-000323f0: 2059 6f72 6b20 2020 2039 360d 0a20 2020   York    96..   
-00032400: 2020 2020 2048 656c 7369 6e6b 6920 2020       Helsinki   
-00032410: 2038 370d 0a20 2020 2020 2020 2064 7479   87..        dty
-00032420: 7065 3a20 696e 7436 340d 0a0d 0a20 2020  pe: int64....   
-00032430: 2020 2020 2055 7365 2061 2066 756e 6374       Use a funct
-00032440: 696f 6e20 6672 6f6d 2074 6865 204e 756d  ion from the Num
-00032450: 7079 206c 6962 7261 7279 2e0d 0a0d 0a20  py library..... 
-00032460: 2020 2020 2020 203e 3e3e 2066 612e 6170         >>> fa.ap
-00032470: 706c 7928 6e70 2e6c 6f67 290d 0a20 2020  ply(np.log)..   
-00032480: 2020 2020 204c 6f6e 646f 6e20 2020 2020       London     
-00032490: 2032 2e39 3935 3733 320d 0a20 2020 2020   2.995732..     
-000324a0: 2020 204e 6577 2059 6f72 6b20 2020 2033     New York    3
-000324b0: 2e30 3434 3532 320d 0a20 2020 2020 2020  .044522..       
-000324c0: 2048 656c 7369 6e6b 6920 2020 2032 2e34   Helsinki    2.4
-000324d0: 3834 3930 370d 0a20 2020 2020 2020 2064  84907..        d
-000324e0: 7479 7065 3a20 666c 6f61 7436 340d 0a20  type: float64.. 
-000324f0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00032500: 2020 2020 696d 706f 7274 2070 616e 6461      import panda
-00032510: 7320 6173 2070 640d 0a0d 0a20 2020 2020  s as pd....     
-00032520: 2020 2073 6572 6965 7320 3d20 7064 2e53     series = pd.S
-00032530: 6572 6965 7328 7365 6c66 290d 0a20 2020  eries(self)..   
-00032540: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-00032550: 7269 6573 2e61 7070 6c79 2866 756e 632c  ries.apply(func,
-00032560: 2063 6f6e 7665 7274 5f64 7479 7065 3d63   convert_dtype=c
-00032570: 6f6e 7665 7274 5f64 7479 7065 2c20 6172  onvert_dtype, ar
-00032580: 6773 3d61 7267 732c 202a 2a6b 7764 7329  gs=args, **kwds)
-00032590: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000325a0: 2072 6573 756c 742e 7661 6c75 6573 0d0a   result.values..
-000325b0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-000325c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000325d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000325e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000325f0: 2d2d 2d0d 0a20 2020 2040 6361 6368 6564  ---..    @cached
-00032600: 5f77 6561 6b72 6566 5f70 726f 7065 7274  _weakref_propert
-00032610: 790d 0a20 2020 2064 6566 2073 7472 2873  y..    def str(s
-00032620: 656c 6629 202d 3e20 2246 4153 7472 696e  elf) -> "FAStrin
-00032630: 6722 3a0d 0a20 2020 2020 2020 2072 2222  g":..        r""
-00032640: 2243 6173 7473 2061 6e20 6172 7261 7920  "Casts an array 
-00032650: 6f66 2062 7974 6520 7374 7269 6e67 7320  of byte strings 
-00032660: 6f72 2075 6e69 636f 6465 2061 7320 6060  or unicode as ``
-00032670: 4641 5374 7269 6e67 6060 2e0d 0a0d 0a20  FAString``..... 
-00032680: 2020 2020 2020 2045 6e61 626c 6573 2061         Enables a
-00032690: 2076 6172 6965 7479 206f 6620 7573 6566   variety of usef
-000326a0: 756c 2073 7472 696e 6720 6d61 6e69 7075  ul string manipu
-000326b0: 6c61 7469 6f6e 206d 6574 686f 6473 2e0d  lation methods..
-000326c0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-000326d0: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-000326e0: 2d2d 2d0d 0a20 2020 2020 2020 2046 4153  ---..        FAS
-000326f0: 7472 696e 670d 0a0d 0a20 2020 2020 2020  tring....       
-00032700: 2052 6169 7365 730d 0a20 2020 2020 2020   Raises..       
-00032710: 202d 2d2d 2d2d 2d0d 0a20 2020 2020 2020   ------..       
-00032720: 2054 7970 6545 7272 6f72 0d0a 2020 2020   TypeError..    
-00032730: 2020 2020 2020 2020 4966 2074 6865 2046          If the F
-00032740: 6173 7441 7272 6179 2069 7320 6f66 2064  astArray is of d
-00032750: 7479 7065 206f 7468 6572 2074 6861 6e20  type other than 
-00032760: 6279 7465 2073 7472 696e 6720 6f72 2075  byte string or u
-00032770: 6e69 636f 6465 0d0a 0d0a 2020 2020 2020  nicode....      
-00032780: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
-00032790: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-000327a0: 2020 2020 2020 6e70 2e63 6861 7261 7272        np.chararr
-000327b0: 6179 0d0a 2020 2020 2020 2020 6e70 2e63  ay..        np.c
-000327c0: 6861 720d 0a20 2020 2020 2020 2072 742e  har..        rt.
-000327d0: 4641 5374 7269 6e67 2e61 7070 6c79 0d0a  FAString.apply..
-000327e0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-000327f0: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-00032800: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-00032810: 3e20 733d 4641 285b 2774 6869 7327 2c27  > s=FA(['this','
-00032820: 7468 6174 272c 2774 6573 7420 275d 2a31  that','test ']*1
-00032830: 3030 5f30 3030 290d 0a20 2020 2020 2020  00_000)..       
-00032840: 203e 3e3e 2073 2e73 7472 2e75 7070 6572   >>> s.str.upper
-00032850: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00032860: 7261 7928 5b62 2754 4849 5327 2c20 6227  ray([b'THIS', b'
-00032870: 5448 4154 272c 2062 2754 4553 5420 272c  THAT', b'TEST ',
-00032880: 202e 2e2e 2c20 6227 5448 4953 272c 2062   ..., b'THIS', b
-00032890: 2754 4841 5427 2c20 6227 5445 5354 2027  'THAT', b'TEST '
-000328a0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-000328b0: 2020 2020 2020 6474 7970 653d 277c 5335        dtype='|S5
-000328c0: 2729 0d0a 0d0a 2020 2020 2020 2020 3e3e  ')....        >>
-000328d0: 3e20 732e 7374 722e 6c6f 7765 720d 0a20  > s.str.lower.. 
-000328e0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-000328f0: 285b 6227 7468 6973 272c 2062 2774 6861  ([b'this', b'tha
-00032900: 7427 2c20 6227 7465 7374 2027 2c20 2e2e  t', b'test ', ..
-00032910: 2e2c 2062 2774 6869 7327 2c20 6227 7468  ., b'this', b'th
-00032920: 6174 272c 2062 2774 6573 7420 275d 2c0d  at', b'test '],.
-00032930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032940: 2020 2064 7479 7065 3d27 7c53 3527 290d     dtype='|S5').
-00032950: 0a0d 0a20 2020 2020 2020 203e 3e3e 2073  ...        >>> s
-00032960: 2e73 7472 2e72 656d 6f76 6574 7261 696c  .str.removetrail
-00032970: 696e 6728 290d 0a20 2020 2020 2020 2046  ing()..        F
-00032980: 6173 7441 7272 6179 285b 6227 7468 6973  astArray([b'this
-00032990: 272c 2062 2774 6861 7427 2c20 6227 7465  ', b'that', b'te
-000329a0: 7374 272c 202e 2e2e 2c20 6227 7468 6973  st', ..., b'this
-000329b0: 272c 2062 2774 6861 7427 2c20 6227 7465  ', b'that', b'te
-000329c0: 7374 275d 2c0d 0a20 2020 2020 2020 2020  st'],..         
-000329d0: 2020 2020 2020 2020 2064 7479 7065 3d27           dtype='
-000329e0: 7c53 3527 290d 0a20 2020 2020 2020 2022  |S5')..        "
-000329f0: 2222 0d0a 2020 2020 2020 2020 6966 2073  ""..        if s
-00032a00: 656c 662e 6474 7970 652e 6368 6172 2069  elf.dtype.char i
-00032a10: 6e20 2255 5322 3a0d 0a20 2020 2020 2020  n "US":..       
-00032a20: 2020 2020 2072 6574 7572 6e20 5479 7065       return Type
-00032a30: 5265 6769 7374 6572 2e46 4153 7472 696e  Register.FAStrin
-00032a40: 6728 7365 6c66 290d 0a20 2020 2020 2020  g(self)..       
-00032a50: 2069 6620 7365 6c66 2e64 7479 7065 2e63   if self.dtype.c
-00032a60: 6861 7220 3d3d 2022 4f22 3a0d 0a20 2020  har == "O":..   
-00032a70: 2020 2020 2020 2020 2023 2074 7279 2074           # try t
-00032a80: 6f20 636f 6e76 6572 7420 746f 2073 7472  o convert to str
-00032a90: 696e 6720 286d 6967 6874 2068 6176 6520  ing (might have 
-00032aa0: 636f 6d65 2066 726f 6d20 7061 6e64 6173  come from pandas
-00032ab0: 290d 0a20 2020 2020 2020 2020 2020 2074  )..            t
-00032ac0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-00032ad0: 2020 2020 2063 6f6e 7620 3d20 7365 6c66       conv = self
-00032ae0: 2e61 7374 7970 6528 2253 2229 0d0a 2020  .astype("S")..  
-00032af0: 2020 2020 2020 2020 2020 6578 6365 7074            except
-00032b00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00032b10: 2020 2063 6f6e 7620 3d20 7365 6c66 2e61     conv = self.a
-00032b20: 7374 7970 6528 2255 2229 0d0a 2020 2020  stype("U")..    
-00032b30: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-00032b40: 7970 6552 6567 6973 7465 722e 4641 5374  ypeRegister.FASt
-00032b50: 7269 6e67 2863 6f6e 7629 0d0a 0d0a 2020  ring(conv)....  
-00032b60: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
-00032b70: 4572 726f 7228 6622 5468 6520 2e73 7472  Error(f"The .str
-00032b80: 2066 756e 6374 696f 6e20 6361 6e20 6f6e   function can on
-00032b90: 6c79 2062 6520 7573 6564 206f 6e20 6279  ly be used on by
-00032ba0: 7465 2073 7472 696e 6720 616e 6420 756e  te string and un
-00032bb0: 6963 6f64 6520 6e6f 7420 7b73 656c 662e  icode not {self.
-00032bc0: 6474 7970 6521 727d 2229 0d0a 0d0a 2020  dtype!r}")....  
-00032bd0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-00032be0: 0a20 2020 2064 6566 2066 726f 6d5f 6172  .    def from_ar
-00032bf0: 726f 7728 0d0a 2020 2020 2020 2020 6172  row(..        ar
-00032c00: 723a 2055 6e69 6f6e 5b22 7061 2e41 7272  r: Union["pa.Arr
-00032c10: 6179 222c 2022 7061 2e43 6875 6e6b 6564  ay", "pa.Chunked
-00032c20: 4172 7261 7922 5d2c 0d0a 2020 2020 2020  Array"],..      
-00032c30: 2020 7a65 726f 5f63 6f70 795f 6f6e 6c79    zero_copy_only
-00032c40: 3a20 626f 6f6c 203d 2054 7275 652c 0d0a  : bool = True,..
-00032c50: 2020 2020 2020 2020 7772 6974 6162 6c65          writable
-00032c60: 3a20 626f 6f6c 203d 2046 616c 7365 2c0d  : bool = False,.
-00032c70: 0a20 2020 2020 2020 2061 7574 6f5f 7769  .        auto_wi
-00032c80: 6465 6e3a 2062 6f6f 6c20 3d20 4661 6c73  den: bool = Fals
-00032c90: 652c 0d0a 2020 2020 2920 2d3e 2022 4661  e,..    ) -> "Fa
-00032ca0: 7374 4172 7261 7922 3a0d 0a20 2020 2020  stArray":..     
-00032cb0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00032cc0: 436f 6e76 6572 7420 6120 7079 6172 726f  Convert a pyarro
-00032cd0: 7720 6041 7272 6179 6020 746f 2061 2072  w `Array` to a r
-00032ce0: 6970 7461 626c 6520 6046 6173 7441 7272  iptable `FastArr
-00032cf0: 6179 602e 0d0a 0d0a 2020 2020 2020 2020  ay`.....        
-00032d00: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-00032d10: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-00032d20: 2020 2020 2020 2020 6172 7220 3a20 7079          arr : py
-00032d30: 6172 726f 772e 4172 7261 7920 6f72 2070  arrow.Array or p
-00032d40: 7961 7272 6f77 2e43 6875 6e6b 6564 4172  yarrow.ChunkedAr
-00032d50: 7261 790d 0a20 2020 2020 2020 207a 6572  ray..        zer
-00032d60: 6f5f 636f 7079 5f6f 6e6c 7920 3a20 626f  o_copy_only : bo
-00032d70: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
-00032d80: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
-00032d90: 2054 7275 652c 2061 6e20 6578 6365 7074   True, an except
-00032da0: 696f 6e20 7769 6c6c 2062 6520 7261 6973  ion will be rais
-00032db0: 6564 2069 6620 7468 6520 636f 6e76 6572  ed if the conver
-00032dc0: 7369 6f6e 2074 6f20 6120 6046 6173 7441  sion to a `FastA
-00032dd0: 7272 6179 6020 776f 756c 6420 7265 7175  rray` would requ
-00032de0: 6972 6520 636f 7079 696e 6720 7468 650d  ire copying the.
-00032df0: 0a20 2020 2020 2020 2020 2020 2075 6e64  .            und
-00032e00: 6572 6c79 696e 6720 6461 7461 2028 652e  erlying data (e.
-00032e10: 672e 2069 6e20 7072 6573 656e 6365 206f  g. in presence o
-00032e20: 6620 6e75 6c6c 732c 206f 7220 666f 7220  f nulls, or for 
-00032e30: 6e6f 6e2d 7072 696d 6974 6976 6520 7479  non-primitive ty
-00032e40: 7065 7329 2e0d 0a20 2020 2020 2020 2077  pes)...        w
-00032e50: 7269 7461 626c 6520 3a20 626f 6f6c 2c20  ritable : bool, 
-00032e60: 6465 6661 756c 7420 4661 6c73 650d 0a20  default False.. 
-00032e70: 2020 2020 2020 2020 2020 2046 6f72 2061             For a
-00032e80: 2060 4661 7374 4172 7261 7960 2063 7265   `FastArray` cre
-00032e90: 6174 6564 2077 6974 6820 7a65 726f 2063  ated with zero c
-00032ea0: 6f70 7920 2876 6965 7720 6f6e 2074 6865  opy (view on the
-00032eb0: 2041 7272 6f77 2064 6174 6129 2c20 7468   Arrow data), th
-00032ec0: 6520 7265 7375 6c74 696e 6720 6172 7261  e resulting arra
-00032ed0: 7920 6973 206e 6f74 2077 7269 7461 626c  y is not writabl
-00032ee0: 6520 2841 7272 6f77 2064 6174 6120 6973  e (Arrow data is
-00032ef0: 2069 6d6d 7574 6162 6c65 292e 0d0a 2020   immutable)...  
-00032f00: 2020 2020 2020 2020 2020 4279 2073 6574            By set
-00032f10: 7469 6e67 2074 6869 7320 746f 2054 7275  ting this to Tru
-00032f20: 652c 2061 2063 6f70 7920 6f66 2074 6865  e, a copy of the
-00032f30: 2061 7272 6179 2069 7320 6d61 6465 2074   array is made t
-00032f40: 6f20 656e 7375 7265 2069 7420 6973 2077  o ensure it is w
-00032f50: 7269 7461 626c 652e 0d0a 2020 2020 2020  ritable...      
-00032f60: 2020 6175 746f 5f77 6964 656e 203a 2062    auto_widen : b
-00032f70: 6f6f 6c2c 206f 7074 696f 6e61 6c2c 2064  ool, optional, d
-00032f80: 6566 6175 6c74 2074 6f20 4661 6c73 650d  efault to False.
-00032f90: 0a20 2020 2020 2020 2020 2020 2057 6865  .            Whe
-00032fa0: 6e20 4661 6c73 6520 2874 6865 2064 6566  n False (the def
-00032fb0: 6175 6c74 292c 2069 6620 616e 2061 7272  ault), if an arr
-00032fc0: 6f77 2061 7272 6179 2063 6f6e 7461 696e  ow array contain
-00032fd0: 7320 6120 7661 6c75 6520 7768 6963 6820  s a value which 
-00032fe0: 776f 756c 6420 6265 2063 6f6e 7369 6465  would be conside
-00032ff0: 7265 640d 0a20 2020 2020 2020 2020 2020  red..           
-00033000: 2074 6865 2027 696e 7661 6c69 6427 2f4e   the 'invalid'/N
-00033010: 4120 7661 6c75 6520 666f 7220 7468 6520  A value for the 
-00033020: 6571 7569 7661 6c65 6e74 2064 7479 7065  equivalent dtype
-00033030: 2069 6e20 6120 6046 6173 7441 7272 6179   in a `FastArray
-00033040: 602c 2072 6169 7365 2061 6e20 6578 6365  `, raise an exce
-00033050: 7074 696f 6e0d 0a20 2020 2020 2020 2020  ption..         
-00033060: 2020 2062 6563 6175 7365 2064 6972 6563     because direc
-00033070: 7420 636f 6e76 6572 7369 6f6e 2077 6f75  t conversion wou
-00033080: 6c64 2062 6520 6c6f 7373 7920 2f20 6368  ld be lossy / ch
-00033090: 616e 6765 2074 6865 2073 656d 616e 7469  ange the semanti
-000330a0: 6320 6d65 616e 696e 6720 6f66 2074 6865  c meaning of the
-000330b0: 2064 6174 612e 0d0a 2020 2020 2020 2020   data...        
-000330c0: 2020 2020 5768 656e 2054 7275 652c 2074      When True, t
-000330d0: 6865 2063 6f6e 7665 7274 6564 2061 7272  he converted arr
-000330e0: 6179 2077 696c 6c20 6265 2077 6964 656e  ay will be widen
-000330f0: 6564 2028 6966 2070 6f73 7369 626c 6529  ed (if possible)
-00033100: 2074 6f20 7468 6520 6e65 7874 2d6c 6172   to the next-lar
-00033110: 6765 7374 2064 7479 7065 0d0a 2020 2020  gest dtype..    
-00033120: 2020 2020 2020 2020 746f 2065 6e73 7572          to ensur
-00033130: 6520 7468 6520 6461 7461 2077 696c 6c20  e the data will 
-00033140: 6265 2069 6e74 6572 7072 6574 6564 2069  be interpreted i
-00033150: 6e20 7468 6520 7361 6d65 2077 6179 2e0d  n the same way..
-00033160: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00033170: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-00033180: 2d2d 2d0d 0a20 2020 2020 2020 2046 6173  ---..        Fas
-00033190: 7441 7272 6179 0d0a 2020 2020 2020 2020  tArray..        
-000331a0: 2222 220d 0a20 2020 2020 2020 2069 6d70  """..        imp
-000331b0: 6f72 7420 7079 6172 726f 772e 7479 7065  ort pyarrow.type
-000331c0: 7320 6173 2070 6174 0d0a 0d0a 2020 2020  s as pat....    
-000331d0: 2020 2020 2320 4261 7365 6420 6f6e 2074      # Based on t
-000331e0: 6865 2074 7970 6520 6f66 2074 6865 2061  he type of the a
-000331f0: 7272 6179 2c20 6469 7370 6174 6368 2074  rray, dispatch t
-00033200: 6f20 7479 7065 2d73 7065 6369 6669 6320  o type-specific 
-00033210: 696d 706c 656d 656e 7461 7469 6f6e 7320  implementations 
-00033220: 6f66 202e 6672 6f6d 5f61 7272 6f77 2829  of .from_arrow()
-00033230: 2e0d 0a20 2020 2020 2020 2070 615f 6172  ...        pa_ar
-00033240: 725f 7479 7065 203d 2061 7272 2e74 7970  r_type = arr.typ
-00033250: 650d 0a20 2020 2020 2020 2069 6620 280d  e..        if (.
-00033260: 0a20 2020 2020 2020 2020 2020 2070 6174  .            pat
-00033270: 2e69 735f 626f 6f6c 6561 6e28 7061 5f61  .is_boolean(pa_a
-00033280: 7272 5f74 7970 6529 0d0a 2020 2020 2020  rr_type)..      
-00033290: 2020 2020 2020 6f72 2070 6174 2e69 735f        or pat.is_
-000332a0: 696e 7465 6765 7228 7061 5f61 7272 5f74  integer(pa_arr_t
-000332b0: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
-000332c0: 2020 6f72 2070 6174 2e69 735f 666c 6f61    or pat.is_floa
-000332d0: 7469 6e67 2870 615f 6172 725f 7479 7065  ting(pa_arr_type
-000332e0: 290d 0a20 2020 2020 2020 2020 2020 206f  )..            o
-000332f0: 7220 7061 742e 6973 5f73 7472 696e 6728  r pat.is_string(
-00033300: 7061 5f61 7272 5f74 7970 6529 0d0a 2020  pa_arr_type)..  
-00033310: 2020 2020 2020 2020 2020 6f72 2070 6174            or pat
-00033320: 2e69 735f 6269 6e61 7279 2870 615f 6172  .is_binary(pa_ar
-00033330: 725f 7479 7065 290d 0a20 2020 2020 2020  r_type)..       
-00033340: 2020 2020 206f 7220 7061 742e 6973 5f66       or pat.is_f
-00033350: 6978 6564 5f73 697a 655f 6269 6e61 7279  ixed_size_binary
-00033360: 2870 615f 6172 725f 7479 7065 290d 0a20  (pa_arr_type).. 
-00033370: 2020 2020 2020 2029 3a0d 0a20 2020 2020         ):..     
-00033380: 2020 2020 2020 2023 2054 4f44 4f3a 2043         # TODO: C
-00033390: 6865 636b 2077 6865 7468 6572 2074 6869  heck whether thi
-000333a0: 7320 636f 6c75 6d6e 2068 6173 2061 2075  s column has a u
-000333b0: 7365 722d 7370 6563 6966 6965 6420 6669  ser-specified fi
-000333c0: 6c6c 2076 616c 7565 2070 726f 7669 6465  ll value provide
-000333d0: 643b 2069 6620 736f 2c20 7061 7373 2069  d; if so, pass i
-000333e0: 7420 616c 6f6e 6720 746f 0d0a 2020 2020  t along to..    
-000333f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00033400: 7468 6520 4661 7374 4172 7261 792e 6672  the FastArray.fr
-00033410: 6f6d 5f61 7272 6f77 2829 206d 6574 686f  om_arrow() metho
-00033420: 6420 6361 6c6c 2062 656c 6f77 2e0d 0a20  d call below... 
-00033430: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00033440: 6e20 4661 7374 4172 7261 792e 5f66 726f  n FastArray._fro
-00033450: 6d5f 6172 726f 7728 6172 722c 207a 6572  m_arrow(arr, zer
-00033460: 6f5f 636f 7079 5f6f 6e6c 793d 7a65 726f  o_copy_only=zero
-00033470: 5f63 6f70 795f 6f6e 6c79 2c20 7772 6974  _copy_only, writ
-00033480: 6162 6c65 3d77 7269 7461 626c 652c 2061  able=writable, a
-00033490: 7574 6f5f 7769 6465 6e3d 6175 746f 5f77  uto_widen=auto_w
-000334a0: 6964 656e 290d 0a0d 0a20 2020 2020 2020  iden)....       
-000334b0: 2065 6c69 6620 7061 742e 6973 5f64 6963   elif pat.is_dic
-000334c0: 7469 6f6e 6172 7928 7061 5f61 7272 5f74  tionary(pa_arr_t
-000334d0: 7970 6529 206f 7220 7061 742e 6973 5f73  ype) or pat.is_s
-000334e0: 7472 7563 7428 7061 5f61 7272 5f74 7970  truct(pa_arr_typ
-000334f0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-00033500: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
-00033510: 7374 6572 2e43 6174 6567 6f72 6963 616c  ster.Categorical
-00033520: 2e5f 6672 6f6d 5f61 7272 6f77 2861 7272  ._from_arrow(arr
-00033530: 2c20 7a65 726f 5f63 6f70 795f 6f6e 6c79  , zero_copy_only
-00033540: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
-00033550: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
-00033560: 6c65 290d 0a0d 0a20 2020 2020 2020 2065  le)....        e
-00033570: 6c69 6620 7061 742e 6973 5f74 696d 6573  lif pat.is_times
-00033580: 7461 6d70 2870 615f 6172 725f 7479 7065  tamp(pa_arr_type
-00033590: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-000335a0: 7265 7475 726e 2054 7970 6552 6567 6973  return TypeRegis
-000335b0: 7465 722e 4461 7465 5469 6d65 4e61 6e6f  ter.DateTimeNano
-000335c0: 2e5f 6672 6f6d 5f61 7272 6f77 2861 7272  ._from_arrow(arr
-000335d0: 2c20 7a65 726f 5f63 6f70 795f 6f6e 6c79  , zero_copy_only
-000335e0: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
-000335f0: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
-00033600: 6c65 290d 0a0d 0a20 2020 2020 2020 2065  le)....        e
-00033610: 6c69 6620 7061 742e 6973 5f64 6174 6528  lif pat.is_date(
-00033620: 7061 5f61 7272 5f74 7970 6529 3a0d 0a20  pa_arr_type):.. 
-00033630: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00033640: 6e20 5479 7065 5265 6769 7374 6572 2e44  n TypeRegister.D
-00033650: 6174 652e 5f66 726f 6d5f 6172 726f 7728  ate._from_arrow(
-00033660: 6172 722c 207a 6572 6f5f 636f 7079 5f6f  arr, zero_copy_o
-00033670: 6e6c 793d 7a65 726f 5f63 6f70 795f 6f6e  nly=zero_copy_on
-00033680: 6c79 2c20 7772 6974 6162 6c65 3d77 7269  ly, writable=wri
-00033690: 7461 626c 6529 0d0a 0d0a 2020 2020 2020  table)....      
-000336a0: 2020 656c 6966 2070 6174 2e69 735f 6475    elif pat.is_du
-000336b0: 7261 7469 6f6e 2870 615f 6172 725f 7479  ration(pa_arr_ty
-000336c0: 7065 293a 0d0a 2020 2020 2020 2020 2020  pe):..          
-000336d0: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
-000336e0: 6973 7465 722e 5469 6d65 5370 616e 2e5f  ister.TimeSpan._
-000336f0: 6672 6f6d 5f61 7272 6f77 2861 7272 2c20  from_arrow(arr, 
-00033700: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3d7a  zero_copy_only=z
-00033710: 6572 6f5f 636f 7079 5f6f 6e6c 792c 2077  ero_copy_only, w
-00033720: 7269 7461 626c 653d 7772 6974 6162 6c65  ritable=writable
-00033730: 290d 0a0d 0a20 2020 2020 2020 2065 6c73  )....        els
-00033740: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00033750: 2320 556e 6b6e 6f77 6e2f 756e 7375 7070  # Unknown/unsupp
-00033760: 6f72 7465 6420 6172 7261 7920 7479 7065  orted array type
-00033770: 202d 2d20 6361 6e27 7420 636f 6e76 6572   -- can't conver
-00033780: 742e 0d0a 2020 2020 2020 2020 2020 2020  t...            
-00033790: 7261 6973 6520 4e6f 7449 6d70 6c65 6d65  raise NotImpleme
-000337a0: 6e74 6564 4572 726f 7228 6622 7079 6172  ntedError(f"pyar
-000337b0: 726f 7720 6172 7261 7973 206f 6620 7479  row arrays of ty
-000337c0: 7065 2027 7b70 615f 6172 725f 7479 7065  pe '{pa_arr_type
-000337d0: 7d27 2063 616e 2774 2062 6520 636f 6e76  }' can't be conv
-000337e0: 6572 7465 6420 746f 2072 6970 7461 626c  erted to riptabl
-000337f0: 6520 6172 7261 7973 2e22 290d 0a0d 0a20  e arrays.").... 
-00033800: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00033810: 0d0a 2020 2020 6465 6620 5f66 726f 6d5f  ..    def _from_
-00033820: 6172 726f 7728 0d0a 2020 2020 2020 2020  arrow(..        
-00033830: 6172 723a 2055 6e69 6f6e 5b22 7061 2e41  arr: Union["pa.A
-00033840: 7272 6179 222c 2022 7061 2e43 6875 6e6b  rray", "pa.Chunk
-00033850: 6564 4172 7261 7922 5d2c 0d0a 2020 2020  edArray"],..    
-00033860: 2020 2020 7a65 726f 5f63 6f70 795f 6f6e      zero_copy_on
-00033870: 6c79 3a20 626f 6f6c 203d 2054 7275 652c  ly: bool = True,
-00033880: 0d0a 2020 2020 2020 2020 7772 6974 6162  ..        writab
-00033890: 6c65 3a20 626f 6f6c 203d 2046 616c 7365  le: bool = False
-000338a0: 2c0d 0a20 2020 2020 2020 2061 7574 6f5f  ,..        auto_
-000338b0: 7769 6465 6e3a 2062 6f6f 6c20 3d20 4661  widen: bool = Fa
-000338c0: 6c73 652c 0d0a 2020 2020 2920 2d3e 2022  lse,..    ) -> "
-000338d0: 4661 7374 4172 7261 7922 3a0d 0a20 2020  FastArray":..   
-000338e0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-000338f0: 2020 436f 6e76 6572 7420 6120 7079 6172    Convert a pyar
-00033900: 726f 7720 6041 7272 6179 6020 746f 2061  row `Array` to a
-00033910: 2072 6970 7461 626c 6520 6046 6173 7441   riptable `FastA
-00033920: 7272 6179 602e 0d0a 0d0a 2020 2020 2020  rray`.....      
-00033930: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00033940: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00033950: 0d0a 2020 2020 2020 2020 6172 7220 3a20  ..        arr : 
-00033960: 7079 6172 726f 772e 4172 7261 7920 6f72  pyarrow.Array or
-00033970: 2070 7961 7272 6f77 2e43 6875 6e6b 6564   pyarrow.Chunked
-00033980: 4172 7261 790d 0a20 2020 2020 2020 207a  Array..        z
-00033990: 6572 6f5f 636f 7079 5f6f 6e6c 7920 3a20  ero_copy_only : 
-000339a0: 626f 6f6c 2c20 6465 6661 756c 7420 5472  bool, default Tr
-000339b0: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
-000339c0: 4966 2054 7275 652c 2061 6e20 6578 6365  If True, an exce
-000339d0: 7074 696f 6e20 7769 6c6c 2062 6520 7261  ption will be ra
-000339e0: 6973 6564 2069 6620 7468 6520 636f 6e76  ised if the conv
-000339f0: 6572 7369 6f6e 2074 6f20 6120 6046 6173  ersion to a `Fas
-00033a00: 7441 7272 6179 6020 776f 756c 6420 7265  tArray` would re
-00033a10: 7175 6972 6520 636f 7079 696e 6720 7468  quire copying th
-00033a20: 650d 0a20 2020 2020 2020 2020 2020 2075  e..            u
-00033a30: 6e64 6572 6c79 696e 6720 6461 7461 2028  nderlying data (
-00033a40: 652e 672e 2069 6e20 7072 6573 656e 6365  e.g. in presence
-00033a50: 206f 6620 6e75 6c6c 732c 206f 7220 666f   of nulls, or fo
-00033a60: 7220 6e6f 6e2d 7072 696d 6974 6976 6520  r non-primitive 
-00033a70: 7479 7065 7329 2e0d 0a20 2020 2020 2020  types)...       
-00033a80: 2077 7269 7461 626c 6520 3a20 626f 6f6c   writable : bool
-00033a90: 2c20 6465 6661 756c 7420 4661 6c73 650d  , default False.
-00033aa0: 0a20 2020 2020 2020 2020 2020 2046 6f72  .            For
-00033ab0: 2061 2060 4661 7374 4172 7261 7960 2063   a `FastArray` c
-00033ac0: 7265 6174 6564 2077 6974 6820 7a65 726f  reated with zero
-00033ad0: 2063 6f70 7920 2876 6965 7720 6f6e 2074   copy (view on t
-00033ae0: 6865 2041 7272 6f77 2064 6174 6129 2c20  he Arrow data), 
-00033af0: 7468 6520 7265 7375 6c74 696e 6720 6172  the resulting ar
-00033b00: 7261 7920 6973 206e 6f74 2077 7269 7461  ray is not writa
-00033b10: 626c 6520 2841 7272 6f77 2064 6174 6120  ble (Arrow data 
-00033b20: 6973 2069 6d6d 7574 6162 6c65 292e 0d0a  is immutable)...
-00033b30: 2020 2020 2020 2020 2020 2020 4279 2073              By s
-00033b40: 6574 7469 6e67 2074 6869 7320 746f 2054  etting this to T
-00033b50: 7275 652c 2061 2063 6f70 7920 6f66 2074  rue, a copy of t
-00033b60: 6865 2061 7272 6179 2069 7320 6d61 6465  he array is made
-00033b70: 2074 6f20 656e 7375 7265 2069 7420 6973   to ensure it is
-00033b80: 2077 7269 7461 626c 652e 0d0a 2020 2020   writable...    
-00033b90: 2020 2020 6175 746f 5f77 6964 656e 203a      auto_widen :
-00033ba0: 2062 6f6f 6c2c 206f 7074 696f 6e61 6c2c   bool, optional,
-00033bb0: 2064 6566 6175 6c74 2074 6f20 4661 6c73   default to Fals
-00033bc0: 650d 0a20 2020 2020 2020 2020 2020 2057  e..            W
-00033bd0: 6865 6e20 4661 6c73 6520 2874 6865 2064  hen False (the d
-00033be0: 6566 6175 6c74 292c 2069 6620 616e 2061  efault), if an a
-00033bf0: 7272 6f77 2061 7272 6179 2063 6f6e 7461  rrow array conta
-00033c00: 696e 7320 6120 7661 6c75 6520 7768 6963  ins a value whic
-00033c10: 6820 776f 756c 6420 6265 2063 6f6e 7369  h would be consi
-00033c20: 6465 7265 640d 0a20 2020 2020 2020 2020  dered..         
-00033c30: 2020 2074 6865 2027 696e 7661 6c69 6427     the 'invalid'
-00033c40: 2f4e 4120 7661 6c75 6520 666f 7220 7468  /NA value for th
-00033c50: 6520 6571 7569 7661 6c65 6e74 2064 7479  e equivalent dty
-00033c60: 7065 2069 6e20 6120 6046 6173 7441 7272  pe in a `FastArr
-00033c70: 6179 602c 2072 6169 7365 2061 6e20 6578  ay`, raise an ex
-00033c80: 6365 7074 696f 6e0d 0a20 2020 2020 2020  ception..       
-00033c90: 2020 2020 2062 6563 6175 7365 2064 6972       because dir
-00033ca0: 6563 7420 636f 6e76 6572 7369 6f6e 2077  ect conversion w
-00033cb0: 6f75 6c64 2062 6520 6c6f 7373 7920 2f20  ould be lossy / 
-00033cc0: 6368 616e 6765 2074 6865 2073 656d 616e  change the seman
-00033cd0: 7469 6320 6d65 616e 696e 6720 6f66 2074  tic meaning of t
-00033ce0: 6865 2064 6174 612e 0d0a 2020 2020 2020  he data...      
-00033cf0: 2020 2020 2020 5768 656e 2054 7275 652c        When True,
-00033d00: 2074 6865 2063 6f6e 7665 7274 6564 2061   the converted a
-00033d10: 7272 6179 2077 696c 6c20 6265 2077 6964  rray will be wid
-00033d20: 656e 6564 2028 6966 2070 6f73 7369 626c  ened (if possibl
-00033d30: 6529 2074 6f20 7468 6520 6e65 7874 2d6c  e) to the next-l
-00033d40: 6172 6765 7374 2064 7479 7065 0d0a 2020  argest dtype..  
-00033d50: 2020 2020 2020 2020 2020 746f 2065 6e73            to ens
-00033d60: 7572 6520 7468 6520 6461 7461 2077 696c  ure the data wil
-00033d70: 6c20 6265 2069 6e74 6572 7072 6574 6564  l be interpreted
-00033d80: 2069 6e20 7468 6520 7361 6d65 2077 6179   in the same way
-00033d90: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
-00033da0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-00033db0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
-00033dc0: 6173 7441 7272 6179 0d0a 2020 2020 2020  astArray..      
-00033dd0: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
-00033de0: 6d70 6f72 7420 7079 6172 726f 7720 6173  mport pyarrow as
-00033df0: 2070 610d 0a20 2020 2020 2020 2069 6d70   pa..        imp
-00033e00: 6f72 7420 7079 6172 726f 772e 636f 6d70  ort pyarrow.comp
-00033e10: 7574 6520 6173 2070 630d 0a20 2020 2020  ute as pc..     
-00033e20: 2020 2069 6d70 6f72 7420 7079 6172 726f     import pyarro
-00033e30: 772e 7479 7065 7320 6173 2070 6174 0d0a  w.types as pat..
-00033e40: 0d0a 2020 2020 2020 2020 2320 4d61 6b65  ..        # Make
-00033e50: 2073 7572 6520 7468 6520 696e 7075 7420   sure the input 
-00033e60: 6172 7261 7920 6973 206f 6e65 206f 6620  array is one of 
-00033e70: 7468 6520 7079 6172 726f 7720 6172 7261  the pyarrow arra
-00033e80: 7920 7479 7065 732e 0d0a 2020 2020 2020  y types...      
-00033e90: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-00033ea0: 6e63 6528 6172 722c 2028 7061 2e41 7272  nce(arr, (pa.Arr
-00033eb0: 6179 2c20 7061 2e43 6875 6e6b 6564 4172  ay, pa.ChunkedAr
-00033ec0: 7261 7929 293a 0d0a 2020 2020 2020 2020  ray)):..        
-00033ed0: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
-00033ee0: 726f 7228 2254 6865 2061 7272 6179 2069  ror("The array i
-00033ef0: 7320 6e6f 7420 616e 2069 6e73 7461 6e63  s not an instanc
-00033f00: 6520 6f66 2060 7079 6172 726f 772e 4172  e of `pyarrow.Ar
-00033f10: 7261 7960 206f 7220 6070 7961 7272 6f77  ray` or `pyarrow
-00033f20: 2e43 6875 6e6b 6564 4172 7261 7960 2e22  .ChunkedArray`."
-00033f30: 290d 0a0d 0a20 2020 2020 2020 2023 2043  )....        # C
-00033f40: 6875 6e6b 6564 4172 7261 7973 206e 6565  hunkedArrays nee
-00033f50: 6420 7370 6563 6961 6c20 6861 6e64 6c69  d special handli
-00033f60: 6e67 2e0d 0a20 2020 2020 2020 2069 6620  ng...        if 
-00033f70: 6973 696e 7374 616e 6365 2861 7272 2c20  isinstance(arr, 
-00033f80: 7061 2e43 6875 6e6b 6564 4172 7261 7929  pa.ChunkedArray)
-00033f90: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00033fa0: 2041 2073 696e 676c 652d 6368 756e 6b20   A single-chunk 
-00033fb0: 4368 756e 6b65 6441 7272 6179 2063 616e  ChunkedArray can
-00033fc0: 2062 6520 6861 6e64 6c65 6420 6279 206a   be handled by j
-00033fd0: 7573 7420 6578 7472 6163 7469 6e67 2074  ust extracting t
-00033fe0: 6861 7420 6368 756e 6b0d 0a20 2020 2020  hat chunk..     
-00033ff0: 2020 2020 2020 2023 2061 6e64 2072 6563         # and rec
-00034000: 7572 7369 7665 6c79 2070 726f 6365 7373  ursively process
-00034010: 696e 6720 6974 2e0d 0a20 2020 2020 2020  ing it...       
-00034020: 2020 2020 2069 6620 6172 722e 6e75 6d5f       if arr.num_
-00034030: 6368 756e 6b73 203d 3d20 313a 0d0a 2020  chunks == 1:..  
-00034040: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00034050: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
-00034060: 6672 6f6d 5f61 7272 6f77 280d 0a20 2020  from_arrow(..   
-00034070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034080: 2061 7272 2e63 6875 6e6b 2830 292c 207a   arr.chunk(0), z
-00034090: 6572 6f5f 636f 7079 5f6f 6e6c 793d 7a65  ero_copy_only=ze
-000340a0: 726f 5f63 6f70 795f 6f6e 6c79 2c20 7772  ro_copy_only, wr
-000340b0: 6974 6162 6c65 3d77 7269 7461 626c 652c  itable=writable,
-000340c0: 2061 7574 6f5f 7769 6465 6e3d 6175 746f   auto_widen=auto
-000340d0: 5f77 6964 656e 0d0a 2020 2020 2020 2020  _widen..        
-000340e0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-000340f0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00034100: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00034110: 544f 444f 3a20 4265 6e63 686d 6172 6b20  TODO: Benchmark 
-00034120: 7468 6973 2076 732e 2075 7369 6e67 2043  this vs. using C
-00034130: 6875 6e6b 6564 4172 7261 792e 636f 6d62  hunkedArray.comb
-00034140: 696e 655f 6368 756e 6b73 2829 2074 6865  ine_chunks() the
-00034150: 6e20 636f 6e76 6572 7469 6e67 2e0d 0a20  n converting... 
-00034160: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00034170: 2054 4f44 4f3a 204c 6f6f 6b20 6174 2060   TODO: Look at `
-00034180: 7a65 726f 5f63 6f70 795f 6f6e 6c79 6020  zero_copy_only` 
-00034190: 616e 6420 6077 7269 7461 626c 6560 202d  and `writable` -
-000341a0: 2d20 7468 6520 636f 6e76 6572 7465 6420  - the converted 
-000341b0: 6172 7261 7973 2063 6f75 6c64 2062 6520  arrays could be 
-000341c0: 6465 7374 726f 7965 6420 7768 696c 6520  destroyed while 
-000341d0: 6873 7461 636b 696e 670d 0a20 2020 2020  hstacking..     
-000341e0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-000341f0: 2020 2073 696e 6365 2077 6520 6b6e 6f77     since we know
-00034200: 2074 6865 7927 6c6c 2068 6176 6520 6a75   they'll have ju
-00034210: 7374 2062 6565 6e20 6372 6561 7465 643b  st been created;
-00034220: 2074 6869 7320 636f 756c 6420 7265 6475   this could redu
-00034230: 6365 2070 6561 6b20 6d65 6d6f 7279 2075  ce peak memory u
-00034240: 7469 6c69 7a61 7469 6f6e 2e0d 0a20 2020  tilization...   
-00034250: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00034260: 7572 6e20 6873 7461 636b 280d 0a20 2020  urn hstack(..   
-00034270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034280: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
-00034290: 2020 2020 2020 2020 2020 2020 4661 7374              Fast
-000342a0: 4172 7261 792e 5f66 726f 6d5f 6172 726f  Array._from_arro
-000342b0: 7728 0d0a 2020 2020 2020 2020 2020 2020  w(..            
-000342c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000342d0: 6172 725f 6368 756e 6b2c 207a 6572 6f5f  arr_chunk, zero_
-000342e0: 636f 7079 5f6f 6e6c 793d 7a65 726f 5f63  copy_only=zero_c
-000342f0: 6f70 795f 6f6e 6c79 2c20 7772 6974 6162  opy_only, writab
-00034300: 6c65 3d77 7269 7461 626c 652c 2061 7574  le=writable, aut
-00034310: 6f5f 7769 6465 6e3d 6175 746f 5f77 6964  o_widen=auto_wid
-00034320: 656e 0d0a 2020 2020 2020 2020 2020 2020  en..            
-00034330: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00034340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034350: 2020 2020 2020 2066 6f72 2061 7272 5f63         for arr_c
-00034360: 6875 6e6b 2069 6e20 6172 722e 6974 6572  hunk in arr.iter
-00034370: 6368 756e 6b73 2829 0d0a 2020 2020 2020  chunks()..      
-00034380: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
-00034390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000343a0: 2029 0d0a 0d0a 2020 2020 2020 2020 2320   )....        # 
-000343b0: 4861 6e64 6c65 2062 6173 6564 206f 6e20  Handle based on 
-000343c0: 7468 6520 7479 7065 206f 6620 7468 6520  the type of the 
-000343d0: 696e 7075 7420 6172 7261 792e 0d0a 2020  input array...  
-000343e0: 2020 2020 2020 6966 2070 6174 2e69 735f        if pat.is_
-000343f0: 696e 7465 6765 7228 6172 722e 7479 7065  integer(arr.type
-00034400: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00034410: 2320 466f 7220 6172 7261 7973 206f 6620  # For arrays of 
-00034420: 7072 696d 6974 6976 6520 7479 7065 732c  primitive types,
-00034430: 2070 612e 4461 7461 5479 7065 2e74 6f5f   pa.DataType.to_
-00034440: 7061 6e64 6173 5f64 7479 7065 2829 2061  pandas_dtype() a
-00034450: 6374 7561 6c6c 7920 7265 7475 726e 7320  ctually returns 
-00034460: 7468 6520 6571 7569 7661 6c65 6e74 206e  the equivalent n
-00034470: 756d 7079 2064 7479 7065 2e0d 0a20 2020  umpy dtype...   
-00034480: 2020 2020 2020 2020 2061 7272 5f64 7479           arr_dty
-00034490: 7065 203d 2061 7272 2e74 7970 652e 746f  pe = arr.type.to
-000344a0: 5f70 616e 6461 735f 6474 7970 6528 290d  _pandas_dtype().
-000344b0: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-000344c0: 2047 6574 2074 6865 2072 6970 7461 626c   Get the riptabl
-000344d0: 6520 696e 7661 6c69 6420 7661 6c75 6520  e invalid value 
-000344e0: 666f 7220 7468 6973 2061 7272 6179 2074  for this array t
-000344f0: 7970 652e 0d0a 2020 2020 2020 2020 2020  ype...          
-00034500: 2020 6172 725f 7274 5f69 6e76 203d 2049    arr_rt_inv = I
-00034510: 4e56 414c 4944 5f44 4943 545b 6e70 2e64  NVALID_DICT[np.d
-00034520: 7479 7065 2861 7272 5f64 7479 7065 292e  type(arr_dtype).
-00034530: 6e75 6d5d 0d0a 0d0a 2020 2020 2020 2020  num]....        
-00034540: 2020 2020 2320 4765 7420 6d69 6e20 616e      # Get min an
-00034550: 6420 6d61 7820 7661 6c75 6520 6f66 2074  d max value of t
-00034560: 6865 2069 6e70 7574 2061 7272 6179 2c20  he input array, 
-00034570: 736f 2077 6520 6b6e 6f77 2069 6620 7765  so we know if we
-00034580: 206e 6565 6420 746f 2070 726f 6d6f 7465   need to promote
-00034590: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000345a0: 746f 2074 6865 206e 6578 742d 6c61 7267  to the next-larg
-000345b0: 6573 7420 6474 7970 6520 746f 2062 6520  est dtype to be 
-000345c0: 6162 6c65 2074 6f20 636f 7272 6563 746c  able to correctl
-000345d0: 7920 7265 7072 6573 656e 7420 6e75 6c6c  y represent null
-000345e0: 732e 0d0a 2020 2020 2020 2020 2020 2020  s...            
-000345f0: 2320 5468 6973 206d 7573 7420 6265 2064  # This must be d
-00034600: 6f6e 6520 6576 656e 2069 6620 7468 6520  one even if the 
-00034610: 696e 7075 7420 6172 7261 7920 6861 7320  input array has 
-00034620: 6e6f 206e 756c 6c73 2c20 6265 6361 7573  no nulls, becaus
-00034630: 6520 6f74 6865 7277 6973 6520 7468 6520  e otherwise the 
-00034640: 6e6f 6e2d 6e75 6c6c 0d0a 2020 2020 2020  non-null..      
-00034650: 2020 2020 2020 2320 7661 6c75 6573 2069        # values i
-00034660: 6e20 7468 6520 696e 7075 7420 636f 7272  n the input corr
-00034670: 6573 706f 6e64 696e 6720 746f 2072 6970  esponding to rip
-00034680: 7461 626c 6520 696e 7465 6765 7220 696e  table integer in
-00034690: 7661 6c69 6473 2077 6f75 6c64 2074 6865  valids would the
-000346a0: 6e20 6265 2072 6563 6f67 6e69 7a65 640d  n be recognized.
-000346b0: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
-000346c0: 7320 7375 6368 2061 6674 6572 2063 6f6e  s such after con
-000346d0: 7665 7273 696f 6e2e 0d0a 2020 2020 2020  version...      
-000346e0: 2020 2020 2020 6d69 6e5f 6d61 785f 7265        min_max_re
-000346f0: 7375 6c74 3a20 7061 2e53 7472 7563 7453  sult: pa.StructS
-00034700: 6361 6c61 7220 3d20 7063 2e6d 696e 5f6d  calar = pc.min_m
-00034710: 6178 2861 7272 290d 0a20 2020 2020 2020  ax(arr)..       
-00034720: 2020 2020 206d 696e 5f76 616c 7565 203d       min_value =
-00034730: 206d 696e 5f6d 6178 5f72 6573 756c 745b   min_max_result[
-00034740: 226d 696e 225d 0d0a 2020 2020 2020 2020  "min"]..        
-00034750: 2020 2020 6d61 785f 7661 6c75 6520 3d20      max_value = 
-00034760: 6d69 6e5f 6d61 785f 7265 7375 6c74 5b22  min_max_result["
-00034770: 6d61 7822 5d0d 0a0d 0a20 2020 2020 2020  max"]....       
-00034780: 2020 2020 2061 7272 5f70 615f 6474 7970       arr_pa_dtyp
-00034790: 655f 7769 6465 6e65 643a 204f 7074 696f  e_widened: Optio
-000347a0: 6e61 6c5b 7061 2e44 6174 6154 7970 655d  nal[pa.DataType]
-000347b0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-000347c0: 2020 2020 2069 6620 6d69 6e5f 7661 6c75       if min_valu
-000347d0: 6520 3d3d 2061 7272 5f72 745f 696e 7620  e == arr_rt_inv 
-000347e0: 6f72 206d 6178 5f76 616c 7565 203d 3d20  or max_value == 
-000347f0: 6172 725f 7274 5f69 6e76 3a0d 0a20 2020  arr_rt_inv:..   
-00034800: 2020 2020 2020 2020 2020 2020 2023 2049               # I
-00034810: 6620 7468 6520 696e 7075 7420 6172 7261  f the input arra
-00034820: 7920 686f 6c64 7320 3634 2d62 6974 2069  y holds 64-bit i
-00034830: 6e74 6567 6572 7320 2873 6967 6e65 6420  ntegers (signed 
-00034840: 6f72 2075 6e73 6967 6e65 6429 2c20 7765  or unsigned), we
-00034850: 2063 616e 2774 2064 6f20 6120 6c6f 7373   can't do a loss
-00034860: 6c65 7373 2063 6f6e 7665 7273 696f 6e2c  less conversion,
-00034870: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00034880: 2020 2320 7369 6e63 6520 7468 6572 6520    # since there 
-00034890: 6973 206e 6f20 7769 6465 7220 696e 7465  is no wider inte
-000348a0: 6765 7220 6176 6169 6c61 626c 652e 0d0a  ger available...
-000348b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000348c0: 6966 207a 6572 6f5f 636f 7079 5f6f 6e6c  if zero_copy_onl
-000348d0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-000348e0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-000348f0: 6c75 6545 7272 6f72 280d 0a20 2020 2020  lueError(..     
-00034900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034910: 2020 2022 4361 6e6e 6f74 2070 6572 666f     "Cannot perfo
-00034920: 726d 2061 207a 6572 6f2d 636f 7079 2063  rm a zero-copy c
-00034930: 6f6e 7665 7273 696f 6e20 6f66 2061 6e20  onversion of an 
-00034940: 6172 726f 7720 6172 7261 7920 636f 6e74  arrow array cont
-00034950: 6169 6e69 6e67 2074 6865 2072 6970 7461  aining the ripta
-00034960: 626c 6520 696e 7661 6c69 6420 7661 6c75  ble invalid valu
-00034970: 6520 666f 7220 7468 6520 6172 7261 7920  e for the array 
-00034980: 6474 7970 652e 220d 0a20 2020 2020 2020  dtype."..       
-00034990: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-000349a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000349b0: 656c 6966 2061 7272 5f64 7479 7065 2e69  elif arr_dtype.i
-000349c0: 7465 6d73 697a 6520 3d3d 2038 3a0d 0a20  temsize == 8:.. 
-000349d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000349e0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-000349f0: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
-00034a00: 2020 2020 2020 2020 2020 2020 2020 2243                "C
-00034a10: 616e 6e6f 7420 6c6f 7373 6c65 7373 6c79  annot losslessly
-00034a20: 2063 6f6e 7665 7274 2061 6e20 6172 726f   convert an arro
-00034a30: 7720 6172 7261 7920 6f66 2028 7529 696e  w array of (u)in
-00034a40: 7436 3420 636f 6e74 6169 6e69 6e67 2074  t64 containing t
-00034a50: 6865 2072 6970 7461 626c 6520 696e 7661  he riptable inva
-00034a60: 6c69 6420 7661 6c75 6520 746f 2061 2072  lid value to a r
-00034a70: 6970 7461 626c 6520 6172 7261 792e 220d  iptable array.".
-00034a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00034a90: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00034aa0: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
-00034ab0: 2061 7574 6f5f 7769 6465 6e3a 0d0a 2020   auto_widen:..  
-00034ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034ad0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00034ae0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-00034af0: 2020 2020 2020 2020 2020 2020 2022 496e               "In
-00034b00: 7075 7420 6172 7261 7920 7265 7175 6972  put array requir
-00034b10: 6573 2077 6964 656e 696e 6720 666f 7220  es widening for 
-00034b20: 6c6f 7373 6c65 7373 2063 6f6e 7665 7273  lossless convers
-00034b30: 696f 6e2e 2053 7065 6369 6679 2061 7574  ion. Specify aut
-00034b40: 6f5f 7769 6465 6e3d 5472 7565 2069 6620  o_widen=True if 
-00034b50: 796f 7520 7761 6e74 2074 6f20 616c 6c6f  you want to allo
-00034b60: 7720 7468 6520 7769 6465 6e69 6e67 2063  w the widening c
-00034b70: 6f6e 7665 7273 696f 6e20 2877 6869 6368  onversion (which
-00034b80: 2072 6571 7569 7265 7320 616e 2061 7272   requires an arr
-00034b90: 6179 2063 6f70 7929 2e22 0d0a 2020 2020  ay copy)."..    
-00034ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034bb0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00034bc0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00034bd0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00034be0: 5769 6465 6e20 7468 6520 6474 7970 6520  Widen the dtype 
-00034bf0: 6f66 2074 6865 206f 7574 7075 7420 6172  of the output ar
-00034c00: 7261 792e 0d0a 2020 2020 2020 2020 2020  ray...          
-00034c10: 2020 2020 2020 2020 2020 6f75 7470 7574            output
-00034c20: 5f64 7479 7065 203d 206e 702e 6d69 6e5f  _dtype = np.min_
-00034c30: 7363 616c 6172 5f74 7970 6528 3220 2a20  scalar_type(2 * 
-00034c40: 6172 725f 7274 5f69 6e76 290d 0a20 2020  arr_rt_inv)..   
-00034c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034c60: 2061 7272 5f70 615f 6474 7970 655f 7769   arr_pa_dtype_wi
-00034c70: 6465 6e65 6420 3d20 7061 2e66 726f 6d5f  dened = pa.from_
-00034c80: 6e75 6d70 795f 6474 7970 6528 6f75 7470  numpy_dtype(outp
-00034c90: 7574 5f64 7479 7065 290d 0a0d 0a20 2020  ut_dtype)....   
-00034ca0: 2020 2020 2020 2020 2023 2043 7265 6174           # Creat
-00034cb0: 6520 7468 6520 6f75 7470 7574 2061 7272  e the output arr
-00034cc0: 6179 2c20 7065 7266 6f72 6d69 6e67 2061  ay, performing a
-00034cd0: 2077 6964 656e 696e 6720 636f 6e76 6572   widening conver
-00034ce0: 7369 6f6e 202b 2066 696c 6c69 6e67 2069  sion + filling i
-00034cf0: 6e20 6e75 6c6c 7320 7769 7468 2074 6865  n nulls with the
-00034d00: 2072 6970 7461 626c 6520 696e 7661 6c69   riptable invali
-00034d10: 6420 6966 206e 6563 6573 7361 7279 2e0d  d if necessary..
-00034d20: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00034d30: 4f44 4f3a 2054 6869 7320 636f 756c 6420  ODO: This could 
-00034d40: 6265 2066 6173 7465 7220 2d2d 2069 6620  be faster -- if 
-00034d50: 7468 6572 6527 7320 6120 7761 7920 746f  there's a way to
-00034d60: 2067 6574 2061 206e 756d 7079 2062 6f6f   get a numpy boo
-00034d70: 6c65 616e 2061 7272 6179 2066 726f 6d20  lean array from 
-00034d80: 6120 7079 6172 726f 7720 6172 7261 7927  a pyarrow array'
-00034d90: 7320 6e75 6c6c 2d6d 6173 6b2c 0d0a 2020  s null-mask,..  
-00034da0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00034db0: 2020 7765 2063 616e 2063 6f6e 7665 7274    we can convert
-00034dc0: 2064 6972 6563 746c 7920 746f 206e 756d   directly to num
-00034dd0: 7079 2f72 6970 7461 626c 653b 2074 6865  py/riptable; the
-00034de0: 6e2c 2077 6964 656e 2074 6865 2046 6173  n, widen the Fas
-00034df0: 7441 7272 6179 2028 7768 6963 6827 6c6c  tArray (which'll
-00034e00: 2062 6520 7061 7261 6c6c 656c 697a 6564   be parallelized
-00034e10: 293b 0d0a 2020 2020 2020 2020 2020 2020  );..            
-00034e20: 2320 2020 2020 2020 7468 656e 2075 7365  #       then use
-00034e30: 2072 742e 636f 7079 5f74 6f28 2920 2f20   rt.copy_to() / 
-00034e40: 7274 2e70 7574 6d61 736b 2829 2074 6f20  rt.putmask() to 
-00034e50: 6f76 6572 7772 6974 6520 7468 6520 656c  overwrite the el
-00034e60: 656d 656e 7473 206f 6620 7468 6520 7769  ements of the wi
-00034e70: 6465 6e65 6420 4661 7374 4172 7261 790d  dened FastArray.
-00034e80: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00034e90: 2020 2020 2063 6f72 7265 7370 6f6e 6469       correspondi
-00034ea0: 6e67 2074 6f20 7468 6520 6e75 6c6c 7320  ng to the nulls 
-00034eb0: 6672 6f6d 2074 6865 206d 6173 6b20 7769  from the mask wi
-00034ec0: 7468 2074 6865 2072 6970 7461 626c 6520  th the riptable 
-00034ed0: 696e 7661 6c69 6420 7661 6c75 6520 666f  invalid value fo
-00034ee0: 7220 7468 6520 6f75 7470 7574 2061 7272  r the output arr
-00034ef0: 6179 2074 7970 652e 0d0a 2020 2020 2020  ay type...      
-00034f00: 2020 2020 2020 6966 2061 7272 5f70 615f        if arr_pa_
-00034f10: 6474 7970 655f 7769 6465 6e65 6420 6973  dtype_widened is
-00034f20: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-00034f30: 2020 2020 2020 2020 2020 2020 6172 723a              arr:
-00034f40: 2070 612e 4172 7261 7920 3d20 6172 722e   pa.Array = arr.
-00034f50: 6361 7374 2861 7272 5f70 615f 6474 7970  cast(arr_pa_dtyp
-00034f60: 655f 7769 6465 6e65 6429 0d0a 0d0a 2020  e_widened)....  
-00034f70: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00034f80: 2061 7272 2e66 696c 6c5f 6e75 6c6c 2861   arr.fill_null(a
-00034f90: 7272 5f72 745f 696e 7629 2e74 6f5f 6e75  rr_rt_inv).to_nu
-00034fa0: 6d70 7928 7a65 726f 5f63 6f70 795f 6f6e  mpy(zero_copy_on
-00034fb0: 6c79 3d46 616c 7365 2c20 7772 6974 6162  ly=False, writab
-00034fc0: 6c65 3d77 7269 7461 626c 6529 2e76 6965  le=writable).vie
-00034fd0: 7728 4661 7374 4172 7261 7929 0d0a 0d0a  w(FastArray)....
-00034fe0: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
-00034ff0: 2e69 735f 666c 6f61 7469 6e67 2861 7272  .is_floating(arr
-00035000: 2e74 7970 6529 3a0d 0a20 2020 2020 2020  .type):..       
-00035010: 2020 2020 2023 2046 6c6f 6174 696e 672d       # Floating-
-00035020: 706f 696e 7420 6172 7261 7973 2063 616e  point arrays can
-00035030: 2062 6520 636f 6e76 6572 7465 6420 6469   be converted di
-00035040: 7265 6374 6c79 2074 6f20 6e75 6d70 792c  rectly to numpy,
-00035050: 2073 696e 6365 2070 7961 7272 6f77 2077   since pyarrow w
-00035060: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
-00035070: 790d 0a20 2020 2020 2020 2020 2020 2023  y..            #
-00035080: 2066 696c 6c20 6e75 6c6c 2076 616c 7565   fill null value
-00035090: 7320 7769 7468 204e 614e 2e0d 0a20 2020  s with NaN...   
-000350a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000350b0: 6172 722e 746f 5f6e 756d 7079 287a 6572  arr.to_numpy(zer
-000350c0: 6f5f 636f 7079 5f6f 6e6c 793d 7a65 726f  o_copy_only=zero
-000350d0: 5f63 6f70 795f 6f6e 6c79 2c20 7772 6974  _copy_only, writ
-000350e0: 6162 6c65 3d77 7269 7461 626c 6529 2e76  able=writable).v
-000350f0: 6965 7728 4661 7374 4172 7261 7929 0d0a  iew(FastArray)..
-00035100: 0d0a 2020 2020 2020 2020 656c 6966 2070  ..        elif p
-00035110: 6174 2e69 735f 626f 6f6c 6561 6e28 6172  at.is_boolean(ar
-00035120: 722e 7479 7065 293a 0d0a 2020 2020 2020  r.type):..      
-00035130: 2020 2020 2020 2320 426f 6f6c 6561 6e20        # Boolean 
-00035140: 6172 7261 7973 2063 616e 206f 6e6c 7920  arrays can only 
-00035150: 6265 2063 6f6e 7665 7274 6564 2077 6865  be converted whe
-00035160: 6e20 7468 6579 2064 6f20 6e6f 7420 636f  n they do not co
-00035170: 6e74 6169 6e20 6e75 6c6c 732e 0d0a 2020  ntain nulls...  
-00035180: 2020 2020 2020 2020 2020 2320 7269 7074            # ript
-00035190: 6162 6c65 2064 6f65 7320 6e6f 7420 7375  able does not su
-000351a0: 7070 6f72 7420 616e 2027 696e 7661 6c69  pport an 'invali
-000351b0: 6427 2f4e 4120 7661 6c75 6520 666f 7220  d'/NA value for 
-000351c0: 626f 6f6c 6561 6e2c 2073 6f20 7079 6172  boolean, so pyar
-000351d0: 726f 7720 6172 7261 7973 0d0a 2020 2020  row arrays..    
-000351e0: 2020 2020 2020 2020 2320 7769 7468 206e          # with n
-000351f0: 756c 6c73 2063 616e 2774 2062 6520 7265  ulls can't be re
-00035200: 7072 6573 656e 7465 6420 696e 2072 6970  presented in rip
-00035210: 7461 626c 652e 0d0a 2020 2020 2020 2020  table...        
-00035220: 2020 2020 6966 2061 7272 2e6e 756c 6c5f      if arr.null_
-00035230: 636f 756e 7420 3d3d 2030 3a0d 0a20 2020  count == 0:..   
-00035240: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00035250: 7572 6e20 6172 722e 746f 5f6e 756d 7079  urn arr.to_numpy
-00035260: 287a 6572 6f5f 636f 7079 5f6f 6e6c 793d  (zero_copy_only=
-00035270: 7a65 726f 5f63 6f70 795f 6f6e 6c79 2c20  zero_copy_only, 
-00035280: 7772 6974 6162 6c65 3d77 7269 7461 626c  writable=writabl
-00035290: 6529 2e76 6965 7728 4661 7374 4172 7261  e).view(FastArra
-000352a0: 7929 0d0a 2020 2020 2020 2020 2020 2020  y)..            
-000352b0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000352c0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-000352d0: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
-000352e0: 2020 2020 2020 2020 2020 2020 2020 2272                "r
-000352f0: 6970 7461 626c 6520 626f 6f6c 6561 6e20  iptable boolean 
-00035300: 6172 7261 7973 2064 6f20 6e6f 7420 7375  arrays do not su
-00035310: 7070 6f72 7420 616e 2069 6e76 616c 6964  pport an invalid
-00035320: 2076 616c 7565 2c20 736f 2074 6865 7920   value, so they 
-00035330: 6361 6e6e 6f74 2062 6520 6372 6561 7465  cannot be create
-00035340: 6420 6672 6f6d 2070 7961 7272 6f77 2061  d from pyarrow a
-00035350: 7272 6179 7320 636f 6e74 6169 6e69 6e67  rrays containing
-00035360: 206e 756c 6c73 2e22 0d0a 2020 2020 2020   nulls."..      
-00035370: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-00035380: 2020 2020 2020 2065 6c69 6620 7061 742e         elif pat.
-00035390: 6973 5f73 7472 696e 6728 6172 722e 7479  is_string(arr.ty
-000353a0: 7065 2920 6f72 2070 6174 2e69 735f 6c61  pe) or pat.is_la
-000353b0: 7267 655f 7374 7269 6e67 2861 7272 2e74  rge_string(arr.t
-000353c0: 7970 6529 3a0d 0a20 2020 2020 2020 2020  ype):..         
-000353d0: 2020 2023 2070 7961 7272 6f77 2076 6172     # pyarrow var
-000353e0: 6961 626c 652d 6c65 6e67 7468 2073 7472  iable-length str
-000353f0: 696e 6720 6172 7261 7973 2063 616e 205f  ing arrays can _
-00035400: 6e65 7665 725f 2062 6520 7a65 726f 2d63  never_ be zero-c
-00035410: 6f70 7920 636f 6e76 6572 7465 6420 746f  opy converted to
-00035420: 2066 6978 6564 2d6c 656e 6774 6820 6e75   fixed-length nu
-00035430: 6d70 792f 7269 7074 6162 6c65 2061 7272  mpy/riptable arr
-00035440: 6179 730d 0a20 2020 2020 2020 2020 2020  ays..           
-00035450: 2023 2062 6563 6175 7365 206f 6620 6469   # because of di
-00035460: 6666 6572 656e 6365 7320 696e 2074 6865  fferences in the
-00035470: 206d 656d 6f72 7920 6c61 796f 7574 2e0d   memory layout..
-00035480: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00035490: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3a0d  zero_copy_only:.
-000354a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000354b0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-000354c0: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-000354d0: 2020 2020 2020 2020 2270 7961 7272 6f77          "pyarrow
-000354e0: 2076 6172 6961 626c 652d 6c65 6e67 7468   variable-length
-000354f0: 2073 7472 696e 6720 6172 7261 7973 2063   string arrays c
-00035500: 616e 6e6f 7420 6265 207a 6572 6f2d 636f  annot be zero-co
-00035510: 7079 2063 6f6e 7665 7274 6564 2074 6f20  py converted to 
-00035520: 7269 7074 6162 6c65 2061 7272 6179 732e  riptable arrays.
-00035530: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-00035540: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
-00035550: 2020 2020 2320 4368 6563 6b20 666f 7220      # Check for 
-00035560: 7768 6574 6865 7220 7468 6520 6172 7261  whether the arra
-00035570: 7920 636f 6e74 6169 6e73 206f 6e6c 7920  y contains only 
-00035580: 4153 4349 4920 7374 7269 6e67 732e 0d0a  ASCII strings...
-00035590: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-000355a0: 6973 2069 7320 7573 6564 2074 6f20 6775  is is used to gu
-000355b0: 6964 6520 686f 7720 7468 6520 4661 7374  ide how the Fast
-000355c0: 4172 7261 7920 6973 2063 7265 6174 6564  Array is created
-000355d0: 2e0d 0a20 2020 2020 2020 2020 2020 2068  ...            h
-000355e0: 6173 5f75 6e69 636f 6465 203d 206e 6f74  as_unicode = not
-000355f0: 2070 632e 616c 6c28 7063 2e73 7472 696e   pc.all(pc.strin
-00035600: 675f 6973 5f61 7363 6969 2861 7272 2929  g_is_ascii(arr))
-00035610: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00035620: 2320 436f 6e76 6572 7420 7468 6520 6172  # Convert the ar
-00035630: 7261 7920 746f 2061 206e 756d 7079 2061  ray to a numpy a
-00035640: 7272 6179 2e0d 0a20 2020 2020 2020 2020  rray...         
-00035650: 2020 2023 2055 6e66 6f72 7475 6e61 7465     # Unfortunate
-00035660: 6c79 2c20 6173 206f 6620 7079 6172 726f  ly, as of pyarro
-00035670: 7720 342e 302c 2074 6869 7320 636f 6e76  w 4.0, this conv
-00035680: 6572 7369 6f6e 2061 6c77 6179 7320 7072  ersion always pr
-00035690: 6f64 7563 6573 2061 206e 756d 7079 206f  oduces a numpy o
-000356a0: 626a 6563 7420 6172 7261 7920 636f 6e74  bject array cont
-000356b0: 6169 6e69 6e67 2074 6865 0d0a 2020 2020  aining the..    
-000356c0: 2020 2020 2020 2020 2320 7374 7269 6e67          # string
-000356d0: 7320 2861 7320 5079 7468 6f6e 2073 7472  s (as Python str
-000356e0: 696e 6773 2920 7261 7468 6572 2074 6861  ings) rather tha
-000356f0: 6e20 6120 6e75 6d70 7920 7374 7269 6e67  n a numpy string
-00035700: 2061 7272 6179 2e0d 0a20 2020 2020 2020   array...       
-00035710: 2020 2020 2023 2057 6527 7265 2061 626c       # We're abl
-00035720: 6520 746f 2068 616e 646c 6520 7468 6973  e to handle this
-00035730: 2074 6f20 7265 7475 726e 2074 6865 2073   to return the s
-00035740: 656e 7369 626c 6520 7468 696e 6720 666f  ensible thing fo
-00035750: 7220 7269 7074 6162 6c65 2075 7365 7273  r riptable users
-00035760: 2c20 6275 7420 6974 2064 6f65 7320 6d65  , but it does me
-00035770: 616e 2074 6869 7320 636f 6e76 6572 7369  an this conversi
-00035780: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
-00035790: 2320 6973 2073 6c6f 7765 7220 7468 616e  # is slower than
-000357a0: 206e 6563 6573 7361 7279 2072 6967 6874   necessary right
-000357b0: 206e 6f77 2e0d 0a20 2020 2020 2020 2020   now...         
-000357c0: 2020 2023 2054 4f44 4f3a 2041 736b 2070     # TODO: Ask p
-000357d0: 7961 7272 6f77 2d64 6576 2061 626f 7574  yarrow-dev about
-000357e0: 2069 6d70 6c65 6d65 6e74 696e 6720 616e   implementing an
-000357f0: 206f 7074 696f 6e20 746f 2072 6574 7572   option to retur
-00035800: 6e20 6120 6e75 6d70 7920 2753 2720 6f72  n a numpy 'S' or
-00035810: 2027 5527 2061 7272 6179 2069 6e73 7465   'U' array inste
-00035820: 6164 2c20 6974 276c 6c20 6265 0d0a 2020  ad, it'll be..  
-00035830: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00035840: 2020 6d75 6368 206d 6f72 6520 6566 6669    much more effi
-00035850: 6369 656e 742c 2065 7665 6e20 7468 6f75  cient, even thou
-00035860: 6768 2073 6f6d 6520 7370 6163 6520 7769  gh some space wi
-00035870: 6c6c 2062 6520 7761 7374 6564 2064 7565  ll be wasted due
-00035880: 2074 6f20 6e75 6d70 7920 6e6f 7420 7375   to numpy not su
-00035890: 7070 6f72 7469 6e67 2076 6172 6961 626c  pporting variabl
-000358a0: 652d 6c65 6e67 7468 2073 7472 696e 6773  e-length strings
-000358b0: 2e0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-000358c0: 2054 4f44 4f3a 2043 6f6e 7369 6465 7220   TODO: Consider 
-000358d0: 636f 6e76 6572 7469 6e67 2074 6865 2070  converting the p
-000358e0: 7961 7272 6f77 2061 7272 6179 2074 6f20  yarrow array to 
-000358f0: 6120 6469 6374 696f 6e61 7279 2d65 6e63  a dictionary-enc
-00035900: 6f64 6564 2061 7272 6179 202d 2d20 6966  oded array -- if
-00035910: 2074 6865 7265 2061 7265 206f 6e6c 7920   there are only 
-00035920: 6120 6665 7720 756e 6971 7565 732c 0d0a  a few uniques,..
-00035930: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00035940: 2020 2020 6974 276c 6c20 6265 206d 6f72      it'll be mor
-00035950: 6520 6566 6669 6369 656e 7420 2865 7665  e efficient (eve
-00035960: 6e20 7468 6f75 6768 2064 6f69 6e67 206d  n though doing m
-00035970: 6f72 6520 776f 726b 2920 6279 2061 766f  ore work) by avo
-00035980: 6964 696e 6720 7265 7065 7469 7469 7665  iding repetitive
-00035990: 2063 7265 6174 696f 6e20 6f66 2074 6865   creation of the
-000359a0: 2050 7974 686f 6e20 7374 7269 6e67 206f   Python string o
-000359b0: 626a 6563 7473 2e0d 0a20 2020 2020 2020  bjects...       
-000359c0: 2020 2020 2069 6620 6172 722e 6e75 6c6c       if arr.null
-000359d0: 5f63 6f75 6e74 203d 3d20 303a 0d0a 2020  _count == 0:..  
-000359e0: 2020 2020 2020 2020 2020 2020 2020 746d                tm
-000359f0: 7020 3d20 6172 722e 746f 5f6e 756d 7079  p = arr.to_numpy
-00035a00: 287a 6572 6f5f 636f 7079 5f6f 6e6c 793d  (zero_copy_only=
-00035a10: 4661 6c73 652c 2077 7269 7461 626c 653d  False, writable=
-00035a20: 7772 6974 6162 6c65 290d 0a0d 0a20 2020  writable)....   
-00035a30: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00035a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035a50: 2320 4e65 6564 2074 6f20 6669 6c6c 206e  # Need to fill n
-00035a60: 756c 6c73 2077 6974 6820 616e 2065 6d70  ulls with an emp
-00035a70: 7479 2073 7472 696e 6720 6265 666f 7265  ty string before
-00035a80: 2063 6f6e 7665 7274 696e 6720 746f 206e   converting to n
-00035a90: 756d 7079 2e0d 0a20 2020 2020 2020 2020  umpy...         
-00035aa0: 2020 2020 2020 2023 2028 494e 5641 4c49         # (INVALI
-00035ab0: 445f 4449 4354 5b6e 702e 6474 7970 6528  D_DICT[np.dtype(
-00035ac0: 2755 2729 2e6e 756d 5d20 3d3d 2027 2729  'U').num] == '')
-00035ad0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00035ae0: 2020 2074 6d70 203d 2061 7272 2e66 696c     tmp = arr.fil
-00035af0: 6c5f 6e75 6c6c 2822 2229 2e74 6f5f 6e75  l_null("").to_nu
-00035b00: 6d70 7928 7a65 726f 5f63 6f70 795f 6f6e  mpy(zero_copy_on
-00035b10: 6c79 3d46 616c 7365 2c20 7772 6974 6162  ly=False, writab
-00035b20: 6c65 3d77 7269 7461 626c 6529 0d0a 0d0a  le=writable)....
-00035b30: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00035b40: 6c74 203d 2046 6173 7441 7272 6179 2874  lt = FastArray(t
-00035b50: 6d70 2c20 6474 7970 653d 7374 722c 2075  mp, dtype=str, u
-00035b60: 6e69 636f 6465 3d68 6173 5f75 6e69 636f  nicode=has_unico
-00035b70: 6465 290d 0a20 2020 2020 2020 2020 2020  de)..           
-00035b80: 2069 6620 6e6f 7420 7772 6974 6162 6c65   if not writable
-00035b90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00035ba0: 2020 2072 6573 756c 742e 666c 6167 732e     result.flags.
-00035bb0: 7772 6974 6561 626c 6520 3d20 4661 6c73  writeable = Fals
-00035bc0: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-00035bd0: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
-00035be0: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
-00035bf0: 2e69 735f 6669 7865 645f 7369 7a65 5f62  .is_fixed_size_b
-00035c00: 696e 6172 7928 6172 722e 7479 7065 293a  inary(arr.type):
-00035c10: 0d0a 2020 2020 2020 2020 2020 2020 6e75  ..            nu
-00035c20: 6c6c 5f63 6f75 6e74 203d 2061 7272 2e6e  ll_count = arr.n
-00035c30: 756c 6c5f 636f 756e 740d 0a20 2020 2020  ull_count..     
-00035c40: 2020 2020 2020 2069 6620 6e75 6c6c 5f63         if null_c
-00035c50: 6f75 6e74 2021 3d20 303a 0d0a 2020 2020  ount != 0:..    
-00035c60: 2020 2020 2020 2020 2020 2020 6966 207a              if z
-00035c70: 6572 6f5f 636f 7079 5f6f 6e6c 793a 0d0a  ero_copy_only:..
-00035c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035c90: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-00035ca0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
-00035cb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00035cc0: 4361 6e27 7420 7065 7266 6f72 6d20 6120  Can't perform a 
-00035cd0: 7a65 726f 2d63 6f70 7920 636f 6e76 6572  zero-copy conver
-00035ce0: 7369 6f6e 206f 6620 6120 6669 7865 642d  sion of a fixed-
-00035cf0: 7369 7a65 2062 696e 6172 7920 6172 7261  size binary arra
-00035d00: 7920 746f 2072 6970 7461 626c 6520 7768  y to riptable wh
-00035d10: 656e 2074 6865 2069 6e70 7574 2061 7272  en the input arr
-00035d20: 6179 2063 6f6e 7461 696e 7320 6e75 6c6c  ay contains null
-00035d30: 732e 220d 0a20 2020 2020 2020 2020 2020  s."..           
-00035d40: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
-00035d50: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-00035d60: 7220 3d20 6172 722e 6669 6c6c 5f6e 756c  r = arr.fill_nul
-00035d70: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
-00035d80: 2020 2020 2020 2020 6222 5c78 3030 2220          b"\x00" 
-00035d90: 2a20 6172 722e 7479 7065 2e62 7974 655f  * arr.type.byte_
-00035da0: 7769 6474 680d 0a20 2020 2020 2020 2020  width..         
-00035db0: 2020 2020 2020 2029 2020 2320 6361 6e27         )  # can'
-00035dc0: 7420 6669 6c6c 2077 6974 6820 6222 222c  t fill with b"",
-00035dd0: 2073 696e 6365 2062 2222 2069 7320 6e6f   since b"" is no
-00035de0: 7420 7661 6c69 6420 666f 7220 6669 7865  t valid for fixe
-00035df0: 6420 7769 6474 6820 7479 7065 0d0a 0d0a  d width type....
-00035e00: 2020 2020 2020 2020 2020 2020 2320 4361              # Ca
-00035e10: 6c6c 696e 6720 7061 2e41 7272 6179 2e74  lling pa.Array.t
-00035e20: 6f5f 6e75 6d70 7920 7769 7468 207a 6572  o_numpy with zer
-00035e30: 6f5f 636f 7079 3d54 7275 6520 7261 6973  o_copy=True rais
-00035e40: 6573 2061 6e20 6572 726f 7220 7769 7468  es an error with
-00035e50: 2066 6978 6564 2073 697a 6564 2062 696e   fixed sized bin
-00035e60: 6172 7920 7479 7065 2e0d 0a20 2020 2020  ary type...     
-00035e70: 2020 2020 2020 2023 2043 616c 6c69 6e67         # Calling
-00035e80: 2070 612e 4172 7261 792e 746f 5f6e 756d   pa.Array.to_num
-00035e90: 7079 2077 6974 6820 7a65 726f 5f63 6f70  py with zero_cop
-00035ea0: 793d 4661 6c73 6520 7265 7475 726e 7320  y=False returns 
-00035eb0: 6120 6e75 6d70 7920 6172 7261 7920 7768  a numpy array wh
-00035ec0: 6572 6520 7479 7065 7320 6172 6520 7079  ere types are py
-00035ed0: 7468 6f6e 2062 7974 6573 206f 626a 6563  thon bytes objec
-00035ee0: 7473 2e0d 0a20 2020 2020 2020 2020 2020  ts...           
-00035ef0: 2023 2057 6f72 6b61 726f 756e 6420 6265   # Workaround be
-00035f00: 6c6f 7720 6372 6561 7465 7320 7468 6520  low creates the 
-00035f10: 6e75 6d70 7920 6275 6666 6572 206f 6620  numpy buffer of 
-00035f20: 7479 7065 2022 5322 206d 616e 7561 6c6c  type "S" manuall
-00035f30: 792e 0d0a 2020 2020 2020 2020 2020 2020  y...            
-00035f40: 6275 6620 3d20 6e70 2e66 726f 6d62 7566  buf = np.frombuf
-00035f50: 6665 7228 0d0a 2020 2020 2020 2020 2020  fer(..          
-00035f60: 2020 2020 2020 6172 722e 6275 6666 6572        arr.buffer
-00035f70: 7328 295b 315d 2c0d 0a20 2020 2020 2020  s()[1],..       
-00035f80: 2020 2020 2020 2020 2064 7479 7065 3d22           dtype="
-00035f90: 5322 202b 2073 7472 2861 7272 2e74 7970  S" + str(arr.typ
-00035fa0: 652e 6279 7465 5f77 6964 7468 292c 0d0a  e.byte_width),..
-00035fb0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-00035fc0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00035fd0: 7772 6974 6162 6c65 2061 6e64 206e 756c  writable and nul
-00035fe0: 6c5f 636f 756e 7420 3d3d 2030 3a20 2023  l_count == 0:  #
-00035ff0: 2061 6c72 6561 6479 206d 6164 6520 6120   already made a 
-00036000: 636f 7079 2069 6620 6e75 6c6c 5f63 6f75  copy if null_cou
-00036010: 6e74 2021 3d20 300d 0a20 2020 2020 2020  nt != 0..       
-00036020: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-00036030: 3d20 4661 7374 4172 7261 7928 6e70 2e63  = FastArray(np.c
-00036040: 6f70 7928 6275 6629 290d 0a20 2020 2020  opy(buf))..     
-00036050: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00036060: 742e 666c 6167 732e 7772 6974 6561 626c  t.flags.writeabl
-00036070: 6520 3d20 7772 6974 6162 6c65 0d0a 2020  e = writable..  
-00036080: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00036090: 7475 726e 2072 6573 756c 740d 0a0d 0a20  turn result.... 
-000360a0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-000360b0: 7420 3d20 4661 7374 4172 7261 7928 6275  t = FastArray(bu
-000360c0: 6629 0d0a 2020 2020 2020 2020 2020 2020  f)..            
-000360d0: 7265 7375 6c74 2e66 6c61 6773 2e77 7269  result.flags.wri
-000360e0: 7465 6162 6c65 203d 2077 7269 7461 626c  teable = writabl
-000360f0: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-00036100: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
-00036110: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00036120: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00036130: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
-00036140: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-00036150: 4661 7374 4172 7261 7920 6361 6e6e 6f74  FastArray cannot
-00036160: 2062 6520 6372 6561 7465 6420 6672 6f6d   be created from
-00036170: 2061 2070 7961 7272 6f77 2061 7272 6179   a pyarrow array
-00036180: 206f 6620 7479 7065 2027 7b61 7272 2e74   of type '{arr.t
-00036190: 7970 657d 272e 2059 6f75 206d 6179 206e  ype}'. You may n
-000361a0: 6565 6420 746f 2063 616c 6c20 7468 6520  eed to call the 
-000361b0: 6066 726f 6d5f 6172 726f 7760 206d 6574  `from_arrow` met
-000361c0: 686f 6420 6f6e 206f 6e65 206f 6620 7468  hod on one of th
-000361d0: 6520 6465 7269 7665 6420 7375 6263 6c61  e derived subcla
-000361e0: 7373 6573 2069 6e73 7465 6164 2e22 0d0a  sses instead."..
-000361f0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-00036200: 0a20 2020 2064 6566 2074 6f5f 6172 726f  .    def to_arro
-00036210: 7728 0d0a 2020 2020 2020 2020 7365 6c66  w(..        self
-00036220: 2c0d 0a20 2020 2020 2020 2074 7970 653a  ,..        type:
-00036230: 204f 7074 696f 6e61 6c5b 2270 612e 4461   Optional["pa.Da
-00036240: 7461 5479 7065 225d 203d 204e 6f6e 652c  taType"] = None,
-00036250: 0d0a 2020 2020 2020 2020 2a2c 0d0a 2020  ..        *,..  
-00036260: 2020 2020 2020 7072 6573 6572 7665 5f66        preserve_f
-00036270: 6978 6564 5f62 7974 6573 3a20 626f 6f6c  ixed_bytes: bool
-00036280: 203d 2046 616c 7365 2c0d 0a20 2020 2020   = False,..     
-00036290: 2020 2065 6d70 7479 5f73 7472 696e 6773     empty_strings
-000362a0: 5f74 6f5f 6e75 6c6c 3a20 626f 6f6c 203d  _to_null: bool =
-000362b0: 2054 7275 652c 0d0a 2020 2020 2920 2d3e   True,..    ) ->
-000362c0: 2055 6e69 6f6e 5b22 7061 2e41 7272 6179   Union["pa.Array
-000362d0: 222c 2022 7061 2e43 6875 6e6b 6564 4172  ", "pa.ChunkedAr
-000362e0: 7261 7922 5d3a 0d0a 2020 2020 2020 2020  ray"]:..        
-000362f0: 2222 220d 0a20 2020 2020 2020 2043 6f6e  """..        Con
-00036300: 7665 7274 2074 6869 7320 6046 6173 7441  vert this `FastA
-00036310: 7272 6179 6020 746f 2061 2060 7079 6172  rray` to a `pyar
-00036320: 726f 772e 4172 7261 7960 2e0d 0a0d 0a20  row.Array`..... 
-00036330: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-00036340: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00036350: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2074  -----..        t
-00036360: 7970 6520 3a20 7079 6172 726f 772e 4461  ype : pyarrow.Da
-00036370: 7461 5479 7065 2c20 6f70 7469 6f6e 616c  taType, optional
-00036380: 2c20 6465 6661 756c 7473 2074 6f20 4e6f  , defaults to No
-00036390: 6e65 0d0a 2020 2020 2020 2020 7072 6573  ne..        pres
-000363a0: 6572 7665 5f66 6978 6564 5f62 7974 6573  erve_fixed_bytes
-000363b0: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
-000363c0: 6c2c 2064 6566 6175 6c74 7320 746f 2046  l, defaults to F
-000363d0: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
-000363e0: 2020 4966 2074 6869 7320 6046 6173 7441    If this `FastA
-000363f0: 7272 6179 6020 6973 2061 6e20 4153 4349  rray` is an ASCI
-00036400: 4920 7374 7269 6e67 2061 7272 6179 2028  I string array (
-00036410: 6474 7970 652e 6b69 6e64 203d 3d20 2753  dtype.kind == 'S
-00036420: 2729 2c0d 0a20 2020 2020 2020 2020 2020  '),..           
-00036430: 2073 6574 2074 6869 7320 7061 7261 6d65   set this parame
-00036440: 7465 7220 746f 2054 7275 6520 746f 2070  ter to True to p
-00036450: 726f 6475 6365 2061 2066 6978 6564 2d6c  roduce a fixed-l
-00036460: 656e 6774 6820 6269 6e61 7279 2061 7272  ength binary arr
-00036470: 6179 0d0a 2020 2020 2020 2020 2020 2020  ay..            
-00036480: 696e 7374 6561 6420 6f66 2061 2076 6172  instead of a var
-00036490: 6961 626c 652d 6c65 6e67 7468 2073 7472  iable-length str
-000364a0: 696e 6720 6172 7261 792e 0d0a 2020 2020  ing array...    
-000364b0: 2020 2020 656d 7074 795f 7374 7269 6e67      empty_string
-000364c0: 735f 746f 5f6e 756c 6c20 3a20 626f 6f6c  s_to_null : bool
-000364d0: 2c20 6f70 7469 6f6e 616c 2c20 6465 6661  , optional, defa
-000364e0: 756c 7473 2054 6f20 5472 7565 0d0a 2020  ults To True..  
-000364f0: 2020 2020 2020 2020 2020 4966 2074 6869            If thi
-00036500: 7320 6046 6173 7441 7272 6179 6020 6973  s `FastArray` is
-00036510: 2061 6e20 4153 4349 4920 6f72 2055 6e69   an ASCII or Uni
-00036520: 636f 6465 2073 7472 696e 6720 6172 7261  code string arra
-00036530: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-00036540: 7370 6563 6966 7920 5472 7565 2066 6f72  specify True for
-00036550: 2074 6869 7320 7061 7261 6d65 7465 7220   this parameter 
-00036560: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
-00036570: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
-00036580: 7320 696e 2074 6865 206f 7574 7075 742e  s in the output.
-00036590: 0d0a 2020 2020 2020 2020 2020 2020 7269  ..            ri
-000365a0: 7074 6162 6c65 2069 6e63 6f6e 7369 7374  ptable inconsist
-000365b0: 656e 746c 7920 7265 636f 676e 697a 6573  ently recognizes
-000365c0: 2074 6865 2065 6d70 7479 2073 7472 696e   the empty strin
-000365d0: 6720 6173 2061 6e20 2769 6e76 616c 6964  g as an 'invalid
-000365e0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-000365f0: 736f 2074 6869 7320 7061 7261 6d65 7465  so this paramete
-00036600: 7220 616c 6c6f 7773 2074 6865 2063 616c  r allows the cal
-00036610: 6c65 7220 746f 2073 7065 6369 6679 2077  ler to specify w
-00036620: 6869 6368 2069 6e74 6572 7072 6574 6174  hich interpretat
-00036630: 696f 6e0d 0a20 2020 2020 2020 2020 2020  ion..           
-00036640: 2074 6865 7920 7761 6e74 2e0d 0a0d 0a20   they want..... 
-00036650: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00036660: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00036670: 0a20 2020 2020 2020 2070 7961 7272 6f77  .        pyarrow
-00036680: 2e41 7272 6179 206f 7220 7079 6172 726f  .Array or pyarro
-00036690: 772e 4368 756e 6b65 6441 7272 6179 0d0a  w.ChunkedArray..
-000366a0: 0d0a 2020 2020 2020 2020 4e6f 7465 730d  ..        Notes.
-000366b0: 0a20 2020 2020 2020 202d 2d2d 2d2d 0d0a  .        -----..
-000366c0: 2020 2020 2020 2020 544f 444f 3a20 4164          TODO: Ad
-000366d0: 6420 626f 6f6c 2070 6172 616d 6574 6572  d bool parameter
-000366e0: 2077 6869 6368 2064 6972 6563 7473 2074   which directs t
-000366f0: 6865 2063 6f6e 7665 7273 696f 6e20 746f  he conversion to
-00036700: 2063 686f 6f73 6520 7468 6520 6d6f 7374   choose the most
-00036710: 2d63 6f6d 7061 6374 206f 7574 7075 7420  -compact output 
-00036720: 7479 7065 2070 6f73 7369 626c 653f 0d0a  type possible?..
-00036730: 2020 2020 2020 2020 2020 2020 2020 5468                Th
-00036740: 6973 2077 6f75 6c64 2062 6520 7265 6c65  is would be rele
-00036750: 7661 6e74 2074 6f20 696e 6469 6365 7320  vant to indices 
-00036760: 6f66 2063 6174 6567 6f72 6963 616c 2f64  of categorical/d
-00036770: 6963 7469 6f6e 6172 792d 656e 636f 6465  ictionary-encode
-00036780: 6420 6172 7261 7973 2c20 6275 7420 636f  d arrays, but co
-00036790: 756c 6420 616c 736f 206d 616b 6520 7365  uld also make se
-000367a0: 6e73 650d 0a20 2020 2020 2020 2020 2020  nse..           
-000367b0: 2020 2066 6f72 2072 6567 756c 6172 2046     for regular F
-000367c0: 6173 7441 7272 6179 2074 7970 6573 2028  astArray types (
-000367d0: 652e 672e 2074 6f20 7573 6520 616e 2069  e.g. to use an i
-000367e0: 6e74 3820 696e 7374 6561 6420 6f66 2061  nt8 instead of a
-000367f0: 6e20 696e 7433 3220 7768 656e 2069 7427  n int32 when it'
-00036800: 6420 6265 2061 206c 6f73 736c 6573 7320  d be a lossless 
-00036810: 636f 6e76 6572 7369 6f6e 292e 0d0a 2020  conversion)...  
-00036820: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00036830: 2020 2069 6d70 6f72 7420 6275 696c 7469     import builti
-00036840: 6e73 0d0a 0d0a 2020 2020 2020 2020 696d  ns....        im
-00036850: 706f 7274 2070 7961 7272 6f77 2061 7320  port pyarrow as 
-00036860: 7061 0d0a 0d0a 2020 2020 2020 2020 2320  pa....        # 
-00036870: 4465 7269 7665 6420 6172 7261 7920 7479  Derived array ty
-00036880: 7065 7320 4d55 5354 2069 6d70 6c65 6d65  pes MUST impleme
-00036890: 6e74 2074 6865 6972 206f 776e 206f 7665  nt their own ove
-000368a0: 726c 6f61 6420 6f66 2074 6869 7320 6675  rload of this fu
-000368b0: 6e63 7469 6f6e 0d0a 2020 2020 2020 2020  nction..        
-000368c0: 2320 666f 7220 636f 7272 6563 746e 6573  # for correctnes
-000368d0: 733b 2066 6f72 2074 6861 7420 7265 6173  s; for that reas
-000368e0: 6f6e 2c20 7261 6973 6520 616e 2065 7272  on, raise an err
-000368f0: 6f72 2069 6620 736f 6d65 6f6e 6520 6174  or if someone at
-00036900: 7465 6d70 7473 2074 6f0d 0a20 2020 2020  tempts to..     
-00036910: 2020 2023 2063 616c 6c20 2a74 6869 732a     # call *this*
-00036920: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
-00036930: 6f66 2074 6865 206d 6574 686f 6420 666f  of the method fo
-00036940: 7220 6120 6465 7269 7665 6420 6172 7261  r a derived arra
-00036950: 7920 7479 7065 2e0d 0a20 2020 2020 2020  y type...       
-00036960: 2069 6620 6275 696c 7469 6e73 2e74 7970   if builtins.typ
-00036970: 6528 7365 6c66 2920 213d 2046 6173 7441  e(self) != FastA
-00036980: 7272 6179 3a0d 0a20 2020 2020 2020 2020  rray:..         
-00036990: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
-000369a0: 656d 656e 7465 6445 7272 6f72 280d 0a20  ementedError(.. 
-000369b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-000369c0: 2254 6865 2060 7b62 7569 6c74 696e 732e  "The `{builtins.
-000369d0: 7479 7065 2873 656c 6629 2e5f 5f71 7561  type(self).__qua
-000369e0: 6c6e 616d 655f 5f7d 6020 7479 7065 206d  lname__}` type m
-000369f0: 7573 7420 696d 706c 656d 656e 7420 6974  ust implement it
-00036a00: 2773 206f 776e 206f 7665 7272 6964 6520  's own override 
-00036a10: 6f66 2074 6865 2060 746f 5f61 7272 6f77  of the `to_arrow
-00036a20: 2829 6020 6d65 7468 6f64 2e22 0d0a 2020  ()` method."..  
-00036a30: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-00036a40: 2020 2020 2020 2023 2072 6970 7461 626c         # riptabl
-00036a50: 6520 2861 7420 6c65 6173 7420 6173 206f  e (at least as o
-00036a60: 6620 312e 302e 3536 2920 646f 6573 206e  f 1.0.56) does n
-00036a70: 6f74 202a 7472 756c 792a 2073 7570 706f  ot *truly* suppo
-00036a80: 7274 2069 6e76 616c 6964 2f4e 4120 7661  rt invalid/NA va
-00036a90: 6c75 6573 0d0a 2020 2020 2020 2020 2320  lues..        # 
-00036aa0: 696e 2062 6f6f 6c20 6f72 2061 7363 6969  in bool or ascii
-00036ab0: 2f75 6e69 636f 6465 2073 7472 696e 672d  /unicode string-
-00036ac0: 7479 7065 6420 6172 7261 7973 2e20 4861  typed arrays. Ha
-00036ad0: 6e64 6c65 2074 686f 7365 2064 7479 7065  ndle those dtype
-00036ae0: 7320 7370 6563 6961 6c6c 792e 0d0a 2020  s specially...  
-00036af0: 2020 2020 2020 6966 206e 702e 6973 7375        if np.issu
-00036b00: 6264 7479 7065 2873 656c 662e 6474 7970  bdtype(self.dtyp
-00036b10: 652c 206e 702e 696e 7465 6765 7229 3a0d  e, np.integer):.
-00036b20: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00036b30: 4f44 4f3a 2049 6620 7468 6973 2061 7272  ODO: If this arr
-00036b40: 6179 2068 6173 202e 6e64 696d 7320 3e3d  ay has .ndims >=
-00036b50: 2032 2c20 6e65 6564 2074 6f20 636f 6e76   2, need to conv
-00036b60: 6572 7420 746f 2070 7961 7272 6f77 2075  ert to pyarrow u
-00036b70: 7369 6e67 2070 612e 5465 6e73 6f72 2e66  sing pa.Tensor.f
-00036b80: 726f 6d5f 6e75 6d70 7928 2e2e 2e29 2e20  rom_numpy(...). 
-00036b90: 5468 6174 2064 6f65 736e 2774 2068 616e  That doesn't han
-00036ba0: 646c 6520 6d61 736b 7320 6173 206f 6620  dle masks as of 
-00036bb0: 7079 6172 726f 7720 342e 302e 0d0a 0d0a  pyarrow 4.0.....
-00036bc0: 2020 2020 2020 2020 2020 2020 2320 4765              # Ge
-00036bd0: 7420 6120 6d61 736b 206f 6620 696e 7661  t a mask of inva
-00036be0: 6c69 6473 2e0d 0a20 2020 2020 2020 2020  lids...         
-00036bf0: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
-00036c00: 203d 2073 656c 662e 6973 6e61 6e28 290d   = self.isnan().
-00036c10: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00036c20: 2049 6620 616c 6c20 7661 6c75 6573 2061   If all values a
-00036c30: 7265 2076 616c 6964 2c20 646f 6e27 7420  re valid, don't 
-00036c40: 626f 7468 6572 2063 7265 6174 696e 6720  bother creating 
-00036c50: 616e 2061 6c6c 2d46 616c 7365 206d 6173  an all-False mas
-00036c60: 6b2c 2069 7427 7320 6a75 7374 2077 6173  k, it's just was
-00036c70: 7469 6e67 206d 656d 6f72 792e 0d0a 2020  ting memory...  
-00036c80: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00036c90: 2069 6e76 616c 6964 735f 6d61 736b 2e61   invalids_mask.a
-00036ca0: 6e79 2829 3a0d 0a20 2020 2020 2020 2020  ny():..         
-00036cb0: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
-00036cc0: 6d61 736b 203d 204e 6f6e 650d 0a0d 0a20  mask = None.... 
-00036cd0: 2020 2020 2020 2020 2020 2023 2043 7265             # Cre
-00036ce0: 6174 6520 7468 6520 7079 6172 726f 7720  ate the pyarrow 
-00036cf0: 6172 7261 7920 6672 6f6d 2069 7420 2b20  array from it + 
-00036d00: 7468 6973 2061 7272 6179 2e0d 0a20 2020  this array...   
-00036d10: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00036d20: 7061 2e61 7272 6179 2873 656c 662e 5f6e  pa.array(self._n
-00036d30: 702c 206d 6173 6b3d 696e 7661 6c69 6473  p, mask=invalids
-00036d40: 5f6d 6173 6b2c 2074 7970 653d 7479 7065  _mask, type=type
-00036d50: 290d 0a0d 0a20 2020 2020 2020 2065 6c69  )....        eli
-00036d60: 6620 6e70 2e69 7373 7562 6474 7970 6528  f np.issubdtype(
-00036d70: 7365 6c66 2e64 7479 7065 2c20 6e70 2e66  self.dtype, np.f
-00036d80: 6c6f 6174 696e 6729 3a0d 0a20 2020 2020  loating):..     
-00036d90: 2020 2020 2020 2023 2055 7369 6e67 2066         # Using f
-00036da0: 6c6f 6174 696e 672d 706f 696e 7420 4e61  loating-point Na
-00036db0: 4e20 746f 2073 6967 6e61 6c20 626f 7468  N to signal both
-00036dc0: 204e 614e 2061 6e64 204e 412f 6e75 6c6c   NaN and NA/null
-00036dd0: 2069 6e20 7269 7074 6162 6c65 206d 6561   in riptable mea
-00036de0: 6e73 2077 650d 0a20 2020 2020 2020 2020  ns we..         
-00036df0: 2020 2023 206e 6565 6420 746f 206d 616b     # need to mak
-00036e00: 6520 6120 6465 6369 7369 6f6e 2068 6572  e a decision her
-00036e10: 6520 6f6e 2077 6865 7468 6572 2074 6f20  e on whether to 
-00036e20: 6d61 726b 2074 686f 7365 2076 616c 7565  mark those value
-00036e30: 7320 6173 204e 412f 6e75 6c6c 2076 616c  s as NA/null val
-00036e40: 7565 730d 0a20 2020 2020 2020 2020 2020  ues..           
-00036e50: 2023 2069 6e20 7468 6520 7265 7475 726e   # in the return
-00036e60: 6564 2070 7961 7272 6f77 2061 7272 6179  ed pyarrow array
-00036e70: 2e0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00036e80: 2046 6f72 206e 6f77 2c20 7765 2064 6f6e   For now, we don
-00036e90: 2774 202d 2d20 7765 206a 7573 7420 7061  't -- we just pa
-00036ea0: 7373 2074 6865 2064 6174 6120 616c 6f6e  ss the data alon
-00036eb0: 6720 6469 7265 6374 6c79 2c20 736f 2074  g directly, so t
-00036ec0: 6865 2063 616c 6c65 7220 6361 6e20 6465  he caller can de
-00036ed0: 6369 6465 0d0a 2020 2020 2020 2020 2020  cide..          
-00036ee0: 2020 2320 6f6e 2077 6865 7468 6572 2074    # on whether t
-00036ef0: 6865 7920 7761 6e74 2074 6f20 6861 6e64  hey want to hand
-00036f00: 6c65 2074 6861 742e 2028 4964 6561 6c6c  le that. (Ideall
-00036f10: 792c 2077 6527 6420 6861 7665 2061 2077  y, we'd have a w
-00036f20: 6179 2074 6f20 7061 7261 6d65 7465 7269  ay to parameteri
-00036f30: 7a65 2074 6869 730d 0a20 2020 2020 2020  ze this..       
-00036f40: 2020 2020 2023 2062 7574 2074 6865 2070       # but the p
-00036f50: 726f 746f 636f 6c20 646f 6573 6e27 7420  rotocol doesn't 
-00036f60: 7375 7070 6f72 7420 6974 2061 7320 6f66  support it as of
-00036f70: 2070 7961 7272 6f77 2034 2e30 2e20 496e   pyarrow 4.0. In
-00036f80: 2061 6e79 2063 6173 652c 206f 6e6c 7920   any case, only 
-00036f90: 7468 6520 6269 746d 6173 6b0d 0a20 2020  the bitmask..   
-00036fa0: 2020 2020 2020 2020 2023 206e 6565 6473           # needs
-00036fb0: 2074 6f20 6265 2072 652d 6372 6561 7465   to be re-create
-00036fc0: 6420 6c61 7465 7220 6966 2074 6865 2075  d later if the u
-00036fd0: 7365 7220 7761 6e74 7320 746f 2063 6f6e  ser wants to con
-00036fe0: 7369 6465 7220 7468 6520 4e61 4e73 2061  sider the NaNs a
-00036ff0: 7320 4e41 2f6e 756c 6c20 7661 6c75 6573  s NA/null values
-00037000: 2e29 0d0a 2020 2020 2020 2020 2020 2020  .)..            
-00037010: 6966 2073 656c 662e 6e64 696d 203e 3d20  if self.ndim >= 
-00037020: 323a 0d0a 2020 2020 2020 2020 2020 2020  2:..            
-00037030: 2020 2020 2320 4e4f 5445 3a20 4173 206f      # NOTE: As o
-00037040: 6620 7079 6172 726f 7720 342e 302c 2074  f pyarrow 4.0, t
-00037050: 6869 7320 6d65 7468 6f64 2064 6f65 736e  his method doesn
-00037060: 2774 2073 7570 706f 7274 2061 2060 7479  't support a `ty
-00037070: 7065 6020 6172 6775 6d65 6e74 2e0d 0a20  pe` argument... 
-00037080: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00037090: 6574 7572 6e20 7061 2e54 656e 736f 722e  eturn pa.Tensor.
-000370a0: 6672 6f6d 5f6e 756d 7079 2873 656c 662e  from_numpy(self.
-000370b0: 5f6e 7029 0d0a 2020 2020 2020 2020 2020  _np)..          
-000370c0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000370d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000370e0: 7061 2e61 7272 6179 2873 656c 662e 5f6e  pa.array(self._n
-000370f0: 702c 2074 7970 653d 7479 7065 290d 0a0d  p, type=type)...
-00037100: 0a20 2020 2020 2020 2065 6c69 6620 6e70  .        elif np
-00037110: 2e69 7373 7562 6474 7970 6528 7365 6c66  .issubdtype(self
-00037120: 2e64 7479 7065 2c20 626f 6f6c 293a 0d0a  .dtype, bool):..
-00037130: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00037140: 656c 662e 6e64 696d 203e 3d20 323a 0d0a  elf.ndim >= 2:..
-00037150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037160: 2320 4e4f 5445 3a20 4173 206f 6620 7079  # NOTE: As of py
-00037170: 6172 726f 7720 342e 302c 2074 6869 7320  arrow 4.0, this 
-00037180: 6d65 7468 6f64 2064 6f65 736e 2774 2073  method doesn't s
-00037190: 7570 706f 7274 2061 2060 7479 7065 6020  upport a `type` 
-000371a0: 6172 6775 6d65 6e74 2e0d 0a20 2020 2020  argument...     
-000371b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000371c0: 6e20 7061 2e54 656e 736f 722e 6672 6f6d  n pa.Tensor.from
-000371d0: 5f6e 756d 7079 2873 656c 662e 5f6e 7029  _numpy(self._np)
-000371e0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-000371f0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00037200: 2020 2020 2072 6574 7572 6e20 7061 2e61       return pa.a
-00037210: 7272 6179 2873 656c 662e 5f6e 702c 2074  rray(self._np, t
-00037220: 7970 653d 7479 7065 290d 0a0d 0a20 2020  ype=type)....   
-00037230: 2020 2020 2065 6c69 6620 6e70 2e69 7373       elif np.iss
-00037240: 7562 6474 7970 6528 7365 6c66 2e64 7479  ubdtype(self.dty
-00037250: 7065 2c20 6279 7465 7329 3a0d 0a20 2020  pe, bytes):..   
-00037260: 2020 2020 2020 2020 2023 2049 6620 7468           # If th
-00037270: 6520 6361 6c6c 6572 2077 616e 7473 2074  e caller wants t
-00037280: 6f20 636f 6e76 6572 7420 656d 7074 7920  o convert empty 
-00037290: 7374 7269 6e67 7320 746f 206e 756c 6c73  strings to nulls
-000372a0: 2c20 6765 7420 6120 6d61 736b 206f 6620  , get a mask of 
-000372b0: 696e 7661 6c69 6473 2e0d 0a20 2020 2020  invalids...     
-000372c0: 2020 2020 2020 2069 6620 656d 7074 795f         if empty_
-000372d0: 7374 7269 6e67 735f 746f 5f6e 756c 6c3a  strings_to_null:
-000372e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000372f0: 2020 696e 7661 6c69 6473 5f6d 6173 6b20    invalids_mask 
-00037300: 3d20 7365 6c66 203d 3d20 7365 6c66 2e69  = self == self.i
-00037310: 6e76 0d0a 0d0a 2020 2020 2020 2020 2020  nv....          
-00037320: 2020 2020 2020 2320 4966 2061 6c6c 2076        # If all v
-00037330: 616c 7565 7320 6172 6520 7661 6c69 642c  alues are valid,
-00037340: 2064 6f6e 2774 2062 6f74 6865 7220 6372   don't bother cr
-00037350: 6561 7469 6e67 2061 6e20 616c 6c2d 4661  eating an all-Fa
-00037360: 6c73 6520 6d61 736b 2c20 6974 2773 206a  lse mask, it's j
-00037370: 7573 7420 7761 7374 696e 6720 6d65 6d6f  ust wasting memo
-00037380: 7279 2e0d 0a20 2020 2020 2020 2020 2020  ry...           
-00037390: 2020 2020 2069 6620 6e6f 7420 696e 7661       if not inva
-000373a0: 6c69 6473 5f6d 6173 6b2e 616e 7928 293a  lids_mask.any():
-000373b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000373c0: 2020 2020 2020 696e 7661 6c69 6473 5f6d        invalids_m
-000373d0: 6173 6b20 3d20 4e6f 6e65 0d0a 2020 2020  ask = None..    
-000373e0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-000373f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00037400: 6e76 616c 6964 735f 6d61 736b 203d 204e  nvalids_mask = N
-00037410: 6f6e 650d 0a0d 0a20 2020 2020 2020 2020  one....         
-00037420: 2020 2023 2044 6f65 7320 7468 6520 6361     # Does the ca
-00037430: 6c6c 6572 2077 616e 7420 746f 2070 7265  ller want to pre
-00037440: 7365 7276 6520 7468 6520 6669 7865 642d  serve the fixed-
-00037450: 6c65 6e67 7468 2062 696e 6172 7920 6461  length binary da
-00037460: 7461 3f0d 0a20 2020 2020 2020 2020 2020  ta?..           
-00037470: 2069 6620 7072 6573 6572 7665 5f66 6978   if preserve_fix
-00037480: 6564 5f62 7974 6573 3a0d 0a20 2020 2020  ed_bytes:..     
-00037490: 2020 2020 2020 2020 2020 2023 2043 6f6e             # Con
-000374a0: 7665 7274 2074 6f20 6120 6669 7865 642d  vert to a fixed-
-000374b0: 6c65 6e67 7468 2062 696e 6172 7920 2827  length binary ('
-000374c0: 6279 7465 7327 2920 7479 7065 2e0d 0a20  bytes') type... 
-000374d0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000374e0: 6c65 6d65 6e74 5f73 7472 5f6c 656e 6774  lement_str_lengt
-000374f0: 6820 3d20 6e70 2e64 7479 7065 2873 656c  h = np.dtype(sel
-00037500: 662e 6474 7970 6529 2e69 7465 6d73 697a  f.dtype).itemsiz
-00037510: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-00037520: 2020 2061 7272 5f74 7970 6520 3d20 7061     arr_type = pa
-00037530: 2e62 696e 6172 7928 656c 656d 656e 745f  .binary(element_
-00037540: 7374 725f 6c65 6e67 7468 2920 6966 2074  str_length) if t
-00037550: 7970 6520 6973 204e 6f6e 6520 656c 7365  ype is None else
-00037560: 2074 7970 650d 0a20 2020 2020 2020 2020   type..         
-00037570: 2020 2020 2020 2072 6574 7572 6e20 7061         return pa
-00037580: 2e61 7272 6179 2873 656c 662e 5f6e 702c  .array(self._np,
-00037590: 206d 6173 6b3d 696e 7661 6c69 6473 5f6d   mask=invalids_m
-000375a0: 6173 6b2c 2074 7970 653d 6172 725f 7479  ask, type=arr_ty
-000375b0: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
-000375c0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-000375d0: 2020 2020 2020 2020 2320 436f 6e76 6572          # Conver
-000375e0: 7420 7468 6973 2061 7272 6179 2074 6f20  t this array to 
-000375f0: 6120 7079 6172 726f 7720 7661 7269 6162  a pyarrow variab
-00037600: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
-00037610: 2061 7272 6179 2e0d 0a20 2020 2020 2020   array...       
-00037620: 2020 2020 2020 2020 2069 6620 7479 7065           if type
-00037630: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-00037640: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00037650: 7970 6520 3d20 7061 2e73 7472 696e 6728  ype = pa.string(
-00037660: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00037670: 2020 2023 2043 6f6e 7665 7274 2061 7320     # Convert as 
-00037680: 556e 6963 6f64 6520 6e64 6172 7261 7920  Unicode ndarray 
-00037690: 746f 2073 7472 696e 6761 7272 6179 2c20  to stringarray, 
-000376a0: 6173 2062 7974 6573 7472 696e 6720 646f  as bytestring do
-000376b0: 6573 206e 6f74 2070 7265 7365 7276 6520  es not preserve 
-000376c0: 656c 656d 656e 7420 6c65 6e67 7468 2028  element length (
-000376d0: 7269 7074 6162 6c65 2332 3439 290d 0a20  riptable#249).. 
-000376e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000376f0: 6574 7572 6e20 7061 2e61 7272 6179 286e  eturn pa.array(n
-00037700: 702e 6172 7261 7928 7365 6c66 2e5f 6e70  p.array(self._np
-00037710: 2c20 6474 7970 653d 2255 2229 2c20 6d61  , dtype="U"), ma
-00037720: 736b 3d69 6e76 616c 6964 735f 6d61 736b  sk=invalids_mask
-00037730: 2c20 7479 7065 3d74 7970 6529 0d0a 0d0a  , type=type)....
-00037740: 2020 2020 2020 2020 656c 6966 206e 702e          elif np.
-00037750: 6973 7375 6264 7479 7065 2873 656c 662e  issubdtype(self.
-00037760: 6474 7970 652c 2073 7472 293a 0d0a 2020  dtype, str):..  
-00037770: 2020 2020 2020 2020 2020 2320 4966 2074            # If t
-00037780: 6865 2063 616c 6c65 7220 7761 6e74 7320  he caller wants 
-00037790: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
-000377a0: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
-000377b0: 732c 2067 6574 2061 206d 6173 6b20 6f66  s, get a mask of
-000377c0: 2069 6e76 616c 6964 732e 0d0a 2020 2020   invalids...    
-000377d0: 2020 2020 2020 2020 6966 2065 6d70 7479          if empty
-000377e0: 5f73 7472 696e 6773 5f74 6f5f 6e75 6c6c  _strings_to_null
-000377f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00037800: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
-00037810: 203d 2073 656c 6620 3d3d 2073 656c 662e   = self == self.
-00037820: 696e 760d 0a0d 0a20 2020 2020 2020 2020  inv....         
-00037830: 2020 2020 2020 2023 2049 6620 616c 6c20         # If all 
-00037840: 7661 6c75 6573 2061 7265 2076 616c 6964  values are valid
-00037850: 2c20 646f 6e27 7420 626f 7468 6572 2063  , don't bother c
-00037860: 7265 6174 696e 6720 616e 2061 6c6c 2d46  reating an all-F
-00037870: 616c 7365 206d 6173 6b2c 2069 7427 7320  alse mask, it's 
-00037880: 6a75 7374 2077 6173 7469 6e67 206d 656d  just wasting mem
-00037890: 6f72 792e 0d0a 2020 2020 2020 2020 2020  ory...          
-000378a0: 2020 2020 2020 6966 206e 6f74 2069 6e76        if not inv
-000378b0: 616c 6964 735f 6d61 736b 2e61 6e79 2829  alids_mask.any()
-000378c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000378d0: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
-000378e0: 6d61 736b 203d 204e 6f6e 650d 0a20 2020  mask = None..   
-000378f0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00037900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037910: 696e 7661 6c69 6473 5f6d 6173 6b20 3d20  invalids_mask = 
-00037920: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
-00037930: 2020 2020 2320 7079 6172 726f 7720 2861      # pyarrow (a
-00037940: 7320 6f66 2076 342e 3029 2064 6f65 7320  s of v4.0) does 
-00037950: 6e6f 7420 6861 7665 2061 2066 6978 6564  not have a fixed
-00037960: 2d73 697a 6520 556e 6963 6f64 6520 7374  -size Unicode st
-00037970: 7269 6e67 2064 6174 6120 7479 7065 2c20  ring data type, 
-00037980: 736f 2075 6e6c 696b 6520 7468 6520 2762  so unlike the 'b
-00037990: 7974 6573 270d 0a20 2020 2020 2020 2020  ytes'..         
-000379a0: 2020 2023 2068 616e 646c 696e 6720 6162     # handling ab
-000379b0: 6f76 6520 666f 7220 4153 4349 4920 7374  ove for ASCII st
-000379c0: 7269 6e67 732c 2077 6520 6861 7665 2074  rings, we have t
-000379d0: 6f20 7573 6520 7468 6520 7661 7269 6162  o use the variab
-000379e0: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
-000379f0: 2061 7272 6179 2074 7970 652e 0d0a 2020   array type...  
-00037a00: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
-00037a10: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
-00037a20: 2020 2020 2020 2020 2020 2020 7479 7065              type
-00037a30: 203d 2070 612e 7374 7269 6e67 2829 0d0a   = pa.string()..
-00037a40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00037a50: 726e 2070 612e 6172 7261 7928 7365 6c66  rn pa.array(self
-00037a60: 2e5f 6e70 2c20 6d61 736b 3d69 6e76 616c  ._np, mask=inval
-00037a70: 6964 735f 6d61 736b 2c20 7479 7065 3d74  ids_mask, type=t
-00037a80: 7970 6529 0d0a 0d0a 2020 2020 2020 2020  ype)....        
-00037a90: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00037aa0: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
-00037ab0: 656d 656e 7465 6445 7272 6f72 2866 2246  ementedError(f"F
-00037ac0: 6173 7441 7272 6179 2077 6974 6820 6474  astArray with dt
-00037ad0: 7970 6520 277b 6e70 2e64 7479 7065 2873  ype '{np.dtype(s
-00037ae0: 656c 662e 6474 7970 6529 7d27 2069 7320  elf.dtype)}' is 
-00037af0: 6e6f 7420 7375 7070 6f72 7465 642e 2229  not supported.")
-00037b00: 0d0a 0d0a 2020 2020 6465 6620 5f5f 6172  ....    def __ar
-00037b10: 726f 775f 6172 7261 795f 5f28 7365 6c66  row_array__(self
-00037b20: 2c20 7479 7065 3a20 4f70 7469 6f6e 616c  , type: Optional
-00037b30: 5b22 7061 2e44 6174 6154 7970 6522 5d20  ["pa.DataType"] 
-00037b40: 3d20 4e6f 6e65 2920 2d3e 2055 6e69 6f6e  = None) -> Union
-00037b50: 5b22 7061 2e41 7272 6179 222c 2022 7061  ["pa.Array", "pa
-00037b60: 2e43 6875 6e6b 6564 4172 7261 7922 5d3a  .ChunkedArray"]:
-00037b70: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00037b80: 2020 2020 2020 2049 6d70 6c65 6d65 6e74         Implement
-00037b90: 6174 696f 6e20 6f66 2074 6865 2060 605f  ation of the ``_
-00037ba0: 5f61 7272 6f77 5f61 7272 6179 5f5f 6060  _arrow_array__``
-00037bb0: 2070 726f 746f 636f 6c20 666f 7220 636f   protocol for co
-00037bc0: 6e76 6572 7369 6f6e 2074 6f20 6120 7079  nversion to a py
-00037bd0: 6172 726f 7720 6172 7261 792e 0d0a 0d0a  arrow array.....
-00037be0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-00037bf0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-00037c00: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00037c10: 7479 7065 203a 2070 7961 7272 6f77 2e44  type : pyarrow.D
-00037c20: 6174 6154 7970 652c 206f 7074 696f 6e61  ataType, optiona
-00037c30: 6c2c 2064 6566 6175 6c74 7320 746f 204e  l, defaults to N
-00037c40: 6f6e 650d 0a0d 0a20 2020 2020 2020 2052  one....        R
-00037c50: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-00037c60: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00037c70: 2070 7961 7272 6f77 2e41 7272 6179 206f   pyarrow.Array o
-00037c80: 7220 7079 6172 726f 772e 4368 756e 6b65  r pyarrow.Chunke
-00037c90: 6441 7272 6179 0d0a 0d0a 2020 2020 2020  dArray....      
-00037ca0: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
-00037cb0: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
-00037cc0: 6874 7470 733a 2f2f 6172 726f 772e 6170  https://arrow.ap
-00037cd0: 6163 6865 2e6f 7267 2f64 6f63 732f 7079  ache.org/docs/py
-00037ce0: 7468 6f6e 2f65 7874 656e 6469 6e67 5f74  thon/extending_t
-00037cf0: 7970 6573 2e68 746d 6c23 636f 6e74 726f  ypes.html#contro
-00037d00: 6c6c 696e 672d 636f 6e76 6572 7369 6f6e  lling-conversion
-00037d10: 2d74 6f2d 7079 6172 726f 772d 6172 7261  -to-pyarrow-arra
-00037d20: 792d 7769 7468 2d74 6865 2d61 7272 6f77  y-with-the-arrow
-00037d30: 2d61 7272 6179 2d70 726f 746f 636f 6c0d  -array-protocol.
-00037d40: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00037d50: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00037d60: 662e 746f 5f61 7272 6f77 2874 7970 653d  f.to_arrow(type=
-00037d70: 7479 7065 2c20 7072 6573 6572 7665 5f66  type, preserve_f
-00037d80: 6978 6564 5f62 7974 6573 3d46 616c 7365  ixed_bytes=False
-00037d90: 2c20 656d 7074 795f 7374 7269 6e67 735f  , empty_strings_
-00037da0: 746f 5f6e 756c 6c3d 5472 7565 290d 0a0d  to_null=True)...
-00037db0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-00037dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037df0: 2d2d 0d0a 2020 2020 4063 6c61 7373 6d65  --..    @classme
-00037e00: 7468 6f64 0d0a 2020 2020 6465 6620 7265  thod..    def re
-00037e10: 6769 7374 6572 5f66 756e 6374 696f 6e28  gister_function(
-00037e20: 636c 732c 206e 616d 652c 2066 756e 6329  cls, name, func)
-00037e30: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00037e40: 2020 2020 2020 2020 5573 6564 2074 6f20          Used to 
-00037e50: 7265 6769 7374 6572 2066 756e 6374 696f  register functio
-00037e60: 6e73 2074 6f20 4661 7374 4172 7261 792e  ns to FastArray.
-00037e70: 0d0a 2020 2020 2020 2020 5573 6564 2062  ..        Used b
-00037e80: 7920 7274 5f66 6173 7461 7272 6179 6e75  y rt_fastarraynu
-00037e90: 6d62 610d 0a20 2020 2020 2020 2022 2222  mba..        """
-00037ea0: 0d0a 2020 2020 2020 2020 7365 7461 7474  ..        setatt
-00037eb0: 7228 636c 732c 206e 616d 652c 2066 756e  r(cls, name, fun
-00037ec0: 6329 0d0a 0d0a 2020 2020 6465 6620 6170  c)....    def ap
-00037ed0: 706c 795f 7363 6865 6d61 2873 656c 662c  ply_schema(self,
-00037ee0: 2073 6368 656d 6129 3a0d 0a20 2020 2020   schema):..     
-00037ef0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00037f00: 4170 706c 7920 6120 7363 6865 6d61 2063  Apply a schema c
-00037f10: 6f6e 7461 696e 696e 6720 6465 7363 7269  ontaining descri
-00037f20: 7074 6976 6520 696e 666f 726d 6174 696f  ptive informatio
-00037f30: 6e20 746f 2074 6865 2046 6173 7441 7272  n to the FastArr
-00037f40: 6179 0d0a 0d0a 2020 2020 2020 2020 3a70  ay....        :p
-00037f50: 6172 616d 2073 6368 656d 613a 2064 6963  aram schema: dic
-00037f60: 740d 0a20 2020 2020 2020 203a 7265 7475  t..        :retu
-00037f70: 726e 3a20 6469 6374 696f 6e61 7279 206f  rn: dictionary o
-00037f80: 6620 6465 7669 6174 696f 6e73 2066 726f  f deviations fro
-00037f90: 6d20 7468 6520 7363 6865 6d61 0d0a 2020  m the schema..  
-00037fa0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00037fb0: 2020 2066 726f 6d20 2e72 745f 6d65 7461     from .rt_meta
-00037fc0: 2069 6d70 6f72 7420 6170 706c 795f 7363   import apply_sc
-00037fd0: 6865 6d61 2061 7320 5f61 7070 6c79 5f73  hema as _apply_s
-00037fe0: 6368 656d 610d 0a0d 0a20 2020 2020 2020  chema....       
-00037ff0: 2072 6574 7572 6e20 5f61 7070 6c79 5f73   return _apply_s
-00038000: 6368 656d 6128 7365 6c66 2c20 7363 6865  chema(self, sche
-00038010: 6d61 290d 0a0d 0a20 2020 2064 6566 2069  ma)....    def i
-00038020: 6e66 6f28 7365 6c66 2c20 2a2a 6b77 6172  nfo(self, **kwar
-00038030: 6773 293a 0d0a 2020 2020 2020 2020 2222  gs):..        ""
-00038040: 220d 0a20 2020 2020 2020 2050 7269 6e74  "..        Print
-00038050: 2061 2064 6573 6372 6970 7469 6f6e 206f   a description o
-00038060: 6620 7468 6520 4661 7374 4172 7261 7927  f the FastArray'
-00038070: 7320 636f 6e74 656e 7473 0d0a 2020 2020  s contents..    
-00038080: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00038090: 2066 726f 6d20 2e72 745f 6d65 7461 2069   from .rt_meta i
-000380a0: 6d70 6f72 7420 696e 666f 2061 7320 5f69  mport info as _i
-000380b0: 6e66 6f0d 0a0d 0a20 2020 2020 2020 2072  nfo....        r
-000380c0: 6574 7572 6e20 5f69 6e66 6f28 7365 6c66  eturn _info(self
-000380d0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-000380e0: 2020 2040 7072 6f70 6572 7479 0d0a 2020     @property..  
-000380f0: 2020 6465 6620 646f 6328 7365 6c66 293a    def doc(self):
-00038100: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00038110: 2020 2020 2020 2054 6865 2044 6f63 206f         The Doc o
-00038120: 626a 6563 7420 666f 7220 7468 6520 7374  bject for the st
-00038130: 7275 6374 7572 650d 0a20 2020 2020 2020  ructure..       
-00038140: 2022 2222 0d0a 2020 2020 2020 2020 6672   """..        fr
-00038150: 6f6d 202e 7274 5f6d 6574 6120 696d 706f  om .rt_meta impo
-00038160: 7274 2064 6f63 2061 7320 5f64 6f63 0d0a  rt doc as _doc..
-00038170: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00038180: 205f 646f 6328 7365 6c66 290d 0a0d 0a20   _doc(self).... 
-00038190: 2020 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d     # ===========
-000381a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 454e 4420  =========== END 
-000381b0: 4f46 2043 4c41 5353 2044 4546 494e 4954  OF CLASS DEFINIT
-000381c0: 494f 4e20 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ION ============
-000381d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000381e0: 3d3d 3d0d 0a0d 0a0d 0a23 202d 2d2d 2d2d  ===......# -----
-000381f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038220: 2d2d 2d2d 2d2d 0d0a 6465 6620 5f73 6574  ------..def _set
-00038230: 6661 7374 6172 7261 7976 6965 7728 6172  fastarrayview(ar
-00038240: 7229 3a0d 0a20 2020 2022 2222 0d0a 2020  r):..    """..  
-00038250: 2020 4361 6c6c 2066 726f 6d20 4350 5020    Call from CPP 
-00038260: 696e 746f 2070 7974 686f 6e20 746f 2066  into python to f
-00038270: 6c69 7020 6172 7261 7920 7669 6577 0d0a  lip array view..
-00038280: 2020 2020 2222 220d 0a20 2020 2069 6620      """..    if 
-00038290: 6973 696e 7374 616e 6365 2861 7272 2c20  isinstance(arr, 
-000382a0: 4661 7374 4172 7261 7929 3a0d 0a20 2020  FastArray):..   
-000382b0: 2020 2020 2069 6620 4661 7374 4172 7261       if FastArra
-000382c0: 792e 5665 7262 6f73 6520 3e20 323a 0d0a  y.Verbose > 2:..
-000382d0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-000382e0: 7428 226e 6f20 6e65 6564 2074 6f20 7365  t("no need to se
-000382f0: 7466 6173 7461 7272 6179 7669 6577 222c  tfastarrayview",
-00038300: 2061 7272 2e64 7479 7065 2c20 6c65 6e28   arr.dtype, len(
-00038310: 6172 7229 290d 0a20 2020 2020 2020 2072  arr))..        r
-00038320: 6574 7572 6e20 6172 720d 0a0d 0a20 2020  eturn arr....   
-00038330: 2069 6620 4661 7374 4172 7261 792e 5665   if FastArray.Ve
-00038340: 7262 6f73 6520 3e20 323a 0d0a 2020 2020  rbose > 2:..    
-00038350: 2020 2020 7072 696e 7428 2273 6574 6661      print("setfa
-00038360: 7374 6172 7261 7976 6965 7722 2c20 6172  starrayview", ar
-00038370: 722e 6474 7970 652c 206c 656e 2861 7272  r.dtype, len(arr
-00038380: 2929 0d0a 0d0a 2020 2020 7265 7475 726e  ))....    return
-00038390: 2061 7272 2e76 6965 7728 4661 7374 4172   arr.view(FastAr
-000383a0: 7261 7929 0d0a 0d0a 0d0a 2320 2d2d 2d2d  ray)......# ----
-000383b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000383c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000383d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000383e0: 2d2d 2d2d 2d2d 2d0d 0a64 6566 205f 7365  -------..def _se
-000383f0: 7466 6173 7461 7272 6179 7479 7065 2829  tfastarraytype()
-00038400: 3a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  :..    # -------
-00038410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038420: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038430: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038440: 2d2d 2d2d 0d0a 2020 2020 2320 6361 6c6c  ----..    # call
-00038450: 696e 6720 7468 6973 2066 756e 6374 696f  ing this functio
-00038460: 6e20 7769 6c6c 2066 6f72 6365 2066 6d20  n will force fm 
-00038470: 746f 2072 6574 7572 6e20 4661 7374 4172  to return FastAr
-00038480: 7261 7920 7375 6263 6c61 7373 0d0a 2020  ray subclass..  
-00038490: 2020 2320 7263 2e42 6173 6963 4d61 7468    # rc.BasicMath
-000384a0: 486f 6f6b 2846 6173 7441 7272 6179 2c20  Hook(FastArray, 
-000384b0: 6e70 2e6e 6461 7272 6179 290d 0a20 2020  np.ndarray)..   
-000384c0: 2023 2043 6f6d 696e 6720 6e65 7874 2062   # Coming next b
-000384d0: 7569 6c64 0d0a 2020 2020 6661 203d 206e  uild..    fa = n
-000384e0: 702e 6172 616e 6765 2831 292e 7669 6577  p.arange(1).view
-000384f0: 2846 6173 7441 7272 6179 290d 0a20 2020  (FastArray)..   
-00038500: 2072 632e 5365 7446 6173 7441 7272 6179   rc.SetFastArray
-00038510: 5479 7065 2866 612c 205f 7365 7466 6173  Type(fa, _setfas
-00038520: 7461 7272 6179 7669 6577 290d 0a20 2020  tarrayview)..   
-00038530: 2072 632e 4261 7369 634d 6174 6848 6f6f   rc.BasicMathHoo
-00038540: 6b28 6661 2c20 6661 2e5f 6e70 290d 0a0d  k(fa, fa._np)...
-00038550: 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ...# -----------
-00038560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038590: 0d0a 6465 6620 5f46 6978 7570 446f 6353  ..def _FixupDocS
-000385a0: 7472 696e 6773 2829 3a0d 0a20 2020 2022  trings():..    "
-000385b0: 2222 0d0a 2020 2020 4c6f 6164 2061 6c6c  ""..    Load all
-000385c0: 2074 6865 206d 656d 6265 7220 6675 6e63   the member func
-000385d0: 7469 6f6e 206f 6620 7468 6973 206d 6f64  tion of this mod
-000385e0: 756c 650d 0a20 2020 204c 6f61 6420 616c  ule..    Load al
-000385f0: 6c20 7468 6520 6d65 6d62 6572 2066 756e  l the member fun
-00038600: 6374 696f 6e73 206f 6620 7468 6520 6e70  ctions of the np
-00038610: 206d 6f64 756c 650d 0a20 2020 2049 6620   module..    If 
-00038620: 7765 2066 696e 6420 6120 6d61 7463 682c  we find a match,
-00038630: 2063 6f70 7920 6f76 6572 2074 6865 2064   copy over the d
-00038640: 6f63 2073 7472 696e 6773 0d0a 2020 2020  oc strings..    
-00038650: 2222 220d 0a20 2020 2069 6d70 6f72 7420  """..    import 
-00038660: 696e 7370 6563 740d 0a20 2020 2069 6d70  inspect..    imp
-00038670: 6f72 7420 7379 730d 0a0d 0a20 2020 206d  ort sys....    m
-00038680: 796d 6f64 756c 6520 3d20 7379 732e 6d6f  ymodule = sys.mo
-00038690: 6475 6c65 735b 5f5f 6e61 6d65 5f5f 5d0d  dules[__name__].
-000386a0: 0a20 2020 2061 6c6c 5f6d 7966 756e 6374  .    all_myfunct
-000386b0: 696f 6e73 203d 2069 6e73 7065 6374 2e67  ions = inspect.g
-000386c0: 6574 6d65 6d62 6572 7328 4661 7374 4172  etmembers(FastAr
-000386d0: 7261 792c 2069 6e73 7065 6374 2e69 7366  ray, inspect.isf
-000386e0: 756e 6374 696f 6e29 0d0a 0d0a 2020 2020  unction)....    
-000386f0: 7472 793a 0d0a 2020 2020 2020 2020 2320  try:..        # 
-00038700: 626f 7474 6c65 6e65 636b 2069 7320 6f70  bottleneck is op
-00038710: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
-00038720: 616c 6c5f 626e 6675 6e63 7469 6f6e 7320  all_bnfunctions 
-00038730: 3d20 696e 7370 6563 742e 6765 746d 656d  = inspect.getmem
-00038740: 6265 7273 2862 6e2c 2069 6e73 7065 6374  bers(bn, inspect
-00038750: 2e69 7366 756e 6374 696f 6e29 0d0a 2020  .isfunction)..  
-00038760: 2020 2020 2020 616c 6c5f 626e 6675 6e63        all_bnfunc
-00038770: 7469 6f6e 7320 2b3d 2069 6e73 7065 6374  tions += inspect
-00038780: 2e67 6574 6d65 6d62 6572 7328 626e 2c20  .getmembers(bn, 
-00038790: 696e 7370 6563 742e 6973 6275 696c 7469  inspect.isbuilti
-000387a0: 6e29 0d0a 0d0a 2020 2020 2020 2020 2320  n)....        # 
-000387b0: 6275 696c 6420 6469 6374 696f 6e61 7279  build dictionary
-000387c0: 206f 6620 626f 7474 6c65 6e65 636b 2064   of bottleneck d
-000387d0: 6f63 730d 0a20 2020 2020 2020 2062 6e64  ocs..        bnd
-000387e0: 6963 7420 3d20 7b7d 0d0a 2020 2020 2020  ict = {}..      
-000387f0: 2020 666f 7220 6675 6e63 7320 696e 2061    for funcs in a
-00038800: 6c6c 5f62 6e66 756e 6374 696f 6e73 3a0d  ll_bnfunctions:.
-00038810: 0a20 2020 2020 2020 2020 2020 2062 6e64  .            bnd
-00038820: 6963 745b 6675 6e63 735b 305d 5d20 3d20  ict[funcs[0]] = 
-00038830: 6675 6e63 735b 315d 0d0a 0d0a 2020 2020  funcs[1]....    
-00038840: 2020 2020 2320 6e6f 7720 666f 7220 6561      # now for ea
-00038850: 6368 2066 756e 6374 696f 6e20 7468 6174  ch function that
-00038860: 2068 6173 2061 6e20 626e 2066 6c61 766f   has an bn flavo
-00038870: 722c 2063 6f70 7920 6f76 6572 2074 6865  r, copy over the
-00038880: 2064 6f63 2073 7472 696e 6773 0d0a 2020   doc strings..  
-00038890: 2020 2020 2020 666f 7220 6675 6e63 7320        for funcs 
-000388a0: 696e 2061 6c6c 5f6d 7966 756e 6374 696f  in all_myfunctio
-000388b0: 6e73 3a0d 0a20 2020 2020 2020 2020 2020  ns:..           
-000388c0: 2069 6620 2866 756e 6373 5b30 5d20 696e   if (funcs[0] in
-000388d0: 2062 6e64 6963 7429 2061 6e64 2028 6675   bndict) and (fu
-000388e0: 6e63 735b 315d 2e5f 5f64 6f63 5f5f 2069  ncs[1].__doc__ i
-000388f0: 7320 4e6f 6e65 293a 0d0a 2020 2020 2020  s None):..      
-00038900: 2020 2020 2020 2020 2020 6675 6e63 735b            funcs[
-00038910: 315d 2e5f 5f64 6f63 5f5f 203d 2062 6e64  1].__doc__ = bnd
-00038920: 6963 745b 6675 6e63 735b 305d 5d2e 5f5f  ict[funcs[0]].__
-00038930: 646f 635f 5f0d 0a20 2020 2065 7863 6570  doc__..    excep
-00038940: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
-00038950: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
-00038960: 2020 616c 6c5f 6e70 6675 6e63 7469 6f6e    all_npfunction
-00038970: 7320 3d20 5b66 756e 6320 666f 7220 6675  s = [func for fu
-00038980: 6e63 2069 6e20 696e 7370 6563 742e 6765  nc in inspect.ge
-00038990: 746d 656d 6265 7273 286e 702e 6e64 6172  tmembers(np.ndar
-000389a0: 7261 7929 2069 6620 6e6f 7420 6675 6e63  ray) if not func
-000389b0: 5b30 5d2e 7374 6172 7473 7769 7468 2822  [0].startswith("
-000389c0: 5f22 295d 0d0a 0d0a 2020 2020 2320 6275  _")]....    # bu
-000389d0: 696c 6420 6469 6374 696f 6e61 7279 206f  ild dictionary o
-000389e0: 6620 6e70 2e6e 6461 7272 6179 2064 6f63  f np.ndarray doc
-000389f0: 730d 0a20 2020 206e 7064 6963 7420 3d20  s..    npdict = 
-00038a00: 7b7d 0d0a 2020 2020 666f 7220 6675 6e63  {}..    for func
-00038a10: 7320 696e 2061 6c6c 5f6e 7066 756e 6374  s in all_npfunct
-00038a20: 696f 6e73 3a0d 0a20 2020 2020 2020 206e  ions:..        n
-00038a30: 7064 6963 745b 6675 6e63 735b 305d 5d20  pdict[funcs[0]] 
-00038a40: 3d20 6675 6e63 735b 315d 0d0a 0d0a 2020  = funcs[1]....  
-00038a50: 2020 2320 6e6f 7720 666f 7220 6561 6368    # now for each
-00038a60: 2066 756e 6374 696f 6e20 7468 6174 2068   function that h
-00038a70: 6173 2061 6e20 6e70 2066 6c61 766f 722c  as an np flavor,
-00038a80: 2063 6f70 7920 6f76 6572 2074 6865 2064   copy over the d
-00038a90: 6f63 2073 7472 696e 6773 0d0a 2020 2020  oc strings..    
-00038aa0: 666f 7220 6675 6e63 7320 696e 2061 6c6c  for funcs in all
-00038ab0: 5f6d 7966 756e 6374 696f 6e73 3a0d 0a20  _myfunctions:.. 
-00038ac0: 2020 2020 2020 2069 6620 2866 756e 6373         if (funcs
-00038ad0: 5b30 5d20 696e 206e 7064 6963 7429 2061  [0] in npdict) a
-00038ae0: 6e64 2028 6675 6e63 735b 315d 2e5f 5f64  nd (funcs[1].__d
-00038af0: 6f63 5f5f 2069 7320 4e6f 6e65 293a 0d0a  oc__ is None):..
-00038b00: 2020 2020 2020 2020 2020 2020 6675 6e63              func
-00038b10: 735b 315d 2e5f 5f64 6f63 5f5f 203d 206e  s[1].__doc__ = n
-00038b20: 7064 6963 745b 6675 6e63 735b 305d 5d2e  pdict[funcs[0]].
-00038b30: 5f5f 646f 635f 5f0d 0a0d 0a20 2020 2023  __doc__....    #
-00038b40: 206e 6f77 2064 6f20 6a75 7374 2070 6c61   now do just pla
-00038b50: 696e 206e 700d 0a20 2020 2061 6c6c 5f6e  in np..    all_n
-00038b60: 7066 756e 6374 696f 6e73 203d 205b 6675  pfunctions = [fu
-00038b70: 6e63 2066 6f72 2066 756e 6320 696e 2069  nc for func in i
-00038b80: 6e73 7065 6374 2e67 6574 6d65 6d62 6572  nspect.getmember
-00038b90: 7328 6e70 2920 6966 2022 5f5f 2220 6e6f  s(np) if "__" no
-00038ba0: 7420 696e 2066 756e 6373 5b30 5d5d 0d0a  t in funcs[0]]..
-00038bb0: 0d0a 2020 2020 2320 6275 696c 6420 6469  ..    # build di
-00038bc0: 6374 696f 6e61 7279 206f 6620 6e70 2064  ctionary of np d
-00038bd0: 6f63 730d 0a20 2020 206e 7064 6963 7420  ocs..    npdict 
-00038be0: 3d20 7b7d 0d0a 2020 2020 666f 7220 6675  = {}..    for fu
-00038bf0: 6e63 7320 696e 2061 6c6c 5f6e 7066 756e  ncs in all_npfun
-00038c00: 6374 696f 6e73 3a0d 0a20 2020 2020 2020  ctions:..       
-00038c10: 2023 2070 7269 6e74 2822 6765 7474 696e   # print("gettin
-00038c20: 6720 646f 6320 7374 7269 6e67 2066 6f72  g doc string for
-00038c30: 2022 2c20 6675 6e63 735b 305d 290d 0a20   ", funcs[0]).. 
-00038c40: 2020 2020 2020 206e 7064 6963 745b 6675         npdict[fu
-00038c50: 6e63 735b 305d 5d20 3d20 6675 6e63 735b  ncs[0]] = funcs[
-00038c60: 315d 0d0a 0d0a 2020 2020 2320 6e6f 7720  1]....    # now 
-00038c70: 666f 7220 6561 6368 2066 756e 6374 696f  for each functio
-00038c80: 6e20 7468 6174 2068 6173 2061 6e20 6e70  n that has an np
-00038c90: 2066 6c61 766f 722c 2063 6f70 7920 6f76   flavor, copy ov
-00038ca0: 6572 2074 6865 2064 6f63 2073 7472 696e  er the doc strin
-00038cb0: 6773 0d0a 2020 2020 666f 7220 6675 6e63  gs..    for func
-00038cc0: 7320 696e 2061 6c6c 5f6d 7966 756e 6374  s in all_myfunct
-00038cd0: 696f 6e73 3a0d 0a20 2020 2020 2020 2069  ions:..        i
-00038ce0: 6620 2866 756e 6373 5b30 5d20 696e 206e  f (funcs[0] in n
-00038cf0: 7064 6963 7429 2061 6e64 2028 6675 6e63  pdict) and (func
-00038d00: 735b 315d 2e5f 5f64 6f63 5f5f 2069 7320  s[1].__doc__ is 
-00038d10: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-00038d20: 2020 2020 6675 6e63 735b 315d 2e5f 5f64      funcs[1].__d
-00038d30: 6f63 5f5f 203d 206e 7064 6963 745b 6675  oc__ = npdict[fu
-00038d40: 6e63 735b 305d 5d2e 5f5f 646f 635f 5f0d  ncs[0]].__doc__.
-00038d50: 0a0d 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d  .....# ---------
-00038d60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038d90: 2d0d 0a63 6c61 7373 2054 6872 6561 6469  -..class Threadi
-00038da0: 6e67 3a0d 0a20 2020 2040 7374 6174 6963  ng:..    @static
-00038db0: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
-00038dc0: 6f6e 2829 3a0d 0a20 2020 2020 2020 2022  on():..        "
-00038dd0: 2222 0d0a 2020 2020 2020 2020 5475 726e  ""..        Turn
-00038de0: 2072 6970 7461 626c 6520 7468 7265 6164   riptable thread
-00038df0: 696e 6720 6f6e 2e0d 0a20 2020 2020 2020  ing on...       
-00038e00: 2055 7365 6420 6f6e 6c79 2077 6865 6e20   Used only when 
-00038e10: 7269 7074 6162 6c65 2074 6872 6561 6469  riptable threadi
-00038e20: 6e67 2077 6173 2074 7572 6e65 6420 6f66  ng was turned of
-00038e30: 662e 0d0a 0d0a 2020 2020 2020 2020 4578  f.....        Ex
-00038e40: 616d 706c 650d 0a20 2020 2020 2020 202d  ample..        -
-00038e50: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00038e60: 613d 7274 2e61 7261 6e67 6528 315f 3030  a=rt.arange(1_00
-00038e70: 305f 3030 290d 0a20 2020 2020 2020 2054  0_00)..        T
-00038e80: 6872 6561 6469 6e67 2e6f 6666 2829 0d0a  hreading.off()..
-00038e90: 2020 2020 2020 2020 2574 696d 6520 612b          %time a+
-00038ea0: 3d31 0d0a 2020 2020 2020 2020 5468 7265  =1..        Thre
-00038eb0: 6164 696e 672e 6f6e 2829 0d0a 2020 2020  ading.on()..    
-00038ec0: 2020 2020 2574 696d 6520 612b 3d31 0d0a      %time a+=1..
-00038ed0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00038ee0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00038ef0: 2d2d 0d0a 2020 2020 2020 2020 5072 6576  --..        Prev
-00038f00: 696f 7573 6c79 2077 6865 7468 6572 2074  iously whether t
-00038f10: 6872 6561 6469 6e67 2077 6173 206f 6e20  hreading was on 
-00038f20: 6f72 206e 6f74 2e20 3020 6f72 2031 2e20  or not. 0 or 1. 
-00038f30: 303d 7468 7265 6164 696e 6720 7761 7320  0=threading was 
-00038f40: 6f66 6620 6265 666f 7265 2e0d 0a0d 0a20  off before..... 
-00038f50: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00038f60: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
-00038f70: 7272 6179 2e5f 544f 4e28 290d 0a0d 0a20  rray._TON().... 
-00038f80: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00038f90: 0d0a 2020 2020 6465 6620 6f66 6628 293a  ..    def off():
-00038fa0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00038fb0: 2020 2020 2020 2054 7572 6e20 7269 7074         Turn ript
-00038fc0: 6162 6c65 2074 6872 6561 6469 6e67 206f  able threading o
-00038fd0: 6666 2e0d 0a20 2020 2020 2020 2055 7365  ff...        Use
-00038fe0: 6675 6c20 666f 7220 7768 656e 2074 6865  ful for when the
-00038ff0: 2073 7973 7465 6d20 6861 7320 6f74 6865   system has othe
-00039000: 7220 7072 6f63 6573 7365 7320 7573 696e  r processes usin
-00039010: 6720 6f74 6865 7220 7468 7265 6164 730d  g other threads.
-00039020: 0a20 2020 2020 2020 206f 7220 746f 206c  .        or to l
-00039030: 696d 6974 2074 6872 6561 6469 6e67 2072  imit threading r
-00039040: 6573 6f75 7263 6573 2e0d 0a0d 0a20 2020  esources.....   
-00039050: 2020 2020 2045 7861 6d70 6c65 0d0a 2020       Example..  
-00039060: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00039070: 2020 2020 2020 2061 3d72 742e 6172 616e         a=rt.aran
-00039080: 6765 2831 5f30 3030 5f30 3029 0d0a 2020  ge(1_000_00)..  
-00039090: 2020 2020 2020 5468 7265 6164 696e 672e        Threading.
-000390a0: 6f66 6628 290d 0a20 2020 2020 2020 2025  off()..        %
-000390b0: 7469 6d65 2061 2b3d 310d 0a20 2020 2020  time a+=1..     
-000390c0: 2020 2054 6872 6561 6469 6e67 2e6f 6e28     Threading.on(
-000390d0: 290d 0a20 2020 2020 2020 2025 7469 6d65  )..        %time
-000390e0: 2061 2b3d 310d 0a0d 0a20 2020 2020 2020   a+=1....       
-000390f0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-00039100: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-00039110: 2020 2050 7265 7669 6f75 736c 7920 7768     Previously wh
-00039120: 6574 6865 7220 7468 7265 6164 696e 6720  ether threading 
-00039130: 7761 7320 6f6e 206f 7220 6e6f 742e 2030  was on or not. 0
-00039140: 206f 7220 312e 2030 3d74 6872 6561 6469   or 1. 0=threadi
-00039150: 6e67 2077 6173 206f 6666 2062 6566 6f72  ng was off befor
-00039160: 652e 0d0a 2020 2020 2020 2020 2222 220d  e...        """.
-00039170: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00039180: 4661 7374 4172 7261 792e 5f54 4f46 4628  FastArray._TOFF(
-00039190: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
-000391a0: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
-000391b0: 7468 7265 6164 7328 7468 7265 6164 636f  threads(threadco
-000391c0: 756e 7429 3a0d 0a20 2020 2020 2020 2022  unt):..        "
-000391d0: 2222 0d0a 2020 2020 2020 2020 5365 7420  ""..        Set 
-000391e0: 686f 7720 6d61 6e79 2077 6f72 6b65 7220  how many worker 
-000391f0: 7468 7265 6164 7320 7269 7074 6162 6c65  threads riptable
-00039200: 2063 616e 2075 7365 2e0d 0a20 2020 2020   can use...     
-00039210: 2020 204f 6674 656e 2064 6566 6175 6c74     Often default
-00039220: 7320 746f 2031 3220 616e 6420 6361 6e6e  s to 12 and cann
-00039230: 6f74 2062 6520 7365 7420 6265 6c6f 7720  ot be set below 
-00039240: 3120 6f72 203e 2033 312e 0d0a 0d0a 2020  1 or > 31.....  
-00039250: 2020 2020 2020 546f 2074 7572 6e20 7269        To turn ri
-00039260: 7074 6162 6c65 2074 6872 6561 6469 6e67  ptable threading
-00039270: 206f 6666 2063 6f6d 706c 6574 656c 7920   off completely 
-00039280: 7573 6520 5468 7265 6164 696e 672e 6f66  use Threading.of
-00039290: 6628 290d 0a20 2020 2020 2020 2055 7365  f()..        Use
-000392a0: 6675 6c20 666f 7220 7768 656e 2074 6865  ful for when the
-000392b0: 2073 7973 7465 6d20 6861 7320 6f74 6865   system has othe
-000392c0: 7220 7072 6f63 6573 7365 7320 7573 696e  r processes usin
-000392d0: 6720 6f74 6865 7220 7468 7265 6164 730d  g other threads.
-000392e0: 0a20 2020 2020 2020 206f 7220 746f 206c  .        or to l
-000392f0: 696d 6974 2074 6872 6561 6469 6e67 2072  imit threading r
-00039300: 6573 6f75 7263 6573 2e0d 0a0d 0a20 2020  esources.....   
-00039310: 2020 2020 2045 7861 6d70 6c65 0d0a 2020       Example..  
-00039320: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00039330: 2020 2020 2020 2054 6872 6561 6469 6e67         Threading
-00039340: 2e74 6872 6561 6473 2838 290d 0a0d 0a20  .threads(8).... 
-00039350: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00039360: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00039370: 0a20 2020 2020 2020 206e 756d 6265 7220  .        number 
-00039380: 6f66 2074 6872 6561 6473 2070 7265 7669  of threads previ
-00039390: 6f75 736c 7920 7573 6564 0d0a 2020 2020  ously used..    
-000393a0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000393b0: 2072 6574 7572 6e20 7263 2e53 6574 5468   return rc.SetTh
-000393c0: 7265 6164 5761 6b65 5570 2874 6872 6561  readWakeUp(threa
-000393d0: 6463 6f75 6e74 290d 0a0d 0a0d 0a23 202d  dcount)......# -
-000393e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000393f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039410: 2d2d 2d2d 2d2d 2d2d 2d0d 0a63 6c61 7373  ---------..class
-00039420: 2052 6563 7963 6c65 3a0d 0a20 2020 2040   Recycle:..    @
-00039430: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
-00039440: 2020 6465 6620 6f6e 2829 3a0d 0a20 2020    def on():..   
-00039450: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00039460: 2020 5475 726e 2072 6970 7461 626c 6520    Turn riptable 
-00039470: 7265 6379 636c 696e 6720 6f6e 2e0d 0a20  recycling on... 
-00039480: 2020 2020 2020 2055 7365 6420 6f6e 6c79         Used only
-00039490: 2077 6865 6e20 7269 7074 6162 6c65 2072   when riptable r
-000394a0: 6563 7963 6c69 6e67 2077 6173 2074 7572  ecycling was tur
-000394b0: 6e65 6420 6f66 662e 0d0a 0d0a 2020 2020  ned off.....    
-000394c0: 2020 2020 4578 616d 706c 650d 0a20 2020      Example..   
-000394d0: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
-000394e0: 2020 2020 2020 613d 6172 616e 6765 2831        a=arange(1
-000394f0: 5f30 3030 5f30 3029 0d0a 2020 2020 2020  _000_00)..      
-00039500: 2020 5265 6379 636c 652e 6f66 6628 290d    Recycle.off().
-00039510: 0a20 2020 2020 2020 2025 7469 6d65 6974  .        %timeit
-00039520: 2061 3d61 202b 2031 0d0a 2020 2020 2020   a=a + 1..      
-00039530: 2020 5265 6379 636c 652e 6f6e 2829 0d0a    Recycle.on()..
-00039540: 2020 2020 2020 2020 2574 696d 6569 7420          %timeit 
-00039550: 613d 6120 2b20 310d 0a0d 0a20 2020 2020  a=a + 1....     
-00039560: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00039570: 7265 7475 726e 2046 6173 7441 7272 6179  return FastArray
-00039580: 2e5f 524f 4e28 290d 0a0d 0a20 2020 2040  ._RON()....    @
-00039590: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
-000395a0: 2020 6465 6620 6f66 6628 293a 0d0a 2020    def off():..  
-000395b0: 2020 2020 2020 7265 7475 726e 2046 6173        return Fas
-000395c0: 7441 7272 6179 2e5f 524f 4646 2829 0d0a  tArray._ROFF()..
-000395d0: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-000395e0: 686f 640d 0a20 2020 2064 6566 206e 6f77  hod..    def now
-000395f0: 2874 696d 656f 7574 3a20 696e 7420 3d20  (timeout: int = 
-00039600: 3029 3a0d 0a20 2020 2020 2020 2022 2222  0):..        """
-00039610: 0d0a 2020 2020 2020 2020 5061 7373 2074  ..        Pass t
-00039620: 6865 2067 6172 6261 6765 2063 6f6c 6c65  he garbage colle
-00039630: 6374 6f72 2074 696d 656f 7574 2076 616c  ctor timeout val
-00039640: 7565 2074 6f20 636c 6561 6e75 702e 0d0a  ue to cleanup...
-00039650: 2020 2020 2020 2020 416c 736f 2063 616c          Also cal
-00039660: 6c73 2074 6865 2070 7974 686f 6e20 6761  ls the python ga
-00039670: 7262 6167 6520 636f 6c6c 6563 746f 722e  rbage collector.
-00039680: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
-00039690: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
-000396a0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-000396b0: 2020 2020 7469 6d65 6f75 743a 2064 6566      timeout: def
-000396c0: 6175 6c74 2074 6f20 302e 2020 3020 7769  ault to 0.  0 wi
-000396d0: 6c6c 206e 6f74 2073 6574 2061 2074 696d  ll not set a tim
-000396e0: 656f 7574 0d0a 0d0a 2020 2020 2020 2020  eout....        
-000396f0: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
-00039700: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-00039710: 2020 746f 7461 6c20 6172 7261 7973 2064    total arrays d
-00039720: 656c 6574 6564 0d0a 2020 2020 2020 2020  eleted..        
-00039730: 2222 220d 0a20 2020 2020 2020 2069 6d70  """..        imp
-00039740: 6f72 7420 6763 0d0a 0d0a 2020 2020 2020  ort gc....      
-00039750: 2020 6763 2e63 6f6c 6c65 6374 2829 0d0a    gc.collect()..
-00039760: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00039770: 2072 632e 5265 6379 636c 6547 6172 6261   rc.RecycleGarba
-00039780: 6765 436f 6c6c 6563 744e 6f77 2874 696d  geCollectNow(tim
-00039790: 656f 7574 295b 2254 6f74 616c 4465 6c65  eout)["TotalDele
-000397a0: 7465 6422 5d0d 0a20 2020 2020 2020 2069  ted"]..        i
-000397b0: 6620 7265 7375 6c74 203e 2030 3a0d 0a20  f result > 0:.. 
-000397c0: 2020 2020 2020 2020 2020 2072 632e 5265             rc.Re
-000397d0: 6379 636c 6547 6172 6261 6765 436f 6c6c  cycleGarbageColl
-000397e0: 6563 744e 6f77 2874 696d 656f 7574 290d  ectNow(timeout).
-000397f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00039800: 7265 7375 6c74 0d0a 0d0a 2020 2020 4073  result....    @s
-00039810: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-00039820: 2064 6566 2074 696d 656f 7574 2874 696d   def timeout(tim
-00039830: 656f 7574 3a20 696e 7420 3d20 3130 3029  eout: int = 100)
-00039840: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00039850: 2020 2020 2020 2020 5061 7373 2074 6865          Pass the
-00039860: 2067 6172 6261 6765 2063 6f6c 6c65 6374   garbage collect
-00039870: 6f72 2074 696d 656f 7574 2076 616c 7565  or timeout value
-00039880: 2074 6f20 6578 7069 7265 2e0d 0a20 2020   to expire...   
-00039890: 2020 2020 2054 6865 2074 696d 656f 7574       The timeout
-000398a0: 2076 616c 7565 2069 7320 726f 7567 686c   value is roughl
-000398b0: 7920 696e 2032 2f35 2073 6563 732e 0d0a  y in 2/5 secs...
-000398c0: 2020 2020 2020 2020 4120 7661 6c75 6520          A value 
-000398d0: 6f66 2031 3030 2069 7320 7573 7561 6c6c  of 100 is usuall
-000398e0: 7920 6162 6f75 7420 3430 2073 6563 6f6e  y about 40 secon
-000398f0: 6473 2e0d 0a20 2020 2020 2020 2049 6620  ds...        If 
-00039900: 616e 2061 7272 6179 2068 6173 206e 6f74  an array has not
-00039910: 2062 6565 6e20 7265 7573 6564 2062 7920   been reused by 
-00039920: 7468 6520 7469 6d65 6f75 742c 2069 7420  the timeout, it 
-00039930: 6973 2070 6572 6d61 6e65 6e74 6c79 2064  is permanently d
-00039940: 656c 6574 6564 2e0d 0a0d 0a20 2020 2020  eleted.....     
-00039950: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
-00039960: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
-00039970: 2020 2020 2070 7265 7669 6f75 7320 7469       previous ti
-00039980: 6d65 7370 616e 0d0a 2020 2020 2020 2020  mespan..        
-00039990: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
-000399a0: 7572 6e20 7263 2e52 6563 7963 6c65 5365  urn rc.RecycleSe
-000399b0: 7447 6172 6261 6765 436f 6c6c 6563 7454  tGarbageCollectT
-000399c0: 696d 656f 7574 2874 696d 656f 7574 290d  imeout(timeout).
-000399d0: 0a0d 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d  .....# ---------
-000399e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000399f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039a10: 2d0d 0a63 6c61 7373 204c 6564 6765 723a  -..class Ledger:
-00039a20: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-00039a30: 686f 640d 0a20 2020 2064 6566 206f 6e28  hod..    def on(
-00039a40: 293a 0d0a 2020 2020 2020 2020 2222 2254  ):..        """T
-00039a50: 7572 6e20 7468 6520 6d61 7468 206c 6564  urn the math led
-00039a60: 6765 7220 6f6e 2074 6f20 7265 636f 7264  ger on to record
-00039a70: 2061 6c6c 2061 7272 6179 206d 6174 6820   all array math 
-00039a80: 726f 7574 696e 6573 2222 220d 0a20 2020  routines"""..   
-00039a90: 2020 2020 2072 6574 7572 6e20 5479 7065       return Type
-00039aa0: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
-00039ab0: 6765 722e 5f4c 6564 6765 724f 6e28 290d  ger._LedgerOn().
-00039ac0: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
-00039ad0: 7468 6f64 0d0a 2020 2020 6465 6620 6f66  thod..    def of
-00039ae0: 6628 293a 0d0a 2020 2020 2020 2020 2222  f():..        ""
-00039af0: 2254 7572 6e20 7468 6520 6d61 7468 206c  "Turn the math l
-00039b00: 6564 6765 7220 6f66 6622 2222 0d0a 2020  edger off"""..  
-00039b10: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
-00039b20: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
-00039b30: 6467 6572 2e5f 4c65 6467 6572 4f66 6628  dger._LedgerOff(
-00039b40: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
-00039b50: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
-00039b60: 6475 6d70 2864 6174 6173 6574 3d54 7275  dump(dataset=Tru
-00039b70: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
-00039b80: 5072 696e 7420 6f75 7420 7468 6520 6d61  Print out the ma
-00039b90: 7468 206c 6564 6765 7222 2222 0d0a 2020  th ledger"""..  
-00039ba0: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
-00039bb0: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
-00039bc0: 6467 6572 2e5f 4c65 6467 6572 4475 6d70  dger._LedgerDump
-00039bd0: 2864 6174 6173 6574 3d64 6174 6173 6574  (dataset=dataset
-00039be0: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
-00039bf0: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
-00039c00: 746f 5f66 696c 6528 6669 6c65 6e61 6d65  to_file(filename
-00039c10: 293a 0d0a 2020 2020 2020 2020 2222 2253  ):..        """S
-00039c20: 6176 6520 7468 6520 6d61 7468 206c 6564  ave the math led
-00039c30: 6765 7220 746f 2061 2066 696c 6522 2222  ger to a file"""
-00039c40: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00039c50: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
-00039c60: 7468 4c65 6467 6572 2e5f 4c65 6467 6572  thLedger._Ledger
-00039c70: 4475 6d70 4669 6c65 2866 696c 656e 616d  DumpFile(filenam
-00039c80: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
-00039c90: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
-00039ca0: 2063 6c65 6172 2829 3a0d 0a20 2020 2020   clear():..     
-00039cb0: 2020 2022 2222 436c 6561 7220 616c 6c20     """Clear all 
-00039cc0: 7468 6520 656e 7472 6965 7320 696e 2074  the entries in t
-00039cd0: 6865 206d 6174 6820 6c65 6467 6572 2222  he math ledger""
-00039ce0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-00039cf0: 6e20 5479 7065 5265 6769 7374 6572 2e4d  n TypeRegister.M
-00039d00: 6174 684c 6564 6765 722e 5f4c 6564 6765  athLedger._Ledge
-00039d10: 7243 6c65 6172 2829 0d0a 0d0a 0d0a 2320  rClear()......# 
-00039d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039d50: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2320 7468  ----------..# th
-00039d60: 6973 2069 7320 6361 6c6c 6564 2077 6865  is is called whe
-00039d70: 6e20 7468 6520 6d6f 6475 6c65 2069 7320  n the module is 
-00039d80: 6c6f 6164 6564 0d0a 5f46 6978 7570 446f  loaded.._FixupDo
-00039d90: 6353 7472 696e 6773 2829 0d0a 0d0a 2320  cStrings()....# 
-00039da0: 4e4f 5445 3a20 4b65 6570 2074 6869 7320  NOTE: Keep this 
-00039db0: 6174 2074 6865 2065 6e64 206f 6620 7468  at the end of th
-00039dc0: 6520 6669 6c65 0d0a 2320 2d2d 2d2d 2d2d  e file..# ------
-00039dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e830: 2320 7072 6573 6572 7665 2068 6967 6820  # preserve high 
+0002e840: 6269 740d 0a20 2020 2020 2020 2020 2020  bit..           
+0002e850: 2020 2020 2020 2020 2020 2020 2072 6573               res
+0002e860: 756c 7420 3d20 6e70 2e75 696e 7436 3428  ult = np.uint64(
+0002e870: 7265 7375 6c74 290d 0a20 2020 2020 2020  result)..       
+0002e880: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002e890: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002e8a0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0002e8b0: 6c74 203d 206e 702e 696e 7436 3428 7265  lt = np.int64(re
+0002e8c0: 7375 6c74 290d 0a20 2020 2020 2020 2020  sult)..         
+0002e8d0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0002e8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e8f0: 2020 7265 7375 6c74 203d 206e 702e 666c    result = np.fl
+0002e900: 6f61 7436 3428 7265 7375 6c74 290d 0a0d  oat64(result)...
+0002e910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e920: 2023 204d 494e 2f4d 4158 206e 6565 6420   # MIN/MAX need 
+0002e930: 746f 2072 6574 7572 6e20 7361 6d65 2074  to return same t
+0002e940: 7970 650d 0a20 2020 2020 2020 2020 2020  ype..           
+0002e950: 2020 2020 2069 6620 7265 6475 6365 5f66       if reduce_f
+0002e960: 756e 6320 3e3d 2052 4544 5543 455f 4655  unc >= REDUCE_FU
+0002e970: 4e43 5449 4f4e 532e 5245 4455 4345 5f4d  NCTIONS.REDUCE_M
+0002e980: 494e 3a0d 0a20 2020 2020 2020 2020 2020  IN:..           
+0002e990: 2020 2020 2020 2020 2023 206d 696e 206d           # min m
+0002e9a0: 6178 206e 6f74 2061 6c6c 6f77 6564 206f  ax not allowed o
+0002e9b0: 6e20 656d 7074 7920 6172 7261 7920 7065  n empty array pe
+0002e9c0: 7220 756e 6974 2074 6573 740d 0a20 2020  r unit test..   
+0002e9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e9e0: 2069 6620 6c65 6e28 6172 6773 5b30 5d29   if len(args[0])
+0002e9f0: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
+0002ea00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ea10: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+0002ea20: 2822 6d69 6e2f 6d61 7820 6172 6720 6973  ("min/max arg is
+0002ea30: 2061 6e20 656d 7074 7920 7365 7175 656e   an empty sequen
+0002ea40: 6365 2e22 290d 0a0d 0a20 2020 2020 2020  ce.")....       
+0002ea50: 2020 2020 2020 2020 2020 2020 2023 206d               # m
+0002ea60: 696e 2f6d 6178 2f6e 616e 6d69 6e2f 6e61  in/max/nanmin/na
+0002ea70: 6e6d 6178 202d 2d20 7361 6d65 2072 6573  nmax -- same res
+0002ea80: 756c 740d 0a20 2020 2020 2020 2020 2020  ult..           
+0002ea90: 2020 2020 2020 2020 2069 6620 6474 7970           if dtyp
+0002eaa0: 6520 3d3d 206e 702e 626f 6f6c 5f3a 0d0a  e == np.bool_:..
+0002eab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eac0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0002ead0: 206e 702e 626f 6f6c 2872 6573 756c 7429   np.bool(result)
+0002eae0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002eaf0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002eb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eb10: 2020 2020 2072 6573 756c 7420 3d20 6474       result = dt
+0002eb20: 7970 652e 7479 7065 2872 6573 756c 7429  ype.type(result)
+0002eb30: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002eb40: 2020 2020 2020 2020 6966 206b 6565 7064          if keepd
+0002eb50: 696d 733a 0d0a 2020 2020 2020 2020 2020  ims:..          
+0002eb60: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0002eb70: 7375 6c74 203d 2046 6173 7441 7272 6179  sult = FastArray
+0002eb80: 285b 7265 7375 6c74 5d29 2e61 7374 7970  ([result]).astyp
+0002eb90: 6528 6474 7970 6529 0d0a 2020 2020 2020  e(dtype)..      
+0002eba0: 2020 2020 2020 2020 2020 656c 6966 206b            elif k
+0002ebb0: 6565 7064 696d 733a 0d0a 2020 2020 2020  eepdims:..      
+0002ebc0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002ebd0: 666f 7263 6520 6261 636b 2069 6e74 6f20  force back into 
+0002ebe0: 616e 2061 7272 6179 2066 726f 6d20 7363  an array from sc
+0002ebf0: 616c 6172 0d0a 2020 2020 2020 2020 2020  alar..          
+0002ec00: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+0002ec10: 203d 2046 6173 7441 7272 6179 285b 7265   = FastArray([re
+0002ec20: 7375 6c74 5d29 0d0a 0d0a 2020 2020 2020  sult])....      
+0002ec30: 2020 2020 2020 2020 2020 2320 7765 2064            # we d
+0002ec40: 6964 2074 6865 2072 6564 7563 652c 206e  id the reduce, n
+0002ec50: 6f77 2072 6574 7572 6e20 7468 6520 7265  ow return the re
+0002ec60: 7375 6c74 0d0a 2020 2020 2020 2020 2020  sult..          
+0002ec70: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+0002ec80: 756c 740d 0a0d 0a20 2020 2020 2020 2023  ult....        #
+0002ec90: 2063 6865 636b 2066 6f72 206e 6f72 6d61   check for norma
+0002eca0: 6c20 6361 6c6c 2066 756e 6374 696f 6e0d  l call function.
+0002ecb0: 0a20 2020 2020 2020 2065 6c69 6620 6661  .        elif fa
+0002ecc0: 7374 5f66 756e 6374 696f 6e20 6973 206e  st_function is n
+0002ecd0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+0002ece0: 2020 2020 2020 2320 4361 6c6c 2074 6865        # Call the
+0002ecf0: 2046 6173 7441 7272 6179 2041 5049 7320   FastArray APIs 
+0002ed00: 696e 7374 6561 6420 6f66 206e 756d 7079  instead of numpy
+0002ed10: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002ed20: 6361 6c6c 6d6f 6465 203d 2027 6627 0d0a  callmode = 'f'..
+0002ed30: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0002ed40: 6c74 7320 3d20 4e6f 6e65 0d0a 2020 2020  lts = None..    
+0002ed50: 2020 2020 2020 2020 6966 2075 6675 6e63          if ufunc
+0002ed60: 2e6e 696e 203d 3d20 323a 0d0a 2020 2020  .nin == 2:..    
+0002ed70: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
+0002ed80: 6c5f 6e75 6d20 3d20 2d31 0d0a 2020 2020  l_num = -1..    
+0002ed90: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+0002eda0: 696e 616c 5f64 7479 7065 2069 7320 6e6f  inal_dtype is no
+0002edb0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+0002edc0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002edd0: 6669 6e61 6c5f 6474 7970 6520 3d3d 206e  final_dtype == n
+0002ede0: 702e 626f 6f6c 5f3a 0d0a 2020 2020 2020  p.bool_:..      
+0002edf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ee00: 2020 6669 6e61 6c5f 6e75 6d20 3d20 300d    final_num = 0.
+0002ee10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ee20: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ee40: 2020 2020 6669 6e61 6c5f 6e75 6d20 3d20      final_num = 
+0002ee50: 6669 6e61 6c5f 6474 7970 652e 6e75 6d0d  final_dtype.num.
+0002ee60: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002ee70: 2020 2023 2062 6563 6175 7365 2073 6361     # because sca
+0002ee80: 6c61 7273 2063 616e 2062 6520 7061 7373  lars can be pass
+0002ee90: 6564 2061 7320 6e70 2e69 6e74 3634 2838  ed as np.int64(8
+0002eea0: 3634 3030 3029 0d0a 2020 2020 2020 2020  64000)..        
+0002eeb0: 2020 2020 2020 2020 6966 2074 7970 6528          if type(
+0002eec0: 6172 6773 5b30 5d29 2069 6e20 674e 756d  args[0]) in gNum
+0002eed0: 7079 5363 616c 6172 5479 7065 3a0d 0a20  pyScalarType:.. 
+0002eee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eef0: 2020 2023 2070 7269 6e74 2827 636f 6e76     # print('conv
+0002ef00: 6572 7469 6e67 2061 7267 3127 2c20 6172  erting arg1', ar
+0002ef10: 6773 5b30 5d29 0d0a 2020 2020 2020 2020  gs[0])..        
+0002ef20: 2020 2020 2020 2020 2020 2020 6172 6773              args
+0002ef30: 5b30 5d20 3d20 6e70 2e61 7361 7272 6179  [0] = np.asarray
+0002ef40: 2861 7267 735b 305d 290d 0a0d 0a20 2020  (args[0])....   
+0002ef50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002ef60: 7479 7065 2861 7267 735b 315d 2920 696e  type(args[1]) in
+0002ef70: 2067 4e75 6d70 7953 6361 6c61 7254 7970   gNumpyScalarTyp
+0002ef80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002ef90: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
+0002efa0: 2763 6f6e 7665 7274 696e 6720 6172 6732  'converting arg2
+0002efb0: 272c 2061 7267 735b 315d 290d 0a20 2020  ', args[1])..   
+0002efc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002efd0: 2061 7267 735b 315d 203d 206e 702e 6173   args[1] = np.as
+0002efe0: 6172 7261 7928 6172 6773 5b31 5d29 0d0a  array(args[1])..
+0002eff0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f000: 2020 6966 2046 6173 7441 7272 6179 2e56    if FastArray.V
+0002f010: 6572 626f 7365 203e 2032 3a0d 0a20 2020  erbose > 2:..   
+0002f020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f030: 2070 7269 6e74 280d 0a20 2020 2020 2020   print(..       
+0002f040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f050: 2022 2a2a 2a20 6269 6e61 7279 2074 6869   "*** binary thi
+0002f060: 6e6b 2077 6520 6361 6e20 6361 6c6c 222c  nk we can call",
+0002f070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f080: 2020 2020 2020 2020 2020 6661 7374 5f66            fast_f
+0002f090: 756e 6374 696f 6e2c 0d0a 2020 2020 2020  unction,..      
+0002f0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f0b0: 2020 7566 756e 632e 6e69 6e2c 0d0a 2020    ufunc.nin,..  
+0002f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f0d0: 2020 2020 2020 7566 756e 632e 6e6f 7574        ufunc.nout
+0002f0e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002f0f0: 2020 2020 2020 2020 2020 2022 6172 6731             "arg1
+0002f100: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0002f110: 2020 2020 2020 2020 2020 2020 6172 6773              args
+0002f120: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
+0002f130: 2020 2020 2020 2020 2020 2020 2020 2261                "a
+0002f140: 7267 3222 2c0d 0a20 2020 2020 2020 2020  rg2",..         
+0002f150: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0002f160: 7267 735b 315d 2c0d 0a20 2020 2020 2020  rgs[1],..       
+0002f170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f180: 2022 6f75 7422 2c0d 0a20 2020 2020 2020   "out",..       
+0002f190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f1a0: 206f 7574 5f61 7267 732c 0d0a 2020 2020   out_args,..    
+0002f1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f1c0: 2020 2020 2266 696e 616c 222c 0d0a 2020      "final",..  
+0002f1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f1e0: 2020 2020 2020 6669 6e61 6c5f 6e75 6d2c        final_num,
+0002f1f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f200: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0002f210: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+0002f220: 6f75 745f 6172 6773 2920 3d3d 2031 3a0d  out_args) == 1:.
+0002f230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f240: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
+0002f250: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+0002f260: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
+0002f270: 485f 5457 4f5f 494e 5055 5453 280d 0a20  H_TWO_INPUTS(.. 
+0002f280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f290: 2020 2020 2020 2028 6172 6773 5b30 5d2c         (args[0],
+0002f2a0: 2061 7267 735b 315d 2c20 6f75 745f 6172   args[1], out_ar
+0002f2b0: 6773 5b30 5d29 2c20 6661 7374 5f66 756e  gs[0]), fast_fun
+0002f2c0: 6374 696f 6e2c 2066 696e 616c 5f6e 756d  ction, final_num
+0002f2d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f2e0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0002f2f0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0002f300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f310: 2020 2020 7265 7375 6c74 7320 3d20 5479      results = Ty
+0002f320: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
+0002f330: 6564 6765 722e 5f42 4153 4943 4d41 5448  edger._BASICMATH
+0002f340: 5f54 574f 5f49 4e50 5554 5328 0d0a 2020  _TWO_INPUTS(..  
+0002f350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f360: 2020 2020 2020 2861 7267 735b 305d 2c20        (args[0], 
+0002f370: 6172 6773 5b31 5d29 2c20 6661 7374 5f66  args[1]), fast_f
+0002f380: 756e 6374 696f 6e2c 2066 696e 616c 5f6e  unction, final_n
+0002f390: 756d 0d0a 2020 2020 2020 2020 2020 2020  um..            
+0002f3a0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+0002f3b0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0002f3c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002f3d0: 666f 7220 636f 6e76 6572 7369 6f6e 2066  for conversion f
+0002f3e0: 756e 6374 696f 6e73 0d0a 2020 2020 2020  unctions..      
+0002f3f0: 2020 2020 2020 2020 2020 2320 6474 7970            # dtyp
+0002f400: 653d 6b77 6172 6773 2e67 6574 2827 6474  e=kwargs.get('dt
+0002f410: 7970 6527 2c4e 6f6e 6529 0d0a 2020 2020  ype',None)..    
+0002f420: 2020 2020 2020 2020 2020 2020 6966 2046              if F
+0002f430: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
+0002f440: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
+0002f450: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0002f460: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0002f470: 2020 2020 2020 2020 2020 2022 2a2a 2a20             "*** 
+0002f480: 756e 6172 7920 7468 696e 6b20 7765 2063  unary think we c
+0002f490: 616e 2063 616c 6c22 2c0d 0a20 2020 2020  an call",..     
+0002f4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f4b0: 2020 2066 6173 745f 6675 6e63 7469 6f6e     fast_function
+0002f4c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002f4d0: 2020 2020 2020 2020 2020 2075 6675 6e63             ufunc
+0002f4e0: 2e6e 696e 2c0d 0a20 2020 2020 2020 2020  .nin,..         
+0002f4f0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+0002f500: 6675 6e63 2e6e 6f75 742c 0d0a 2020 2020  func.nout,..    
+0002f510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f520: 2020 2020 2261 7267 3122 2c0d 0a20 2020      "arg1",..   
+0002f530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f540: 2020 2020 2061 7267 735b 305d 2c0d 0a20       args[0],.. 
+0002f550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f560: 2020 2020 2020 2022 6f75 7422 2c0d 0a20         "out",.. 
+0002f570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f580: 2020 2020 2020 206f 7574 5f61 7267 732c         out_args,
+0002f590: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f5a0: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+0002f5b0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+0002f5c0: 6e28 6f75 745f 6172 6773 2920 3d3d 2031  n(out_args) == 1
+0002f5d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002f5e0: 2020 2020 2020 2072 6573 756c 7473 203d         results =
+0002f5f0: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
+0002f600: 7468 4c65 6467 6572 2e5f 4241 5349 434d  thLedger._BASICM
+0002f610: 4154 485f 4f4e 455f 494e 5055 5428 2861  ATH_ONE_INPUT((a
+0002f620: 7267 735b 305d 2c20 6f75 745f 6172 6773  rgs[0], out_args
+0002f630: 5b30 5d29 2c20 6661 7374 5f66 756e 6374  [0]), fast_funct
+0002f640: 696f 6e2c 2030 290d 0a20 2020 2020 2020  ion, 0)..       
+0002f650: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0002f660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f670: 2020 2020 7265 7375 6c74 7320 3d20 5479      results = Ty
+0002f680: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
+0002f690: 6564 6765 722e 5f42 4153 4943 4d41 5448  edger._BASICMATH
+0002f6a0: 5f4f 4e45 5f49 4e50 5554 2828 6172 6773  _ONE_INPUT((args
+0002f6b0: 5b30 5d29 2c20 6661 7374 5f66 756e 6374  [0]), fast_funct
+0002f6c0: 696f 6e2c 2030 290d 0a0d 0a20 2020 2020  ion, 0)....     
+0002f6d0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+0002f6e0: 7320 6973 206e 6f74 204e 6f6e 6520 616e  s is not None an
+0002f6f0: 6420 6c65 6e28 6f75 745f 6172 6773 2920  d len(out_args) 
+0002f700: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
+0002f710: 2020 2020 2020 2023 2077 6865 6e20 7468         # when th
+0002f720: 6520 6f75 7470 7574 2061 7267 756d 656e  e output argumen
+0002f730: 7420 6973 2066 6f72 6365 6420 6275 7420  t is forced but 
+0002f740: 7765 2063 616c 6375 6c61 7465 2069 7420  we calculate it 
+0002f750: 696e 746f 2061 6e6f 7468 6572 2061 7272  into another arr
+0002f760: 6179 2077 6520 6e65 6564 2074 6f20 636f  ay we need to co
+0002f770: 7079 2074 6865 2072 6573 756c 7420 696e  py the result in
+0002f780: 746f 2074 6865 206f 7574 7075 740d 0a20  to the output.. 
+0002f790: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002f7a0: 6620 6e6f 7420 7263 2e43 6f6d 7061 7265  f not rc.Compare
+0002f7b0: 4e75 6d70 794d 656d 4164 6472 6573 7328  NumpyMemAddress(
+0002f7c0: 6f75 745f 6172 6773 5b30 5d2c 2072 6573  out_args[0], res
+0002f7d0: 756c 7473 293a 0d0a 2020 2020 2020 2020  ults):..        
+0002f7e0: 2020 2020 2020 2020 2020 2020 6966 2046              if F
+0002f7f0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
+0002f800: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
+0002f810: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0002f820: 7269 6e74 280d 0a20 2020 2020 2020 2020  rint(..         
+0002f830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f840: 2020 2022 2a2a 2a20 7065 7266 6f72 6d69     "*** performi
+0002f850: 6e67 2061 6e20 6578 7472 6120 636f 7079  ng an extra copy
+0002f860: 2074 6f20 6d61 7463 6820 6f75 7470 7574   to match output
+0002f870: 2072 6571 7565 7374 222c 0d0a 2020 2020   request",..    
+0002f880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f890: 2020 2020 2020 2020 6964 286f 7574 5f61          id(out_a
+0002f8a0: 7267 735b 305d 292c 0d0a 2020 2020 2020  rgs[0]),..      
+0002f8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f8c0: 2020 2020 2020 6964 2872 6573 756c 7473        id(results
+0002f8d0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+0002f8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f8f0: 6f75 745f 6172 6773 5b30 5d2c 0d0a 2020  out_args[0],..  
+0002f900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f910: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+0002f920: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+0002f930: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+0002f940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f950: 2020 206f 7574 5f61 7267 735b 305d 5b2e     out_args[0][.
+0002f960: 2e2e 5d20 3d20 7265 7375 6c74 730d 0a20  ..] = results.. 
+0002f970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f980: 2020 2072 6573 756c 7473 203d 206f 7574     results = out
+0002f990: 5f61 7267 735b 305d 0d0a 0d0a 2020 2020  _args[0]....    
+0002f9a0: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
+0002f9b0: 7473 2069 7320 4e6f 6e65 3a0d 0a20 2020  ts is None:..   
+0002f9c0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+0002f9d0: 756e 7465 640d 0a20 2020 2020 2020 2020  unted..         
+0002f9e0: 2020 2020 2020 2023 2063 616c 6c6d 6f64         # callmod
+0002f9f0: 653d 2770 270d 0a20 2020 2020 2020 2020  e='p'..         
+0002fa00: 2020 2020 2020 2069 6620 4661 7374 4172         if FastAr
+0002fa10: 7261 792e 5665 7262 6f73 6520 3e20 313a  ray.Verbose > 1:
+0002fa20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002fa30: 2020 2020 2020 7072 696e 7428 222a 2a2a        print("***
+0002fa40: 7075 6e74 6564 2075 6675 6e63 3a20 222c  punted ufunc: ",
+0002fa50: 2075 6675 6e63 2e6e 696e 2c20 7566 756e   ufunc.nin, ufun
+0002fa60: 632e 6e6f 7574 2c20 7566 756e 632c 2061  c.nout, ufunc, a
+0002fa70: 7267 732c 206b 7761 7267 7329 0d0a 2020  rgs, kwargs)..  
+0002fa80: 2020 2020 2020 2020 2020 2020 2020 6661                fa
+0002fa90: 7374 5f66 756e 6374 696f 6e20 3d20 4e6f  st_function = No
+0002faa0: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
+0002fab0: 2020 2020 2320 6661 6c6c 2074 6f20 2269      # fall to "i
+0002fac0: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
+0002fad0: 6973 204e 6f6e 6522 2061 6e64 2072 756e  is None" and run
+0002fae0: 2074 6872 6f75 6768 206e 756d 7079 2e2e   through numpy..
+0002faf0: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+0002fb00: 2023 2072 6573 7065 6374 2064 7479 7065   # respect dtype
+0002fb10: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+0002fb20: 6966 2064 7479 7065 2069 7320 6e6f 7420  if dtype is not 
+0002fb30: 4e6f 6e65 2061 6e64 2069 7369 6e73 7461  None and isinsta
+0002fb40: 6e63 6528 7265 7375 6c74 732c 206e 702e  nce(results, np.
+0002fb50: 6e64 6172 7261 7929 3a0d 0a20 2020 2020  ndarray):..     
+0002fb60: 2020 2020 2020 2020 2020 2069 6620 6474             if dt
+0002fb70: 7970 6520 6973 206e 6f74 2072 6573 756c  ype is not resul
+0002fb80: 7473 2e64 7479 7065 3a0d 0a20 2020 2020  ts.dtype:..     
+0002fb90: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002fba0: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
+0002fbb0: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
+0002fbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fbd0: 2020 7072 696e 7428 222a 2a2a 7265 7375    print("***resu
+0002fbe0: 6c74 2066 726f 6d20 7265 6475 6365 222c  lt from reduce",
+0002fbf0: 2072 6573 756c 7473 2c20 7265 7375 6c74   results, result
+0002fc00: 732e 6474 7970 652c 2064 7479 7065 290d  s.dtype, dtype).
+0002fc10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002fc20: 2020 2020 2023 2063 6f6e 7665 7274 0d0a       # convert..
+0002fc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fc40: 2020 2020 7265 7375 6c74 7320 3d20 7265      results = re
+0002fc50: 7375 6c74 732e 6173 7479 7065 2864 7479  sults.astype(dty
+0002fc60: 7065 290d 0a0d 0a20 2020 2020 2020 2069  pe)....        i
+0002fc70: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
+0002fc80: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
+0002fc90: 2020 2020 2020 2320 4361 6c6c 2074 6865        # Call the
+0002fca0: 206e 756d 7079 2041 5049 730d 0a20 2020   numpy APIs..   
+0002fcb0: 2020 2020 2020 2020 2023 2043 6865 636b           # Check
+0002fcc0: 2069 6620 7765 2063 616e 2075 7365 2074   if we can use t
+0002fcd0: 6865 2072 6563 7963 6c65 6420 6172 7261  he recycled arra
+0002fce0: 7973 2074 6f20 6176 6f69 6420 616e 2061  ys to avoid an a
+0002fcf0: 6c6c 6f63 6174 696f 6e20 666f 7220 7468  llocation for th
+0002fd00: 6520 6f75 7470 7574 2061 7272 6179 0d0a  e output array..
+0002fd10: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0002fd20: 2046 6173 7441 7272 6179 2e56 6572 626f   FastArray.Verbo
+0002fd30: 7365 203e 2031 3a0d 0a20 2020 2020 2020  se > 1:..       
+0002fd40: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+0002fd50: 2a2a 7075 6e74 6564 206f 6e20 6e75 6d70  **punted on nump
+0002fd60: 7921 222c 2075 6675 6e63 290d 0a0d 0a20  y!", ufunc).... 
+0002fd70: 2020 2020 2020 2020 2020 2023 204e 4f54             # NOT
+0002fd80: 453a 2057 6520 6172 6520 676f 696e 6720  E: We are going 
+0002fd90: 746f 206c 6574 206e 756d 7079 2070 726f  to let numpy pro
+0002fda0: 6365 7373 2069 740d 0a20 2020 2020 2020  cess it..       
+0002fdb0: 2020 2020 2023 2057 6520 6d75 7374 2063       # We must c
+0002fdc0: 6861 6e67 6520 616c 6c20 4661 7374 4172  hange all FastAr
+0002fdd0: 7261 7973 2074 6f20 6e6f 726d 616c 206e  rays to normal n
+0002fde0: 756d 7079 2061 7272 6179 730d 0a20 2020  umpy arrays..   
+0002fdf0: 2020 2020 2020 2020 2061 7267 7320 3d20           args = 
+0002fe00: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
+0002fe10: 666f 7220 696e 7075 7420 696e 2069 6e70  for input in inp
+0002fe20: 7574 733a 0d0a 2020 2020 2020 2020 2020  uts:..          
+0002fe30: 2020 2020 2020 2320 666c 6970 2062 6163        # flip bac
+0002fe40: 6b20 746f 206e 756d 7079 2074 6f20 6176  k to numpy to av
+0002fe50: 6f69 6420 6572 726f 7273 2077 6865 6e20  oid errors when 
+0002fe60: 6e75 6d70 7920 6361 6c63 756c 6174 6573  numpy calculates
+0002fe70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002fe80: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0002fe90: 696e 7075 742c 2046 6173 7441 7272 6179  input, FastArray
+0002fea0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0002feb0: 2020 2020 2020 2020 6172 6773 2e61 7070          args.app
+0002fec0: 656e 6428 696e 7075 742e 7669 6577 286e  end(input.view(n
+0002fed0: 702e 6e64 6172 7261 7929 290d 0a20 2020  p.ndarray))..   
+0002fee0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002fef0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002ff00: 2020 2020 2020 2020 6172 6773 2e61 7070          args.app
+0002ff10: 656e 6428 696e 7075 7429 0d0a 0d0a 2020  end(input)....  
+0002ff20: 2020 2020 2020 2020 2020 6966 2068 6173            if has
+0002ff30: 5f6f 7574 7075 7473 3a0d 0a20 2020 2020  _outputs:..     
+0002ff40: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
+0002ff50: 7473 203d 206b 7761 7267 732e 706f 7028  ts = kwargs.pop(
+0002ff60: 226f 7574 222c 204e 6f6e 6529 0d0a 2020  "out", None)..  
+0002ff70: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002ff80: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
+0002ff90: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+0002ffa0: 7574 5f61 7267 7320 3d20 5b5d 0d0a 2020  ut_args = []..  
+0002ffb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ffc0: 2020 666f 7220 6f75 7470 7574 2069 6e20    for output in 
+0002ffd0: 6f75 7470 7574 733a 0d0a 2020 2020 2020  outputs:..      
+0002ffe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fff0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00030000: 6f75 7470 7574 2c20 4661 7374 4172 7261  output, FastArra
+00030010: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+00030020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030030: 206f 7574 5f61 7267 732e 6170 7065 6e64   out_args.append
+00030040: 286f 7574 7075 742e 7669 6577 286e 702e  (output.view(np.
+00030050: 6e64 6172 7261 7929 290d 0a20 2020 2020  ndarray))..     
+00030060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030070: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00030080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030090: 2020 2020 2020 6f75 745f 6172 6773 2e61        out_args.a
+000300a0: 7070 656e 6428 6f75 7470 7574 290d 0a20  ppend(output).. 
+000300b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000300c0: 2020 2023 2072 6570 6c61 6365 206f 7574     # replace out
+000300d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000300e0: 2020 2020 2020 6b77 6172 6773 5b22 6f75        kwargs["ou
+000300f0: 7422 5d20 3d20 7475 706c 6528 6f75 745f  t"] = tuple(out_
+00030100: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
+00030110: 2020 2020 2023 204e 4f54 453a 2049 6620       # NOTE: If 
+00030120: 7468 6520 7370 6563 6966 6965 6420 7566  the specified uf
+00030130: 756e 6320 2b20 696e 7075 7473 2063 6f6d  unc + inputs com
+00030140: 6269 6e61 7469 6f6e 2069 736e 2774 2073  bination isn't s
+00030150: 7570 706f 7274 6564 2062 7920 6e75 6d70  upported by nump
+00030160: 7920 6569 7468 6572 2c0d 0a20 2020 2020  y either,..     
+00030170: 2020 2020 2020 2023 2020 2020 2020 2061         #       a
+00030180: 7320 6f66 206e 756d 7079 2031 2e31 372e  s of numpy 1.17.
+00030190: 7820 7468 6973 2063 616c 6c20 7769 6c6c  x this call will
+000301a0: 2065 6e64 2075 7020 7261 6973 696e 6720   end up raising 
+000301b0: 6120 5546 756e 6354 7970 6545 7272 6f72  a UFuncTypeError
+000301c0: 2073 6f20 7468 6520 7265 7374 0d0a 2020   so the rest..  
+000301d0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+000301e0: 2020 6f66 2074 6865 2046 6173 7441 7272    of the FastArr
+000301f0: 6179 2e5f 5f61 7272 6179 5f75 6675 6e63  ay.__array_ufunc
+00030200: 5f5f 2062 6f64 7920 2862 656c 6f77 2920  __ body (below) 
+00030210: 776f 6e27 7420 656e 6420 7570 2065 7865  won't end up exe
+00030220: 6375 7469 6e67 2e0d 0a20 2020 2020 2020  cuting...       
+00030230: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
+00030240: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+00030250: 4c65 6467 6572 2e5f 4152 5241 595f 5546  Ledger._ARRAY_UF
+00030260: 554e 4328 7375 7065 7228 4661 7374 4172  UNC(super(FastAr
+00030270: 7261 792c 2073 656c 6629 2c20 7566 756e  ray, self), ufun
+00030280: 632c 206d 6574 686f 642c 202a 6172 6773  c, method, *args
+00030290: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+000302a0: 2020 2020 2020 2023 2049 6620 7269 7074         # If ript
+000302b0: 6162 6c65 2068 6173 206e 6f74 2069 6d70  able has not imp
+000302c0: 6c65 6d65 6e74 6564 2061 2063 6572 7461  lemented a certa
+000302d0: 696e 2075 6675 6e63 2028 6f72 2064 6f65  in ufunc (or doe
+000302e0: 736e 2774 2073 7570 706f 7274 2069 7420  sn't support it 
+000302f0: 666f 7220 7468 6520 6769 7665 6e20 6172  for the given ar
+00030300: 6775 6d65 6e74 7329 2c0d 0a20 2020 2020  guments),..     
+00030310: 2020 2023 2065 6d69 7420 6120 7761 726e     # emit a warn
+00030320: 696e 6720 6162 6f75 7420 6974 2074 6f20  ing about it to 
+00030330: 6c65 7420 7468 6520 7573 6572 206b 6e6f  let the user kno
+00030340: 772e 0d0a 2020 2020 2020 2020 2320 5768  w...        # Wh
+00030350: 656e 206e 756d 7079 2064 6f65 7320 6e6f  en numpy does no
+00030360: 7420 7375 7070 6f72 7420 7468 6520 7566  t support the uf
+00030370: 756e 632b 696e 7075 7473 2065 6974 6865  unc+inputs eithe
+00030380: 722c 2077 6520 776f 6e27 7420 7265 6163  r, we won't reac
+00030390: 6820 7468 6973 2070 6f69 6e74 2028 6173  h this point (as
+000303a0: 206f 6620 6e75 6d70 7920 312e 3137 2e78   of numpy 1.17.x
+000303b0: 292c 0d0a 2020 2020 2020 2020 2320 7369  ),..        # si
+000303c0: 6e63 6520 6e75 6d70 7920 7769 6c6c 2072  nce numpy will r
+000303d0: 6169 7365 2061 2055 4675 6e63 5479 7065  aise a UFuncType
+000303e0: 4572 726f 7220 6561 726c 6965 7220 2862  Error earlier (b
+000303f0: 6566 6f72 6520 7468 6973 2070 6f69 6e74  efore this point
+00030400: 2920 7261 7468 6572 2074 6861 6e20 6166  ) rather than af
+00030410: 7465 7220 7765 2072 6574 7572 6e20 4e6f  ter we return No
+00030420: 7449 6d70 6c65 6d65 6e74 6564 2e0d 0a20  tImplemented... 
+00030430: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+00030440: 7320 6973 204e 6f74 496d 706c 656d 656e  s is NotImplemen
+00030450: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
+00030460: 2020 7761 726e 696e 6773 2e77 6172 6e28    warnings.warn(
+00030470: 6622 2a2a 2a75 6675 6e63 207b 7566 756e  f"***ufunc {ufun
+00030480: 637d 207b 6172 6773 7d20 7b6b 7761 7267  c} {args} {kwarg
+00030490: 737d 2069 7320 6e6f 7420 696d 706c 656d  s} is not implem
+000304a0: 656e 7465 6422 290d 0a20 2020 2020 2020  ented")..       
+000304b0: 2020 2020 2072 6574 7572 6e20 4e6f 7449       return NotI
+000304c0: 6d70 6c65 6d65 6e74 6564 0d0a 0d0a 2020  mplemented....  
+000304d0: 2020 2020 2020 2320 5566 756e 6373 2061        # Ufuncs a
+000304e0: 6c73 6f20 6861 7665 2061 2066 6966 7468  lso have a fifth
+000304f0: 206d 6574 686f 6420 7468 6174 2061 6c6c   method that all
+00030500: 6f77 7320 696e 2070 6c61 6365 206f 7065  ows in place ope
+00030510: 7261 7469 6f6e 7320 746f 2062 6520 7065  rations to be pe
+00030520: 7266 6f72 6d65 6420 7573 696e 6720 6661  rformed using fa
+00030530: 6e63 7920 696e 6465 7869 6e67 2e0d 0a20  ncy indexing... 
+00030540: 2020 2020 2020 2023 204e 6f20 6275 6666         # No buff
+00030550: 6572 696e 6720 6973 2075 7365 6420 6f6e  ering is used on
+00030560: 2074 6865 2064 696d 656e 7369 6f6e 7320   the dimensions 
+00030570: 7768 6572 6520 6661 6e63 7920 696e 6465  where fancy inde
+00030580: 7869 6e67 2069 7320 7573 6564 2c20 736f  xing is used, so
+00030590: 2074 6865 2066 616e 6379 2069 6e64 6578   the fancy index
+000305a0: 2063 616e 206c 6973 7420 616e 2069 7465   can list an ite
+000305b0: 6d20 6d6f 7265 2074 6861 6e20 6f6e 6365  m more than once
+000305c0: 0d0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
+000305d0: 616e 6420 7468 6520 6f70 6572 6174 696f  and the operatio
+000305e0: 6e20 7769 6c6c 2062 6520 7065 7266 6f72  n will be perfor
+000305f0: 6d65 6420 6f6e 2074 6865 2072 6573 756c  med on the resul
+00030600: 7420 6f66 2074 6865 2070 7265 7669 6f75  t of the previou
+00030610: 7320 6f70 6572 6174 696f 6e20 666f 7220  s operation for 
+00030620: 7468 6174 2069 7465 6d2e 0d0a 2020 2020  that item...    
+00030630: 2020 2020 2320 7566 756e 632e 7265 6475      # ufunc.redu
+00030640: 6365 2861 5b2c 2061 7869 732c 2064 7479  ce(a[, axis, dty
+00030650: 7065 2c20 6f75 742c 206b 6565 7064 696d  pe, out, keepdim
+00030660: 735d 2909 5265 6475 6365 7320 6127 7320  s]).Reduces a's 
+00030670: 6469 6d65 6e73 696f 6e20 6279 206f 6e65  dimension by one
+00030680: 2c20 6279 2061 7070 6c79 696e 6720 7566  , by applying uf
+00030690: 756e 6320 616c 6f6e 6720 6f6e 6520 6178  unc along one ax
+000306a0: 6973 2e0d 0a20 2020 2020 2020 2023 2075  is...        # u
+000306b0: 6675 6e63 2e61 6363 756d 756c 6174 6528  func.accumulate(
+000306c0: 6172 7261 795b 2c20 6178 6973 2c20 6474  array[, axis, dt
+000306d0: 7970 652c 206f 7574 5d29 0941 6363 756d  ype, out]).Accum
+000306e0: 756c 6174 6520 7468 6520 7265 7375 6c74  ulate the result
+000306f0: 206f 6620 6170 706c 7969 6e67 2074 6865   of applying the
+00030700: 206f 7065 7261 746f 7220 746f 2061 6c6c   operator to all
+00030710: 2065 6c65 6d65 6e74 732e 0d0a 2020 2020   elements...    
+00030720: 2020 2020 2320 7566 756e 632e 7265 6475      # ufunc.redu
+00030730: 6365 6174 2861 2c20 696e 6469 6365 735b  ceat(a, indices[
+00030740: 2c20 6178 6973 2c20 6474 7970 652c 206f  , axis, dtype, o
+00030750: 7574 5d29 0950 6572 666f 726d 7320 6120  ut]).Performs a 
+00030760: 286c 6f63 616c 2920 7265 6475 6365 2077  (local) reduce w
+00030770: 6974 6820 7370 6563 6966 6965 6420 736c  ith specified sl
+00030780: 6963 6573 206f 7665 7220 6120 7369 6e67  ices over a sing
+00030790: 6c65 2061 7869 732e 0d0a 2020 2020 2020  le axis...      
+000307a0: 2020 2320 7566 756e 632e 6f75 7465 7228    # ufunc.outer(
+000307b0: 412c 2042 2909 4170 706c 7920 7468 6520  A, B).Apply the 
+000307c0: 7566 756e 6320 6f70 2074 6f20 616c 6c20  ufunc op to all 
+000307d0: 7061 6972 7320 2861 2c20 6229 2077 6974  pairs (a, b) wit
+000307e0: 6820 6120 696e 2041 2061 6e64 2062 2069  h a in A and b i
+000307f0: 6e20 422e 0d0a 2020 2020 2020 2020 2320  n B...        # 
+00030800: 7566 756e 632e 6174 2861 2c20 696e 6469  ufunc.at(a, indi
+00030810: 6365 735b 2c20 625d 2909 5065 7266 6f72  ces[, b]).Perfor
+00030820: 6d73 2075 6e62 7566 6665 7265 6420 696e  ms unbuffered in
+00030830: 2070 6c61 6365 206f 7065 7261 7469 6f6e   place operation
+00030840: 206f 6e20 6f70 6572 616e 6420 2761 2720   on operand 'a' 
+00030850: 666f 7220 656c 656d 656e 7473 2073 7065  for elements spe
+00030860: 6369 6669 6564 2062 7920 2769 6e64 6963  cified by 'indic
+00030870: 6573 272e 0d0a 0d0a 2020 2020 2020 2020  es'.....        
+00030880: 6966 206d 6574 686f 6420 3d3d 2022 6174  if method == "at
+00030890: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+000308a0: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
+000308b0: 2020 6966 2075 6675 6e63 2e6e 6f75 7420    if ufunc.nout 
+000308c0: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
+000308d0: 2020 2023 2063 6865 636b 2069 6620 7765     # check if we
+000308e0: 2075 7365 6420 6f75 7220 6f77 6e20 6f75   used our own ou
+000308f0: 7470 7574 0d0a 0d0a 2020 2020 2020 2020  tput....        
+00030900: 2020 2020 2320 6966 2069 7369 6e73 7461      # if isinsta
+00030910: 6e63 6528 6f75 7441 7272 6179 2c20 6e70  nce(outArray, np
+00030920: 2e6e 6461 7272 6179 293a 0d0a 2020 2020  .ndarray):..    
+00030930: 2020 2020 2020 2020 2320 2020 2072 6574          #    ret
+00030940: 7572 6e20 6f75 7441 7272 6179 2e76 6965  urn outArray.vie
+00030950: 7728 4661 7374 4172 7261 7929 0d0a 0d0a  w(FastArray)....
+00030960: 2020 2020 2020 2020 2020 2020 2320 6966              # if
+00030970: 2028 6669 6e61 6c5f 6474 7970 6520 213d   (final_dtype !=
+00030980: 204e 6f6e 6520 616e 6420 6669 6e61 6c5f   None and final_
+00030990: 6474 7970 6520 213d 2072 6573 756c 7473  dtype != results
+000309a0: 2e64 7479 7065 293a 0d0a 2020 2020 2020  .dtype):..      
+000309b0: 2020 2020 2020 2320 2020 2070 7269 6e74        #    print
+000309c0: 2822 2a2a 2a2a 2a2a 206d 6973 7072 6564  ("****** mispred
+000309d0: 6963 7465 6420 6669 6e61 6c22 2c20 6669  icted final", fi
+000309e0: 6e61 6c5f 6474 7970 652c 2072 6573 756c  nal_dtype, resul
+000309f0: 7473 2e64 7479 7065 2c20 7566 756e 632c  ts.dtype, ufunc,
+00030a00: 2073 6361 6c61 7274 7970 6573 2c20 6172   scalartypes, ar
+00030a10: 6773 2c20 6f75 7470 7574 732c 206b 7761  gs, outputs, kwa
+00030a20: 7267 7329 3b0d 0a20 2020 2020 2020 2020  rgs);..         
+00030a30: 2020 2023 2072 6573 756c 7473 203d 2028     # results = (
+00030a40: 7265 7375 6c74 732c 290d 0a0d 0a20 2020  results,)....   
+00030a50: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00030a60: 6973 696e 7374 616e 6365 2872 6573 756c  isinstance(resul
+00030a70: 7473 2c20 4661 7374 4172 7261 7929 2061  ts, FastArray) a
+00030a80: 6e64 2069 7369 6e73 7461 6e63 6528 7265  nd isinstance(re
+00030a90: 7375 6c74 732c 206e 702e 6e64 6172 7261  sults, np.ndarra
+00030aa0: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+00030ab0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00030ac0: 6c74 732e 7669 6577 2846 6173 7441 7272  lts.view(FastArr
+00030ad0: 6179 290d 0a0d 0a20 2020 2020 2020 2020  ay)....         
+00030ae0: 2020 2023 2074 6869 6e6b 2068 6974 2068     # think hit h
+00030af0: 6572 6520 666f 7220 7375 6d20 7769 6863  ere for sum wihc
+00030b00: 6820 646f 6573 206e 6f74 2072 6574 7572  h does not retur
+00030b10: 6e20 616e 2061 7272 6179 2c20 6a75 7374  n an array, just
+00030b20: 2061 206e 756d 6265 720d 0a20 2020 2020   a number..     
+00030b30: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00030b40: 7375 6c74 730d 0a0d 0a20 2020 2020 2020  sults....       
+00030b50: 2023 206d 6f72 6520 7468 616e 206f 6e65   # more than one
+00030b60: 2069 7465 6d2c 2073 6f20 7765 2061 7265   item, so we are
+00030b70: 206d 616b 696e 6720 6120 7475 706c 650d   making a tuple.
+00030b80: 0a20 2020 2020 2020 2023 2063 616e 2072  .        # can r
+00030b90: 6573 756c 7420 696e 205f 5f61 7272 6179  esult in __array
+00030ba0: 5f66 696e 616c 697a 655f 5f20 6265 696e  _finalize__ bein
+00030bb0: 6720 6361 6c6c 6564 0d0a 2020 2020 2020  g called..      
+00030bc0: 2020 7265 7375 6c74 7320 3d20 7475 706c    results = tupl
+00030bd0: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+00030be0: 286e 702e 6173 6172 7261 7928 7265 7375  (np.asarray(resu
+00030bf0: 6c74 292e 7669 6577 2846 6173 7441 7272  lt).view(FastArr
+00030c00: 6179 2920 6966 206f 7574 7075 7420 6973  ay) if output is
+00030c10: 204e 6f6e 6520 656c 7365 206f 7574 7075   None else outpu
+00030c20: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+00030c30: 666f 7220 7265 7375 6c74 2c20 6f75 7470  for result, outp
+00030c40: 7574 2069 6e20 7a69 7028 7265 7375 6c74  ut in zip(result
+00030c50: 732c 206f 7574 7075 7473 290d 0a20 2020  s, outputs)..   
+00030c60: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+00030c70: 2020 2320 6368 6563 6b20 6966 2077 6520    # check if we 
+00030c80: 6861 7665 2061 2074 7570 6c65 206f 6620  have a tuple of 
+00030c90: 6f6e 6520 6974 656d 2c20 6966 2073 6f20  one item, if so 
+00030ca0: 6a75 7374 2072 6574 7572 6e20 7468 6520  just return the 
+00030cb0: 6f6e 6520 6974 656d 0d0a 2020 2020 2020  one item..      
+00030cc0: 2020 6966 206c 656e 2872 6573 756c 7473    if len(results
+00030cd0: 2920 3d3d 2031 3a0d 0a20 2020 2020 2020  ) == 1:..       
+00030ce0: 2020 2020 2072 6573 756c 7473 203d 2072       results = r
+00030cf0: 6573 756c 7473 5b30 5d0d 0a20 2020 2020  esults[0]..     
+00030d00: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+00030d10: 730d 0a0d 0a20 2020 2040 7072 6f70 6572  s....    @proper
+00030d20: 7479 0d0a 2020 2020 6465 6620 6e75 6d62  ty..    def numb
+00030d30: 6173 7472 696e 6728 7365 6c66 293a 0d0a  astring(self):..
+00030d40: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00030d50: 2020 2020 2063 6f6e 7665 7274 7320 6279       converts by
+00030d60: 7465 2073 7472 696e 6720 616e 6420 756e  te string and un
+00030d70: 6963 6f64 6520 7374 7269 6e67 7320 746f  icode strings to
+00030d80: 2061 2032 6469 6d65 6e73 696f 6e61 6c20   a 2dimensional 
+00030d90: 6172 7261 790d 0a20 2020 2020 2020 2073  array..        s
+00030da0: 6f20 7468 6174 206e 756d 6261 2063 616e  o that numba can
+00030db0: 2070 726f 6365 7373 2069 7420 636f 7272   process it corr
+00030dc0: 6563 746c 790d 0a0d 0a20 2020 2020 2020  ectly....       
+00030dd0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+00030de0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00030df0: 2020 2020 203e 3e3e 2040 6e75 6d62 612e       >>> @numba.
+00030e00: 6a69 7428 6e6f 7079 7468 6f6e 3d54 7275  jit(nopython=Tru
+00030e10: 6529 0d0a 2020 2020 2020 2020 2e2e 2e20  e)..        ... 
+00030e20: 6465 6620 6e75 6d62 615f 7374 7228 7478  def numba_str(tx
+00030e30: 7429 3a0d 0a20 2020 2020 2020 202e 2e2e  t):..        ...
+00030e40: 2020 2020 2078 3d30 0d0a 2020 2020 2020       x=0..      
+00030e50: 2020 2e2e 2e20 2020 2020 666f 7220 6920    ...     for i 
+00030e60: 696e 2072 616e 6765 2874 7874 2e73 6861  in range(txt.sha
+00030e70: 7065 5b30 5d29 3a0d 0a20 2020 2020 2020  pe[0]):..       
+00030e80: 202e 2e2e 2020 2020 2020 2020 2069 6620   ...         if 
+00030e90: 2874 7874 5b69 2c30 5d3d 3d31 3136 2061  (txt[i,0]==116 a
+00030ea0: 6e64 2020 2320 2774 270d 0a20 2020 2020  nd  # 't'..     
+00030eb0: 2020 202e 2e2e 2020 2020 2020 2020 2020     ...          
+00030ec0: 2020 2074 7874 5b69 2c31 5d3d 3d31 3031     txt[i,1]==101
+00030ed0: 2061 6e64 2020 2320 2765 270d 0a20 2020   and  # 'e'..   
+00030ee0: 2020 2020 202e 2e2e 2020 2020 2020 2020       ...        
+00030ef0: 2020 2020 2074 7874 5b69 2c32 5d3d 3d31       txt[i,2]==1
+00030f00: 3230 2061 6e64 2020 2320 2778 270d 0a20  20 and  # 'x'.. 
+00030f10: 2020 2020 2020 202e 2e2e 2020 2020 2020         ...      
+00030f20: 2020 2020 2020 2074 7874 5b69 2c33 5d3d         txt[i,3]=
+00030f30: 3d31 3136 293a 2020 2020 2320 2774 270d  =116):    # 't'.
+00030f40: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+00030f50: 2020 2020 2020 2020 2078 202b 3d20 310d           x += 1.
+00030f60: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+00030f70: 2072 6574 7572 6e20 780d 0a20 2020 2020   return x..     
+00030f80: 2020 203e 3e3e 0d0a 2020 2020 2020 2020     >>>..        
+00030f90: 3e3e 3e20 783d 4661 7374 4172 7261 7928  >>> x=FastArray(
+00030fa0: 5b27 736f 6d65 272c 2774 6578 7427 2c27  ['some','text','
+00030fb0: 7468 6973 272c 2769 7327 5d29 0d0a 2020  this','is'])..  
+00030fc0: 2020 2020 2020 3e3e 3e20 6e75 6d62 615f        >>> numba_
+00030fd0: 7374 7228 782e 7669 6577 286e 702e 7569  str(x.view(np.ui
+00030fe0: 6e74 3829 2e72 6573 6861 7065 2828 6c65  nt8).reshape((le
+00030ff0: 6e28 7829 2c20 782e 6974 656d 7369 7a65  n(x), x.itemsize
+00031000: 2929 290d 0a20 2020 2020 2020 203e 3e3e  )))..        >>>
+00031010: 206e 756d 6261 5f73 7472 2878 2e6e 756d   numba_str(x.num
+00031020: 6261 7374 7269 6e67 290d 0a20 2020 2020  bastring)..     
+00031030: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
+00031040: 2020 696e 7479 7065 203d 2073 656c 662e    intype = self.
+00031050: 6474 7970 652e 5f5f 7374 725f 5f28 290d  dtype.__str__().
+00031060: 0a20 2020 2020 2020 2069 6620 696e 7479  .        if inty
+00031070: 7065 5b30 5d20 3d3d 2022 7c22 206f 7220  pe[0] == "|" or 
+00031080: 696e 7479 7065 5b30 5d20 3d3d 2022 3c22  intype[0] == "<"
+00031090: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+000310a0: 6620 696e 7479 7065 5b31 5d20 3d3d 2022  f intype[1] == "
+000310b0: 5322 3a0d 0a20 2020 2020 2020 2020 2020  S":..           
+000310c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000310d0: 2e76 6965 7728 6e70 2e75 696e 7438 292e  .view(np.uint8).
+000310e0: 7265 7368 6170 6528 286c 656e 2873 656c  reshape((len(sel
+000310f0: 6629 2c20 7365 6c66 2e69 7465 6d73 697a  f), self.itemsiz
+00031100: 6529 290d 0a20 2020 2020 2020 2020 2020  e))..           
+00031110: 2069 6620 696e 7479 7065 5b31 5d20 3d3d   if intype[1] ==
+00031120: 2022 5522 3a0d 0a20 2020 2020 2020 2020   "U":..         
+00031130: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00031140: 6c66 2e76 6965 7728 6e70 2e75 696e 7433  lf.view(np.uint3
+00031150: 3229 2e72 6573 6861 7065 2828 6c65 6e28  2).reshape((len(
+00031160: 7365 6c66 292c 2073 656c 662e 6974 656d  self), self.item
+00031170: 7369 7a65 202f 2f20 3429 290d 0a20 2020  size // 4))..   
+00031180: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00031190: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+000311a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000311b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000311c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000311d0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2061  -----..    def a
+000311e0: 7070 6c79 5f6e 756d 6261 2873 656c 662c  pply_numba(self,
+000311f0: 202a 6172 6773 2c20 6f74 7970 653d 4e6f   *args, otype=No
+00031200: 6e65 2c20 6d79 6675 6e63 3d22 6d79 6675  ne, myfunc="myfu
+00031210: 6e63 222c 206e 616d 653d 4e6f 6e65 293a  nc", name=None):
+00031220: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00031230: 2020 2020 2020 2050 7269 6e74 2074 6f20         Print to 
+00031240: 7363 7265 656e 2061 6e20 6578 616d 706c  screen an exampl
+00031250: 6520 6e75 6d62 6120 7369 676e 6174 7572  e numba signatur
+00031260: 6520 666f 7220 7468 6520 6172 7261 792e  e for the array.
+00031270: 0d0a 0d0a 2020 2020 2020 2020 596f 7520  ....        You 
+00031280: 6361 6e20 7468 656e 2063 6f70 7920 7468  can then copy th
+00031290: 6973 2065 7861 6d70 6c65 2074 6f20 6275  is example to bu
+000312a0: 696c 6420 796f 7572 206f 776e 206e 756d  ild your own num
+000312b0: 6261 2066 756e 6374 696f 6e2e 0d0a 0d0a  ba function.....
+000312c0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+000312d0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+000312e0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+000312f0: 2a61 7267 733a 0d0a 2020 2020 2020 2020  *args:..        
+00031300: 2020 2020 5465 7374 2061 7267 756d 656e      Test argumen
+00031310: 7473 0d0a 0d0a 2020 2020 2020 2020 6f74  ts....        ot
+00031320: 7970 653a 2073 7472 2c20 6465 6661 756c  ype: str, defaul
+00031330: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
+00031340: 2020 2020 4120 6469 6666 6572 656e 7420      A different 
+00031350: 6f75 7470 7574 2064 6174 6120 7479 7065  output data type
+00031360: 0d0a 0d0a 2020 2020 2020 2020 6d79 6675  ....        myfu
+00031370: 6e63 3a20 7374 722c 2064 6566 6175 6c74  nc: str, default
+00031380: 2027 6d79 6675 6e63 270d 0a20 2020 2020   'myfunc'..     
+00031390: 2020 2020 2020 2041 2073 7472 696e 6720         A string 
+000313a0: 746f 2063 616c 6c20 7468 6520 6675 6e63  to call the func
+000313b0: 7469 6f6e 0d0a 0d0a 2020 2020 2020 2020  tion....        
+000313c0: 6e61 6d65 3a20 7374 722c 2064 6566 6175  name: str, defau
+000313d0: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
+000313e0: 2020 2020 2041 2073 7472 696e 6720 746f       A string to
+000313f0: 206e 616d 6520 7468 6520 6172 7261 790d   name the array.
+00031400: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+00031410: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
+00031420: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
+00031430: 3e3e 2069 6d70 6f72 7420 6e75 6d62 610d  >> import numba.
+00031440: 0a20 2020 2020 2020 203e 3e3e 2040 6e75  .        >>> @nu
+00031450: 6d62 612e 6775 7665 6374 6f72 697a 6528  mba.guvectorize(
+00031460: 5b27 766f 6964 2869 6e74 3634 5b3a 5d2c  ['void(int64[:],
+00031470: 2069 6e74 3634 5b3a 5d29 275d 2c20 2728   int64[:])'], '(
+00031480: 6e29 2d3e 286e 2927 290d 0a20 2020 2020  n)->(n)')..     
+00031490: 2020 202e 2e2e 2064 6566 2073 7175 6172     ... def squar
+000314a0: 6576 2878 2c6f 7574 293a 0d0a 2020 2020  ev(x,out):..    
+000314b0: 2020 2020 2e2e 2e20 2020 2020 666f 7220      ...     for 
+000314c0: 6920 696e 2072 616e 6765 286c 656e 2878  i in range(len(x
+000314d0: 2929 3a0d 0a20 2020 2020 2020 202e 2e2e  )):..        ...
+000314e0: 2020 2020 2020 2020 206f 7574 5b69 5d3d           out[i]=
+000314f0: 785b 695d 2a2a 320d 0a20 2020 2020 2020  x[i]**2..       
+00031500: 202e 2e2e 0d0a 2020 2020 2020 2020 3e3e   .....        >>
+00031510: 3e20 613d 6172 616e 6765 2831 5f30 3030  > a=arange(1_000
+00031520: 5f30 3030 292e 6173 7479 7065 286e 702e  _000).astype(np.
+00031530: 696e 7436 3429 0d0a 2020 2020 2020 2020  int64)..        
+00031540: 3e3e 3e20 7371 7561 7265 7628 6129 0d0a  >>> squarev(a)..
+00031550: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00031560: 7928 5b20 2020 2020 2020 2020 2020 302c  y([           0,
+00031570: 2020 2020 2020 2020 2020 2020 312c 2020              1,  
+00031580: 2020 2020 2020 2020 2020 342c 202e 2e2e            4, ...
+00031590: 2c20 3939 3939 3934 3030 3030 3039 2c0d  , 999994000009,.
+000315a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000315b0: 2020 2020 3939 3939 3936 3030 3030 3034      999996000004
+000315c0: 2c20 3939 3939 3938 3030 3030 3031 5d2c  , 999998000001],
+000315d0: 2064 7479 7065 3d69 6e74 3634 290d 0a20   dtype=int64).. 
+000315e0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+000315f0: 2020 2020 6966 206e 616d 6520 6973 204e      if name is N
+00031600: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00031610: 2020 2320 7472 7920 6669 7273 7420 746f    # try first to
+00031620: 2067 6574 2074 6865 206e 616d 650d 0a20   get the name.. 
+00031630: 2020 2020 2020 2020 2020 206e 616d 6520             name 
+00031640: 3d20 7365 6c66 2e67 6574 5f6e 616d 6528  = self.get_name(
+00031650: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00031660: 2069 6620 6e61 6d65 2069 7320 4e6f 6e65   if name is None
+00031670: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00031680: 2020 206e 616d 6520 3d20 2261 220d 0a0d     name = "a"...
+00031690: 0a20 2020 2020 2020 2069 6e74 7970 6520  .        intype 
+000316a0: 3d20 7365 6c66 2e64 7479 7065 2e5f 5f73  = self.dtype.__s
+000316b0: 7472 5f5f 2829 0d0a 0d0a 2020 2020 2020  tr__()....      
+000316c0: 2020 6966 206f 7479 7065 2069 7320 4e6f    if otype is No
+000316d0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+000316e0: 206f 7574 7479 7065 203d 2073 656c 662e   outtype = self.
+000316f0: 6474 7970 652e 5f5f 7374 725f 5f28 290d  dtype.__str__().
+00031700: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00031710: 2020 2020 2020 2020 2020 2020 6f75 7474              outt
+00031720: 7970 6520 3d20 6e70 2e64 7479 7065 286f  ype = np.dtype(o
+00031730: 7479 7065 292e 5f5f 7374 725f 5f28 290d  type).__str__().
+00031740: 0a0d 0a20 2020 2020 2020 2023 2054 4f44  ...        # TOD
+00031750: 4f3a 2077 6861 7420 6966 2075 6e69 636f  O: what if unico
+00031760: 6465 206f 7220 7374 7269 6e67 3f20 202e  de or string?  .
+00031770: 6672 6f6d 6275 6666 6572 2f2e 7669 6577  frombuffer/.view
+00031780: 286e 702e 7569 6e74 3829 0d0a 0d0a 2020  (np.uint8)....  
+00031790: 2020 2020 2020 7072 6561 6d62 6c65 203d        preamble =
+000317a0: 2022 696d 706f 7274 206e 756d 6261 5c6e   "import numba\n
+000317b0: 406e 756d 6261 2e67 7576 6563 746f 7269  @numba.guvectori
+000317c0: 7a65 285b 5c6e 220d 0a0d 0a20 2020 2020  ze([\n"....     
+000317d0: 2020 206d 6964 646c 6520 3d20 6622 2776     middle = f"'v
+000317e0: 6f69 6428 7b69 6e74 7970 657d 5b3a 5d2c  oid({intype}[:],
+000317f0: 207b 6f75 7474 7970 657d 5b3a 5d29 272c   {outtype}[:])',
+00031800: 2020 2020 2020 2023 203c 2d2d 2063 616e         # <-- can
+00031810: 2073 7461 636b 206d 756c 7469 706c 6520   stack multiple 
+00031820: 6469 6666 6572 656e 7420 6474 7970 6573  different dtypes
+00031830: 2020 782e 7669 6577 286e 702e 7569 6e74    x.view(np.uint
+00031840: 3829 2e72 6573 6861 7065 282d 312c 2078  8).reshape(-1, x
+00031850: 2e69 7465 6d73 697a 6529 5c6e 220d 0a0d  .itemsize)\n"...
+00031860: 0a20 2020 2020 2020 2070 6f73 7461 6d62  .        postamb
+00031870: 6c65 203d 2022 2020 2020 5d2c 2027 286e  le = "    ], '(n
+00031880: 292d 3e28 6e29 272c 2074 6172 6765 743d  )->(n)', target=
+00031890: 2763 7075 2729 5c6e 220d 0a20 2020 2020  'cpu')\n"..     
+000318a0: 2020 2063 6f64 6520 3d20 6622 6465 6620     code = f"def 
+000318b0: 7b6d 7966 756e 637d 2864 6174 615f 696e  {myfunc}(data_in
+000318c0: 2c20 6461 7461 5f6f 7574 293a 5c6e 2020  , data_out):\n  
+000318d0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+000318e0: 286c 656e 2864 6174 615f 696e 2929 3a5c  (len(data_in)):\
+000318f0: 6e20 2020 2020 2020 2064 6174 615f 6f75  n        data_ou
+00031900: 745b 695d 3d64 6174 615f 696e 5b69 5d20  t[i]=data_in[i] 
+00031910: 2020 233c 2d2d 2070 7574 2079 6f75 7220    #<-- put your 
+00031920: 636f 6465 2068 6572 655c 6e22 0d0a 2020  code here\n"..  
+00031930: 2020 2020 2020 6578 6563 203d 2070 7265        exec = pre
+00031940: 616d 626c 6520 2b20 6d69 6464 6c65 202b  amble + middle +
+00031950: 2070 6f73 7461 6d62 6c65 202b 2063 6f64   postamble + cod
+00031960: 650d 0a0d 0a20 2020 2020 2020 2070 7269  e....        pri
+00031970: 6e74 2822 436f 7079 2074 6865 2063 6f64  nt("Copy the cod
+00031980: 6520 736e 6970 7065 7420 6265 6c6f 7720  e snippet below 
+00031990: 616e 6420 7265 6e61 6d65 206d 7966 756e  and rename myfun
+000319a0: 6322 290d 0a20 2020 2020 2020 2070 7269  c")..        pri
+000319b0: 6e74 2822 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  nt("------------
+000319c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000319d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000319e0: 2d22 290d 0a20 2020 2020 2020 2070 7269  -")..        pri
+000319f0: 6e74 2865 7865 6329 0d0a 2020 2020 2020  nt(exec)..      
+00031a00: 2020 7072 696e 7428 222d 2d2d 2d2d 2d2d    print("-------
+00031a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00031a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00031a30: 2d2d 2d2d 2d2d 2229 0d0a 2020 2020 2020  ------")..      
+00031a40: 2020 6966 2069 6e74 7970 655b 305d 203d    if intype[0] =
+00031a50: 3d20 227c 2220 6f72 2069 6e74 7970 655b  = "|" or intype[
+00031a60: 305d 203d 3d20 223c 223a 0d0a 2020 2020  0] == "<":..    
+00031a70: 2020 2020 2020 2020 6966 2069 6e74 7970          if intyp
+00031a80: 655b 315d 203d 3d20 2253 223a 0d0a 2020  e[1] == "S":..  
+00031a90: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00031aa0: 696e 7428 0d0a 2020 2020 2020 2020 2020  int(..          
+00031ab0: 2020 2020 2020 2020 2020 6622 5468 656e            f"Then
+00031ac0: 2063 616c 6c20 7b6d 7966 756e 637d 287b   call {myfunc}({
+00031ad0: 6e61 6d65 7d2e 6e75 6d62 6173 7472 696e  name}.numbastrin
+00031ae0: 672c 656d 7074 795f 6c69 6b65 287b 6e61  g,empty_like({na
+00031af0: 6d65 7d29 2e6e 756d 6261 7374 7269 6e67  me}).numbastring
+00031b00: 2920 7768 6572 6520 7b6e 616d 657d 2069  ) where {name} i
+00031b10: 7320 7468 6520 696e 7075 7420 6172 7261  s the input arra
+00031b20: 7922 0d0a 2020 2020 2020 2020 2020 2020  y"..            
+00031b30: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+00031b40: 2020 2065 6c69 6620 696e 7479 7065 5b31     elif intype[1
+00031b50: 5d20 3d3d 2022 5522 3a0d 0a20 2020 2020  ] == "U":..     
+00031b60: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00031b70: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00031b80: 2020 2020 2020 2066 2254 6865 6e20 6361         f"Then ca
+00031b90: 6c6c 207b 6d79 6675 6e63 7d28 7b6e 616d  ll {myfunc}({nam
+00031ba0: 657d 2e6e 756d 6261 7374 7269 6e67 2c65  e}.numbastring,e
+00031bb0: 6d70 7479 5f6c 696b 6528 7b6e 616d 657d  mpty_like({name}
+00031bc0: 292e 6e75 6d62 6173 7472 696e 6729 2077  ).numbastring) w
+00031bd0: 6865 7265 207b 6e61 6d65 7d20 6973 2074  here {name} is t
+00031be0: 6865 2069 6e70 7574 2061 7272 6179 220d  he input array".
+00031bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031c00: 2029 0d0a 2020 2020 2020 2020 656c 7365   )..        else
+00031c10: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00031c20: 7269 6e74 2866 2254 6865 6e20 6361 6c6c  rint(f"Then call
+00031c30: 207b 6d79 6675 6e63 7d28 7b6e 616d 657d   {myfunc}({name}
+00031c40: 2c65 6d70 7479 5f6c 696b 6528 7b6e 616d  ,empty_like({nam
+00031c50: 657d 2929 2077 6865 7265 207b 6e61 6d65  e})) where {name
+00031c60: 7d20 6973 2074 6865 2069 6e70 7574 2061  } is the input a
+00031c70: 7272 6179 2229 0d0a 2020 2020 2020 2020  rray")..        
+00031c80: 2320 7265 7475 726e 2065 7865 630d 0a0d  # return exec...
+00031c90: 0a20 2020 2064 6566 2061 7070 6c79 2873  .    def apply(s
+00031ca0: 656c 662c 2070 7966 756e 632c 202a 6172  elf, pyfunc, *ar
+00031cb0: 6773 2c20 6f74 7970 6573 3d4e 6f6e 652c  gs, otypes=None,
+00031cc0: 2064 6f63 3d4e 6f6e 652c 2065 7863 6c75   doc=None, exclu
+00031cd0: 6465 643d 4e6f 6e65 2c20 6361 6368 653d  ded=None, cache=
+00031ce0: 4661 6c73 652c 2073 6967 6e61 7475 7265  False, signature
+00031cf0: 3d4e 6f6e 6529 3a0d 0a20 2020 2020 2020  =None):..       
+00031d00: 2022 2222 0d0a 2020 2020 2020 2020 4765   """..        Ge
+00031d10: 6e65 7261 6c69 7a65 6420 6675 6e63 7469  neralized functi
+00031d20: 6f6e 2063 6c61 7373 2e20 2073 6565 3a20  on class.  see: 
+00031d30: 6e70 2e76 6563 746f 7269 7a65 0d0a 0d0a  np.vectorize....
+00031d40: 2020 2020 2020 2020 4372 6561 7465 7320          Creates 
+00031d50: 616e 6420 7468 656e 2061 7070 6c69 6573  and then applies
+00031d60: 2061 2076 6563 746f 7269 7a65 6420 6675   a vectorized fu
+00031d70: 6e63 7469 6f6e 2077 6869 6368 2074 616b  nction which tak
+00031d80: 6573 2061 206e 6573 7465 6420 7365 7175  es a nested sequ
+00031d90: 656e 6365 206f 6620 6f62 6a65 6374 7320  ence of objects 
+00031da0: 6f72 0d0a 2020 2020 2020 2020 6e75 6d70  or..        nump
+00031db0: 7920 6172 7261 7973 2061 7320 696e 7075  y arrays as inpu
+00031dc0: 7473 2061 6e64 2072 6574 7572 6e73 2061  ts and returns a
+00031dd0: 6e20 7369 6e67 6c65 206f 7220 7475 706c  n single or tupl
+00031de0: 6520 6f66 206e 756d 7079 2061 7272 6179  e of numpy array
+00031df0: 2061 730d 0a20 2020 2020 2020 206f 7574   as..        out
+00031e00: 7075 742e 2054 6865 2076 6563 746f 7269  put. The vectori
+00031e10: 7a65 6420 6675 6e63 7469 6f6e 2065 7661  zed function eva
+00031e20: 6c75 6174 6573 2060 7079 6675 6e63 6020  luates `pyfunc` 
+00031e30: 6f76 6572 2073 7563 6365 7373 6976 6520  over successive 
+00031e40: 7475 706c 6573 0d0a 2020 2020 2020 2020  tuples..        
+00031e50: 6f66 2074 6865 2069 6e70 7574 2061 7272  of the input arr
+00031e60: 6179 7320 6c69 6b65 2074 6865 2070 7974  ays like the pyt
+00031e70: 686f 6e20 6d61 7020 6675 6e63 7469 6f6e  hon map function
+00031e80: 2c20 6578 6365 7074 2069 7420 7573 6573  , except it uses
+00031e90: 2074 6865 0d0a 2020 2020 2020 2020 6272   the..        br
+00031ea0: 6f61 6463 6173 7469 6e67 2072 756c 6573  oadcasting rules
+00031eb0: 206f 6620 6e75 6d70 792e 0d0a 0d0a 2020   of numpy.....  
+00031ec0: 2020 2020 2020 5468 6520 6461 7461 2074        The data t
+00031ed0: 7970 6520 6f66 2074 6865 206f 7574 7075  ype of the outpu
+00031ee0: 7420 6f66 2060 7665 6374 6f72 697a 6564  t of `vectorized
+00031ef0: 6020 6973 2064 6574 6572 6d69 6e65 6420  ` is determined 
+00031f00: 6279 2063 616c 6c69 6e67 0d0a 2020 2020  by calling..    
+00031f10: 2020 2020 7468 6520 6675 6e63 7469 6f6e      the function
+00031f20: 2077 6974 6820 7468 6520 6669 7273 7420   with the first 
+00031f30: 656c 656d 656e 7420 6f66 2074 6865 2069  element of the i
+00031f40: 6e70 7574 2e20 2054 6869 7320 6361 6e20  nput.  This can 
+00031f50: 6265 2061 766f 6964 6564 0d0a 2020 2020  be avoided..    
+00031f60: 2020 2020 6279 2073 7065 6369 6679 696e      by specifyin
+00031f70: 6720 7468 6520 606f 7479 7065 7360 2061  g the `otypes` a
+00031f80: 7267 756d 656e 742e 0d0a 0d0a 2020 2020  rgument.....    
+00031f90: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+00031fa0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00031fb0: 2d2d 0d0a 2020 2020 2020 2020 7079 6675  --..        pyfu
+00031fc0: 6e63 203a 2063 616c 6c61 626c 650d 0a20  nc : callable.. 
+00031fd0: 2020 2020 2020 2020 2020 2041 2070 7974             A pyt
+00031fe0: 686f 6e20 6675 6e63 7469 6f6e 206f 7220  hon function or 
+00031ff0: 6d65 7468 6f64 2e0d 0a20 2020 2020 2020  method...       
+00032000: 206f 7479 7065 7320 3a20 7374 7220 6f72   otypes : str or
+00032010: 206c 6973 7420 6f66 2064 7479 7065 732c   list of dtypes,
+00032020: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
+00032030: 2020 2020 2020 2054 6865 206f 7574 7075         The outpu
+00032040: 7420 6461 7461 2074 7970 652e 2049 7420  t data type. It 
+00032050: 6d75 7374 2062 6520 7370 6563 6966 6965  must be specifie
+00032060: 6420 6173 2065 6974 6865 7220 6120 7374  d as either a st
+00032070: 7269 6e67 206f 660d 0a20 2020 2020 2020  ring of..       
+00032080: 2020 2020 2074 7970 6563 6f64 6520 6368       typecode ch
+00032090: 6172 6163 7465 7273 206f 7220 6120 6c69  aracters or a li
+000320a0: 7374 206f 6620 6461 7461 2074 7970 6520  st of data type 
+000320b0: 7370 6563 6966 6965 7273 2e20 5468 6572  specifiers. Ther
+000320c0: 6520 7368 6f75 6c64 0d0a 2020 2020 2020  e should..      
+000320d0: 2020 2020 2020 6265 206f 6e65 2064 6174        be one dat
+000320e0: 6120 7479 7065 2073 7065 6369 6669 6572  a type specifier
+000320f0: 2066 6f72 2065 6163 6820 6f75 7470 7574   for each output
+00032100: 2e0d 0a20 2020 2020 2020 2064 6f63 203a  ...        doc :
+00032110: 2073 7472 2c20 6f70 7469 6f6e 616c 0d0a   str, optional..
+00032120: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+00032130: 646f 6373 7472 696e 6720 666f 7220 7468  docstring for th
+00032140: 6520 6675 6e63 7469 6f6e 2e20 4966 2060  e function. If `
+00032150: 4e6f 6e65 602c 2074 6865 2064 6f63 7374  None`, the docst
+00032160: 7269 6e67 2077 696c 6c20 6265 2074 6865  ring will be the
+00032170: 0d0a 2020 2020 2020 2020 2020 2020 6060  ..            ``
+00032180: 7079 6675 6e63 2e5f 5f64 6f63 5f5f 6060  pyfunc.__doc__``
+00032190: 2e0d 0a20 2020 2020 2020 2065 7863 6c75  ...        exclu
+000321a0: 6465 6420 3a20 7365 742c 206f 7074 696f  ded : set, optio
+000321b0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
+000321c0: 2053 6574 206f 6620 7374 7269 6e67 7320   Set of strings 
+000321d0: 6f72 2069 6e74 6567 6572 7320 7265 7072  or integers repr
+000321e0: 6573 656e 7469 6e67 2074 6865 2070 6f73  esenting the pos
+000321f0: 6974 696f 6e61 6c20 6f72 206b 6579 776f  itional or keywo
+00032200: 7264 0d0a 2020 2020 2020 2020 2020 2020  rd..            
+00032210: 6172 6775 6d65 6e74 7320 666f 7220 7768  arguments for wh
+00032220: 6963 6820 7468 6520 6675 6e63 7469 6f6e  ich the function
+00032230: 2077 696c 6c20 6e6f 7420 6265 2076 6563   will not be vec
+00032240: 746f 7269 7a65 642e 2020 5468 6573 6520  torized.  These 
+00032250: 7769 6c6c 2062 650d 0a20 2020 2020 2020  will be..       
+00032260: 2020 2020 2070 6173 7365 6420 6469 7265       passed dire
+00032270: 6374 6c79 2074 6f20 6070 7966 756e 6360  ctly to `pyfunc`
+00032280: 2075 6e6d 6f64 6966 6965 642e 0d0a 0d0a   unmodified.....
+00032290: 2020 2020 2020 2020 2020 2020 2e2e 2076              .. v
+000322a0: 6572 7369 6f6e 6164 6465 643a 3a20 312e  ersionadded:: 1.
+000322b0: 372e 300d 0a0d 0a20 2020 2020 2020 2063  7.0....        c
+000322c0: 6163 6865 203a 2062 6f6f 6c2c 206f 7074  ache : bool, opt
+000322d0: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
+000322e0: 2020 4966 2060 5472 7565 602c 2074 6865    If `True`, the
+000322f0: 6e20 6361 6368 6520 7468 6520 6669 7273  n cache the firs
+00032300: 7420 6675 6e63 7469 6f6e 2063 616c 6c20  t function call 
+00032310: 7468 6174 2064 6574 6572 6d69 6e65 7320  that determines 
+00032320: 7468 6520 6e75 6d62 6572 0d0a 2020 2020  the number..    
+00032330: 2020 2020 2020 206f 6620 6f75 7470 7574         of output
+00032340: 7320 6966 2060 6f74 7970 6573 6020 6973  s if `otypes` is
+00032350: 206e 6f74 2070 726f 7669 6465 642e 0d0a   not provided...
+00032360: 0d0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
+00032370: 2076 6572 7369 6f6e 6164 6465 643a 3a20   versionadded:: 
+00032380: 312e 372e 300d 0a0d 0a20 2020 2020 2020  1.7.0....       
+00032390: 2073 6967 6e61 7475 7265 203a 2073 7472   signature : str
+000323a0: 696e 672c 206f 7074 696f 6e61 6c0d 0a20  ing, optional.. 
+000323b0: 2020 2020 2020 2020 2020 2047 656e 6572             Gener
+000323c0: 616c 697a 6564 2075 6e69 7665 7273 616c  alized universal
+000323d0: 2066 756e 6374 696f 6e20 7369 676e 6174   function signat
+000323e0: 7572 652c 2065 2e67 2e2c 2060 6028 6d2c  ure, e.g., ``(m,
+000323f0: 6e29 2c28 6e29 2d3e 286d 2960 6020 666f  n),(n)->(m)`` fo
+00032400: 720d 0a20 2020 2020 2020 2020 2020 2076  r..            v
+00032410: 6563 746f 7269 7a65 6420 6d61 7472 6978  ectorized matrix
+00032420: 2d76 6563 746f 7220 6d75 6c74 6970 6c69  -vector multipli
+00032430: 6361 7469 6f6e 2e20 4966 2070 726f 7669  cation. If provi
+00032440: 6465 642c 2060 6070 7966 756e 6360 6020  ded, ``pyfunc`` 
+00032450: 7769 6c6c 0d0a 2020 2020 2020 2020 2020  will..          
+00032460: 2020 6265 2063 616c 6c65 6420 7769 7468    be called with
+00032470: 2028 616e 6420 6578 7065 6374 6564 2074   (and expected t
+00032480: 6f20 7265 7475 726e 2920 6172 7261 7973  o return) arrays
+00032490: 2077 6974 6820 7368 6170 6573 2067 6976   with shapes giv
+000324a0: 656e 2062 7920 7468 650d 0a20 2020 2020  en by the..     
+000324b0: 2020 2020 2020 2073 697a 6520 6f66 2063         size of c
+000324c0: 6f72 7265 7370 6f6e 6469 6e67 2063 6f72  orresponding cor
+000324d0: 6520 6469 6d65 6e73 696f 6e73 2e20 4279  e dimensions. By
+000324e0: 2064 6566 6175 6c74 2c20 6060 7079 6675   default, ``pyfu
+000324f0: 6e63 6060 2069 730d 0a20 2020 2020 2020  nc`` is..       
+00032500: 2020 2020 2061 7373 756d 6564 2074 6f20       assumed to 
+00032510: 7461 6b65 2073 6361 6c61 7273 2061 7320  take scalars as 
+00032520: 696e 7075 7420 616e 6420 6f75 7470 7574  input and output
+00032530: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+00032540: 202e 2e20 7665 7273 696f 6e61 6464 6564   .. versionadded
+00032550: 3a3a 2031 2e31 322e 300d 0a0d 0a20 2020  :: 1.12.0....   
+00032560: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00032570: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00032580: 2020 2020 2020 2076 6563 746f 7269 7a65         vectorize
+00032590: 6420 3a20 6361 6c6c 6162 6c65 0d0a 2020  d : callable..  
+000325a0: 2020 2020 2020 2020 2020 5665 6374 6f72            Vector
+000325b0: 697a 6564 2066 756e 6374 696f 6e2e 0d0a  ized function...
+000325c0: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+000325d0: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+000325e0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4661  ----..        Fa
+000325f0: 7374 4172 7261 792e 6170 706c 795f 6e75  stArray.apply_nu
+00032600: 6d62 610d 0a20 2020 2020 2020 2046 6173  mba..        Fas
+00032610: 7441 7272 6179 2e61 7070 6c79 5f70 616e  tArray.apply_pan
+00032620: 6461 730d 0a0d 0a20 2020 2020 2020 2045  das....        E
+00032630: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+00032640: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00032650: 2020 203e 3e3e 2064 6566 206d 7966 756e     >>> def myfun
+00032660: 6328 612c 2062 293a 0d0a 2020 2020 2020  c(a, b):..      
+00032670: 2020 2e2e 2e20 2020 2020 2252 6574 7572    ...     "Retur
+00032680: 6e20 612d 6220 6966 2061 3e62 2c20 6f74  n a-b if a>b, ot
+00032690: 6865 7277 6973 6520 7265 7475 726e 2061  herwise return a
+000326a0: 2b62 220d 0a20 2020 2020 2020 202e 2e2e  +b"..        ...
+000326b0: 2020 2020 2069 6620 6120 3e20 623a 0d0a       if a > b:..
+000326c0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+000326d0: 2020 2020 7265 7475 726e 2061 202d 2062      return a - b
+000326e0: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
+000326f0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00032700: 202e 2e2e 2020 2020 2020 2020 2072 6574   ...         ret
+00032710: 7572 6e20 6120 2b20 620d 0a20 2020 2020  urn a + b..     
+00032720: 2020 203e 3e3e 0d0a 2020 2020 2020 2020     >>>..        
+00032730: 3e3e 3e20 613d 6172 616e 6765 2831 3029  >>> a=arange(10)
+00032740: 0d0a 2020 2020 2020 2020 3e3e 3e20 623d  ..        >>> b=
+00032750: 6172 616e 6765 2831 3029 2b31 0d0a 2020  arange(10)+1..  
+00032760: 2020 2020 2020 3e3e 3e20 612e 6170 706c        >>> a.appl
+00032770: 7928 6d79 6675 6e63 2c62 290d 0a20 2020  y(myfunc,b)..   
+00032780: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+00032790: 2031 2c20 2033 2c20 2035 2c20 2037 2c20   1,  3,  5,  7, 
+000327a0: 2039 2c20 3131 2c20 3133 2c20 3135 2c20   9, 11, 13, 15, 
+000327b0: 3137 2c20 3139 5d29 0d0a 0d0a 2020 2020  17, 19])....    
+000327c0: 2020 2020 4578 616d 706c 6520 7769 7468      Example with
+000327d0: 206f 6e65 2069 6e70 7574 2061 7272 6179   one input array
+000327e0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+000327f0: 6465 6620 7371 7561 7265 2878 293a 0d0a  def square(x):..
+00032800: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+00032810: 7265 7475 726e 2078 2a2a 320d 0a20 2020  return x**2..   
+00032820: 2020 2020 203e 3e3e 0d0a 2020 2020 2020       >>>..      
+00032830: 2020 3e3e 3e20 613d 6172 616e 6765 2831    >>> a=arange(1
+00032840: 3029 0d0a 2020 2020 2020 2020 3e3e 3e20  0)..        >>> 
+00032850: 612e 6170 706c 7928 7371 7561 7265 290d  a.apply(square).
+00032860: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00032870: 6179 285b 2030 2c20 2031 2c20 2034 2c20  ay([ 0,  1,  4, 
+00032880: 2039 2c20 3136 2c20 3235 2c20 3336 2c20   9, 16, 25, 36, 
+00032890: 3439 2c20 3634 2c20 3831 5d29 0d0a 0d0a  49, 64, 81])....
+000328a0: 2020 2020 2020 2020 4578 616d 706c 6520          Example 
+000328b0: 7769 7468 206c 616d 6264 610d 0a0d 0a20  with lambda.... 
+000328c0: 2020 2020 2020 203e 3e3e 2061 3d61 7261         >>> a=ara
+000328d0: 6e67 6528 3130 290d 0a20 2020 2020 2020  nge(10)..       
+000328e0: 203e 3e3e 2061 2e61 7070 6c79 286c 616d   >>> a.apply(lam
+000328f0: 6264 6120 783a 2078 2a2a 3229 0d0a 2020  bda x: x**2)..  
+00032900: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00032910: 5b20 302c 2020 312c 2020 342c 2020 392c  [ 0,  1,  4,  9,
+00032920: 2031 362c 2032 352c 2033 362c 2034 392c   16, 25, 36, 49,
+00032930: 2036 342c 2038 315d 290d 0a0d 0a20 2020   64, 81])....   
+00032940: 2020 2020 2045 7861 6d70 6c65 2077 6974       Example wit
+00032950: 6820 6e75 6d62 610d 0a0d 0a20 2020 2020  h numba....     
+00032960: 2020 203e 3e3e 2066 726f 6d20 6e75 6d62     >>> from numb
+00032970: 6120 696d 706f 7274 206a 6974 0d0a 2020  a import jit..  
+00032980: 2020 2020 2020 3e3e 3e20 406a 6974 0d0a        >>> @jit..
+00032990: 2020 2020 2020 2020 2e2e 2e20 6465 6620          ... def 
+000329a0: 7371 7561 7265 6974 2878 293a 0d0a 2020  squareit(x):..  
+000329b0: 2020 2020 2020 2e2e 2e20 2020 2020 7265        ...     re
+000329c0: 7475 726e 2078 2a2a 320d 0a20 2020 2020  turn x**2..     
+000329d0: 2020 203e 3e3e 2061 2e61 7070 6c79 2873     >>> a.apply(s
+000329e0: 7175 6172 6569 7429 0d0a 2020 2020 2020  quareit)..      
+000329f0: 2020 4661 7374 4172 7261 7928 5b20 302c    FastArray([ 0,
+00032a00: 2020 312c 2020 342c 2020 392c 2031 362c    1,  4,  9, 16,
+00032a10: 2032 352c 2033 362c 2034 392c 2036 342c   25, 36, 49, 64,
+00032a20: 2038 315d 290d 0a0d 0a20 2020 2020 2020   81])....       
+00032a30: 2045 7861 6d70 6c65 7320 746f 2075 7365   Examples to use
+00032a40: 2065 7869 7374 696e 6720 6275 696c 7469   existing builti
+00032a50: 6e20 6f63 7420 6675 6e63 7469 6f6e 2062  n oct function b
+00032a60: 7574 2063 6861 6e67 6520 7468 6520 6f75  ut change the ou
+00032a70: 7470 7574 2066 726f 6d20 7374 7269 6e67  tput from string
+00032a80: 2c20 746f 2075 6e69 636f 6465 2c20 746f  , to unicode, to
+00032a90: 206f 626a 6563 740d 0a0d 0a20 2020 2020   object....     
+00032aa0: 2020 203e 3e3e 2061 3d61 7261 6e67 6528     >>> a=arange(
+00032ab0: 3130 290d 0a20 2020 2020 2020 203e 3e3e  10)..        >>>
+00032ac0: 2061 2e61 7070 6c79 286f 6374 2c20 6f74   a.apply(oct, ot
+00032ad0: 7970 6573 3d5b 2753 275d 290d 0a20 2020  ypes=['S'])..   
+00032ae0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+00032af0: 6227 306f 3027 2c20 6227 306f 3127 2c20  b'0o0', b'0o1', 
+00032b00: 6227 306f 3227 2c20 6227 306f 3327 2c20  b'0o2', b'0o3', 
+00032b10: 6227 306f 3427 2c20 6227 306f 3527 2c20  b'0o4', b'0o5', 
+00032b20: 6227 306f 3627 2c20 6227 306f 3727 2c20  b'0o6', b'0o7', 
+00032b30: 6227 306f 3130 272c 2062 2730 6f31 3127  b'0o10', b'0o11'
+00032b40: 5d2c 2064 7479 7065 3d27 7c53 3427 290d  ], dtype='|S4').
+00032b50: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+00032b60: 3d61 7261 6e67 6528 3130 290d 0a20 2020  =arange(10)..   
+00032b70: 2020 2020 203e 3e3e 2061 2e61 7070 6c79       >>> a.apply
+00032b80: 286f 6374 2c20 6f74 7970 6573 3d5b 2755  (oct, otypes=['U
+00032b90: 275d 290d 0a20 2020 2020 2020 2046 6173  '])..        Fas
+00032ba0: 7441 7272 6179 285b 2730 6f30 272c 2027  tArray(['0o0', '
+00032bb0: 306f 3127 2c20 2730 6f32 272c 2027 306f  0o1', '0o2', '0o
+00032bc0: 3327 2c20 2730 6f34 272c 2027 306f 3527  3', '0o4', '0o5'
+00032bd0: 2c20 2730 6f36 272c 2027 306f 3727 2c20  , '0o6', '0o7', 
+00032be0: 2730 6f31 3027 2c20 2730 6f31 3127 5d2c  '0o10', '0o11'],
+00032bf0: 2064 7479 7065 3d27 3c55 3427 290d 0a0d   dtype='<U4')...
+00032c00: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
+00032c10: 7261 6e67 6528 3130 290d 0a20 2020 2020  range(10)..     
+00032c20: 2020 203e 3e3e 2061 2e61 7070 6c79 286f     >>> a.apply(o
+00032c30: 6374 2c20 6f74 7970 6573 3d5b 274f 275d  ct, otypes=['O']
+00032c40: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
+00032c50: 7272 6179 285b 2730 6f30 272c 2027 306f  rray(['0o0', '0o
+00032c60: 3127 2c20 2730 6f32 272c 2027 306f 3327  1', '0o2', '0o3'
+00032c70: 2c20 2730 6f34 272c 2027 306f 3527 2c20  , '0o4', '0o5', 
+00032c80: 2730 6f36 272c 2027 306f 3727 2c20 2730  '0o6', '0o7', '0
+00032c90: 6f31 3027 2c20 2730 6f31 3127 5d2c 2064  o10', '0o11'], d
+00032ca0: 7479 7065 3d6f 626a 6563 7429 0d0a 0d0a  type=object)....
+00032cb0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
+00032cc0: 2020 2020 2020 2076 6675 6e63 203d 206e         vfunc = n
+00032cd0: 702e 7665 6374 6f72 697a 6528 7079 6675  p.vectorize(pyfu
+00032ce0: 6e63 2c20 6f74 7970 6573 3d6f 7479 7065  nc, otypes=otype
+00032cf0: 732c 2064 6f63 3d64 6f63 2c20 6578 636c  s, doc=doc, excl
+00032d00: 7564 6564 3d65 7863 6c75 6465 642c 2063  uded=excluded, c
+00032d10: 6163 6865 3d63 6163 6865 2c20 7369 676e  ache=cache, sign
+00032d20: 6174 7572 653d 7369 676e 6174 7572 6529  ature=signature)
+00032d30: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
+00032d40: 203d 2076 6675 6e63 2873 656c 662c 202a   = vfunc(self, *
+00032d50: 6172 6773 290d 0a20 2020 2020 2020 2072  args)..        r
+00032d60: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
+00032d70: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00032d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00032d90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00032da0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00032db0: 2d0d 0a20 2020 2064 6566 2061 7070 6c79  -..    def apply
+00032dc0: 5f70 616e 6461 7328 7365 6c66 2c20 6675  _pandas(self, fu
+00032dd0: 6e63 2c20 636f 6e76 6572 745f 6474 7970  nc, convert_dtyp
+00032de0: 653d 5472 7565 2c20 6172 6773 3d28 292c  e=True, args=(),
+00032df0: 202a 2a6b 7764 7329 3a0d 0a20 2020 2020   **kwds):..     
+00032e00: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00032e10: 496e 766f 6b65 2066 756e 6374 696f 6e20  Invoke function 
+00032e20: 6f6e 2076 616c 7565 7320 6f66 2046 6173  on values of Fas
+00032e30: 7441 7272 6179 2e20 4361 6e20 6265 2075  tArray. Can be u
+00032e40: 6675 6e63 2028 6120 4e75 6d50 7920 6675  func (a NumPy fu
+00032e50: 6e63 7469 6f6e 0d0a 2020 2020 2020 2020  nction..        
+00032e60: 7468 6174 2061 7070 6c69 6573 2074 6f20  that applies to 
+00032e70: 7468 6520 656e 7469 7265 2046 6173 7441  the entire FastA
+00032e80: 7272 6179 2920 6f72 2061 2050 7974 686f  rray) or a Pytho
+00032e90: 6e20 6675 6e63 7469 6f6e 2074 6861 7420  n function that 
+00032ea0: 6f6e 6c79 2077 6f72 6b73 0d0a 2020 2020  only works..    
+00032eb0: 2020 2020 6f6e 2073 696e 676c 6520 7661      on single va
+00032ec0: 6c75 6573 0d0a 0d0a 2020 2020 2020 2020  lues....        
+00032ed0: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+00032ee0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+00032ef0: 2020 2020 2020 2020 6675 6e63 203a 2066          func : f
+00032f00: 756e 6374 696f 6e0d 0a20 2020 2020 2020  unction..       
+00032f10: 2063 6f6e 7665 7274 5f64 7479 7065 203a   convert_dtype :
+00032f20: 2062 6f6f 6c65 616e 2c20 6465 6661 756c   boolean, defaul
+00032f30: 7420 5472 7565 0d0a 2020 2020 2020 2020  t True..        
+00032f40: 2020 2020 5472 7920 746f 2066 696e 6420      Try to find 
+00032f50: 6265 7474 6572 2064 7479 7065 2066 6f72  better dtype for
+00032f60: 2065 6c65 6d65 6e74 7769 7365 2066 756e   elementwise fun
+00032f70: 6374 696f 6e20 7265 7375 6c74 732e 2049  ction results. I
+00032f80: 660d 0a20 2020 2020 2020 2020 2020 2046  f..            F
+00032f90: 616c 7365 2c20 6c65 6176 6520 6173 2064  alse, leave as d
+00032fa0: 7479 7065 3d6f 626a 6563 740d 0a20 2020  type=object..   
+00032fb0: 2020 2020 2061 7267 7320 3a20 7475 706c       args : tupl
+00032fc0: 650d 0a20 2020 2020 2020 2020 2020 2050  e..            P
+00032fd0: 6f73 6974 696f 6e61 6c20 6172 6775 6d65  ositional argume
+00032fe0: 6e74 7320 746f 2070 6173 7320 746f 2066  nts to pass to f
+00032ff0: 756e 6374 696f 6e20 696e 2061 6464 6974  unction in addit
+00033000: 696f 6e20 746f 2074 6865 2076 616c 7565  ion to the value
+00033010: 0d0a 2020 2020 2020 2020 4164 6469 7469  ..        Additi
+00033020: 6f6e 616c 206b 6579 776f 7264 2061 7267  onal keyword arg
+00033030: 756d 656e 7473 2077 696c 6c20 6265 2070  uments will be p
+00033040: 6173 7365 6420 6173 206b 6579 776f 7264  assed as keyword
+00033050: 7320 746f 2074 6865 2066 756e 6374 696f  s to the functio
+00033060: 6e0d 0a0d 0a20 2020 2020 2020 2052 6574  n....        Ret
+00033070: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+00033080: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2079  -----..        y
+00033090: 203a 2046 6173 7441 7272 6179 206f 7220   : FastArray or 
+000330a0: 4461 7461 7365 7420 6966 2066 756e 6320  Dataset if func 
+000330b0: 7265 7475 726e 7320 6120 4661 7374 4172  returns a FastAr
+000330c0: 7261 790d 0a0d 0a20 2020 2020 2020 2053  ray....        S
+000330d0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
+000330e0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+000330f0: 2020 2046 6173 7441 7272 6179 2e6d 6170     FastArray.map
+00033100: 3a20 466f 7220 656c 656d 656e 742d 7769  : For element-wi
+00033110: 7365 206f 7065 7261 7469 6f6e 730d 0a20  se operations.. 
+00033120: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00033130: 2e61 6767 3a20 6f6e 6c79 2070 6572 666f  .agg: only perfo
+00033140: 726d 2061 6767 7265 6761 7469 6e67 2074  rm aggregating t
+00033150: 7970 6520 6f70 6572 6174 696f 6e73 0d0a  ype operations..
+00033160: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00033170: 792e 7472 616e 7366 6f72 6d3a 206f 6e6c  y.transform: onl
+00033180: 7920 7065 7266 6f72 6d20 7472 616e 7366  y perform transf
+00033190: 6f72 6d69 6e67 2074 7970 6520 6f70 6572  orming type oper
+000331a0: 6174 696f 6e73 0d0a 0d0a 2020 2020 2020  ations....      
+000331b0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
+000331c0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+000331d0: 2020 2020 2020 4372 6561 7465 2061 2046        Create a F
+000331e0: 6173 7441 7272 6179 2077 6974 6820 7479  astArray with ty
+000331f0: 7069 6361 6c20 7375 6d6d 6572 2074 656d  pical summer tem
+00033200: 7065 7261 7475 7265 7320 666f 7220 6561  peratures for ea
+00033210: 6368 2063 6974 792e 0d0a 0d0a 2020 2020  ch city.....    
+00033220: 2020 2020 3e3e 3e20 6661 203d 2072 742e      >>> fa = rt.
+00033230: 4661 7374 4172 7261 7928 5b32 302c 2032  FastArray([20, 2
+00033240: 312c 2031 325d 2c20 696e 6465 783d 5b27  1, 12], index=['
+00033250: 4c6f 6e64 6f6e 272c 2027 4e65 7720 596f  London', 'New Yo
+00033260: 726b 272c 2748 656c 7369 6e6b 6927 5d29  rk','Helsinki'])
+00033270: 0d0a 2020 2020 2020 2020 3e3e 3e20 6661  ..        >>> fa
+00033280: 0d0a 2020 2020 2020 2020 4c6f 6e64 6f6e  ..        London
+00033290: 2020 2020 2020 3230 0d0a 2020 2020 2020        20..      
+000332a0: 2020 4e65 7720 596f 726b 2020 2020 3231    New York    21
+000332b0: 0d0a 2020 2020 2020 2020 4865 6c73 696e  ..        Helsin
+000332c0: 6b69 2020 2020 3132 0d0a 2020 2020 2020  ki    12..      
+000332d0: 2020 6474 7970 653a 2069 6e74 3634 0d0a    dtype: int64..
+000332e0: 0d0a 2020 2020 2020 2020 5371 7561 7265  ..        Square
+000332f0: 2074 6865 2076 616c 7565 7320 6279 2064   the values by d
+00033300: 6566 696e 696e 6720 6120 6675 6e63 7469  efining a functi
+00033310: 6f6e 2061 6e64 2070 6173 7369 6e67 2069  on and passing i
+00033320: 7420 6173 2061 6e0d 0a20 2020 2020 2020  t as an..       
+00033330: 2061 7267 756d 656e 7420 746f 2060 6061   argument to ``a
+00033340: 7070 6c79 2829 6060 2e0d 0a0d 0a20 2020  pply()``.....   
+00033350: 2020 2020 203e 3e3e 2064 6566 2073 7175       >>> def squ
+00033360: 6172 6528 7829 3a0d 0a20 2020 2020 2020  are(x):..       
+00033370: 202e 2e2e 2020 2020 2072 6574 7572 6e20   ...     return 
+00033380: 782a 2a32 0d0a 2020 2020 2020 2020 3e3e  x**2..        >>
+00033390: 3e20 6661 2e61 7070 6c79 2873 7175 6172  > fa.apply(squar
+000333a0: 6529 0d0a 2020 2020 2020 2020 4c6f 6e64  e)..        Lond
+000333b0: 6f6e 2020 2020 2020 3430 300d 0a20 2020  on      400..   
+000333c0: 2020 2020 204e 6577 2059 6f72 6b20 2020       New York   
+000333d0: 2034 3431 0d0a 2020 2020 2020 2020 4865   441..        He
+000333e0: 6c73 696e 6b69 2020 2020 3134 340d 0a20  lsinki    144.. 
+000333f0: 2020 2020 2020 2064 7479 7065 3a20 696e         dtype: in
+00033400: 7436 340d 0a0d 0a20 2020 2020 2020 2053  t64....        S
+00033410: 7175 6172 6520 7468 6520 7661 6c75 6573  quare the values
+00033420: 2062 7920 7061 7373 696e 6720 616e 2061   by passing an a
+00033430: 6e6f 6e79 6d6f 7573 2066 756e 6374 696f  nonymous functio
+00033440: 6e20 6173 2061 6e0d 0a20 2020 2020 2020  n as an..       
+00033450: 2061 7267 756d 656e 7420 746f 2060 6061   argument to ``a
+00033460: 7070 6c79 2829 6060 2e0d 0a0d 0a20 2020  pply()``.....   
+00033470: 2020 2020 203e 3e3e 2066 612e 6170 706c       >>> fa.appl
+00033480: 7928 6c61 6d62 6461 2078 3a20 782a 2a32  y(lambda x: x**2
+00033490: 290d 0a20 2020 2020 2020 204c 6f6e 646f  )..        Londo
+000334a0: 6e20 2020 2020 2034 3030 0d0a 2020 2020  n      400..    
+000334b0: 2020 2020 4e65 7720 596f 726b 2020 2020      New York    
+000334c0: 3434 310d 0a20 2020 2020 2020 2048 656c  441..        Hel
+000334d0: 7369 6e6b 6920 2020 2031 3434 0d0a 2020  sinki    144..  
+000334e0: 2020 2020 2020 6474 7970 653a 2069 6e74        dtype: int
+000334f0: 3634 0d0a 0d0a 2020 2020 2020 2020 4465  64....        De
+00033500: 6669 6e65 2061 2063 7573 746f 6d20 6675  fine a custom fu
+00033510: 6e63 7469 6f6e 2074 6861 7420 6e65 6564  nction that need
+00033520: 7320 6164 6469 7469 6f6e 616c 2070 6f73  s additional pos
+00033530: 6974 696f 6e61 6c0d 0a20 2020 2020 2020  itional..       
+00033540: 2061 7267 756d 656e 7473 2061 6e64 2070   arguments and p
+00033550: 6173 7320 7468 6573 6520 6164 6469 7469  ass these additi
+00033560: 6f6e 616c 2061 7267 756d 656e 7473 2075  onal arguments u
+00033570: 7369 6e67 2074 6865 0d0a 2020 2020 2020  sing the..      
+00033580: 2020 6060 6172 6773 6060 206b 6579 776f    ``args`` keywo
+00033590: 7264 2e0d 0a0d 0a20 2020 2020 2020 203e  rd.....        >
+000335a0: 3e3e 2064 6566 2073 7562 7472 6163 745f  >> def subtract_
+000335b0: 6375 7374 6f6d 5f76 616c 7565 2878 2c20  custom_value(x, 
+000335c0: 6375 7374 6f6d 5f76 616c 7565 293a 0d0a  custom_value):..
+000335d0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+000335e0: 7265 7475 726e 2078 2d63 7573 746f 6d5f  return x-custom_
+000335f0: 7661 6c75 650d 0a20 2020 2020 2020 203e  value..        >
+00033600: 3e3e 2066 612e 6170 706c 7928 7375 6274  >> fa.apply(subt
+00033610: 7261 6374 5f63 7573 746f 6d5f 7661 6c75  ract_custom_valu
+00033620: 652c 2061 7267 733d 2835 2c29 290d 0a20  e, args=(5,)).. 
+00033630: 2020 2020 2020 204c 6f6e 646f 6e20 2020         London   
+00033640: 2020 2031 350d 0a20 2020 2020 2020 204e     15..        N
+00033650: 6577 2059 6f72 6b20 2020 2031 360d 0a20  ew York    16.. 
+00033660: 2020 2020 2020 2048 656c 7369 6e6b 6920         Helsinki 
+00033670: 2020 2020 370d 0a20 2020 2020 2020 2064      7..        d
+00033680: 7479 7065 3a20 696e 7436 340d 0a0d 0a20  type: int64.... 
+00033690: 2020 2020 2020 2044 6566 696e 6520 6120         Define a 
+000336a0: 6375 7374 6f6d 2066 756e 6374 696f 6e20  custom function 
+000336b0: 7468 6174 2074 616b 6573 206b 6579 776f  that takes keywo
+000336c0: 7264 2061 7267 756d 656e 7473 0d0a 2020  rd arguments..  
+000336d0: 2020 2020 2020 616e 6420 7061 7373 2074        and pass t
+000336e0: 6865 7365 2061 7267 756d 656e 7473 2074  hese arguments t
+000336f0: 6f20 6060 6170 706c 7960 602e 0d0a 0d0a  o ``apply``.....
+00033700: 2020 2020 2020 2020 3e3e 3e20 6465 6620          >>> def 
+00033710: 6164 645f 6375 7374 6f6d 5f76 616c 7565  add_custom_value
+00033720: 7328 782c 202a 2a6b 7761 7267 7329 3a0d  s(x, **kwargs):.
+00033730: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+00033740: 2066 6f72 206d 6f6e 7468 2069 6e20 6b77   for month in kw
+00033750: 6172 6773 3a0d 0a20 2020 2020 2020 202e  args:..        .
+00033760: 2e2e 2020 2020 2020 2020 2078 2b3d 6b77  ..         x+=kw
+00033770: 6172 6773 5b6d 6f6e 7468 5d0d 0a20 2020  args[month]..   
+00033780: 2020 2020 202e 2e2e 2020 2020 2072 6574       ...     ret
+00033790: 7572 6e20 780d 0a20 2020 2020 2020 203e  urn x..        >
+000337a0: 3e3e 2066 612e 6170 706c 7928 6164 645f  >> fa.apply(add_
+000337b0: 6375 7374 6f6d 5f76 616c 7565 732c 206a  custom_values, j
+000337c0: 756e 653d 3330 2c20 6a75 6c79 3d32 302c  une=30, july=20,
+000337d0: 2061 7567 7573 743d 3235 290d 0a20 2020   august=25)..   
+000337e0: 2020 2020 204c 6f6e 646f 6e20 2020 2020       London     
+000337f0: 2039 350d 0a20 2020 2020 2020 204e 6577   95..        New
+00033800: 2059 6f72 6b20 2020 2039 360d 0a20 2020   York    96..   
+00033810: 2020 2020 2048 656c 7369 6e6b 6920 2020       Helsinki   
+00033820: 2038 370d 0a20 2020 2020 2020 2064 7479   87..        dty
+00033830: 7065 3a20 696e 7436 340d 0a0d 0a20 2020  pe: int64....   
+00033840: 2020 2020 2055 7365 2061 2066 756e 6374       Use a funct
+00033850: 696f 6e20 6672 6f6d 2074 6865 204e 756d  ion from the Num
+00033860: 7079 206c 6962 7261 7279 2e0d 0a0d 0a20  py library..... 
+00033870: 2020 2020 2020 203e 3e3e 2066 612e 6170         >>> fa.ap
+00033880: 706c 7928 6e70 2e6c 6f67 290d 0a20 2020  ply(np.log)..   
+00033890: 2020 2020 204c 6f6e 646f 6e20 2020 2020       London     
+000338a0: 2032 2e39 3935 3733 320d 0a20 2020 2020   2.995732..     
+000338b0: 2020 204e 6577 2059 6f72 6b20 2020 2033     New York    3
+000338c0: 2e30 3434 3532 320d 0a20 2020 2020 2020  .044522..       
+000338d0: 2048 656c 7369 6e6b 6920 2020 2032 2e34   Helsinki    2.4
+000338e0: 3834 3930 370d 0a20 2020 2020 2020 2064  84907..        d
+000338f0: 7479 7065 3a20 666c 6f61 7436 340d 0a20  type: float64.. 
+00033900: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00033910: 2020 2020 696d 706f 7274 2070 616e 6461      import panda
+00033920: 7320 6173 2070 640d 0a0d 0a20 2020 2020  s as pd....     
+00033930: 2020 2073 6572 6965 7320 3d20 7064 2e53     series = pd.S
+00033940: 6572 6965 7328 7365 6c66 290d 0a20 2020  eries(self)..   
+00033950: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+00033960: 7269 6573 2e61 7070 6c79 2866 756e 632c  ries.apply(func,
+00033970: 2063 6f6e 7665 7274 5f64 7479 7065 3d63   convert_dtype=c
+00033980: 6f6e 7665 7274 5f64 7479 7065 2c20 6172  onvert_dtype, ar
+00033990: 6773 3d61 7267 732c 202a 2a6b 7764 7329  gs=args, **kwds)
+000339a0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000339b0: 2072 6573 756c 742e 7661 6c75 6573 0d0a   result.values..
+000339c0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+000339d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000339e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000339f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00033a00: 2d2d 2d0d 0a20 2020 2040 6361 6368 6564  ---..    @cached
+00033a10: 5f77 6561 6b72 6566 5f70 726f 7065 7274  _weakref_propert
+00033a20: 790d 0a20 2020 2064 6566 2073 7472 2873  y..    def str(s
+00033a30: 656c 6629 202d 3e20 2246 4153 7472 696e  elf) -> "FAStrin
+00033a40: 6722 3a0d 0a20 2020 2020 2020 2072 2222  g":..        r""
+00033a50: 2243 6173 7473 2061 6e20 6172 7261 7920  "Casts an array 
+00033a60: 6f66 2062 7974 6520 7374 7269 6e67 7320  of byte strings 
+00033a70: 6f72 2075 6e69 636f 6465 2061 7320 6060  or unicode as ``
+00033a80: 4641 5374 7269 6e67 6060 2e0d 0a0d 0a20  FAString``..... 
+00033a90: 2020 2020 2020 2045 6e61 626c 6573 2061         Enables a
+00033aa0: 2076 6172 6965 7479 206f 6620 7573 6566   variety of usef
+00033ab0: 756c 2073 7472 696e 6720 6d61 6e69 7075  ul string manipu
+00033ac0: 6c61 7469 6f6e 206d 6574 686f 6473 2e0d  lation methods..
+00033ad0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00033ae0: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+00033af0: 2d2d 2d0d 0a20 2020 2020 2020 2046 4153  ---..        FAS
+00033b00: 7472 696e 670d 0a0d 0a20 2020 2020 2020  tring....       
+00033b10: 2052 6169 7365 730d 0a20 2020 2020 2020   Raises..       
+00033b20: 202d 2d2d 2d2d 2d0d 0a20 2020 2020 2020   ------..       
+00033b30: 2054 7970 6545 7272 6f72 0d0a 2020 2020   TypeError..    
+00033b40: 2020 2020 2020 2020 4966 2074 6865 2046          If the F
+00033b50: 6173 7441 7272 6179 2069 7320 6f66 2064  astArray is of d
+00033b60: 7479 7065 206f 7468 6572 2074 6861 6e20  type other than 
+00033b70: 6279 7465 2073 7472 696e 6720 6f72 2075  byte string or u
+00033b80: 6e69 636f 6465 0d0a 0d0a 2020 2020 2020  nicode....      
+00033b90: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
+00033ba0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+00033bb0: 2020 2020 2020 6e70 2e63 6861 7261 7272        np.chararr
+00033bc0: 6179 0d0a 2020 2020 2020 2020 6e70 2e63  ay..        np.c
+00033bd0: 6861 720d 0a20 2020 2020 2020 2072 742e  har..        rt.
+00033be0: 4641 5374 7269 6e67 2e61 7070 6c79 0d0a  FAString.apply..
+00033bf0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00033c00: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00033c10: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+00033c20: 3e20 733d 4641 285b 2774 6869 7327 2c27  > s=FA(['this','
+00033c30: 7468 6174 272c 2774 6573 7420 275d 2a31  that','test ']*1
+00033c40: 3030 5f30 3030 290d 0a20 2020 2020 2020  00_000)..       
+00033c50: 203e 3e3e 2073 2e73 7472 2e75 7070 6572   >>> s.str.upper
+00033c60: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00033c70: 7261 7928 5b62 2754 4849 5327 2c20 6227  ray([b'THIS', b'
+00033c80: 5448 4154 272c 2062 2754 4553 5420 272c  THAT', b'TEST ',
+00033c90: 202e 2e2e 2c20 6227 5448 4953 272c 2062   ..., b'THIS', b
+00033ca0: 2754 4841 5427 2c20 6227 5445 5354 2027  'THAT', b'TEST '
+00033cb0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00033cc0: 2020 2020 2020 6474 7970 653d 277c 5335        dtype='|S5
+00033cd0: 2729 0d0a 0d0a 2020 2020 2020 2020 3e3e  ')....        >>
+00033ce0: 3e20 732e 7374 722e 6c6f 7765 720d 0a20  > s.str.lower.. 
+00033cf0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00033d00: 285b 6227 7468 6973 272c 2062 2774 6861  ([b'this', b'tha
+00033d10: 7427 2c20 6227 7465 7374 2027 2c20 2e2e  t', b'test ', ..
+00033d20: 2e2c 2062 2774 6869 7327 2c20 6227 7468  ., b'this', b'th
+00033d30: 6174 272c 2062 2774 6573 7420 275d 2c0d  at', b'test '],.
+00033d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033d50: 2020 2064 7479 7065 3d27 7c53 3527 290d     dtype='|S5').
+00033d60: 0a0d 0a20 2020 2020 2020 203e 3e3e 2073  ...        >>> s
+00033d70: 2e73 7472 2e72 656d 6f76 6574 7261 696c  .str.removetrail
+00033d80: 696e 6728 290d 0a20 2020 2020 2020 2046  ing()..        F
+00033d90: 6173 7441 7272 6179 285b 6227 7468 6973  astArray([b'this
+00033da0: 272c 2062 2774 6861 7427 2c20 6227 7465  ', b'that', b'te
+00033db0: 7374 272c 202e 2e2e 2c20 6227 7468 6973  st', ..., b'this
+00033dc0: 272c 2062 2774 6861 7427 2c20 6227 7465  ', b'that', b'te
+00033dd0: 7374 275d 2c0d 0a20 2020 2020 2020 2020  st'],..         
+00033de0: 2020 2020 2020 2020 2064 7479 7065 3d27           dtype='
+00033df0: 7c53 3527 290d 0a20 2020 2020 2020 2022  |S5')..        "
+00033e00: 2222 0d0a 2020 2020 2020 2020 6966 2073  ""..        if s
+00033e10: 656c 662e 6474 7970 652e 6368 6172 2069  elf.dtype.char i
+00033e20: 6e20 2255 5322 3a0d 0a20 2020 2020 2020  n "US":..       
+00033e30: 2020 2020 2072 6574 7572 6e20 5479 7065       return Type
+00033e40: 5265 6769 7374 6572 2e46 4153 7472 696e  Register.FAStrin
+00033e50: 6728 7365 6c66 290d 0a20 2020 2020 2020  g(self)..       
+00033e60: 2069 6620 7365 6c66 2e64 7479 7065 2e63   if self.dtype.c
+00033e70: 6861 7220 3d3d 2022 4f22 3a0d 0a20 2020  har == "O":..   
+00033e80: 2020 2020 2020 2020 2023 2074 7279 2074           # try t
+00033e90: 6f20 636f 6e76 6572 7420 746f 2073 7472  o convert to str
+00033ea0: 696e 6720 286d 6967 6874 2068 6176 6520  ing (might have 
+00033eb0: 636f 6d65 2066 726f 6d20 7061 6e64 6173  come from pandas
+00033ec0: 290d 0a20 2020 2020 2020 2020 2020 2074  )..            t
+00033ed0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+00033ee0: 2020 2020 2063 6f6e 7620 3d20 7365 6c66       conv = self
+00033ef0: 2e61 7374 7970 6528 2253 2229 0d0a 2020  .astype("S")..  
+00033f00: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00033f10: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00033f20: 2020 2063 6f6e 7620 3d20 7365 6c66 2e61     conv = self.a
+00033f30: 7374 7970 6528 2255 2229 0d0a 2020 2020  stype("U")..    
+00033f40: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+00033f50: 7970 6552 6567 6973 7465 722e 4641 5374  ypeRegister.FASt
+00033f60: 7269 6e67 2863 6f6e 7629 0d0a 0d0a 2020  ring(conv)....  
+00033f70: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
+00033f80: 4572 726f 7228 6622 5468 6520 2e73 7472  Error(f"The .str
+00033f90: 2066 756e 6374 696f 6e20 6361 6e20 6f6e   function can on
+00033fa0: 6c79 2062 6520 7573 6564 206f 6e20 6279  ly be used on by
+00033fb0: 7465 2073 7472 696e 6720 616e 6420 756e  te string and un
+00033fc0: 6963 6f64 6520 6e6f 7420 7b73 656c 662e  icode not {self.
+00033fd0: 6474 7970 6521 727d 2229 0d0a 0d0a 2020  dtype!r}")....  
+00033fe0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+00033ff0: 0a20 2020 2064 6566 2066 726f 6d5f 6172  .    def from_ar
+00034000: 726f 7728 0d0a 2020 2020 2020 2020 6172  row(..        ar
+00034010: 723a 2055 6e69 6f6e 5b22 7061 2e41 7272  r: Union["pa.Arr
+00034020: 6179 222c 2022 7061 2e43 6875 6e6b 6564  ay", "pa.Chunked
+00034030: 4172 7261 7922 5d2c 0d0a 2020 2020 2020  Array"],..      
+00034040: 2020 7a65 726f 5f63 6f70 795f 6f6e 6c79    zero_copy_only
+00034050: 3a20 626f 6f6c 203d 2054 7275 652c 0d0a  : bool = True,..
+00034060: 2020 2020 2020 2020 7772 6974 6162 6c65          writable
+00034070: 3a20 626f 6f6c 203d 2046 616c 7365 2c0d  : bool = False,.
+00034080: 0a20 2020 2020 2020 2061 7574 6f5f 7769  .        auto_wi
+00034090: 6465 6e3a 2062 6f6f 6c20 3d20 4661 6c73  den: bool = Fals
+000340a0: 652c 0d0a 2020 2020 2920 2d3e 2022 4661  e,..    ) -> "Fa
+000340b0: 7374 4172 7261 7922 3a0d 0a20 2020 2020  stArray":..     
+000340c0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000340d0: 436f 6e76 6572 7420 6120 7079 6172 726f  Convert a pyarro
+000340e0: 7720 6041 7272 6179 6020 746f 2061 2072  w `Array` to a r
+000340f0: 6970 7461 626c 6520 6046 6173 7441 7272  iptable `FastArr
+00034100: 6179 602e 0d0a 0d0a 2020 2020 2020 2020  ay`.....        
+00034110: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+00034120: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+00034130: 2020 2020 2020 2020 6172 7220 3a20 7079          arr : py
+00034140: 6172 726f 772e 4172 7261 7920 6f72 2070  arrow.Array or p
+00034150: 7961 7272 6f77 2e43 6875 6e6b 6564 4172  yarrow.ChunkedAr
+00034160: 7261 790d 0a20 2020 2020 2020 207a 6572  ray..        zer
+00034170: 6f5f 636f 7079 5f6f 6e6c 7920 3a20 626f  o_copy_only : bo
+00034180: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
+00034190: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
+000341a0: 2054 7275 652c 2061 6e20 6578 6365 7074   True, an except
+000341b0: 696f 6e20 7769 6c6c 2062 6520 7261 6973  ion will be rais
+000341c0: 6564 2069 6620 7468 6520 636f 6e76 6572  ed if the conver
+000341d0: 7369 6f6e 2074 6f20 6120 6046 6173 7441  sion to a `FastA
+000341e0: 7272 6179 6020 776f 756c 6420 7265 7175  rray` would requ
+000341f0: 6972 6520 636f 7079 696e 6720 7468 650d  ire copying the.
+00034200: 0a20 2020 2020 2020 2020 2020 2075 6e64  .            und
+00034210: 6572 6c79 696e 6720 6461 7461 2028 652e  erlying data (e.
+00034220: 672e 2069 6e20 7072 6573 656e 6365 206f  g. in presence o
+00034230: 6620 6e75 6c6c 732c 206f 7220 666f 7220  f nulls, or for 
+00034240: 6e6f 6e2d 7072 696d 6974 6976 6520 7479  non-primitive ty
+00034250: 7065 7329 2e0d 0a20 2020 2020 2020 2077  pes)...        w
+00034260: 7269 7461 626c 6520 3a20 626f 6f6c 2c20  ritable : bool, 
+00034270: 6465 6661 756c 7420 4661 6c73 650d 0a20  default False.. 
+00034280: 2020 2020 2020 2020 2020 2046 6f72 2061             For a
+00034290: 2060 4661 7374 4172 7261 7960 2063 7265   `FastArray` cre
+000342a0: 6174 6564 2077 6974 6820 7a65 726f 2063  ated with zero c
+000342b0: 6f70 7920 2876 6965 7720 6f6e 2074 6865  opy (view on the
+000342c0: 2041 7272 6f77 2064 6174 6129 2c20 7468   Arrow data), th
+000342d0: 6520 7265 7375 6c74 696e 6720 6172 7261  e resulting arra
+000342e0: 7920 6973 206e 6f74 2077 7269 7461 626c  y is not writabl
+000342f0: 6520 2841 7272 6f77 2064 6174 6120 6973  e (Arrow data is
+00034300: 2069 6d6d 7574 6162 6c65 292e 0d0a 2020   immutable)...  
+00034310: 2020 2020 2020 2020 2020 4279 2073 6574            By set
+00034320: 7469 6e67 2074 6869 7320 746f 2054 7275  ting this to Tru
+00034330: 652c 2061 2063 6f70 7920 6f66 2074 6865  e, a copy of the
+00034340: 2061 7272 6179 2069 7320 6d61 6465 2074   array is made t
+00034350: 6f20 656e 7375 7265 2069 7420 6973 2077  o ensure it is w
+00034360: 7269 7461 626c 652e 0d0a 2020 2020 2020  ritable...      
+00034370: 2020 6175 746f 5f77 6964 656e 203a 2062    auto_widen : b
+00034380: 6f6f 6c2c 206f 7074 696f 6e61 6c2c 2064  ool, optional, d
+00034390: 6566 6175 6c74 2074 6f20 4661 6c73 650d  efault to False.
+000343a0: 0a20 2020 2020 2020 2020 2020 2057 6865  .            Whe
+000343b0: 6e20 4661 6c73 6520 2874 6865 2064 6566  n False (the def
+000343c0: 6175 6c74 292c 2069 6620 616e 2061 7272  ault), if an arr
+000343d0: 6f77 2061 7272 6179 2063 6f6e 7461 696e  ow array contain
+000343e0: 7320 6120 7661 6c75 6520 7768 6963 6820  s a value which 
+000343f0: 776f 756c 6420 6265 2063 6f6e 7369 6465  would be conside
+00034400: 7265 640d 0a20 2020 2020 2020 2020 2020  red..           
+00034410: 2074 6865 2027 696e 7661 6c69 6427 2f4e   the 'invalid'/N
+00034420: 4120 7661 6c75 6520 666f 7220 7468 6520  A value for the 
+00034430: 6571 7569 7661 6c65 6e74 2064 7479 7065  equivalent dtype
+00034440: 2069 6e20 6120 6046 6173 7441 7272 6179   in a `FastArray
+00034450: 602c 2072 6169 7365 2061 6e20 6578 6365  `, raise an exce
+00034460: 7074 696f 6e0d 0a20 2020 2020 2020 2020  ption..         
+00034470: 2020 2062 6563 6175 7365 2064 6972 6563     because direc
+00034480: 7420 636f 6e76 6572 7369 6f6e 2077 6f75  t conversion wou
+00034490: 6c64 2062 6520 6c6f 7373 7920 2f20 6368  ld be lossy / ch
+000344a0: 616e 6765 2074 6865 2073 656d 616e 7469  ange the semanti
+000344b0: 6320 6d65 616e 696e 6720 6f66 2074 6865  c meaning of the
+000344c0: 2064 6174 612e 0d0a 2020 2020 2020 2020   data...        
+000344d0: 2020 2020 5768 656e 2054 7275 652c 2074      When True, t
+000344e0: 6865 2063 6f6e 7665 7274 6564 2061 7272  he converted arr
+000344f0: 6179 2077 696c 6c20 6265 2077 6964 656e  ay will be widen
+00034500: 6564 2028 6966 2070 6f73 7369 626c 6529  ed (if possible)
+00034510: 2074 6f20 7468 6520 6e65 7874 2d6c 6172   to the next-lar
+00034520: 6765 7374 2064 7479 7065 0d0a 2020 2020  gest dtype..    
+00034530: 2020 2020 2020 2020 746f 2065 6e73 7572          to ensur
+00034540: 6520 7468 6520 6461 7461 2077 696c 6c20  e the data will 
+00034550: 6265 2069 6e74 6572 7072 6574 6564 2069  be interpreted i
+00034560: 6e20 7468 6520 7361 6d65 2077 6179 2e0d  n the same way..
+00034570: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00034580: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+00034590: 2d2d 2d0d 0a20 2020 2020 2020 2046 6173  ---..        Fas
+000345a0: 7441 7272 6179 0d0a 2020 2020 2020 2020  tArray..        
+000345b0: 2222 220d 0a20 2020 2020 2020 2069 6d70  """..        imp
+000345c0: 6f72 7420 7079 6172 726f 772e 7479 7065  ort pyarrow.type
+000345d0: 7320 6173 2070 6174 0d0a 0d0a 2020 2020  s as pat....    
+000345e0: 2020 2020 2320 4261 7365 6420 6f6e 2074      # Based on t
+000345f0: 6865 2074 7970 6520 6f66 2074 6865 2061  he type of the a
+00034600: 7272 6179 2c20 6469 7370 6174 6368 2074  rray, dispatch t
+00034610: 6f20 7479 7065 2d73 7065 6369 6669 6320  o type-specific 
+00034620: 696d 706c 656d 656e 7461 7469 6f6e 7320  implementations 
+00034630: 6f66 202e 6672 6f6d 5f61 7272 6f77 2829  of .from_arrow()
+00034640: 2e0d 0a20 2020 2020 2020 2070 615f 6172  ...        pa_ar
+00034650: 725f 7479 7065 203d 2061 7272 2e74 7970  r_type = arr.typ
+00034660: 650d 0a20 2020 2020 2020 2069 6620 280d  e..        if (.
+00034670: 0a20 2020 2020 2020 2020 2020 2070 6174  .            pat
+00034680: 2e69 735f 626f 6f6c 6561 6e28 7061 5f61  .is_boolean(pa_a
+00034690: 7272 5f74 7970 6529 0d0a 2020 2020 2020  rr_type)..      
+000346a0: 2020 2020 2020 6f72 2070 6174 2e69 735f        or pat.is_
+000346b0: 696e 7465 6765 7228 7061 5f61 7272 5f74  integer(pa_arr_t
+000346c0: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
+000346d0: 2020 6f72 2070 6174 2e69 735f 666c 6f61    or pat.is_floa
+000346e0: 7469 6e67 2870 615f 6172 725f 7479 7065  ting(pa_arr_type
+000346f0: 290d 0a20 2020 2020 2020 2020 2020 206f  )..            o
+00034700: 7220 7061 742e 6973 5f73 7472 696e 6728  r pat.is_string(
+00034710: 7061 5f61 7272 5f74 7970 6529 0d0a 2020  pa_arr_type)..  
+00034720: 2020 2020 2020 2020 2020 6f72 2070 6174            or pat
+00034730: 2e69 735f 6269 6e61 7279 2870 615f 6172  .is_binary(pa_ar
+00034740: 725f 7479 7065 290d 0a20 2020 2020 2020  r_type)..       
+00034750: 2020 2020 206f 7220 7061 742e 6973 5f66       or pat.is_f
+00034760: 6978 6564 5f73 697a 655f 6269 6e61 7279  ixed_size_binary
+00034770: 2870 615f 6172 725f 7479 7065 290d 0a20  (pa_arr_type).. 
+00034780: 2020 2020 2020 2029 3a0d 0a20 2020 2020         ):..     
+00034790: 2020 2020 2020 2023 2054 4f44 4f3a 2043         # TODO: C
+000347a0: 6865 636b 2077 6865 7468 6572 2074 6869  heck whether thi
+000347b0: 7320 636f 6c75 6d6e 2068 6173 2061 2075  s column has a u
+000347c0: 7365 722d 7370 6563 6966 6965 6420 6669  ser-specified fi
+000347d0: 6c6c 2076 616c 7565 2070 726f 7669 6465  ll value provide
+000347e0: 643b 2069 6620 736f 2c20 7061 7373 2069  d; if so, pass i
+000347f0: 7420 616c 6f6e 6720 746f 0d0a 2020 2020  t along to..    
+00034800: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00034810: 7468 6520 4661 7374 4172 7261 792e 6672  the FastArray.fr
+00034820: 6f6d 5f61 7272 6f77 2829 206d 6574 686f  om_arrow() metho
+00034830: 6420 6361 6c6c 2062 656c 6f77 2e0d 0a20  d call below... 
+00034840: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00034850: 6e20 4661 7374 4172 7261 792e 5f66 726f  n FastArray._fro
+00034860: 6d5f 6172 726f 7728 6172 722c 207a 6572  m_arrow(arr, zer
+00034870: 6f5f 636f 7079 5f6f 6e6c 793d 7a65 726f  o_copy_only=zero
+00034880: 5f63 6f70 795f 6f6e 6c79 2c20 7772 6974  _copy_only, writ
+00034890: 6162 6c65 3d77 7269 7461 626c 652c 2061  able=writable, a
+000348a0: 7574 6f5f 7769 6465 6e3d 6175 746f 5f77  uto_widen=auto_w
+000348b0: 6964 656e 290d 0a0d 0a20 2020 2020 2020  iden)....       
+000348c0: 2065 6c69 6620 7061 742e 6973 5f64 6963   elif pat.is_dic
+000348d0: 7469 6f6e 6172 7928 7061 5f61 7272 5f74  tionary(pa_arr_t
+000348e0: 7970 6529 206f 7220 7061 742e 6973 5f73  ype) or pat.is_s
+000348f0: 7472 7563 7428 7061 5f61 7272 5f74 7970  truct(pa_arr_typ
+00034900: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
+00034910: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
+00034920: 7374 6572 2e43 6174 6567 6f72 6963 616c  ster.Categorical
+00034930: 2e5f 6672 6f6d 5f61 7272 6f77 2861 7272  ._from_arrow(arr
+00034940: 2c20 7a65 726f 5f63 6f70 795f 6f6e 6c79  , zero_copy_only
+00034950: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
+00034960: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
+00034970: 6c65 290d 0a0d 0a20 2020 2020 2020 2065  le)....        e
+00034980: 6c69 6620 7061 742e 6973 5f74 696d 6573  lif pat.is_times
+00034990: 7461 6d70 2870 615f 6172 725f 7479 7065  tamp(pa_arr_type
+000349a0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000349b0: 7265 7475 726e 2054 7970 6552 6567 6973  return TypeRegis
+000349c0: 7465 722e 4461 7465 5469 6d65 4e61 6e6f  ter.DateTimeNano
+000349d0: 2e5f 6672 6f6d 5f61 7272 6f77 2861 7272  ._from_arrow(arr
+000349e0: 2c20 7a65 726f 5f63 6f70 795f 6f6e 6c79  , zero_copy_only
+000349f0: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
+00034a00: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
+00034a10: 6c65 290d 0a0d 0a20 2020 2020 2020 2065  le)....        e
+00034a20: 6c69 6620 7061 742e 6973 5f64 6174 6528  lif pat.is_date(
+00034a30: 7061 5f61 7272 5f74 7970 6529 3a0d 0a20  pa_arr_type):.. 
+00034a40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00034a50: 6e20 5479 7065 5265 6769 7374 6572 2e44  n TypeRegister.D
+00034a60: 6174 652e 5f66 726f 6d5f 6172 726f 7728  ate._from_arrow(
+00034a70: 6172 722c 207a 6572 6f5f 636f 7079 5f6f  arr, zero_copy_o
+00034a80: 6e6c 793d 7a65 726f 5f63 6f70 795f 6f6e  nly=zero_copy_on
+00034a90: 6c79 2c20 7772 6974 6162 6c65 3d77 7269  ly, writable=wri
+00034aa0: 7461 626c 6529 0d0a 0d0a 2020 2020 2020  table)....      
+00034ab0: 2020 656c 6966 2070 6174 2e69 735f 6475    elif pat.is_du
+00034ac0: 7261 7469 6f6e 2870 615f 6172 725f 7479  ration(pa_arr_ty
+00034ad0: 7065 293a 0d0a 2020 2020 2020 2020 2020  pe):..          
+00034ae0: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
+00034af0: 6973 7465 722e 5469 6d65 5370 616e 2e5f  ister.TimeSpan._
+00034b00: 6672 6f6d 5f61 7272 6f77 2861 7272 2c20  from_arrow(arr, 
+00034b10: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3d7a  zero_copy_only=z
+00034b20: 6572 6f5f 636f 7079 5f6f 6e6c 792c 2077  ero_copy_only, w
+00034b30: 7269 7461 626c 653d 7772 6974 6162 6c65  ritable=writable
+00034b40: 290d 0a0d 0a20 2020 2020 2020 2065 6c73  )....        els
+00034b50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00034b60: 2320 556e 6b6e 6f77 6e2f 756e 7375 7070  # Unknown/unsupp
+00034b70: 6f72 7465 6420 6172 7261 7920 7479 7065  orted array type
+00034b80: 202d 2d20 6361 6e27 7420 636f 6e76 6572   -- can't conver
+00034b90: 742e 0d0a 2020 2020 2020 2020 2020 2020  t...            
+00034ba0: 7261 6973 6520 4e6f 7449 6d70 6c65 6d65  raise NotImpleme
+00034bb0: 6e74 6564 4572 726f 7228 6622 7079 6172  ntedError(f"pyar
+00034bc0: 726f 7720 6172 7261 7973 206f 6620 7479  row arrays of ty
+00034bd0: 7065 2027 7b70 615f 6172 725f 7479 7065  pe '{pa_arr_type
+00034be0: 7d27 2063 616e 2774 2062 6520 636f 6e76  }' can't be conv
+00034bf0: 6572 7465 6420 746f 2072 6970 7461 626c  erted to riptabl
+00034c00: 6520 6172 7261 7973 2e22 290d 0a0d 0a20  e arrays.").... 
+00034c10: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00034c20: 0d0a 2020 2020 6465 6620 5f66 726f 6d5f  ..    def _from_
+00034c30: 6172 726f 7728 0d0a 2020 2020 2020 2020  arrow(..        
+00034c40: 6172 723a 2055 6e69 6f6e 5b22 7061 2e41  arr: Union["pa.A
+00034c50: 7272 6179 222c 2022 7061 2e43 6875 6e6b  rray", "pa.Chunk
+00034c60: 6564 4172 7261 7922 5d2c 0d0a 2020 2020  edArray"],..    
+00034c70: 2020 2020 7a65 726f 5f63 6f70 795f 6f6e      zero_copy_on
+00034c80: 6c79 3a20 626f 6f6c 203d 2054 7275 652c  ly: bool = True,
+00034c90: 0d0a 2020 2020 2020 2020 7772 6974 6162  ..        writab
+00034ca0: 6c65 3a20 626f 6f6c 203d 2046 616c 7365  le: bool = False
+00034cb0: 2c0d 0a20 2020 2020 2020 2061 7574 6f5f  ,..        auto_
+00034cc0: 7769 6465 6e3a 2062 6f6f 6c20 3d20 4661  widen: bool = Fa
+00034cd0: 6c73 652c 0d0a 2020 2020 2920 2d3e 2022  lse,..    ) -> "
+00034ce0: 4661 7374 4172 7261 7922 3a0d 0a20 2020  FastArray":..   
+00034cf0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00034d00: 2020 436f 6e76 6572 7420 6120 7079 6172    Convert a pyar
+00034d10: 726f 7720 6041 7272 6179 6020 746f 2061  row `Array` to a
+00034d20: 2072 6970 7461 626c 6520 6046 6173 7441   riptable `FastA
+00034d30: 7272 6179 602e 0d0a 0d0a 2020 2020 2020  rray`.....      
+00034d40: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00034d50: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00034d60: 0d0a 2020 2020 2020 2020 6172 7220 3a20  ..        arr : 
+00034d70: 7079 6172 726f 772e 4172 7261 7920 6f72  pyarrow.Array or
+00034d80: 2070 7961 7272 6f77 2e43 6875 6e6b 6564   pyarrow.Chunked
+00034d90: 4172 7261 790d 0a20 2020 2020 2020 207a  Array..        z
+00034da0: 6572 6f5f 636f 7079 5f6f 6e6c 7920 3a20  ero_copy_only : 
+00034db0: 626f 6f6c 2c20 6465 6661 756c 7420 5472  bool, default Tr
+00034dc0: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
+00034dd0: 4966 2054 7275 652c 2061 6e20 6578 6365  If True, an exce
+00034de0: 7074 696f 6e20 7769 6c6c 2062 6520 7261  ption will be ra
+00034df0: 6973 6564 2069 6620 7468 6520 636f 6e76  ised if the conv
+00034e00: 6572 7369 6f6e 2074 6f20 6120 6046 6173  ersion to a `Fas
+00034e10: 7441 7272 6179 6020 776f 756c 6420 7265  tArray` would re
+00034e20: 7175 6972 6520 636f 7079 696e 6720 7468  quire copying th
+00034e30: 650d 0a20 2020 2020 2020 2020 2020 2075  e..            u
+00034e40: 6e64 6572 6c79 696e 6720 6461 7461 2028  nderlying data (
+00034e50: 652e 672e 2069 6e20 7072 6573 656e 6365  e.g. in presence
+00034e60: 206f 6620 6e75 6c6c 732c 206f 7220 666f   of nulls, or fo
+00034e70: 7220 6e6f 6e2d 7072 696d 6974 6976 6520  r non-primitive 
+00034e80: 7479 7065 7329 2e0d 0a20 2020 2020 2020  types)...       
+00034e90: 2077 7269 7461 626c 6520 3a20 626f 6f6c   writable : bool
+00034ea0: 2c20 6465 6661 756c 7420 4661 6c73 650d  , default False.
+00034eb0: 0a20 2020 2020 2020 2020 2020 2046 6f72  .            For
+00034ec0: 2061 2060 4661 7374 4172 7261 7960 2063   a `FastArray` c
+00034ed0: 7265 6174 6564 2077 6974 6820 7a65 726f  reated with zero
+00034ee0: 2063 6f70 7920 2876 6965 7720 6f6e 2074   copy (view on t
+00034ef0: 6865 2041 7272 6f77 2064 6174 6129 2c20  he Arrow data), 
+00034f00: 7468 6520 7265 7375 6c74 696e 6720 6172  the resulting ar
+00034f10: 7261 7920 6973 206e 6f74 2077 7269 7461  ray is not writa
+00034f20: 626c 6520 2841 7272 6f77 2064 6174 6120  ble (Arrow data 
+00034f30: 6973 2069 6d6d 7574 6162 6c65 292e 0d0a  is immutable)...
+00034f40: 2020 2020 2020 2020 2020 2020 4279 2073              By s
+00034f50: 6574 7469 6e67 2074 6869 7320 746f 2054  etting this to T
+00034f60: 7275 652c 2061 2063 6f70 7920 6f66 2074  rue, a copy of t
+00034f70: 6865 2061 7272 6179 2069 7320 6d61 6465  he array is made
+00034f80: 2074 6f20 656e 7375 7265 2069 7420 6973   to ensure it is
+00034f90: 2077 7269 7461 626c 652e 0d0a 2020 2020   writable...    
+00034fa0: 2020 2020 6175 746f 5f77 6964 656e 203a      auto_widen :
+00034fb0: 2062 6f6f 6c2c 206f 7074 696f 6e61 6c2c   bool, optional,
+00034fc0: 2064 6566 6175 6c74 2074 6f20 4661 6c73   default to Fals
+00034fd0: 650d 0a20 2020 2020 2020 2020 2020 2057  e..            W
+00034fe0: 6865 6e20 4661 6c73 6520 2874 6865 2064  hen False (the d
+00034ff0: 6566 6175 6c74 292c 2069 6620 616e 2061  efault), if an a
+00035000: 7272 6f77 2061 7272 6179 2063 6f6e 7461  rrow array conta
+00035010: 696e 7320 6120 7661 6c75 6520 7768 6963  ins a value whic
+00035020: 6820 776f 756c 6420 6265 2063 6f6e 7369  h would be consi
+00035030: 6465 7265 640d 0a20 2020 2020 2020 2020  dered..         
+00035040: 2020 2074 6865 2027 696e 7661 6c69 6427     the 'invalid'
+00035050: 2f4e 4120 7661 6c75 6520 666f 7220 7468  /NA value for th
+00035060: 6520 6571 7569 7661 6c65 6e74 2064 7479  e equivalent dty
+00035070: 7065 2069 6e20 6120 6046 6173 7441 7272  pe in a `FastArr
+00035080: 6179 602c 2072 6169 7365 2061 6e20 6578  ay`, raise an ex
+00035090: 6365 7074 696f 6e0d 0a20 2020 2020 2020  ception..       
+000350a0: 2020 2020 2062 6563 6175 7365 2064 6972       because dir
+000350b0: 6563 7420 636f 6e76 6572 7369 6f6e 2077  ect conversion w
+000350c0: 6f75 6c64 2062 6520 6c6f 7373 7920 2f20  ould be lossy / 
+000350d0: 6368 616e 6765 2074 6865 2073 656d 616e  change the seman
+000350e0: 7469 6320 6d65 616e 696e 6720 6f66 2074  tic meaning of t
+000350f0: 6865 2064 6174 612e 0d0a 2020 2020 2020  he data...      
+00035100: 2020 2020 2020 5768 656e 2054 7275 652c        When True,
+00035110: 2074 6865 2063 6f6e 7665 7274 6564 2061   the converted a
+00035120: 7272 6179 2077 696c 6c20 6265 2077 6964  rray will be wid
+00035130: 656e 6564 2028 6966 2070 6f73 7369 626c  ened (if possibl
+00035140: 6529 2074 6f20 7468 6520 6e65 7874 2d6c  e) to the next-l
+00035150: 6172 6765 7374 2064 7479 7065 0d0a 2020  argest dtype..  
+00035160: 2020 2020 2020 2020 2020 746f 2065 6e73            to ens
+00035170: 7572 6520 7468 6520 6461 7461 2077 696c  ure the data wil
+00035180: 6c20 6265 2069 6e74 6572 7072 6574 6564  l be interpreted
+00035190: 2069 6e20 7468 6520 7361 6d65 2077 6179   in the same way
+000351a0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
+000351b0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+000351c0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
+000351d0: 6173 7441 7272 6179 0d0a 2020 2020 2020  astArray..      
+000351e0: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
+000351f0: 6d70 6f72 7420 7079 6172 726f 7720 6173  mport pyarrow as
+00035200: 2070 610d 0a20 2020 2020 2020 2069 6d70   pa..        imp
+00035210: 6f72 7420 7079 6172 726f 772e 636f 6d70  ort pyarrow.comp
+00035220: 7574 6520 6173 2070 630d 0a20 2020 2020  ute as pc..     
+00035230: 2020 2069 6d70 6f72 7420 7079 6172 726f     import pyarro
+00035240: 772e 7479 7065 7320 6173 2070 6174 0d0a  w.types as pat..
+00035250: 0d0a 2020 2020 2020 2020 2320 4d61 6b65  ..        # Make
+00035260: 2073 7572 6520 7468 6520 696e 7075 7420   sure the input 
+00035270: 6172 7261 7920 6973 206f 6e65 206f 6620  array is one of 
+00035280: 7468 6520 7079 6172 726f 7720 6172 7261  the pyarrow arra
+00035290: 7920 7479 7065 732e 0d0a 2020 2020 2020  y types...      
+000352a0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+000352b0: 6e63 6528 6172 722c 2028 7061 2e41 7272  nce(arr, (pa.Arr
+000352c0: 6179 2c20 7061 2e43 6875 6e6b 6564 4172  ay, pa.ChunkedAr
+000352d0: 7261 7929 293a 0d0a 2020 2020 2020 2020  ray)):..        
+000352e0: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
+000352f0: 726f 7228 2254 6865 2061 7272 6179 2069  ror("The array i
+00035300: 7320 6e6f 7420 616e 2069 6e73 7461 6e63  s not an instanc
+00035310: 6520 6f66 2060 7079 6172 726f 772e 4172  e of `pyarrow.Ar
+00035320: 7261 7960 206f 7220 6070 7961 7272 6f77  ray` or `pyarrow
+00035330: 2e43 6875 6e6b 6564 4172 7261 7960 2e22  .ChunkedArray`."
+00035340: 290d 0a0d 0a20 2020 2020 2020 2023 2043  )....        # C
+00035350: 6875 6e6b 6564 4172 7261 7973 206e 6565  hunkedArrays nee
+00035360: 6420 7370 6563 6961 6c20 6861 6e64 6c69  d special handli
+00035370: 6e67 2e0d 0a20 2020 2020 2020 2069 6620  ng...        if 
+00035380: 6973 696e 7374 616e 6365 2861 7272 2c20  isinstance(arr, 
+00035390: 7061 2e43 6875 6e6b 6564 4172 7261 7929  pa.ChunkedArray)
+000353a0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+000353b0: 2041 2073 696e 676c 652d 6368 756e 6b20   A single-chunk 
+000353c0: 4368 756e 6b65 6441 7272 6179 2063 616e  ChunkedArray can
+000353d0: 2062 6520 6861 6e64 6c65 6420 6279 206a   be handled by j
+000353e0: 7573 7420 6578 7472 6163 7469 6e67 2074  ust extracting t
+000353f0: 6861 7420 6368 756e 6b0d 0a20 2020 2020  hat chunk..     
+00035400: 2020 2020 2020 2023 2061 6e64 2072 6563         # and rec
+00035410: 7572 7369 7665 6c79 2070 726f 6365 7373  ursively process
+00035420: 696e 6720 6974 2e0d 0a20 2020 2020 2020  ing it...       
+00035430: 2020 2020 2069 6620 6172 722e 6e75 6d5f       if arr.num_
+00035440: 6368 756e 6b73 203d 3d20 313a 0d0a 2020  chunks == 1:..  
+00035450: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00035460: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
+00035470: 6672 6f6d 5f61 7272 6f77 280d 0a20 2020  from_arrow(..   
+00035480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035490: 2061 7272 2e63 6875 6e6b 2830 292c 207a   arr.chunk(0), z
+000354a0: 6572 6f5f 636f 7079 5f6f 6e6c 793d 7a65  ero_copy_only=ze
+000354b0: 726f 5f63 6f70 795f 6f6e 6c79 2c20 7772  ro_copy_only, wr
+000354c0: 6974 6162 6c65 3d77 7269 7461 626c 652c  itable=writable,
+000354d0: 2061 7574 6f5f 7769 6465 6e3d 6175 746f   auto_widen=auto
+000354e0: 5f77 6964 656e 0d0a 2020 2020 2020 2020  _widen..        
+000354f0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+00035500: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00035510: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00035520: 544f 444f 3a20 4265 6e63 686d 6172 6b20  TODO: Benchmark 
+00035530: 7468 6973 2076 732e 2075 7369 6e67 2043  this vs. using C
+00035540: 6875 6e6b 6564 4172 7261 792e 636f 6d62  hunkedArray.comb
+00035550: 696e 655f 6368 756e 6b73 2829 2074 6865  ine_chunks() the
+00035560: 6e20 636f 6e76 6572 7469 6e67 2e0d 0a20  n converting... 
+00035570: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00035580: 2054 4f44 4f3a 204c 6f6f 6b20 6174 2060   TODO: Look at `
+00035590: 7a65 726f 5f63 6f70 795f 6f6e 6c79 6020  zero_copy_only` 
+000355a0: 616e 6420 6077 7269 7461 626c 6560 202d  and `writable` -
+000355b0: 2d20 7468 6520 636f 6e76 6572 7465 6420  - the converted 
+000355c0: 6172 7261 7973 2063 6f75 6c64 2062 6520  arrays could be 
+000355d0: 6465 7374 726f 7965 6420 7768 696c 6520  destroyed while 
+000355e0: 6873 7461 636b 696e 670d 0a20 2020 2020  hstacking..     
+000355f0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00035600: 2020 2073 696e 6365 2077 6520 6b6e 6f77     since we know
+00035610: 2074 6865 7927 6c6c 2068 6176 6520 6a75   they'll have ju
+00035620: 7374 2062 6565 6e20 6372 6561 7465 643b  st been created;
+00035630: 2074 6869 7320 636f 756c 6420 7265 6475   this could redu
+00035640: 6365 2070 6561 6b20 6d65 6d6f 7279 2075  ce peak memory u
+00035650: 7469 6c69 7a61 7469 6f6e 2e0d 0a20 2020  tilization...   
+00035660: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00035670: 7572 6e20 6873 7461 636b 280d 0a20 2020  urn hstack(..   
+00035680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035690: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
+000356a0: 2020 2020 2020 2020 2020 2020 4661 7374              Fast
+000356b0: 4172 7261 792e 5f66 726f 6d5f 6172 726f  Array._from_arro
+000356c0: 7728 0d0a 2020 2020 2020 2020 2020 2020  w(..            
+000356d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000356e0: 6172 725f 6368 756e 6b2c 207a 6572 6f5f  arr_chunk, zero_
+000356f0: 636f 7079 5f6f 6e6c 793d 7a65 726f 5f63  copy_only=zero_c
+00035700: 6f70 795f 6f6e 6c79 2c20 7772 6974 6162  opy_only, writab
+00035710: 6c65 3d77 7269 7461 626c 652c 2061 7574  le=writable, aut
+00035720: 6f5f 7769 6465 6e3d 6175 746f 5f77 6964  o_widen=auto_wid
+00035730: 656e 0d0a 2020 2020 2020 2020 2020 2020  en..            
+00035740: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00035750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035760: 2020 2020 2020 2066 6f72 2061 7272 5f63         for arr_c
+00035770: 6875 6e6b 2069 6e20 6172 722e 6974 6572  hunk in arr.iter
+00035780: 6368 756e 6b73 2829 0d0a 2020 2020 2020  chunks()..      
+00035790: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
+000357a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000357b0: 2029 0d0a 0d0a 2020 2020 2020 2020 2320   )....        # 
+000357c0: 4861 6e64 6c65 2062 6173 6564 206f 6e20  Handle based on 
+000357d0: 7468 6520 7479 7065 206f 6620 7468 6520  the type of the 
+000357e0: 696e 7075 7420 6172 7261 792e 0d0a 2020  input array...  
+000357f0: 2020 2020 2020 6966 2070 6174 2e69 735f        if pat.is_
+00035800: 696e 7465 6765 7228 6172 722e 7479 7065  integer(arr.type
+00035810: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00035820: 2320 466f 7220 6172 7261 7973 206f 6620  # For arrays of 
+00035830: 7072 696d 6974 6976 6520 7479 7065 732c  primitive types,
+00035840: 2070 612e 4461 7461 5479 7065 2e74 6f5f   pa.DataType.to_
+00035850: 7061 6e64 6173 5f64 7479 7065 2829 2061  pandas_dtype() a
+00035860: 6374 7561 6c6c 7920 7265 7475 726e 7320  ctually returns 
+00035870: 7468 6520 6571 7569 7661 6c65 6e74 206e  the equivalent n
+00035880: 756d 7079 2064 7479 7065 2e0d 0a20 2020  umpy dtype...   
+00035890: 2020 2020 2020 2020 2061 7272 5f64 7479           arr_dty
+000358a0: 7065 203d 2061 7272 2e74 7970 652e 746f  pe = arr.type.to
+000358b0: 5f70 616e 6461 735f 6474 7970 6528 290d  _pandas_dtype().
+000358c0: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+000358d0: 2047 6574 2074 6865 2072 6970 7461 626c   Get the riptabl
+000358e0: 6520 696e 7661 6c69 6420 7661 6c75 6520  e invalid value 
+000358f0: 666f 7220 7468 6973 2061 7272 6179 2074  for this array t
+00035900: 7970 652e 0d0a 2020 2020 2020 2020 2020  ype...          
+00035910: 2020 6172 725f 7274 5f69 6e76 203d 2049    arr_rt_inv = I
+00035920: 4e56 414c 4944 5f44 4943 545b 6e70 2e64  NVALID_DICT[np.d
+00035930: 7479 7065 2861 7272 5f64 7479 7065 292e  type(arr_dtype).
+00035940: 6e75 6d5d 0d0a 0d0a 2020 2020 2020 2020  num]....        
+00035950: 2020 2020 2320 4765 7420 6d69 6e20 616e      # Get min an
+00035960: 6420 6d61 7820 7661 6c75 6520 6f66 2074  d max value of t
+00035970: 6865 2069 6e70 7574 2061 7272 6179 2c20  he input array, 
+00035980: 736f 2077 6520 6b6e 6f77 2069 6620 7765  so we know if we
+00035990: 206e 6565 6420 746f 2070 726f 6d6f 7465   need to promote
+000359a0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000359b0: 746f 2074 6865 206e 6578 742d 6c61 7267  to the next-larg
+000359c0: 6573 7420 6474 7970 6520 746f 2062 6520  est dtype to be 
+000359d0: 6162 6c65 2074 6f20 636f 7272 6563 746c  able to correctl
+000359e0: 7920 7265 7072 6573 656e 7420 6e75 6c6c  y represent null
+000359f0: 732e 0d0a 2020 2020 2020 2020 2020 2020  s...            
+00035a00: 2320 5468 6973 206d 7573 7420 6265 2064  # This must be d
+00035a10: 6f6e 6520 6576 656e 2069 6620 7468 6520  one even if the 
+00035a20: 696e 7075 7420 6172 7261 7920 6861 7320  input array has 
+00035a30: 6e6f 206e 756c 6c73 2c20 6265 6361 7573  no nulls, becaus
+00035a40: 6520 6f74 6865 7277 6973 6520 7468 6520  e otherwise the 
+00035a50: 6e6f 6e2d 6e75 6c6c 0d0a 2020 2020 2020  non-null..      
+00035a60: 2020 2020 2020 2320 7661 6c75 6573 2069        # values i
+00035a70: 6e20 7468 6520 696e 7075 7420 636f 7272  n the input corr
+00035a80: 6573 706f 6e64 696e 6720 746f 2072 6970  esponding to rip
+00035a90: 7461 626c 6520 696e 7465 6765 7220 696e  table integer in
+00035aa0: 7661 6c69 6473 2077 6f75 6c64 2074 6865  valids would the
+00035ab0: 6e20 6265 2072 6563 6f67 6e69 7a65 640d  n be recognized.
+00035ac0: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
+00035ad0: 7320 7375 6368 2061 6674 6572 2063 6f6e  s such after con
+00035ae0: 7665 7273 696f 6e2e 0d0a 2020 2020 2020  version...      
+00035af0: 2020 2020 2020 6d69 6e5f 6d61 785f 7265        min_max_re
+00035b00: 7375 6c74 3a20 7061 2e53 7472 7563 7453  sult: pa.StructS
+00035b10: 6361 6c61 7220 3d20 7063 2e6d 696e 5f6d  calar = pc.min_m
+00035b20: 6178 2861 7272 290d 0a20 2020 2020 2020  ax(arr)..       
+00035b30: 2020 2020 206d 696e 5f76 616c 7565 203d       min_value =
+00035b40: 206d 696e 5f6d 6178 5f72 6573 756c 745b   min_max_result[
+00035b50: 226d 696e 225d 0d0a 2020 2020 2020 2020  "min"]..        
+00035b60: 2020 2020 6d61 785f 7661 6c75 6520 3d20      max_value = 
+00035b70: 6d69 6e5f 6d61 785f 7265 7375 6c74 5b22  min_max_result["
+00035b80: 6d61 7822 5d0d 0a0d 0a20 2020 2020 2020  max"]....       
+00035b90: 2020 2020 2061 7272 5f70 615f 6474 7970       arr_pa_dtyp
+00035ba0: 655f 7769 6465 6e65 643a 204f 7074 696f  e_widened: Optio
+00035bb0: 6e61 6c5b 7061 2e44 6174 6154 7970 655d  nal[pa.DataType]
+00035bc0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00035bd0: 2020 2020 2069 6620 6d69 6e5f 7661 6c75       if min_valu
+00035be0: 6520 3d3d 2061 7272 5f72 745f 696e 7620  e == arr_rt_inv 
+00035bf0: 6f72 206d 6178 5f76 616c 7565 203d 3d20  or max_value == 
+00035c00: 6172 725f 7274 5f69 6e76 3a0d 0a20 2020  arr_rt_inv:..   
+00035c10: 2020 2020 2020 2020 2020 2020 2023 2049               # I
+00035c20: 6620 7468 6520 696e 7075 7420 6172 7261  f the input arra
+00035c30: 7920 686f 6c64 7320 3634 2d62 6974 2069  y holds 64-bit i
+00035c40: 6e74 6567 6572 7320 2873 6967 6e65 6420  ntegers (signed 
+00035c50: 6f72 2075 6e73 6967 6e65 6429 2c20 7765  or unsigned), we
+00035c60: 2063 616e 2774 2064 6f20 6120 6c6f 7373   can't do a loss
+00035c70: 6c65 7373 2063 6f6e 7665 7273 696f 6e2c  less conversion,
+00035c80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00035c90: 2020 2320 7369 6e63 6520 7468 6572 6520    # since there 
+00035ca0: 6973 206e 6f20 7769 6465 7220 696e 7465  is no wider inte
+00035cb0: 6765 7220 6176 6169 6c61 626c 652e 0d0a  ger available...
+00035cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035cd0: 6966 207a 6572 6f5f 636f 7079 5f6f 6e6c  if zero_copy_onl
+00035ce0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00035cf0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00035d00: 6c75 6545 7272 6f72 280d 0a20 2020 2020  lueError(..     
+00035d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035d20: 2020 2022 4361 6e6e 6f74 2070 6572 666f     "Cannot perfo
+00035d30: 726d 2061 207a 6572 6f2d 636f 7079 2063  rm a zero-copy c
+00035d40: 6f6e 7665 7273 696f 6e20 6f66 2061 6e20  onversion of an 
+00035d50: 6172 726f 7720 6172 7261 7920 636f 6e74  arrow array cont
+00035d60: 6169 6e69 6e67 2074 6865 2072 6970 7461  aining the ripta
+00035d70: 626c 6520 696e 7661 6c69 6420 7661 6c75  ble invalid valu
+00035d80: 6520 666f 7220 7468 6520 6172 7261 7920  e for the array 
+00035d90: 6474 7970 652e 220d 0a20 2020 2020 2020  dtype."..       
+00035da0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00035db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035dc0: 656c 6966 2061 7272 5f64 7479 7065 2e69  elif arr_dtype.i
+00035dd0: 7465 6d73 697a 6520 3d3d 2038 3a0d 0a20  temsize == 8:.. 
+00035de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035df0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+00035e00: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
+00035e10: 2020 2020 2020 2020 2020 2020 2020 2243                "C
+00035e20: 616e 6e6f 7420 6c6f 7373 6c65 7373 6c79  annot losslessly
+00035e30: 2063 6f6e 7665 7274 2061 6e20 6172 726f   convert an arro
+00035e40: 7720 6172 7261 7920 6f66 2028 7529 696e  w array of (u)in
+00035e50: 7436 3420 636f 6e74 6169 6e69 6e67 2074  t64 containing t
+00035e60: 6865 2072 6970 7461 626c 6520 696e 7661  he riptable inva
+00035e70: 6c69 6420 7661 6c75 6520 746f 2061 2072  lid value to a r
+00035e80: 6970 7461 626c 6520 6172 7261 792e 220d  iptable array.".
+00035e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00035ea0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00035eb0: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
+00035ec0: 2061 7574 6f5f 7769 6465 6e3a 0d0a 2020   auto_widen:..  
+00035ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035ee0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00035ef0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+00035f00: 2020 2020 2020 2020 2020 2020 2022 496e               "In
+00035f10: 7075 7420 6172 7261 7920 7265 7175 6972  put array requir
+00035f20: 6573 2077 6964 656e 696e 6720 666f 7220  es widening for 
+00035f30: 6c6f 7373 6c65 7373 2063 6f6e 7665 7273  lossless convers
+00035f40: 696f 6e2e 2053 7065 6369 6679 2061 7574  ion. Specify aut
+00035f50: 6f5f 7769 6465 6e3d 5472 7565 2069 6620  o_widen=True if 
+00035f60: 796f 7520 7761 6e74 2074 6f20 616c 6c6f  you want to allo
+00035f70: 7720 7468 6520 7769 6465 6e69 6e67 2063  w the widening c
+00035f80: 6f6e 7665 7273 696f 6e20 2877 6869 6368  onversion (which
+00035f90: 2072 6571 7569 7265 7320 616e 2061 7272   requires an arr
+00035fa0: 6179 2063 6f70 7929 2e22 0d0a 2020 2020  ay copy)."..    
+00035fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035fc0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00035fd0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00035fe0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00035ff0: 5769 6465 6e20 7468 6520 6474 7970 6520  Widen the dtype 
+00036000: 6f66 2074 6865 206f 7574 7075 7420 6172  of the output ar
+00036010: 7261 792e 0d0a 2020 2020 2020 2020 2020  ray...          
+00036020: 2020 2020 2020 2020 2020 6f75 7470 7574            output
+00036030: 5f64 7479 7065 203d 206e 702e 6d69 6e5f  _dtype = np.min_
+00036040: 7363 616c 6172 5f74 7970 6528 3220 2a20  scalar_type(2 * 
+00036050: 6172 725f 7274 5f69 6e76 290d 0a20 2020  arr_rt_inv)..   
+00036060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036070: 2061 7272 5f70 615f 6474 7970 655f 7769   arr_pa_dtype_wi
+00036080: 6465 6e65 6420 3d20 7061 2e66 726f 6d5f  dened = pa.from_
+00036090: 6e75 6d70 795f 6474 7970 6528 6f75 7470  numpy_dtype(outp
+000360a0: 7574 5f64 7479 7065 290d 0a0d 0a20 2020  ut_dtype)....   
+000360b0: 2020 2020 2020 2020 2023 2043 7265 6174           # Creat
+000360c0: 6520 7468 6520 6f75 7470 7574 2061 7272  e the output arr
+000360d0: 6179 2c20 7065 7266 6f72 6d69 6e67 2061  ay, performing a
+000360e0: 2077 6964 656e 696e 6720 636f 6e76 6572   widening conver
+000360f0: 7369 6f6e 202b 2066 696c 6c69 6e67 2069  sion + filling i
+00036100: 6e20 6e75 6c6c 7320 7769 7468 2074 6865  n nulls with the
+00036110: 2072 6970 7461 626c 6520 696e 7661 6c69   riptable invali
+00036120: 6420 6966 206e 6563 6573 7361 7279 2e0d  d if necessary..
+00036130: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+00036140: 4f44 4f3a 2054 6869 7320 636f 756c 6420  ODO: This could 
+00036150: 6265 2066 6173 7465 7220 2d2d 2069 6620  be faster -- if 
+00036160: 7468 6572 6527 7320 6120 7761 7920 746f  there's a way to
+00036170: 2067 6574 2061 206e 756d 7079 2062 6f6f   get a numpy boo
+00036180: 6c65 616e 2061 7272 6179 2066 726f 6d20  lean array from 
+00036190: 6120 7079 6172 726f 7720 6172 7261 7927  a pyarrow array'
+000361a0: 7320 6e75 6c6c 2d6d 6173 6b2c 0d0a 2020  s null-mask,..  
+000361b0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+000361c0: 2020 7765 2063 616e 2063 6f6e 7665 7274    we can convert
+000361d0: 2064 6972 6563 746c 7920 746f 206e 756d   directly to num
+000361e0: 7079 2f72 6970 7461 626c 653b 2074 6865  py/riptable; the
+000361f0: 6e2c 2077 6964 656e 2074 6865 2046 6173  n, widen the Fas
+00036200: 7441 7272 6179 2028 7768 6963 6827 6c6c  tArray (which'll
+00036210: 2062 6520 7061 7261 6c6c 656c 697a 6564   be parallelized
+00036220: 293b 0d0a 2020 2020 2020 2020 2020 2020  );..            
+00036230: 2320 2020 2020 2020 7468 656e 2075 7365  #       then use
+00036240: 2072 742e 636f 7079 5f74 6f28 2920 2f20   rt.copy_to() / 
+00036250: 7274 2e70 7574 6d61 736b 2829 2074 6f20  rt.putmask() to 
+00036260: 6f76 6572 7772 6974 6520 7468 6520 656c  overwrite the el
+00036270: 656d 656e 7473 206f 6620 7468 6520 7769  ements of the wi
+00036280: 6465 6e65 6420 4661 7374 4172 7261 790d  dened FastArray.
+00036290: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+000362a0: 2020 2020 2063 6f72 7265 7370 6f6e 6469       correspondi
+000362b0: 6e67 2074 6f20 7468 6520 6e75 6c6c 7320  ng to the nulls 
+000362c0: 6672 6f6d 2074 6865 206d 6173 6b20 7769  from the mask wi
+000362d0: 7468 2074 6865 2072 6970 7461 626c 6520  th the riptable 
+000362e0: 696e 7661 6c69 6420 7661 6c75 6520 666f  invalid value fo
+000362f0: 7220 7468 6520 6f75 7470 7574 2061 7272  r the output arr
+00036300: 6179 2074 7970 652e 0d0a 2020 2020 2020  ay type...      
+00036310: 2020 2020 2020 6966 2061 7272 5f70 615f        if arr_pa_
+00036320: 6474 7970 655f 7769 6465 6e65 6420 6973  dtype_widened is
+00036330: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00036340: 2020 2020 2020 2020 2020 2020 6172 723a              arr:
+00036350: 2070 612e 4172 7261 7920 3d20 6172 722e   pa.Array = arr.
+00036360: 6361 7374 2861 7272 5f70 615f 6474 7970  cast(arr_pa_dtyp
+00036370: 655f 7769 6465 6e65 6429 0d0a 0d0a 2020  e_widened)....  
+00036380: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00036390: 2061 7272 2e66 696c 6c5f 6e75 6c6c 2861   arr.fill_null(a
+000363a0: 7272 5f72 745f 696e 7629 2e74 6f5f 6e75  rr_rt_inv).to_nu
+000363b0: 6d70 7928 7a65 726f 5f63 6f70 795f 6f6e  mpy(zero_copy_on
+000363c0: 6c79 3d46 616c 7365 2c20 7772 6974 6162  ly=False, writab
+000363d0: 6c65 3d77 7269 7461 626c 6529 2e76 6965  le=writable).vie
+000363e0: 7728 4661 7374 4172 7261 7929 0d0a 0d0a  w(FastArray)....
+000363f0: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
+00036400: 2e69 735f 666c 6f61 7469 6e67 2861 7272  .is_floating(arr
+00036410: 2e74 7970 6529 3a0d 0a20 2020 2020 2020  .type):..       
+00036420: 2020 2020 2023 2046 6c6f 6174 696e 672d       # Floating-
+00036430: 706f 696e 7420 6172 7261 7973 2063 616e  point arrays can
+00036440: 2062 6520 636f 6e76 6572 7465 6420 6469   be converted di
+00036450: 7265 6374 6c79 2074 6f20 6e75 6d70 792c  rectly to numpy,
+00036460: 2073 696e 6365 2070 7961 7272 6f77 2077   since pyarrow w
+00036470: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
+00036480: 790d 0a20 2020 2020 2020 2020 2020 2023  y..            #
+00036490: 2066 696c 6c20 6e75 6c6c 2076 616c 7565   fill null value
+000364a0: 7320 7769 7468 204e 614e 2e0d 0a20 2020  s with NaN...   
+000364b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000364c0: 6172 722e 746f 5f6e 756d 7079 287a 6572  arr.to_numpy(zer
+000364d0: 6f5f 636f 7079 5f6f 6e6c 793d 7a65 726f  o_copy_only=zero
+000364e0: 5f63 6f70 795f 6f6e 6c79 2c20 7772 6974  _copy_only, writ
+000364f0: 6162 6c65 3d77 7269 7461 626c 6529 2e76  able=writable).v
+00036500: 6965 7728 4661 7374 4172 7261 7929 0d0a  iew(FastArray)..
+00036510: 0d0a 2020 2020 2020 2020 656c 6966 2070  ..        elif p
+00036520: 6174 2e69 735f 626f 6f6c 6561 6e28 6172  at.is_boolean(ar
+00036530: 722e 7479 7065 293a 0d0a 2020 2020 2020  r.type):..      
+00036540: 2020 2020 2020 2320 426f 6f6c 6561 6e20        # Boolean 
+00036550: 6172 7261 7973 2063 616e 206f 6e6c 7920  arrays can only 
+00036560: 6265 2063 6f6e 7665 7274 6564 2077 6865  be converted whe
+00036570: 6e20 7468 6579 2064 6f20 6e6f 7420 636f  n they do not co
+00036580: 6e74 6169 6e20 6e75 6c6c 732e 0d0a 2020  ntain nulls...  
+00036590: 2020 2020 2020 2020 2020 2320 7269 7074            # ript
+000365a0: 6162 6c65 2064 6f65 7320 6e6f 7420 7375  able does not su
+000365b0: 7070 6f72 7420 616e 2027 696e 7661 6c69  pport an 'invali
+000365c0: 6427 2f4e 4120 7661 6c75 6520 666f 7220  d'/NA value for 
+000365d0: 626f 6f6c 6561 6e2c 2073 6f20 7079 6172  boolean, so pyar
+000365e0: 726f 7720 6172 7261 7973 0d0a 2020 2020  row arrays..    
+000365f0: 2020 2020 2020 2020 2320 7769 7468 206e          # with n
+00036600: 756c 6c73 2063 616e 2774 2062 6520 7265  ulls can't be re
+00036610: 7072 6573 656e 7465 6420 696e 2072 6970  presented in rip
+00036620: 7461 626c 652e 0d0a 2020 2020 2020 2020  table...        
+00036630: 2020 2020 6966 2061 7272 2e6e 756c 6c5f      if arr.null_
+00036640: 636f 756e 7420 3d3d 2030 3a0d 0a20 2020  count == 0:..   
+00036650: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00036660: 7572 6e20 6172 722e 746f 5f6e 756d 7079  urn arr.to_numpy
+00036670: 287a 6572 6f5f 636f 7079 5f6f 6e6c 793d  (zero_copy_only=
+00036680: 7a65 726f 5f63 6f70 795f 6f6e 6c79 2c20  zero_copy_only, 
+00036690: 7772 6974 6162 6c65 3d77 7269 7461 626c  writable=writabl
+000366a0: 6529 2e76 6965 7728 4661 7374 4172 7261  e).view(FastArra
+000366b0: 7929 0d0a 2020 2020 2020 2020 2020 2020  y)..            
+000366c0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+000366d0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+000366e0: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
+000366f0: 2020 2020 2020 2020 2020 2020 2020 2272                "r
+00036700: 6970 7461 626c 6520 626f 6f6c 6561 6e20  iptable boolean 
+00036710: 6172 7261 7973 2064 6f20 6e6f 7420 7375  arrays do not su
+00036720: 7070 6f72 7420 616e 2069 6e76 616c 6964  pport an invalid
+00036730: 2076 616c 7565 2c20 736f 2074 6865 7920   value, so they 
+00036740: 6361 6e6e 6f74 2062 6520 6372 6561 7465  cannot be create
+00036750: 6420 6672 6f6d 2070 7961 7272 6f77 2061  d from pyarrow a
+00036760: 7272 6179 7320 636f 6e74 6169 6e69 6e67  rrays containing
+00036770: 206e 756c 6c73 2e22 0d0a 2020 2020 2020   nulls."..      
+00036780: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
+00036790: 2020 2020 2020 2065 6c69 6620 7061 742e         elif pat.
+000367a0: 6973 5f73 7472 696e 6728 6172 722e 7479  is_string(arr.ty
+000367b0: 7065 2920 6f72 2070 6174 2e69 735f 6c61  pe) or pat.is_la
+000367c0: 7267 655f 7374 7269 6e67 2861 7272 2e74  rge_string(arr.t
+000367d0: 7970 6529 3a0d 0a20 2020 2020 2020 2020  ype):..         
+000367e0: 2020 2023 2070 7961 7272 6f77 2076 6172     # pyarrow var
+000367f0: 6961 626c 652d 6c65 6e67 7468 2073 7472  iable-length str
+00036800: 696e 6720 6172 7261 7973 2063 616e 205f  ing arrays can _
+00036810: 6e65 7665 725f 2062 6520 7a65 726f 2d63  never_ be zero-c
+00036820: 6f70 7920 636f 6e76 6572 7465 6420 746f  opy converted to
+00036830: 2066 6978 6564 2d6c 656e 6774 6820 6e75   fixed-length nu
+00036840: 6d70 792f 7269 7074 6162 6c65 2061 7272  mpy/riptable arr
+00036850: 6179 730d 0a20 2020 2020 2020 2020 2020  ays..           
+00036860: 2023 2062 6563 6175 7365 206f 6620 6469   # because of di
+00036870: 6666 6572 656e 6365 7320 696e 2074 6865  fferences in the
+00036880: 206d 656d 6f72 7920 6c61 796f 7574 2e0d   memory layout..
+00036890: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000368a0: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3a0d  zero_copy_only:.
+000368b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000368c0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+000368d0: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
+000368e0: 2020 2020 2020 2020 2270 7961 7272 6f77          "pyarrow
+000368f0: 2076 6172 6961 626c 652d 6c65 6e67 7468   variable-length
+00036900: 2073 7472 696e 6720 6172 7261 7973 2063   string arrays c
+00036910: 616e 6e6f 7420 6265 207a 6572 6f2d 636f  annot be zero-co
+00036920: 7079 2063 6f6e 7665 7274 6564 2074 6f20  py converted to 
+00036930: 7269 7074 6162 6c65 2061 7272 6179 732e  riptable arrays.
+00036940: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+00036950: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+00036960: 2020 2020 2320 4368 6563 6b20 666f 7220      # Check for 
+00036970: 7768 6574 6865 7220 7468 6520 6172 7261  whether the arra
+00036980: 7920 636f 6e74 6169 6e73 206f 6e6c 7920  y contains only 
+00036990: 4153 4349 4920 7374 7269 6e67 732e 0d0a  ASCII strings...
+000369a0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+000369b0: 6973 2069 7320 7573 6564 2074 6f20 6775  is is used to gu
+000369c0: 6964 6520 686f 7720 7468 6520 4661 7374  ide how the Fast
+000369d0: 4172 7261 7920 6973 2063 7265 6174 6564  Array is created
+000369e0: 2e0d 0a20 2020 2020 2020 2020 2020 2068  ...            h
+000369f0: 6173 5f75 6e69 636f 6465 203d 206e 6f74  as_unicode = not
+00036a00: 2070 632e 616c 6c28 7063 2e73 7472 696e   pc.all(pc.strin
+00036a10: 675f 6973 5f61 7363 6969 2861 7272 2929  g_is_ascii(arr))
+00036a20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00036a30: 2320 436f 6e76 6572 7420 7468 6520 6172  # Convert the ar
+00036a40: 7261 7920 746f 2061 206e 756d 7079 2061  ray to a numpy a
+00036a50: 7272 6179 2e0d 0a20 2020 2020 2020 2020  rray...         
+00036a60: 2020 2023 2055 6e66 6f72 7475 6e61 7465     # Unfortunate
+00036a70: 6c79 2c20 6173 206f 6620 7079 6172 726f  ly, as of pyarro
+00036a80: 7720 342e 302c 2074 6869 7320 636f 6e76  w 4.0, this conv
+00036a90: 6572 7369 6f6e 2061 6c77 6179 7320 7072  ersion always pr
+00036aa0: 6f64 7563 6573 2061 206e 756d 7079 206f  oduces a numpy o
+00036ab0: 626a 6563 7420 6172 7261 7920 636f 6e74  bject array cont
+00036ac0: 6169 6e69 6e67 2074 6865 0d0a 2020 2020  aining the..    
+00036ad0: 2020 2020 2020 2020 2320 7374 7269 6e67          # string
+00036ae0: 7320 2861 7320 5079 7468 6f6e 2073 7472  s (as Python str
+00036af0: 696e 6773 2920 7261 7468 6572 2074 6861  ings) rather tha
+00036b00: 6e20 6120 6e75 6d70 7920 7374 7269 6e67  n a numpy string
+00036b10: 2061 7272 6179 2e0d 0a20 2020 2020 2020   array...       
+00036b20: 2020 2020 2023 2057 6527 7265 2061 626c       # We're abl
+00036b30: 6520 746f 2068 616e 646c 6520 7468 6973  e to handle this
+00036b40: 2074 6f20 7265 7475 726e 2074 6865 2073   to return the s
+00036b50: 656e 7369 626c 6520 7468 696e 6720 666f  ensible thing fo
+00036b60: 7220 7269 7074 6162 6c65 2075 7365 7273  r riptable users
+00036b70: 2c20 6275 7420 6974 2064 6f65 7320 6d65  , but it does me
+00036b80: 616e 2074 6869 7320 636f 6e76 6572 7369  an this conversi
+00036b90: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
+00036ba0: 2320 6973 2073 6c6f 7765 7220 7468 616e  # is slower than
+00036bb0: 206e 6563 6573 7361 7279 2072 6967 6874   necessary right
+00036bc0: 206e 6f77 2e0d 0a20 2020 2020 2020 2020   now...         
+00036bd0: 2020 2023 2054 4f44 4f3a 2041 736b 2070     # TODO: Ask p
+00036be0: 7961 7272 6f77 2d64 6576 2061 626f 7574  yarrow-dev about
+00036bf0: 2069 6d70 6c65 6d65 6e74 696e 6720 616e   implementing an
+00036c00: 206f 7074 696f 6e20 746f 2072 6574 7572   option to retur
+00036c10: 6e20 6120 6e75 6d70 7920 2753 2720 6f72  n a numpy 'S' or
+00036c20: 2027 5527 2061 7272 6179 2069 6e73 7465   'U' array inste
+00036c30: 6164 2c20 6974 276c 6c20 6265 0d0a 2020  ad, it'll be..  
+00036c40: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00036c50: 2020 6d75 6368 206d 6f72 6520 6566 6669    much more effi
+00036c60: 6369 656e 742c 2065 7665 6e20 7468 6f75  cient, even thou
+00036c70: 6768 2073 6f6d 6520 7370 6163 6520 7769  gh some space wi
+00036c80: 6c6c 2062 6520 7761 7374 6564 2064 7565  ll be wasted due
+00036c90: 2074 6f20 6e75 6d70 7920 6e6f 7420 7375   to numpy not su
+00036ca0: 7070 6f72 7469 6e67 2076 6172 6961 626c  pporting variabl
+00036cb0: 652d 6c65 6e67 7468 2073 7472 696e 6773  e-length strings
+00036cc0: 2e0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00036cd0: 2054 4f44 4f3a 2043 6f6e 7369 6465 7220   TODO: Consider 
+00036ce0: 636f 6e76 6572 7469 6e67 2074 6865 2070  converting the p
+00036cf0: 7961 7272 6f77 2061 7272 6179 2074 6f20  yarrow array to 
+00036d00: 6120 6469 6374 696f 6e61 7279 2d65 6e63  a dictionary-enc
+00036d10: 6f64 6564 2061 7272 6179 202d 2d20 6966  oded array -- if
+00036d20: 2074 6865 7265 2061 7265 206f 6e6c 7920   there are only 
+00036d30: 6120 6665 7720 756e 6971 7565 732c 0d0a  a few uniques,..
+00036d40: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00036d50: 2020 2020 6974 276c 6c20 6265 206d 6f72      it'll be mor
+00036d60: 6520 6566 6669 6369 656e 7420 2865 7665  e efficient (eve
+00036d70: 6e20 7468 6f75 6768 2064 6f69 6e67 206d  n though doing m
+00036d80: 6f72 6520 776f 726b 2920 6279 2061 766f  ore work) by avo
+00036d90: 6964 696e 6720 7265 7065 7469 7469 7665  iding repetitive
+00036da0: 2063 7265 6174 696f 6e20 6f66 2074 6865   creation of the
+00036db0: 2050 7974 686f 6e20 7374 7269 6e67 206f   Python string o
+00036dc0: 626a 6563 7473 2e0d 0a20 2020 2020 2020  bjects...       
+00036dd0: 2020 2020 2069 6620 6172 722e 6e75 6c6c       if arr.null
+00036de0: 5f63 6f75 6e74 203d 3d20 303a 0d0a 2020  _count == 0:..  
+00036df0: 2020 2020 2020 2020 2020 2020 2020 746d                tm
+00036e00: 7020 3d20 6172 722e 746f 5f6e 756d 7079  p = arr.to_numpy
+00036e10: 287a 6572 6f5f 636f 7079 5f6f 6e6c 793d  (zero_copy_only=
+00036e20: 4661 6c73 652c 2077 7269 7461 626c 653d  False, writable=
+00036e30: 7772 6974 6162 6c65 290d 0a0d 0a20 2020  writable)....   
+00036e40: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00036e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036e60: 2320 4e65 6564 2074 6f20 6669 6c6c 206e  # Need to fill n
+00036e70: 756c 6c73 2077 6974 6820 616e 2065 6d70  ulls with an emp
+00036e80: 7479 2073 7472 696e 6720 6265 666f 7265  ty string before
+00036e90: 2063 6f6e 7665 7274 696e 6720 746f 206e   converting to n
+00036ea0: 756d 7079 2e0d 0a20 2020 2020 2020 2020  umpy...         
+00036eb0: 2020 2020 2020 2023 2028 494e 5641 4c49         # (INVALI
+00036ec0: 445f 4449 4354 5b6e 702e 6474 7970 6528  D_DICT[np.dtype(
+00036ed0: 2755 2729 2e6e 756d 5d20 3d3d 2027 2729  'U').num] == '')
+00036ee0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00036ef0: 2020 2074 6d70 203d 2061 7272 2e66 696c     tmp = arr.fil
+00036f00: 6c5f 6e75 6c6c 2822 2229 2e74 6f5f 6e75  l_null("").to_nu
+00036f10: 6d70 7928 7a65 726f 5f63 6f70 795f 6f6e  mpy(zero_copy_on
+00036f20: 6c79 3d46 616c 7365 2c20 7772 6974 6162  ly=False, writab
+00036f30: 6c65 3d77 7269 7461 626c 6529 0d0a 0d0a  le=writable)....
+00036f40: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00036f50: 6c74 203d 2046 6173 7441 7272 6179 2874  lt = FastArray(t
+00036f60: 6d70 2c20 6474 7970 653d 7374 722c 2075  mp, dtype=str, u
+00036f70: 6e69 636f 6465 3d68 6173 5f75 6e69 636f  nicode=has_unico
+00036f80: 6465 290d 0a20 2020 2020 2020 2020 2020  de)..           
+00036f90: 2069 6620 6e6f 7420 7772 6974 6162 6c65   if not writable
+00036fa0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00036fb0: 2020 2072 6573 756c 742e 666c 6167 732e     result.flags.
+00036fc0: 7772 6974 6561 626c 6520 3d20 4661 6c73  writeable = Fals
+00036fd0: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
+00036fe0: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
+00036ff0: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
+00037000: 2e69 735f 6669 7865 645f 7369 7a65 5f62  .is_fixed_size_b
+00037010: 696e 6172 7928 6172 722e 7479 7065 293a  inary(arr.type):
+00037020: 0d0a 2020 2020 2020 2020 2020 2020 6e75  ..            nu
+00037030: 6c6c 5f63 6f75 6e74 203d 2061 7272 2e6e  ll_count = arr.n
+00037040: 756c 6c5f 636f 756e 740d 0a20 2020 2020  ull_count..     
+00037050: 2020 2020 2020 2069 6620 6e75 6c6c 5f63         if null_c
+00037060: 6f75 6e74 2021 3d20 303a 0d0a 2020 2020  ount != 0:..    
+00037070: 2020 2020 2020 2020 2020 2020 6966 207a              if z
+00037080: 6572 6f5f 636f 7079 5f6f 6e6c 793a 0d0a  ero_copy_only:..
+00037090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000370a0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+000370b0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
+000370c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000370d0: 4361 6e27 7420 7065 7266 6f72 6d20 6120  Can't perform a 
+000370e0: 7a65 726f 2d63 6f70 7920 636f 6e76 6572  zero-copy conver
+000370f0: 7369 6f6e 206f 6620 6120 6669 7865 642d  sion of a fixed-
+00037100: 7369 7a65 2062 696e 6172 7920 6172 7261  size binary arra
+00037110: 7920 746f 2072 6970 7461 626c 6520 7768  y to riptable wh
+00037120: 656e 2074 6865 2069 6e70 7574 2061 7272  en the input arr
+00037130: 6179 2063 6f6e 7461 696e 7320 6e75 6c6c  ay contains null
+00037140: 732e 220d 0a20 2020 2020 2020 2020 2020  s."..           
+00037150: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+00037160: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+00037170: 7220 3d20 6172 722e 6669 6c6c 5f6e 756c  r = arr.fill_nul
+00037180: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
+00037190: 2020 2020 2020 2020 6222 5c78 3030 2220          b"\x00" 
+000371a0: 2a20 6172 722e 7479 7065 2e62 7974 655f  * arr.type.byte_
+000371b0: 7769 6474 680d 0a20 2020 2020 2020 2020  width..         
+000371c0: 2020 2020 2020 2029 2020 2320 6361 6e27         )  # can'
+000371d0: 7420 6669 6c6c 2077 6974 6820 6222 222c  t fill with b"",
+000371e0: 2073 696e 6365 2062 2222 2069 7320 6e6f   since b"" is no
+000371f0: 7420 7661 6c69 6420 666f 7220 6669 7865  t valid for fixe
+00037200: 6420 7769 6474 6820 7479 7065 0d0a 0d0a  d width type....
+00037210: 2020 2020 2020 2020 2020 2020 2320 4361              # Ca
+00037220: 6c6c 696e 6720 7061 2e41 7272 6179 2e74  lling pa.Array.t
+00037230: 6f5f 6e75 6d70 7920 7769 7468 207a 6572  o_numpy with zer
+00037240: 6f5f 636f 7079 3d54 7275 6520 7261 6973  o_copy=True rais
+00037250: 6573 2061 6e20 6572 726f 7220 7769 7468  es an error with
+00037260: 2066 6978 6564 2073 697a 6564 2062 696e   fixed sized bin
+00037270: 6172 7920 7479 7065 2e0d 0a20 2020 2020  ary type...     
+00037280: 2020 2020 2020 2023 2043 616c 6c69 6e67         # Calling
+00037290: 2070 612e 4172 7261 792e 746f 5f6e 756d   pa.Array.to_num
+000372a0: 7079 2077 6974 6820 7a65 726f 5f63 6f70  py with zero_cop
+000372b0: 793d 4661 6c73 6520 7265 7475 726e 7320  y=False returns 
+000372c0: 6120 6e75 6d70 7920 6172 7261 7920 7768  a numpy array wh
+000372d0: 6572 6520 7479 7065 7320 6172 6520 7079  ere types are py
+000372e0: 7468 6f6e 2062 7974 6573 206f 626a 6563  thon bytes objec
+000372f0: 7473 2e0d 0a20 2020 2020 2020 2020 2020  ts...           
+00037300: 2023 2057 6f72 6b61 726f 756e 6420 6265   # Workaround be
+00037310: 6c6f 7720 6372 6561 7465 7320 7468 6520  low creates the 
+00037320: 6e75 6d70 7920 6275 6666 6572 206f 6620  numpy buffer of 
+00037330: 7479 7065 2022 5322 206d 616e 7561 6c6c  type "S" manuall
+00037340: 792e 0d0a 2020 2020 2020 2020 2020 2020  y...            
+00037350: 6275 6620 3d20 6e70 2e66 726f 6d62 7566  buf = np.frombuf
+00037360: 6665 7228 0d0a 2020 2020 2020 2020 2020  fer(..          
+00037370: 2020 2020 2020 6172 722e 6275 6666 6572        arr.buffer
+00037380: 7328 295b 315d 2c0d 0a20 2020 2020 2020  s()[1],..       
+00037390: 2020 2020 2020 2020 2064 7479 7065 3d22           dtype="
+000373a0: 5322 202b 2073 7472 2861 7272 2e74 7970  S" + str(arr.typ
+000373b0: 652e 6279 7465 5f77 6964 7468 292c 0d0a  e.byte_width),..
+000373c0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+000373d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000373e0: 7772 6974 6162 6c65 2061 6e64 206e 756c  writable and nul
+000373f0: 6c5f 636f 756e 7420 3d3d 2030 3a20 2023  l_count == 0:  #
+00037400: 2061 6c72 6561 6479 206d 6164 6520 6120   already made a 
+00037410: 636f 7079 2069 6620 6e75 6c6c 5f63 6f75  copy if null_cou
+00037420: 6e74 2021 3d20 300d 0a20 2020 2020 2020  nt != 0..       
+00037430: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00037440: 3d20 4661 7374 4172 7261 7928 6e70 2e63  = FastArray(np.c
+00037450: 6f70 7928 6275 6629 290d 0a20 2020 2020  opy(buf))..     
+00037460: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00037470: 742e 666c 6167 732e 7772 6974 6561 626c  t.flags.writeabl
+00037480: 6520 3d20 7772 6974 6162 6c65 0d0a 2020  e = writable..  
+00037490: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000374a0: 7475 726e 2072 6573 756c 740d 0a0d 0a20  turn result.... 
+000374b0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+000374c0: 7420 3d20 4661 7374 4172 7261 7928 6275  t = FastArray(bu
+000374d0: 6629 0d0a 2020 2020 2020 2020 2020 2020  f)..            
+000374e0: 7265 7375 6c74 2e66 6c61 6773 2e77 7269  result.flags.wri
+000374f0: 7465 6162 6c65 203d 2077 7269 7461 626c  teable = writabl
+00037500: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
+00037510: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
+00037520: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00037530: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00037540: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
+00037550: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+00037560: 4661 7374 4172 7261 7920 6361 6e6e 6f74  FastArray cannot
+00037570: 2062 6520 6372 6561 7465 6420 6672 6f6d   be created from
+00037580: 2061 2070 7961 7272 6f77 2061 7272 6179   a pyarrow array
+00037590: 206f 6620 7479 7065 2027 7b61 7272 2e74   of type '{arr.t
+000375a0: 7970 657d 272e 2059 6f75 206d 6179 206e  ype}'. You may n
+000375b0: 6565 6420 746f 2063 616c 6c20 7468 6520  eed to call the 
+000375c0: 6066 726f 6d5f 6172 726f 7760 206d 6574  `from_arrow` met
+000375d0: 686f 6420 6f6e 206f 6e65 206f 6620 7468  hod on one of th
+000375e0: 6520 6465 7269 7665 6420 7375 6263 6c61  e derived subcla
+000375f0: 7373 6573 2069 6e73 7465 6164 2e22 0d0a  sses instead."..
+00037600: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00037610: 0a20 2020 2064 6566 2074 6f5f 6172 726f  .    def to_arro
+00037620: 7728 0d0a 2020 2020 2020 2020 7365 6c66  w(..        self
+00037630: 2c0d 0a20 2020 2020 2020 2074 7970 653a  ,..        type:
+00037640: 204f 7074 696f 6e61 6c5b 2270 612e 4461   Optional["pa.Da
+00037650: 7461 5479 7065 225d 203d 204e 6f6e 652c  taType"] = None,
+00037660: 0d0a 2020 2020 2020 2020 2a2c 0d0a 2020  ..        *,..  
+00037670: 2020 2020 2020 7072 6573 6572 7665 5f66        preserve_f
+00037680: 6978 6564 5f62 7974 6573 3a20 626f 6f6c  ixed_bytes: bool
+00037690: 203d 2046 616c 7365 2c0d 0a20 2020 2020   = False,..     
+000376a0: 2020 2065 6d70 7479 5f73 7472 696e 6773     empty_strings
+000376b0: 5f74 6f5f 6e75 6c6c 3a20 626f 6f6c 203d  _to_null: bool =
+000376c0: 2054 7275 652c 0d0a 2020 2020 2920 2d3e   True,..    ) ->
+000376d0: 2055 6e69 6f6e 5b22 7061 2e41 7272 6179   Union["pa.Array
+000376e0: 222c 2022 7061 2e43 6875 6e6b 6564 4172  ", "pa.ChunkedAr
+000376f0: 7261 7922 5d3a 0d0a 2020 2020 2020 2020  ray"]:..        
+00037700: 2222 220d 0a20 2020 2020 2020 2043 6f6e  """..        Con
+00037710: 7665 7274 2074 6869 7320 6046 6173 7441  vert this `FastA
+00037720: 7272 6179 6020 746f 2061 2060 7079 6172  rray` to a `pyar
+00037730: 726f 772e 4172 7261 7960 2e0d 0a0d 0a20  row.Array`..... 
+00037740: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+00037750: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00037760: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2074  -----..        t
+00037770: 7970 6520 3a20 7079 6172 726f 772e 4461  ype : pyarrow.Da
+00037780: 7461 5479 7065 2c20 6f70 7469 6f6e 616c  taType, optional
+00037790: 2c20 6465 6661 756c 7473 2074 6f20 4e6f  , defaults to No
+000377a0: 6e65 0d0a 2020 2020 2020 2020 7072 6573  ne..        pres
+000377b0: 6572 7665 5f66 6978 6564 5f62 7974 6573  erve_fixed_bytes
+000377c0: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
+000377d0: 6c2c 2064 6566 6175 6c74 7320 746f 2046  l, defaults to F
+000377e0: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
+000377f0: 2020 4966 2074 6869 7320 6046 6173 7441    If this `FastA
+00037800: 7272 6179 6020 6973 2061 6e20 4153 4349  rray` is an ASCI
+00037810: 4920 7374 7269 6e67 2061 7272 6179 2028  I string array (
+00037820: 6474 7970 652e 6b69 6e64 203d 3d20 2753  dtype.kind == 'S
+00037830: 2729 2c0d 0a20 2020 2020 2020 2020 2020  '),..           
+00037840: 2073 6574 2074 6869 7320 7061 7261 6d65   set this parame
+00037850: 7465 7220 746f 2054 7275 6520 746f 2070  ter to True to p
+00037860: 726f 6475 6365 2061 2066 6978 6564 2d6c  roduce a fixed-l
+00037870: 656e 6774 6820 6269 6e61 7279 2061 7272  ength binary arr
+00037880: 6179 0d0a 2020 2020 2020 2020 2020 2020  ay..            
+00037890: 696e 7374 6561 6420 6f66 2061 2076 6172  instead of a var
+000378a0: 6961 626c 652d 6c65 6e67 7468 2073 7472  iable-length str
+000378b0: 696e 6720 6172 7261 792e 0d0a 2020 2020  ing array...    
+000378c0: 2020 2020 656d 7074 795f 7374 7269 6e67      empty_string
+000378d0: 735f 746f 5f6e 756c 6c20 3a20 626f 6f6c  s_to_null : bool
+000378e0: 2c20 6f70 7469 6f6e 616c 2c20 6465 6661  , optional, defa
+000378f0: 756c 7473 2054 6f20 5472 7565 0d0a 2020  ults To True..  
+00037900: 2020 2020 2020 2020 2020 4966 2074 6869            If thi
+00037910: 7320 6046 6173 7441 7272 6179 6020 6973  s `FastArray` is
+00037920: 2061 6e20 4153 4349 4920 6f72 2055 6e69   an ASCII or Uni
+00037930: 636f 6465 2073 7472 696e 6720 6172 7261  code string arra
+00037940: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
+00037950: 7370 6563 6966 7920 5472 7565 2066 6f72  specify True for
+00037960: 2074 6869 7320 7061 7261 6d65 7465 7220   this parameter 
+00037970: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
+00037980: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
+00037990: 7320 696e 2074 6865 206f 7574 7075 742e  s in the output.
+000379a0: 0d0a 2020 2020 2020 2020 2020 2020 7269  ..            ri
+000379b0: 7074 6162 6c65 2069 6e63 6f6e 7369 7374  ptable inconsist
+000379c0: 656e 746c 7920 7265 636f 676e 697a 6573  ently recognizes
+000379d0: 2074 6865 2065 6d70 7479 2073 7472 696e   the empty strin
+000379e0: 6720 6173 2061 6e20 2769 6e76 616c 6964  g as an 'invalid
+000379f0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00037a00: 736f 2074 6869 7320 7061 7261 6d65 7465  so this paramete
+00037a10: 7220 616c 6c6f 7773 2074 6865 2063 616c  r allows the cal
+00037a20: 6c65 7220 746f 2073 7065 6369 6679 2077  ler to specify w
+00037a30: 6869 6368 2069 6e74 6572 7072 6574 6174  hich interpretat
+00037a40: 696f 6e0d 0a20 2020 2020 2020 2020 2020  ion..           
+00037a50: 2074 6865 7920 7761 6e74 2e0d 0a0d 0a20   they want..... 
+00037a60: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00037a70: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00037a80: 0a20 2020 2020 2020 2070 7961 7272 6f77  .        pyarrow
+00037a90: 2e41 7272 6179 206f 7220 7079 6172 726f  .Array or pyarro
+00037aa0: 772e 4368 756e 6b65 6441 7272 6179 0d0a  w.ChunkedArray..
+00037ab0: 0d0a 2020 2020 2020 2020 4e6f 7465 730d  ..        Notes.
+00037ac0: 0a20 2020 2020 2020 202d 2d2d 2d2d 0d0a  .        -----..
+00037ad0: 2020 2020 2020 2020 544f 444f 3a20 4164          TODO: Ad
+00037ae0: 6420 626f 6f6c 2070 6172 616d 6574 6572  d bool parameter
+00037af0: 2077 6869 6368 2064 6972 6563 7473 2074   which directs t
+00037b00: 6865 2063 6f6e 7665 7273 696f 6e20 746f  he conversion to
+00037b10: 2063 686f 6f73 6520 7468 6520 6d6f 7374   choose the most
+00037b20: 2d63 6f6d 7061 6374 206f 7574 7075 7420  -compact output 
+00037b30: 7479 7065 2070 6f73 7369 626c 653f 0d0a  type possible?..
+00037b40: 2020 2020 2020 2020 2020 2020 2020 5468                Th
+00037b50: 6973 2077 6f75 6c64 2062 6520 7265 6c65  is would be rele
+00037b60: 7661 6e74 2074 6f20 696e 6469 6365 7320  vant to indices 
+00037b70: 6f66 2063 6174 6567 6f72 6963 616c 2f64  of categorical/d
+00037b80: 6963 7469 6f6e 6172 792d 656e 636f 6465  ictionary-encode
+00037b90: 6420 6172 7261 7973 2c20 6275 7420 636f  d arrays, but co
+00037ba0: 756c 6420 616c 736f 206d 616b 6520 7365  uld also make se
+00037bb0: 6e73 650d 0a20 2020 2020 2020 2020 2020  nse..           
+00037bc0: 2020 2066 6f72 2072 6567 756c 6172 2046     for regular F
+00037bd0: 6173 7441 7272 6179 2074 7970 6573 2028  astArray types (
+00037be0: 652e 672e 2074 6f20 7573 6520 616e 2069  e.g. to use an i
+00037bf0: 6e74 3820 696e 7374 6561 6420 6f66 2061  nt8 instead of a
+00037c00: 6e20 696e 7433 3220 7768 656e 2069 7427  n int32 when it'
+00037c10: 6420 6265 2061 206c 6f73 736c 6573 7320  d be a lossless 
+00037c20: 636f 6e76 6572 7369 6f6e 292e 0d0a 2020  conversion)...  
+00037c30: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00037c40: 2020 2069 6d70 6f72 7420 6275 696c 7469     import builti
+00037c50: 6e73 0d0a 0d0a 2020 2020 2020 2020 696d  ns....        im
+00037c60: 706f 7274 2070 7961 7272 6f77 2061 7320  port pyarrow as 
+00037c70: 7061 0d0a 0d0a 2020 2020 2020 2020 2320  pa....        # 
+00037c80: 4465 7269 7665 6420 6172 7261 7920 7479  Derived array ty
+00037c90: 7065 7320 4d55 5354 2069 6d70 6c65 6d65  pes MUST impleme
+00037ca0: 6e74 2074 6865 6972 206f 776e 206f 7665  nt their own ove
+00037cb0: 726c 6f61 6420 6f66 2074 6869 7320 6675  rload of this fu
+00037cc0: 6e63 7469 6f6e 0d0a 2020 2020 2020 2020  nction..        
+00037cd0: 2320 666f 7220 636f 7272 6563 746e 6573  # for correctnes
+00037ce0: 733b 2066 6f72 2074 6861 7420 7265 6173  s; for that reas
+00037cf0: 6f6e 2c20 7261 6973 6520 616e 2065 7272  on, raise an err
+00037d00: 6f72 2069 6620 736f 6d65 6f6e 6520 6174  or if someone at
+00037d10: 7465 6d70 7473 2074 6f0d 0a20 2020 2020  tempts to..     
+00037d20: 2020 2023 2063 616c 6c20 2a74 6869 732a     # call *this*
+00037d30: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
+00037d40: 6f66 2074 6865 206d 6574 686f 6420 666f  of the method fo
+00037d50: 7220 6120 6465 7269 7665 6420 6172 7261  r a derived arra
+00037d60: 7920 7479 7065 2e0d 0a20 2020 2020 2020  y type...       
+00037d70: 2069 6620 6275 696c 7469 6e73 2e74 7970   if builtins.typ
+00037d80: 6528 7365 6c66 2920 213d 2046 6173 7441  e(self) != FastA
+00037d90: 7272 6179 3a0d 0a20 2020 2020 2020 2020  rray:..         
+00037da0: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
+00037db0: 656d 656e 7465 6445 7272 6f72 280d 0a20  ementedError(.. 
+00037dc0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00037dd0: 2254 6865 2060 7b62 7569 6c74 696e 732e  "The `{builtins.
+00037de0: 7479 7065 2873 656c 6629 2e5f 5f71 7561  type(self).__qua
+00037df0: 6c6e 616d 655f 5f7d 6020 7479 7065 206d  lname__}` type m
+00037e00: 7573 7420 696d 706c 656d 656e 7420 6974  ust implement it
+00037e10: 2773 206f 776e 206f 7665 7272 6964 6520  's own override 
+00037e20: 6f66 2074 6865 2060 746f 5f61 7272 6f77  of the `to_arrow
+00037e30: 2829 6020 6d65 7468 6f64 2e22 0d0a 2020  ()` method."..  
+00037e40: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
+00037e50: 2020 2020 2020 2023 2072 6970 7461 626c         # riptabl
+00037e60: 6520 2861 7420 6c65 6173 7420 6173 206f  e (at least as o
+00037e70: 6620 312e 302e 3536 2920 646f 6573 206e  f 1.0.56) does n
+00037e80: 6f74 202a 7472 756c 792a 2073 7570 706f  ot *truly* suppo
+00037e90: 7274 2069 6e76 616c 6964 2f4e 4120 7661  rt invalid/NA va
+00037ea0: 6c75 6573 0d0a 2020 2020 2020 2020 2320  lues..        # 
+00037eb0: 696e 2062 6f6f 6c20 6f72 2061 7363 6969  in bool or ascii
+00037ec0: 2f75 6e69 636f 6465 2073 7472 696e 672d  /unicode string-
+00037ed0: 7479 7065 6420 6172 7261 7973 2e20 4861  typed arrays. Ha
+00037ee0: 6e64 6c65 2074 686f 7365 2064 7479 7065  ndle those dtype
+00037ef0: 7320 7370 6563 6961 6c6c 792e 0d0a 2020  s specially...  
+00037f00: 2020 2020 2020 6966 206e 702e 6973 7375        if np.issu
+00037f10: 6264 7479 7065 2873 656c 662e 6474 7970  bdtype(self.dtyp
+00037f20: 652c 206e 702e 696e 7465 6765 7229 3a0d  e, np.integer):.
+00037f30: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+00037f40: 4f44 4f3a 2049 6620 7468 6973 2061 7272  ODO: If this arr
+00037f50: 6179 2068 6173 202e 6e64 696d 7320 3e3d  ay has .ndims >=
+00037f60: 2032 2c20 6e65 6564 2074 6f20 636f 6e76   2, need to conv
+00037f70: 6572 7420 746f 2070 7961 7272 6f77 2075  ert to pyarrow u
+00037f80: 7369 6e67 2070 612e 5465 6e73 6f72 2e66  sing pa.Tensor.f
+00037f90: 726f 6d5f 6e75 6d70 7928 2e2e 2e29 2e20  rom_numpy(...). 
+00037fa0: 5468 6174 2064 6f65 736e 2774 2068 616e  That doesn't han
+00037fb0: 646c 6520 6d61 736b 7320 6173 206f 6620  dle masks as of 
+00037fc0: 7079 6172 726f 7720 342e 302e 0d0a 0d0a  pyarrow 4.0.....
+00037fd0: 2020 2020 2020 2020 2020 2020 2320 4765              # Ge
+00037fe0: 7420 6120 6d61 736b 206f 6620 696e 7661  t a mask of inva
+00037ff0: 6c69 6473 2e0d 0a20 2020 2020 2020 2020  lids...         
+00038000: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
+00038010: 203d 2073 656c 662e 6973 6e61 6e28 290d   = self.isnan().
+00038020: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00038030: 2049 6620 616c 6c20 7661 6c75 6573 2061   If all values a
+00038040: 7265 2076 616c 6964 2c20 646f 6e27 7420  re valid, don't 
+00038050: 626f 7468 6572 2063 7265 6174 696e 6720  bother creating 
+00038060: 616e 2061 6c6c 2d46 616c 7365 206d 6173  an all-False mas
+00038070: 6b2c 2069 7427 7320 6a75 7374 2077 6173  k, it's just was
+00038080: 7469 6e67 206d 656d 6f72 792e 0d0a 2020  ting memory...  
+00038090: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+000380a0: 2069 6e76 616c 6964 735f 6d61 736b 2e61   invalids_mask.a
+000380b0: 6e79 2829 3a0d 0a20 2020 2020 2020 2020  ny():..         
+000380c0: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
+000380d0: 6d61 736b 203d 204e 6f6e 650d 0a0d 0a20  mask = None.... 
+000380e0: 2020 2020 2020 2020 2020 2023 2043 7265             # Cre
+000380f0: 6174 6520 7468 6520 7079 6172 726f 7720  ate the pyarrow 
+00038100: 6172 7261 7920 6672 6f6d 2069 7420 2b20  array from it + 
+00038110: 7468 6973 2061 7272 6179 2e0d 0a20 2020  this array...   
+00038120: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00038130: 7061 2e61 7272 6179 2873 656c 662e 5f6e  pa.array(self._n
+00038140: 702c 206d 6173 6b3d 696e 7661 6c69 6473  p, mask=invalids
+00038150: 5f6d 6173 6b2c 2074 7970 653d 7479 7065  _mask, type=type
+00038160: 290d 0a0d 0a20 2020 2020 2020 2065 6c69  )....        eli
+00038170: 6620 6e70 2e69 7373 7562 6474 7970 6528  f np.issubdtype(
+00038180: 7365 6c66 2e64 7479 7065 2c20 6e70 2e66  self.dtype, np.f
+00038190: 6c6f 6174 696e 6729 3a0d 0a20 2020 2020  loating):..     
+000381a0: 2020 2020 2020 2023 2055 7369 6e67 2066         # Using f
+000381b0: 6c6f 6174 696e 672d 706f 696e 7420 4e61  loating-point Na
+000381c0: 4e20 746f 2073 6967 6e61 6c20 626f 7468  N to signal both
+000381d0: 204e 614e 2061 6e64 204e 412f 6e75 6c6c   NaN and NA/null
+000381e0: 2069 6e20 7269 7074 6162 6c65 206d 6561   in riptable mea
+000381f0: 6e73 2077 650d 0a20 2020 2020 2020 2020  ns we..         
+00038200: 2020 2023 206e 6565 6420 746f 206d 616b     # need to mak
+00038210: 6520 6120 6465 6369 7369 6f6e 2068 6572  e a decision her
+00038220: 6520 6f6e 2077 6865 7468 6572 2074 6f20  e on whether to 
+00038230: 6d61 726b 2074 686f 7365 2076 616c 7565  mark those value
+00038240: 7320 6173 204e 412f 6e75 6c6c 2076 616c  s as NA/null val
+00038250: 7565 730d 0a20 2020 2020 2020 2020 2020  ues..           
+00038260: 2023 2069 6e20 7468 6520 7265 7475 726e   # in the return
+00038270: 6564 2070 7961 7272 6f77 2061 7272 6179  ed pyarrow array
+00038280: 2e0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00038290: 2046 6f72 206e 6f77 2c20 7765 2064 6f6e   For now, we don
+000382a0: 2774 202d 2d20 7765 206a 7573 7420 7061  't -- we just pa
+000382b0: 7373 2074 6865 2064 6174 6120 616c 6f6e  ss the data alon
+000382c0: 6720 6469 7265 6374 6c79 2c20 736f 2074  g directly, so t
+000382d0: 6865 2063 616c 6c65 7220 6361 6e20 6465  he caller can de
+000382e0: 6369 6465 0d0a 2020 2020 2020 2020 2020  cide..          
+000382f0: 2020 2320 6f6e 2077 6865 7468 6572 2074    # on whether t
+00038300: 6865 7920 7761 6e74 2074 6f20 6861 6e64  hey want to hand
+00038310: 6c65 2074 6861 742e 2028 4964 6561 6c6c  le that. (Ideall
+00038320: 792c 2077 6527 6420 6861 7665 2061 2077  y, we'd have a w
+00038330: 6179 2074 6f20 7061 7261 6d65 7465 7269  ay to parameteri
+00038340: 7a65 2074 6869 730d 0a20 2020 2020 2020  ze this..       
+00038350: 2020 2020 2023 2062 7574 2074 6865 2070       # but the p
+00038360: 726f 746f 636f 6c20 646f 6573 6e27 7420  rotocol doesn't 
+00038370: 7375 7070 6f72 7420 6974 2061 7320 6f66  support it as of
+00038380: 2070 7961 7272 6f77 2034 2e30 2e20 496e   pyarrow 4.0. In
+00038390: 2061 6e79 2063 6173 652c 206f 6e6c 7920   any case, only 
+000383a0: 7468 6520 6269 746d 6173 6b0d 0a20 2020  the bitmask..   
+000383b0: 2020 2020 2020 2020 2023 206e 6565 6473           # needs
+000383c0: 2074 6f20 6265 2072 652d 6372 6561 7465   to be re-create
+000383d0: 6420 6c61 7465 7220 6966 2074 6865 2075  d later if the u
+000383e0: 7365 7220 7761 6e74 7320 746f 2063 6f6e  ser wants to con
+000383f0: 7369 6465 7220 7468 6520 4e61 4e73 2061  sider the NaNs a
+00038400: 7320 4e41 2f6e 756c 6c20 7661 6c75 6573  s NA/null values
+00038410: 2e29 0d0a 2020 2020 2020 2020 2020 2020  .)..            
+00038420: 6966 2073 656c 662e 6e64 696d 203e 3d20  if self.ndim >= 
+00038430: 323a 0d0a 2020 2020 2020 2020 2020 2020  2:..            
+00038440: 2020 2020 2320 4e4f 5445 3a20 4173 206f      # NOTE: As o
+00038450: 6620 7079 6172 726f 7720 342e 302c 2074  f pyarrow 4.0, t
+00038460: 6869 7320 6d65 7468 6f64 2064 6f65 736e  his method doesn
+00038470: 2774 2073 7570 706f 7274 2061 2060 7479  't support a `ty
+00038480: 7065 6020 6172 6775 6d65 6e74 2e0d 0a20  pe` argument... 
+00038490: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000384a0: 6574 7572 6e20 7061 2e54 656e 736f 722e  eturn pa.Tensor.
+000384b0: 6672 6f6d 5f6e 756d 7079 2873 656c 662e  from_numpy(self.
+000384c0: 5f6e 7029 0d0a 2020 2020 2020 2020 2020  _np)..          
+000384d0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+000384e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000384f0: 7061 2e61 7272 6179 2873 656c 662e 5f6e  pa.array(self._n
+00038500: 702c 2074 7970 653d 7479 7065 290d 0a0d  p, type=type)...
+00038510: 0a20 2020 2020 2020 2065 6c69 6620 6e70  .        elif np
+00038520: 2e69 7373 7562 6474 7970 6528 7365 6c66  .issubdtype(self
+00038530: 2e64 7479 7065 2c20 626f 6f6c 293a 0d0a  .dtype, bool):..
+00038540: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00038550: 656c 662e 6e64 696d 203e 3d20 323a 0d0a  elf.ndim >= 2:..
+00038560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038570: 2320 4e4f 5445 3a20 4173 206f 6620 7079  # NOTE: As of py
+00038580: 6172 726f 7720 342e 302c 2074 6869 7320  arrow 4.0, this 
+00038590: 6d65 7468 6f64 2064 6f65 736e 2774 2073  method doesn't s
+000385a0: 7570 706f 7274 2061 2060 7479 7065 6020  upport a `type` 
+000385b0: 6172 6775 6d65 6e74 2e0d 0a20 2020 2020  argument...     
+000385c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000385d0: 6e20 7061 2e54 656e 736f 722e 6672 6f6d  n pa.Tensor.from
+000385e0: 5f6e 756d 7079 2873 656c 662e 5f6e 7029  _numpy(self._np)
+000385f0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00038600: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00038610: 2020 2020 2072 6574 7572 6e20 7061 2e61       return pa.a
+00038620: 7272 6179 2873 656c 662e 5f6e 702c 2074  rray(self._np, t
+00038630: 7970 653d 7479 7065 290d 0a0d 0a20 2020  ype=type)....   
+00038640: 2020 2020 2065 6c69 6620 6e70 2e69 7373       elif np.iss
+00038650: 7562 6474 7970 6528 7365 6c66 2e64 7479  ubdtype(self.dty
+00038660: 7065 2c20 6279 7465 7329 3a0d 0a20 2020  pe, bytes):..   
+00038670: 2020 2020 2020 2020 2023 2049 6620 7468           # If th
+00038680: 6520 6361 6c6c 6572 2077 616e 7473 2074  e caller wants t
+00038690: 6f20 636f 6e76 6572 7420 656d 7074 7920  o convert empty 
+000386a0: 7374 7269 6e67 7320 746f 206e 756c 6c73  strings to nulls
+000386b0: 2c20 6765 7420 6120 6d61 736b 206f 6620  , get a mask of 
+000386c0: 696e 7661 6c69 6473 2e0d 0a20 2020 2020  invalids...     
+000386d0: 2020 2020 2020 2069 6620 656d 7074 795f         if empty_
+000386e0: 7374 7269 6e67 735f 746f 5f6e 756c 6c3a  strings_to_null:
+000386f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00038700: 2020 696e 7661 6c69 6473 5f6d 6173 6b20    invalids_mask 
+00038710: 3d20 7365 6c66 203d 3d20 7365 6c66 2e69  = self == self.i
+00038720: 6e76 0d0a 0d0a 2020 2020 2020 2020 2020  nv....          
+00038730: 2020 2020 2020 2320 4966 2061 6c6c 2076        # If all v
+00038740: 616c 7565 7320 6172 6520 7661 6c69 642c  alues are valid,
+00038750: 2064 6f6e 2774 2062 6f74 6865 7220 6372   don't bother cr
+00038760: 6561 7469 6e67 2061 6e20 616c 6c2d 4661  eating an all-Fa
+00038770: 6c73 6520 6d61 736b 2c20 6974 2773 206a  lse mask, it's j
+00038780: 7573 7420 7761 7374 696e 6720 6d65 6d6f  ust wasting memo
+00038790: 7279 2e0d 0a20 2020 2020 2020 2020 2020  ry...           
+000387a0: 2020 2020 2069 6620 6e6f 7420 696e 7661       if not inva
+000387b0: 6c69 6473 5f6d 6173 6b2e 616e 7928 293a  lids_mask.any():
+000387c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000387d0: 2020 2020 2020 696e 7661 6c69 6473 5f6d        invalids_m
+000387e0: 6173 6b20 3d20 4e6f 6e65 0d0a 2020 2020  ask = None..    
+000387f0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00038800: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00038810: 6e76 616c 6964 735f 6d61 736b 203d 204e  nvalids_mask = N
+00038820: 6f6e 650d 0a0d 0a20 2020 2020 2020 2020  one....         
+00038830: 2020 2023 2044 6f65 7320 7468 6520 6361     # Does the ca
+00038840: 6c6c 6572 2077 616e 7420 746f 2070 7265  ller want to pre
+00038850: 7365 7276 6520 7468 6520 6669 7865 642d  serve the fixed-
+00038860: 6c65 6e67 7468 2062 696e 6172 7920 6461  length binary da
+00038870: 7461 3f0d 0a20 2020 2020 2020 2020 2020  ta?..           
+00038880: 2069 6620 7072 6573 6572 7665 5f66 6978   if preserve_fix
+00038890: 6564 5f62 7974 6573 3a0d 0a20 2020 2020  ed_bytes:..     
+000388a0: 2020 2020 2020 2020 2020 2023 2043 6f6e             # Con
+000388b0: 7665 7274 2074 6f20 6120 6669 7865 642d  vert to a fixed-
+000388c0: 6c65 6e67 7468 2062 696e 6172 7920 2827  length binary ('
+000388d0: 6279 7465 7327 2920 7479 7065 2e0d 0a20  bytes') type... 
+000388e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000388f0: 6c65 6d65 6e74 5f73 7472 5f6c 656e 6774  lement_str_lengt
+00038900: 6820 3d20 6e70 2e64 7479 7065 2873 656c  h = np.dtype(sel
+00038910: 662e 6474 7970 6529 2e69 7465 6d73 697a  f.dtype).itemsiz
+00038920: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+00038930: 2020 2061 7272 5f74 7970 6520 3d20 7061     arr_type = pa
+00038940: 2e62 696e 6172 7928 656c 656d 656e 745f  .binary(element_
+00038950: 7374 725f 6c65 6e67 7468 2920 6966 2074  str_length) if t
+00038960: 7970 6520 6973 204e 6f6e 6520 656c 7365  ype is None else
+00038970: 2074 7970 650d 0a20 2020 2020 2020 2020   type..         
+00038980: 2020 2020 2020 2072 6574 7572 6e20 7061         return pa
+00038990: 2e61 7272 6179 2873 656c 662e 5f6e 702c  .array(self._np,
+000389a0: 206d 6173 6b3d 696e 7661 6c69 6473 5f6d   mask=invalids_m
+000389b0: 6173 6b2c 2074 7970 653d 6172 725f 7479  ask, type=arr_ty
+000389c0: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
+000389d0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000389e0: 2020 2020 2020 2020 2320 436f 6e76 6572          # Conver
+000389f0: 7420 7468 6973 2061 7272 6179 2074 6f20  t this array to 
+00038a00: 6120 7079 6172 726f 7720 7661 7269 6162  a pyarrow variab
+00038a10: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
+00038a20: 2061 7272 6179 2e0d 0a20 2020 2020 2020   array...       
+00038a30: 2020 2020 2020 2020 2069 6620 7479 7065           if type
+00038a40: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+00038a50: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00038a60: 7970 6520 3d20 7061 2e73 7472 696e 6728  ype = pa.string(
+00038a70: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00038a80: 2020 2023 2043 6f6e 7665 7274 2061 7320     # Convert as 
+00038a90: 556e 6963 6f64 6520 6e64 6172 7261 7920  Unicode ndarray 
+00038aa0: 746f 2073 7472 696e 6761 7272 6179 2c20  to stringarray, 
+00038ab0: 6173 2062 7974 6573 7472 696e 6720 646f  as bytestring do
+00038ac0: 6573 206e 6f74 2070 7265 7365 7276 6520  es not preserve 
+00038ad0: 656c 656d 656e 7420 6c65 6e67 7468 2028  element length (
+00038ae0: 7269 7074 6162 6c65 2332 3439 290d 0a20  riptable#249).. 
+00038af0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00038b00: 6574 7572 6e20 7061 2e61 7272 6179 286e  eturn pa.array(n
+00038b10: 702e 6172 7261 7928 7365 6c66 2e5f 6e70  p.array(self._np
+00038b20: 2c20 6474 7970 653d 2255 2229 2c20 6d61  , dtype="U"), ma
+00038b30: 736b 3d69 6e76 616c 6964 735f 6d61 736b  sk=invalids_mask
+00038b40: 2c20 7479 7065 3d74 7970 6529 0d0a 0d0a  , type=type)....
+00038b50: 2020 2020 2020 2020 656c 6966 206e 702e          elif np.
+00038b60: 6973 7375 6264 7479 7065 2873 656c 662e  issubdtype(self.
+00038b70: 6474 7970 652c 2073 7472 293a 0d0a 2020  dtype, str):..  
+00038b80: 2020 2020 2020 2020 2020 2320 4966 2074            # If t
+00038b90: 6865 2063 616c 6c65 7220 7761 6e74 7320  he caller wants 
+00038ba0: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
+00038bb0: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
+00038bc0: 732c 2067 6574 2061 206d 6173 6b20 6f66  s, get a mask of
+00038bd0: 2069 6e76 616c 6964 732e 0d0a 2020 2020   invalids...    
+00038be0: 2020 2020 2020 2020 6966 2065 6d70 7479          if empty
+00038bf0: 5f73 7472 696e 6773 5f74 6f5f 6e75 6c6c  _strings_to_null
+00038c00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00038c10: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
+00038c20: 203d 2073 656c 6620 3d3d 2073 656c 662e   = self == self.
+00038c30: 696e 760d 0a0d 0a20 2020 2020 2020 2020  inv....         
+00038c40: 2020 2020 2020 2023 2049 6620 616c 6c20         # If all 
+00038c50: 7661 6c75 6573 2061 7265 2076 616c 6964  values are valid
+00038c60: 2c20 646f 6e27 7420 626f 7468 6572 2063  , don't bother c
+00038c70: 7265 6174 696e 6720 616e 2061 6c6c 2d46  reating an all-F
+00038c80: 616c 7365 206d 6173 6b2c 2069 7427 7320  alse mask, it's 
+00038c90: 6a75 7374 2077 6173 7469 6e67 206d 656d  just wasting mem
+00038ca0: 6f72 792e 0d0a 2020 2020 2020 2020 2020  ory...          
+00038cb0: 2020 2020 2020 6966 206e 6f74 2069 6e76        if not inv
+00038cc0: 616c 6964 735f 6d61 736b 2e61 6e79 2829  alids_mask.any()
+00038cd0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00038ce0: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
+00038cf0: 6d61 736b 203d 204e 6f6e 650d 0a20 2020  mask = None..   
+00038d00: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00038d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038d20: 696e 7661 6c69 6473 5f6d 6173 6b20 3d20  invalids_mask = 
+00038d30: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
+00038d40: 2020 2020 2320 7079 6172 726f 7720 2861      # pyarrow (a
+00038d50: 7320 6f66 2076 342e 3029 2064 6f65 7320  s of v4.0) does 
+00038d60: 6e6f 7420 6861 7665 2061 2066 6978 6564  not have a fixed
+00038d70: 2d73 697a 6520 556e 6963 6f64 6520 7374  -size Unicode st
+00038d80: 7269 6e67 2064 6174 6120 7479 7065 2c20  ring data type, 
+00038d90: 736f 2075 6e6c 696b 6520 7468 6520 2762  so unlike the 'b
+00038da0: 7974 6573 270d 0a20 2020 2020 2020 2020  ytes'..         
+00038db0: 2020 2023 2068 616e 646c 696e 6720 6162     # handling ab
+00038dc0: 6f76 6520 666f 7220 4153 4349 4920 7374  ove for ASCII st
+00038dd0: 7269 6e67 732c 2077 6520 6861 7665 2074  rings, we have t
+00038de0: 6f20 7573 6520 7468 6520 7661 7269 6162  o use the variab
+00038df0: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
+00038e00: 2061 7272 6179 2074 7970 652e 0d0a 2020   array type...  
+00038e10: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
+00038e20: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
+00038e30: 2020 2020 2020 2020 2020 2020 7479 7065              type
+00038e40: 203d 2070 612e 7374 7269 6e67 2829 0d0a   = pa.string()..
+00038e50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00038e60: 726e 2070 612e 6172 7261 7928 7365 6c66  rn pa.array(self
+00038e70: 2e5f 6e70 2c20 6d61 736b 3d69 6e76 616c  ._np, mask=inval
+00038e80: 6964 735f 6d61 736b 2c20 7479 7065 3d74  ids_mask, type=t
+00038e90: 7970 6529 0d0a 0d0a 2020 2020 2020 2020  ype)....        
+00038ea0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00038eb0: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
+00038ec0: 656d 656e 7465 6445 7272 6f72 2866 2246  ementedError(f"F
+00038ed0: 6173 7441 7272 6179 2077 6974 6820 6474  astArray with dt
+00038ee0: 7970 6520 277b 6e70 2e64 7479 7065 2873  ype '{np.dtype(s
+00038ef0: 656c 662e 6474 7970 6529 7d27 2069 7320  elf.dtype)}' is 
+00038f00: 6e6f 7420 7375 7070 6f72 7465 642e 2229  not supported.")
+00038f10: 0d0a 0d0a 2020 2020 6465 6620 5f5f 6172  ....    def __ar
+00038f20: 726f 775f 6172 7261 795f 5f28 7365 6c66  row_array__(self
+00038f30: 2c20 7479 7065 3a20 4f70 7469 6f6e 616c  , type: Optional
+00038f40: 5b22 7061 2e44 6174 6154 7970 6522 5d20  ["pa.DataType"] 
+00038f50: 3d20 4e6f 6e65 2920 2d3e 2055 6e69 6f6e  = None) -> Union
+00038f60: 5b22 7061 2e41 7272 6179 222c 2022 7061  ["pa.Array", "pa
+00038f70: 2e43 6875 6e6b 6564 4172 7261 7922 5d3a  .ChunkedArray"]:
+00038f80: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00038f90: 2020 2020 2020 2049 6d70 6c65 6d65 6e74         Implement
+00038fa0: 6174 696f 6e20 6f66 2074 6865 2060 605f  ation of the ``_
+00038fb0: 5f61 7272 6f77 5f61 7272 6179 5f5f 6060  _arrow_array__``
+00038fc0: 2070 726f 746f 636f 6c20 666f 7220 636f   protocol for co
+00038fd0: 6e76 6572 7369 6f6e 2074 6f20 6120 7079  nversion to a py
+00038fe0: 6172 726f 7720 6172 7261 792e 0d0a 0d0a  arrow array.....
+00038ff0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+00039000: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+00039010: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00039020: 7479 7065 203a 2070 7961 7272 6f77 2e44  type : pyarrow.D
+00039030: 6174 6154 7970 652c 206f 7074 696f 6e61  ataType, optiona
+00039040: 6c2c 2064 6566 6175 6c74 7320 746f 204e  l, defaults to N
+00039050: 6f6e 650d 0a0d 0a20 2020 2020 2020 2052  one....        R
+00039060: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+00039070: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00039080: 2070 7961 7272 6f77 2e41 7272 6179 206f   pyarrow.Array o
+00039090: 7220 7079 6172 726f 772e 4368 756e 6b65  r pyarrow.Chunke
+000390a0: 6441 7272 6179 0d0a 0d0a 2020 2020 2020  dArray....      
+000390b0: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
+000390c0: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
+000390d0: 6874 7470 733a 2f2f 6172 726f 772e 6170  https://arrow.ap
+000390e0: 6163 6865 2e6f 7267 2f64 6f63 732f 7079  ache.org/docs/py
+000390f0: 7468 6f6e 2f65 7874 656e 6469 6e67 5f74  thon/extending_t
+00039100: 7970 6573 2e68 746d 6c23 636f 6e74 726f  ypes.html#contro
+00039110: 6c6c 696e 672d 636f 6e76 6572 7369 6f6e  lling-conversion
+00039120: 2d74 6f2d 7079 6172 726f 772d 6172 7261  -to-pyarrow-arra
+00039130: 792d 7769 7468 2d74 6865 2d61 7272 6f77  y-with-the-arrow
+00039140: 2d61 7272 6179 2d70 726f 746f 636f 6c0d  -array-protocol.
+00039150: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00039160: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00039170: 662e 746f 5f61 7272 6f77 2874 7970 653d  f.to_arrow(type=
+00039180: 7479 7065 2c20 7072 6573 6572 7665 5f66  type, preserve_f
+00039190: 6978 6564 5f62 7974 6573 3d46 616c 7365  ixed_bytes=False
+000391a0: 2c20 656d 7074 795f 7374 7269 6e67 735f  , empty_strings_
+000391b0: 746f 5f6e 756c 6c3d 5472 7565 290d 0a0d  to_null=True)...
+000391c0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+000391d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000391e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000391f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039200: 2d2d 0d0a 2020 2020 4063 6c61 7373 6d65  --..    @classme
+00039210: 7468 6f64 0d0a 2020 2020 6465 6620 7265  thod..    def re
+00039220: 6769 7374 6572 5f66 756e 6374 696f 6e28  gister_function(
+00039230: 636c 732c 206e 616d 652c 2066 756e 6329  cls, name, func)
+00039240: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00039250: 2020 2020 2020 2020 5573 6564 2074 6f20          Used to 
+00039260: 7265 6769 7374 6572 2066 756e 6374 696f  register functio
+00039270: 6e73 2074 6f20 4661 7374 4172 7261 792e  ns to FastArray.
+00039280: 0d0a 2020 2020 2020 2020 5573 6564 2062  ..        Used b
+00039290: 7920 7274 5f66 6173 7461 7272 6179 6e75  y rt_fastarraynu
+000392a0: 6d62 610d 0a20 2020 2020 2020 2022 2222  mba..        """
+000392b0: 0d0a 2020 2020 2020 2020 7365 7461 7474  ..        setatt
+000392c0: 7228 636c 732c 206e 616d 652c 2066 756e  r(cls, name, fun
+000392d0: 6329 0d0a 0d0a 2020 2020 6465 6620 6170  c)....    def ap
+000392e0: 706c 795f 7363 6865 6d61 2873 656c 662c  ply_schema(self,
+000392f0: 2073 6368 656d 6129 3a0d 0a20 2020 2020   schema):..     
+00039300: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00039310: 4170 706c 7920 6120 7363 6865 6d61 2063  Apply a schema c
+00039320: 6f6e 7461 696e 696e 6720 6465 7363 7269  ontaining descri
+00039330: 7074 6976 6520 696e 666f 726d 6174 696f  ptive informatio
+00039340: 6e20 746f 2074 6865 2046 6173 7441 7272  n to the FastArr
+00039350: 6179 0d0a 0d0a 2020 2020 2020 2020 3a70  ay....        :p
+00039360: 6172 616d 2073 6368 656d 613a 2064 6963  aram schema: dic
+00039370: 740d 0a20 2020 2020 2020 203a 7265 7475  t..        :retu
+00039380: 726e 3a20 6469 6374 696f 6e61 7279 206f  rn: dictionary o
+00039390: 6620 6465 7669 6174 696f 6e73 2066 726f  f deviations fro
+000393a0: 6d20 7468 6520 7363 6865 6d61 0d0a 2020  m the schema..  
+000393b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+000393c0: 2020 2066 726f 6d20 2e72 745f 6d65 7461     from .rt_meta
+000393d0: 2069 6d70 6f72 7420 6170 706c 795f 7363   import apply_sc
+000393e0: 6865 6d61 2061 7320 5f61 7070 6c79 5f73  hema as _apply_s
+000393f0: 6368 656d 610d 0a0d 0a20 2020 2020 2020  chema....       
+00039400: 2072 6574 7572 6e20 5f61 7070 6c79 5f73   return _apply_s
+00039410: 6368 656d 6128 7365 6c66 2c20 7363 6865  chema(self, sche
+00039420: 6d61 290d 0a0d 0a20 2020 2064 6566 2069  ma)....    def i
+00039430: 6e66 6f28 7365 6c66 2c20 2a2a 6b77 6172  nfo(self, **kwar
+00039440: 6773 293a 0d0a 2020 2020 2020 2020 2222  gs):..        ""
+00039450: 220d 0a20 2020 2020 2020 2050 7269 6e74  "..        Print
+00039460: 2061 2064 6573 6372 6970 7469 6f6e 206f   a description o
+00039470: 6620 7468 6520 4661 7374 4172 7261 7927  f the FastArray'
+00039480: 7320 636f 6e74 656e 7473 0d0a 2020 2020  s contents..    
+00039490: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000394a0: 2066 726f 6d20 2e72 745f 6d65 7461 2069   from .rt_meta i
+000394b0: 6d70 6f72 7420 696e 666f 2061 7320 5f69  mport info as _i
+000394c0: 6e66 6f0d 0a0d 0a20 2020 2020 2020 2072  nfo....        r
+000394d0: 6574 7572 6e20 5f69 6e66 6f28 7365 6c66  eturn _info(self
+000394e0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+000394f0: 2020 2040 7072 6f70 6572 7479 0d0a 2020     @property..  
+00039500: 2020 6465 6620 646f 6328 7365 6c66 293a    def doc(self):
+00039510: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00039520: 2020 2020 2020 2052 6574 7572 6e20 7468         Return th
+00039530: 6520 446f 6320 6f62 6a65 6374 2066 6f72  e Doc object for
+00039540: 2074 6865 2069 6e70 7574 2060 4661 7374   the input `Fast
+00039550: 4172 7261 7960 2e0d 0a0d 0a20 2020 2020  Array`.....     
+00039560: 2020 2049 6620 6e6f 2044 6f63 206f 626a     If no Doc obj
+00039570: 6563 7420 6578 6973 7473 2c20 7265 7475  ect exists, retu
+00039580: 726e 204e 6f6e 652e 0d0a 0d0a 2020 2020  rn None.....    
+00039590: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
+000395a0: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
+000395b0: 2020 2020 2020 646f 6320 3a20 607e 7269        doc : `~ri
+000395c0: 7074 6162 6c65 2e72 745f 6d65 7461 2e44  ptable.rt_meta.D
+000395d0: 6f63 600d 0a20 2020 2020 2020 2020 2020  oc`..           
+000395e0: 2054 6865 2044 6f63 206f 626a 6563 7420   The Doc object 
+000395f0: 666f 7220 7468 6520 696e 7075 7420 6046  for the input `F
+00039600: 6173 7441 7272 6179 602e 2049 6620 6e6f  astArray`. If no
+00039610: 2044 6f63 206f 626a 6563 7420 6578 6973   Doc object exis
+00039620: 7473 2c20 7265 7475 726e 204e 6f6e 652e  ts, return None.
+00039630: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+00039640: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
+00039650: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00039660: 4661 7374 4172 7261 792e 696e 666f 203a  FastArray.info :
+00039670: 2052 6574 7572 6e20 6120 6465 7363 7269   Return a descri
+00039680: 7074 696f 6e20 6f66 2074 6865 2069 6e70  ption of the inp
+00039690: 7574 2061 7272 6179 2773 2063 6f6e 7465  ut array's conte
+000396a0: 6e74 732e 0d0a 2020 2020 2020 2020 7e72  nts...        ~r
+000396b0: 6970 7461 626c 652e 7274 5f6d 6574 612e  iptable.rt_meta.
+000396c0: 6170 706c 795f 7363 6865 6d61 203a 2053  apply_schema : S
+000396d0: 6574 2044 6f63 206f 626a 6563 7420 7661  et Doc object va
+000396e0: 6c75 6573 2e0d 0a0d 0a20 2020 2020 2020  lues.....       
+000396f0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+00039700: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00039710: 2020 2020 204e 6f20 446f 6320 6f62 6a65       No Doc obje
+00039720: 6374 2065 7869 7374 733a 0d0a 0d0a 2020  ct exists:....  
+00039730: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+00039740: 2e46 4128 5b31 2c20 322c 2033 2c20 342c  .FA([1, 2, 3, 4,
+00039750: 2035 5d29 0d0a 2020 2020 2020 2020 3e3e   5])..        >>
+00039760: 3e20 7072 696e 7428 612e 646f 6329 0d0a  > print(a.doc)..
+00039770: 2020 2020 2020 2020 4e6f 6e65 0d0a 0d0a          None....
+00039780: 2020 2020 2020 2020 4170 706c 7920 6120          Apply a 
+00039790: 7363 6865 6d61 2061 6e64 2072 6574 7572  schema and retur
+000397a0: 6e20 7468 6520 446f 6320 6f62 6a65 6374  n the Doc object
+000397b0: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+000397c0: 2073 6368 656d 6120 3d20 7b22 4465 7363   schema = {"Desc
+000397d0: 7269 7074 696f 6e22 3a20 2254 6869 7320  ription": "This 
+000397e0: 6973 2061 6e20 6172 7261 7922 2c20 2253  is an array", "S
+000397f0: 7465 7761 7264 223a 2022 4272 6961 6e22  teward": "Brian"
+00039800: 2c20 2254 7970 6522 3a20 2269 6e74 3332  , "Type": "int32
+00039810: 227d 0d0a 2020 2020 2020 2020 3e3e 3e20  "}..        >>> 
+00039820: 612e 6170 706c 795f 7363 6865 6d61 2873  a.apply_schema(s
+00039830: 6368 656d 6129 0d0a 2020 2020 2020 2020  chema)..        
+00039840: 7b7d 0d0a 2020 2020 2020 2020 3e3e 3e20  {}..        >>> 
+00039850: 7072 696e 7428 612e 646f 6329 0d0a 2020  print(a.doc)..  
+00039860: 2020 2020 2020 4465 7363 7269 7074 696f        Descriptio
+00039870: 6e3a 2054 6869 7320 6973 2061 6e20 6172  n: This is an ar
+00039880: 7261 790d 0a20 2020 2020 2020 2053 7465  ray..        Ste
+00039890: 7761 7264 3a20 4272 6961 6e0d 0a20 2020  ward: Brian..   
+000398a0: 2020 2020 2054 7970 653a 2069 6e74 3332       Type: int32
+000398b0: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+000398c0: 726e 2073 7065 6369 6669 6320 446f 6320  rn specific Doc 
+000398d0: 6f62 6a65 6374 2069 6e66 6f72 6d61 7469  object informati
+000398e0: 6f6e 3a0d 0a0d 0a20 2020 2020 2020 203e  on:....        >
+000398f0: 3e3e 2070 7269 6e74 2861 2e64 6f63 2e5f  >> print(a.doc._
+00039900: 7479 7065 290d 0a20 2020 2020 2020 2069  type)..        i
+00039910: 6e74 3332 0d0a 2020 2020 2020 2020 3e3e  nt32..        >>
+00039920: 3e20 7072 696e 7428 612e 646f 632e 5f64  > print(a.doc._d
+00039930: 6573 6372 6970 290d 0a20 2020 2020 2020  escrip)..       
+00039940: 2054 6869 7320 6973 2061 6e20 6172 7261   This is an arra
+00039950: 790d 0a20 2020 2020 2020 203e 3e3e 2070  y..        >>> p
+00039960: 7269 6e74 2861 2e64 6f63 2e5f 7374 6577  rint(a.doc._stew
+00039970: 6172 6429 0d0a 2020 2020 2020 2020 4272  ard)..        Br
+00039980: 6961 6e0d 0a20 2020 2020 2020 203e 3e3e  ian..        >>>
+00039990: 2070 7269 6e74 2861 2e64 6f63 2e5f 6465   print(a.doc._de
+000399a0: 7461 696c 290d 0a20 2020 2020 2020 204e  tail)..        N
+000399b0: 6f6e 650d 0a20 2020 2020 2020 2022 2222  one..        """
+000399c0: 0d0a 2020 2020 2020 2020 6672 6f6d 202e  ..        from .
+000399d0: 7274 5f6d 6574 6120 696d 706f 7274 2064  rt_meta import d
+000399e0: 6f63 2061 7320 5f64 6f63 0d0a 0d0a 2020  oc as _doc....  
+000399f0: 2020 2020 2020 7265 7475 726e 205f 646f        return _do
+00039a00: 6328 7365 6c66 290d 0a0d 0a20 2020 2023  c(self)....    #
+00039a10: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
+00039a20: 3d3d 3d3d 3d3d 3d20 454e 4420 4f46 2043  ======= END OF C
+00039a30: 4c41 5353 2044 4546 494e 4954 494f 4e20  LASS DEFINITION 
+00039a40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00039a50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0d  ===============.
+00039a60: 0a0d 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d  .....# ---------
+00039a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039a80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039aa0: 2d2d 0d0a 6465 6620 5f73 6574 6661 7374  --..def _setfast
+00039ab0: 6172 7261 7976 6965 7728 6172 7229 3a0d  arrayview(arr):.
+00039ac0: 0a20 2020 2022 2222 0d0a 2020 2020 4361  .    """..    Ca
+00039ad0: 6c6c 2066 726f 6d20 4350 5020 696e 746f  ll from CPP into
+00039ae0: 2070 7974 686f 6e20 746f 2066 6c69 7020   python to flip 
+00039af0: 6172 7261 7920 7669 6577 0d0a 2020 2020  array view..    
+00039b00: 2222 220d 0a20 2020 2069 6620 6973 696e  """..    if isin
+00039b10: 7374 616e 6365 2861 7272 2c20 4661 7374  stance(arr, Fast
+00039b20: 4172 7261 7929 3a0d 0a20 2020 2020 2020  Array):..       
+00039b30: 2069 6620 4661 7374 4172 7261 792e 5665   if FastArray.Ve
+00039b40: 7262 6f73 6520 3e20 323a 0d0a 2020 2020  rbose > 2:..    
+00039b50: 2020 2020 2020 2020 7072 696e 7428 226e          print("n
+00039b60: 6f20 6e65 6564 2074 6f20 7365 7466 6173  o need to setfas
+00039b70: 7461 7272 6179 7669 6577 222c 2061 7272  tarrayview", arr
+00039b80: 2e64 7479 7065 2c20 6c65 6e28 6172 7229  .dtype, len(arr)
+00039b90: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00039ba0: 6e20 6172 720d 0a0d 0a20 2020 2069 6620  n arr....    if 
+00039bb0: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
+00039bc0: 6520 3e20 323a 0d0a 2020 2020 2020 2020  e > 2:..        
+00039bd0: 7072 696e 7428 2273 6574 6661 7374 6172  print("setfastar
+00039be0: 7261 7976 6965 7722 2c20 6172 722e 6474  rayview", arr.dt
+00039bf0: 7970 652c 206c 656e 2861 7272 2929 0d0a  ype, len(arr))..
+00039c00: 0d0a 2020 2020 7265 7475 726e 2061 7272  ..    return arr
+00039c10: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
+00039c20: 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d 2d2d  ......# --------
+00039c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039c60: 2d2d 2d0d 0a64 6566 205f 7365 7466 6173  ---..def _setfas
+00039c70: 7461 7272 6179 7479 7065 2829 3a0d 0a20  tarraytype():.. 
+00039c80: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00039c90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039ca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039cb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039cc0: 0d0a 2020 2020 2320 6361 6c6c 696e 6720  ..    # calling 
+00039cd0: 7468 6973 2066 756e 6374 696f 6e20 7769  this function wi
+00039ce0: 6c6c 2066 6f72 6365 2066 6d20 746f 2072  ll force fm to r
+00039cf0: 6574 7572 6e20 4661 7374 4172 7261 7920  eturn FastArray 
+00039d00: 7375 6263 6c61 7373 0d0a 2020 2020 2320  subclass..    # 
+00039d10: 7263 2e42 6173 6963 4d61 7468 486f 6f6b  rc.BasicMathHook
+00039d20: 2846 6173 7441 7272 6179 2c20 6e70 2e6e  (FastArray, np.n
+00039d30: 6461 7272 6179 290d 0a20 2020 2023 2043  darray)..    # C
+00039d40: 6f6d 696e 6720 6e65 7874 2062 7569 6c64  oming next build
+00039d50: 0d0a 2020 2020 6661 203d 206e 702e 6172  ..    fa = np.ar
+00039d60: 616e 6765 2831 292e 7669 6577 2846 6173  ange(1).view(Fas
+00039d70: 7441 7272 6179 290d 0a20 2020 2072 632e  tArray)..    rc.
+00039d80: 5365 7446 6173 7441 7272 6179 5479 7065  SetFastArrayType
+00039d90: 2866 612c 205f 7365 7466 6173 7461 7272  (fa, _setfastarr
+00039da0: 6179 7669 6577 290d 0a20 2020 2072 632e  ayview)..    rc.
+00039db0: 4261 7369 634d 6174 6848 6f6f 6b28 6661  BasicMathHook(fa
+00039dc0: 2c20 6661 2e5f 6e70 290d 0a0d 0a0d 0a23  , fa._np)......#
+00039dd0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
 00039de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00039df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039e00: 2d2d 2d2d 2d0d 0a23 2063 616c 6c69 6e67  -----..# calling
-00039e10: 2074 6869 7320 6675 6e63 7469 6f6e 2077   this function w
-00039e20: 696c 6c20 666f 7263 6520 666d 2074 6f20  ill force fm to 
-00039e30: 7265 7475 726e 2046 6173 7441 7272 6179  return FastArray
-00039e40: 2073 7562 636c 6173 730d 0a5f 7365 7466   subclass.._setf
-00039e50: 6173 7461 7272 6179 7479 7065 2829 0d0a  astarraytype()..
-00039e60: 0d0a 5479 7065 5265 6769 7374 6572 2e46  ..TypeRegister.F
-00039e70: 6173 7441 7272 6179 203d 2046 6173 7441  astArray = FastA
-00039e80: 7272 6179 0d0a 0d0a 4661 7374 4172 7261  rray....FastArra
-00039e90: 792e 7265 6769 7374 6572 5f66 756e 6374  y.register_funct
-00039ea0: 696f 6e28 2264 6573 6372 6962 6522 2c20  ion("describe", 
-00039eb0: 6465 7363 7269 6265 290d 0a              describe)..
+00039e00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 6465  ------------..de
+00039e10: 6620 5f46 6978 7570 446f 6353 7472 696e  f _FixupDocStrin
+00039e20: 6773 2829 3a0d 0a20 2020 2022 2222 0d0a  gs():..    """..
+00039e30: 2020 2020 4c6f 6164 2061 6c6c 2074 6865      Load all the
+00039e40: 206d 656d 6265 7220 6675 6e63 7469 6f6e   member function
+00039e50: 206f 6620 7468 6973 206d 6f64 756c 650d   of this module.
+00039e60: 0a20 2020 204c 6f61 6420 616c 6c20 7468  .    Load all th
+00039e70: 6520 6d65 6d62 6572 2066 756e 6374 696f  e member functio
+00039e80: 6e73 206f 6620 7468 6520 6e70 206d 6f64  ns of the np mod
+00039e90: 756c 650d 0a20 2020 2049 6620 7765 2066  ule..    If we f
+00039ea0: 696e 6420 6120 6d61 7463 682c 2063 6f70  ind a match, cop
+00039eb0: 7920 6f76 6572 2074 6865 2064 6f63 2073  y over the doc s
+00039ec0: 7472 696e 6773 0d0a 2020 2020 2222 220d  trings..    """.
+00039ed0: 0a20 2020 2069 6d70 6f72 7420 696e 7370  .    import insp
+00039ee0: 6563 740d 0a20 2020 2069 6d70 6f72 7420  ect..    import 
+00039ef0: 7379 730d 0a0d 0a20 2020 206d 796d 6f64  sys....    mymod
+00039f00: 756c 6520 3d20 7379 732e 6d6f 6475 6c65  ule = sys.module
+00039f10: 735b 5f5f 6e61 6d65 5f5f 5d0d 0a20 2020  s[__name__]..   
+00039f20: 2061 6c6c 5f6d 7966 756e 6374 696f 6e73   all_myfunctions
+00039f30: 203d 2069 6e73 7065 6374 2e67 6574 6d65   = inspect.getme
+00039f40: 6d62 6572 7328 4661 7374 4172 7261 792c  mbers(FastArray,
+00039f50: 2069 6e73 7065 6374 2e69 7366 756e 6374   inspect.isfunct
+00039f60: 696f 6e29 0d0a 0d0a 2020 2020 7472 793a  ion)....    try:
+00039f70: 0d0a 2020 2020 2020 2020 2320 626f 7474  ..        # bott
+00039f80: 6c65 6e65 636b 2069 7320 6f70 7469 6f6e  leneck is option
+00039f90: 616c 0d0a 2020 2020 2020 2020 616c 6c5f  al..        all_
+00039fa0: 626e 6675 6e63 7469 6f6e 7320 3d20 696e  bnfunctions = in
+00039fb0: 7370 6563 742e 6765 746d 656d 6265 7273  spect.getmembers
+00039fc0: 2862 6e2c 2069 6e73 7065 6374 2e69 7366  (bn, inspect.isf
+00039fd0: 756e 6374 696f 6e29 0d0a 2020 2020 2020  unction)..      
+00039fe0: 2020 616c 6c5f 626e 6675 6e63 7469 6f6e    all_bnfunction
+00039ff0: 7320 2b3d 2069 6e73 7065 6374 2e67 6574  s += inspect.get
+0003a000: 6d65 6d62 6572 7328 626e 2c20 696e 7370  members(bn, insp
+0003a010: 6563 742e 6973 6275 696c 7469 6e29 0d0a  ect.isbuiltin)..
+0003a020: 0d0a 2020 2020 2020 2020 2320 6275 696c  ..        # buil
+0003a030: 6420 6469 6374 696f 6e61 7279 206f 6620  d dictionary of 
+0003a040: 626f 7474 6c65 6e65 636b 2064 6f63 730d  bottleneck docs.
+0003a050: 0a20 2020 2020 2020 2062 6e64 6963 7420  .        bndict 
+0003a060: 3d20 7b7d 0d0a 2020 2020 2020 2020 666f  = {}..        fo
+0003a070: 7220 6675 6e63 7320 696e 2061 6c6c 5f62  r funcs in all_b
+0003a080: 6e66 756e 6374 696f 6e73 3a0d 0a20 2020  nfunctions:..   
+0003a090: 2020 2020 2020 2020 2062 6e64 6963 745b           bndict[
+0003a0a0: 6675 6e63 735b 305d 5d20 3d20 6675 6e63  funcs[0]] = func
+0003a0b0: 735b 315d 0d0a 0d0a 2020 2020 2020 2020  s[1]....        
+0003a0c0: 2320 6e6f 7720 666f 7220 6561 6368 2066  # now for each f
+0003a0d0: 756e 6374 696f 6e20 7468 6174 2068 6173  unction that has
+0003a0e0: 2061 6e20 626e 2066 6c61 766f 722c 2063   an bn flavor, c
+0003a0f0: 6f70 7920 6f76 6572 2074 6865 2064 6f63  opy over the doc
+0003a100: 2073 7472 696e 6773 0d0a 2020 2020 2020   strings..      
+0003a110: 2020 666f 7220 6675 6e63 7320 696e 2061    for funcs in a
+0003a120: 6c6c 5f6d 7966 756e 6374 696f 6e73 3a0d  ll_myfunctions:.
+0003a130: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0003a140: 2866 756e 6373 5b30 5d20 696e 2062 6e64  (funcs[0] in bnd
+0003a150: 6963 7429 2061 6e64 2028 6675 6e63 735b  ict) and (funcs[
+0003a160: 315d 2e5f 5f64 6f63 5f5f 2069 7320 4e6f  1].__doc__ is No
+0003a170: 6e65 293a 0d0a 2020 2020 2020 2020 2020  ne):..          
+0003a180: 2020 2020 2020 6675 6e63 735b 315d 2e5f        funcs[1]._
+0003a190: 5f64 6f63 5f5f 203d 2062 6e64 6963 745b  _doc__ = bndict[
+0003a1a0: 6675 6e63 735b 305d 5d2e 5f5f 646f 635f  funcs[0]].__doc_
+0003a1b0: 5f0d 0a20 2020 2065 7863 6570 7420 4578  _..    except Ex
+0003a1c0: 6365 7074 696f 6e3a 0d0a 2020 2020 2020  ception:..      
+0003a1d0: 2020 7061 7373 0d0a 0d0a 2020 2020 616c    pass....    al
+0003a1e0: 6c5f 6e70 6675 6e63 7469 6f6e 7320 3d20  l_npfunctions = 
+0003a1f0: 5b66 756e 6320 666f 7220 6675 6e63 2069  [func for func i
+0003a200: 6e20 696e 7370 6563 742e 6765 746d 656d  n inspect.getmem
+0003a210: 6265 7273 286e 702e 6e64 6172 7261 7929  bers(np.ndarray)
+0003a220: 2069 6620 6e6f 7420 6675 6e63 5b30 5d2e   if not func[0].
+0003a230: 7374 6172 7473 7769 7468 2822 5f22 295d  startswith("_")]
+0003a240: 0d0a 0d0a 2020 2020 2320 6275 696c 6420  ....    # build 
+0003a250: 6469 6374 696f 6e61 7279 206f 6620 6e70  dictionary of np
+0003a260: 2e6e 6461 7272 6179 2064 6f63 730d 0a20  .ndarray docs.. 
+0003a270: 2020 206e 7064 6963 7420 3d20 7b7d 0d0a     npdict = {}..
+0003a280: 2020 2020 666f 7220 6675 6e63 7320 696e      for funcs in
+0003a290: 2061 6c6c 5f6e 7066 756e 6374 696f 6e73   all_npfunctions
+0003a2a0: 3a0d 0a20 2020 2020 2020 206e 7064 6963  :..        npdic
+0003a2b0: 745b 6675 6e63 735b 305d 5d20 3d20 6675  t[funcs[0]] = fu
+0003a2c0: 6e63 735b 315d 0d0a 0d0a 2020 2020 2320  ncs[1]....    # 
+0003a2d0: 6e6f 7720 666f 7220 6561 6368 2066 756e  now for each fun
+0003a2e0: 6374 696f 6e20 7468 6174 2068 6173 2061  ction that has a
+0003a2f0: 6e20 6e70 2066 6c61 766f 722c 2063 6f70  n np flavor, cop
+0003a300: 7920 6f76 6572 2074 6865 2064 6f63 2073  y over the doc s
+0003a310: 7472 696e 6773 0d0a 2020 2020 666f 7220  trings..    for 
+0003a320: 6675 6e63 7320 696e 2061 6c6c 5f6d 7966  funcs in all_myf
+0003a330: 756e 6374 696f 6e73 3a0d 0a20 2020 2020  unctions:..     
+0003a340: 2020 2069 6620 2866 756e 6373 5b30 5d20     if (funcs[0] 
+0003a350: 696e 206e 7064 6963 7429 2061 6e64 2028  in npdict) and (
+0003a360: 6675 6e63 735b 315d 2e5f 5f64 6f63 5f5f  funcs[1].__doc__
+0003a370: 2069 7320 4e6f 6e65 293a 0d0a 2020 2020   is None):..    
+0003a380: 2020 2020 2020 2020 6675 6e63 735b 315d          funcs[1]
+0003a390: 2e5f 5f64 6f63 5f5f 203d 206e 7064 6963  .__doc__ = npdic
+0003a3a0: 745b 6675 6e63 735b 305d 5d2e 5f5f 646f  t[funcs[0]].__do
+0003a3b0: 635f 5f0d 0a0d 0a20 2020 2023 206e 6f77  c__....    # now
+0003a3c0: 2064 6f20 6a75 7374 2070 6c61 696e 206e   do just plain n
+0003a3d0: 700d 0a20 2020 2061 6c6c 5f6e 7066 756e  p..    all_npfun
+0003a3e0: 6374 696f 6e73 203d 205b 6675 6e63 2066  ctions = [func f
+0003a3f0: 6f72 2066 756e 6320 696e 2069 6e73 7065  or func in inspe
+0003a400: 6374 2e67 6574 6d65 6d62 6572 7328 6e70  ct.getmembers(np
+0003a410: 2920 6966 2022 5f5f 2220 6e6f 7420 696e  ) if "__" not in
+0003a420: 2066 756e 6373 5b30 5d5d 0d0a 0d0a 2020   funcs[0]]....  
+0003a430: 2020 2320 6275 696c 6420 6469 6374 696f    # build dictio
+0003a440: 6e61 7279 206f 6620 6e70 2064 6f63 730d  nary of np docs.
+0003a450: 0a20 2020 206e 7064 6963 7420 3d20 7b7d  .    npdict = {}
+0003a460: 0d0a 2020 2020 666f 7220 6675 6e63 7320  ..    for funcs 
+0003a470: 696e 2061 6c6c 5f6e 7066 756e 6374 696f  in all_npfunctio
+0003a480: 6e73 3a0d 0a20 2020 2020 2020 2023 2070  ns:..        # p
+0003a490: 7269 6e74 2822 6765 7474 696e 6720 646f  rint("getting do
+0003a4a0: 6320 7374 7269 6e67 2066 6f72 2022 2c20  c string for ", 
+0003a4b0: 6675 6e63 735b 305d 290d 0a20 2020 2020  funcs[0])..     
+0003a4c0: 2020 206e 7064 6963 745b 6675 6e63 735b     npdict[funcs[
+0003a4d0: 305d 5d20 3d20 6675 6e63 735b 315d 0d0a  0]] = funcs[1]..
+0003a4e0: 0d0a 2020 2020 2320 6e6f 7720 666f 7220  ..    # now for 
+0003a4f0: 6561 6368 2066 756e 6374 696f 6e20 7468  each function th
+0003a500: 6174 2068 6173 2061 6e20 6e70 2066 6c61  at has an np fla
+0003a510: 766f 722c 2063 6f70 7920 6f76 6572 2074  vor, copy over t
+0003a520: 6865 2064 6f63 2073 7472 696e 6773 0d0a  he doc strings..
+0003a530: 2020 2020 666f 7220 6675 6e63 7320 696e      for funcs in
+0003a540: 2061 6c6c 5f6d 7966 756e 6374 696f 6e73   all_myfunctions
+0003a550: 3a0d 0a20 2020 2020 2020 2069 6620 2866  :..        if (f
+0003a560: 756e 6373 5b30 5d20 696e 206e 7064 6963  uncs[0] in npdic
+0003a570: 7429 2061 6e64 2028 6675 6e63 735b 315d  t) and (funcs[1]
+0003a580: 2e5f 5f64 6f63 5f5f 2069 7320 4e6f 6e65  .__doc__ is None
+0003a590: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0003a5a0: 6675 6e63 735b 315d 2e5f 5f64 6f63 5f5f  funcs[1].__doc__
+0003a5b0: 203d 206e 7064 6963 745b 6675 6e63 735b   = npdict[funcs[
+0003a5c0: 305d 5d2e 5f5f 646f 635f 5f0d 0a0d 0a0d  0]].__doc__.....
+0003a5d0: 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .# -------------
+0003a5e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a5f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a63  -------------..c
+0003a610: 6c61 7373 2054 6872 6561 6469 6e67 3a0d  lass Threading:.
+0003a620: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+0003a630: 6f64 0d0a 2020 2020 6465 6620 6f6e 2829  od..    def on()
+0003a640: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+0003a650: 2020 2020 2020 2020 5475 726e 2072 6970          Turn rip
+0003a660: 7461 626c 6520 7468 7265 6164 696e 6720  table threading 
+0003a670: 6f6e 2e0d 0a20 2020 2020 2020 2055 7365  on...        Use
+0003a680: 6420 6f6e 6c79 2077 6865 6e20 7269 7074  d only when ript
+0003a690: 6162 6c65 2074 6872 6561 6469 6e67 2077  able threading w
+0003a6a0: 6173 2074 7572 6e65 6420 6f66 662e 0d0a  as turned off...
+0003a6b0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+0003a6c0: 650d 0a20 2020 2020 2020 202d 2d2d 2d2d  e..        -----
+0003a6d0: 2d2d 0d0a 2020 2020 2020 2020 613d 7274  --..        a=rt
+0003a6e0: 2e61 7261 6e67 6528 315f 3030 305f 3030  .arange(1_000_00
+0003a6f0: 290d 0a20 2020 2020 2020 2054 6872 6561  )..        Threa
+0003a700: 6469 6e67 2e6f 6666 2829 0d0a 2020 2020  ding.off()..    
+0003a710: 2020 2020 2574 696d 6520 612b 3d31 0d0a      %time a+=1..
+0003a720: 2020 2020 2020 2020 5468 7265 6164 696e          Threadin
+0003a730: 672e 6f6e 2829 0d0a 2020 2020 2020 2020  g.on()..        
+0003a740: 2574 696d 6520 612b 3d31 0d0a 0d0a 2020  %time a+=1....  
+0003a750: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+0003a760: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+0003a770: 2020 2020 2020 2020 5072 6576 696f 7573          Previous
+0003a780: 6c79 2077 6865 7468 6572 2074 6872 6561  ly whether threa
+0003a790: 6469 6e67 2077 6173 206f 6e20 6f72 206e  ding was on or n
+0003a7a0: 6f74 2e20 3020 6f72 2031 2e20 303d 7468  ot. 0 or 1. 0=th
+0003a7b0: 7265 6164 696e 6720 7761 7320 6f66 6620  reading was off 
+0003a7c0: 6265 666f 7265 2e0d 0a0d 0a20 2020 2020  before.....     
+0003a7d0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0003a7e0: 7265 7475 726e 2046 6173 7441 7272 6179  return FastArray
+0003a7f0: 2e5f 544f 4e28 290d 0a0d 0a20 2020 2040  ._TON()....    @
+0003a800: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
+0003a810: 2020 6465 6620 6f66 6628 293a 0d0a 2020    def off():..  
+0003a820: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0003a830: 2020 2054 7572 6e20 7269 7074 6162 6c65     Turn riptable
+0003a840: 2074 6872 6561 6469 6e67 206f 6666 2e0d   threading off..
+0003a850: 0a20 2020 2020 2020 2055 7365 6675 6c20  .        Useful 
+0003a860: 666f 7220 7768 656e 2074 6865 2073 7973  for when the sys
+0003a870: 7465 6d20 6861 7320 6f74 6865 7220 7072  tem has other pr
+0003a880: 6f63 6573 7365 7320 7573 696e 6720 6f74  ocesses using ot
+0003a890: 6865 7220 7468 7265 6164 730d 0a20 2020  her threads..   
+0003a8a0: 2020 2020 206f 7220 746f 206c 696d 6974       or to limit
+0003a8b0: 2074 6872 6561 6469 6e67 2072 6573 6f75   threading resou
+0003a8c0: 7263 6573 2e0d 0a0d 0a20 2020 2020 2020  rces.....       
+0003a8d0: 2045 7861 6d70 6c65 0d0a 2020 2020 2020   Example..      
+0003a8e0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+0003a8f0: 2020 2061 3d72 742e 6172 616e 6765 2831     a=rt.arange(1
+0003a900: 5f30 3030 5f30 3029 0d0a 2020 2020 2020  _000_00)..      
+0003a910: 2020 5468 7265 6164 696e 672e 6f66 6628    Threading.off(
+0003a920: 290d 0a20 2020 2020 2020 2025 7469 6d65  )..        %time
+0003a930: 2061 2b3d 310d 0a20 2020 2020 2020 2054   a+=1..        T
+0003a940: 6872 6561 6469 6e67 2e6f 6e28 290d 0a20  hreading.on().. 
+0003a950: 2020 2020 2020 2025 7469 6d65 2061 2b3d         %time a+=
+0003a960: 310d 0a0d 0a20 2020 2020 2020 2052 6574  1....        Ret
+0003a970: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+0003a980: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2050  -----..        P
+0003a990: 7265 7669 6f75 736c 7920 7768 6574 6865  reviously whethe
+0003a9a0: 7220 7468 7265 6164 696e 6720 7761 7320  r threading was 
+0003a9b0: 6f6e 206f 7220 6e6f 742e 2030 206f 7220  on or not. 0 or 
+0003a9c0: 312e 2030 3d74 6872 6561 6469 6e67 2077  1. 0=threading w
+0003a9d0: 6173 206f 6666 2062 6566 6f72 652e 0d0a  as off before...
+0003a9e0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0003a9f0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
+0003aa00: 4172 7261 792e 5f54 4f46 4628 290d 0a0d  Array._TOFF()...
+0003aa10: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+0003aa20: 6f64 0d0a 2020 2020 6465 6620 7468 7265  od..    def thre
+0003aa30: 6164 7328 7468 7265 6164 636f 756e 7429  ads(threadcount)
+0003aa40: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+0003aa50: 2020 2020 2020 2020 5365 7420 686f 7720          Set how 
+0003aa60: 6d61 6e79 2077 6f72 6b65 7220 7468 7265  many worker thre
+0003aa70: 6164 7320 7269 7074 6162 6c65 2063 616e  ads riptable can
+0003aa80: 2075 7365 2e0d 0a20 2020 2020 2020 204f   use...        O
+0003aa90: 6674 656e 2064 6566 6175 6c74 7320 746f  ften defaults to
+0003aaa0: 2031 3220 616e 6420 6361 6e6e 6f74 2062   12 and cannot b
+0003aab0: 6520 7365 7420 6265 6c6f 7720 3120 6f72  e set below 1 or
+0003aac0: 203e 2033 312e 0d0a 0d0a 2020 2020 2020   > 31.....      
+0003aad0: 2020 546f 2074 7572 6e20 7269 7074 6162    To turn riptab
+0003aae0: 6c65 2074 6872 6561 6469 6e67 206f 6666  le threading off
+0003aaf0: 2063 6f6d 706c 6574 656c 7920 7573 6520   completely use 
+0003ab00: 5468 7265 6164 696e 672e 6f66 6628 290d  Threading.off().
+0003ab10: 0a20 2020 2020 2020 2055 7365 6675 6c20  .        Useful 
+0003ab20: 666f 7220 7768 656e 2074 6865 2073 7973  for when the sys
+0003ab30: 7465 6d20 6861 7320 6f74 6865 7220 7072  tem has other pr
+0003ab40: 6f63 6573 7365 7320 7573 696e 6720 6f74  ocesses using ot
+0003ab50: 6865 7220 7468 7265 6164 730d 0a20 2020  her threads..   
+0003ab60: 2020 2020 206f 7220 746f 206c 696d 6974       or to limit
+0003ab70: 2074 6872 6561 6469 6e67 2072 6573 6f75   threading resou
+0003ab80: 7263 6573 2e0d 0a0d 0a20 2020 2020 2020  rces.....       
+0003ab90: 2045 7861 6d70 6c65 0d0a 2020 2020 2020   Example..      
+0003aba0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+0003abb0: 2020 2054 6872 6561 6469 6e67 2e74 6872     Threading.thr
+0003abc0: 6561 6473 2838 290d 0a0d 0a20 2020 2020  eads(8)....     
+0003abd0: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+0003abe0: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+0003abf0: 2020 2020 206e 756d 6265 7220 6f66 2074       number of t
+0003ac00: 6872 6561 6473 2070 7265 7669 6f75 736c  hreads previousl
+0003ac10: 7920 7573 6564 0d0a 2020 2020 2020 2020  y used..        
+0003ac20: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
+0003ac30: 7572 6e20 7263 2e53 6574 5468 7265 6164  urn rc.SetThread
+0003ac40: 5761 6b65 5570 2874 6872 6561 6463 6f75  WakeUp(threadcou
+0003ac50: 6e74 290d 0a0d 0a0d 0a23 202d 2d2d 2d2d  nt)......# -----
+0003ac60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003ac70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003ac80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003ac90: 2d2d 2d2d 2d0d 0a63 6c61 7373 2052 6563  -----..class Rec
+0003aca0: 7963 6c65 3a0d 0a20 2020 2040 7374 6174  ycle:..    @stat
+0003acb0: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
+0003acc0: 6620 6f6e 2829 3a0d 0a20 2020 2020 2020  f on():..       
+0003acd0: 2022 2222 0d0a 2020 2020 2020 2020 5475   """..        Tu
+0003ace0: 726e 2072 6970 7461 626c 6520 7265 6379  rn riptable recy
+0003acf0: 636c 696e 6720 6f6e 2e0d 0a20 2020 2020  cling on...     
+0003ad00: 2020 2055 7365 6420 6f6e 6c79 2077 6865     Used only whe
+0003ad10: 6e20 7269 7074 6162 6c65 2072 6563 7963  n riptable recyc
+0003ad20: 6c69 6e67 2077 6173 2074 7572 6e65 6420  ling was turned 
+0003ad30: 6f66 662e 0d0a 0d0a 2020 2020 2020 2020  off.....        
+0003ad40: 4578 616d 706c 650d 0a20 2020 2020 2020  Example..       
+0003ad50: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+0003ad60: 2020 613d 6172 616e 6765 2831 5f30 3030    a=arange(1_000
+0003ad70: 5f30 3029 0d0a 2020 2020 2020 2020 5265  _00)..        Re
+0003ad80: 6379 636c 652e 6f66 6628 290d 0a20 2020  cycle.off()..   
+0003ad90: 2020 2020 2025 7469 6d65 6974 2061 3d61       %timeit a=a
+0003ada0: 202b 2031 0d0a 2020 2020 2020 2020 5265   + 1..        Re
+0003adb0: 6379 636c 652e 6f6e 2829 0d0a 2020 2020  cycle.on()..    
+0003adc0: 2020 2020 2574 696d 6569 7420 613d 6120      %timeit a=a 
+0003add0: 2b20 310d 0a0d 0a20 2020 2020 2020 2022  + 1....        "
+0003ade0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+0003adf0: 726e 2046 6173 7441 7272 6179 2e5f 524f  rn FastArray._RO
+0003ae00: 4e28 290d 0a0d 0a20 2020 2040 7374 6174  N()....    @stat
+0003ae10: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
+0003ae20: 6620 6f66 6628 293a 0d0a 2020 2020 2020  f off():..      
+0003ae30: 2020 7265 7475 726e 2046 6173 7441 7272    return FastArr
+0003ae40: 6179 2e5f 524f 4646 2829 0d0a 0d0a 2020  ay._ROFF()....  
+0003ae50: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+0003ae60: 0a20 2020 2064 6566 206e 6f77 2874 696d  .    def now(tim
+0003ae70: 656f 7574 3a20 696e 7420 3d20 3029 3a0d  eout: int = 0):.
+0003ae80: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0003ae90: 2020 2020 2020 5061 7373 2074 6865 2067        Pass the g
+0003aea0: 6172 6261 6765 2063 6f6c 6c65 6374 6f72  arbage collector
+0003aeb0: 2074 696d 656f 7574 2076 616c 7565 2074   timeout value t
+0003aec0: 6f20 636c 6561 6e75 702e 0d0a 2020 2020  o cleanup...    
+0003aed0: 2020 2020 416c 736f 2063 616c 6c73 2074      Also calls t
+0003aee0: 6865 2070 7974 686f 6e20 6761 7262 6167  he python garbag
+0003aef0: 6520 636f 6c6c 6563 746f 722e 0d0a 0d0a  e collector.....
+0003af00: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+0003af10: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+0003af20: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0003af30: 7469 6d65 6f75 743a 2064 6566 6175 6c74  timeout: default
+0003af40: 2074 6f20 302e 2020 3020 7769 6c6c 206e   to 0.  0 will n
+0003af50: 6f74 2073 6574 2061 2074 696d 656f 7574  ot set a timeout
+0003af60: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+0003af70: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+0003af80: 2d2d 2d2d 0d0a 2020 2020 2020 2020 746f  ----..        to
+0003af90: 7461 6c20 6172 7261 7973 2064 656c 6574  tal arrays delet
+0003afa0: 6564 0d0a 2020 2020 2020 2020 2222 220d  ed..        """.
+0003afb0: 0a20 2020 2020 2020 2069 6d70 6f72 7420  .        import 
+0003afc0: 6763 0d0a 0d0a 2020 2020 2020 2020 6763  gc....        gc
+0003afd0: 2e63 6f6c 6c65 6374 2829 0d0a 2020 2020  .collect()..    
+0003afe0: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
+0003aff0: 5265 6379 636c 6547 6172 6261 6765 436f  RecycleGarbageCo
+0003b000: 6c6c 6563 744e 6f77 2874 696d 656f 7574  llectNow(timeout
+0003b010: 295b 2254 6f74 616c 4465 6c65 7465 6422  )["TotalDeleted"
+0003b020: 5d0d 0a20 2020 2020 2020 2069 6620 7265  ]..        if re
+0003b030: 7375 6c74 203e 2030 3a0d 0a20 2020 2020  sult > 0:..     
+0003b040: 2020 2020 2020 2072 632e 5265 6379 636c         rc.Recycl
+0003b050: 6547 6172 6261 6765 436f 6c6c 6563 744e  eGarbageCollectN
+0003b060: 6f77 2874 696d 656f 7574 290d 0a20 2020  ow(timeout)..   
+0003b070: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+0003b080: 6c74 0d0a 0d0a 2020 2020 4073 7461 7469  lt....    @stati
+0003b090: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
+0003b0a0: 2074 696d 656f 7574 2874 696d 656f 7574   timeout(timeout
+0003b0b0: 3a20 696e 7420 3d20 3130 3029 3a0d 0a20  : int = 100):.. 
+0003b0c0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0003b0d0: 2020 2020 5061 7373 2074 6865 2067 6172      Pass the gar
+0003b0e0: 6261 6765 2063 6f6c 6c65 6374 6f72 2074  bage collector t
+0003b0f0: 696d 656f 7574 2076 616c 7565 2074 6f20  imeout value to 
+0003b100: 6578 7069 7265 2e0d 0a20 2020 2020 2020  expire...       
+0003b110: 2054 6865 2074 696d 656f 7574 2076 616c   The timeout val
+0003b120: 7565 2069 7320 726f 7567 686c 7920 696e  ue is roughly in
+0003b130: 2032 2f35 2073 6563 732e 0d0a 2020 2020   2/5 secs...    
+0003b140: 2020 2020 4120 7661 6c75 6520 6f66 2031      A value of 1
+0003b150: 3030 2069 7320 7573 7561 6c6c 7920 6162  00 is usually ab
+0003b160: 6f75 7420 3430 2073 6563 6f6e 6473 2e0d  out 40 seconds..
+0003b170: 0a20 2020 2020 2020 2049 6620 616e 2061  .        If an a
+0003b180: 7272 6179 2068 6173 206e 6f74 2062 6565  rray has not bee
+0003b190: 6e20 7265 7573 6564 2062 7920 7468 6520  n reused by the 
+0003b1a0: 7469 6d65 6f75 742c 2069 7420 6973 2070  timeout, it is p
+0003b1b0: 6572 6d61 6e65 6e74 6c79 2064 656c 6574  ermanently delet
+0003b1c0: 6564 2e0d 0a0d 0a20 2020 2020 2020 2052  ed.....        R
+0003b1d0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+0003b1e0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0003b1f0: 2070 7265 7669 6f75 7320 7469 6d65 7370   previous timesp
+0003b200: 616e 0d0a 2020 2020 2020 2020 2222 220d  an..        """.
+0003b210: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003b220: 7263 2e52 6563 7963 6c65 5365 7447 6172  rc.RecycleSetGar
+0003b230: 6261 6765 436f 6c6c 6563 7454 696d 656f  bageCollectTimeo
+0003b240: 7574 2874 696d 656f 7574 290d 0a0d 0a0d  ut(timeout).....
+0003b250: 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .# -------------
+0003b260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a63  -------------..c
+0003b290: 6c61 7373 204c 6564 6765 723a 0d0a 2020  lass Ledger:..  
+0003b2a0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+0003b2b0: 0a20 2020 2064 6566 206f 6e28 293a 0d0a  .    def on():..
+0003b2c0: 2020 2020 2020 2020 2222 2254 7572 6e20          """Turn 
+0003b2d0: 7468 6520 6d61 7468 206c 6564 6765 7220  the math ledger 
+0003b2e0: 6f6e 2074 6f20 7265 636f 7264 2061 6c6c  on to record all
+0003b2f0: 2061 7272 6179 206d 6174 6820 726f 7574   array math rout
+0003b300: 696e 6573 2222 220d 0a20 2020 2020 2020  ines"""..       
+0003b310: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
+0003b320: 7374 6572 2e4d 6174 684c 6564 6765 722e  ster.MathLedger.
+0003b330: 5f4c 6564 6765 724f 6e28 290d 0a0d 0a20  _LedgerOn().... 
+0003b340: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+0003b350: 0d0a 2020 2020 6465 6620 6f66 6628 293a  ..    def off():
+0003b360: 0d0a 2020 2020 2020 2020 2222 2254 7572  ..        """Tur
+0003b370: 6e20 7468 6520 6d61 7468 206c 6564 6765  n the math ledge
+0003b380: 7220 6f66 6622 2222 0d0a 2020 2020 2020  r off"""..      
+0003b390: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
+0003b3a0: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
+0003b3b0: 2e5f 4c65 6467 6572 4f66 6628 290d 0a0d  ._LedgerOff()...
+0003b3c0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+0003b3d0: 6f64 0d0a 2020 2020 6465 6620 6475 6d70  od..    def dump
+0003b3e0: 2864 6174 6173 6574 3d54 7275 6529 3a0d  (dataset=True):.
+0003b3f0: 0a20 2020 2020 2020 2022 2222 5072 696e  .        """Prin
+0003b400: 7420 6f75 7420 7468 6520 6d61 7468 206c  t out the math l
+0003b410: 6564 6765 7222 2222 0d0a 2020 2020 2020  edger"""..      
+0003b420: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
+0003b430: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
+0003b440: 2e5f 4c65 6467 6572 4475 6d70 2864 6174  ._LedgerDump(dat
+0003b450: 6173 6574 3d64 6174 6173 6574 290d 0a0d  aset=dataset)...
+0003b460: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+0003b470: 6f64 0d0a 2020 2020 6465 6620 746f 5f66  od..    def to_f
+0003b480: 696c 6528 6669 6c65 6e61 6d65 293a 0d0a  ile(filename):..
+0003b490: 2020 2020 2020 2020 2222 2253 6176 6520          """Save 
+0003b4a0: 7468 6520 6d61 7468 206c 6564 6765 7220  the math ledger 
+0003b4b0: 746f 2061 2066 696c 6522 2222 0d0a 2020  to a file"""..  
+0003b4c0: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
+0003b4d0: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
+0003b4e0: 6467 6572 2e5f 4c65 6467 6572 4475 6d70  dger._LedgerDump
+0003b4f0: 4669 6c65 2866 696c 656e 616d 6529 0d0a  File(filename)..
+0003b500: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+0003b510: 686f 640d 0a20 2020 2064 6566 2063 6c65  hod..    def cle
+0003b520: 6172 2829 3a0d 0a20 2020 2020 2020 2022  ar():..        "
+0003b530: 2222 436c 6561 7220 616c 6c20 7468 6520  ""Clear all the 
+0003b540: 656e 7472 6965 7320 696e 2074 6865 206d  entries in the m
+0003b550: 6174 6820 6c65 6467 6572 2222 220d 0a20  ath ledger""".. 
+0003b560: 2020 2020 2020 2072 6574 7572 6e20 5479         return Ty
+0003b570: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
+0003b580: 6564 6765 722e 5f4c 6564 6765 7243 6c65  edger._LedgerCle
+0003b590: 6172 2829 0d0a 0d0a 0d0a 2320 2d2d 2d2d  ar()......# ----
+0003b5a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b5b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b5c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b5d0: 2d2d 2d2d 2d2d 0d0a 2320 7468 6973 2069  ------..# this i
+0003b5e0: 7320 6361 6c6c 6564 2077 6865 6e20 7468  s called when th
+0003b5f0: 6520 6d6f 6475 6c65 2069 7320 6c6f 6164  e module is load
+0003b600: 6564 0d0a 5f46 6978 7570 446f 6353 7472  ed.._FixupDocStr
+0003b610: 696e 6773 2829 0d0a 0d0a 2320 4e4f 5445  ings()....# NOTE
+0003b620: 3a20 4b65 6570 2074 6869 7320 6174 2074  : Keep this at t
+0003b630: 6865 2065 6e64 206f 6620 7468 6520 6669  he end of the fi
+0003b640: 6c65 0d0a 2320 2d2d 2d2d 2d2d 2d2d 2d2d  le..# ----------
+0003b650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b680: 2d0d 0a23 2063 616c 6c69 6e67 2074 6869  -..# calling thi
+0003b690: 7320 6675 6e63 7469 6f6e 2077 696c 6c20  s function will 
+0003b6a0: 666f 7263 6520 666d 2074 6f20 7265 7475  force fm to retu
+0003b6b0: 726e 2046 6173 7441 7272 6179 2073 7562  rn FastArray sub
+0003b6c0: 636c 6173 730d 0a5f 7365 7466 6173 7461  class.._setfasta
+0003b6d0: 7272 6179 7479 7065 2829 0d0a 0d0a 5479  rraytype()....Ty
+0003b6e0: 7065 5265 6769 7374 6572 2e46 6173 7441  peRegister.FastA
+0003b6f0: 7272 6179 203d 2046 6173 7441 7272 6179  rray = FastArray
+0003b700: 0d0a 0d0a 4661 7374 4172 7261 792e 7265  ....FastArray.re
+0003b710: 6769 7374 6572 5f66 756e 6374 696f 6e28  gister_function(
+0003b720: 2264 6573 6372 6962 6522 2c20 6465 7363  "describe", desc
+0003b730: 7269 6265 290d 0a                        ribe)..
```

### Comparing `riptable-1.7.0/riptable/rt_fastarraynumba.py` & `riptable-1.8.0/riptable/rt_fastarraynumba.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_groupby.py` & `riptable-1.8.0/riptable/rt_groupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_groupbykeys.py` & `riptable-1.8.0/riptable/rt_groupbykeys.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_groupbynumba.py` & `riptable-1.8.0/riptable/rt_groupbynumba.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_groupbyops.py` & `riptable-1.8.0/riptable/rt_groupbyops.py`

 * *Files 0% similar despite different names*

```diff
@@ -241,29 +241,56 @@
         Notes
         -----
         NOTE: not optimized for groupby which has grouping.ikey always set
         NOTE: categorical needs to lazy evaluate ikey
 
         Examples
         --------
-        >>> c = rt.Cat(['this','this','that','that','this'])
-        >>> c.first
+        >>> c = rt.Cat(['b','b','a','a','b'])
+        >>> c.first_fancy
         FastArray([0, 2])
 
-        >>> c=Cat(['this','this','that','that','this'], ordered=False)
-        >>> c.first
+        >>> c=Cat(['b','b','a','a','b'], ordered=False)
+        >>> c.first_fancy
         FastArray([2, 0])
         """
         # note, cache this value?
         # fancy index
         self.grouping.pack_by_group()
         return self.grouping.iGroup[self.grouping.iFirstGroup[1:]]
 
     # ---------------------------------------------------------------
     @property
+    @_use_autocomplete_placeholder(placeholder=lambda _: FastArray[0])
+    def last_fancy(self):
+        """
+        Return a fancy index mask of the last occurrence
+
+        Notes
+        -----
+        NOTE: not optimized for groupby which has grouping.ikey always set
+        NOTE: categorical needs to lazy evaluate ikey
+
+        Examples
+        --------
+        >>> c = rt.Cat(['b','b','a','a','b'])
+        >>> c.last_fancy
+        FastArray([3, 4])
+
+        >>> c=Cat(['b','b','a','a','b'], ordered=False)
+        >>> c.last_fancy
+        FastArray([4, 3])
+        """
+        # note, cache this value?
+        # fancy index
+        self.grouping.pack_by_group()
+        return self.grouping.iGroup[self.grouping.iFirstGroup[1:] + self.grouping.nCountGroup[1:] - 1]
+
+    # ---------------------------------------------------------------
+    @property
     def first_bool(self):
         """
         Return a boolean mask of the first occurrence.
 
         Examples
         --------
         >>> c = rt.Cat(['this','this','that','that','this'])
@@ -275,14 +302,34 @@
         result = zeros_like(self.grouping.iGroup, dtype="?")
 
         # set boolean mask to True for only the first occurrence
         result[fancy] = True
         return result
 
     # ---------------------------------------------------------------
+    @property
+    def last_bool(self):
+        """
+        Return a boolean mask of the last occurrence.
+
+        Examples
+        --------
+        >>> c = rt.Cat(['this','this','that','that','this'])
+        >>> c.last_bool
+        FastArray([ False, False,  False, True, True])
+        """
+        # boolean mask set to False
+        fancy = self.last_fancy
+        result = zeros_like(self.grouping.iGroup, dtype="?")
+
+        # set boolean mask to True for only the last occurrence
+        result[fancy] = True
+        return result
+
+    # ---------------------------------------------------------------
     def _possibly_transform(self, gb_ds, label_keys=None, **kwargs):
         """
         Called after a reduce operation to possibly re-expand back.
         Check transform flag.
         """
         transform = kwargs.get("transform", False)
```

### Comparing `riptable-1.7.0/riptable/rt_grouping.py` & `riptable-1.8.0/riptable/rt_grouping.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_hstack.py` & `riptable-1.8.0/riptable/rt_hstack.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_imatrix.py` & `riptable-1.8.0/riptable/rt_imatrix.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_io.py` & `riptable-1.8.0/riptable/rt_io.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_itemcontainer.py` & `riptable-1.8.0/riptable/rt_itemcontainer.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_ledger.py` & `riptable-1.8.0/riptable/rt_ledger.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_matplotlib.py` & `riptable-1.8.0/riptable/rt_matplotlib.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_merge.py` & `riptable-1.8.0/riptable/rt_merge.py`

 * *Files 2% similar despite different names*

```diff
@@ -2958,84 +2958,265 @@
     columns_left: Optional[Union[str, List[str]]] = None,
     columns_right: Optional[Union[str, List[str]]] = None,
     keep: Optional[str] = None,
     high_card: Optional[Union[bool, Tuple[Optional[bool], Optional[bool]]]] = None,
     hint_size: Optional[Union[int, Tuple[Optional[int], Optional[int]]]] = None,
 ) -> "Dataset":
     """
-    Merge Dataset by performing a database-style left-join operation by columns.
+    Combine two `.Dataset` objects by performing a database-style left-join
+    operation on columns.
+
+    This operation returns a new `.Dataset` object. To do an in-place merge, use
+    `.Dataset.merge_lookup` with ``inplace=True``.
 
     Parameters
     ----------
-    left : Dataset
-        Left Dataset
-    right : Dataset
-        Right Dataset
+    left : `.Dataset`
+        The first `.Dataset` to merge. If a matching value for a key in `left`
+        isn't found in `right`, the returned `.Dataset` includes a row with the
+        columns from `left`, but with NaN values in each column from `right`.
+    right : `.Dataset`
+        The second `.Dataset` to merge. If `right` has more rows than `left`,
+        the rows in `right` that don't have counterparts in `left` are discarded
+        from the result.
     on : str or (str, str) or list of str or list of (str, str), optional
-        Column names to join on. Must be found in both `left` and `right`.
+        Names of columns (keys) to join on. If `on` isn't specified, `left_on`
+        and `right_on` must be specified.
+        Options for types:
+
+        - Single string: Join on one column that has the same name in both
+          `.Dataset` objects.
+        - List: A list of strings is treated as a multi-key in which all
+          associated key column values in `left` must have matches in
+          `right`. The column names must be the same in both `.Dataset`
+          objects, unless they're in a tuple; see below.
+        - Tuple: Use a tuple to specify key columns that have different names.
+          For example, ``("col_a", "col_b")`` joins on ``col_a`` in
+          `left` and ``col_b`` in `right`. Both columns are in the
+          returned `.Dataset` unless you specify otherwise using
+          `columns_left` or `columns_right`.
     left_on : str or list of str, optional
-        Column names from left Dataset to join on. When specified, overrides whatever is specified in `on`.
+        Use instead of `on` to specify names of columns in the left `.Dataset`
+        to join on. A list of strings is treated as a multi-key in which all
+        associated key column values in `left` must have matches in `right`. If
+        both `on` and `left_on` are specified, an error is raised.
     right_on : str or list of str, optional
-        Column names from right to join on. When specified, overrides whatever is specified in `on`.
-    require_match : bool, default False
-        When True, all keys in `left` are required to have a matching key in `right`, and an exception
-        is raised when this requirement is not met.
+        Use instead of `on` to specify names of columns in the right `.Dataset`
+        to join on. A list of strings is treated as a multi-key in which all
+        associated key column values in `right` must have matches in `left`.
+        If both `on` and `right_on` are specified, an error is raised.
+    require_match : bool, default `False`
+        When `True`, all keys in `left` are required to have a matching key in
+        `right`, and an error is raised when this requirement is not met.
     suffixes: tuple of (str, str), optional
-        Suffix to apply to overlapping column names in the left and right side, respectively.
-        The default (``None``) causes an exception to be raised for any overlapping columns.
-    copy: bool, default True
-        If False, avoid copying data when possible; this can reduce memory usage
-        but users must be aware that data can be shared between `left` and/or `right`
-        and the Dataset returned by this function.
+        Suffixes to apply to returned overlapping non-key-column names in the
+        `left` and `right`, respectively. By default, an error is raised
+        for any overlapping non-key columns that will be in the returned
+        `.Dataset`.
+    copy: bool, default `True`
+        Set to `False` to avoid copying data when possible. This can reduce
+        memory usage, but be aware that data can be shared among `left`,
+        `right`, and the `.Dataset` returned by this function.
     columns_left : str or list of str, optional
-        Column names to include in the merge from `left`, defaults to None which causes all columns to be included.
+        Names of columns from `left` to include in the merged `Dataset`.
+        By default, all columns are included.
     columns_right : str or list of str, optional
-        Column names to include in the merge from `right`, defaults to None which causes all columns to be included.
-    keep : {'first', 'last'}, optional
-        When `right` contains multiple rows with a given unique key from `left`, this function
-        keeps only one such row and this parameter indicates whether it should be the first or
-        last row with the given key; when the parameter is None (the default), an exception will
-        be raised if there are any non-unique keys in `right`.
+        Names of columns from `right` to include in the merged `.Dataset`.
+        By default, all columns are included.
+    keep : {None, 'first', 'last'}, optional
+        When `right` contains multiple rows with a given unique key from `left`,
+        keep only one such row; this parameter indicates whether it should be
+        the first or last row with the given key. By default (``keep=None``), an
+        error is raised if there are any non-unique keys in `right`.
     high_card : bool or (bool, bool), optional
-        Hint to low-level grouping implementation that the key(s) of `left` and/or `right`
-        contain a high number of unique values (cardinality); the grouping logic *may* use
-        this hint to select an algorithm that can provide better performance for such cases.
+        Hint to the low-level grouping implementation that the key(s) of `left`
+        or `right` contain a high number of unique values (cardinality);
+        the grouping logic *may* use this hint to select an algorithm that can
+        provide better performance for such cases.
     hint_size : int or (int, int), optional
-        An estimate of the number of unique keys used for the join. Used as a performance hint
-        to the low-level grouping implementation.
-        This hint is typically ignored when `high_card` is specified.
+        An estimate of the number of unique keys used for the join. Used as a
+        performance hint to the low-level grouping implementation. This hint is
+        typically ignored when `high_card` is specified.
 
     Returns
     -------
-    merged : Dataset
+    Dataset
+        A new `.Dataset` of the two merged objects.
+
+    See Also
+    --------
+    ~riptable.rt_merge.merge_asof :
+        Merge two `.Dataset` objects using the nearest key.
+    ~riptable.rt_merge.merge2 :
+        Merge two `.Dataset` objects using various database-style joins.
+    ~riptable.rt_merge.merge_indices :
+        Return the left and right indices created by the join engine.
+    .Dataset.merge_lookup : Merge two `.Dataset` objects with an in-place option.
+    .Dataset.merge2 :
+        Merge two `.Dataset` objects using various database-style joins.
+    .Dataset.merge_asof : Merge two `.Dataset` objects using the nearest key.
 
     Examples
     --------
-    >>> rt.merge_lookup(ds_simple_1, ds_simple_2, left_on = 'A', right_on = 'X', how = 'inner')
-    #   A      B   X       C
-    -   -   ----   -   -----
-    0   0   1.20   0    2.40
-    1   1   3.10   1    6.20
-    2   6   9.60   6   19.20
-    <BLANKLINE>
-    [3 rows x 4 columns] total bytes: 72.0 B
-
-
-    Demonstrating a 'left' merge.
-
-    >>> rt.merge_lookup(ds_complex_1, ds_complex_2, on = ['A','B'], how = 'left')
-    #   B    A       C       E
-    -   -   --   -----   -----
-    0   Q    0    2.40    1.50
-    1   R    6    6.20   11.20
-    2   S    9   19.20     nan
-    3   T   11   25.90     nan
+    A basic merge on a single column:
+
+    >>> ds_l = rt.Dataset({"Symbol": rt.FA(["GME", "AMZN", "TSLA", "SPY", "TSLA",
+    ...                                     "AMZN", "GME", "SPY", "GME", "TSLA"])})
+    >>> ds_r = rt.Dataset({"Symbol": rt.FA(["TSLA", "GME", "AMZN", "SPY"]),
+    ...                    "Trader": rt.FA(["Nate", "Elon", "Josh", "Dan"])})
+    >>> ds_l
+    #   Symbol
+    -   ------
+    0   GME
+    1   AMZN
+    2   TSLA
+    3   SPY
+    4   TSLA
+    5   AMZN
+    6   GME
+    7   SPY
+    8   GME
+    9   TSLA
+    <BLANKLINE>
+    [10 rows x 1 columns] total bytes: 40.0 B
+    >>> ds_r
+    #   Symbol   Trader
+    -   ------   ------
+    0   TSLA     Nate
+    1   GME      Elon
+    2   AMZN     Josh
+    3   SPY      Dan
+    <BLANKLINE>
+    [4 rows x 2 columns] total bytes: 32.0 B
+    >>> rt.merge_lookup(ds_l, ds_r, on="Symbol")
+    #   Symbol   Trader
+    -   ------   ------
+    0   GME      Elon
+    1   AMZN     Josh
+    2   TSLA     Nate
+    3   SPY      Dan
+    4   TSLA     Nate
+    5   AMZN     Josh
+    6   GME      Elon
+    7   SPY      Dan
+    8   GME      Elon
+    9   TSLA     Nate
+    <BLANKLINE>
+    [10 rows x 2 columns] total bytes: 80.0 B
+
+    When key columns have different names, use `left_on` and `right_on`
+    to specify them:
+
+    >>> ds_r.col_rename("Symbol", "Primary_Symbol")
+    >>> rt.merge_lookup(ds_l, ds_r, left_on="Symbol", right_on="Primary_Symbol",
+    ...                 columns_right="Trader")
+    #   Symbol   Trader
+    -   ------   ------
+    0   GME      Elon
+    1   AMZN     Josh
+    2   TSLA     Nate
+    3   SPY      Dan
+    4   TSLA     Nate
+    5   AMZN     Josh
+    6   GME      Elon
+    7   SPY      Dan
+    8   GME      Elon
+    9   TSLA     Nate
+    <BLANKLINE>
+    [10 rows x 2 columns] total bytes: 80.0 B
+
+    For non-key columns with the same name that will be returned, specify
+    `suffixes`:
+
+    >>> # Add duplicate non-key columns.
+    >>> ds_l.Value = rt.FA([0.72, 0.85, 0.14, 0.55, 0.77, 0.65, 0.23, 0.15, 0.43, 0.25])
+    >>> ds_r.Value = rt.FA([0.28, 0.56, 0.89, 0.74])
+    >>> # You can also use a tuple to specify left and right key columns.
+    >>> rt.merge_lookup(ds_l, ds_r, on=("Symbol", "Primary_Symbol"),
+    ...                 suffixes=["_1", "_2"], columns_right=["Value", "Trader"])
+    #   Symbol   Value_1   Value_2   Trader
+    -   ------   -------   -------   ------
+    0   GME         0.72      0.56   Elon
+    1   AMZN        0.85      0.89   Josh
+    2   TSLA        0.14      0.28   Nate
+    3   SPY         0.55      0.74   Dan
+    4   TSLA        0.77      0.28   Nate
+    5   AMZN        0.65      0.89   Josh
+    6   GME         0.23      0.56   Elon
+    7   SPY         0.15      0.74   Dan
+    8   GME         0.43      0.56   Elon
+    9   TSLA        0.25      0.28   Nate
+    <BLANKLINE>
+    [10 rows x 4 columns] total bytes: 240.0 B
+
+    When `on` is a list, a multi-key join is performed. All keys must match
+    in the right `Dataset`.
+
+    If a matching value for a key in the left `.Dataset` isn't found in the
+    right `.Dataset`, the returned `.Dataset` includes a row with the columns
+    from `left` but with NaN values in the columns from `right`.
+
+    >>> # Add associated Size values for multi-key join. Note that one
+    >>> # symbol-size pair in the left Dataset doesn't have a match in
+    >>> # the right Dataset.
+    >>> ds_l.Size = rt.FA([500, 150, 430, 225, 430, 320, 175, 620, 135, 260])
+    >>> ds_r.Size = rt.FA([430, 500, 150, 2250])
+    >>> # Pass a list of key columns that contains a tuple.
+    >>> rt.merge_lookup(ds_l, ds_r, on=[("Symbol", "Primary_Symbol"), "Size"],
+    ...                 suffixes=["_1", "_2"])
+    #   Size   Symbol   Value_1   Trader   Value_2
+    -   ----   ------   -------   ------   -------
+    0    500   GME         0.72   Elon        0.56
+    1    150   AMZN        0.85   Josh        0.89
+    2    430   TSLA        0.14   Nate        0.28
+    3    225   SPY         0.55                nan
+    4    430   TSLA        0.77   Nate        0.28
+    5    320   AMZN        0.65                nan
+    6    175   GME         0.23                nan
+    7    620   SPY         0.15                nan
+    8    135   GME         0.43                nan
+    9    260   TSLA        0.25                nan
     <BLANKLINE>
-    [4 rows x 4 columns] total bytes: 84.0 B
+    [10 rows x 5 columns] total bytes: 280.0 B
 
+    When the right `.Dataset` has more than one matching key, use `keep` to
+    specify which one to use:
+
+    >>> ds_l = rt.Dataset({"Symbol": rt.FA(["GME", "AMZN", "TSLA", "SPY", "TSLA",
+    ...                                     "AMZN", "GME", "SPY", "GME", "TSLA"])})
+    >>> ds_r = rt.Dataset({"Symbol": rt.FA(["TSLA", "GME", "AMZN", "SPY", "SPY"]),
+    ...                    "Trader": rt.FA(["Nate", "Elon", "Josh", "Dan", "Amy"])})
+    >>> rt.merge_lookup(ds_l, ds_r, on="Symbol", keep="last")
+    #   Symbol   Trader
+    -   ------   ------
+    0   GME      Elon
+    1   AMZN     Josh
+    2   TSLA     Nate
+    3   SPY      Amy
+    4   TSLA     Nate
+    5   AMZN     Josh
+    6   GME      Elon
+    7   SPY      Amy
+    8   GME      Elon
+    9   TSLA     Nate
+    <BLANKLINE>
+    [10 rows x 2 columns] total bytes: 80.0 B
+
+    NaN values are not treated as equal keys:
+
+    >>> ds_l = rt.Dataset({"Key": [1.0, rt.nan, 2.0,], "Value1": [1.0, 2.0, 3.0]})
+    >>> ds_r = rt.Dataset({"Key": [1.0, 2.0, rt.nan], "Value2": [1.0, 2.0, 3.0]})
+    >>> rt.merge_lookup(ds_l, ds_r, on="Key", columns_right="Value2")
+    #    Key   Value1   Value2
+    -   ----   ------   ------
+    0   1.00     1.00     1.00
+    1    nan     2.00      nan
+    2   2.00     3.00     2.00
+    <BLANKLINE>
+    [3 rows x 3 columns] total bytes: 72.0 B
     """
     # If keep is None, that means we want an exception to be raised if
     # there are any keys in 'right' occurring more than once. Do that via
     # merge2's 'validate' parameter.
     validate = "m:1" if keep is None else None
 
     return merge2(
```

### Comparing `riptable-1.7.0/riptable/rt_merge_asof.py` & `riptable-1.8.0/riptable/rt_merge_asof.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_meta.py` & `riptable-1.8.0/riptable/rt_meta.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_misc.py` & `riptable-1.8.0/riptable/rt_misc.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_mlutils.py` & `riptable-1.8.0/riptable/rt_mlutils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_multiset.py` & `riptable-1.8.0/riptable/rt_multiset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_numpy.py` & `riptable-1.8.0/riptable/rt_numpy.py`

 * *Files 0% similar despite different names*

```diff
@@ -462,14 +462,21 @@
 
     if _can_coerce(arr1, info1, info2):
         return dt2
 
     return None
 
 
+def _get_lossless_common_array_type(arr1: np.array, arr2: np.array) -> Union[np.dtype, None]:
+    common_type = _find_lossless_common_array_type(arr1, arr2)
+    if not common_type:
+        raise TypeError(f"Cannot find lossless common type of {arr1.dtype} and {arr2.dtype}")
+    return common_type
+
+
 def empty(shape, dtype: Union[str, np.dtype, type] = float, order: str = "C") -> "FastArray":
     """
     Return a new array of specified shape and type, without initializing entries.
 
     Parameters
     ----------
     shape : int or tuple of int
@@ -1082,16 +1089,15 @@
                 raise TypeError(f"{a_col.dtype} not in allowed types for ismember with {b_col.dtype}")
             if b_char not in allowed_types:
                 raise TypeError(f"{b_col.dtype} not in allowed types for ismember with {a_col.dtype}")
 
             # cast if necessary
             if a_char != b_char:
                 # warnings.warn(f"Performance warning: numeric arrays in ismember had different dtypes {a.dtype} {b.dtype}")
-                # raise TypeError('numeric arrays in ismember need to be the same dtype')
-                common_type = np.find_common_type([a_col.dtype, b_col.dtype], [])
+                common_type = _get_lossless_common_array_type(a_col, b_col)
                 a_col = a_col.astype(common_type, copy=False)
                 b_col = b_col.astype(common_type, copy=False)
 
         a[idx] = a_col
         b[idx] = b_col
 
     return a, b
@@ -1290,17 +1296,15 @@
 
             # import traceback
             # for line in traceback.format_stack():
             #    print(line.strip())
 
             # warnings.warn(f"Performance warning: numeric arrays in ismember had different dtypes {a.dtype} {b.dtype}")
             # raise TypeError('numeric arrays in ismember need to be the same dtype')
-            common_type = _find_lossless_common_array_type(a, b)
-            if not common_type:
-                raise TypeError(f"Cannot find lossless common type of {a.dtype} and {b.dtype}")
+            common_type = _get_lossless_common_array_type(a, b)
             if a.dtype != common_type:
                 a = a.astype(common_type)
             if b.dtype != common_type:
                 b = b.astype(common_type)
 
     # send to fastmath
     if base_index == 1:
```

### Comparing `riptable-1.7.0/riptable/rt_pdataset.py` & `riptable-1.8.0/riptable/rt_pdataset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_pgroupby.py` & `riptable-1.8.0/riptable/rt_pgroupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_sds.py` & `riptable-1.8.0/riptable/rt_sds.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_sharedmemory.py` & `riptable-1.8.0/riptable/rt_sharedmemory.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_sort_cache.py` & `riptable-1.8.0/riptable/rt_sort_cache.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_stats.py` & `riptable-1.8.0/riptable/rt_stats.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_str.py` & `riptable-1.8.0/riptable/rt_str.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_struct.py` & `riptable-1.8.0/riptable/rt_struct.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_timers.py` & `riptable-1.8.0/riptable/rt_timers.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_timezone.py` & `riptable-1.8.0/riptable/rt_timezone.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/rt_utils.py` & `riptable-1.8.0/riptable/rt_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/test_tooling_integration/ipykernel_integration_test.py` & `riptable-1.8.0/riptable/test_tooling_integration/ipykernel_integration_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/test_tooling_integration/ipython_compatibility_test.py` & `riptable-1.8.0/riptable/test_tooling_integration/ipython_compatibility_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/test_tooling_integration/ipython_integration_test.py` & `riptable-1.8.0/riptable/test_tooling_integration/ipython_integration_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/test_tooling_integration/run.py` & `riptable-1.8.0/riptable/test_tooling_integration/run.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/test_tooling_integration/test_display/test_display.py` & `riptable-1.8.0/riptable/test_tooling_integration/test_display/test_display.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/test_tooling_integration/test_display/vnu_checker.py` & `riptable-1.8.0/riptable/test_tooling_integration/test_display/vnu_checker.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/testing/array_assert.py` & `riptable-1.8.0/riptable/testing/array_assert.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/testing/randgen.py` & `riptable-1.8.0/riptable/testing/randgen.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/generator_categorical_unit_test.py` & `riptable-1.8.0/riptable/tests/generator_categorical_unit_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/generator_groupby_unit_test.py` & `riptable-1.8.0/riptable/tests/generator_groupby_unit_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/groupby_categorical_unit_test_parameters.py` & `riptable-1.8.0/riptable/tests/groupby_categorical_unit_test_parameters.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/groupby_unit_test_parameters.py` & `riptable-1.8.0/riptable/tests/groupby_unit_test_parameters.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/run.py` & `riptable-1.8.0/riptable/tests/run.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/runall.py` & `riptable-1.8.0/riptable/tests/runall.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_accum2.py` & `riptable-1.8.0/riptable/tests/test_accum2.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_accumtable.py` & `riptable-1.8.0/riptable/tests/test_accumtable.py`

 * *Files 2% similar despite different names*

```diff
@@ -16,14 +16,30 @@
         )
 
         accum = rt.accum_cols(data.Symb, [data.Count, data.PlusMinus], ["Count", "PlusMinus"])
         accum_expected = rt.Dataset({"Symb": ["A", "B"], "Count": [5.0, 5.0], "PlusMinus": [5.0, -5.0]})
         accum_expected.footer_set_values("Total", {"Symb": "Total", "Count": 10.0, "PlusMinus": 0.0})
         self.assertTrue((accum == accum_expected).all(axis=None))
 
+    def test_accum_cols_ratio(self):
+
+        num_rows = 4
+        data = rt.Dataset(
+            {
+                "Symb": rt.Cat(["A", "B"] * int(num_rows / 2)),
+                "Count": rt.full(num_rows, num_rows * num_rows),
+                "PlusMinus": [2, -4] * int(num_rows / 2),  # Added to handle edge case of zero footer
+            }
+        )
+
+        accum = rt.accum_cols(data.Symb, [[data.Count, data.PlusMinus]], ["Rezult"])
+        accum_expected = rt.Dataset({"Symb": ["A", "B"], "Rezult": [8.0, -4.0]})
+        accum_expected.footer_set_values("Total", {"Symb": "Total", "Rezult": -16.0})
+        self.assertTrue((accum == accum_expected).all(axis=None))
+
     def test_accum_cols_multikey(self):
         num_rows = 12
         data = rt.Dataset(
             {
                 "Symb": rt.Cat(["A", "B"] * int(num_rows / 2)),
                 "Exch": rt.Cat(["X", "Y", "Y", "X"] * int(num_rows / 4)),
                 "Count": rt.full(num_rows, 1.0),
```

### Comparing `riptable-1.7.0/riptable/tests/test_apply.py` & `riptable-1.8.0/riptable/tests/test_apply.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_base_function.py` & `riptable-1.8.0/riptable/tests/test_base_function.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_bitcount.py` & `riptable-1.8.0/riptable/tests/test_bitcount.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical.py` & `riptable-1.8.0/riptable/tests/test_categorical.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_autotest_aggregated_functions.py` & `riptable-1.8.0/riptable/tests/test_categorical_autotest_aggregated_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_base_index.py` & `riptable-1.8.0/riptable/tests/test_categorical_base_index.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_dtype.py` & `riptable-1.8.0/riptable/tests/test_categorical_dtype.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_filter_invalid.py` & `riptable-1.8.0/riptable/tests/test_categorical_filter_invalid.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_functions.py` & `riptable-1.8.0/riptable/tests/test_categorical_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_groupby.py` & `riptable-1.8.0/riptable/tests/test_categorical_groupby.py`

 * *Files 2% similar despite different names*

```diff
@@ -1052,14 +1052,46 @@
         y = rt.arange(4)
         with pytest.raises(
             ValueError,
             match="Tried to perform a groupby operation where the length of the input was not equal to the length of the categorical.",
         ):
             _ = x.median(y)
 
+    def test_groupby_ops_first_fancy(self):
+        x = rt.Cat(["b", "b", "a", "a", "b"])
+        y1 = x.first_fancy
+        soln1 = rt.FA([2, 0])
+        assert_array_equal(y1, soln1)
+        x = rt.Cat(["b", "b", "a", "a", "b"], ordered=False)
+        y2 = x.first_fancy
+        soln2 = rt.FA([0, 2])
+        assert_array_equal(y2, soln2)
+
+    def test_groupby_ops_first_bool(self):
+        x = rt.Cat(["b", "b", "a", "a", "b"])
+        y = x.first_bool
+        soln = rt.FA([True, False, True, False, False])
+        assert_array_equal(y, soln)
+
+    def test_groupby_ops_last_fancy(self):
+        x = rt.Cat(["b", "b", "a", "a", "b"])
+        y1 = x.last_fancy
+        soln1 = rt.FA([3, 4])
+        assert_array_equal(y1, soln1)
+        x = rt.Cat(["b", "b", "a", "a", "b"], ordered=False)
+        y2 = x.last_fancy
+        soln2 = rt.FA([4, 3])
+        assert_array_equal(y2, soln2)
+
+    def test_groupby_ops_last_bool(self):
+        x = rt.Cat(["b", "b", "a", "a", "b"])
+        y = x.last_bool
+        soln = rt.FA([False, False, False, True, True])
+        assert_array_equal(y, soln)
+
     @pytest.mark.skipif(get_rc_version() < parse_version("1.11.5a2"), reason="groupby.nth(n<0) is broken", strict=False)
     def test_nth_offsets(self):
         ds = Dataset({"a": rt.Cat([0, 1, 1]), "num": [123.0, 456.0, 789.0], "str": ["Aa", "Bb", "Cc"]})
         grp_offsets = [0, 1]
         gb: rt.Cat = ds.a
         for n in range(-3, 3):
             result = gb.nth((ds.num, ds.str), n=n)
```

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_keywords.py` & `riptable-1.8.0/riptable/tests/test_categorical_keywords.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_modify.py` & `riptable-1.8.0/riptable/tests/test_categorical_modify.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_ordered.py` & `riptable-1.8.0/riptable/tests/test_categorical_ordered.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_setitem.py` & `riptable-1.8.0/riptable/tests/test_categorical_setitem.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_sort_order.py` & `riptable-1.8.0/riptable/tests/test_categorical_sort_order.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_categorical_values.py` & `riptable-1.8.0/riptable/tests/test_categorical_values.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_conversion_utils.py` & `riptable-1.8.0/riptable/tests/test_conversion_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_csv.py` & `riptable-1.8.0/riptable/tests/test_csv.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_cut.py` & `riptable-1.8.0/riptable/tests/test_cut.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_dataset.py` & `riptable-1.8.0/riptable/tests/test_dataset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_dataset_slicing.py` & `riptable-1.8.0/riptable/tests/test_dataset_slicing.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_date.py` & `riptable-1.8.0/riptable/tests/test_date.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_datetime.py` & `riptable-1.8.0/riptable/tests/test_datetime.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_datetime_math.py` & `riptable-1.8.0/riptable/tests/test_datetime_math.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_fastarray.py` & `riptable-1.8.0/riptable/tests/test_fastarray.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_fastarray_bn.py` & `riptable-1.8.0/riptable/tests/test_fastarray_bn.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_fastarray_constructor.py` & `riptable-1.8.0/riptable/tests/test_fastarray_constructor.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_fastarray_functions.py` & `riptable-1.8.0/riptable/tests/test_fastarray_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_files/groupby1_ex3.pickle` & `riptable-1.8.0/riptable/tests/test_files/groupby1_ex3.pickle`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_files/unicode_ex1.csv` & `riptable-1.8.0/riptable/tests/test_files/unicode_ex1.csv`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_files/unicode_ex2.csv` & `riptable-1.8.0/riptable/tests/test_files/unicode_ex2.csv`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_files/unicode_ex3.csv` & `riptable-1.8.0/riptable/tests/test_files/unicode_ex3.csv`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_flatten.py` & `riptable-1.8.0/riptable/tests/test_flatten.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_groupby.py` & `riptable-1.8.0/riptable/tests/test_groupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_groupby_autotest_aggregated_functions.py` & `riptable-1.8.0/riptable/tests/test_groupby_autotest_aggregated_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_groupby_functions.py` & `riptable-1.8.0/riptable/tests/test_groupby_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_groupby_simple_multikey.py` & `riptable-1.8.0/riptable/tests/test_groupby_simple_multikey.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_groupbyops.py` & `riptable-1.8.0/riptable/tests/test_groupbyops.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_grouping.py` & `riptable-1.8.0/riptable/tests/test_grouping.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_interop_pyarrow.py` & `riptable-1.8.0/riptable/tests/test_interop_pyarrow.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_ismember.py` & `riptable-1.8.0/riptable/tests/test_ismember.py`

 * *Files 9% similar despite different names*

```diff
@@ -567,14 +567,67 @@
     b = FastArray([n])
     res = ismember(a, b)[0]
     assert_array_equal(res, [False, False, True, False])
     res = ismember(b, a)[1]
     assert (res == 2).all()
 
 
+def test_is_member_casting_big_uints():
+    # RIP-254
+    n = 2**63
+    a = FastArray([n - 1], dtype="int64")
+    b = FastArray([3, n - 1], dtype="uint64")
+    res = ismember(a, b)[0]
+    #    assert_array_equal(res, [False, True])
+    assert_array_equal(res, [True])
+    res = ismember(b, a)[1]
+    assert_array_equal(res, FastArray([-128, 0], dtype="int8"))
+    res = ismember(a, b)[1]
+    assert (res == 1).all()
+
+
+def test_is_member_multikey_casting_uints():
+    # related to RIP-254:  As floats n and n+1 are the same. We check that we don't identify n and n+1 in ismember
+    n = 2**53
+    a = FastArray([n + 2, n + 1, n, n - 1], dtype="uint64")
+    b = FastArray([n])
+    res = ismember([a, a], [b, b])[0]
+    assert_array_equal(res, [False, False, True, False])
+    res = ismember(b, a)[1]
+    assert (res == 2).all()
+
+
+def test_is_member_multikey_casting_big_uints():
+    # RIP-254
+    n = 2**63
+    a = FastArray([n - 1], dtype="int64")
+    b = FastArray([3, n - 1], dtype="uint64")
+    res = ismember([a, a], [b, b])[0]
+    #    assert_array_equal(res, [False, True])
+    assert_array_equal(res, [True])
+    res = ismember([b, b], [a, a])[1]
+    assert_array_equal(res, FastArray([-128, 0], dtype="int8"))
+    res = ismember([a, a], [b, b])[1]
+    assert (res == 1).all()
+
+
+def test_is_member_casting_too_big_uints():
+    a = FastArray([-1], dtype="int64")
+    b = FastArray([2**64 - 1], dtype="uint64")
+    with pytest.raises(TypeError):
+        ismember(a, b)
+
+
+def test_is_member_multikey_casting_too_big_uints():
+    a = FastArray([-1], dtype="int64")
+    b = FastArray([2**64 - 1], dtype="uint64")
+    with pytest.raises(TypeError):
+        ismember([a, a], [b, b])
+
+
 def test_ismember_empty_key():
     a = []
     b = [1, 2, 3]
     ismem, ix = ismember(a, b)
     assert_array_equal(ismem, FA([], dtype=bool))
     assert_array_equal(ix, FA([], dtype="int32"))
 
@@ -583,28 +636,14 @@
     a = [[], []]
     b = [[1, 2, 3], [4, 5, 6]]
     ismem, ix = ismember(a, b)
     assert_array_equal(ismem, FA([], dtype=bool))
     assert_array_equal(ix, FA([], dtype="int32"))
 
 
-def test_is_member_casting_big_uints():
-    # RIP-254
-    n = 2**63
-    a = FastArray([n - 1], dtype="int64")
-    b = FastArray([3, n - 1], dtype="uint64")
-    res = ismember(a, b)[0]
-    #    assert_array_equal(res, [False, True])
-    assert_array_equal(res, [True])
-    res = ismember(b, a)[1]
-    assert_array_equal(res, FastArray([-128, 0], dtype="int8"))
-    res = ismember(a, b)[1]
-    assert (res == 1).all()
-
-
 @pytest.mark.parametrize(
     "values, expected",
     [
         ([1, 2, 3], [INVALID_DICT[9], 2, INVALID_DICT[9]]),
         ([1.0, 2.0, 3.0], [np.nan, 2, np.nan]),
         (np.array([1.0, 2.0, 3.0]), [np.nan, 2, np.nan]),
     ],
```

### Comparing `riptable-1.7.0/riptable/tests/test_lexsort.py` & `riptable-1.8.0/riptable/tests/test_lexsort.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_merge.py` & `riptable-1.8.0/riptable/tests/test_merge.py`

 * *Files 0% similar despite different names*

```diff
@@ -298,15 +298,14 @@
         self.assertTrue((ds["merge_indicator"].expand_array == ["both", "left_only", "right_only"]).all())
 
         # Test name collision
         with pytest.raises(ValueError):
             ds1.merge(ds2, on="A", indicator="B")
 
     def test_outer_merge_categorical(self):
-
         cats = rt.FastArray([b"none", b"added", b"removed", b"all"], dtype="|S7")
 
         c1 = rt.Categorical([4, 3], cats)
         c2 = rt.Categorical([4, 2], cats)
 
         pnl1 = rt.FastArray([1724000.0, -184349.71])
         pnl2 = rt.FastArray([1711000.0, 12122.53])
@@ -6558,14 +6557,44 @@
 
     # Cols from the right Dataset.
     assert_array_equal(foo.id_bar, rt.FA([8, 8, 3, inv, 1, inv], dtype=np.int32))
     assert_array_equal(foo.col2_bar, rt.FA([5, 5, inv, inv, 4, inv], dtype=np.int32))
     assert_array_equal(foo.strcol, rt.FA([b"Lombard", b"Lombard", b"Walnut", b"", b"Chestnut", b""]))
 
 
+def test_merge_lookup_suffixes():
+    left = rt.Dataset({"s": ["a", "b", "c", "a", "b", "c"], "v": [1, 2, 3, 4, 5, 6]})
+    right = rt.Dataset({"s": ["b", "c", "d"], "v": [5, 6, 7]})
+    inv = right.v.inv
+
+    # Main test of suffixes
+    result = left.merge_lookup(right, on="s", suffixes=("_left", "_right"))
+    expected = rt.Dataset(
+        {"s": ["a", "b", "c", "a", "b", "c"], "v_left": [1, 2, 3, 4, 5, 6], "v_right": [inv, 5, 6, inv, 5, 6]}
+    )
+    for col in expected:
+        assert_array_equal(result[col], expected[col])
+    assert_array_equal(result.shape, expected.shape)
+
+    # Also test suffix while we're here
+    result = left.merge_lookup(right, on="s", suffix="_right")
+    expected = rt.Dataset(
+        {"s": ["a", "b", "c", "a", "b", "c"], "v": [1, 2, 3, 4, 5, 6], "v_right": [inv, 5, 6, inv, 5, 6]}
+    )
+    for col in expected:
+        assert_array_equal(result[col], expected[col])
+    assert_array_equal(result.shape, expected.shape)
+
+    # Can't specify certain kwargs with suffixes
+    with pytest.raises(ValueError):
+        result = left.merge_lookup(right, on="v", suffixes=("_left", "_right"), suffix="_right")
+    with pytest.raises(ValueError):
+        result = left.merge_lookup(right, on="v", suffixes=("_left", "_right"), inplace=True)
+
+
 def test_merge_lookup_inplace_multi():
     foo, bar = TestDataset.sql_semantics()
 
     foo.merge_lookup(bar, on=[("col1", "col1"), ("col2", "col2")], suffix="_bar", keep="first", inplace=True)
 
     assert foo.get_nrows() == 6
```

### Comparing `riptable-1.7.0/riptable/tests/test_merge_asof.py` & `riptable-1.8.0/riptable/tests/test_merge_asof.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_meta.py` & `riptable-1.8.0/riptable/tests/test_meta.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_multiset.py` & `riptable-1.8.0/riptable/tests/test_multiset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_pandas_utils.py` & `riptable-1.8.0/riptable/tests/test_pandas_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_pdataset.py` & `riptable-1.8.0/riptable/tests/test_pdataset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_pgroupby.py` & `riptable-1.8.0/riptable/tests/test_pgroupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_restore_subclass.py` & `riptable-1.8.0/riptable/tests/test_restore_subclass.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_riptide_cpp.py` & `riptable-1.8.0/riptable/tests/test_riptide_cpp.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_rtnumpy.py` & `riptable-1.8.0/riptable/tests/test_rtnumpy.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_rtutils.py` & `riptable-1.8.0/riptable/tests/test_rtutils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_saveload.py` & `riptable-1.8.0/riptable/tests/test_saveload.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_scalar.py` & `riptable-1.8.0/riptable/tests/test_scalar.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_sds.py` & `riptable-1.8.0/riptable/tests/test_sds.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_sprint_fastarray.py` & `riptable-1.8.0/riptable/tests/test_sprint_fastarray.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_str.py` & `riptable-1.8.0/riptable/tests/test_str.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_struct.py` & `riptable-1.8.0/riptable/tests/test_struct.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_timewindow.py` & `riptable-1.8.0/riptable/tests/test_timewindow.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_ufunc2.py` & `riptable-1.8.0/riptable/tests/test_ufunc2.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_unique.py` & `riptable-1.8.0/riptable/tests/test_unique.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/test_utils.py` & `riptable-1.8.0/riptable/tests/test_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable/tests/utils.py` & `riptable-1.8.0/riptable/tests/utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/riptable.egg-info/PKG-INFO` & `riptable-1.8.0/riptable.egg-info/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: riptable
-Version: 1.7.0
+Version: 1.8.0
 Summary: Python Package for riptable studies framework
 Home-page: https://github.com/rtosholdings/riptable
 Author: RTOS Holdings
 Author-email: rtosholdings-bot@sig.com
 Classifier: Development Status :: 4 - Beta
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.8
```

### Comparing `riptable-1.7.0/riptable.egg-info/SOURCES.txt` & `riptable-1.8.0/riptable.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `riptable-1.7.0/setup.py` & `riptable-1.8.0/setup.py`

 * *Files identical despite different names*

