# Comparing `tmp/panda_common-0.0.34-py2.py3-none-any.whl.zip` & `tmp/panda_common-0.0.35-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,30 +1,30 @@
-Zip file size: 31142 bytes, number of entries: 28
--rw-r--r--  2.0 unx      938 b- defN 23-Apr-24 14:06 panda_common-0.0.34.data/data/etc/panda/panda_common.cfg.rpmnew
--rwxr-xr-x  2.0 unx      275 b- defN 23-Apr-24 14:06 panda_common-0.0.34.data/scripts/panda_common-install_igtf_ca
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 14:06 pandacommon/__init__.py
--rw-r--r--  2.0 unx     2778 b- defN 23-Apr-24 14:06 pandacommon/liveconfigparser/LiveConfigParser.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 14:06 pandacommon/liveconfigparser/__init__.py
--rw-r--r--  2.0 unx     4479 b- defN 23-Apr-24 14:06 pandacommon/pandalogger/LogWrapper.py
--rw-r--r--  2.0 unx    12360 b- defN 23-Apr-24 14:06 pandacommon/pandalogger/PandaLogger.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 14:06 pandacommon/pandalogger/__init__.py
--rw-r--r--  2.0 unx      223 b- defN 23-Apr-24 14:06 pandacommon/pandalogger/logger_config.py
--rw-r--r--  2.0 unx     1684 b- defN 23-Apr-24 14:06 pandacommon/pandalogger/logger_utils.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 14:06 pandacommon/pandamsgbkr/__init__.py
--rw-r--r--  2.0 unx    22923 b- defN 23-Apr-24 14:06 pandacommon/pandamsgbkr/msg_bkr_utils.py
--rw-r--r--  2.0 unx    25345 b- defN 23-Apr-24 14:06 pandacommon/pandamsgbkr/msg_processor.py
--rw-r--r--  2.0 unx      849 b- defN 23-Apr-24 14:06 pandacommon/pandautils/ConfigUtils.py
--rw-r--r--  2.0 unx      856 b- defN 23-Apr-24 14:06 pandacommon/pandautils/PandaUtils.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 14:06 pandacommon/pandautils/__init__.py
--rw-r--r--  2.0 unx     2315 b- defN 23-Apr-24 14:06 pandacommon/pandautils/net_utils.py
--rw-r--r--  2.0 unx     1898 b- defN 23-Apr-24 14:06 pandacommon/pandautils/plugin_factory.py
--rw-r--r--  2.0 unx     4613 b- defN 23-Apr-24 14:06 pandacommon/pandautils/thread_utils.py
--rw-r--r--  2.0 unx      116 b- defN 23-Apr-24 14:06 pandacommon/pandautils/utils_config.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 14:06 pandacommon/test/__init__.py
--rw-r--r--  2.0 unx      237 b- defN 23-Apr-24 14:06 pandacommon/test/logtest.py
--rw-r--r--  2.0 unx     6787 b- defN 23-Apr-24 14:06 pandacommon/test/mb_test.py
--rw-r--r--  2.0 unx    11357 b- defN 23-Apr-24 14:07 panda_common-0.0.34.dist-info/LICENSE
--rw-r--r--  2.0 unx      401 b- defN 23-Apr-24 14:07 panda_common-0.0.34.dist-info/METADATA
--rw-r--r--  2.0 unx      110 b- defN 23-Apr-24 14:07 panda_common-0.0.34.dist-info/WHEEL
--rw-r--r--  2.0 unx       12 b- defN 23-Apr-24 14:07 panda_common-0.0.34.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2585 b- defN 23-Apr-24 14:07 panda_common-0.0.34.dist-info/RECORD
-28 files, 103141 bytes uncompressed, 26856 bytes compressed:  74.0%
+Zip file size: 31427 bytes, number of entries: 28
+-rw-r--r--  2.0 unx      938 b- defN 23-May-18 06:49 panda_common-0.0.35.data/data/etc/panda/panda_common.cfg.rpmnew
+-rwxr-xr-x  2.0 unx      275 b- defN 23-May-18 06:49 panda_common-0.0.35.data/scripts/panda_common-install_igtf_ca
+-rw-r--r--  2.0 unx        0 b- defN 23-May-18 06:49 pandacommon/__init__.py
+-rw-r--r--  2.0 unx     2778 b- defN 23-May-18 06:49 pandacommon/liveconfigparser/LiveConfigParser.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-18 06:49 pandacommon/liveconfigparser/__init__.py
+-rw-r--r--  2.0 unx     4479 b- defN 23-May-18 06:49 pandacommon/pandalogger/LogWrapper.py
+-rw-r--r--  2.0 unx    12360 b- defN 23-May-18 06:49 pandacommon/pandalogger/PandaLogger.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-18 06:49 pandacommon/pandalogger/__init__.py
+-rw-r--r--  2.0 unx      223 b- defN 23-May-18 06:49 pandacommon/pandalogger/logger_config.py
+-rw-r--r--  2.0 unx     1684 b- defN 23-May-18 06:49 pandacommon/pandalogger/logger_utils.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-18 06:49 pandacommon/pandamsgbkr/__init__.py
+-rw-r--r--  2.0 unx    23727 b- defN 23-May-18 06:49 pandacommon/pandamsgbkr/msg_bkr_utils.py
+-rw-r--r--  2.0 unx    25583 b- defN 23-May-18 06:49 pandacommon/pandamsgbkr/msg_processor.py
+-rw-r--r--  2.0 unx      849 b- defN 23-May-18 06:49 pandacommon/pandautils/ConfigUtils.py
+-rw-r--r--  2.0 unx      856 b- defN 23-May-18 06:49 pandacommon/pandautils/PandaUtils.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-18 06:49 pandacommon/pandautils/__init__.py
+-rw-r--r--  2.0 unx     2315 b- defN 23-May-18 06:49 pandacommon/pandautils/net_utils.py
+-rw-r--r--  2.0 unx     1898 b- defN 23-May-18 06:49 pandacommon/pandautils/plugin_factory.py
+-rw-r--r--  2.0 unx     4613 b- defN 23-May-18 06:49 pandacommon/pandautils/thread_utils.py
+-rw-r--r--  2.0 unx      116 b- defN 23-May-18 06:49 pandacommon/pandautils/utils_config.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-18 06:49 pandacommon/test/__init__.py
+-rw-r--r--  2.0 unx      237 b- defN 23-May-18 06:49 pandacommon/test/logtest.py
+-rw-r--r--  2.0 unx     6787 b- defN 23-May-18 06:49 pandacommon/test/mb_test.py
+-rw-r--r--  2.0 unx    11357 b- defN 23-May-18 06:49 panda_common-0.0.35.dist-info/LICENSE
+-rw-r--r--  2.0 unx      401 b- defN 23-May-18 06:49 panda_common-0.0.35.dist-info/METADATA
+-rw-r--r--  2.0 unx      110 b- defN 23-May-18 06:49 panda_common-0.0.35.dist-info/WHEEL
+-rw-r--r--  2.0 unx       12 b- defN 23-May-18 06:49 panda_common-0.0.35.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2585 b- defN 23-May-18 06:49 panda_common-0.0.35.dist-info/RECORD
+28 files, 104183 bytes uncompressed, 27141 bytes compressed:  73.9%
```

## zipnote {}

```diff
@@ -1,11 +1,11 @@
-Filename: panda_common-0.0.34.data/data/etc/panda/panda_common.cfg.rpmnew
+Filename: panda_common-0.0.35.data/data/etc/panda/panda_common.cfg.rpmnew
 Comment: 
 
-Filename: panda_common-0.0.34.data/scripts/panda_common-install_igtf_ca
+Filename: panda_common-0.0.35.data/scripts/panda_common-install_igtf_ca
 Comment: 
 
 Filename: pandacommon/__init__.py
 Comment: 
 
 Filename: pandacommon/liveconfigparser/LiveConfigParser.py
 Comment: 
@@ -63,23 +63,23 @@
 
 Filename: pandacommon/test/logtest.py
 Comment: 
 
 Filename: pandacommon/test/mb_test.py
 Comment: 
 
-Filename: panda_common-0.0.34.dist-info/LICENSE
+Filename: panda_common-0.0.35.dist-info/LICENSE
 Comment: 
 
-Filename: panda_common-0.0.34.dist-info/METADATA
+Filename: panda_common-0.0.35.dist-info/METADATA
 Comment: 
 
-Filename: panda_common-0.0.34.dist-info/WHEEL
+Filename: panda_common-0.0.35.dist-info/WHEEL
 Comment: 
 
-Filename: panda_common-0.0.34.dist-info/top_level.txt
+Filename: panda_common-0.0.35.dist-info/top_level.txt
 Comment: 
 
-Filename: panda_common-0.0.34.dist-info/RECORD
+Filename: panda_common-0.0.35.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## pandacommon/pandamsgbkr/msg_bkr_utils.py

```diff
@@ -198,15 +198,15 @@
         elif len(args) == 2:
             # [headers, message] : in older version
             headers, message = args
             return (None, headers, message)
 
     def on_error(self, *args):
         cmd, headers, body = self._parse_args(args)
-        self.logger.error('on_error : {h} | {b}'.format(h=headers, b=body))
+        self.logger.error('on_error from {c}: {h} | {b}'.format(c=self.conn_id, h=headers, b=body))
 
     def on_disconnected(self):
         self.logger.info('on_disconnected start')
         self.mb_proxy._on_disconnected(conn_id=self.conn_id)
         self.logger.info('on_disconnected done')
 
     def on_send(self, *args):
@@ -228,15 +228,15 @@
 
 
 # message broker proxy for receiver
 class MBListenerProxy(object):
 
     def __init__(self, name, host_port_list, destination, use_ssl=False, cert_file=None, key_file=None, vhost=None,
                     username=None, passcode=None, wait=True, ack_mode='client-individual', skip_buffer=False, conn_mode='all',
-                    prefetch_size=None, verbose=False, **kwargs):
+                    prefetch_size=None, max_buffer_len=999, buffer_block_sec=10, verbose=False, **kwargs):
         # logger
         self.logger = logger_utils.make_logger(base_logger, token=name, method_name='MBListenerProxy')
         # name of message queue
         self.name = name
         # connection parameters
         self.host_port_list = host_port_list
         self.use_ssl = use_ssl
@@ -252,14 +252,18 @@
         # connect parameters
         self.connect_params = {'username': username, 'passcode': passcode, 'wait': wait,
                                 'headers': {'client-id': self.client_id}}
         # acknowledge mode
         self.ack_mode = ack_mode
         # associate message buffer
         self.msg_buffer = MsgBuffer(queue_name=self.name)
+        # max length before blocking put to buffer
+        self.max_buffer_len = max_buffer_len
+        # put retry period in seconds to wait for blocking
+        self.buffer_block_sec = buffer_block_sec
         # connection mode; "all" or "any"
         self.conn_mode = conn_mode
         # connection dict
         self.connection_dict = {}
         # message listener dict
         self.listener_dict = {}
         # whether to skip buffer and dump to self.dump_msgs; True only in testing
@@ -346,17 +350,27 @@
             self.logger.debug('_on_message from {c} made message object: {h}'.format(c=conn_id, h=headers))
         if self.skip_buffer:
             if self.verbose:
                 self.logger.debug('_on_message (buffer_skipped) dump the message: {h}'.format(h=headers))
             self.dump_msgs.append(msg_obj.data)
             self._ack(msg_obj.conn_id, msg_obj.msg_id, msg_obj.ack_id)
         else:
+            to_block = True
+            while to_block:
+                n_buffered_msg = self.msg_buffer.size()
+                if n_buffered_msg >= self.max_buffer_len:
+                    if self.verbose:
+                        self.logger.debug('_on_message too many buffered messages ({nbm}); waiting...'.format(nbm=n_buffered_msg))
+                    time.sleep(self.buffer_block_sec)
+                else:
+                    to_block = False
             self.msg_buffer.put(msg_obj)
             if self.verbose:
-                self.logger.debug('_on_message put into buffer: {h}'.format(h=headers))
+                n_buffered_msg = self.msg_buffer.size()
+                self.logger.debug('_on_message put into buffer ({nbm}): {h}'.format(nbm=n_buffered_msg, h=headers))
 
     def _on_disconnected(self, conn_id):
         self.logger.debug('_on_disconnected from {c} called'.format(c=conn_id))
         self.got_disconnected = True
 
     def go(self):
         self.logger.debug('go called')
```

## pandacommon/pandamsgbkr/msg_processor.py

```diff
@@ -51,14 +51,17 @@
                             use_ssl=sconf.get('use_ssl', False),
                             cert_file=sconf.get('cert_file'),
                             key_file=sconf.get('key_file'),
                             username=username,
                             passcode=passcode,
                             vhost=sconf.get('vhost'),
                             wait=True,
+                            ack_mode=qconf.get('ack_mode', 'client-individual'),
+                            max_buffer_len=qconf.get('max_buffer_len', 999),
+                            buffer_block_sec=qconf.get('buffer_block_sec', 10),
                             verbose=sconf.get('verbose', False),
                             **kwargs
                         )
     return mb_proxy
 
 
 # simple message processor plugin Base
```

## Comparing `panda_common-0.0.34.data/data/etc/panda/panda_common.cfg.rpmnew` & `panda_common-0.0.35.data/data/etc/panda/panda_common.cfg.rpmnew`

 * *Files identical despite different names*

## Comparing `panda_common-0.0.34.dist-info/LICENSE` & `panda_common-0.0.35.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `panda_common-0.0.34.dist-info/RECORD` & `panda_common-0.0.35.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,28 +1,28 @@
-panda_common-0.0.34.data/data/etc/panda/panda_common.cfg.rpmnew,sha256=qHMYdba4xTWC1tEHDr_6pIggxrqdZ1IMLI1InyuiaA8,938
-panda_common-0.0.34.data/scripts/panda_common-install_igtf_ca,sha256=mvjhGbRpMfh-urQ1SQ3WkNAXywmV0bHl2O6w_U7r0gk,275
+panda_common-0.0.35.data/data/etc/panda/panda_common.cfg.rpmnew,sha256=qHMYdba4xTWC1tEHDr_6pIggxrqdZ1IMLI1InyuiaA8,938
+panda_common-0.0.35.data/scripts/panda_common-install_igtf_ca,sha256=mvjhGbRpMfh-urQ1SQ3WkNAXywmV0bHl2O6w_U7r0gk,275
 pandacommon/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 pandacommon/liveconfigparser/LiveConfigParser.py,sha256=vHD__kKY0OnW0y51gQ_HRoWv9jenDsXzWzEOJPfA4ys,2778
 pandacommon/liveconfigparser/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 pandacommon/pandalogger/LogWrapper.py,sha256=7RbZ8LI3Xw7xgZBdVkzaIPWu6RwyyeMzbS9rKpac7WM,4479
 pandacommon/pandalogger/PandaLogger.py,sha256=S2NrM5JNlAF0y26U5daWMysF7yu3kOFhPTYopr1IxWs,12360
 pandacommon/pandalogger/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 pandacommon/pandalogger/logger_config.py,sha256=uClNl6MxUnRweHn8VRNDXSuD3aZOeGMk0PAXWPvfM7M,223
 pandacommon/pandalogger/logger_utils.py,sha256=4mGR1R7BZPUGAEqj5LuTy6nbyI65Mc3zdWJA3KtEFOc,1684
 pandacommon/pandamsgbkr/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-pandacommon/pandamsgbkr/msg_bkr_utils.py,sha256=nQnrABn29FtEi9dXGJa8MCZHMJDkJAGC_p2xid0O1fU,22923
-pandacommon/pandamsgbkr/msg_processor.py,sha256=f0aCmWhewXDPiDCWgX7PZRDvIOa7Ixs4jMm2kBoWIpE,25345
+pandacommon/pandamsgbkr/msg_bkr_utils.py,sha256=uMWPnLco_h_AKZz51rpW3gBZEj4LvIb3D8fMH0DlW1M,23727
+pandacommon/pandamsgbkr/msg_processor.py,sha256=jWqAqi0ULk03K0Hg5T985wOihoGAdBCUOAE1eh9ATko,25583
 pandacommon/pandautils/ConfigUtils.py,sha256=ey8PWa_z_u2gfqzbmhaToetMC344FGz2EHA6MxHTF5g,849
 pandacommon/pandautils/PandaUtils.py,sha256=i4aBH-7NphQn6h8Q9YZq1QhawKAmajDXW-HPnknCxOo,856
 pandacommon/pandautils/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 pandacommon/pandautils/net_utils.py,sha256=atFUVvUJ7MW_GyHU03dkX0g9tVNTd0Vc70bIhokcI5w,2315
 pandacommon/pandautils/plugin_factory.py,sha256=FAN5PQGoXs5WdFh0Z9m7pkZ6Swxsx-HScu2gyppIDk0,1898
 pandacommon/pandautils/thread_utils.py,sha256=B1vK-04kyNkG6UTOAFAhEj0j7ln7qWNdU-2nxRkkv5g,4613
 pandacommon/pandautils/utils_config.py,sha256=fWMtIB_q_-25LrqUUkvOYG4jJNlBywqvIs7RSoejAV0,116
 pandacommon/test/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 pandacommon/test/logtest.py,sha256=FMTkfLlE1tsKpzyuzMn792QyzBlryL7VkUlKGmWGRLU,237
 pandacommon/test/mb_test.py,sha256=g4Z7Am2bHCcaXs_JGiJF1sYfXlHgm-uNq3wuOZ7VjBA,6787
-panda_common-0.0.34.dist-info/LICENSE,sha256=tAkwu8-AdEyGxGoSvJ2gVmQdcicWw3j1ZZueVV74M-E,11357
-panda_common-0.0.34.dist-info/METADATA,sha256=xLSP9GR952OZ299s6X7_p3daMYEX_Wry30tPhbvmVj8,401
-panda_common-0.0.34.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
-panda_common-0.0.34.dist-info/top_level.txt,sha256=i6YIYpkG0RkbQLTv3AhT4i-GdbhsAInnjWviNDCb-Sg,12
-panda_common-0.0.34.dist-info/RECORD,,
+panda_common-0.0.35.dist-info/LICENSE,sha256=tAkwu8-AdEyGxGoSvJ2gVmQdcicWw3j1ZZueVV74M-E,11357
+panda_common-0.0.35.dist-info/METADATA,sha256=eDnT2zDSZ3C_TkCipVhpAAmBpFObN49crPV80TOap2s,401
+panda_common-0.0.35.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
+panda_common-0.0.35.dist-info/top_level.txt,sha256=i6YIYpkG0RkbQLTv3AhT4i-GdbhsAInnjWviNDCb-Sg,12
+panda_common-0.0.35.dist-info/RECORD,,
```

